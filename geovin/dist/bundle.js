/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var e={9521:(e,t,i)=>{"use strict";function n(e,t){(function(e){return"string"==typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),i&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function r(e){return Math.min(1,Math.max(0,e))}function a(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function s(e){return e<=1?"".concat(100*Number(e),"%"):e}function o(e){return 1===e.length?"0"+e:String(e)}function l(e,t,i){return{r:255*n(e,255),g:255*n(t,255),b:255*n(i,255)}}function c(e,t,i){e=n(e,255),t=n(t,255),i=n(i,255);var r=Math.max(e,t,i),a=Math.min(e,t,i),s=0,o=0,l=(r+a)/2;if(r===a)o=0,s=0;else{var c=r-a;switch(o=l>.5?c/(2-r-a):c/(r+a),r){case e:s=(t-i)/c+(t<i?6:0);break;case t:s=(i-e)/c+2;break;case i:s=(e-t)/c+4}s/=6}return{h:s,s:o,l}}function u(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*i*(t-e):i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function h(e,t,i){var r,a,s;if(e=n(e,360),t=n(t,100),i=n(i,100),0===t)a=i,s=i,r=i;else{var o=i<.5?i*(1+t):i+t-i*t,l=2*i-o;r=u(l,o,e+1/3),a=u(l,o,e),s=u(l,o,e-1/3)}return{r:255*r,g:255*a,b:255*s}}function d(e,t,i){e=n(e,255),t=n(t,255),i=n(i,255);var r=Math.max(e,t,i),a=Math.min(e,t,i),s=0,o=r,l=r-a,c=0===r?0:l/r;if(r===a)s=0;else{switch(r){case e:s=(t-i)/l+(t<i?6:0);break;case t:s=(i-e)/l+2;break;case i:s=(e-t)/l+4}s/=6}return{h:s,s:c,v:o}}function f(e,t,i){e=6*n(e,360),t=n(t,100),i=n(i,100);var r=Math.floor(e),a=e-r,s=i*(1-t),o=i*(1-a*t),l=i*(1-(1-a)*t),c=r%6;return{r:255*[i,o,s,s,l,i][c],g:255*[l,i,i,o,s,s][c],b:255*[s,s,l,i,i,o][c]}}function p(e,t,i,n){var r=[o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16))];return n&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function m(e,t,i,n,r){var a=[o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16)),o(v(n))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function g(e,t,i,n){return[o(v(n)),o(Math.round(e).toString(16)),o(Math.round(t).toString(16)),o(Math.round(i).toString(16))].join("")}function v(e){return Math.round(255*parseFloat(e)).toString(16)}function b(e){return _(e)/255}function _(e){return parseInt(e,16)}function y(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}i.r(t),i.d(t,{TinyColor:()=>P,bounds:()=>V,convertDecimalToHex:()=>v,convertHexToDecimal:()=>b,default:()=>z,fromRatio:()=>N,hslToRgb:()=>h,hsvToRgb:()=>f,inputToRGB:()=>E,isReadable:()=>O,isValidCSSUnit:()=>R,legacyRandom:()=>L,mostReadable:()=>k,names:()=>A,numberInputToObject:()=>y,parseIntFromHex:()=>_,random:()=>U,readability:()=>D,rgbToHex:()=>p,rgbToHsl:()=>c,rgbToHsv:()=>d,rgbToRgb:()=>l,rgbaToArgbHex:()=>g,rgbaToHex:()=>m,stringInputToObject:()=>M,tinycolor:()=>C,toMsFilter:()=>I});var A={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function E(e){var t={r:0,g:0,b:0},i=1,n=null,r=null,o=null,c=!1,u=!1;return"string"==typeof e&&(e=M(e)),"object"==typeof e&&(R(e.r)&&R(e.g)&&R(e.b)?(t=l(e.r,e.g,e.b),c=!0,u="%"===String(e.r).substr(-1)?"prgb":"rgb"):R(e.h)&&R(e.s)&&R(e.v)?(n=s(e.s),r=s(e.v),t=f(e.h,n,r),c=!0,u="hsv"):R(e.h)&&R(e.s)&&R(e.l)&&(n=s(e.s),o=s(e.l),t=h(e.h,n,o),c=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(i=e.a)),i=a(i),{ok:c,format:e.format||u,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:i}}var w="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),S="[\\s|\\(]+(".concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")\\s*\\)?"),T="[\\s|\\(]+(".concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")[,|\\s]+(").concat(w,")\\s*\\)?"),x={CSS_UNIT:new RegExp(w),rgb:new RegExp("rgb"+S),rgba:new RegExp("rgba"+T),hsl:new RegExp("hsl"+S),hsla:new RegExp("hsla"+T),hsv:new RegExp("hsv"+S),hsva:new RegExp("hsva"+T),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function M(e){if(0===(e=e.trim().toLowerCase()).length)return!1;var t=!1;if(A[e])e=A[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var i=x.rgb.exec(e);return i?{r:i[1],g:i[2],b:i[3]}:(i=x.rgba.exec(e))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=x.hsl.exec(e))?{h:i[1],s:i[2],l:i[3]}:(i=x.hsla.exec(e))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=x.hsv.exec(e))?{h:i[1],s:i[2],v:i[3]}:(i=x.hsva.exec(e))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=x.hex8.exec(e))?{r:_(i[1]),g:_(i[2]),b:_(i[3]),a:b(i[4]),format:t?"name":"hex8"}:(i=x.hex6.exec(e))?{r:_(i[1]),g:_(i[2]),b:_(i[3]),format:t?"name":"hex"}:(i=x.hex4.exec(e))?{r:_(i[1]+i[1]),g:_(i[2]+i[2]),b:_(i[3]+i[3]),a:b(i[4]+i[4]),format:t?"name":"hex8"}:!!(i=x.hex3.exec(e))&&{r:_(i[1]+i[1]),g:_(i[2]+i[2]),b:_(i[3]+i[3]),format:t?"name":"hex"}}function R(e){return Boolean(x.CSS_UNIT.exec(String(e)))}var P=function(){function e(t,i){var n;if(void 0===t&&(t=""),void 0===i&&(i={}),t instanceof e)return t;"number"==typeof t&&(t=y(t)),this.originalInput=t;var r=E(t);this.originalInput=t,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(n=i.format)&&void 0!==n?n:r.format,this.gradientType=i.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,i=e.g/255,n=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=a(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=d(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=d(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),n=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=c(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=c(this.r,this.g,this.b),t=Math.round(360*e.h),i=Math.round(100*e.s),n=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),p(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),m(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*n(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*n(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+p(this.r,this.g,this.b,!1),t=0,i=Object.entries(A);t<i.length;t++){var n=i[t],r=n[0];if(e===n[1])return r}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!=e?e:this.format;var i=!1,n=this.a<1&&this.a>=0;return t||!n||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.l+=t/100,i.l=r(i.l),new e(i)},e.prototype.brighten=function(t){void 0===t&&(t=10);var i=this.toRgb();return i.r=Math.max(0,Math.min(255,i.r-Math.round(-t/100*255))),i.g=Math.max(0,Math.min(255,i.g-Math.round(-t/100*255))),i.b=Math.max(0,Math.min(255,i.b-Math.round(-t/100*255))),new e(i)},e.prototype.darken=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.l-=t/100,i.l=r(i.l),new e(i)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.s-=t/100,i.s=r(i.s),new e(i)},e.prototype.saturate=function(t){void 0===t&&(t=10);var i=this.toHsl();return i.s+=t/100,i.s=r(i.s),new e(i)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var i=this.toHsl(),n=(i.h+t)%360;return i.h=n<0?360+n:n,new e(i)},e.prototype.mix=function(t,i){void 0===i&&(i=50);var n=this.toRgb(),r=new e(t).toRgb(),a=i/100;return new e({r:(r.r-n.r)*a+n.r,g:(r.g-n.g)*a+n.g,b:(r.b-n.b)*a+n.b,a:(r.a-n.a)*a+n.a})},e.prototype.analogous=function(t,i){void 0===t&&(t=6),void 0===i&&(i=30);var n=this.toHsl(),r=360/i,a=[this];for(n.h=(n.h-(r*t>>1)+720)%360;--t;)n.h=(n.h+r)%360,a.push(new e(n));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var i=this.toHsv(),n=i.h,r=i.s,a=i.v,s=[],o=1/t;t--;)s.push(new e({h:n,s:r,v:a})),a=(a+o)%1;return s},e.prototype.splitcomplement=function(){var t=this.toHsl(),i=t.h;return[this,new e({h:(i+72)%360,s:t.s,l:t.l}),new e({h:(i+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var i=this.toRgb(),n=new e(t).toRgb(),r=i.a+n.a*(1-i.a);return new e({r:(i.r*i.a+n.r*n.a*(1-i.a))/r,g:(i.g*i.a+n.g*n.a*(1-i.a))/r,b:(i.b*i.a+n.b*n.a*(1-i.a))/r,a:r})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var i=this.toHsl(),n=i.h,r=[this],a=360/t,s=1;s<t;s++)r.push(new e({h:(n+s*a)%360,s:i.s,l:i.l}));return r},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function C(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),new P(e,t)}function D(e,t){var i=new P(e),n=new P(t);return(Math.max(i.getLuminance(),n.getLuminance())+.05)/(Math.min(i.getLuminance(),n.getLuminance())+.05)}function O(e,t,i){var n,r;void 0===i&&(i={level:"AA",size:"small"});var a=D(e,t);switch((null!==(n=i.level)&&void 0!==n?n:"AA")+(null!==(r=i.size)&&void 0!==r?r:"small")){case"AAsmall":case"AAAlarge":return a>=4.5;case"AAlarge":return a>=3;case"AAAsmall":return a>=7;default:return!1}}function k(e,t,i){void 0===i&&(i={includeFallbackColors:!1,level:"AA",size:"small"});for(var n=null,r=0,a=i.includeFallbackColors,s=i.level,o=i.size,l=0,c=t;l<c.length;l++){var u=c[l],h=D(e,u);h>r&&(r=h,n=new P(u))}return O(e,n,{level:s,size:o})||!a?n:(i.includeFallbackColors=!1,k(e,["#fff","#000"],i))}function I(e,t){var i=new P(e),n="#"+g(i.r,i.g,i.b,i.a),r=n,a=i.gradientType?"GradientType = 1, ":"";if(t){var s=new P(t);r="#"+g(s.r,s.g,s.b,s.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(a,"startColorstr=").concat(n,",endColorstr=").concat(r,")")}function N(e,t){var i={r:s(e.r),g:s(e.g),b:s(e.b)};return void 0!==e.a&&(i.a=Number(e.a)),new P(i,t)}function L(){return new P({r:Math.random(),g:Math.random(),b:Math.random()})}function U(e){if(void 0===e&&(e={}),void 0!==e.count&&null!==e.count){var t=e.count,i=[];for(e.count=void 0;t>i.length;)e.count=null,e.seed&&(e.seed+=1),i.push(U(e));return e.count=t,i}var n=function(e,t){var i=F(function(e){var t=parseInt(e,10);if(!Number.isNaN(t)&&t<360&&t>0)return[t,t];if("string"==typeof e){var i=V.find((function(t){return t.name===e}));if(i){var n=G(i);if(n.hueRange)return n.hueRange}var r=new P(e);if(r.isValid){var a=r.toHsv().h;return[a,a]}}return[0,360]}(e),t);return i<0&&(i=360+i),i}(e.hue,e.seed),r=function(e,t){if("monochrome"===t.hue)return 0;if("random"===t.luminosity)return F([0,100],t.seed);var i=B(e).saturationRange,n=i[0],r=i[1];switch(t.luminosity){case"bright":n=55;break;case"dark":n=r-10;break;case"light":r=55}return F([n,r],t.seed)}(n,e),a=function(e,t,i){var n=function(e,t){for(var i=B(e).lowerBounds,n=0;n<i.length-1;n++){var r=i[n][0],a=i[n][1],s=i[n+1][0],o=i[n+1][1];if(t>=r&&t<=s){var l=(o-a)/(s-r);return l*t+(a-l*r)}}return 0}(e,t),r=100;switch(i.luminosity){case"dark":r=n+20;break;case"light":n=(r+n)/2;break;case"random":n=0,r=100}return F([n,r],i.seed)}(n,r,e),s={h:n,s:r,v:a};return void 0!==e.alpha&&(s.a=e.alpha),new P(s)}function B(e){e>=334&&e<=360&&(e-=360);for(var t=0,i=V;t<i.length;t++){var n=G(i[t]);if(n.hueRange&&e>=n.hueRange[0]&&e<=n.hueRange[1])return n}throw Error("Color not found")}function F(e,t){if(void 0===t)return Math.floor(e[0]+Math.random()*(e[1]+1-e[0]));var i=e[1]||1,n=e[0]||0,r=(t=(9301*t+49297)%233280)/233280;return Math.floor(n+r*(i-n))}function G(e){var t=e.lowerBounds[0][0],i=e.lowerBounds[e.lowerBounds.length-1][0],n=e.lowerBounds[e.lowerBounds.length-1][1],r=e.lowerBounds[0][1];return{name:e.name,hueRange:e.hueRange,lowerBounds:e.lowerBounds,saturationRange:[t,i],brightnessRange:[n,r]}}var V=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}];const z=C},6920:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsModelStatus=void 0,function(e){e.UNKNOWN="unknown",e.NOT_UPLOADED="not_uploaded",e.UPLOADED="uploaded",e.PENDING="pending",e.CONFIRMED="confirmed",e.DENIED="denied",e.DELETED="deleted"}(i||(t.ShapeDiverCommonsModelStatus=i={}))},973:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsModelComputationStatus=void 0,function(e){e.SUCCESS="success",e.TIMEOUT="timeout",e.CHECK_CONFIRMED="checkconfirmed",e.CHECK_DENIED="checkdenied",e.CHECK_PENDING="checkpending",e.MAX_COMBINED_ASSET_SIZE_EXCEEDED="maxcombinedassetsizeexceeded",e.MAX_DB_SIZE_PER_OUTPUT_EXCEEDED="maxdbsizeperoutputexceeded",e.MAX_PARTS_PER_OUTPUT_EXCEEDED="maxpartsperoutputexceeded",e.MAX_ASSET_PARTS_PER_OUTPUT_EXCEEDED="maxassetpartsperoutputexceeded",e.MAX_TRANSFORMATIONS_PER_OUTPUT_EXCEEDED="maxtransformationsperoutputexceeded",e.MAX_PARTS_EXCEEDED="maxpartsexceeded",e.MAX_ASSET_PARTS_EXCEEDED="maxassetpartsexceeded",e.RECOVERABLE_ERROR="recoverableerror",e.UNRECOVERABLE_ERROR="unrecoverableerror",e.NO_OUTPUT_DATA_FOR_DEFAULT_PARAMETER_VALUES="nooutputdatafordefaultparametervalues",e.MODEL_WITHOUT_GEOMETRY_OUTPUT="modelwithoutgeometryoutput",e.UNKNOWN="unknown"}(i||(t.ShapeDiverCommonsModelComputationStatus=i={}))},2594:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverCommonsTicketType=void 0,function(e){e.BACKEND="backend",e.NONE=""}(i||(t.ShapeDiverCommonsTicketType=i={}))},8225:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(3674),t),r(i(4601),t),r(i(5007),t),r(i(8382),t),r(i(9257),t),r(i(7127),t),r(i(2230),t),r(i(5307),t),r(i(999),t),r(i(2799),t),r(i(6707),t),r(i(5912),t),r(i(1898),t),r(i(9138),t),r(i(4625),t)},3674:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestQueryModelComputationStatus=t.ShapeDiverRequestQueryModelStatus=t.ShapeDiverRequestModelComputationQueryType=t.ShapeDiverRequestModelComputationQueryStatus=t.ShapeDiverRequestModelComputationQueryOrder=t.ShapeDiverRequestGltfUploadQueryConversion=t.ShapeDiverRequestLogMessageLevel=t.ShapeDiverRequestTicketType=void 0;const n=i(6920),r=i(973),a=i(2594);var s,o,l,c,u;t.ShapeDiverRequestTicketType=Object.assign({},a.ShapeDiverCommonsTicketType),function(e){e[e.INFO=0]="INFO",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR"}(s||(t.ShapeDiverRequestLogMessageLevel=s={})),function(e){e.NONE="none",e.SCENE="scene",e.USDZ="usdz"}(o||(t.ShapeDiverRequestGltfUploadQueryConversion=o={})),function(e){e.ASC="asc",e.DESC="desc"}(l||(t.ShapeDiverRequestModelComputationQueryOrder=l={})),function(e){e.SUCCESS="success",e.TIMEOUT="timeout",e.OTHER="other",e.ALL="*"}(c||(t.ShapeDiverRequestModelComputationQueryStatus=c={})),function(e){e.COMPUTATION="computation",e.EXPORT="export",e.ALL="*"}(u||(t.ShapeDiverRequestModelComputationQueryType=u={})),t.ShapeDiverRequestQueryModelStatus=Object.assign({},n.ShapeDiverCommonsModelStatus),t.ShapeDiverRequestQueryModelComputationStatus=Object.assign({},r.ShapeDiverCommonsModelComputationStatus)},4601:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5007:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestModelTrustlevel=t.ShapeDiverRequestModelFiletype=void 0,function(e){e.GRASSHOPPER_BINARY="gh",e.GRASSHOPPER_XML="ghx"}(i||(t.ShapeDiverRequestModelFiletype=i={})),function(e){e.UNDEFINED="",e.NONE="none",e.FULL="full"}(n||(t.ShapeDiverRequestModelTrustlevel=n={}))},8382:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverRequestSdtfUploadPartType=void 0,function(e){e.MODEL_SDTF="model/vnd.sdtf"}(i||(t.ShapeDiverRequestSdtfUploadPartType=i={}))},9257:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7127:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2230:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5307:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseErrorType=void 0,function(e){e.ASSERTION_ERROR="SdAssertionError",e.CACHE_ERROR_GENERIC="SdCacheErrorGeneric",e.CONNECTOR_ERROR="SdConnectorError",e.DATABASE_ERROR_FILTER_INVALID="SdDatabaseErrorFilterInvalid",e.DATABASE_ERROR_GENERIC="SdDatabaseErrorGeneric",e.DATABASE_ERROR_SELECTOR_INVALID="SdDatabaseErrorSelectorInvalid",e.DATABASE_ERROR_SELECTOR_NOT_UNIQUE="SdDatabaseErrorSelectorNotUnique",e.EMAILING_ERROR="SdEmailingError",e.ERROR_ENTITY_NOT_FOUND="SdErrorEntityNotFound",e.ERROR_FORBIDDEN="SdErrorForbidden",e.ERROR_GENERIC_CLIENT="SdErrorGenericClient",e.ERROR_GENERIC_INTERNAL="SdErrorGenericInternal",e.ERROR_UNAUTHORIZED="SdErrorUnauthorized",e.ILLEGAL_ARGUMENT_ERROR="SdIllegalArgumentError",e.JWT_VALIDATION_ERROR="SdJwtValidationError",e.MODEL_VALIDATION_ERROR="SdModelValidationError",e.NOT_ACCEPTABLE="SdNotAcceptable",e.NOT_FOUND_ERROR="SdNotFoundError",e.PARAMETER_VALIDATION_ERROR="SdParameterValidationError",e.RATE_LIMIT_ERROR_GENERIC="SdRateLimitErrorGeneric",e.REQUEST_TIMEOUT="SdRequestTimeout",e.REQUEST_VALIDATION_ERROR="SdRequestValidationError",e.RESOURCE_GONE_ERROR="SdResourceGoneError",e.SESSION_GONE_ERROR="SdSessionGoneError",e.SESSION_VALIDATION_ERROR="SdSessionValidationError",e.STORAGE_ERROR_GENERIC="SdStorageErrorGeneric",e.TEXTURE_URL_ERROR="SdTextureUrlError",e.TICKET_VALIDATION_ERROR="SdTicketValidationError",e.TOKEN_MISSING_ERROR="SdTokenMissingError",e.TRANSFORM_CONTENT_ARRAY_ERROR="SdTransformContentArrayError",e.UNCONFIRMED_MODEL_ERROR="SdUnconfirmedModelError",e.UNKNOWN=""}(i||(t.ShapeDiverResponseErrorType=i={}))},999:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseExportDefinitionType=void 0,function(e){e.UNKNOWN="unknown",e.DOWNLOAD="download",e.EMAIL="email",e.SHAPEWAYS="shapeways"}(i||(t.ShapeDiverResponseExportDefinitionType=i={}))},2799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6707:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseModelCleanupProcessType=t.ShapeDiverResponseTicketType=t.ShapeDiverResponseParameterStructure=t.ShapeDiverResponseModelStatus=void 0;const n=i(6920),r=i(2594);var a,s;t.ShapeDiverResponseModelStatus=Object.assign({},n.ShapeDiverCommonsModelStatus),function(e){e.ITEM="item",e.LIST="list",e.TREE="tree"}(a||(t.ShapeDiverResponseParameterStructure=a={})),t.ShapeDiverResponseTicketType=Object.assign({},r.ShapeDiverCommonsTicketType),function(e){e.DELETE_EXPORT_VERSION="delete_export_version",e.DELETE_MODEL_TEXTURE="delete_model_texture",e.DELETE_OUTPUT_VERSION="delete_output_version"}(s||(t.ShapeDiverResponseModelCleanupProcessType=s={}))},5912:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseModelComputationStatus=void 0;const n=i(973);t.ShapeDiverResponseModelComputationStatus=Object.assign({},n.ShapeDiverCommonsModelComputationStatus)},1898:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9138:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1347:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseShapeDiverSdk=void 0;const n=i(309),r=i(6855);t.BaseShapeDiverSdk=class{constructor(e){this.sdkConfig=new r.SdkConfigInternal(e),this.sdkApi=new n.ShapeDiverSdkApi(this.sdkConfig)}setConfigurationValue(e,t){this.sdkConfig.setConfigValue(e,t)}get configuration(){return this.sdkConfig.toConfig()}}},1976:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverError=t.ShapeDiverErrorType=void 0,t.ShapeDiverErrorType={Generic:"sd_gb_sdk_generic",Request:"sd_gb_sdk_request",Response:"sd_gb_sdk_response"};class i extends Error{constructor(e){super(e),this.errorType=t.ShapeDiverErrorType.Generic}}t.ShapeDiverError=i,t.ShapeDiverRequestError=class extends i{constructor(e,i){super(i),this.desc=e,this.errorType=t.ShapeDiverErrorType.Request}},t.ShapeDiverResponseError=class extends i{constructor(e,i,n,r,a){super(e),this.status=i,this.error=n,this.desc=r,this.headers=a,this.errorType=t.ShapeDiverErrorType.Response}}},309:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdkApi=t.ShapeDiverSdkApiResponseType=void 0;const a=r(i(7218)),s=i(1976),o=i(1948);var l,c;!function(e){e.DELETE="DELETE",e.GET="GET",e.HEAD="HEAD",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT"}(l||(l={})),function(e){e.JSON="json",e.DATA="arraybuffer",e.TEXT="text"}(c||(t.ShapeDiverSdkApiResponseType=c={}));class u{constructor(e){this.config=e}buildRequestConfig(e,t,i){const n={method:e,headers:{},responseType:t.responseType,data:void 0};return t.disableCustomHeaders||(n.headers=Object.assign({},this.config.headers)),t.disableAuthorization?(delete n.headers.Authorization,delete n.headers.authorization):this.config.jwt&&(n.headers.Authorization="Bearer "+this.config.jwt),t.contentType&&(n.headers["Content-Type"]=t.contentType,n.data=i),t.accept&&(n.headers.Accept=t.accept),n}buildUrl(e){if("string"!=typeof e)throw new s.ShapeDiverError("No URL or URI was specified");return e.startsWith("http")?e:e.startsWith("/")?`${this.config.baseUrl}/${e.substring(1)}`:`${this.config.baseUrl}/${e}`}static processError(e,t){var i,r,a;return n(this,void 0,void 0,(function*(){if(e.response){const n=e.response;let o;throw o=t===c.DATA?this.convertErrorResponseData(n.data):n.data,new s.ShapeDiverResponseError(o.message||o.desc||(null!==(i=o.error)&&void 0!==i?i:""),n.status,null!==(r=o.error)&&void 0!==r?r:"",null!==(a=o.desc)&&void 0!==a?a:"",n.headers)}throw e.request?new s.ShapeDiverRequestError("Could not send request.","The request was made but no response was received"):new s.ShapeDiverError(e.message)}))}static convertErrorResponseData(e){let t;if("undefined"==typeof window)t=Buffer.from(e).toString();else{if(!window.TextDecoder)throw new s.ShapeDiverError("Received an unknown error object");t=new TextDecoder("utf-8").decode(new Uint8Array(e))}try{return JSON.parse(t)}catch(e){return{message:t}}}static parseResponse(e,t){switch(t){case c.TEXT:case c.JSON:return e;case c.DATA:return e instanceof ArrayBuffer?e:Uint8Array.from(e).buffer;default:(0,o.sdAssertUnreachable)(t)}}head(e,t={}){return n(this,void 0,void 0,(function*(){const i=Object.assign(Object.assign({},t),{responseType:c.JSON}),n=this.buildRequestConfig(l.HEAD,i,void 0);try{const t=yield(0,a.default)(this.buildUrl(e),n);return[t.headers,t.status]}catch(e){return yield u.processError(e,i.responseType)}}))}get(e,t={contentType:"application/json",responseType:c.JSON}){return n(this,void 0,void 0,(function*(){const i=this.buildRequestConfig(l.GET,t,void 0);try{const n=yield(0,a.default)(this.buildUrl(e),i);return[n.headers,u.parseResponse(n.data,t.responseType)]}catch(e){return yield u.processError(e,t.responseType)}}))}post(e,t={},i={contentType:"application/json",responseType:c.JSON}){return n(this,void 0,void 0,(function*(){const n=this.buildRequestConfig(l.POST,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),n);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}put(e,t={},i={contentType:"application/json",responseType:c.JSON}){return n(this,void 0,void 0,(function*(){const n=this.buildRequestConfig(l.PUT,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),n);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}patch(e,t={},i={contentType:"application/json",responseType:c.JSON}){return n(this,void 0,void 0,(function*(){const n=this.buildRequestConfig(l.PATCH,i,t);try{const t=yield(0,a.default)(this.buildUrl(e),n);return[t.headers,u.parseResponse(t.data,i.responseType)]}catch(e){return yield u.processError(e,i.responseType)}}))}delete(e,t={contentType:"application/json",responseType:c.JSON}){return n(this,void 0,void 0,(function*(){const i=this.buildRequestConfig(l.DELETE,t,{});try{const n=yield(0,a.default)(this.buildUrl(e),i);return[n.headers,u.parseResponse(n.data,t.responseType)]}catch(e){return yield u.processError(e,t.responseType)}}))}}t.ShapeDiverSdkApi=u},6855:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdkConfigInternal=t.ShapeDiverSdkConfigType=void 0;const n=i(1976);var r;!function(e){e.BASE_URL="BASE_URL",e.JWT_TOKEN="JWT_TOKEN",e.REQUEST_HEADERS="REQUEST_HEADERS"}(r||(t.ShapeDiverSdkConfigType=r={}));class a{constructor(e){this._baseUrl=e,this._headers={},this._jwt=""}get baseUrl(){return this._baseUrl}get headers(){return this._headers}get jwt(){return this._jwt}toConfig(){return{baseUrl:this._baseUrl,headers:this._headers,jwt:this._jwt}}setConfigValue(e,t){switch(e){case r.BASE_URL:this._baseUrl=a.validateValue(e,t,"string");break;case r.JWT_TOKEN:this._jwt=a.validateValue(e,t,"string");break;case r.REQUEST_HEADERS:this._headers=a.validateValue(e,t,"string_map");break;default:throw new n.ShapeDiverError(`Invalid config-type ${e}`)}}static validateValue(e,t,i){switch(i){case"string":if("string"!=typeof t)throw new n.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string`);break;case"string_map":if("object"!=typeof t||!Object.values(t).every((e=>"string"==typeof e)))throw new n.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string-map`)}return t}}t.SdkConfigInternal=a},2170:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverSdkApi=t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverErrorType=t.ShapeDiverError=t.BaseShapeDiverSdk=t.BaseResourceApi=void 0;const n=i(309);Object.defineProperty(t,"ShapeDiverSdkApi",{enumerable:!0,get:function(){return n.ShapeDiverSdkApi}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return n.ShapeDiverSdkApiResponseType}});const r=i(1347);Object.defineProperty(t,"BaseShapeDiverSdk",{enumerable:!0,get:function(){return r.BaseShapeDiverSdk}});const a=i(6855);Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return a.ShapeDiverSdkConfigType}});const s=i(7711);Object.defineProperty(t,"BaseResourceApi",{enumerable:!0,get:function(){return s.BaseResourceApi}});const o=i(1976);Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return o.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverErrorType",{enumerable:!0,get:function(){return o.ShapeDiverErrorType}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return o.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return o.ShapeDiverResponseError}})},7711:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseResourceApi=void 0,t.BaseResourceApi=class{constructor(e){this.commonPath="/api/v2",this.api=e}buildAnalyticsUri(){return`${this.commonPath}/analytics`}buildArSceneUri(){return`${this.commonPath}/ar-scene`}buildAuthGroupUri(){return`${this.commonPath}/auth_group`}buildTicketUri(e){return`${this.commonPath}/ticket/${e}`}buildSessionUri(e){return`${this.commonPath}/session/${e}`}buildModelUri(e){return`${this.commonPath}/model/${e}`}buildSystemUri(){return`${this.commonPath}/system`}}},1948:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sdAssertUnreachable=void 0;const n=i(1976);t.sdAssertUnreachable=function(e){throw new n.ShapeDiverError("Reached unreachable block")}},5437:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseError=void 0;const n=i(8225),r=i(2170);class a extends r.ShapeDiverError{constructor(e){super(e.message),this.errorType=r.ShapeDiverErrorType.Response,this.status=e.status,this.desc=e.desc,this.error=Object.values(n.ShapeDiverResponseErrorType).includes(e.error)?e.error:n.ShapeDiverResponseErrorType.UNKNOWN}}t.ShapeDiverResponseError=a},675:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdk=t.create=void 0;const n=i(2170),r=i(2665),a=i(3439),s=i(3508),o=i(192),l=i(3342),c=i(2163),u=i(8112),h=i(2632),d=i(8913),f=i(1819),p=i(6489),m=i(6184),g=i(9801);t.create=function(e,t){return new v(e,t)};class v extends n.BaseShapeDiverSdk{constructor(e,t){super(e),t&&this.setConfigurationValue(n.ShapeDiverSdkConfigType.JWT_TOKEN,t),this._analytics=new r.ShapeDiverAnalyticsApi(this.sdkApi),this._arScene=new a.ShapeDiverArSceneApi(this.sdkApi),this._asset=new s.ShapeDiverAssetApi(this.sdkApi),this._export=new o.ShapeDiverExportApi(this.sdkApi),this._file=new l.ShapeDiverFileApi(this.sdkApi),this._gltf=new c.ShapeDiverGltfApi(this.sdkApi),this._model=new u.ShapeDiverModelApi(this.sdkApi),this._output=new h.ShapeDiverOutputApi(this.sdkApi),this._sdtf=new d.ShapeDiverSdtfApi(this.sdkApi),this._session=new f.ShapeDiverSessionApi(this.sdkApi),this._system=new p.ShapeDiverSystemApi(this.sdkApi),this._texture=new m.ShapeDiverTextureApi(this.sdkApi),this._utils=new g.ShapeDiverUtilsApi(this.sdkApi)}get analytics(){return this._analytics}get arScene(){return this._arScene}get asset(){return this._asset}get export(){return this._export}get file(){return this._file}get gltf(){return this._gltf}get model(){return this._model}get output(){return this._output}get sdtf(){return this._sdtf}get session(){return this._session}get system(){return this._system}get texture(){return this._texture}get utils(){return this._utils}}t.ShapeDiverSdk=v},7849:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.isGBResponseError=t.isGBRequestError=t.isGBGenericError=t.isGBError=t.ShapeDiverSdk=t.create=t.ShapeDiverResponseError=t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverRequestError=t.ShapeDiverError=void 0,r(i(8225),t);var a=i(2170);Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return a.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return a.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return a.ShapeDiverSdkApiResponseType}}),Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return a.ShapeDiverSdkConfigType}});var s=i(5437);Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return s.ShapeDiverResponseError}});var o=i(675);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return o.create}}),Object.defineProperty(t,"ShapeDiverSdk",{enumerable:!0,get:function(){return o.ShapeDiverSdk}});var l=i(5008);Object.defineProperty(t,"isGBError",{enumerable:!0,get:function(){return l.isGBError}}),Object.defineProperty(t,"isGBGenericError",{enumerable:!0,get:function(){return l.isGBGenericError}}),Object.defineProperty(t,"isGBRequestError",{enumerable:!0,get:function(){return l.isGBRequestError}}),Object.defineProperty(t,"isGBResponseError",{enumerable:!0,get:function(){return l.isGBResponseError}})},2665:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverAnalyticsApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}modelSessionStatistics(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildAnalyticsUri()+"/session/model",e))[1]}))))}))}}t.ShapeDiverAnalyticsApi=s},3439:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverArSceneApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}exists(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){try{const[t,i]=yield this.api.head(`${this.buildArSceneUri()}/${e}`,{disableAuthorization:!0});return 200===i}catch(e){if(e instanceof r.ShapeDiverResponseError&&404===e.status)return!1;throw e}}))))}))}getGltf(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var t;const[i,n]=yield this.api.get(`${this.buildArSceneUri()}/${e}/gltf`,{responseType:r.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0});return[n,null!==(t=i["Content-Type"])&&void 0!==t?t:i["content-type"]]}))))}))}getUsdz(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var t;const[i,n]=yield this.api.get(`${this.buildArSceneUri()}/${e}/usdz`,{responseType:r.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0});return[n,null!==(t=i["Content-Type"])&&void 0!==t?t:i["content-type"]]}))))}))}}t.ShapeDiverArSceneApi=s},3508:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverAssetApi=void 0;const r=i(2170),a=i(5008),s=/.+\/session\/.+\/export\/.+/,o=/.+\/session\/.+\/output\/.+/,l=/.+\/session\/.+\/texture\/.+/,c=/.+\/cdn-asset-(exports|outputs|textures)\/.+/,u=/.+\/cdn-asset-exports\/.+/,h=/.+\/cdn-asset-outputs\/.+/,d=/.+\/cdn-asset-textures\/.+/;class f extends r.BaseResourceApi{constructor(e){super(e)}getExport(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var i;const[n,a]=yield this.api.get(`${this.buildSessionUri(e)}/export/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=n["Content-Type"])&&void 0!==i?i:n["content-type"]]}))))}))}getOutput(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var i;const[n,a]=yield this.api.get(`${this.buildSessionUri(e)}/output/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=n["Content-Type"])&&void 0!==i?i:n["content-type"]]}))))}))}getSdtfJsonContent(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/output/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.JSON,accept:"model/vnd.sdtf+json"}))[1]}))))}))}getTexture(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var i;const[n,a]=yield this.api.get(`${this.buildSessionUri(e)}/texture/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA});return[a,null!==(i=n["Content-Type"])&&void 0!==i?i:n["content-type"]]}))))}))}getGltf(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/gltf/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}getUsdz(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/usdz/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}downloadImage(e,t){return n(this,void 0,void 0,(function*(){let i;return i=l.test(t)||d.test(t)?t:`${this.buildSessionUri(e)}/image?url=${(0,a.encodeBase64)(t)}`,yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var e;const[n,a]=yield this.api.get(i,{responseType:r.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:c.test(t)});return[a,null!==(e=n["Content-Type"])&&void 0!==e?e:n["content-type"]]}))))}))}getAsset(e){return n(this,void 0,void 0,(function*(){let t;if(s.test(e)||u.test(e))t="export";else if(o.test(e)||h.test(e))t="output";else{if(!l.test(e)&&!d.test(e))throw new r.ShapeDiverError("Cannot fetch asset: Invalid URL (only ShapeDiver asset URLs are allowed).");t="texture"}return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){var i;const[n,a]=yield this.api.get(e,{responseType:r.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:c.test(e)});return[a,null!==(i=n["Content-Type"])&&void 0!==i?i:n["content-type"],t]}))))}))}}t.ShapeDiverAssetApi=f},192:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverExportApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}compute(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export",t))[1]}))))}))}getCache(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export/cache",t))[1]}))))}))}updateDefinitions(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/export",t))[1]}))))}))}listVersions(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/export/"+t+"/list"))[1]}))))}))}}t.ShapeDiverExportApi=s},3342:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverFileApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}list(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${t}/list`))[1]}))))}))}get(e,t,i){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${t}/${i}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}delete(e,t,i){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/file/${t}/${i}`))[1]}))))}))}requestUpload(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/file/upload",t))[1]}))))}))}}t.ShapeDiverFileApi=s},2163:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverGltfApi=void 0;const r=i(8225),a=i(2170),s=i(5008);class o extends a.BaseResourceApi{constructor(e){super(e)}upload(e,t,i,o=r.ShapeDiverRequestGltfUploadQueryConversion.NONE){return n(this,void 0,void 0,(function*(){return yield(0,s.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(`${this.buildSessionUri(e)}/gltf?conversion=${o}`,t,{contentType:i,responseType:a.ShapeDiverSdkApiResponseType.JSON}))[1]}))))}))}}t.ShapeDiverGltfApi=o},8112:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverModelApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}get(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)))[1]}))))}))}create(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.commonPath,e))[1]}))))}))}update(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildModelUri(e),t))[1]}))))}))}delete(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.delete(this.buildModelUri(e)))[1]}))))}))}list(){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.commonPath}/list`))[1]}))))}))}getConfig(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/config"))[1]}))))}))}createConfig(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/config",t))[1]}))))}))}updateConfig(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/config",t))[1]}))))}))}getFile(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/file/download",{contentType:"application/json",responseType:r.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}setDefaultParams(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter/defval",t))[1]}))))}))}updateParameterDefinitions(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter",t))[1]}))))}))}queryComputations(e,t,i,r,s,o,l,c,u){return n(this,void 0,void 0,(function*(){const h=[];return void 0!==t&&h.push("timestamp_from="+t),void 0!==i&&h.push("timestamp_to="+i),void 0!==r&&h.push("limit="+r),void 0!==s&&h.push("strict_limit="+s),void 0!==o&&h.push("order="+o),void 0!==l&&h.push("status="+l),void 0!==c&&h.push("type="+c),void 0!==u&&h.push("offset="+u),yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/computations?"+h.join("&")))[1]}))))}))}enqueueCleanupExports(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/export?untilLastSeen="+t))[1]}))))}))}enqueueCleanupOutputs(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/output?untilLastSeen="+t))[1]}))))}))}enqueueCleanupTextures(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/texture?untilLastSeen="+t))[1]}))))}))}getCleanupStatus(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildModelUri(e)+"/cleanup/status"))[1]}))))}))}}t.ShapeDiverModelApi=s},2632:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverOutputApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}customize(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output",t))[1]}))))}))}getCache(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output/cache",t))[1]}))))}))}updateDefinitions(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.patch(this.buildModelUri(e)+"/output",t))[1]}))))}))}listVersions(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/output/"+t+"/list"))[1]}))))}))}}t.ShapeDiverOutputApi=s},8913:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdtfApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}list(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${t}/list`))[1]}))))}))}get(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${t}`,{responseType:r.ShapeDiverSdkApiResponseType.DATA}))[1]}))))}))}delete(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/sdtf/${t}`))[1]}))))}))}requestUpload(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/sdtf/upload",t))[1]}))))}))}}t.ShapeDiverSdtfApi=s},1819:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSessionApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}ticket(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/ticket",t))[1]}))))}))}init(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildTicketUri(e),t))[1]}))))}))}initForModel(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildModelUri(e)+"/session",t))[1]}))))}))}default(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/default"))[1]}))))}))}close(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/close"))[1]}))))}))}}t.ShapeDiverSessionApi=s},6489:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSystemApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}log(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildSessionUri(e)+"/log/message",t))[1]}))))}))}pruneModel(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.delete(`${this.buildSystemUri()}/model/${e}`))[1]}))))}))}decryptTicket(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildTicketUri(e)))[1]}))))}))}authGroup(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.post(this.buildAuthGroupUri(),e))[1]}))))}))}getMinionInfo(){return n(this,void 0,void 0,(function*(){return(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSystemUri()}/minions/info`))[1]}))))}))}getWorkerInfo(){return n(this,void 0,void 0,(function*(){return(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(`${this.buildSystemUri()}/workers/info`))[1]}))))}))}}t.ShapeDiverSystemApi=s},6184:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverTextureApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}listModelTextures(e){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return(yield this.api.get(this.buildSessionUri(e)+"/texture/list"))[1]}))))}))}}t.ShapeDiverTextureApi=s},9801:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverUtilsApi=void 0;const r=i(2170),a=i(5008);class s extends r.BaseResourceApi{constructor(e){super(e)}upload(e,t,i){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return this.api.put(e,t,{contentType:i,responseType:r.ShapeDiverSdkApiResponseType.JSON,disableAuthorization:!0,disableCustomHeaders:!0})}))))}))}download(e,t){return n(this,void 0,void 0,(function*(){return yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return this.api.get(e,{contentType:"application/json",responseType:t,disableAuthorization:!0,disableCustomHeaders:!0})}))))}))}submitAndWaitForCustomization(e,t,i,r=-1){return n(this,void 0,void 0,(function*(){const o=Date.now(),l=yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return e.output.customize(t,i)})))),c=Date.now()-o;return r=r<0?r:Math.max(0,r-c),s.waitForCustomizationResult(e,t,l,r)}))}submitAndWaitForExport(e,t,i,r=-1){return n(this,void 0,void 0,(function*(){const o=Date.now(),l=yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return e.export.compute(t,i)})))),c=Date.now()-o;return r=r<0?r:Math.max(0,r-c),s.waitForExportResult(e,t,i,l,r)}))}static waitForCustomizationResult(e,t,i,o=-1){return n(this,void 0,void 0,(function*(){if(!i.outputs)return i;const l={};Object.keys(i.outputs).forEach((e=>l[e]=i.outputs[e].version));let c=s.getMaxOutputDelay(i);const u=Date.now();for(;c>0;){if(o>=0){const e=Date.now()-u;if(e>=o)throw new r.ShapeDiverError(`Maximum wait time of ${o} ms reached`);e+c>o&&(c=o-e)}yield(0,a.sleep)(c),i=yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return e.output.getCache(t,l)})))),c=s.getMaxOutputDelay(i)}return i}))}static waitForExportResult(e,t,i,o,l=-1){return n(this,void 0,void 0,(function*(){let c=s.getMaxExportDelay(o,i);const u=Date.now();for(;c>0;){if(l>=0){const e=Date.now()-u;if(e>=l)throw new r.ShapeDiverError(`Maximum wait time of ${l} ms reached`);e+c>l&&(c=l-e)}yield(0,a.sleep)(c),o=yield(0,a.sendRequest)((()=>n(this,void 0,void 0,(function*(){return e.export.getCache(t,i)})))),c=s.getMaxExportDelay(o,i)}return o}))}static getMaxOutputDelay(e){return Math.max(...Object.values(e.outputs).map((e=>e)).map((e=>{var t;return null!==(t=e.delay)&&void 0!==t?t:-1})))}static getMaxExportDelay(e,t){var i,n,r;const a=Array.isArray(t.exports)?t.exports:[t.exports.id],s=null!==(i=t.outputs)&&void 0!==i?i:[];return Math.max(...Object.values(null!==(n=e.exports)&&void 0!==n?n:{}).filter((e=>a.includes(e.id))).map((e=>e)).map((e=>{var t;return null!==(t=e.delay)&&void 0!==t?t:-1})),...Object.values(null!==(r=e.outputs)&&void 0!==r?r:{}).filter((e=>s.includes(e.id))).map((e=>e)).map((e=>{var t;return null!==(t=e.delay)&&void 0!==t?t:-1})))}}t.ShapeDiverUtilsApi=s},5008:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.sleep=t.sendRequest=t.isGBResponseError=t.isGBRequestError=t.isGBGenericError=t.isGBError=void 0;const r=i(2170),a=i(5437);function s(e){return new Promise((t=>setTimeout(t,e)))}t.isGBError=function(e){return e instanceof Error&&"errorType"in e&&Object.values(r.ShapeDiverErrorType).includes(e.errorType)},t.isGBGenericError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===r.ShapeDiverErrorType.Generic},t.isGBRequestError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===r.ShapeDiverErrorType.Request},t.isGBResponseError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===r.ShapeDiverErrorType.Response},t.sendRequest=function(e){var t;return n(this,void 0,void 0,(function*(){let i=0;for(;i<5;)try{return yield e()}catch(e){if(i++,e instanceof r.ShapeDiverResponseError){if(429===e.status){const i=null!==(t=e.headers["retry-after"])&&void 0!==t?t:60;yield s(1e3*Number(i));continue}if(502===e.status){yield s(1e3);continue}throw new a.ShapeDiverResponseError(e)}throw e}throw new r.ShapeDiverError("Could not send request: Retry-limit reached")}))},t.sleep=s,t.encodeBase64=function(e){try{return btoa(e)}catch(t){return Buffer.from(e).toString("base64")}}},8343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfError=t.SdtfErrorType=void 0,t.SdtfErrorType={Generic:"sd_sdtf_generic"};class i extends Error{constructor(e){super(e),this.errorType=t.SdtfErrorType.Generic}}t.SdtfError=i},7079:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(8454),t),r(i(2464),t),r(i(5091),t),r(i(3266),t),r(i(710),t),r(i(1816),t),r(i(3102),t),r(i(9294),t),r(i(6424),t),r(i(2332),t),r(i(8291),t),r(i(797),t),r(i(9928),t),r(i(4133),t),r(i(3730),t),r(i(6209),t),r(i(539),t),r(i(3183),t),r(i(435),t),r(i(6617),t),r(i(8425),t),r(i(5727),t),r(i(3810),t),r(i(6216),t),r(i(6434),t),r(i(6214),t),r(i(1348),t),r(i(7616),t),r(i(4221),t),r(i(6215),t),r(i(5299),t),r(i(530),t),r(i(2115),t),r(i(3297),t),r(i(6894),t),r(i(438),t),r(i(5308),t),r(i(1128),t),r(i(9311),t),r(i(7343),t),r(i(1019),t),r(i(6057),t),r(i(4556),t),r(i(8343),t)},8454:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2464:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5091:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3730:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6209:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},539:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3266:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},710:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1816:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3102:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9294:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6424:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2332:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8291:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},797:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9928:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4133:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4221:(e,t)=>{"use strict";var i,n,r,a;Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfTypeHintName=t.SdtfRhinoTypeHintName=t.SdtfGrasshopperTypeHintName=t.SdtfGeometryTypeHintName=t.SdtfPrimitiveTypeHintName=void 0,function(e){e.BOOLEAN="boolean",e.CHAR="char",e.COLOR="color",e.DATA="data",e.DECIMAL="decimal",e.DOUBLE="double",e.GUID="guid",e.IMAGE="image",e.INT8="int8",e.INT16="int16",e.INT32="int32",e.INT64="int64",e.JSON="json",e.SINGLE="single",e.STRING="string",e.UINT8="uint8",e.UINT16="uint16",e.UINT32="uint32",e.UINT64="uint64"}(i=t.SdtfPrimitiveTypeHintName||(t.SdtfPrimitiveTypeHintName={})),function(e){e.GEOMETRY_ARC="geometry.arc",e.GEOMETRY_BOUNDING_BOX="geometry.boundingbox",e.GEOMETRY_BOX="geometry.box",e.GEOMETRY_CIRCLE="geometry.circle",e.GEOMETRY_COMPLEX="geometry.complex",e.GEOMETRY_CONE="geometry.cone",e.GEOMETRY_CYLINDER="geometry.cylinder",e.GEOMETRY_ELLIPSE="geometry.ellipse",e.GEOMETRY_INTERVAL="geometry.interval",e.GEOMETRY_INTERVAL2="geometry.interval2",e.GEOMETRY_LINE="geometry.line",e.GEOMETRY_MATRIX="geometry.matrix",e.GEOMETRY_PLANE="geometry.plane",e.GEOMETRY_POINT="geometry.point",e.GEOMETRY_POINT2D="geometry.point2d",e.GEOMETRY_POINT3D="geometry.point3d",e.GEOMETRY_POINT4D="geometry.point4d",e.GEOMETRY_POLYLINE="geometry.polyline",e.GEOMETRY_RAY="geometry.ray",e.GEOMETRY_RECTANGLE="geometry.rectangle",e.GEOMETRY_SPHERE="geometry.sphere",e.GEOMETRY_TORUS="geometry.torus",e.GEOMETRY_TRANSFORM="geometry.transform",e.GEOMETRY_TRANSFORM_LIST="geometry.transformlist",e.GEOMETRY_VECTOR="geometry.vector",e.GEOMETRY_VECTOR2D="geometry.vector2d",e.GEOMETRY_VECTOR3D="geometry.vector3d",e.GEOMETRY_VECTOR4D="geometry.vector4d"}(n=t.SdtfGeometryTypeHintName||(t.SdtfGeometryTypeHintName={})),function(e){e.GRASSHOPPER_PATH="grasshopper.path"}(r=t.SdtfGrasshopperTypeHintName||(t.SdtfGrasshopperTypeHintName={})),function(e){e.RHINO_ARC_CURVE="rhino.arccurve",e.RHINO_BREP="rhino.brep",e.RHINO_CURVE="rhino.curve",e.RHINO_EXTRUSION="rhino.extrusion",e.RHINO_LINE_CURVE="rhino.linecurve",e.RHINO_MESH="rhino.mesh",e.RHINO_NURBS_CURVE="rhino.nurbscurve",e.RHINO_NURBS_SURFACE="rhino.nurbssurface",e.RHINO_PLANE_SURFACE="rhino.planesurface",e.RHINO_POINT="rhino.point",e.RHINO_POLY_CURVE="rhino.polycurve",e.RHINO_POLYLINE_CURVE="rhino.polylinecurve",e.RHINO_REV_SURFACE="rhino.revsurface",e.RHINO_SUBD="rhino.subd",e.RHINO_SURFACE="rhino.surface"}(a=t.SdtfRhinoTypeHintName||(t.SdtfRhinoTypeHintName={})),t.SdtfTypeHintName=Object.assign(Object.assign(Object.assign(Object.assign({},i),n),r),a)},3183:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},435:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6617:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8425:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5727:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6216:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6434:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6214:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1348:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7616:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6215:(e,t)=>{"use strict";function i(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}function n(e){return i(e)&&"number"==typeof e}function r(e){return n(e)&&Number.isInteger(Number(e))}function a(e){return r(e)&&Number(e)>=0}function s(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isNil=t.isBinaryData=t.isDataObject=t.isUintArray=t.isIntArray=t.isNumberArray=t.isNonEmptyString=t.isUint=t.isInt=t.isNumber=t.isNumeric=void 0,t.isNumeric=i,t.isNumber=n,t.isInt=r,t.isUint=a,t.isNonEmptyString=function(e){return"string"==typeof e&&""!==e},t.isNumberArray=function(e){return Array.isArray(e)&&e.every((e=>n(e)))},t.isIntArray=function(e){return Array.isArray(e)&&e.every((e=>r(e)))},t.isUintArray=function(e){return Array.isArray(e)&&e.every((e=>a(e)))},t.isDataObject=function(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e&&!s(e)},t.isBinaryData=s,t.isNil=function(e){return null==e}},5299:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryDeepCopy=t.enumValues=t.enumKeys=t.sdAssertUnreachable=t.isSdtfError=void 0;const n=i(8343);function r(e){return Object.keys(e).filter((e=>Number.isNaN(+e)))}t.isSdtfError=function(e){return e instanceof Error&&"errorType"in e&&Object.values(n.SdtfErrorType).includes(e.errorType)},t.sdAssertUnreachable=function(e){throw new n.SdtfError("Reached unreachable block.")},t.enumKeys=r,t.enumValues=function(e){return r(e).map((t=>e[t]))},t.tryDeepCopy=function(e){try{return structuredClone(e)}catch(t){return e}}},4556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2115:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3297:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},438:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5308:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1128:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},9311:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},7343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6057:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2350:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeGuard=void 0;const n=i(7079);t.SdtfGeometryTypeGuard=class{static assertArc(e){if(!this.isArc(e))throw new n.SdtfError("Assertion error: Value is not a geometry arc type.")}static isArc(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius&&"number"==typeof e.angle}static assertBoundingBox(e){if(!this.isBoundingBox(e))throw new n.SdtfError("Assertion error: Value is not a geometry bounding box type.")}static isBoundingBox(e){return(0,n.isDataObject)(e)&&this.isPoint3d(e.min)&&this.isPoint3d(e.max)}static assertBox(e){if(!this.isBox(e))throw new n.SdtfError("Assertion error: Value is not a geometry box type.")}static isBox(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&Array.isArray(e.extents)&&3===e.extents.length&&e.extents.every((e=>(0,n.isNumberArray)(e)&&2===e.length))}static assertCircle(e){if(!this.isCircle(e))throw new n.SdtfError("Assertion error: Value is not a geometry circle type.")}static isCircle(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius}static assertComplex(e){if(!this.isComplex(e))throw new n.SdtfError("Assertion error: Value is not a geometry complex type.")}static isComplex(e){return(0,n.isNumberArray)(e)&&2===e.length}static assertCone(e){if(!this.isCone(e))throw new n.SdtfError("Assertion error: Value is not a geometry cone type.")}static isCone(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.radius&&"number"==typeof e.height}static assertCylinder(e){if(!this.isCylinder(e))throw new n.SdtfError("Assertion error: Value is not a geometry cylinder type.")}static isCylinder(e){return(0,n.isDataObject)(e)&&this.isCircle(e.baseCircle)&&"number"==typeof e.height}static assertEllipse(e){if(!this.isEllipse(e))throw new n.SdtfError("Assertion error: Value is not a geometry ellipse type.")}static isEllipse(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.r1&&"number"==typeof e.r2}static assertInterval(e){if(!this.isInterval(e))throw new n.SdtfError("Assertion error: Value is not a geometry interval type.")}static isInterval(e){return(0,n.isNumberArray)(e)&&2===e.length}static assertInterval2(e){if(!this.isInterval2(e))throw new n.SdtfError("Assertion error: Value is not a geometry interval2 type.")}static isInterval2(e){return(0,n.isDataObject)(e)&&this.isInterval(e.u)&&this.isInterval(e.v)}static assertLine(e){if(!this.isLine(e))throw new n.SdtfError("Assertion error: Value is not a geometry line type.")}static isLine(e){return Array.isArray(e)&&2===e.length&&this.isPoint3d(e[0])&&this.isPoint3d(e[1])}static assertMatrix(e){if(!this.isMatrix(e))throw new n.SdtfError("Assertion error: Value is not a geometry matrix type.")}static isMatrix(e){if(!Array.isArray(e))return!1;const t=e[0].length;return e.every((e=>(0,n.isNumberArray)(e)&&e.length===t))}static assertPlane(e){if(!this.isPlane(e))throw new n.SdtfError("Assertion error: Value is not a geometry plane type.")}static isPlane(e){return Array.isArray(e)&&3===e.length&&this.isPoint3d(e[0])&&this.isVector3d(e[1])&&this.isVector3d(e[2])}static assertPoint(e){if(!this.isPoint(e))throw new n.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint(e){return(0,n.isNumberArray)(e)&&(2===e.length||3===e.length||4===e.length)}static assertPoint2d(e){if(!this.isPoint2d(e))throw new n.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint2d(e){return(0,n.isNumberArray)(e)&&2===e.length}static assertPoint3d(e){if(!this.isPoint3d(e))throw new n.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint3d(e){return(0,n.isNumberArray)(e)&&3===e.length}static assertPoint4d(e){if(!this.isPoint4d(e))throw new n.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint4d(e){return(0,n.isNumberArray)(e)&&4===e.length}static assertPolyline(e){if(!this.isPolyline(e))throw new n.SdtfError("Assertion error: Value is not a geometry polyline type.")}static isPolyline(e){return Array.isArray(e)&&e.every((e=>this.isPoint3d(e)))}static assertRay(e){if(!this.isRay(e))throw new n.SdtfError("Assertion error: Value is not a geometry ray type.")}static isRay(e){return Array.isArray(e)&&2===e.length&&this.isPoint3d(e[0])&&this.isVector3d(e[1])}static assertRectangle(e){if(!this.isRectangle(e))throw new n.SdtfError("Assertion error: Value is not a geometry rectangle type.")}static isRectangle(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&this.isInterval(e.x)&&this.isInterval(e.y)}static assertSphere(e){if(!this.isSphere(e))throw new n.SdtfError("Assertion error: Value is not a geometry sphere type.")}static isSphere(e){return(0,n.isDataObject)(e)&&this.isPoint3d(e.center)&&"number"==typeof e.radius}static assertTorus(e){if(!this.isTorus(e))throw new n.SdtfError("Assertion error: Value is not a geometry torus type.")}static isTorus(e){return(0,n.isDataObject)(e)&&this.isPlane(e.plane)&&"number"==typeof e.majorRadius&&"number"==typeof e.minorRadius}static assertTransform(e){if(!this.isTransform(e))throw new n.SdtfError("Assertion error: Value is not a geometry transform type.")}static isTransform(e){return Array.isArray(e)&&4===e.length&&e.every((e=>(0,n.isNumberArray)(e)&&4===e.length))}static assertTransformList(e){if(!this.isTransformList(e))throw new n.SdtfError("Assertion error: Value is not a geometry transform-list type.")}static isTransformList(e){return Array.isArray(e)&&e.every((e=>this.isTransform(e)))}static assertVector(e){if(!this.isVector(e))throw new n.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector(e){return(0,n.isNumberArray)(e)&&(2===e.length||3===e.length||4===e.length)}static assertVector2d(e){if(!this.isVector2d(e))throw new n.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector2d(e){return(0,n.isNumberArray)(e)&&2===e.length}static assertVector3d(e){if(!this.isVector3d(e))throw new n.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector3d(e){return(0,n.isNumberArray)(e)&&3===e.length}static assertVector4d(e){if(!this.isVector4d(e))throw new n.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector4d(e){return(0,n.isNumberArray)(e)&&4===e.length}}},8814:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeIntegration=void 0;const r=i(7079),a=i(1753),s=i(5716);t.SdtfGeometryTypeIntegration=class{isTypeHintSupported(e){return(0,r.enumValues)(r.SdtfGeometryTypeHintName).includes(e)}init(){return n(this,void 0,void 0,(function*(){}))}getReader(){return new a.SdtfGeometryTypeReader}getWriter(e){return new s.SdtfGeometryTypeWriter(e)}}},1753:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeReader=void 0;const r=i(7079),a=i(5400);t.SdtfGeometryTypeReader=class{constructor(){this.validator=new a.SdtfGeometryTypeValidator}readComponent(e){var t;return n(this,void 0,void 0,(function*(){const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;if(!this.validator.validateComponent(i,e.value,e.accessor))throw new r.SdtfError(`Cannot read value of type '${i}': Invalid component.`);switch(i){case r.SdtfGeometryTypeHintName.GEOMETRY_ARC:case r.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case r.SdtfGeometryTypeHintName.GEOMETRY_BOX:case r.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case r.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case r.SdtfGeometryTypeHintName.GEOMETRY_CONE:case r.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case r.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case r.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case r.SdtfGeometryTypeHintName.GEOMETRY_LINE:case r.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case r.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case r.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case r.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case r.SdtfGeometryTypeHintName.GEOMETRY_RAY:case r.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case r.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case r.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case r.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case r.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return e.value;default:(0,r.sdAssertUnreachable)(i)}}))}}},5400:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeValidator=void 0;const n=i(7079),r=i(2350);t.SdtfGeometryTypeValidator=class{validateComponent(e,t,i){switch(e){case n.SdtfGeometryTypeHintName.GEOMETRY_ARC:return r.SdtfGeometryTypeGuard.isArc(t);case n.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:return r.SdtfGeometryTypeGuard.isBoundingBox(t);case n.SdtfGeometryTypeHintName.GEOMETRY_BOX:return r.SdtfGeometryTypeGuard.isBox(t);case n.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:return r.SdtfGeometryTypeGuard.isCircle(t);case n.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:return r.SdtfGeometryTypeGuard.isComplex(t);case n.SdtfGeometryTypeHintName.GEOMETRY_CONE:return r.SdtfGeometryTypeGuard.isCone(t);case n.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:return r.SdtfGeometryTypeGuard.isCylinder(t);case n.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:return r.SdtfGeometryTypeGuard.isEllipse(t);case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:return r.SdtfGeometryTypeGuard.isInterval(t);case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:return r.SdtfGeometryTypeGuard.isInterval2(t);case n.SdtfGeometryTypeHintName.GEOMETRY_LINE:return r.SdtfGeometryTypeGuard.isLine(t);case n.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:return r.SdtfGeometryTypeGuard.isMatrix(t);case n.SdtfGeometryTypeHintName.GEOMETRY_PLANE:return r.SdtfGeometryTypeGuard.isPlane(t);case n.SdtfGeometryTypeHintName.GEOMETRY_POINT:return r.SdtfGeometryTypeGuard.isPoint(t);case n.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:return r.SdtfGeometryTypeGuard.isPoint2d(t);case n.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:return r.SdtfGeometryTypeGuard.isPoint3d(t);case n.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:return r.SdtfGeometryTypeGuard.isPoint4d(t);case n.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:return r.SdtfGeometryTypeGuard.isPolyline(t);case n.SdtfGeometryTypeHintName.GEOMETRY_RAY:return r.SdtfGeometryTypeGuard.isRay(t);case n.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:return r.SdtfGeometryTypeGuard.isRectangle(t);case n.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:return r.SdtfGeometryTypeGuard.isSphere(t);case n.SdtfGeometryTypeHintName.GEOMETRY_TORUS:return r.SdtfGeometryTypeGuard.isTorus(t);case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:return r.SdtfGeometryTypeGuard.isTransform(t);case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:return r.SdtfGeometryTypeGuard.isTransformList(t);case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:return r.SdtfGeometryTypeGuard.isVector(t);case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:return r.SdtfGeometryTypeGuard.isVector2d(t);case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:return r.SdtfGeometryTypeGuard.isVector3d(t);case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return r.SdtfGeometryTypeGuard.isVector4d(t);default:(0,n.sdAssertUnreachable)(e)}}}},5716:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGeometryTypeWriter=void 0;const n=i(7079),r=i(5400);t.SdtfGeometryTypeWriter=class{constructor(e){this.factory=e,this.validator=new r.SdtfGeometryTypeValidator}writeComponent(e){var t;const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;switch(i){case n.SdtfGeometryTypeHintName.GEOMETRY_ARC:case n.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case n.SdtfGeometryTypeHintName.GEOMETRY_BOX:case n.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case n.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case n.SdtfGeometryTypeHintName.GEOMETRY_CONE:case n.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case n.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case n.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case n.SdtfGeometryTypeHintName.GEOMETRY_LINE:case n.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case n.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case n.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case n.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case n.SdtfGeometryTypeHintName.GEOMETRY_RAY:case n.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case n.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case n.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case n.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case n.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:delete e.accessor;break;default:(0,n.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new n.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}},8701:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(318),t),r(i(2350),t),r(i(8814),t)},7439:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8542:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeGuard=void 0;const n=i(7079);t.SdtfPrimitiveTypeGuard=class{static assertBoolean(e){if(!this.isBoolean(e))throw new n.SdtfError("Assertion error: Value is not a primitive boolean type.")}static isBoolean(e){return"boolean"==typeof e}static isBooleanType(e){return e===n.SdtfPrimitiveTypeHintName.BOOLEAN}static assertString(e){if(!this.isString(e))throw new n.SdtfError("Assertion error: Value is not a primitive string type.")}static isString(e){return"string"==typeof e}static isStringType(e){return[n.SdtfPrimitiveTypeHintName.CHAR,n.SdtfPrimitiveTypeHintName.GUID,n.SdtfPrimitiveTypeHintName.STRING].includes(e)}static assertNumber(e){if(!this.isNumber(e))throw new n.SdtfError("Assertion error: Value is not a primitive number type.")}static isNumber(e){return(0,n.isNumber)(e)}static isNumberType(e){return[n.SdtfPrimitiveTypeHintName.DECIMAL,n.SdtfPrimitiveTypeHintName.DOUBLE,n.SdtfPrimitiveTypeHintName.SINGLE,n.SdtfPrimitiveTypeHintName.INT8,n.SdtfPrimitiveTypeHintName.INT16,n.SdtfPrimitiveTypeHintName.INT32,n.SdtfPrimitiveTypeHintName.INT64,n.SdtfPrimitiveTypeHintName.UINT8,n.SdtfPrimitiveTypeHintName.UINT16,n.SdtfPrimitiveTypeHintName.UINT32,n.SdtfPrimitiveTypeHintName.UINT64].includes(e)}static assertColor(e){if(!this.isColor(e))throw new n.SdtfError("Assertion error: Value is not a primitive color type.")}static isColor(e){return(0,n.isNumberArray)(e)&&4===e.length}static isColorType(e){return e===n.SdtfPrimitiveTypeHintName.COLOR}static assertDataView(e){if(!this.isDataView(e))throw new n.SdtfError("Assertion error: Value is not a primitive data type.")}static isDataView(e){return ArrayBuffer.isView(e)}static isDataViewType(e){return[n.SdtfPrimitiveTypeHintName.DATA,n.SdtfPrimitiveTypeHintName.IMAGE].includes(e)}static assertJson(e){if(!this.isJson(e))throw new n.SdtfError("Assertion error: Value is not a primitive json type.")}static isJson(e){return(0,n.isDataObject)(e)||Array.isArray(e)}static isJsonType(e){return e===n.SdtfPrimitiveTypeHintName.JSON}}},487:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeIntegration=void 0;const r=i(7079),a=i(8642),s=i(9564);t.SdtfPrimitiveTypeIntegration=class{isTypeHintSupported(e){return(0,r.enumValues)(r.SdtfPrimitiveTypeHintName).includes(e)}init(){return n(this,void 0,void 0,(function*(){}))}getReader(){return new a.SdtfPrimitiveTypeReader}getWriter(e){return new s.SdtfPrimitiveTypeWriter(e)}}},8642:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeReader=void 0;const r=i(7079),a=i(8383);t.SdtfPrimitiveTypeReader=class{constructor(){this.validator=new a.SdtfPrimitiveTypeValidator}readComponent(e){var t,i;return n(this,void 0,void 0,(function*(){const n=null===(t=e.typeHint)||void 0===t?void 0:t.name;if(!this.validator.validateComponent(n,e.value,e.accessor))throw new r.SdtfError(`Cannot read value of type '${n}': Invalid component.`);switch(n){case r.SdtfPrimitiveTypeHintName.BOOLEAN:case r.SdtfPrimitiveTypeHintName.CHAR:case r.SdtfPrimitiveTypeHintName.DECIMAL:case r.SdtfPrimitiveTypeHintName.DOUBLE:case r.SdtfPrimitiveTypeHintName.GUID:case r.SdtfPrimitiveTypeHintName.INT8:case r.SdtfPrimitiveTypeHintName.INT16:case r.SdtfPrimitiveTypeHintName.INT32:case r.SdtfPrimitiveTypeHintName.INT64:case r.SdtfPrimitiveTypeHintName.JSON:case r.SdtfPrimitiveTypeHintName.SINGLE:case r.SdtfPrimitiveTypeHintName.STRING:case r.SdtfPrimitiveTypeHintName.UINT8:case r.SdtfPrimitiveTypeHintName.UINT16:case r.SdtfPrimitiveTypeHintName.UINT32:case r.SdtfPrimitiveTypeHintName.UINT64:return e.value;case r.SdtfPrimitiveTypeHintName.COLOR:return this.mapColor(e.value);case r.SdtfPrimitiveTypeHintName.DATA:case r.SdtfPrimitiveTypeHintName.IMAGE:return this.mapGenericData(yield null===(i=e.accessor)||void 0===i?void 0:i.getContent());default:(0,r.sdAssertUnreachable)(n)}}))}mapColor(e){let t;t=Array.isArray(e)?e:e.split(",").map((e=>Number(e)));let i=[...t];return 3===i.length&&(i=[...t,1]),i}mapGenericData(e){return null==e?void 0:e.data}}},8383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeValidator=void 0;const n=i(7079),r=i(3776),a=i(8542),s=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,o=new r.Decimal(340282347e30),l=new r.Decimal(-340282347e30);class c{validateComponent(e,t,i){switch(e){case n.SdtfPrimitiveTypeHintName.BOOLEAN:return a.SdtfPrimitiveTypeGuard.isBoolean(t);case n.SdtfPrimitiveTypeHintName.CHAR:return c.validateCharType(t);case n.SdtfPrimitiveTypeHintName.COLOR:return c.validateColorType(t);case n.SdtfPrimitiveTypeHintName.DATA:return!!i&&void 0===t;case n.SdtfPrimitiveTypeHintName.DECIMAL:case n.SdtfPrimitiveTypeHintName.DOUBLE:return a.SdtfPrimitiveTypeGuard.isNumber(t);case n.SdtfPrimitiveTypeHintName.GUID:return c.validateGuidType(t);case n.SdtfPrimitiveTypeHintName.IMAGE:return!!i&&void 0===t;case n.SdtfPrimitiveTypeHintName.INT8:return c.validateInt8Type(t);case n.SdtfPrimitiveTypeHintName.INT16:return c.validateInt16Type(t);case n.SdtfPrimitiveTypeHintName.INT32:return c.validateInt32Type(t);case n.SdtfPrimitiveTypeHintName.INT64:return c.validateInt64Type(t);case n.SdtfPrimitiveTypeHintName.JSON:return a.SdtfPrimitiveTypeGuard.isJson(t);case n.SdtfPrimitiveTypeHintName.SINGLE:return c.validateSingleType(t);case n.SdtfPrimitiveTypeHintName.STRING:return a.SdtfPrimitiveTypeGuard.isString(t);case n.SdtfPrimitiveTypeHintName.UINT8:return c.validateUint8Type(t);case n.SdtfPrimitiveTypeHintName.UINT16:return c.validateUint16Type(t);case n.SdtfPrimitiveTypeHintName.UINT32:return c.validateUint32Type(t);case n.SdtfPrimitiveTypeHintName.UINT64:return c.validateUint64Type(t);default:(0,n.sdAssertUnreachable)(e)}}static validateCharType(e){return a.SdtfPrimitiveTypeGuard.isString(e)&&1===e.length}static validateColorType(e){if((0,n.isNumberArray)(e)&&e.length>=3&&e.length<=4)return!0;if("string"!=typeof e)return!1;const t=e.split(",");return(3===t.length||4===t.length)&&t.every((e=>(0,n.isNumeric)(e)))}static validateGuidType(e){return a.SdtfPrimitiveTypeGuard.isString(e)&&s.test(e)}static validateInt8Type(e){return(0,n.isInt)(e)&&e>=-128&&e<=127}static validateInt16Type(e){return(0,n.isInt)(e)&&e>=-32768&&e<=32767}static validateInt32Type(e){return(0,n.isInt)(e)&&e>=-2147483648&&e<=2147483647}static validateInt64Type(e){return(0,n.isInt)(e)&&e>=-0x8000000000000000&&e<=0x8000000000000000}static validateSingleType(e){if(!(0,n.isNumber)(e))return!1;const t=new r.Decimal(e);return t.precision()<=9&&t.comparedTo(l)>=0&&t.comparedTo(o)<=0}static validateUint8Type(e){return(0,n.isUint)(e)&&e<=255}static validateUint16Type(e){return(0,n.isUint)(e)&&e<=65535}static validateUint32Type(e){return(0,n.isUint)(e)&&e<=4294967295}static validateUint64Type(e){return(0,n.isUint)(e)}}t.SdtfPrimitiveTypeValidator=c},9564:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeWriter=void 0;const n=i(7079),r=i(8383);t.SdtfPrimitiveTypeWriter=class{constructor(e){this.factory=e,this.validator=new r.SdtfPrimitiveTypeValidator}writeComponent(e){var t;const i=null===(t=e.typeHint)||void 0===t?void 0:t.name;switch(i){case n.SdtfPrimitiveTypeHintName.BOOLEAN:case n.SdtfPrimitiveTypeHintName.CHAR:case n.SdtfPrimitiveTypeHintName.COLOR:case n.SdtfPrimitiveTypeHintName.DECIMAL:case n.SdtfPrimitiveTypeHintName.DOUBLE:case n.SdtfPrimitiveTypeHintName.GUID:case n.SdtfPrimitiveTypeHintName.INT8:case n.SdtfPrimitiveTypeHintName.INT16:case n.SdtfPrimitiveTypeHintName.INT32:case n.SdtfPrimitiveTypeHintName.INT64:case n.SdtfPrimitiveTypeHintName.JSON:case n.SdtfPrimitiveTypeHintName.SINGLE:case n.SdtfPrimitiveTypeHintName.STRING:case n.SdtfPrimitiveTypeHintName.UINT8:case n.SdtfPrimitiveTypeHintName.UINT16:case n.SdtfPrimitiveTypeHintName.UINT32:case n.SdtfPrimitiveTypeHintName.UINT64:delete e.accessor;break;case n.SdtfPrimitiveTypeHintName.DATA:case n.SdtfPrimitiveTypeHintName.IMAGE:delete e.value;break;default:(0,n.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new n.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}},9116:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(7439),t),r(i(8542),t),r(i(487),t)},6327:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfConfig=void 0;const n=i(8701),r=i(9116);t.SdtfConfig=class{constructor(e){this.integrations=[new r.SdtfPrimitiveTypeIntegration,new n.SdtfGeometryTypeIntegration],void 0!==(null==e?void 0:e.integrations)&&(this.integrations=e.integrations),this.authToken=null==e?void 0:e.authToken}}},9929:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfSdk=t.create=void 0;const r=i(7079),a=i(7494),s=i(4186),o=i(6327),l=i(782);t.create=function(e){return n(this,void 0,void 0,(function*(){const t=new c(e);return yield t.init(),t}))};class c{constructor(e){this.config=new o.SdtfConfig(e)}createParser(){return new s.SdtfParser(this.config)}createConstructor(){return new l.SdtfConstructor(this.config.integrations)}createFormatter(){return new a.SdtfFormatter(this.config.integrations)}init(){return n(this,void 0,void 0,(function*(){const e=[];this.config.integrations.forEach((t=>e.push(t.init()))),(yield Promise.allSettled(e)).forEach((e=>{if("rejected"===e.status){const t=e.reason;throw new r.SdtfError(`Could not initialize all integrations: ${t}`)}}))}))}}t.SdtfSdk=c},2377:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBinarySdtf=void 0;const n=i(7079),r=i(9565);t.SdtfBinarySdtf=class{constructor(){this.binaryHeaderLength=20}constructBinarySdtf(e){var t;const i=null!==(t=e.binaryBody)&&void 0!==t?t:new ArrayBuffer(0),n=this.createJsonContent(e),r=this.createHeader(n.byteLength,i.byteLength);return new Uint8Array([...new Uint8Array(r),...new Uint8Array(n),...new Uint8Array(i)]).buffer}parseBinarySdtf(e){const t=new DataView(e,0,this.binaryHeaderLength),[i,n]=this.readHeader(t);return[new DataView(e,this.binaryHeaderLength,i),new DataView(e,this.binaryHeaderLength+i,n-this.binaryHeaderLength-i)]}readHeader(e){e instanceof ArrayBuffer&&(e=new DataView(e));const t=String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3));if("sdtf"!==t)throw new n.SdtfError(`Invalid identifier: Unknown file type for sdTF identifier '${t}'.`);const i=e.getUint32(4,!0);if(1!==i)throw new n.SdtfError(`Invalid version: Unsupported sdTF version '${i}'.`);const r=e.getUint32(8,!0),a=e.getUint32(12,!0),s=e.getUint32(16,!0);if(0!==s)throw new n.SdtfError(`Invalid content: Unsupported sdTF content format '${s}'.`);return[a,r]}createHeader(e,t){const i=new Uint8Array(20),n=new DataView(i.buffer,0,i.byteLength),r="sdtf";n.setUint8(0,r.codePointAt(0)),n.setUint8(1,r.codePointAt(1)),n.setUint8(2,r.codePointAt(2)),n.setUint8(3,r.codePointAt(3)),n.setUint32(4,1,!0);const a=this.binaryHeaderLength+e+t;return n.setUint32(8,a,!0),n.setUint32(12,e,!0),n.setUint32(16,0,!0),n.buffer}readJsonContent(e){e instanceof ArrayBuffer&&(e=new DataView(e));try{return JSON.parse((new TextDecoder).decode(e))}catch(e){throw new n.SdtfError(`Invalid content: Cannot parse sdTF JSON content. ${e.message}`)}}createJsonContent(e){const t=(0,r.toJsonContent)(e);try{return(new TextEncoder).encode(JSON.stringify(t,void 0,0))}catch(e){throw new n.SdtfError(`Invalid content: Cannot create sdTF JSON content. ${e.message}`)}}}},8650:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBinaryBufferCache=void 0;const r=i(7079);t.SdtfBinaryBufferCache=class{constructor(){this.cacheIdFullBuffer="full",this.cache={}}calcCacheKey(e=""){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return new Uint32Array([t])[0].toString(36)}calcCacheId(e,t){return`${e};${t}`}loadFromCache(e,t,i){const n=this.cache[e];if(!n)return;const r=this.calcCacheId(t,i);if(n[r])return n[r];if(n[this.cacheIdFullBuffer]){const e=n[this.cacheIdFullBuffer];return new DataView(e.buffer,e.byteOffset+t,i)}}storeInCache(e,t,i){var n;const r=null!==(n=this.cache[e])&&void 0!==n?n:{};r[t]=i,this.cache[e]=r}setBinaryBody(e){e&&(this.cache[this.calcCacheKey()]={[this.cacheIdFullBuffer]:e})}getBuffer(e,t,i){var r;return n(this,void 0,void 0,(function*(){const n=this.calcCacheKey(e);return null!==(r=this.loadFromCache(n,t,i))&&void 0!==r?r:yield this.acquireBuffer(e,i,t)}))}acquireBuffer(e,t,i){return n(this,void 0,void 0,(function*(){throw new r.SdtfError("Resolution of external buffers is not supported in this mode. Please use 'ISdtfParser.readFromFile()' or 'ISdtfParser.readFromUrl()' to instantiate the sdTF asset and to enable this functionality.")}))}}},4086:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFileBufferCache=void 0;const r=i(7079),a=i(4593),s=i(8650);class o extends s.SdtfBinaryBufferCache{constructor(e){super(),this.fileUtils=new a.SdtfFileUtils;const t=e.lastIndexOf("/");this.basePath=e.substring(0,t)}acquireBuffer(e,t,i){return n(this,void 0,void 0,(function*(){let n;try{n=yield this.fileUtils.readFile(`${this.basePath}/${e}`)}catch(e){throw new r.SdtfError(`Cannot read buffer: ${e.message}`)}return this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(n)),new DataView(n,t,i)}))}}t.SdtfFileBufferCache=o},7516:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfHttpBufferCache=void 0;const r=i(8650);class a extends r.SdtfBinaryBufferCache{constructor(e){super(),this.httpClient=e}acquireBuffer(e,t,i){return n(this,void 0,void 0,(function*(){const[n,r]=yield this.httpClient.getBinaryBuffer(e,t,i);return r?this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(r)):this.storeInCache(this.calcCacheKey(e),this.calcCacheId(t,i),n),n}))}}t.SdtfHttpBufferCache=a},7494:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFormatter=void 0;const n=i(7215),r=i(9565),a=i(4061),s=i(9549);t.SdtfFormatter=class{constructor(e){this.factory=new a.SdtfComponentFactoryWrapper,this.postProcessor=new s.SdtfWriteableComponentPostProcessor(e)}prettifyReadableAsset(e){const t=(0,n.readableComponentListFromAsset)(e),i=this.factory.createFromReadable(t);return this.prettifyAsset(i)}prettifyWriteableAsset(e){const t=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(t);return this.prettifyAsset(i)}prettifyAsset(e){const t=(0,r.toJsonContent)(e);return JSON.stringify(t,void 0,2)}}},3751:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfHttpClient=void 0;const a=i(7079),s=r(i(7218)),o=i(2377);t.SdtfHttpClient=class{constructor(e,t){this.binarySdtfParser=new o.SdtfBinarySdtf,this.jsonContentUrl=e,this.basicHttpHeader={},t&&(this.basicHttpHeader.authorization="Bearer "+t)}calcUrl(e){if(!e)return this.jsonContentUrl;const t=this.jsonContentUrl.lastIndexOf("/");return`${this.jsonContentUrl.substring(0,t)}/${e}`}getJsonContent(){return n(this,void 0,void 0,(function*(){try{const{data:e,partial:t}=yield this.fetch(this.jsonContentUrl,0,this.binarySdtfParser.binaryHeaderLength);if(t){const[t,i]=this.binarySdtfParser.readHeader(e),n=yield this.fetch(this.jsonContentUrl,20,t);return[new DataView(n.data),void 0]}return this.binarySdtfParser.parseBinarySdtf(e)}catch(e){throw new a.SdtfError(`Could not fetch sdTF JSON content: ${e.message}`)}}))}getBinaryBuffer(e,t,i){return n(this,void 0,void 0,(function*(){try{const{data:n,partial:r}=yield this.fetch(this.calcUrl(e),t,i);return r?[new DataView(n),void 0]:[new DataView(n,t,i),n]}catch(e){throw new a.SdtfError(`Could not fetch sdTF binary buffer: ${e.message}`)}}))}fetch(e,t,i){var r,o;return n(this,void 0,void 0,(function*(){let n;try{n=yield s.default.head(e,{headers:this.basicHttpHeader})}catch(e){throw new a.SdtfError(e.message)}if(n.status>299)throw new a.SdtfError(`Received HTTP status ${n.status}.`);const l=!!(null!==(r=n.headers["Content-Encoding"])&&void 0!==r?r:n.headers["content-encoding"]),c=null!==(o=n.headers["Accept-Ranges"])&&void 0!==o?o:n.headers["accept-ranges"],u=!l&&"bytes"===c,h=u?yield this.fetchPartially(e,t,i):yield this.fetchFully(e);return{data:h instanceof ArrayBuffer?h:Uint8Array.from(h).buffer,partial:u}}))}fetchPartially(e,t,i){return n(this,void 0,void 0,(function*(){let n;try{n=yield s.default.get(e,{headers:Object.assign(Object.assign({},this.basicHttpHeader),{range:`bytes=${t}-${t+i-1}`}),responseType:"arraybuffer"})}catch(e){throw new a.SdtfError(e.message)}if(416===n.status)throw new a.SdtfError("Invalid range requested.");if(206!==n.status)throw new a.SdtfError(`Received HTTP status ${n.status}.`);return n.data}))}fetchFully(e){return n(this,void 0,void 0,(function*(){let t;try{t=yield s.default.get(e,{headers:this.basicHttpHeader,responseType:"arraybuffer"})}catch(e){throw new a.SdtfError(e.message)}if(200!==t.status)throw new a.SdtfError(`Received HTTP status ${t.status}.`);return t.data}))}}},4767:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfSdk=t.create=void 0,r(i(7079),t);var a=i(9929);Object.defineProperty(t,"create",{enumerable:!0,get:function(){return a.create}}),Object.defineProperty(t,"SdtfSdk",{enumerable:!0,get:function(){return a.SdtfSdk}}),r(i(2173),t)},7215:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.readableComponentListFromAsset=void 0,t.readableComponentListFromAsset=function(e){return{accessors:e.accessors,asset:e,attributes:e.attributes,buffers:e.buffers,bufferViews:e.bufferViews,chunks:e.chunks,items:e.items,nodes:e.nodes,typeHints:e.typeHints,fileInfo:e.fileInfo}}},6899:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfDataParser=void 0,t.SdtfDataParser=class{constructor(e){this.integrations=e}parseContent(e){return i(this,void 0,void 0,(function*(){const t=this.integrations.find((t=>{var i,n;return t.isTypeHintSupported(null!==(n=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==n?n:"")}));return t?t.getReader().readComponent(e):void 0===e.value&&e.accessor?e.accessor.getContent():e.value}))}}},4186:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfParser=void 0;const r=i(7079),a=i(3818),s=i(2377),o=i(8650),l=i(4086),c=i(7516),u=i(3751),h=i(4061),d=i(4593),f=i(7835),p=i(6899),m=i(3482);t.SdtfParser=class{constructor(e){this.config=e,this.binarySdtfParser=new s.SdtfBinarySdtf,this.componentFactory=new h.SdtfComponentFactoryWrapper,this.fileUtils=new d.SdtfFileUtils}readFromFile(e){return n(this,void 0,void 0,(function*(){if(a.isBrowser)throw new r.SdtfError("Reading from file is only supported in Node.js.");let t,i;try{t=this.fileUtils.toAbsolutePath(e),i=yield this.fileUtils.readFile(t)}catch(e){throw new r.SdtfError(`Cannot read sdTF-file: ${e.message}`)}const[n,s]=this.binarySdtfParser.parseBinarySdtf(i),o=this.binarySdtfParser.readJsonContent(n),c=new l.SdtfFileBufferCache(t);return c.setBinaryBody(s),this.createSdtfAsset(o,c)}))}readFromUrl(e){return n(this,void 0,void 0,(function*(){const t=new u.SdtfHttpClient(e,this.config.authToken),[i,n]=yield t.getJsonContent(),r=this.binarySdtfParser.readJsonContent(i),a=new c.SdtfHttpBufferCache(t);return a.setBinaryBody(n),this.createSdtfAsset(r,a)}))}readFromBuffer(e){const[t,i]=this.binarySdtfParser.parseBinarySdtf(e),n=this.binarySdtfParser.readJsonContent(t),r=new o.SdtfBinaryBufferCache;return r.setBinaryBody(i),this.createSdtfAsset(n,r)}createSdtfAsset(e,t){const i=this.componentFactory.createFromJson(e),n=new m.SdtfReadableComponentFactory(t,new p.SdtfDataParser(this.config.integrations));return this.buildReadableAsset(i,n)}buildReadableAsset(e,t){const i=t.createFileInfo(e.fileInfo),n=new f.SdtfReadableAsset(i);return n.typeHints=e.typeHints.map((e=>t.createTypeHint(e))),n.buffers=e.buffers.map((e=>t.createBuffer(e))),n.bufferViews=e.bufferViews.map((e=>t.createBufferView(e,n.buffers))),n.accessors=e.accessors.map((e=>t.createAccessor(e,n.bufferViews))),n.attributes=e.attributes.map((e=>t.createAttributes(e,n.accessors,n.typeHints))),n.items=e.items.map((e=>t.createDataItem(e,n.accessors,n.attributes,n.typeHints))),n.nodes=e.nodes.map((e=>t.createNode(e,n.attributes,n.items,n.typeHints))),n.chunks=e.chunks.map((e=>t.createChunk(e,n.attributes,n.items,n.typeHints))),t.setChunkReferences(n.chunks,e.chunks,n.nodes),t.setNodeReferences(n.nodes,e.nodes),n}}},3482:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableComponentFactory=void 0;const n=i(1177),r=i(5002),a=i(240),s=i(6843),o=i(3756),l=i(9917),c=i(939),u=i(7182);t.SdtfReadableComponentFactory=class{constructor(e,t){this.bufferCache=e,this.dataParser=t}createAccessor(e,t){const i=new n.SdtfReadableAccessor(t[e.bufferView]);return i.bufferView=t[e.bufferView],i.id=e.id,i.additionalProperties=e.additionalProperties,i}createAttributes(e,t,i){const n=new r.SdtfReadableAttributes;return Object.entries(e.entries).forEach((([e,a])=>{const s=new r.SdtfReadableAttribute(this.dataParser);void 0!==a.accessor&&(s.accessor=t[a.accessor]),void 0!==a.typeHint&&(s.typeHint=i[a.typeHint]),s.value=a.value,n.entries[e]=s})),n}createBuffer(e){const t=new a.SdtfReadableBuffer(e.byteLength,this.bufferCache);return t.uri=e.uri,t.additionalProperties=e.additionalProperties,t}createBufferView(e,t){const i=new s.SdtfReadableBufferView(t[e.buffer],e.byteLength,e.byteOffset,e.contentType);return i.contentEncoding=e.contentEncoding,i.name=e.name,i.additionalProperties=e.additionalProperties,i}createChunk(e,t,i,n){return this.createNode(e,t,i,n)}createDataItem(e,t,i,n){const r=new o.SdtfReadableDataItem(this.dataParser);return void 0!==e.accessor&&(r.accessor=t[e.accessor]),void 0!==e.attributes&&(r.attributes=i[e.attributes]),void 0!==e.typeHint&&(r.typeHint=n[e.typeHint]),r.value=e.value,r.additionalProperties=e.additionalProperties,r}createFileInfo(e){const t=new l.SdtfReadableFileInfo(e.version);return t.copyright=e.copyright,t.generator=e.generator,t.version=e.version,t.additionalProperties=e.additionalProperties,t}createNode(e,t,i,n){const r=new c.SdtfReadableNode;return void 0!==e.attributes&&(r.attributes=t[e.attributes]),r.items=e.items.map((e=>i[e])),r.name=e.name,void 0!==e.typeHint&&(r.typeHint=n[e.typeHint]),r.additionalProperties=e.additionalProperties,r}createTypeHint(e){const t=new u.SdtfReadableTypeHint(e.name);return t.additionalProperties=e.additionalProperties,t}setChunkReferences(e,t,i){t.forEach(((t,n)=>{e[n].nodes=t.nodes.map((e=>i[e]))}))}setNodeReferences(e,t){t.forEach(((t,i)=>{e[i].nodes=t.nodes.map((t=>e[t]))}))}}},5825:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBaseReadableComponent=void 0;const n=i(9078);t.SdtfBaseReadableComponent=class{constructor(){this.componentId=(0,n.createComponentId)()}toDataObject(){return(0,n.userComponentToDataObject)(this)}}},1177:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAccessor=void 0;const r=i(5825);class a extends r.SdtfBaseReadableComponent{constructor(e){super(),this.bufferView=e,this.additionalProperties={}}getContent(){return n(this,void 0,void 0,(function*(){return{id:this.id,data:yield this.bufferView.getContent()}}))}}t.SdtfReadableAccessor=a},7835:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAsset=void 0;const n=i(5825);class r extends n.SdtfBaseReadableComponent{constructor(e){super(),this.fileInfo=e,this.accessors=[],this.attributes=[],this.buffers=[],this.bufferViews=[],this.chunks=[],this.items=[],this.nodes=[],this.typeHints=[],this.additionalProperties={}}}t.SdtfReadableAsset=r},5002:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableAttribute=t.SdtfReadableAttributes=void 0;const r=i(9078),a=i(5825);class s extends a.SdtfBaseReadableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){const e={};return Object.entries(this.entries).forEach((([t,i])=>e[t]=i.toDataObject())),e}}t.SdtfReadableAttributes=s,t.SdtfReadableAttribute=class{constructor(e){this.dataParser=e}toDataObject(){const e=(0,r.userComponentToDataObject)(this);return delete e.dataParser,e}getContent(){return n(this,void 0,void 0,(function*(){return this.dataParser.parseContent(this)}))}}},240:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableBuffer=void 0;const r=i(7079),a=i(5825);class s extends a.SdtfBaseReadableComponent{constructor(e,t){super(),this.byteLength=e,this.bufferCache=t,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.bufferCache,e}getContent(e,t){return n(this,void 0,void 0,(function*(){if(e+t>this.byteLength)throw new r.SdtfError("Unable to get content of buffer: Requested content is out of range.");return this.bufferCache.getBuffer(this.uri,e,t)}))}}t.SdtfReadableBuffer=s},6843:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableBufferView=void 0;const r=i(5825);class a extends r.SdtfBaseReadableComponent{constructor(e,t,i,n){super(),this.buffer=e,this.byteLength=t,this.byteOffset=i,this.contentType=n,this.additionalProperties={}}getContent(){return n(this,void 0,void 0,(function*(){return this.buffer.getContent(this.byteOffset,this.byteLength)}))}}t.SdtfReadableBufferView=a},3756:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableDataItem=void 0;const r=i(5825);class a extends r.SdtfBaseReadableComponent{constructor(e){super(),this.dataParser=e,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.dataParser,e}getContent(){return n(this,void 0,void 0,(function*(){return this.dataParser.parseContent(this)}))}}t.SdtfReadableDataItem=a},9917:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableFileInfo=void 0;const n=i(5825);class r extends n.SdtfBaseReadableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}}t.SdtfReadableFileInfo=r},939:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableNode=void 0;const n=i(5825);class r extends n.SdtfBaseReadableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}}t.SdtfReadableNode=r},7182:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfReadableTypeHint=void 0;const n=i(5825);class r extends n.SdtfBaseReadableComponent{constructor(e){super(),this.name=e,this.additionalProperties={}}}t.SdtfReadableTypeHint=r},9565:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toJsonContent=void 0,t.toJsonContent=function(e){const t=e.asset.toJson();return t.asset=e.fileInfo.toJson(),t.chunks=e.chunks.map((e=>e.toJson())),t.nodes=e.nodes.map((e=>e.toJson())),t.items=e.items.map((e=>e.toJson())),t.attributes=e.attributes.map((e=>e.toJson())),t.typeHints=e.typeHints.map((e=>e.toJson())),t.accessors=e.accessors.map((e=>e.toJson())),t.bufferViews=e.bufferViews.map((e=>e.toJson())),t.buffers=e.buffers.map((e=>e.toJson())),t}},5257:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentFactory=void 0;const n=i(7079),r=i(1743),a=i(8437),s=i(1570),o=i(4043),l=i(6980),c=i(8336),u=i(5272),h=i(1304),d=i(4796);t.SdtfComponentFactory=class{constructor(){this.propertyNameAccessors="accessors",this.propertyNameAttributes="attributes",this.propertyNameBufferViews="bufferViews",this.propertyNameBuffers="buffers",this.propertyNameChunks="chunks",this.propertyNameDataItems="items",this.propertyNameFileInfo="asset",this.propertyNameFileInfoAlternative="fileInfo",this.propertyNameNodes="nodes",this.propertyNameTypeHints="typeHints"}createAccessor(e){const t=new r.SdtfPartialAccessor;return(0,n.isNumber)(e.bufferView)&&(t.bufferView=e.bufferView),"string"==typeof e.id&&(t.id=e.id),Object.entries(e).filter((([e,t])=>"bufferView"!==e&&"id"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createAsset(e){const t=new a.SdtfPartialAsset;return t.fileInfo=0,Object.entries(e).filter((([e,t])=>e!==this.propertyNameAccessors&&e!==this.propertyNameAttributes&&e!==this.propertyNameBufferViews&&e!==this.propertyNameBuffers&&e!==this.propertyNameChunks&&e!==this.propertyNameDataItems&&e!==this.propertyNameFileInfo&&e!==this.propertyNameFileInfoAlternative&&e!==this.propertyNameNodes&&e!==this.propertyNameTypeHints)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createAttributes(e){const t=new s.SdtfPartialAttributes;return Object.entries(e).forEach((([e,i],r)=>{if(!(0,n.isDataObject)(i))throw new n.SdtfError(`Invalid attribute data: Item [${r}] must be an object.`);const a=new s.SdtfAttribute;"number"==typeof i.accessor&&(a.accessor=i.accessor),"number"==typeof i.typeHint&&(a.typeHint=i.typeHint),a.value=i.value,t.entries[e]=a})),t}createBuffer(e){const t=new o.SdtfPartialBuffer;return(0,n.isNumber)(e.byteLength)&&(t.byteLength=e.byteLength),"string"==typeof e.uri&&(t.uri=e.uri),Object.entries(e).filter((([e,t])=>"byteLength"!==e&&"uri"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createBufferView(e){const t=new l.SdtfPartialBufferView;return(0,n.isNumber)(e.buffer)&&(t.buffer=e.buffer),(0,n.isNumber)(e.byteLength)&&(t.byteLength=e.byteLength),(0,n.isNumber)(e.byteOffset)&&(t.byteOffset=e.byteOffset),"string"==typeof e.contentEncoding&&(t.contentEncoding=e.contentEncoding),"string"==typeof e.contentType&&(t.contentType=e.contentType),"string"==typeof e.name&&(t.name=e.name),Object.entries(e).filter((([e,t])=>"buffer"!==e&&"byteLength"!==e&&"byteOffset"!==e&&"contentEncoding"!==e&&"contentType"!==e&&"name"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createChunk(e){return this.createNode(e)}createDataItem(e){const t=new c.SdtfPartialDataItem;return(0,n.isNumber)(e.accessor)&&(t.accessor=e.accessor),(0,n.isNumber)(e.attributes)&&(t.attributes=e.attributes),(0,n.isNumber)(e.typeHint)&&(t.typeHint=e.typeHint),t.value=e.value,Object.entries(e).filter((([e,t])=>"accessor"!==e&&"attributes"!==e&&"typeHint"!==e&&"value"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createFileInfo(e){const t=new u.SdtfPartialFileInfo;return"string"==typeof e.copyright&&(t.copyright=e.copyright),"string"==typeof e.generator&&(t.generator=e.generator),"string"==typeof e.version&&(t.version=e.version),Object.entries(e).filter((([e,t])=>"copyright"!==e&&"generator"!==e&&"version"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createNode(e){const t=new h.SdtfPartialNode;return(0,n.isNumber)(e.attributes)&&(t.attributes=e.attributes),(0,n.isNumberArray)(e.items)&&(t.items=e.items),"string"==typeof e.name&&(t.name=e.name),(0,n.isNumberArray)(e.nodes)&&(t.nodes=e.nodes),(0,n.isNumber)(e.typeHint)&&(t.typeHint=e.typeHint),Object.entries(e).filter((([e,t])=>"attributes"!==e&&"items"!==e&&"name"!==e&&"nodes"!==e&&"typeHint"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}createTypeHint(e){const t=new d.SdtfPartialTypeHint;return"string"==typeof e.name&&(t.name=e.name),Object.entries(e).filter((([e,t])=>"name"!==e)).forEach((([e,i])=>t.additionalProperties[e]=i)),t}}},4061:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentFactoryWrapper=void 0;const n=i(7079),r=i(1839),a=i(5257);t.SdtfComponentFactoryWrapper=class{constructor(){this.factory=new a.SdtfComponentFactory}createFromJson(e){const t=this.factory;return this.createComponentList({accessors:this.buildFromArray(e,t.propertyNameAccessors,t.createAccessor.bind(t)),asset:this.buildFromObject(e,"",t.createAsset.bind(t)),attributes:this.buildFromArray(e,t.propertyNameAttributes,t.createAttributes.bind(t)),buffers:this.buildFromArray(e,t.propertyNameBuffers,t.createBuffer.bind(t)),bufferViews:this.buildFromArray(e,t.propertyNameBufferViews,t.createBufferView.bind(t)),chunks:this.buildFromArray(e,t.propertyNameChunks,t.createChunk.bind(t)),items:this.buildFromArray(e,t.propertyNameDataItems,t.createDataItem.bind(t)),fileInfo:this.buildFromObject(e,t.propertyNameFileInfo,t.createFileInfo.bind(t)),nodes:this.buildFromArray(e,t.propertyNameNodes,t.createNode.bind(t)),typeHints:this.buildFromArray(e,t.propertyNameTypeHints,t.createTypeHint.bind(t))})}createFromReadable(e){const t=this.factory,i={accessors:e.accessors.map((e=>t.createAccessor(e.toDataObject()))),asset:t.createAsset(e.asset.toDataObject()),attributes:e.attributes.map((e=>t.createAttributes(e.toDataObject()))),buffers:e.buffers.map((e=>t.createBuffer(e.toDataObject()))),bufferViews:e.bufferViews.map((e=>t.createBufferView(e.toDataObject()))),chunks:e.chunks.map((e=>t.createChunk(e.toDataObject()))),items:e.items.map((e=>t.createDataItem(e.toDataObject()))),fileInfo:t.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map((e=>t.createNode(e.toDataObject()))),typeHints:e.typeHints.map((e=>t.createTypeHint(e.toDataObject())))};return this.mapHierarchyRepresentation(i,e),this.createComponentList(i)}createFromWriteable(e){var t;const i=this.factory,n={accessors:e.accessors.map((e=>i.createAccessor(e.toDataObject()))),asset:i.createAsset(e.asset.toDataObject()),attributes:e.attributes.map((e=>i.createAttributes(e.toDataObject()))),buffers:e.buffers.map((e=>i.createBuffer(e.toDataObject()))),bufferViews:e.bufferViews.map((e=>i.createBufferView(e.toDataObject()))),chunks:e.chunks.map((e=>i.createChunk(e.toDataObject()))),items:e.items.map((e=>i.createDataItem(e.toDataObject()))),fileInfo:i.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map((e=>i.createNode(e.toDataObject()))),typeHints:e.typeHints.map((e=>i.createTypeHint(e.toDataObject()))),binaryBody:null===(t=e.buffers.find((e=>!e.uri)))||void 0===t?void 0:t.data};return this.mapHierarchyRepresentation(n,e),this.createComponentList(n)}createComponentList(e){const t=new r.SdtfComponentValidator(e),i=e.asset;t.validateAsset(i);const n=e.fileInfo;t.validateFileInfo(n);const a=e.buffers.map((e=>(t.validateBuffer(e),e))),s=e.bufferViews.map((e=>(t.validateBufferView(e),e))),o=e.accessors.map((e=>(t.validateAccessor(e),e))),l=e.typeHints.map((e=>(t.validateTypeHint(e),e)));return{accessors:o,asset:i,attributes:e.attributes.map((e=>(t.validateAttributes(e),e))),buffers:a,bufferViews:s,chunks:e.chunks.map((e=>(t.validateChunk(e),e))),items:e.items.map((e=>(t.validateDataItem(e),e))),nodes:e.nodes.map((e=>(t.validateNode(e),e))),typeHints:l,fileInfo:n,binaryBody:e.binaryBody}}buildFromObject(e,t,i){const r=t?e[t]:e;if(!(0,n.isDataObject)(r))throw new n.SdtfError(`Invalid item at ${t}: Item must be an object.`);return i(r)}buildFromArray(e,t,i){const r=e[t];if(void 0===r)return[];if(!Array.isArray(r))throw new n.SdtfError(`Invalid content property: '${t}' must be an array.`);return r.map(((e,r)=>{if(!(0,n.isDataObject)(e))throw new n.SdtfError(`Invalid item at ${t}[${r}]: Item must be an object.`);return i(e)}))}mapHierarchyRepresentation(e,t){const i=(e,t)=>t?e.findIndex((e=>e.componentId===t)):-1;e.asset.fileInfo=0,e.accessors.forEach(((e,n)=>{var r;const a=t.accessors[n];e.bufferView=i(t.bufferViews,null===(r=null==a?void 0:a.bufferView)||void 0===r?void 0:r.componentId)})),e.attributes.forEach(((e,n)=>{e.entries&&Object.entries(e.entries).forEach((([e,r])=>{var a,s;const o=t.attributes[n].entries[e];o.accessor&&(r.accessor=i(t.accessors,null===(a=null==o?void 0:o.accessor)||void 0===a?void 0:a.componentId)),o.typeHint&&(r.typeHint=i(t.typeHints,null===(s=null==o?void 0:o.typeHint)||void 0===s?void 0:s.componentId))}))})),e.bufferViews.forEach(((e,n)=>{var r;const a=t.bufferViews[n];e.buffer=i(t.buffers,null===(r=null==a?void 0:a.buffer)||void 0===r?void 0:r.componentId)})),e.chunks.forEach(((e,n)=>{var r,a;const s=t.chunks[n];s.attributes&&(e.attributes=i(t.attributes,null===(r=null==s?void 0:s.attributes)||void 0===r?void 0:r.componentId)),e.items=s.items.map((e=>i(t.items,null==e?void 0:e.componentId))),e.nodes=s.nodes.map((e=>i(t.nodes,null==e?void 0:e.componentId))),s.typeHint&&(e.typeHint=i(t.typeHints,null===(a=null==s?void 0:s.typeHint)||void 0===a?void 0:a.componentId))})),e.items.forEach(((e,n)=>{var r,a,s;const o=t.items[n];o.accessor&&(e.accessor=i(t.accessors,null===(r=null==o?void 0:o.accessor)||void 0===r?void 0:r.componentId)),o.attributes&&(e.attributes=i(t.attributes,null===(a=null==o?void 0:o.attributes)||void 0===a?void 0:a.componentId)),o.typeHint&&(e.typeHint=i(t.typeHints,null===(s=null==o?void 0:o.typeHint)||void 0===s?void 0:s.componentId))})),e.nodes.forEach(((e,n)=>{var r,a;const s=t.nodes[n];s.attributes&&(e.attributes=i(t.attributes,null===(r=null==s?void 0:s.attributes)||void 0===r?void 0:r.componentId)),e.items=s.items.map((e=>i(t.items,null==e?void 0:e.componentId))),e.nodes=s.nodes.map((e=>i(t.nodes,null==e?void 0:e.componentId))),s.typeHint&&(e.typeHint=i(t.typeHints,null===(a=null==s?void 0:s.typeHint)||void 0===a?void 0:a.componentId))}))}}},5452:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBasePartialComponent=void 0;const n=i(9078);t.SdtfBasePartialComponent=class{constructor(){this.componentId=(0,n.createComponentId)()}}},1743:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialAccessor=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.bufferView?e.bufferView=this.bufferView:delete e.bufferView,void 0!==this.id?e.id=this.id:delete e.id,e}}t.SdtfPartialAccessor=r},8437:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialAsset=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){return Object.assign({},this.additionalProperties)}}t.SdtfPartialAsset=r},1570:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfAttribute=t.SdtfPartialAttributes=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.entries={}}toJson(){const e={};return Object.entries(this.entries).forEach((([t,i])=>{e[t]=i.toJson()})),e}}t.SdtfPartialAttributes=r;class a extends n.SdtfBasePartialComponent{toJson(){const e={};return void 0!==this.accessor&&(e.accessor=this.accessor),void 0!==this.typeHint&&(e.typeHint=this.typeHint),void 0!==this.value&&(e.value=this.value),e}}t.SdtfAttribute=a},4043:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialBuffer=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.byteLength?e.byteLength=this.byteLength:delete e.byteLength,void 0!==this.uri&&(e.uri=this.uri),delete e.uri,e}}t.SdtfPartialBuffer=r},6980:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialBufferView=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.buffer?e.buffer=this.buffer:delete e.buffer,void 0!==this.byteLength?e.byteLength=this.byteLength:delete e.byteLength,void 0!==this.byteOffset?e.byteOffset=this.byteOffset:delete e.byteOffset,void 0!==this.contentEncoding?e.contentEncoding=this.contentEncoding:delete e.contentEncoding,void 0!==this.contentType?e.contentType=this.contentType:delete e.contentType,void 0!==this.name?e.name=this.name:delete e.name,e}}t.SdtfPartialBufferView=r},8336:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialDataItem=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.accessor?e.accessor=this.accessor:delete e.accessor,void 0!==this.attributes?e.attributes=this.attributes:delete e.attributes,void 0!==this.typeHint?e.typeHint=this.typeHint:delete e.typeHint,void 0!==this.value?e.value=this.value:delete e.value,e}}t.SdtfPartialDataItem=r},5272:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialFileInfo=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.copyright?e.copyright=this.copyright:delete e.copyright,void 0!==this.generator?e.generator=this.generator:delete e.generator,void 0!==this.version?e.version=this.version:delete e.version,e}}t.SdtfPartialFileInfo=r},1304:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialNode=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.attributes?e.attributes=this.attributes:delete e.attributes,this.items.length>0?e.items=this.items:delete e.items,void 0!==this.name?e.name=this.name:delete e.name,this.nodes.length>0?e.nodes=this.nodes:delete e.nodes,void 0!==this.typeHint?e.typeHint=this.typeHint:delete e.typeHint,e}}t.SdtfPartialNode=r},4796:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPartialTypeHint=void 0;const n=i(5452);class r extends n.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return void 0!==this.name?e.name=this.name:delete e.name,e}}t.SdtfPartialTypeHint=r},4593:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfFileUtils=void 0;const n=i(7079),r=i(5138),a=i(2165);t.SdtfFileUtils=class{toAbsolutePath(e){try{return r.resolve(e)}catch(t){throw new n.SdtfError(`Could not resolve path '${e}': ${t.message}`)}}readFile(e){if(!a.existsSync(e))throw new n.SdtfError(`Cannot find file at location '${e}'.`);return new Promise(((t,i)=>{a.readFile(e,((e,n)=>{e&&i(e);const r=n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength);t(r)}))}))}}},9078:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createComponentId=t.userComponentToDataObject=void 0;const n=i(7079);t.userComponentToDataObject=function(e){const t=Object.keys(e).filter((e=>"additionalProperties"===e)),i=(0,n.isDataObject)(t)?t:{};return Object.entries(e).filter((([e,t])=>"componentId"!==e&&"additionalProperties"!==e&&"data"!==e)).forEach((([e,t])=>i[e]=t)),i},t.createComponentId=function(){return Math.random().toString(36).substring(2,9)}},1839:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfComponentValidator=void 0;const n=i(7079);t.SdtfComponentValidator=class{constructor(e){this.componentList=e}validateAccessor(e){if(!(0,n.isUint)(e.bufferView))throw new n.SdtfError("Invalid accessor: Required property 'bufferView' must be an unsigned integer.");if(e.bufferView>=this.componentList.bufferViews.length)throw new n.SdtfError("Invalid accessor: Buffer view index is out of range.")}validateAsset(e){if(!(0,n.isUint)(e.fileInfo))throw new n.SdtfError("Invalid asset: Required property 'fileInfo' must be an unsigned integer.");if(0!==e.fileInfo)throw new n.SdtfError("Invalid asset: Type hint index is out of range.")}validateAttributes(e){if(!e.entries)throw new n.SdtfError("Invalid attributes: Required property 'entries' must be a string-keyed object.");Object.values(e.entries).forEach((e=>{if(!(0,n.isUint)(e.typeHint))throw new n.SdtfError("Invalid attribute: Required property 'typeHint' must be an unsigned integer.");if(e.accessor&&!(0,n.isUint)(e.accessor))throw new n.SdtfError("Invalid attribute: Optional property 'accessor' must be an unsigned integer.");if(e.accessor&&e.accessor>=this.componentList.accessors.length)throw new n.SdtfError("Invalid attribute: Accessor index is out of range.");if(e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new n.SdtfError("Invalid attribute: Type hint index is out of range.")}))}validateBuffer(e){if(!(0,n.isUint)(e.byteLength))throw new n.SdtfError("Invalid buffer: Required property 'byteLength' must be an unsigned integer.")}validateBufferView(e){if(!(0,n.isUint)(e.buffer))throw new n.SdtfError("Invalid buffer view: Required property 'buffer' must be an unsigned integer.");if(!(0,n.isUint)(e.byteLength))throw new n.SdtfError("Invalid buffer view: Required property 'byteLength' must be an unsigned integer.");if(!(0,n.isUint)(e.byteOffset))throw new n.SdtfError("Invalid buffer view: Required property 'byteOffset' must be an unsigned integer.");if(!(0,n.isNonEmptyString)(e.contentType))throw new n.SdtfError("Invalid buffer view: Required property 'contentType' must be a non-empty string.");if(e.buffer>=this.componentList.buffers.length)throw new n.SdtfError("Invalid buffer view: Buffer index is out of range.")}validateChunk(e){try{this.validateChunkOrNode(e)}catch(e){throw new n.SdtfError(`Invalid chunk: ${e.message}`)}if("string"!=typeof e.name)throw new n.SdtfError("Invalid chunk: Required property 'name' must be a string.")}validateDataItem(e){if(!(0,n.isUint)(e.typeHint))throw new n.SdtfError("Invalid item: Required property 'typeHint' must be an unsigned integer.");if(e.accessor&&!(0,n.isUint)(e.accessor))throw new n.SdtfError("Invalid item: Optional property 'accessor' must be an unsigned integer.");if(e.attributes&&!(0,n.isUint)(e.attributes))throw new n.SdtfError("Invalid item: Optional property 'attributes' must be an unsigned integer.");if(e.accessor&&e.accessor>=this.componentList.accessors.length)throw new n.SdtfError("Invalid item: Accessor index is out of range.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new n.SdtfError("Invalid item: Attributes index is out of range.");if(e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new n.SdtfError("Invalid item: Type hint index is out of range.")}validateFileInfo(e){if(!(0,n.isNonEmptyString)(e.version))throw new n.SdtfError("Invalid file info: Required property 'version' must be a non-empty string.")}validateNode(e){try{this.validateChunkOrNode(e)}catch(e){throw new n.SdtfError(`Invalid node: ${e.message}`)}}validateTypeHint(e){if(!(0,n.isNonEmptyString)(e.name))throw new n.SdtfError("Invalid type hint: Required property 'name' must be a non-empty string.")}validateChunkOrNode(e){if(e.attributes&&!(0,n.isUint)(e.attributes))throw new n.SdtfError("Optional property 'attributes' must be an unsigned integer.");if(!(0,n.isUintArray)(e.items))throw new n.SdtfError("Required property 'items' must be an array of unsigned integers.");if(!(0,n.isUintArray)(e.nodes))throw new n.SdtfError("Required property 'nodes' must be an array of unsigned integers.");if(e.typeHint&&!(0,n.isUint)(e.typeHint))throw new n.SdtfError("Optional property 'typeHint' must be an unsigned integer.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new n.SdtfError("Attributes index is out of range.");if(e.items.forEach((e=>{if(e>=this.componentList.items.length)throw new n.SdtfError(`Node index '${e}' is out of range.`)})),e.nodes.forEach((e=>{if(e>=this.componentList.nodes.length)throw new n.SdtfError(`Node index '${e}' is out of range.`)})),e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new n.SdtfError("Type hint index is out of range.");if(!e.nodes.every((t=>this.componentList.nodes[t].componentId!==e.componentId)))throw new n.SdtfError("Node is referencing itself in the 'nodes' property.")}}},3648:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeableComponentListFromAsset=void 0,t.writeableComponentListFromAsset=function(e){const t=(e,t)=>{e&&-1===t.findIndex((t=>t.componentId===e.componentId))&&t.push(e)},i={accessors:[],asset:e,attributes:[],buffers:[],bufferViews:[],chunks:e.chunks,items:[],nodes:[],typeHints:[],fileInfo:e.fileInfo};return i.chunks.forEach((e=>{t(e.attributes,i.attributes),e.items.forEach((e=>t(e,i.items))),e.nodes.forEach((e=>t(e,i.nodes))),t(e.typeHint,i.typeHints)})),i.nodes.forEach((e=>{t(e.attributes,i.attributes),e.items.forEach((e=>t(e,i.items))),e.nodes.forEach((e=>t(e,i.nodes))),t(e.typeHint,i.typeHints)})),i.items.forEach((e=>{t(e.accessor,i.accessors),t(e.attributes,i.attributes),t(e.typeHint,i.typeHints)})),i.attributes.forEach((e=>{Object.values(e.entries).forEach((e=>{t(e.accessor,i.accessors),t(e.typeHint,i.typeHints)}))})),i.accessors.forEach((e=>t(e.bufferView,i.bufferViews))),i.bufferViews.forEach((e=>t(e.buffer,i.buffers))),i}},782:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfConstructor=void 0;const n=i(2377),r=i(4061),a=i(9827),s=i(9549),o=i(6991);t.SdtfConstructor=class{constructor(e){this.binarySdtf=new n.SdtfBinarySdtf,this.factory=new r.SdtfComponentFactoryWrapper,this.postProcessor=new s.SdtfWriteableComponentPostProcessor(e)}createBinarySdtf(e){const t=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(t);return this.binarySdtf.constructBinarySdtf(i)}getFactory(){return new a.SdtfWriteableComponentFactory}getWriter(){return new o.SdtfWriter(this.getFactory())}}},9827:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableComponentFactory=void 0;const n=i(7079),r=i(3344),a=i(5314),s=i(6877),o=i(7709),l=i(5875),c=i(1415),u=i(8712),h=i(3299),d=i(683),f=i(9607);t.SdtfWriteableComponentFactory=class{constructor(){this.ASSET_VERSION="1.0",this.ASSET_GENERATOR="ShapeDiverSdtfWriter"}createAccessor(e){const t=new r.SdtfWriteableAccessor;return e&&(t.bufferView=this.createBufferView(e)),t}createAsset(){const e=new h.SdtfWriteableFileInfo(this.ASSET_VERSION);return e.generator=this.ASSET_GENERATOR,new a.SdtfWriteableAsset(e)}createAttribute(e,t){const i=new s.SdtfWriteableAttribute;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),void 0!==t&&(i.typeHint=this.createTypeHint(t)),i}createAttributes(e){const t=new s.SdtfWriteableAttributes;return Object.entries(null!=e?e:{}).forEach((([e,i])=>t.entries[e]=this.createAttribute(...i))),t}createBuffer(e){const t=new o.SdtfWriteableBuffer;return t.data=e,t}createBufferView(e){const t=new l.SdtfWriteableBufferView;return e&&(t.buffer=this.createBuffer(e.data),t.contentType=e.contentType),t}createChunk(e){const t=new c.SdtfWriteableChunk;return t.name=e,t}createDataItem(e,t){const i=new u.SdtfWriteableDataItem;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),void 0!==t&&(i.typeHint=this.createTypeHint(t)),i}createNode(){return new d.SdtfWriteableNode}createTypeHint(e){const t=new f.SdtfWriteableTypeHint;return t.name=e,t}isBufferContent(e){return!!((0,n.isDataObject)(e)&&e.data&&e.contentType)}}},9549:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableComponentPostProcessor=void 0;const n=i(5314),r=i(7709),a=i(3648),s=i(9827);t.SdtfWriteableComponentPostProcessor=class{constructor(e){this.integrations=e,this.factory=new s.SdtfWriteableComponentFactory}optimize(e){const t=n.SdtfWriteableAsset.clone(e);let i=(0,a.writeableComponentListFromAsset)(t);return this.processDataComponents(i.attributes.flatMap((e=>Object.values(e.entries)))),this.processDataComponents(i.items),this.postProcessDataComponents([...i.attributes.flatMap((e=>Object.values(e.entries))),...i.items]),i=(0,a.writeableComponentListFromAsset)(t),this.complementTypeHints(i),this.removeDuplicatedTypeHints(i),this.resolveBuffers(i),i}processDataComponents(e){e.forEach((e=>{const t=this.integrations.find((t=>{var i,n;return t.isTypeHintSupported(null!==(n=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==n?n:"")}));t&&t.getWriter(this.factory).writeComponent(e)}))}postProcessDataComponents(e){this.integrations.forEach((t=>{const i=e.filter((e=>{var i,n;return t.isTypeHintSupported(null!==(n=null===(i=e.typeHint)||void 0===i?void 0:i.name)&&void 0!==n?n:"")}));0!==i.length&&t.getWriter(this.factory).postProcessComponents(i)}))}complementTypeHints(e){const t=(t,i)=>{var n,r;if(void 0!==(null===(n=t.typeHint)||void 0===n?void 0:n.name))return;if(0===i.length)return;let a=null===(r=i[0].typeHint)||void 0===r?void 0:r.name;void 0!==a&&i.every((e=>{var t;return(null===(t=e.typeHint)||void 0===t?void 0:t.name)===a}))&&(t.typeHint=this.factory.createTypeHint(a),e.typeHints.push(t.typeHint))};e.nodes.forEach((e=>t(e,e.items))),e.chunks.forEach((e=>t(e,e.nodes)))}removeDuplicatedTypeHints(e){const t=[];e.typeHints.forEach((e=>{t.find(this.areTypeHintsSimilar.bind(this,e))||t.push(e)}));const i=e=>{e.typeHint&&!t.find((t=>t.componentId===e.typeHint.componentId))&&(e.typeHint=t.find((t=>this.areTypeHintsSimilar(t,e.typeHint))))};e.attributes.forEach((e=>Object.values(e.entries).forEach((e=>i(e))))),e.chunks.forEach((e=>i(e))),e.items.forEach((e=>i(e))),e.nodes.forEach((e=>i(e))),e.typeHints=Object.values(t)}areTypeHintsSimilar(e,t){var i,n;const r=Object.entries(null!==(i=e.additionalProperties)&&void 0!==i?i:{}),a=Object.entries(null!==(n=t.additionalProperties)&&void 0!==n?n:{});if(e.name!==t.name||r.length!==a.length)return!1;for(let e=0;e<r.length;e++){const[i,n]=r[e];if(t.additionalProperties[i]!==n)return!1}return!0}resolveBuffers(e){const t={};e.bufferViews.forEach((e=>{var i;if(!e.buffer)return;const n=null!==(i=e.buffer.uri)&&void 0!==i?i:"";t[n]||(t[n]=[]),t[n].push(e)}));const i=[];Object.entries(t).forEach((([e,t])=>{const[n,r]=this.mergeBuffers(e,t.map((e=>e.buffer)));t.forEach(((e,t)=>{var i;e.byteOffset=r[t],e.byteLength=null!==(i=e.buffer.data.byteLength)&&void 0!==i?i:0,e.buffer=n})),i.push(n)})),e.buffers=i}mergeBuffers(e,t){const i=new r.SdtfWriteableBuffer;i.uri=e,i.additionalProperties={},Object.assign(i.additionalProperties,...t.map((e=>e.additionalProperties)));const[n,a]=this.mergeBufferData(t);return i.byteLength=n.byteLength,i.data=n,[i,a]}mergeBufferData(e){var t,i;const n=e=>{const t=e%4;return 0===t?e:e+4-t};let r=[0],a=null!==(i=null===(t=e[0].data)||void 0===t?void 0:t.byteLength)&&void 0!==i?i:0;if(e.length>0){a=n(a);for(let t=1;t<e.length;t++){let i=0;const s=e[t].data;s&&(i=t===e.length-1?s.byteLength:n(s.byteLength)),r.push(r[t-1]+a),a=i}}const s=new Uint8Array(r[r.length-1]+a);return e.forEach(((e,t)=>{const i=e.data?new Uint8Array(e.data):new Uint8Array(0);s.set(i,r[t])})),[s,r]}}},6991:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriter=void 0;const n=i(383);t.SdtfWriter=class{constructor(e){this.factory=e}createSimpleDataSdtf(e,t){const i=this.factory.createChunk(e);t.forEach((e=>{const t=this.factory.createDataItem(e.content,e.typeHint);e.attributes&&(t.attributes=this.factory.createAttributes((e=>{const t={};return e.forEach((e=>t[e.name]=[e.content,e.typeHint])),t})(e.attributes))),i.items.push(t)}));const n=this.factory.createAsset();return n.chunks.push(i),n}createGrasshopperSdtfBuilder(){return new n.SdtfGrasshopperSdtfBuilder(this.factory)}}},2173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfGrasshopperSdtfBuilder=void 0;const n=i(7079);t.SdtfGrasshopperSdtfBuilder=class{constructor(e){this.factory=e,this.asset=e.createAsset()}addChunkForListData(e,t,i){this.addChunkForTreeData(e,{branches:[t],paths:[[0]]},i)}addChunkForTreeData(e,t,i){const r=this.factory.createChunk(e);if(this.asset.chunks.push(r),i&&(r.attributes=i),t.branches.length!==t.paths.length)throw new n.SdtfError("Invalid tree parameter: 'branches' and 'paths' of the grasshopper structure must have the same number of elements.");if(!t.paths.every((e=>(0,n.isIntArray)(e))))throw new n.SdtfError("Invalid tree parameter: 'paths' of the grasshopper structure must only consist of integer values.");if(!t.branches.every((e=>e.every((e=>{var t;return!!(null===(t=e.typeHint)||void 0===t?void 0:t.name)})))))throw new n.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must contain a type hint.");let a;for(let e=0;e<t.branches.length;e++){const i=t.branches[e],s=t.paths[e],o=this.factory.createNode();o.name="["+s.join(",")+"]",i.forEach((e=>{if(a||(a=e.typeHint.name),a!==e.typeHint.name)throw new n.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must have the same type hint.");o.items.push(e)})),r.nodes.push(o)}}build(){return this.asset}}},7830:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfBaseWriteableComponent=void 0;const n=i(9078);t.SdtfBaseWriteableComponent=class{constructor(){this.componentId=(0,n.createComponentId)()}toDataObject(){return(0,n.userComponentToDataObject)(this)}}},3344:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAccessor=void 0;const n=i(7830),r=i(5875);class a extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new a;return e.bufferView&&(t.bufferView=r.SdtfWriteableBufferView.clone(e.bufferView)),t.id=e.id,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableAccessor=a},5314:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAsset=void 0;const n=i(7830),r=i(1415),a=i(3299);class s extends n.SdtfBaseWriteableComponent{constructor(e){super(),this.fileInfo=e,this.chunks=[],this.additionalProperties={}}static clone(e){const t=a.SdtfWriteableFileInfo.clone(e.fileInfo),i=new s(t);return i.chunks=e.chunks.map((e=>r.SdtfWriteableChunk.clone(e))),i.additionalProperties=Object.assign({},e.additionalProperties),i}}t.SdtfWriteableAsset=s},6877:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableAttribute=t.SdtfWriteableAttributes=void 0;const n=i(7079),r=i(7830),a=i(3344),s=i(9607);class o extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){return this.entries}static clone(e){const t=new o;return t.entries={},Object.entries(e.entries).forEach((([e,i])=>t.entries[e]=l.clone(i))),t}}t.SdtfWriteableAttributes=o;class l{static clone(e){const t=new l;return e.accessor&&(t.accessor=a.SdtfWriteableAccessor.clone(e.accessor)),e.typeHint&&(t.typeHint=s.SdtfWriteableTypeHint.clone(e.typeHint)),t.value=(0,n.tryDeepCopy)(e.value),t}}t.SdtfWriteableAttribute=l},7709:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableBuffer=void 0;const n=i(7830);class r extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new r;return t.byteLength=e.byteLength,t.data=e.data,t.uri=e.uri,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableBuffer=r},5875:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableBufferView=void 0;const n=i(7830),r=i(7709);class a extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new a;return e.buffer&&(t.buffer=r.SdtfWriteableBuffer.clone(e.buffer)),t.byteLength=e.byteLength,t.byteOffset=e.byteOffset,t.contentEncoding=e.contentEncoding,t.contentType=e.contentType,t.name=e.name,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableBufferView=a},1415:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableChunk=void 0;const n=i(683);class r extends n.SdtfWriteableNode{static clone(e){return n.SdtfWriteableNode.clone(e)}}t.SdtfWriteableChunk=r},8712:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableDataItem=void 0;const n=i(7079),r=i(7830),a=i(3344),s=i(6877),o=i(9607);class l extends r.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new l;return e.accessor&&(t.accessor=a.SdtfWriteableAccessor.clone(e.accessor)),e.attributes&&(t.attributes=s.SdtfWriteableAttributes.clone(e.attributes)),e.typeHint&&(t.typeHint=o.SdtfWriteableTypeHint.clone(e.typeHint)),t.value=(0,n.tryDeepCopy)(e.value),t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableDataItem=l},3299:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableFileInfo=void 0;const n=i(7830);class r extends n.SdtfBaseWriteableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}static clone(e){const t=new r(e.version);return t.copyright=e.copyright,t.generator=e.generator,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableFileInfo=r},683:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableNode=void 0;const n=i(7830),r=i(6877),a=i(8712),s=i(9607);class o extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}static clone(e){const t=new o;return e.attributes&&(t.attributes=r.SdtfWriteableAttributes.clone(e.attributes)),t.items=e.items.map((e=>a.SdtfWriteableDataItem.clone(e))),t.name=e.name,t.nodes=e.nodes.map((e=>this.clone(e))),e.typeHint&&(t.typeHint=s.SdtfWriteableTypeHint.clone(e.typeHint)),t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableNode=o},9607:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfWriteableTypeHint=void 0;const n=i(7830);class r extends n.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const t=new r;return t.name=e.name,t.additionalProperties=Object.assign({},e.additionalProperties),t}}t.SdtfWriteableTypeHint=r},7797:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.DataEngine=void 0;const r=i(7038),a=i(6538),s=i(4320),o=i(3705),l=i(2556),c=i(3858),u=i(8877),h=i(9780),d=i(887);t.DataEngine=class{constructor(){this._geometryEngine=a.GeometryEngine.instance,this._htmlElementAnchorEngine=h.HTMLElementAnchorEngine.instance,this._eventEngine=u.EventEngine.instance,this._materialEngine=s.MaterialEngine.instance,this._sdtfEngine=o.SDTFEngine.instance,this._tag3dEngine=l.Tag3dEngine.instance,this._uuidGenerator=u.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,t,i){return n(this,void 0,void 0,(function*(){if(!e||e&&!e.format)throw new u.ShapeDiverViewerDataProcessingError("DataEngine cannot load content.");let n;i=i||this._uuidGenerator.create(),"glb"===e.format||"gltf"===e.format?n=yield this._geometryEngine.loadContent(e,i):"material"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:r.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:0,status:"Loading material content."}),n=yield this._materialEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:r.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:1,status:"MATERIAL content loaded."})):"tag2d"===e.format||"anchor"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:r.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),n=yield this._htmlElementAnchorEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:r.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):"tag3d"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:r.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),n=yield this._tag3dEngine.loadContent(e),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:r.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):"sdtf"===e.format?(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:r.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:0,status:"Loading sdTF content."}),n=yield this._sdtfEngine.loadContent(e,t),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:r.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:1,status:"SdTF content loaded."})):(this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_START,{type:r.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:0,status:"Loading custom content."}),n=new c.TreeNode("custom"),n.data.push(new r.CustomData(Object.assign({},e))),this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_END,{type:r.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:1,status:"Custom content loaded."}));const a=new c.TreeNode("transformation");if(e.transformations&&Array.isArray(e.transformations))for(let t=0;t<e.transformations.length;t++){const i=e.transformations[t];if(Array.isArray(i)&&16===i.length){const e=n.clone();e.transformations=[{id:"content_"+t,matrix:d.mat4.fromValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])}].concat(n.transformations),a.updateVersion(),a.addChild(e)}}else a.addChild(n);return a}))}}},5254:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataEngine=void 0;const n=i(7797);Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return n.DataEngine}})},1183:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryEngine=void 0;const r=i(8877),a=i(8517),s=i(2549);t.GeometryEngine=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=r.HttpClient.instance,this._loadingQueue=[],this._logger=r.Logger.instance,this._performanceEvaluator=r.PerformanceEvaluator.instance,this._loadingQueueLength=1/0}static get instance(){return this._instance||(this._instance=new this)}get parallelGlTFProcessing(){return this._loadingQueueLength}set parallelGlTFProcessing(e){this._loadingQueueLength=e}loadContent(e,t){return n(this,void 0,void 0,(function*(){if(!e||e&&!e.href)throw new r.ShapeDiverViewerDataProcessingError("GeometryEngine cannot load content.");for(;this._loadingQueueLength<=this._loadingQueue.length;)yield new Promise((e=>setTimeout(e,10)));const i=e.href,o=new Promise(((o,l)=>n(this,void 0,void 0,(function*(){let n,c,u,h,d,f="2.0";if("glb"===e.format||"gltf"===e.format){this._performanceEvaluator.startSection("gltfProcessing."+i),this._performanceEvaluator.startSection("loadGltf."+i);const e=yield this._httpClient.get(i,{responseType:"arraybuffer"});this._performanceEvaluator.endSection("loadGltf."+i);const t=(new TextDecoder).decode(new Uint8Array(e.data,0,4));if("glTF"===t){c=e.data;const i=new DataView(c,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(h={magic:t,version:i.getUint32(4,!0),length:i.getUint32(8,!0),contentLength:i.getUint32(12,!0),contentFormat:i.getUint32(16,!0)},"glTF"!=h.magic)throw new r.ShapeDiverViewerDataProcessingError("Invalid data: glTF magic wrong.");const a=new DataView(c,this.BINARY_EXTENSION_HEADER_LENGTH,h.contentLength),s=(new TextDecoder).decode(a);if(n=JSON.parse(s),n&&n.asset&&n.asset.version){const e=(n.asset.version+"").endsWith(".0")?n.asset.version:n.asset.version+".0";if(h.version+".0"!==e)throw new r.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: glTF header version ("+h.version+") is not the same as asset version ("+e+").");f=h.version+".0"}else f=h.version+".0"}else{if(n=JSON.parse((new TextDecoder).decode(e.data)),n&&n.asset&&n.asset.version){if("2.0"!==n.asset.version)throw new r.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: Only gltf v2 is supported in a non-binary format.")}else this._logger.warn("GeometryEngine.loadContent: No version specified in asset, trying to load as v2."),f="2.0";const t=e=>{const t=e.includes("/")?"/":"\\",i=e.split(t);return i.pop(),i.join(t)};u=t(i),!u&&window&&window.location&&window.location.href&&(u=t(window.location.href))}}d="1.0"===f?(new a.GLTFLoader).load(n,c,h,u,t):(new s.GLTFLoader).load(n,c,h,u,t),d.catch((e=>{l(e)})),o(d)}))));this._loadingQueue.push(o);const l=yield o;return this._loadingQueue.splice(this._loadingQueue.indexOf(o),1),this._performanceEvaluator.endSection("gltfProcessing."+i),l}))}}},8517:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=void 0;const r=i(3858),a=i(8877),s=i(4465),o=i(887),l=i(7038),c=i(8306);t.GLTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=a.HttpClient.instance,this._uuidGenerator=a.UuidGenerator.instance,this._logger=a.Logger.instance,this._implementedExtensions=["KHR_materials_common"],this._globalTransformation=o.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._eventEngine=a.EventEngine.instance,this._performanceEvaluator=a.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._eventId="",this._numberOfNodes=0,this._numberOfConvertedNodes=0,this._progressTimer=0}load(e,t,i,r,s){return n(this,void 0,void 0,(function*(){this._eventId=s||this._uuidGenerator.create();const n={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 1.0 loading."};let o;this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_START,n),this._numberOfConvertedNodes=0,this._numberOfNodes=e.nodes?Object.values(e.nodes).length:0,this._progressTimer=performance.now(),this._baseUri=r,t&&i&&(this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+i.contentLength,i.length)),this._content=e,t&&i&&(o=yield(new c.SDGTFLoader).load(t,i.length));const u={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.25,status:"Loaded SDgTF content."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,u),this.validateVersionAndExtensions();const h=yield this.loadScene();o&&h.addChild(o);const d={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_END,d),h}))}loadWithUrl(e){return n(this,void 0,void 0,(function*(){this._performanceEvaluator.startSection("gltfProcessing."+e),this._performanceEvaluator.startSection("loadGltf."+e);const t=(yield this._httpClient.get(e,{responseType:"arraybuffer"})).data;this._performanceEvaluator.endSection("loadGltf."+e);const i=new DataView(t,0,this.BINARY_EXTENSION_HEADER_LENGTH),n={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3)),version:i.getUint32(4,!0),length:i.getUint32(8,!0),contentLength:i.getUint32(12,!0),contentFormat:i.getUint32(16,!0)};if("glTF"!=n.magic)throw new a.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: glTF magic wrong.");const r=new DataView(t,this.BINARY_EXTENSION_HEADER_LENGTH,n.contentLength),s=(new TextDecoder).decode(r);this._content=JSON.parse(s),this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+n.contentLength,n.length);const o=yield(new c.SDGTFLoader).load(t,n.length);this.validateVersionAndExtensions();const l=yield this.loadScene();return l.addChild(o),this._performanceEvaluator.endSection("gltfProcessing."+e),l}))}validateVersionAndExtensions(){if(this._content.extensionsUsed){const e=[];for(let t=0;t<this._content.extensionsUsed.length;t++)this._implementedExtensions.includes(this._content.extensionsUsed[t])||e.push(this._content.extensionsUsed[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");e.forEach(((i,n)=>{t+='"'+i+'"'+(n===e.length-1?"":n===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+t)}}}loadAccessor(e){var t,i;return n(this,void 0,void 0,(function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const n=this._content.accessors[e],r=yield this.loadBufferView(n.bufferView),a=s.ACCESSORTYPE_V1[n.type];5124===n.componentType&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const o=s.ACCESSORCOMPONENTTYPE_V1[n.componentType],c=o.BYTES_PER_ELEMENT,u=c*a,h=n.byteOffset||0,d=n.byteStride,f=this._content.bufferViews[n.bufferView]?this._content.bufferViews[n.bufferView].target:void 0,p=this._content.asset&&"ShapeDiverGltfV1Writer"===(null===(t=this._content.asset)||void 0===t?void 0:t.generator)&&n.min||[],m=this._content.asset&&"ShapeDiverGltfV1Writer"===(null===(i=this._content.asset)||void 0===i?void 0:i.generator)&&n.max||[];return new l.AttributeData(new o(r),a,u,h,c,!1,n.count,p,m,d,f)}))}loadBuffer(e){return n(this,void 0,void 0,(function*(){if(!this._content.buffers[e])throw new Error("Buffer not available.");const t=this._content.buffers[e];if("binary_glTF"===e)return this._body;if("arraybuffer"===t.type)return(yield this._httpClient.get(t.uri,{responseType:"arraybuffer"})).data;if(!this._body)throw new Error("Buffer not available.");return this._body}))}loadBufferView(e){return n(this,void 0,void 0,(function*(){if(!this._content.bufferViews[e])throw new Error("Buffer View not available.");const t=this._content.bufferViews[e],i=yield this.loadBuffer(t.buffer),n=void 0!==t.byteLength?t.byteLength:0;return i.slice(t.byteOffset,t.byteOffset+n)}))}loadMaterial(e){return n(this,void 0,void 0,(function*(){if(!this._content.materials[e])throw new Error("Material not available.");const t=this._content.materials[e],i=new l.MaterialStandardData;if(void 0!==t.name&&(i.name=t.name),t.extensions&&t.extensions.KHR_materials_common){const e=t.extensions.KHR_materials_common.technique;e&&"BLINN"!==e&&this._logger.warn("The technique "+e+" is not supported. Trying to load the material either way.");const n=t.extensions.KHR_materials_common.values;if(n.hasOwnProperty("doubleSided")&&(i.side=n.doubleSided?l.MATERIAL_SIDE.DOUBLE:l.MATERIAL_SIDE.FRONT),i.color="#d3d3d3",n.hasOwnProperty("diffuse")&&Array.isArray(n.diffuse)){const e=n.diffuse.map((e=>255*e));i.color=e,i.opacity=Math.max(0,Math.min(n.diffuse[3],1))}else n.hasOwnProperty("diffuse")&&this._logger.warn("GLTFLoader.loadMaterial: The value diffuse was set for a material, but is not supported in that type.");if(!n.hasOwnProperty("diffuse")&&n.hasOwnProperty("ambient")){const e=n.ambient.map((e=>255*e));i.color=e}n.hasOwnProperty("emission")&&Array.isArray(n.emission)?i.emissiveness=n.emission:n.hasOwnProperty("emission")&&this._logger.warn("GLTFLoader.loadMaterial: The value emission was set for a material, but is not supported in that type."),n.hasOwnProperty("shininess")&&(i.metalness=Math.min(1,n.shininess),i.roughness=1-Math.min(1,n.shininess)),n.hasOwnProperty("transparency")&&(i.opacity=Math.max(0,Math.min(n.transparency,1))),n.hasOwnProperty("transparency")||!n.hasOwnProperty("transparent")||"true"!==n.transparency&&!0!==n.transparency||(i.opacity=0),n.hasOwnProperty("_roughness")&&(i.roughness=Math.min(1,Math.max(0,n.roughness))),n.hasOwnProperty("_metalness")&&(i.metalness=Math.min(1,Math.max(0,n.metalness)))}return i}))}loadMesh(e){return n(this,void 0,void 0,(function*(){if(!this._content.meshes[e])throw new Error("Mesh not available.");const t=this._content.meshes[e],i=new r.TreeNode(e);if(!t.primitives)return new r.TreeNode("primitive");for(let e=0,n=t.primitives.length;e<n;e++){const n=new r.TreeNode("primitive_"+e);i.addChild(n);const a=t.primitives[e],s={};for(const e in a.attributes){let t=e;if(/\d/.test(t)&&!t.includes("_")){const e=t.search(/\d/);t=t.substring(0,e)+"_"+t.substring(e,t.length)}else"TEXCOORD"===t||"COLOR"===t||"JOINTS"===t||"WEIGHTS"===t?t+="_0":"UV"===t&&(t="TEXCOORD_0");s[t]=yield this.loadAccessor(a.attributes[e]),t.startsWith("COLOR")&&(s[t]=new l.AttributeData(s[t].array,s[t].itemSize,s[t].itemBytes,s[t].byteOffset,s[t].elementBytes,!0,s[t].count,[],[],s[t].byteStride,s[t].target))}let o;a.material&&(o=yield this.loadMaterial(a.material));const c=new l.GeometryData(new l.PrimitiveData(s,yield this.loadAccessor(a.indices)),l.PRIMITIVE_MODE.TRIANGLES,o);n.data.push(c)}return i}))}loadNode(e){return n(this,void 0,void 0,(function*(){if(!this._content.nodes[e])throw new Error("Node not available.");const t=this._content.nodes[e],i=new r.TreeNode(e);if(t.matrix)i.addTransformation({id:this._uuidGenerator.create(),matrix:o.mat4.fromValues(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5],t.matrix[6],t.matrix[7],t.matrix[8],t.matrix[9],t.matrix[10],t.matrix[11],t.matrix[12],t.matrix[13],t.matrix[14],t.matrix[15])});else if(t.translation||t.scale||t.rotation){const e=t.translation?o.mat4.fromTranslation(o.mat4.create(),o.vec3.fromValues(t.translation[0],t.translation[1],t.translation[2])):o.mat4.create(),n=t.scale?o.mat4.fromScaling(o.mat4.create(),o.vec3.fromValues(t.scale[0],t.scale[1],t.scale[2])):o.mat4.create(),r=t.rotation?o.mat4.fromQuat(o.mat4.create(),o.vec4.fromValues(t.rotation[0],t.rotation[1],t.rotation[2],t.rotation[3])):o.mat4.create(),a=o.mat4.mul(o.mat4.create(),o.mat4.mul(o.mat4.create(),e,n),r);i.addTransformation({id:this._uuidGenerator.create(),matrix:a})}if(t.meshes)for(let e=0,n=t.meshes.length;e<n;e++)i.addChild(yield this.loadMesh(t.meshes[e]));if(t.children)for(let e=0,n=t.children.length;e<n;e++)i.addChild(yield this.loadNode(t.children[e]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.25,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return i}))}loadScene(){var e,t;return n(this,void 0,void 0,(function*(){if(!this._content.scene)throw new Error("No scene.");if(!this._content.scenes[this._content.scene])throw new Error("Scene not available.");const i=this._content.scenes[this._content.scene],n=new r.TreeNode(this._content.scene);if(this._content.asset&&"ShapeDiverGltfWriter"!==(null===(e=this._content.asset)||void 0===e?void 0:e.generator)&&"ShapeDiverGltfV1Writer"!==(null===(t=this._content.asset)||void 0===t?void 0:t.generator)&&n.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),i.nodes)for(let e=0,t=i.nodes.length;e<t;e++)n.addChild(yield this.loadNode(i.nodes[e]));return n}))}}},8306:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SDGTFLoader=void 0;const r=i(3858),a=i(8877),s=i(4465),o=i(7038),l=i(887);t.SDGTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._logger=a.Logger.instance}load(e,t){return n(this,void 0,void 0,(function*(){if(!(t<e.byteLength))return new r.TreeNode;{const i=new DataView(e,t,this.BINARY_EXTENSION_HEADER_LENGTH+1),n={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3))+String.fromCharCode(i.getUint8(4)),version:i.getUint32(5,!0),length:i.getUint32(9,!0),contentLength:i.getUint32(13,!0),contentFormat:i.getUint32(17,!0)};if("sdgTF"!=n.magic)throw new a.ShapeDiverViewerDataProcessingError("SDGTFLoader.load: Invalid data: sdgTF magic wrong.");const r=new DataView(e,t+this.BINARY_EXTENSION_HEADER_LENGTH+1,n.contentLength),s=(new TextDecoder).decode(r);this._content=JSON.parse(s),this._body=e.slice(t+this.BINARY_EXTENSION_HEADER_LENGTH+1+n.contentLength,t+n.length)}return yield this.loadScene()}))}convertToIndicesArray(e){const t=Math.max(0,...e);return t<255?new Uint8Array(e):t<65535?new Uint16Array(e):new Uint32Array(e)}loadAccessor(e){return n(this,void 0,void 0,(function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const t=this._content.accessors[e],i=this._body,n=s.ACCESSORTYPE_V1[t.type],r=s.ACCESSORCOMPONENTTYPE_V1[t.componentType],a=r.BYTES_PER_ELEMENT,l=a*n,c=t.byteOffset||0;return new o.AttributeData(new r(i,c,n*t.count),n,l,c,a,!1,t.count)}))}loadArcs(){return n(this,void 0,void 0,(function*(){if(!this._content.arcs)throw new Error("Arcs not available.");const e=this._content.arcs,t=new r.TreeNode("arcs"),i=yield this.loadAccessor(e.attributes.ARCS),n=i.array.length/i.itemSize;for(let e=0;e<n;++e){const n=new r.TreeNode("arc_"+e),a=12*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=l.vec3.fromValues(i.array[a+6],i.array[a+7],i.array[a+8]),h=i.array[a+9],d=i.array[a+10],f=i.array[a+11],p=l.vec3.cross(l.vec3.create(),c,u);if(h<=0){this._logger.warn("SDGTFLoader.loadArcs: Arc radius is <= 0.");continue}const m=[],g=e=>{const t=2*Math.PI;let i=f-d;const n=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=t;for(;i>t;)i-=t;i=i<Number.EPSILON?n?0:t:i;const r=d+e*i;let a=h*Math.cos(r),s=h*Math.sin(r);m.push(a,s,0)},v=Math.max(3,Math.round((f-d)/2*Math.PI*50));for(let e=0;e<=v;e++)g(e/v);const b=new Float32Array(m),_={};_.POSITION=new o.AttributeData(b,3,0,0,0,!1,b.length/3);const y=new o.GeometryData(new o.PrimitiveData(_,null),o.PRIMITIVE_MODE.LINE_STRIP);n.data.push(y),n.addTransformation({id:"arc_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(s[0],s[1],s[2]))});const A=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(c[0],u[0],p[0],0,c[1],u[1],p[1],0,c[2],u[2],p[2],0,0,0,0,1));n.addTransformation({id:"arc_"+e+"_rotation",matrix:A}),t.addChild(n)}return t}))}loadBeziercurve(e){return n(this,void 0,void 0,(function*(){if(!this._content.beziercurves[e])throw new Error("Beziercurve not available.");const t=this._content.beziercurves[e],i=new r.TreeNode(e),n=yield this.loadAccessor(t.attributes.CONTROLPOINTS),a=[];for(let e=0;e<n.array.length;e+=3)a.push(l.vec4.fromValues(n.array[e],n.array[e+1],n.array[e+2],1));const s=yield this.loadAccessor(t.attributes.KNOTS),c=[s.array[0]];for(let e=0;e<s.array.length;e++)c.push(s.array[e]);c.push(s.array[s.array.length-1]);const u=t.degree,h=[],d=e=>{let t=(e=>{const t=(e=>{const t=c.length-u-1;if(e>=c[t])return t-1;if(e<=c[u])return u;let i=u,n=t,r=Math.floor((i+n)/2);for(;e<c[r]||e>=c[r+1];)e<c[r]?n=r:i=r,r=Math.floor((i+n)/2);return r})(e),i=((e,t)=>{const i=[],n=[],r=[];i[0]=1;for(let a=1;a<=u;++a){n[a]=t-c[e+1-a],r[a]=c[e+a]-t;let s=0;for(let e=0;e<a;++e){const t=r[e+1],o=n[a-e],l=i[e]/(t+o);i[e]=s+t*l,s=o*l}i[a]=s}return i})(t,e),n=l.vec4.create();for(let e=0;e<=u;++e){const r=a[t-u+e],s=i[e],o=r[3]*s;l.vec4.add(n,n,l.vec4.fromValues(r[0]*o,r[1]*o,r[2]*o,r[3]*s))}return n})(c[0]+e*(c[c.length-1]-c[0]));1!==t[3]&&(t=l.vec4.divide(l.vec4.create(),t,l.vec4.fromValues(t[3],t[3],t[3],t[3]))),h.push(t[0],t[1],t[2])};let f=0;for(let e=1;e<a.length;e++)f+=l.vec3.distance(l.vec3.fromValues(a[e-1][0],a[e-1][1],a[e-1][2]),l.vec3.fromValues(a[e][0],a[e][1],a[e][2]));const p=Math.min(100,Math.max(25,Math.floor(f/.1)));for(let e=0;e<=p;e++)d(e/p);const m=new Float32Array(h),g={};g.POSITION=new o.AttributeData(m,3,0,0,0,!1,m.length/3);const v=new o.GeometryData(new o.PrimitiveData(g,null),o.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(v),i}))}loadCircles(){return n(this,void 0,void 0,(function*(){if(!this._content.circles)throw new Error("Circles not available.");const e=this._content.circles,t=new r.TreeNode("circles"),i=yield this.loadAccessor(e.attributes.CIRCLES),n=i.array.length/i.itemSize;for(let e=0;e<n;e++){const n=new r.TreeNode("circle_"+e),a=10*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=l.vec3.fromValues(i.array[a+6],i.array[a+7],i.array[a+8]),h=i.array[a+9],d=l.vec3.cross(l.vec3.create(),c,u);if(h<=0){this._logger.warn("SDGTFLoader.loadCircles: Circle radius is <= 0.");continue}const f=[],p=e=>{const t=2*Math.PI;let i=2*Math.PI-0;const n=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=t;for(;i>t;)i-=t;i=i<Number.EPSILON?n?0:t:i;const r=0+e*i;let a=h*Math.cos(r),s=h*Math.sin(r);f.push(a,s,0)},m=50;for(let e=0;e<=m;e++)p(e/m);const g=new Float32Array(f),v={};v.POSITION=new o.AttributeData(g,3,0,0,0,!1,g.length/3);const b=new o.GeometryData(new o.PrimitiveData(v,null),o.PRIMITIVE_MODE.LINE_STRIP);n.data.push(b),n.addTransformation({id:"circle_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(s[0],s[1],s[2]))});const _=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(c[0],u[0],d[0],0,c[1],u[1],d[1],0,c[2],u[2],d[2],0,0,0,0,1));n.addTransformation({id:"circle_"+e+"_rotation",matrix:_}),t.addChild(n)}return t}))}loadCylinders(){return n(this,void 0,void 0,(function*(){if(!this._content.cylinders)throw new Error("Cylinders not available.");const e=this._content.cylinders,t=new r.TreeNode("cylinders"),i=yield this.loadAccessor(e.attributes.CYLINDERS),n=i.array.length/i.itemSize;for(let e=0;e<n;e++){const n=new r.TreeNode("cylinder_"+e),a=7*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=l.vec3.fromValues(i.array[a+3],i.array[a+4],i.array[a+5]),u=i.array[a+6],h=l.vec3.sub(l.vec3.create(),s,c);let d;d=Math.abs(l.vec3.dot(h,l.vec3.fromValues(1,0,0)))<Math.abs(l.vec3.dot(h,l.vec3.fromValues(0,1,0)))?l.vec3.cross(l.vec3.create(),h,l.vec3.fromValues(1,0,0)):l.vec3.cross(l.vec3.create(),h,l.vec3.fromValues(0,1,0));const f=l.vec3.cross(l.vec3.create(),h,d);if(l.vec3.normalize(h,h),l.vec3.normalize(d,d),l.vec3.normalize(f,f),u<=0){this._logger.warn("SDGTFLoader.loadCylinders: Cylinder radius is <= 0.");continue}const p=[],m=[],g=[],v=[],b=l.vec3.distance(s,c),_=b/2,y=0,A=2*Math.PI;let E=0;const w=[],S=1,T=50,x=l.vec3.create(),M=l.vec3.create();let R=0;const P=0;for(let e=0;e<=S;e++){const t=[],i=e/S,n=u;for(let e=0;e<=T;e++){const r=e/T,a=r*A+y,s=Math.sin(a),o=Math.cos(a);M[0]=n*s,M[1]=-i*b+_,M[2]=n*o,m.push(M[0],M[1],M[2]),l.vec3.normalize(x,l.vec3.fromValues(s,P,o)),g.push(x[0],x[1],x[2]),v.push(r,1-i),t.push(E++)}w.push(t)}for(let e=0;e<T;e++)for(let t=0;t<S;t++){const i=w[t][e],n=w[t+1][e],r=w[t+1][e+1],a=w[t][e+1];p.push(i,n,a),p.push(n,r,a),R+=6}const C={};C.POSITION=new o.AttributeData(new Float32Array(m),3,0,0,0,!1,m.length/3),C.NORMAL=new o.AttributeData(new Float32Array(g),3,0,0,0,!1,g.length/3),C.TEXCOORD_0=new o.AttributeData(new Float32Array(v),2,0,0,0,!1,v.length/2);const D=new o.GeometryData(new o.PrimitiveData(C,new o.AttributeData(this.convertToIndicesArray(p),1,0,0,0,!1,p.length)),o.PRIMITIVE_MODE.TRIANGLES);n.data.push(D),n.addTransformation({id:"cylinder_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),c)});const O=l.mat4.transpose(l.mat4.create(),l.mat4.fromValues(d[0],f[0],h[0],0,d[1],f[1],h[1],0,d[2],f[2],h[2],0,0,0,0,1));n.addTransformation({id:"cylinder_"+e+"_rotation",matrix:O}),n.addTransformation({id:"cylinder_"+e+"_rotation2",matrix:l.mat4.rotateX(l.mat4.create(),l.mat4.create(),.5*Math.PI)}),n.addTransformation({id:"cylinder_"+e+"_translation2",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),l.vec3.fromValues(0,0,.5*l.vec3.distance(s,c)))}),t.addChild(n)}return t}))}loadSpheres(){return n(this,void 0,void 0,(function*(){if(!this._content.spheres)throw new Error("Spheres not available.");const e=this._content.spheres,t=new r.TreeNode("spheres"),i=yield this.loadAccessor(e.attributes.SPHERES),n=i.array.length/i.itemSize;for(let e=0;e<n;e++){const n=new r.TreeNode("sphere_"+e),a=4*e,s=l.vec3.fromValues(i.array[a+0],i.array[a+1],i.array[a+2]),c=i.array[a+3];if(c<=0){this._logger.warn("SDGTFLoader.loadSpheres: Sphere radius is <= 0.");continue}const u=[],h=[],d=[],f=[],p=[],m=15,g=15,v=0,b=2*Math.PI,_=0,y=Math.PI,A=Math.min(_+y,Math.PI);let E=0;for(let e=0;e<=m;e++){const t=[],i=e/m;let n=0;0==e&&0==_?n=.5/g:e==m&&A==Math.PI&&(n=-.5/g);for(let e=0;e<=g;e++){const r=e/g,a=l.vec3.fromValues(-c*Math.cos(v+r*b)*Math.sin(_+i*y),c*Math.cos(_+i*y),c*Math.sin(v+r*b)*Math.sin(_+i*y));h.push(a[0],a[1],a[2]);const s=l.vec3.normalize(l.vec3.create(),a);d.push(s[0],s[1],s[2]),f.push(r+n,1-i),t.push(E++)}p.push(t)}for(let e=0;e<m;e++)for(let t=0;t<g;t++){const i=p[e][t+1],n=p[e][t],r=p[e+1][t],a=p[e+1][t+1];(0!==e||_>0)&&u.push(i,n,a),(e!==m-1||A<Math.PI)&&u.push(n,r,a)}const w={};w.POSITION=new o.AttributeData(new Float32Array(h),3,0,0,0,!1,h.length/3),w.NORMAL=new o.AttributeData(new Float32Array(d),3,0,0,0,!1,d.length/3),w.TEXCOORD_0=new o.AttributeData(new Float32Array(f),2,0,0,0,!1,f.length/2);const S=new o.GeometryData(new o.PrimitiveData(w,new o.AttributeData(this.convertToIndicesArray(u),1,0,0,0,!1,u.length)),o.PRIMITIVE_MODE.TRIANGLES);n.data.push(S),n.addTransformation({id:"sphere_"+e+"_translation",matrix:l.mat4.translate(l.mat4.create(),l.mat4.create(),s)}),t.addChild(n)}return t}))}loadPoint(e){return n(this,void 0,void 0,(function*(){if(!this._content.points[e])throw new Error("Point not available.");const t=this._content.points[e],i=new r.TreeNode(e),n={},a=yield this.loadAccessor(t.attributes.POINTS);n.POSITION=new o.AttributeData(a.array,3,a.itemBytes,a.byteOffset,a.elementBytes,a.normalized,a.count);const s=new o.GeometryData(new o.PrimitiveData(n,null),o.PRIMITIVE_MODE.POINTS);return i.data.push(s),i}))}loadPolyline(e){return n(this,void 0,void 0,(function*(){if(!this._content.polylines[e])throw new Error("Polyline not available.");const t=this._content.polylines[e],i=new r.TreeNode(e),n={},a=yield this.loadAccessor(t.attributes.VERTICES);n.POSITION=new o.AttributeData(a.array,3,a.itemBytes,a.byteOffset,a.elementBytes,a.normalized,a.count);const s=new o.GeometryData(new o.PrimitiveData(n,null),o.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(s),i}))}loadSurfacepatch(e){return n(this,void 0,void 0,(function*(){if(!this._content.surfacepatches[e])throw new Error("Surfacepatch not available.");const t=this._content.surfacepatches[e],i=new r.TreeNode(e),n=t.controlPointCountU,a=t.controlPointCountV,s=yield this.loadAccessor(t.attributes.CONTROLPOINTS),c=[];let u=0;for(let e=0;e<n;e++){let e=[];for(let t=0;t<a;t++)e.push(l.vec4.fromValues(s.array[3*u],s.array[3*u+1],s.array[3*u+2],1)),u++;c.push(e)}const h=yield this.loadAccessor(t.attributes.KNOTSU),d=[h.array[0]];for(let e=0;e<h.array.length;e++)d.push(h.array[e]);d.push(h.array[h.array.length-1]);const f=yield this.loadAccessor(t.attributes.KNOTSV),p=[f.array[0]];for(let e=0;e<f.array.length;e++)p.push(f.array[e]);p.push(f.array[f.array.length-1]);const m=t.degreeU,g=t.degreeV,v=(e,t,i)=>{const n=e.length-t-1;if(i>=e[n])return n-1;if(i<=e[t])return t;let r=t,a=n,s=Math.floor((r+a)/2);for(;i<e[s]||i>=e[s+1];)i<e[s]?a=s:r=s,s=Math.floor((r+a)/2);return s},b=(e,t,i,n)=>{const r=[],a=[],s=[];r[0]=1;for(let o=1;o<=t;++o){a[o]=n-e[i+1-o],s[o]=e[i+o]-n;let t=0;for(let e=0;e<o;++e){const i=s[e+1],n=a[o-e],l=r[e]/(i+n);r[e]=t+i*l,t=n*l}r[o]=t}return r},_=15,y=[],A=[];for(let e=0;e<=_;e++){const t=e/_;for(let e=0;e<=_;e++){const i=(E=e/_,w=t,((e,t)=>{const i=v(d,m,e),n=v(p,g,t),r=b(d,m,i,e),a=b(p,g,n,t),s=[];for(let e=0;e<=g;++e){s[e]=l.vec4.create();for(let t=0;t<=m;++t){const a=l.vec4.clone(c[i-m+t][n-g+e]),o=a[3];a[0]*=o,a[1]*=o,a[2]*=o,l.vec4.add(s[e],s[e],l.vec4.multiply(l.vec4.create(),a,l.vec4.fromValues(r[t],r[t],r[t],r[t])))}}const o=l.vec4.create();for(let e=0;e<=g;++e)l.vec4.add(o,o,l.vec4.multiply(l.vec4.create(),s[e],l.vec4.fromValues(a[e],a[e],a[e],a[e])));return l.vec4.divide(o,o,l.vec4.fromValues(o[3],o[3],o[3],o[3])),l.vec3.fromValues(o[0],o[1],o[2])})(d[0]+E*(d[d.length-1]-d[0]),p[0]+w*(p[p.length-1]-p[0])));A.push(i[0],i[1],i[2])}}var E,w;for(let e=0;e<_;e++)for(let t=0;t<_;t++){const i=16*e+t,n=16*e+t+1,r=16*(e+1)+t,a=16*(e+1)+t+1;y.push(r,n,i),y.push(n,r,a)}const S={};S.POSITION=new o.AttributeData(new Float32Array(A),3,0,0,0,!1,A.length/3),S.NORMAL=new o.AttributeData(new Float32Array([0,0,0,0,0,0,0,0,0,0]),3,0,0,0,!1,A.length/3);const T=new o.GeometryData(new o.PrimitiveData(S,new o.AttributeData(this.convertToIndicesArray(y),1,0,0,0,!1,y.length)),o.PRIMITIVE_MODE.TRIANGLES);return i.data.push(T),i}))}loadScene(){return n(this,void 0,void 0,(function*(){const e=new r.TreeNode("sdgtf_content");if(this._content.arcs&&e.addChild(yield this.loadArcs()),this._content.beziercurves)for(let t in this._content.beziercurves)e.addChild(yield this.loadBeziercurve(t));if(this._content.circles&&e.addChild(yield this.loadCircles()),this._content.cylinders&&e.addChild(yield this.loadCylinders()),this._content.points)for(let t in this._content.points)e.addChild(yield this.loadPoint(t));if(this._content.polylines)for(let t in this._content.polylines)e.addChild(yield this.loadPolyline(t));if(this._content.spheres&&e.addChild(yield this.loadSpheres()),this._content.surfacepatches)for(let t in this._content.surfacepatches)e.addChild(yield this.loadSurfacepatch(t));return e}))}}},2549:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=t.GLTF_EXTENSIONS=void 0;const r=i(3858),a=i(8877),s=i(887),o=i(7038),l=i(1990),c=i(3490),u=i(8103),h=i(9056),d=i(9649),f=i(5458),p=i(3883),m=i(206);var g;!function(e){e.KHR_BINARY_GLTF="KHR_binary_glTF",e.KHR_DRACO_MESH_COMPRESSION="KHR_draco_mesh_compression",e.KHR_LIGHTS_PUNCTUAL="KHR_lights_punctual",e.KHR_MATERIALS_CLEARCOAT="KHR_materials_clearcoat",e.KHR_MATERIALS_IOR="KHR_materials_ior",e.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",e.KHR_MATERIALS_SHEEN="KHR_materials_sheen",e.KHR_MATERIALS_SPECULAR="KHR_materials_specular",e.KHR_MATERIALS_TRANSMISSION="KHR_materials_transmission",e.KHR_MATERIALS_UNLIT="KHR_materials_unlit",e.KHR_MATERIALS_VARIANTS="KHR_materials_variants",e.KHR_MATERIALS_VOLUME="KHR_materials_volume",e.KHR_MESH_QUANTIZATION="KHR_mesh_quantization",e.KHR_TEXTURE_TRANSFORM="KHR_texture_transform",e.SHAPEDIVER_MATERIALS_PRESET="SHAPEDIVER_materials_preset"}(g=t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={}));const v=i(688);t.GLTFLoader=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._eventEngine=a.EventEngine.instance,this._globalTransformation=s.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._httpClient=a.HttpClient.instance,this._logger=a.Logger.instance,this._performanceEvaluator=a.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._uuidGenerator=a.UuidGenerator.instance,this._eventId="",this._nodes={},this._numberOfConvertedNodes=0,this._numberOfNodes=0,this._progressTimer=0}load(e,t,i,r,l){var c,b;return n(this,void 0,void 0,(function*(){this._eventId=l||this._uuidGenerator.create();const n={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 2.0 loading."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_START,n),this._numberOfConvertedNodes=0,this._numberOfNodes=e.nodes?e.nodes.length:0,this._progressTimer=performance.now(),this._baseUri=r,t&&i&&(this._body=t.slice(this.BINARY_EXTENSION_HEADER_LENGTH+i.contentLength+8,i.length)),this._content=e,this.validateVersionAndExtensions();const _=yield new v;this._bufferLoader=new u.BufferLoader(this._content,this._body,this._baseUri),yield this._bufferLoader.load(),this._bufferViewLoader=new h.BufferViewLoader(this._content,this._bufferLoader),this._bufferViewLoader.load(),this._accessorLoader=new d.AccessorLoader(this._content,this._bufferViewLoader),this._accessorLoader.load(),this._textureLoader=new f.TextureLoader(this._content,this._bufferViewLoader,this._baseUri),yield this._textureLoader.load(),this._materialLoader=new p.MaterialLoader(this._content,this._textureLoader),yield this._materialLoader.load(),this._geometryLoader=new m.GeometryLoader(this._content,this._accessorLoader,this._bufferViewLoader,this._materialLoader,_);const y={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.1,status:"Initial logic of glTF loading."};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,y);const A=yield this.loadScene();if(this._content.extensions&&this._content.extensions[g.KHR_MATERIALS_VARIANTS]){const e=this._content.extensions[g.KHR_MATERIALS_VARIANTS].variants;for(let t=0;t<e.length;t++)this._geometryLoader.materialVariantsData.variants.push(e[t].name);this._geometryLoader.materialVariantsData.variantIndex=0,A.data.push(this._geometryLoader.materialVariantsData)}if(void 0!==this._content.skins&&void 0!==this._content.nodes)for(let e=0;e<(null===(c=this._content.nodes)||void 0===c?void 0:c.length);e++)if(void 0!==this._content.nodes[e].skin){const t=this.loadSkin(this._content.nodes[e].skin),i=this._nodes[e],n=[],r=[];for(let e=0;e<t.joints.length;e++){this._nodes[t.joints[e]].data.push(new o.BoneData),n.push(this._nodes[t.joints[e]]);let i=s.mat4.create();if(void 0!==t.inverseBindMatrices){const n=t.inverseBindMatrices.array;i=s.mat4.fromValues(n[16*e+0],n[16*e+1],n[16*e+2],n[16*e+3],n[16*e+4],n[16*e+5],n[16*e+6],n[16*e+7],n[16*e+8],n[16*e+9],n[16*e+10],n[16*e+11],n[16*e+12],n[16*e+13],n[16*e+14],n[16*e+15])}r.push(i)}i.skinNode=!0,i.bones=n,i.boneInverses=r}if(this._content.animations)for(let e=0;e<(null===(b=this._content.animations)||void 0===b?void 0:b.length);e++)A.data.push(this.loadAnimation(e));const E={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_END,E),A}))}loadWithUrl(e){return n(this,void 0,void 0,(function*(){this._performanceEvaluator.startSection("gltfProcessing."+e),this._performanceEvaluator.startSection("loadGltf."+e);const t=yield this._httpClient.get(e,{responseType:"arraybuffer"});let i,n,r,s;this._performanceEvaluator.endSection("loadGltf."+e);const o=(new TextDecoder).decode(new Uint8Array(t.data,0,4));if("glTF"===o||t.headers["content-type"]&&("model/gltf-binary"===t.headers["content-type"]||"application/octet-stream"===t.headers["content-type"]||"model/gltf.binary"===t.headers["content-type"])){n=t.data;const e=new DataView(n,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(s={magic:o,version:e.getUint32(4,!0),length:e.getUint32(8,!0),contentLength:e.getUint32(12,!0),contentFormat:e.getUint32(16,!0)},"glTF"!=s.magic)throw new a.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: sdgTF magic wrong.");const r=new DataView(n,this.BINARY_EXTENSION_HEADER_LENGTH,s.contentLength),l=(new TextDecoder).decode(r);i=JSON.parse(l),this._body=n.slice(this.BINARY_EXTENSION_HEADER_LENGTH+s.contentLength+8,s.length)}else{i=JSON.parse((new TextDecoder).decode(t.data));const n=e=>{const t=e.includes("/")?"/":"\\",i=e.split(t);return i.pop(),i.join(t)};r=n(e),!r&&window&&window.location&&window.location.href&&(r=n(window.location.href))}return yield this.load(i,n,s,r)}))}loadAnimation(e){if(!this._content.animations)throw new Error("Animations not available.");if(!this._content.animations[e])throw new Error("Animations not available.");const t=this._content.animations[e],i=[];let n=1/0,r=-1/0;for(let e=0;e<t.channels.length;e++){const a=t.channels[e],s=t.samplers[a.sampler],o=a.target,l=o.path,c=this._nodes[o.node];if(void 0===c)throw new Error("Animation node not available.");const u=this._accessorLoader.getAccessor(s.input);n=Math.min(n,u.min[0]),r=Math.max(r,u.max[0]);const h=this._accessorLoader.getAccessor(s.output);let d=s.interpolation;"CUBICSPLINE"===d&&(this._logger.warn("Animation with CUBICSPLINE interpolation is currently not supported. Assigning linear interpolation instead."),d="linear"),i.push({node:c,times:u.array,values:h.array,path:l,interpolation:null==d?void 0:d.toLowerCase()})}return new o.AnimationData(t.name||"gltf_animation_"+e,i,n,r-n)}loadCamera(e){if(!this._content.cameras)throw new Error("Cameras not available.");if(!this._content.cameras[e])throw new Error("Cameras not available.");const t=this._content.cameras[e],i=new r.TreeNode(t.name||"camera_"+e);let n;if("perspective"===t.type){const e=t.perspective;n=new l.PerspectiveCamera(i.id),i.data.push(n),n.fov=e.yfov*(180/Math.PI),n.aspect=e.aspectRatio||1,n.near=e.znear||1,n.far=e.zfar||2e6}else{const e=t.orthographic;n=new l.OrthographicCamera(i.id),i.data.push(n),n.left=-e.xmag,n.right=e.xmag,n.top=-e.ymag,n.bottom=e.ymag,n.near=e.znear||1,n.far=e.zfar||2e6}return n.useNodeData=!0,n.node=i,i}loadLights(e){if(!this._content.extensions||!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL]||!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights)throw new Error(`Extension ${g.KHR_LIGHTS_PUNCTUAL} not available.`);if(!this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights[e])throw new Error("Light not available.");const t=this._content.extensions[g.KHR_LIGHTS_PUNCTUAL].lights[e],i=new r.TreeNode(t.name||"light_"+e);let n="#ffffffff";void 0!==t.color&&(n=[255*t.color[0],255*t.color[1],255*t.color[2]]);const a=void 0!==t.range?t.range:0;let s;if("directional"===t.type){s=new c.DirectionalLight({color:n}),i.data.push(s);const e=s;void 0!==t.intensity&&(e.intensity=t.intensity)}else if("point"===t.type){s=new c.PointLight({color:n}),i.data.push(s);const e=s;e.distance=a,e.decay=2,void 0!==t.intensity&&(s.intensity=t.intensity),e.position=[0,0,0]}else{if("spot"!==t.type)throw new Error("Unexpected light type: "+t.type);{s=new c.SpotLight({color:n}),i.data.push(s),t.spot=t.spot||{},t.spot.innerConeAngle=void 0!==t.spot.innerConeAngle?t.spot.innerConeAngle:0,t.spot.outerConeAngle=void 0!==t.spot.outerConeAngle?t.spot.outerConeAngle:Math.PI/4;const e=s;e.distance=a,e.angle=t.spot.outerConeAngle,e.penumbra=1-t.spot.innerConeAngle/t.spot.outerConeAngle,e.decay=2,void 0!==t.intensity&&(s.intensity=t.intensity),e.position=[0,0,0],e.target=[0,0,-1]}}return s.useNodeData=!0,i}loadNode(e){return n(this,void 0,void 0,(function*(){if(!this._content.nodes)throw new Error("Nodes not available.");if(!this._content.nodes[e])throw new Error("Node not available.");const t=this._content.nodes[e],i=new r.TreeNode(t.name||"node_"+e);if(this._nodes[e]=i,t.matrix)i.addTransformation({id:"gltf_matrix",matrix:s.mat4.fromValues(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5],t.matrix[6],t.matrix[7],t.matrix[8],t.matrix[9],t.matrix[10],t.matrix[11],t.matrix[12],t.matrix[13],t.matrix[14],t.matrix[15])}),i.addTransformation({id:"gltf_matrix_translation",matrix:s.mat4.create()}),i.addTransformation({id:"gltf_matrix_rotation",matrix:s.mat4.create()}),i.addTransformation({id:"gltf_matrix_scale",matrix:s.mat4.create()});else if(t.translation||t.scale||t.rotation){const e=t.translation?s.mat4.fromTranslation(s.mat4.create(),s.vec3.fromValues(t.translation[0],t.translation[1],t.translation[2])):s.mat4.create(),n=t.scale?s.mat4.fromScaling(s.mat4.create(),s.vec3.fromValues(t.scale[0],t.scale[1],t.scale[2])):s.mat4.create(),r=t.rotation?s.mat4.fromQuat(s.mat4.create(),s.vec4.fromValues(t.rotation[0],t.rotation[1],t.rotation[2],t.rotation[3])):s.mat4.create();i.addTransformation({id:"gltf_matrix_translation",matrix:e}),i.addTransformation({id:"gltf_matrix_rotation",matrix:r}),i.addTransformation({id:"gltf_matrix_scale",matrix:n})}if(void 0!==t.mesh&&i.addChild(this._geometryLoader.loadMesh(t.mesh,t.weights)),void 0!==t.camera&&i.addChild(this.loadCamera(t.camera)),t.extensions&&t.extensions[g.KHR_LIGHTS_PUNCTUAL]&&i.addChild(this.loadLights(t.extensions[g.KHR_LIGHTS_PUNCTUAL].light)),t.children)for(let e=0,n=t.children.length;e<n;e++)i.addChild(yield this.loadNode(t.children[e]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:o.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.1,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(a.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return i}))}loadScene(){return n(this,void 0,void 0,(function*(){if(!this._content.scenes)throw new Error("Scenes not available.");const e=this._content.scene||0;if(!this._content.scenes[e])throw new Error("Scene not available.");const t=this._content.scenes[e],i=new r.TreeNode(t.name||"scene_"+e);if(i.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),t.nodes)for(let e=0,n=t.nodes.length;e<n;e++)i.addChild(yield this.loadNode(t.nodes[e]));return i}))}loadSkin(e){if(!this._content.skins)throw new Error("Skins not available.");if(!this._content.skins[e])throw new Error("Skin not available.");const t=this._content.skins[e],i={joints:t.joints,inverseBindMatrices:null};return void 0===t.inverseBindMatrices||(i.inverseBindMatrices=this._accessorLoader.getAccessor(t.inverseBindMatrices)),i}validateVersionAndExtensions(){if(!this._content.asset)throw new Error("Asset not available.");const e=this._content.asset;if(!e.version)throw new Error("Asset does not have a version.");if(!(e.minVersion?e.minVersion:e.version).startsWith("2"))throw new Error("Version of the glTF not supported.");if(this._content.extensionsUsed){const e=[];for(let t=0;t<this._content.extensionsUsed.length;t++)Object.values(g).includes(this._content.extensionsUsed[t])||e.push(this._content.extensionsUsed[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");e.forEach(((i,n)=>{t+='"'+i+'"'+(n===e.length-1?"":n===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+t)}}if(this._content.extensionsRequired){const e=[];for(let t=0;t<this._content.extensionsRequired.length;t++)Object.values(g).includes(this._content.extensionsRequired[t])||e.push(this._content.extensionsRequired[t]);if(e.length>0){let t="Extension"+(1===e.length?" ":"s ");throw e.forEach(((i,n)=>{t+='"'+i+'"'+(n===e.length-1?"":n===e.length-2?" and ":", ")})),t+=(1===e.length?" is":" are")+" not supported, but required. Aborting glTF loading.",new Error(t)}}}}},688:(e,t,i)=>{"use strict";var n,r=(n=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){var t,r,a=void 0!==(e=e||{})?e:{},s=Object.assign;a.ready=new Promise((function(e,i){t=e,r=i}));var o=!1,l=!1;a.onRuntimeInitialized=function(){o=!0,l&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.onModuleParsed=function(){l=!0,o&&"function"==typeof a.onModuleLoaded&&a.onModuleLoaded(a)},a.isVersionSupported=function(e){if("string"!=typeof e)return!1;const t=e.split(".");return!(t.length<2||t.length>3)&&(1==t[0]&&t[1]>=0&&t[1]<=5||!(0!=t[0]||t[1]>10))};var c,u,h,d,f,p,m=s({},a),g=[],v="object"==typeof window,b="function"==typeof importScripts,_="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,y="";_?(y=b?i(7356).dirname(y)+"/":"//",p=()=>{f||(d=i(6125),f=i(7356))},c=function(e,t){var i=oe(e);return i?t?i:i.toString():(p(),e=f.normalize(e),d.readFileSync(e,t?null:"utf8"))},h=e=>{var t=c(e,!0);return t.buffer||(t=new Uint8Array(t)),t},u=(e,t,i)=>{var n=oe(e);n&&t(n),p(),e=f.normalize(e),d.readFile(e,(function(e,n){e?i(e):t(n.buffer)}))},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),g=process.argv.slice(2),a.inspect=function(){return"[Emscripten Module object]"}):(v||b)&&(b?y=self.location.href:"undefined"!=typeof document&&document.currentScript&&(y=document.currentScript.src),n&&(y=n),y=0!==y.indexOf("blob:")?y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):"",c=e=>{try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText}catch(t){var i=oe(e);if(i)return function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];n>255&&(ae&&M(!1,"Character code "+n+" ("+String.fromCharCode(n)+")  at offset "+i+" not in 0x00-0xFF."),n&=255),t.push(String.fromCharCode(n))}return t.join("")}(i);throw t}},b&&(h=e=>{try{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}catch(t){var i=oe(e);if(i)return i;throw t}}),u=(e,t,i)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(200==n.status||0==n.status&&n.response)t(n.response);else{var r=oe(e);r?t(r.buffer):i()}},n.onerror=i,n.send(null)});var A,E=a.print||console.log.bind(console),w=a.printErr||console.warn.bind(console);s(a,m),m=null,a.arguments&&(g=a.arguments),a.thisProgram&&a.thisProgram,a.quit&&a.quit,a.wasmBinary&&(A=a.wasmBinary),a.noExitRuntime;var S,T={Memory:function(e){this.buffer=new ArrayBuffer(65536*e.initial)},Module:function(e){},Instance:function(e,t){this.exports=function(e){for(var t,i=new Uint8Array(123),n=25;n>=0;--n)i[48+n]=52+n,i[65+n]=n,i[97+n]=26+n;function r(e,t,n){for(var r,a,s=0,o=t,l=n.length,c=t+(3*l>>2)-("="==n[l-2])-("="==n[l-1]);s<l;s+=4)r=i[n.charCodeAt(s+1)],a=i[n.charCodeAt(s+2)],e[o++]=i[n.charCodeAt(s)]<<2|r>>4,o<c&&(e[o++]=r<<4|a>>2),o<c&&(e[o++]=a<<6|i[n.charCodeAt(s+3)])}i[43]=62,i[47]=63;var a=new ArrayBuffer(16),s=new Int32Array(a),o=new Float32Array(a);function l(e){o[2]=e}function c(e){return s[e]}return new Float64Array(a),function(e){var i=e.a,n=i.buffer;i.grow=function(e){e|=0;var r=0|Pr(),s=r+e|0;if(r<s&&s<65536){var o=new ArrayBuffer(v(s,65536));new Int8Array(o).set(a),a=new Int8Array(o),u=new Int16Array(o),h=new Int32Array(o),d=new Uint8Array(o),f=new Uint16Array(o),p=new Uint32Array(o),m=new Float32Array(o),g=new Float64Array(o),n=o,i.buffer=n,t=d}return r};var a=new Int8Array(n),u=new Int16Array(n),h=new Int32Array(n),d=new Uint8Array(n),f=new Uint16Array(n),p=new Uint32Array(n),m=new Float32Array(n),g=new Float64Array(n),v=Math.imul,b=Math.fround,_=Math.abs,y=Math.clz32,A=Math.min,E=Math.max,w=Math.floor,S=Math.ceil,T=(Math.trunc,Math.sqrt),x=e.abort,M=e.b,R=e.c,P=e.d,C=e.e,D=e.f,O=e.g,k=e.h,I=e.i,N=5260320,L=0;function U(e,t,i){var n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0;N=n=N-672|0,s=h[t+12>>2],r=h[t+20>>2],r=(E=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r;e:{t:{i:if(!(E>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s)||(r=a+h[t>>2]|0,h[e>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(E=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,T=a,h[t+16>>2]=a,h[t+20>>2]=r,p[e>>2]>31||(a=h[t+12>>2],r=s,r=(s=E+8|0)>>>0<8?r+1|0:r,s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=T+h[t>>2]|0,h[e+4>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(E=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,T=a,h[t+16>>2]=a,h[t+20>>2]=r,a=h[t+12>>2],r=s,r=(s=E+8|0)>>>0<8?r+1|0:r,s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=T+h[t>>2]|0,h[e+12>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(E=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,A=a,h[t+16>>2]=a,h[t+20>>2]=r,r=h[e+20>>2],(0|(T=h[e+12>>2]))!=(0|r)&&r||(a=h[t+12>>2],r=s,r=(s=E+8|0)>>>0<8?r+1|0:r,s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))))))))if(r=A+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+16>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,s>>>0>=7)h[n>>2]=s,Gt(1857,n);else{h[n+664>>2]=i;n:if(T){r:if(E=h[i>>2],!(T>>>0<=(h[i+8>>2]-E|0)/12>>>0)){if(!(T>>>0<357913942))break t;if(a=h[i+4>>2],T=(r=gn(s=v(T,12)))+s|0,r=s=r+v((a-E|0)/12|0,12)|0,(0|a)!=(0|E))for(r=s;a=a-12|0,h[(r=r-12|0)>>2]=h[a>>2],h[r+4>>2]=h[a+4>>2],h[r+8>>2]=h[a+8>>2],(0|a)!=(0|E););if(h[i+8>>2]=T,h[i+4>>2]=s,h[i>>2]=r,!E)break r;ve(E)}r:switch(h[e+16>>2]){case 0:if(l=Qe(n+8|0,3),E=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(a=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(a>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=o+h[t>>2]|0,h[l>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(o=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,u=o,h[t+16>>2]=o,h[t+20>>2]=r,!(p[l>>2]>32)&&(o=h[t+12>>2],r=s,r=(s=a+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|o)|(0|r)>(0|o))&&(r=u+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[l+4>>2]=s,r=h[t+20>>2],r=(o=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,s&&(h[l+8>>2]=0,Tt(l+16|0,t)&&Tt(l+36|0,t)&&Tt(l+56|0,t)&&Tt(l+76|0,t)))))){if(T=h[l+4>>2],s=0,t=0,N=a=N-48|0,o=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;s=gn(r=o<<2),h[a+8>>2]=s,t=r+s|0,h[a+16>>2]=t,xt(s,0,r),h[a+12>>2]=t}if(r=h[l+120>>2],(u=h[r>>2])&&(h[r+4>>2]=u,ve(u),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,o=h[l+12>>2],s=h[a+8>>2],t=h[a+12>>2]),h[r+4>>2]=t,h[r>>2]=s,h[r+8>>2]=h[a+16>>2],s=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;c=gn(t=o<<2),h[a+8>>2]=c,s=t+c|0,h[a+16>>2]=s,xt(c,0,t),h[a+12>>2]=s}t=h[l+132>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[a+8>>2],s=h[a+12>>2]),h[t+4>>2]=s,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,$e(a+8|0),r=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,o=(t=h[a+28>>2])+1|0,h[a+28>>2]=o;a:if(!(t>>>0>o>>>0))for(;;){if(A=h[a+12>>2],s=h[a+24>>2],t=h[A+((r=((t=s+(u=o-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,f=h[t+8>>2],c=h[t+4>>2],r=h[t>>2],h[a+28>>2]=u,1+(((u=(t=h[a+16>>2])-A|0)?v(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[a+16>>2]=h[a+16>>2]-4),s=0,r>>>0>T>>>0)break a;if((c=(0|c)==((t=h[l+12>>2])-1|0)?0:c+1|0)>>>0>=t>>>0)break a;A=(o=v(f,12))+h[l+132>>2]|0,u=o+h[l+120>>2]|0;s:{o:if(g=c<<2,_=h[l>>2]-h[g+h[A>>2]>>2]|0){l:{c:{u:{h:{if(r>>>0<=2){if(t=h[l+108>>2],h[t>>2]=c,s=1,(o=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;(0|(s=(t=h[l+120>>2])+(A=v(m=f+1|0,12))|0))!=(0|u)&&(Vt(s,h[u>>2],h[u+4>>2]),t=h[l+120>>2]),t=g+h[t+A>>2]|0,h[t>>2]=h[t>>2]+(1<<_-1);d:if((0|(t=31^y(r)))<=(0|(_=32-(s=h[l+32>>2])|0))){if((0|(u=h[l+28>>2]))==h[l+20>>2]){s=0;break d}if(_=h[u>>2],b=t+s|0,h[l+32>>2]=b,s=_<<s>>>32-t|0,32!=(0|b))break d;h[l+32>>2]=0,h[l+28>>2]=u+4}else(0|(b=(u=h[l+28>>2])+4|0))!=h[l+20>>2]?(w=h[u>>2],h[l+28>>2]=b,_=t-_|0,h[l+32>>2]=_,s=h[u+4>>2]>>>32-_|w<<s>>>32-t):s=0;if((0|(s=r-(t=(r>>>1|0)-s|0)|0))!=(0|t)){if((0|(r=h[l+88>>2]))==h[l+80>>2])break u;u=h[r>>2],b=(_=h[l+92>>2])+1|0,h[l+92>>2]=b,u&=-2147483648>>>_;d:{if(32==(0|b)){if(h[l+92>>2]=0,h[l+88>>2]=r+4,u)break d;break u}if(!u)break u}r=s}else r=t;s=t;break c}for(;c=(o-1|0)==(0|c)?0:c+1|0,h[t+(s<<2)>>2]=c,(s=s+1|0)>>>0<(o=h[l+12>>2])>>>0;);break l}r=t}if(t=h[l+132>>2],u=h[(o=t+o|0)>>2],h[(g=u+g|0)>>2]=h[g>>2]+1,Vt(t+A|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?v(u>>2,341)-1|0:0))?($e(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!r)break o;o=h[a+28>>2]+h[a+24>>2]|0,s=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-s|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,s=h[a+12>>2]),t=h[s+((t=(o>>>0)/341|0)<<2)>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=c,h[t>>2]=r,o=h[a+28>>2]+1|0,h[a+28>>2]=o;break s}if(c=0,r)for(;;){if(s=h[l+96>>2],o){for(g=h[l+40>>2],w=h[l+108>>2],P=h[u>>2],D=h[A>>2],o=0;;){h[(h[(_=w+(o<<2)|0)>>2]<<2)+s>>2]=0,f=h[_>>2]<<2;l:if(t=h[l>>2]-h[f+D>>2]|0)if(f=s+f|0,(0|(S=32-(m=h[l+52>>2])|0))>=(0|t)){if((0|(b=h[l+48>>2]))==(0|g)){h[f>>2]=0;break l}if(h[f>>2]=h[b>>2]<<m>>>32-t,t=t+h[l+52>>2]|0,h[l+52>>2]=t,32!=(0|t))break l;h[l+52>>2]=0,h[l+48>>2]=b+4}else(0|(M=(b=h[l+48>>2])+4|0))!=(0|g)?(C=h[b>>2],h[l+48>>2]=M,S=t-S|0,h[l+52>>2]=S,h[f>>2]=h[b+4>>2]>>>32-S|C<<m>>>32-t):h[f>>2]=0;if(t=h[_>>2]<<2,h[(f=t+s|0)>>2]=h[f>>2]|h[t+P>>2],!((o=o+1|0)>>>0<p[l+12>>2]))break}s=h[l+96>>2]}if(h[a+32>>2]=h[s>>2],h[a+36>>2]=h[s+4>>2],h[a+40>>2]=h[s+8>>2],Ct(h[E>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|r)==(0|(c=c+1|0)))break o;o=h[l+12>>2]}}else{if(!r)break o;for(;;){if(t=h[u>>2],A=h[t+8>>2],g=h[t+4>>2],_=h[t>>2],t=h[E>>2],(o=h[t+4>>2])>>>0<(m=h[t+8>>2])>>>0)h[o+8>>2]=A,h[o+4>>2]=g,h[o>>2]=_,h[t+4>>2]=o+12;else{if((c=1+(b=(o-(f=h[t>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(c,12)),h[8+(c=R+b|0)>>2]=A,h[c+4>>2]=g,h[c>>2]=_,A=c+12|0,(0|o)!=(0|f))for(;o=o-12|0,h[(c=c-12|0)>>2]=h[o>>2],h[c+4>>2]=h[o+4>>2],h[c+8>>2]=h[o+8>>2],(0|o)!=(0|f););h[t+8>>2]=m+b,h[t+4>>2]=A,h[t>>2]=c,f&&ve(f)}if(h[l+8>>2]=h[l+8>>2]+1,(0|r)==(0|(s=s+1|0)))break}}o=h[a+28>>2]}if(!o)break}if(h[a+28>>2]=0,(c=(o=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(o=h[a+16>>2])-t|0)>>>0>8;);switch(s=170,(c>>>2|0)-1|0){case 1:s=341;case 0:h[a+24>>2]=s}if((0|t)!=(0|o)){for(;ve(h[t>>2]),(0|o)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(r=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&ve(t),N=a+48|0}Xt(l);break n;case 1:if(l=Qe(n+8|0,3),T=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(a=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(a>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=o+h[t>>2]|0,h[l>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(o=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,f=o,h[t+16>>2]=o,h[t+20>>2]=r,!(p[l>>2]>32)&&(o=h[t+12>>2],r=s,r=(s=a+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|o)|(0|r)>(0|o))&&(r=f+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[l+4>>2]=s,r=h[t+20>>2],r=(o=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,s&&(h[l+8>>2]=0,Tt(l+16|0,t)&&Tt(l+36|0,t)&&Tt(l+56|0,t)&&Tt(l+76|0,t)))))){if(A=h[l+4>>2],s=0,N=a=N-48|0,o=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;u=gn(t=o<<2),h[a+8>>2]=u,s=t+u|0,h[a+16>>2]=s,xt(u,0,t),h[a+12>>2]=s}if(t=h[l+120>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,u=h[a+8>>2],o=h[l+12>>2],s=h[a+12>>2]),h[t+4>>2]=s,h[t>>2]=u,h[t+8>>2]=h[a+16>>2],u=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,o){if(o>>>0>=1073741824)break e;c=gn(t=o<<2),h[a+8>>2]=c,u=t+c|0,h[a+16>>2]=u,xt(c,0,t),h[a+12>>2]=u}t=h[l+132>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,u=h[a+12>>2],c=h[a+8>>2]),h[t+4>>2]=u,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,$e(a+8|0),r=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,o=(t=h[a+28>>2])+1|0,h[a+28>>2]=o;a:if(!(t>>>0>o>>>0))for(;;){if(u=h[a+12>>2],s=h[a+24>>2],t=h[u+((r=((t=s+(c=o-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,E=h[t+8>>2],r=h[t+4>>2],t=h[t>>2],h[a+28>>2]=c,1+(((u=(c=h[a+16>>2])-u|0)?v(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(ve(h[c-4>>2]),h[a+16>>2]=h[a+16>>2]-4),t>>>0>A>>>0)break a;if(s=0,(c=(0|r)==((o=h[l+12>>2])-1|0)?0:r+1|0)>>>0>=o>>>0)break a;f=(r=h[l+120>>2])+(o=v(E,12))|0;s:{o:if(u=c<<2,b=o+h[l+132>>2]|0,g=h[l>>2]-h[u+h[b>>2]>>2]|0){l:{c:{u:{h:{if(t>>>0<=2){if(r=h[l+108>>2],h[r>>2]=c,u=1,(o=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;Vt((s=r)+(r=o+12|0)|0,h[f>>2],h[f+4>>2]),r=u+h[r+h[l+120>>2]>>2]|0,h[r>>2]=h[r>>2]+(1<<g-1);d:if((0|(r=31^y(t)))<=(0|(g=32-(s=h[l+32>>2])|0))){if((0|(f=h[l+28>>2]))==h[l+20>>2]){s=0;break d}if(g=h[f>>2],_=r+s|0,h[l+32>>2]=_,s=g<<s>>>32-r|0,32!=(0|_))break d;h[l+32>>2]=0,h[l+28>>2]=f+4}else(0|(_=(f=h[l+28>>2])+4|0))!=h[l+20>>2]?(m=h[f>>2],h[l+28>>2]=_,g=r-g|0,h[l+32>>2]=g,s=h[f+4>>2]>>>32-g|m<<s>>>32-r):s=0;if(f=E+1|0,(0|(s=(r=t)-(t=(t>>>1|0)-s|0)|0))!=(0|t)){if((0|(r=h[l+88>>2]))==h[l+80>>2])break u;g=h[r>>2],m=(_=h[l+92>>2])+1|0,h[l+92>>2]=m,g&=-2147483648>>>_;d:{if(32==(0|m)){if(h[l+92>>2]=0,h[l+88>>2]=r+4,g)break d;break u}if(!g)break u}r=s}else r=t;s=t;break c}for(;c=(o-1|0)==(0|c)?0:c+1|0,h[r+(u<<2)>>2]=c,(o=h[l+12>>2])>>>0>(u=u+1|0)>>>0;);break l}r=t}if(R=u,t=h[l+132>>2],u=h[(o=t+o|0)>>2],h[(g=R+u|0)>>2]=h[g>>2]+1,Vt(t+v(f,12)|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!r)break o;o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=r,o=h[a+28>>2]+1|0,h[a+28>>2]=o;break s}if(c=0,t)for(;;){if(u=h[l+96>>2],o){for(E=h[l+40>>2],w=h[l+108>>2],P=h[f>>2],D=h[b>>2],o=0;;){h[(h[(g=w+(o<<2)|0)>>2]<<2)+u>>2]=0,s=h[g>>2]<<2;l:if(r=h[l>>2]-h[s+D>>2]|0)if(s=s+u|0,(0|(S=32-(_=h[l+52>>2])|0))>=(0|r)){if((0|(m=h[l+48>>2]))==(0|E)){h[s>>2]=0;break l}if(h[s>>2]=h[m>>2]<<_>>>32-r,r=r+h[l+52>>2]|0,h[l+52>>2]=r,32!=(0|r))break l;h[l+52>>2]=0,h[l+48>>2]=m+4}else(0|(M=(m=h[l+48>>2])+4|0))!=(0|E)?(C=h[m>>2],h[l+48>>2]=M,S=r-S|0,h[l+52>>2]=S,h[s>>2]=h[m+4>>2]>>>32-S|C<<_>>>32-r):h[s>>2]=0;if(r=h[g>>2]<<2,h[(s=r+u|0)>>2]=h[s>>2]|h[r+P>>2],!((o=o+1|0)>>>0<p[l+12>>2]))break}u=h[l+96>>2]}if(h[a+32>>2]=h[u>>2],h[a+36>>2]=h[u+4>>2],h[a+40>>2]=h[u+8>>2],Ct(h[T>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(c=c+1|0)))break o;o=h[l+12>>2]}}else{if(!t)break o;for(;;){if(r=h[f>>2],E=h[r+8>>2],g=h[r+4>>2],_=h[r>>2],r=h[T>>2],(o=h[r+4>>2])>>>0<(m=h[r+8>>2])>>>0)h[o+8>>2]=E,h[o+4>>2]=g,h[o>>2]=_,h[r+4>>2]=o+12;else{if((c=1+(b=(o-(u=h[r>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-u|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(c,12)),h[8+(c=R+b|0)>>2]=E,h[c+4>>2]=g,h[c>>2]=_,E=c+12|0,(0|o)!=(0|u))for(;o=o-12|0,h[(c=c-12|0)>>2]=h[o>>2],h[c+4>>2]=h[o+4>>2],h[c+8>>2]=h[o+8>>2],(0|o)!=(0|u););h[r+8>>2]=m+b,h[r+4>>2]=E,h[r>>2]=c,u&&ve(u)}if(h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(s=s+1|0)))break}}o=h[a+28>>2]}if(!o)break}if(h[a+28>>2]=0,(c=(o=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(o=h[a+16>>2])-t|0)>>>0>8;);switch(u=170,(c>>>2|0)-1|0){case 1:u=341;case 0:h[a+24>>2]=u}if((0|t)!=(0|o)){for(;ve(h[t>>2]),(0|o)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(r=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&ve(t),N=a+48|0}Xt(l);break n;case 2:if(c=Ze(n+8|0,3),E=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(a=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(a>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=o+h[t>>2]|0,h[c>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(o=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,l=o,h[t+16>>2]=l,h[t+20>>2]=r,!(p[c>>2]>32)&&(o=h[t+12>>2],r=s,r=(s=a+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|o)|(0|r)>(0|o))&&(r=l+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[c+4>>2]=s,r=h[t+20>>2],r=(o=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,s&&(h[c+8>>2]=0,He(c+16|0,t)&&Tt(c+32|0,t)&&Tt(c+52|0,t)&&Tt(c+72|0,t)))))){if(T=h[c+4>>2],s=0,t=0,N=o=N-48|0,a=h[c+12>>2],h[o+16>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,a){if(a>>>0>=1073741824)break e;s=gn(r=a<<2),h[o+8>>2]=s,t=r+s|0,h[o+16>>2]=t,xt(s,0,r),h[o+12>>2]=t}if(r=h[c+116>>2],(l=h[r>>2])&&(h[r+4>>2]=l,ve(l),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,a=h[c+12>>2],s=h[o+8>>2],t=h[o+12>>2]),h[r+4>>2]=t,h[r>>2]=s,h[r+8>>2]=h[o+16>>2],s=0,h[o+16>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,a){if(a>>>0>=1073741824)break e;f=gn(t=a<<2),h[o+8>>2]=f,s=t+f|0,h[o+16>>2]=s,xt(f,0,t),h[o+12>>2]=s}t=h[c+128>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,f=h[o+8>>2],s=h[o+12>>2]),h[t+4>>2]=s,h[t>>2]=f,h[t+8>>2]=h[o+16>>2],h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,$e(o+8|0),r=((t=h[o+24>>2]+h[o+28>>2]|0)>>>0)/341|0,t=h[h[o+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,a=(t=h[o+28>>2])+1|0,h[o+28>>2]=a;a:if(!(t>>>0>a>>>0))for(w=c+16|0;;){if(A=h[o+12>>2],s=h[o+24>>2],t=h[A+((r=((t=s+(f=a-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,u=h[t+8>>2],l=h[t+4>>2],r=h[t>>2],h[o+28>>2]=f,1+(((f=(t=h[o+16>>2])-A|0)?v(f>>2,341)-1|0:0)-(a+s|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[o+16>>2]=h[o+16>>2]-4),s=0,r>>>0>T>>>0)break a;if((f=(0|l)==((t=h[c+12>>2])-1|0)?0:l+1|0)>>>0>=t>>>0)break a;A=(a=v(u,12))+h[c+128>>2]|0,l=a+h[c+116>>2]|0;s:if(g=f<<2,_=h[c>>2]-h[g+h[A>>2]>>2]|0){o:{l:{c:{u:{if(r>>>0<=2){if(t=h[c+104>>2],h[t>>2]=f,s=1,(a=h[c+12>>2])>>>0>1)break u;break o}if(p[c+8>>2]>p[c+4>>2])break a;if((0|(s=(t=h[c+116>>2])+(A=v(m=u+1|0,12))|0))!=(0|l)&&(Vt(s,h[l>>2],h[l+4>>2]),t=h[c+116>>2]),t=g+h[t+A>>2]|0,h[t>>2]=h[t>>2]+(1<<_-1),h[o+32>>2]=0,mi(w,31^y(r),o+32|0),(0|(s=r-(t=(r>>>1|0)-h[o+32>>2]|0)|0))!=(0|t)){if((0|(r=h[c+84>>2]))==h[c+76>>2])break c;l=h[r>>2],b=(_=h[c+88>>2])+1|0,h[c+88>>2]=b,l&=-2147483648>>>_;h:{if(32==(0|b)){if(h[c+88>>2]=0,h[c+84>>2]=r+4,l)break h;break c}if(!l)break c}r=s}else r=t;s=t;break l}for(;f=(a-1|0)==(0|f)?0:f+1|0,h[t+(s<<2)>>2]=f,(a=h[c+12>>2])>>>0>(s=s+1|0)>>>0;);break o}r=t}if(t=h[c+128>>2],l=h[(a=t+a|0)>>2],h[(g=l+g|0)>>2]=h[g>>2]+1,Vt(t+A|0,l,h[a+4>>2]),s&&(a=h[o+28>>2]+h[o+24>>2]|0,t=h[o+12>>2],(0|a)==(0|((l=h[o+16>>2]-t|0)?v(l>>2,341)-1|0:0))?($e(o+8|0),a=h[o+24>>2]+h[o+28>>2]|0,R=h[o+12>>2]):R=t,t=h[R+((t=(a>>>0)/341|0)<<2)>>2]+v(a-v(t,341)|0,12)|0,h[t+8>>2]=u,h[t+4>>2]=f,h[t>>2]=s,h[o+28>>2]=h[o+28>>2]+1),!r)break s;a=h[o+28>>2]+h[o+24>>2]|0,s=h[o+12>>2],(0|a)==(0|((t=h[o+16>>2]-s|0)?v(t>>2,341)-1|0:0))&&($e(o+8|0),a=h[o+24>>2]+h[o+28>>2]|0,s=h[o+12>>2]),t=h[s+((t=(a>>>0)/341|0)<<2)>>2]+v(a-v(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=f,h[t>>2]=r,h[o+28>>2]=h[o+28>>2]+1;break s}if(f=0,r)for(;;){if(s=h[c+92>>2],a){for(g=h[c+36>>2],P=h[c+104>>2],D=h[l>>2],S=h[A>>2],a=0;;){h[(h[(_=P+(a<<2)|0)>>2]<<2)+s>>2]=0,u=h[_>>2]<<2;o:if(t=h[c>>2]-h[u+S>>2]|0)if(u=s+u|0,(0|(M=32-(m=h[c+48>>2])|0))>=(0|t)){if((0|(b=h[c+44>>2]))==(0|g)){h[u>>2]=0;break o}if(h[u>>2]=h[b>>2]<<m>>>32-t,t=t+h[c+48>>2]|0,h[c+48>>2]=t,32!=(0|t))break o;h[c+48>>2]=0,h[c+44>>2]=b+4}else(0|(C=(b=h[c+44>>2])+4|0))!=(0|g)?(R=h[b>>2],h[c+44>>2]=C,M=t-M|0,h[c+48>>2]=M,h[u>>2]=h[b+4>>2]>>>32-M|R<<m>>>32-t):h[u>>2]=0;if(t=h[_>>2]<<2,h[(u=t+s|0)>>2]=h[u>>2]|h[t+D>>2],!((a=a+1|0)>>>0<p[c+12>>2]))break}s=h[c+92>>2]}if(h[o+32>>2]=h[s>>2],h[o+36>>2]=h[s+4>>2],h[o+40>>2]=h[s+8>>2],Ct(h[E>>2],o+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(f=f+1|0)))break s;a=h[c+12>>2]}}else{if(!r)break s;for(;;){if(t=h[l>>2],A=h[t+8>>2],g=h[t+4>>2],_=h[t>>2],t=h[E>>2],(a=h[t+4>>2])>>>0<(m=h[t+8>>2])>>>0)h[a+8>>2]=A,h[a+4>>2]=g,h[a>>2]=_,h[t+4>>2]=a+12;else{if((f=1+(b=(a-(u=h[t>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(P=(m=(m-u|0)/12|0)<<1,(f=m>>>0<178956970?f>>>0>P>>>0?f:P:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(f,12)),h[8+(f=R+b|0)>>2]=A,h[f+4>>2]=g,h[f>>2]=_,A=f+12|0,(0|a)!=(0|u))for(;a=a-12|0,h[(f=f-12|0)>>2]=h[a>>2],h[f+4>>2]=h[a+4>>2],h[f+8>>2]=h[a+8>>2],(0|a)!=(0|u););h[t+8>>2]=m+b,h[t+4>>2]=A,h[t>>2]=f,u&&ve(u)}if(h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(s=s+1|0)))break}}if(!(a=h[o+28>>2]))break}if(h[o+28>>2]=0,(f=(a=h[o+16>>2])-(t=h[o+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[o+12>>2]+4|0,h[o+12>>2]=t,(f=(a=h[o+16>>2])-t|0)>>>0>8;);switch(s=170,(f>>>2|0)-1|0){case 1:s=341;case 0:h[o+24>>2]=s}if((0|t)!=(0|a)){for(;ve(h[t>>2]),(0|a)!=(0|(t=t+4|0)););(0|(t=h[o+16>>2]))!=(0|(r=h[o+12>>2]))&&(h[o+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[o+8>>2])&&ve(t),N=o+48|0}Qt(c);break n;case 3:if(u=Ze(n+8|0,3),T=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(l=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(l>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=a+h[t>>2]|0,h[u>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(l=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,f=a,h[t+16>>2]=a,h[t+20>>2]=r,!(p[u>>2]>32)&&(a=h[t+12>>2],r=s,r=(s=l+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))&&(r=f+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[u+4>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,s&&(h[u+8>>2]=0,He(u+16|0,t)&&Tt(u+32|0,t)&&Tt(u+52|0,t)&&Tt(u+72|0,t)))))){if(A=h[u+4>>2],s=0,N=l=N-48|0,a=h[u+12>>2],h[l+16>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,a){if(a>>>0>=1073741824)break e;o=gn(t=a<<2),h[l+8>>2]=o,s=t+o|0,h[l+16>>2]=s,xt(o,0,t),h[l+12>>2]=s}if(t=h[u+116>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,o=h[l+8>>2],a=h[u+12>>2],s=h[l+12>>2]),h[t+4>>2]=s,h[t>>2]=o,h[t+8>>2]=h[l+16>>2],o=0,h[l+16>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,a){if(a>>>0>=1073741824)break e;c=gn(t=a<<2),h[l+8>>2]=c,o=t+c|0,h[l+16>>2]=o,xt(c,0,t),h[l+12>>2]=o}t=h[u+128>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[l+8>>2],o=h[l+12>>2]),h[t+4>>2]=o,h[t>>2]=c,h[t+8>>2]=h[l+16>>2],h[l+24>>2]=0,h[l+28>>2]=0,h[l+16>>2]=0,h[l+20>>2]=0,h[l+8>>2]=0,h[l+12>>2]=0,$e(l+8|0),r=((t=h[l+24>>2]+h[l+28>>2]|0)>>>0)/341|0,t=h[h[l+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,a=(t=h[l+28>>2])+1|0,h[l+28>>2]=a;a:if(!(t>>>0>a>>>0))for(b=u+16|0;;){if(c=h[l+12>>2],s=h[l+24>>2],t=h[c+((r=((t=s+(o=a-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,f=h[t+8>>2],r=h[t+4>>2],t=h[t>>2],h[l+28>>2]=o,1+(((c=(o=h[l+16>>2])-c|0)?v(c>>2,341)-1|0:0)-(a+s|0)|0)>>>0>=682&&(ve(h[o-4>>2]),h[l+16>>2]=h[l+16>>2]-4),t>>>0>A>>>0)break a;if(s=0,(c=(0|r)==((o=h[u+12>>2])-1|0)?0:r+1|0)>>>0>=o>>>0)break a;E=(r=h[u+116>>2])+(o=v(f,12))|0;s:if(a=c<<2,w=o+h[u+128>>2]|0,g=h[u>>2]-h[a+h[w>>2]>>2]|0){o:{l:{c:{u:{if(t>>>0<=2){if(r=h[u+104>>2],h[r>>2]=c,o=1,(a=h[u+12>>2])>>>0>1)break u;break o}if(p[u+8>>2]>p[u+4>>2])break a;if(Vt((s=r)+(r=o+12|0)|0,h[E>>2],h[E+4>>2]),r=a+h[r+h[u+116>>2]>>2]|0,h[r>>2]=h[r>>2]+(1<<g-1),h[l+32>>2]=0,mi(b,31^y(t),l+32|0),E=f+1|0,(0|(s=(r=t)-(t=(t>>>1|0)-h[l+32>>2]|0)|0))!=(0|t)){if((0|(r=h[u+84>>2]))==h[u+76>>2])break c;g=h[r>>2],m=(_=h[u+88>>2])+1|0,h[u+88>>2]=m,g&=-2147483648>>>_;h:{if(32==(0|m)){if(h[u+88>>2]=0,h[u+84>>2]=r+4,g)break h;break c}if(!g)break c}r=s}else r=t;s=t;break l}for(;c=(a-1|0)==(0|c)?0:c+1|0,h[r+(o<<2)>>2]=c,(a=h[u+12>>2])>>>0>(o=o+1|0)>>>0;);break o}r=t}if(R=a,t=h[u+128>>2],a=h[(o=t+o|0)>>2],h[(g=R+a|0)>>2]=h[g>>2]+1,Vt(t+v(E,12)|0,a,h[o+4>>2]),s&&(a=h[l+28>>2]+h[l+24>>2]|0,o=h[l+12>>2],(0|a)==(0|((t=h[l+16>>2]-o|0)?v(t>>2,341)-1|0:0))&&($e(l+8|0),a=h[l+24>>2]+h[l+28>>2]|0,o=h[l+12>>2]),t=h[o+((t=(a>>>0)/341|0)<<2)>>2]+v(a-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=s,h[l+28>>2]=h[l+28>>2]+1),!r)break s;a=h[l+28>>2]+h[l+24>>2]|0,o=h[l+12>>2],(0|a)==(0|((t=h[l+16>>2]-o|0)?v(t>>2,341)-1|0:0))&&($e(l+8|0),a=h[l+24>>2]+h[l+28>>2]|0,o=h[l+12>>2]),t=h[o+((t=(a>>>0)/341|0)<<2)>>2]+v(a-v(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=r,h[l+28>>2]=h[l+28>>2]+1;break s}if(f=0,t)for(;;){if(o=h[u+92>>2],a){for(c=h[u+36>>2],P=h[u+104>>2],D=h[E>>2],S=h[w>>2],a=0;;){h[(h[(g=P+(a<<2)|0)>>2]<<2)+o>>2]=0,s=h[g>>2]<<2;o:if(r=h[u>>2]-h[s+S>>2]|0)if(s=o+s|0,(0|(M=32-(_=h[u+48>>2])|0))>=(0|r)){if((0|(m=h[u+44>>2]))==(0|c)){h[s>>2]=0;break o}if(h[s>>2]=h[m>>2]<<_>>>32-r,r=r+h[u+48>>2]|0,h[u+48>>2]=r,32!=(0|r))break o;h[u+48>>2]=0,h[u+44>>2]=m+4}else(0|(C=(m=h[u+44>>2])+4|0))!=(0|c)?(R=h[m>>2],h[u+44>>2]=C,M=r-M|0,h[u+48>>2]=M,h[s>>2]=h[m+4>>2]>>>32-M|R<<_>>>32-r):h[s>>2]=0;if(r=h[g>>2]<<2,h[(s=r+o|0)>>2]=h[s>>2]|h[r+D>>2],!((a=a+1|0)>>>0<p[u+12>>2]))break}o=h[u+92>>2]}if(h[l+32>>2]=h[o>>2],h[l+36>>2]=h[o+4>>2],h[l+40>>2]=h[o+8>>2],Ct(h[T>>2],l+32|0),h[u+8>>2]=h[u+8>>2]+1,(0|t)==(0|(f=f+1|0)))break s;a=h[u+12>>2]}}else{if(!t)break s;for(;;){if(r=h[E>>2],f=h[r+8>>2],g=h[r+4>>2],_=h[r>>2],r=h[T>>2],(a=h[r+4>>2])>>>0<(m=h[r+8>>2])>>>0)h[a+8>>2]=f,h[a+4>>2]=g,h[a>>2]=_,h[r+4>>2]=a+12;else{if((c=1+(w=(a-(o=h[r>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(P=(m=(m-o|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>P>>>0?c:P:357913941)>>>0>=357913942)break t;if(R=v(w,12),w=gn(m=v(c,12)),h[8+(c=R+w|0)>>2]=f,h[c+4>>2]=g,h[c>>2]=_,f=c+12|0,(0|a)!=(0|o))for(;a=a-12|0,h[(c=c-12|0)>>2]=h[a>>2],h[c+4>>2]=h[a+4>>2],h[c+8>>2]=h[a+8>>2],(0|a)!=(0|o););h[r+8>>2]=m+w,h[r+4>>2]=f,h[r>>2]=c,o&&ve(o)}if(h[u+8>>2]=h[u+8>>2]+1,(0|t)==(0|(s=s+1|0)))break}}if(!(a=h[l+28>>2]))break}if(h[l+28>>2]=0,(c=(a=h[l+16>>2])-(t=h[l+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[l+12>>2]+4|0,h[l+12>>2]=t,(c=(a=h[l+16>>2])-t|0)>>>0>8;);switch(o=170,(c>>>2|0)-1|0){case 1:o=341;case 0:h[l+24>>2]=o}if((0|t)!=(0|a)){for(;ve(h[t>>2]),(0|a)!=(0|(t=t+4|0)););(0|(t=h[l+16>>2]))!=(0|(r=h[l+12>>2]))&&(h[l+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[l+8>>2])&&ve(t),N=l+48|0}Qt(u);break n;case 4:if(c=K(n+8|0,3),E=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(u=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(u>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=a+h[t>>2]|0,h[c>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(u=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,f=a,h[t+16>>2]=a,h[t+20>>2]=r,!(p[c>>2]>32)&&(a=h[t+12>>2],r=s,r=(s=u+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))&&(r=f+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[c+4>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,s&&(h[c+8>>2]=0,st(c+16|0,t)&&Tt(c+544|0,t)&&Tt(c+564|0,t)&&Tt(c+584|0,t)))))){if(T=h[c+4>>2],r=0,N=a=N-48|0,s=h[c+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=gn(t=s<<2),h[a+8>>2]=o,r=t+o|0,h[a+16>>2]=r,xt(o,0,t),h[a+12>>2]=r}if(t=h[c+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,ve(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[c+12>>2],o=h[a+8>>2],r=h[a+12>>2]),h[t+4>>2]=r,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;l=gn(t=s<<2),h[a+8>>2]=l,o=t+l|0,h[a+16>>2]=o,xt(l,0,t),h[a+12>>2]=o}t=h[c+640>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,l=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=l,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,$e(a+8|0),r=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;a:if(!(t>>>0>s>>>0))for(;;){if(A=h[a+12>>2],l=h[a+24>>2],t=h[A+((r=((t=l+(u=s-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,f=h[t+8>>2],o=h[t+4>>2],r=h[t>>2],h[a+28>>2]=u,1+(((u=(t=h[a+16>>2])-A|0)?v(u>>2,341)-1|0:0)-(s+l|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[a+16>>2]=h[a+16>>2]-4),r>>>0>T>>>0)break a;if((l=(0|o)==((t=h[c+12>>2])-1|0)?0:o+1|0)>>>0>=t>>>0)break a;g=(A=v(f,12))+h[c+640>>2]|0,u=A+h[c+628>>2]|0;s:{o:if(_=l<<2,s=h[c>>2]-h[_+h[g>>2]>>2]|0){l:{c:{u:{h:{if(r>>>0<=2){if(t=h[c+616>>2],h[t>>2]=l,o=1,(s=h[c+12>>2])>>>0>1)break h;break l}if(p[c+8>>2]>p[c+4>>2])break a;if((0|(o=(t=h[c+628>>2])+(g=v(m=f+1|0,12))|0))!=(0|u)&&(Vt(o,h[u>>2],h[u+4>>2]),t=h[c+628>>2]),t=_+h[t+g>>2]|0,h[t>>2]=h[t>>2]+(1<<s-1),o=0,s=0,t=31^y(r))for(;o=Gi(16+(c+(s<<4)|0)|0)|o<<1,(0|t)!=(0|(s=s+1|0)););if((0|(s=r-(t=(r>>>1|0)-o|0)|0))!=(0|t)){if((0|(r=h[c+596>>2]))==h[c+588>>2])break u;o=h[r>>2],b=(u=h[c+600>>2])+1|0,h[c+600>>2]=b,o&=-2147483648>>>u;d:{if(32==(0|b)){if(h[c+600>>2]=0,h[c+596>>2]=r+4,o)break d;break u}if(!o)break u}r=s}else r=t;s=t;break c}for(;l=(s-1|0)==(0|l)?0:l+1|0,h[t+(o<<2)>>2]=l,(s=h[c+12>>2])>>>0>(o=o+1|0)>>>0;);break l}r=t}if(t=h[c+640>>2],u=h[(o=t+A|0)>>2],h[(A=u+_|0)>>2]=h[A>>2]+1,Vt(t+g|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?v(u>>2,341)-1|0:0))?($e(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=l,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!r)break o;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+v(s-v(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=l,h[t>>2]=r,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break s}if(t=0,r)for(;;){if(o=h[c+604>>2],s){for(A=h[c+548>>2],w=h[c+616>>2],P=h[u>>2],D=h[g>>2],s=0;;){h[(h[(_=w+(s<<2)|0)>>2]<<2)+o>>2]=0,f=h[_>>2]<<2;l:if(l=h[c>>2]-h[f+D>>2]|0)if(f=o+f|0,(0|(S=32-(m=h[c+560>>2])|0))>=(0|l)){if((0|(b=h[c+556>>2]))==(0|A)){h[f>>2]=0;break l}if(h[f>>2]=h[b>>2]<<m>>>32-l,l=l+h[c+560>>2]|0,h[c+560>>2]=l,32!=(0|l))break l;h[c+560>>2]=0,h[c+556>>2]=b+4}else(0|(M=(b=h[c+556>>2])+4|0))!=(0|A)?(C=h[b>>2],h[c+556>>2]=M,S=l-S|0,h[c+560>>2]=S,h[f>>2]=h[b+4>>2]>>>32-S|C<<m>>>32-l):h[f>>2]=0;if(l=h[_>>2]<<2,h[(f=l+o|0)>>2]=h[f>>2]|h[l+P>>2],!((s=s+1|0)>>>0<p[c+12>>2]))break}o=h[c+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[E>>2],a+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(t=t+1|0)))break o;s=h[c+12>>2]}}else{if(t=0,!r)break o;for(;;){if(s=h[u>>2],A=h[s+8>>2],g=h[s+4>>2],_=h[s>>2],o=h[E>>2],(s=h[o+4>>2])>>>0<(m=h[o+8>>2])>>>0)h[s+8>>2]=A,h[s+4>>2]=g,h[s>>2]=_,h[o+4>>2]=s+12;else{if((l=1+(b=(s-(f=h[o>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(l=m>>>0<178956970?l>>>0>w>>>0?l:w:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(l,12)),h[8+(l=R+b|0)>>2]=A,h[l+4>>2]=g,h[l>>2]=_,A=l+12|0,(0|s)!=(0|f))for(;s=s-12|0,h[(l=l-12|0)>>2]=h[s>>2],h[l+4>>2]=h[s+4>>2],h[l+8>>2]=h[s+8>>2],(0|s)!=(0|f););h[o+8>>2]=m+b,h[o+4>>2]=A,h[o>>2]=l,f&&ve(f)}if(h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(t=t+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(l=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(l=(s=h[a+16>>2])-t|0)>>>0>8;);switch(r=170,(l>>>2|0)-1|0){case 1:r=341;case 0:h[a+24>>2]=r}if((0|t)!=(0|s)){for(;ve(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(r=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&ve(t),N=a+48|0}qt(c);break n;case 5:if(l=K(n+8|0,3),T=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(u=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(u>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=a+h[t>>2]|0,h[l>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(u=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,f=a,h[t+16>>2]=a,h[t+20>>2]=r,!(p[l>>2]>32)&&(a=h[t+12>>2],r=s,r=(s=u+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))&&(r=f+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[l+4>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,s&&(h[l+8>>2]=0,st(l+16|0,t)&&Tt(l+544|0,t)&&Tt(l+564|0,t)&&Tt(l+584|0,t)))))){if(A=h[l+4>>2],r=0,N=a=N-48|0,s=h[l+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=gn(t=s<<2),h[a+8>>2]=o,r=t+o|0,h[a+16>>2]=r,xt(o,0,t),h[a+12>>2]=r}if(t=h[l+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,ve(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[l+12>>2],o=h[a+8>>2],r=h[a+12>>2]),h[t+4>>2]=r,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;c=gn(t=s<<2),h[a+8>>2]=c,o=t+c|0,h[a+16>>2]=o,xt(c,0,t),h[a+12>>2]=o}t=h[l+640>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,c=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=c,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,$e(a+8|0),r=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=A,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;a:if(!(t>>>0>s>>>0))for(;;){if(u=h[a+12>>2],o=h[a+24>>2],t=h[u+((r=((t=o+(c=s-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(r,341)|0,12)|0,E=h[t+8>>2],r=h[t+4>>2],t=h[t>>2],h[a+28>>2]=c,1+(((u=(c=h[a+16>>2])-u|0)?v(u>>2,341)-1|0:0)-(o+s|0)|0)>>>0>=682&&(ve(h[c-4>>2]),h[a+16>>2]=h[a+16>>2]-4),t>>>0>A>>>0)break a;if((c=(0|r)==((s=h[l+12>>2])-1|0)?0:r+1|0)>>>0>=s>>>0)break a;f=(r=h[l+628>>2])+(u=v(E,12))|0;s:{o:if(g=c<<2,b=u+h[l+640>>2]|0,s=h[l>>2]-h[g+h[b>>2]>>2]|0){l:{c:{u:{h:{if(t>>>0<=2){if(r=h[l+616>>2],h[r>>2]=c,o=1,(s=h[l+12>>2])>>>0>1)break h;break l}if(p[l+8>>2]>p[l+4>>2])break a;if(Vt((o=r)+(r=u+12|0)|0,h[f>>2],h[f+4>>2]),r=g+h[r+h[l+628>>2]>>2]|0,h[r>>2]=h[r>>2]+(1<<s-1),o=0,s=0,r=31^y(t))for(;o=Gi(16+(l+(s<<4)|0)|0)|o<<1,(0|r)!=(0|(s=s+1|0)););if(f=E+1|0,(0|(s=(r=t)-(t=(t>>>1|0)-o|0)|0))!=(0|t)){if((0|(r=h[l+596>>2]))==h[l+588>>2])break u;o=h[r>>2],m=(_=h[l+600>>2])+1|0,h[l+600>>2]=m,o&=-2147483648>>>_;d:{if(32==(0|m)){if(h[l+600>>2]=0,h[l+596>>2]=r+4,o)break d;break u}if(!o)break u}r=s}else r=t;s=t;break c}for(;c=(s-1|0)==(0|c)?0:c+1|0,h[r+(o<<2)>>2]=c,(s=h[l+12>>2])>>>0>(o=o+1|0)>>>0;);break l}r=t}if(t=h[l+640>>2],u=h[(o=t+u|0)>>2],h[(g=u+g|0)>>2]=h[g>>2]+1,Vt(t+v(f,12)|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,u=h[a+12>>2],(0|o)==(0|((t=h[a+16>>2]-u|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),u=h[a+12>>2],o=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(o>>>0)/341|0)<<2)+u>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=E,h[t+4>>2]=c,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!r)break o;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+v(s-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=c,h[t>>2]=r,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break s}if(u=0,t)for(;;){if(o=h[l+604>>2],s){for(E=h[l+548>>2],w=h[l+616>>2],P=h[f>>2],D=h[b>>2],s=0;;){h[(h[(g=w+(s<<2)|0)>>2]<<2)+o>>2]=0,c=h[g>>2]<<2;l:if(r=h[l>>2]-h[c+D>>2]|0)if(c=o+c|0,(0|(S=32-(_=h[l+560>>2])|0))>=(0|r)){if((0|(m=h[l+556>>2]))==(0|E)){h[c>>2]=0;break l}if(h[c>>2]=h[m>>2]<<_>>>32-r,r=r+h[l+560>>2]|0,h[l+560>>2]=r,32!=(0|r))break l;h[l+560>>2]=0,h[l+556>>2]=m+4}else(0|(M=(m=h[l+556>>2])+4|0))!=(0|E)?(C=h[m>>2],h[l+556>>2]=M,S=r-S|0,h[l+560>>2]=S,h[c>>2]=h[m+4>>2]>>>32-S|C<<_>>>32-r):h[c>>2]=0;if(r=h[g>>2]<<2,h[(c=r+o|0)>>2]=h[c>>2]|h[r+P>>2],!((s=s+1|0)>>>0<p[l+12>>2]))break}o=h[l+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[T>>2],a+32|0),h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(u=u+1|0)))break o;s=h[l+12>>2]}}else{if(u=0,!t)break o;for(;;){if(r=h[f>>2],E=h[r+8>>2],g=h[r+4>>2],_=h[r>>2],r=h[T>>2],(s=h[r+4>>2])>>>0<(m=h[r+8>>2])>>>0)h[s+8>>2]=E,h[s+4>>2]=g,h[s>>2]=_,h[r+4>>2]=s+12;else{if((c=1+(b=(s-(o=h[r>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-o|0)/12|0)<<1,(c=m>>>0<178956970?c>>>0>w>>>0?c:w:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(c,12)),h[8+(c=R+b|0)>>2]=E,h[c+4>>2]=g,h[c>>2]=_,E=c+12|0,(0|o)!=(0|s))for(;s=s-12|0,h[(c=c-12|0)>>2]=h[s>>2],h[c+4>>2]=h[s+4>>2],h[c+8>>2]=h[s+8>>2],(0|o)!=(0|s););h[r+8>>2]=m+b,h[r+4>>2]=E,h[r>>2]=c,o&&ve(o)}if(h[l+8>>2]=h[l+8>>2]+1,(0|t)==(0|(u=u+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(c=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(c=(s=h[a+16>>2])-t|0)>>>0>8;);switch(o=170,(c>>>2|0)-1|0){case 1:o=341;case 0:h[a+24>>2]=o}if((0|t)!=(0|s)){for(;ve(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(r=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&ve(t),N=a+48|0}qt(l);break n;case 6:break r;default:break i}if(c=K(n+8|0,3),E=n+664|0,s=h[t+12>>2],r=h[t+20>>2],r=(u=(a=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(u>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s))&&(r=a+h[t>>2]|0,h[c>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,s=r=h[t+20>>2],r=(a=(u=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,f=a,h[t+16>>2]=a,h[t+20>>2]=r,!(p[c>>2]>32)&&(a=h[t+12>>2],r=s,r=(s=u+8|0)>>>0<8?r+1|0:r,!(s>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))&&(r=f+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[c+4>>2]=s,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,s&&(h[c+8>>2]=0,st(c+16|0,t)&&Tt(c+544|0,t)&&Tt(c+564|0,t)&&Tt(c+584|0,t)))))){if(T=h[c+4>>2],r=0,N=a=N-48|0,s=h[c+12>>2],h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;o=gn(t=s<<2),h[a+8>>2]=o,r=t+o|0,h[a+16>>2]=r,xt(o,0,t),h[a+12>>2]=r}if(t=h[c+628>>2],(u=h[t>>2])&&(h[t+4>>2]=u,ve(u),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,s=h[c+12>>2],o=h[a+8>>2],r=h[a+12>>2]),h[t+4>>2]=r,h[t>>2]=o,h[t+8>>2]=h[a+16>>2],o=0,h[a+16>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,s){if(s>>>0>=1073741824)break e;l=gn(t=s<<2),h[a+8>>2]=l,o=t+l|0,h[a+16>>2]=o,xt(l,0,t),h[a+12>>2]=o}t=h[c+640>>2],(r=h[t>>2])&&(h[t+4>>2]=r,ve(r),h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,l=h[a+8>>2],o=h[a+12>>2]),h[t+4>>2]=o,h[t>>2]=l,h[t+8>>2]=h[a+16>>2],h[a+24>>2]=0,h[a+28>>2]=0,h[a+16>>2]=0,h[a+20>>2]=0,h[a+8>>2]=0,h[a+12>>2]=0,$e(a+8|0),r=((t=h[a+24>>2]+h[a+28>>2]|0)>>>0)/341|0,t=h[h[a+12>>2]+(r<<2)>>2]+v(t-v(r,341)|0,12)|0,h[t+4>>2]=0,h[t+8>>2]=0,h[t>>2]=T,s=(t=h[a+28>>2])+1|0,h[a+28>>2]=s;r:if(!(t>>>0>s>>>0))for(;;){if(u=h[a+12>>2],t=h[a+24>>2],r=h[u+((l=((r=t+(o=s-1|0)|0)>>>0)/341|0)<<2)>>2]+v(r-v(l,341)|0,12)|0,f=h[r+8>>2],r=h[r>>2],h[a+28>>2]=o,1+(((l=(o=h[a+16>>2])-u|0)?v(l>>2,341)-1|0:0)-(t+s|0)|0)>>>0>=682&&(ve(h[o-4>>2]),h[a+16>>2]=h[a+16>>2]-4),r>>>0>T>>>0)break r;if(t=h[c+628>>2],(l=ft(c,r,g=(A=v(f,12))+h[c+640>>2]|0))>>>0>=p[c+12>>2])break r;u=t+A|0;a:{s:if(_=l<<2,s=h[c>>2]-h[_+h[g>>2]>>2]|0){o:{l:{c:{u:{if(r>>>0<=2){if(t=h[c+616>>2],h[t>>2]=l,o=1,(s=h[c+12>>2])>>>0>1)break u;break o}if(p[c+8>>2]>p[c+4>>2])break r;if((0|(o=(t=h[c+628>>2])+(g=v(m=f+1|0,12))|0))!=(0|u)&&(Vt(o,h[u>>2],h[u+4>>2]),t=h[c+628>>2]),t=_+h[t+g>>2]|0,h[t>>2]=h[t>>2]+(1<<s-1),o=0,s=0,t=31^y(r))for(;o=Gi(16+(c+(s<<4)|0)|0)|o<<1,(0|t)!=(0|(s=s+1|0)););if((0|(s=r-(t=(r>>>1|0)-o|0)|0))!=(0|t)){if((0|(r=h[c+596>>2]))==h[c+588>>2])break c;o=h[r>>2],b=(u=h[c+600>>2])+1|0,h[c+600>>2]=b,o&=-2147483648>>>u;h:{if(32==(0|b)){if(h[c+600>>2]=0,h[c+596>>2]=r+4,o)break h;break c}if(!o)break c}r=s}else r=t;s=t;break l}for(;l=(s-1|0)==(0|l)?0:l+1|0,h[t+(o<<2)>>2]=l,(s=h[c+12>>2])>>>0>(o=o+1|0)>>>0;);break o}r=t}if(t=h[c+640>>2],u=h[(o=t+A|0)>>2],h[(A=u+_|0)>>2]=h[A>>2]+1,Vt(t+g|0,u,h[o+4>>2]),s&&(o=h[a+28>>2]+h[a+24>>2]|0,t=h[a+12>>2],(0|o)==(0|((u=h[a+16>>2]-t|0)?v(u>>2,341)-1|0:0))?($e(a+8|0),o=h[a+24>>2]+h[a+28>>2]|0,u=h[a+12>>2]):u=t,t=h[u+((t=(o>>>0)/341|0)<<2)>>2]+v(o-v(t,341)|0,12)|0,h[t+8>>2]=f,h[t+4>>2]=l,h[t>>2]=s,h[a+28>>2]=h[a+28>>2]+1),!r)break s;s=h[a+28>>2]+h[a+24>>2]|0,o=h[a+12>>2],(0|s)==(0|((t=h[a+16>>2]-o|0)?v(t>>2,341)-1|0:0))&&($e(a+8|0),o=h[a+12>>2],s=h[a+24>>2]+h[a+28>>2]|0),t=h[((t=(s>>>0)/341|0)<<2)+o>>2]+v(s-v(t,341)|0,12)|0,h[t+8>>2]=m,h[t+4>>2]=l,h[t>>2]=r,s=h[a+28>>2]+1|0,h[a+28>>2]=s;break a}if(t=0,r)for(;;){if(o=h[c+604>>2],s){for(A=h[c+548>>2],w=h[c+616>>2],P=h[u>>2],D=h[g>>2],s=0;;){h[(h[(_=w+(s<<2)|0)>>2]<<2)+o>>2]=0,f=h[_>>2]<<2;o:if(l=h[c>>2]-h[f+D>>2]|0)if(f=o+f|0,(0|(S=32-(m=h[c+560>>2])|0))>=(0|l)){if((0|(b=h[c+556>>2]))==(0|A)){h[f>>2]=0;break o}if(h[f>>2]=h[b>>2]<<m>>>32-l,l=l+h[c+560>>2]|0,h[c+560>>2]=l,32!=(0|l))break o;h[c+560>>2]=0,h[c+556>>2]=b+4}else(0|(M=(b=h[c+556>>2])+4|0))!=(0|A)?(C=h[b>>2],h[c+556>>2]=M,S=l-S|0,h[c+560>>2]=S,h[f>>2]=h[b+4>>2]>>>32-S|C<<m>>>32-l):h[f>>2]=0;if(l=h[_>>2]<<2,h[(f=l+o|0)>>2]=h[f>>2]|h[l+P>>2],!((s=s+1|0)>>>0<p[c+12>>2]))break}o=h[c+604>>2]}if(h[a+32>>2]=h[o>>2],h[a+36>>2]=h[o+4>>2],h[a+40>>2]=h[o+8>>2],Ct(h[E>>2],a+32|0),h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(t=t+1|0)))break s;s=h[c+12>>2]}}else{if(t=0,!r)break s;for(;;){if(s=h[u>>2],A=h[s+8>>2],g=h[s+4>>2],_=h[s>>2],o=h[E>>2],(s=h[o+4>>2])>>>0<(m=h[o+8>>2])>>>0)h[s+8>>2]=A,h[s+4>>2]=g,h[s>>2]=_,h[o+4>>2]=s+12;else{if((l=1+(b=(s-(f=h[o>>2])|0)/12|0)|0)>>>0>=357913942)break e;if(w=(m=(m-f|0)/12|0)<<1,(l=m>>>0<178956970?l>>>0>w>>>0?l:w:357913941)>>>0>=357913942)break t;if(R=v(b,12),b=gn(m=v(l,12)),h[8+(l=R+b|0)>>2]=A,h[l+4>>2]=g,h[l>>2]=_,A=l+12|0,(0|s)!=(0|f))for(;s=s-12|0,h[(l=l-12|0)>>2]=h[s>>2],h[l+4>>2]=h[s+4>>2],h[l+8>>2]=h[s+8>>2],(0|s)!=(0|f););h[o+8>>2]=m+b,h[o+4>>2]=A,h[o>>2]=l,f&&ve(f)}if(h[c+8>>2]=h[c+8>>2]+1,(0|r)==(0|(t=t+1|0)))break}}s=h[a+28>>2]}if(!s)break}if(h[a+28>>2]=0,(l=(s=h[a+16>>2])-(t=h[a+12>>2])|0)>>>0>=9)for(;ve(h[t>>2]),t=h[a+12>>2]+4|0,h[a+12>>2]=t,(l=(s=h[a+16>>2])-t|0)>>>0>8;);switch(r=170,(l>>>2|0)-1|0){case 1:r=341;case 0:h[a+24>>2]=r}if((0|t)!=(0|s)){for(;ve(h[t>>2]),(0|s)!=(0|(t=t+4|0)););(0|(t=h[a+16>>2]))!=(0|(r=h[a+12>>2]))&&(h[a+16>>2]=t+(((t-r|0)-4>>>2^-1)<<2))}(t=h[a+8>>2])&&ve(t),N=a+48|0}qt(c)}o=h[e+12>>2]==((h[i+4>>2]-h[i>>2]|0)/12|0)}return N=n+672|0,o}Qi(1336),x()}vr(),x()}function B(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,x=0,M=0,R=0,P=0;if(!e)return 1;e:if(!((0|(r=h[i+20>>2]))>=(0|(o=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|o))){o=d[s+h[i>>2]|0],r=(s=s+1|0)?r:r+1|0,h[i+16>>2]=s,h[i+20>>2]=r;t:switch(0|o){case 0:m=e,l=t,s=n,e=0,n=0,N=y=N+-64|0,h[y+56>>2]=0,h[y+48>>2]=0,h[y+52>>2]=0,h[y+40>>2]=0,h[y+44>>2]=0,h[y+32>>2]=0,h[y+36>>2]=0,h[y+24>>2]=0,h[y+28>>2]=0,h[y+16>>2]=0,h[y+20>>2]=0,h[y+8>>2]=0,h[y+12>>2]=0;i:if(Re(y+8|0,i)&&!(!je(y+8|0,i)|(h[y+20>>2]?0:m))){if(Ut(i,0,0),m)for(A=l<<2,E=h[y+36>>2],S=h[y+48>>2],T=h[y+24>>2];;){n:if(!((b=h[y+56>>2])>>>0>16383))for(e=h[y+52>>2];;){if((0|e)<=0)break n;if(e=e-1|0,h[y+52>>2]=e,b=d[e+S|0]|b<<8,h[y+56>>2]=b,!(b>>>0<16384))break}if(t=E+((_=h[((e=4095&b)<<2)+T>>2])<<3)|0,h[y+56>>2]=(v(h[t>>2],b>>>12|0)+e|0)-h[t+4>>2],!((0|l)<=0)){if(e=0,!d[i+36|0]|_>>>0>32)break i;if(_){for(R=-2&_,P=1&_,o=n+l|0,t=h[i+32>>2];;){if(c=h[i+28>>2],u=h[i+24>>2],b=0,e=t,r=0,w=0,1!=(0|_))for(;(g=u+(e>>>3|0)|0)>>>0>=c>>>0?g=0:(g=d[0|g],t=e+1|0,h[i+32>>2]=t,g=g>>>(7&e)&1,e=t),g=g<<b|r,r=0,(x=u+(e>>>3|0)|0)>>>0<c>>>0&&(r=d[0|x],t=e+1|0,h[i+32>>2]=t,r=r>>>(7&e)&1,e=t),x=1|b,b=b+2|0,r=g|r<<x,(0|R)!=(0|(w=w+2|0)););if(g=s+(n<<2)|0,P&&((w=c)>>>0>(c=u+(e>>>3|0)|0)>>>0?(c=d[0|c],t=e+1|0,h[i+32>>2]=t,e=c>>>(7&e)&1):e=0,r|=e<<b),h[g>>2]=r,(0|o)==(0|(n=n+1|0)))break}n=o}else xt(s+(n<<2)|0,0,A),n=n+l|0}if(!(m>>>0>(M=l+M|0)>>>0))break}a[i+36|0]=0,t=h[i+20>>2],r=0,e=(n=(7&(r=(e=h[i+32>>2]+7|0)>>>0<7?1:r))<<29|e>>>3)+h[i+16>>2]|0,r=(r>>>3|0)+t|0,h[i+16>>2]=e,h[i+20>>2]=e>>>0<n>>>0?r+1|0:r,e=1}return(t=h[y+36>>2])&&(h[y+40>>2]=t,ve(t)),(t=h[y+24>>2])&&(h[y+28>>2]=t,ve(t)),(t=h[y+8>>2])&&(h[y+12>>2]=t,ve(t)),N=y- -64|0,e;case 1:break t;default:break e}t=0;t:if(!((0|(r=h[i+20>>2]))>=(0|(o=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|r)>(0|o))){o=d[s+h[i>>2]|0],r=(s=s+1|0)?r:r+1|0,h[i+16>>2]=s,h[i+20>>2]=r;i:switch(o-1|0){case 8:o=e,y=n,N=s=N+-64|0,h[s+56>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,_=s+8|0;n:{r:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],r=h[i+20>>2],(0|e)<=(0|(r=(n=(t=h[i+16>>2])+4|0)>>>0<4?r+1|0:r))&n>>>0>p[i+8>>2]|(0|e)<(0|r))break r;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[_+12>>2]=u,r=h[i+20>>2],r=(e=h[i+16>>2]+4|0)>>>0<4?r+1|0:r,h[i+16>>2]=e,h[i+20>>2]=r}else{if(!yi(1,_+12|0,i))break r;u=h[_+12>>2]}if(t=h[_>>2],(e=h[_+4>>2]-t>>2)>>>0<u>>>0?(ei(_,u-e|0),u=h[_+12>>2]):e>>>0<=u>>>0||(h[_+4>>2]=t+(u<<2)),n=1,!u)break n;for(E=h[i+8>>2],g=h[i+12>>2],S=h[_>>2],t=0;;){if(n=0,(0|g)<=(0|(r=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|r)>(0|g))break n;n=h[i>>2],A=d[n+e|0],r=(e=e+1|0)?r:r+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=r,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(n=0,(e=e+t|0)>>>0>=u>>>0)break n;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|r)>=(0|g)&l>>>0>=E>>>0|(0|r)>(0|g))break r;if(u=d[n+l|0],r=(l=l+1|0)?r:r+1|0,h[i+16>>2]=l,h[i+20>>2]=r,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[_+12>>2])>>>0))break}if(l=_+16|0,A=h[_>>2],t=h[_+16>>2],(e=h[_+20>>2]-t|0)>>>0<=32767?ei(l,8192-(e>>>2|0)|0):32768!=(0|e)&&(h[_+20>>2]=t+32768),t=h[(e=_+28|0)>>2],(n=h[_+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-n|0),t=h[e>>2];else if(n>>>0>u>>>0&&(h[_+32>>2]=(u<<3)+t),!u)break r;for(c=0,n=0;;){if(_=h[(r=A+(c<<2)|0)>>2],e=n,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=_,(n=(r=h[r>>2])+e|0)>>>0>8192)break r;if(!(e>>>0>=n>>>0)){if(_=h[l>>2],g=0,E=7&r)for(;h[_+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(r-1>>>0<=6))for(;h[(r=_+(e<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|n)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=8192==(0|n)}n=m}if(!(!n|(h[s+20>>2]?0:o))){n=0,N=_=N-16|0;n:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],r=h[i+20>>2],r=(l=(m=h[i+16>>2])+8|0)>>>0<8?r+1|0:r,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|r)|(0|e)<(0|r))break n;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=r}else{if(!hi(1,_+8|0,i))break n;l=h[i+16>>2],r=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[_+8>>2],m=h[_+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+r|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(r=r+m|0,r=(t=e+l|0)>>>0<e>>>0?r+1|0:r,h[i+16>>2]=t,h[i+20>>2]=r,(0|e)<=0))){t=l+h[i>>2]|0,h[s+48>>2]=t;r:if((l=d[0|(r=(i=e-1|0)+t|0)])>>>0<=63)h[s+52>>2]=i,e=63&d[0|r];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break n;h[s+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break r;case 1:if(e>>>0<3)break n;h[s+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break r}h[s+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+32768|0,h[s+56>>2]=e,n=e>>>0<8388608}}if(N=_+16|0,n)if(o)for(t=h[s+36>>2],i=h[s+48>>2],n=h[s+24>>2],e=h[s+56>>2];;){n:if(!(e>>>0>32767))for(b=h[s+52>>2];;){if((0|b)<=0)break n;if(b=b-1|0,h[s+52>>2]=b,e=d[i+b|0]|e<<8,h[s+56>>2]=e,!(e>>>0<32768))break}if(l=h[n+((r=8191&e)<<2)>>2],e=(v(h[(b=t+(l<<3)|0)>>2],e>>>13|0)+r|0)-h[b+4>>2]|0,h[s+56>>2]=e,h[y+(w<<2)>>2]=l,b=1,(0|o)==(0|(w=w+1|0)))break}else b=1}(e=h[s+36>>2])&&(h[s+40>>2]=e,ve(e)),(e=h[s+24>>2])&&(h[s+28>>2]=e,ve(e)),(e=h[s+8>>2])&&(h[s+12>>2]=e,ve(e)),N=s- -64|0,t=b;break t;case 9:y=e,_=n,N=o=N+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,s=o+8|0;n:{r:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],r=h[i+20>>2],(0|e)<=(0|(r=(n=(t=h[i+16>>2])+4|0)>>>0<4?r+1|0:r))&n>>>0>p[i+8>>2]|(0|e)<(0|r))break r;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[s+12>>2]=u,r=h[i+20>>2],r=(e=h[i+16>>2]+4|0)>>>0<4?r+1|0:r,h[i+16>>2]=e,h[i+20>>2]=r}else{if(!yi(1,s+12|0,i))break r;u=h[s+12>>2]}if(t=h[s>>2],(e=h[s+4>>2]-t>>2)>>>0<u>>>0?(ei(s,u-e|0),u=h[s+12>>2]):e>>>0<=u>>>0||(h[s+4>>2]=t+(u<<2)),n=1,!u)break n;for(E=h[i+8>>2],g=h[i+12>>2],S=h[s>>2],t=0;;){if(n=0,(0|g)<=(0|(r=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|r)>(0|g))break n;n=h[i>>2],A=d[n+e|0],r=(e=e+1|0)?r:r+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=r,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(n=0,(e=e+t|0)>>>0>=u>>>0)break n;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|r)>=(0|g)&l>>>0>=E>>>0|(0|r)>(0|g))break r;if(u=d[n+l|0],r=(l=l+1|0)?r:r+1|0,h[i+16>>2]=l,h[i+20>>2]=r,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[s+12>>2])>>>0))break}if(l=s+16|0,A=h[s>>2],t=h[s+16>>2],(e=h[s+20>>2]-t|0)>>>0<=131071?ei(l,32768-(e>>>2|0)|0):131072!=(0|e)&&(h[s+20>>2]=t+131072),t=h[(e=s+28|0)>>2],(n=h[s+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-n|0),t=h[e>>2];else if(n>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+t),!u)break r;for(c=0,n=0;;){if(s=h[(r=A+(c<<2)|0)>>2],e=n,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(n=(r=h[r>>2])+e|0)>>>0>32768)break r;if(!(e>>>0>=n>>>0)){if(s=h[l>>2],g=0,E=7&r)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(r-1>>>0<=6))for(;h[(r=s+(e<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|n)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=32768==(0|n)}n=m}if(!(!n|(h[o+20>>2]?0:y))){n=0,N=u=N-16|0;n:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],r=h[i+20>>2],r=(l=(m=h[i+16>>2])+8|0)>>>0<8?r+1|0:r,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|r)|(0|e)<(0|r))break n;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=r}else{if(!hi(1,u+8|0,i))break n;l=h[i+16>>2],r=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[u+8>>2],m=h[u+12>>2]}if(s=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+r|0)|0))==(0|m)&e>>>0>s>>>0|t>>>0<m>>>0||(s=r+m|0,s=(t=e+l|0)>>>0<e>>>0?s+1|0:s,h[i+16>>2]=t,h[i+20>>2]=s,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;r:if((l=d[0|(r=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|r];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break n;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break r;case 1:if(e>>>0<3)break n;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break r}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+131072|0,h[o+56>>2]=e,n=e>>>0<33554432}}if(N=u+16|0,n)if(y)for(t=h[o+36>>2],i=h[o+48>>2],n=h[o+24>>2],e=h[o+56>>2];;){n:if(!(e>>>0>131071))for(b=h[o+52>>2];;){if((0|b)<=0)break n;if(b=b-1|0,h[o+52>>2]=b,e=d[i+b|0]|e<<8,h[o+56>>2]=e,!(e>>>0<131072))break}if(l=h[n+((r=32767&e)<<2)>>2],e=(v(h[(b=t+(l<<3)|0)>>2],e>>>15|0)+r|0)-h[b+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,b=1,(0|y)==(0|(w=w+1|0)))break}else b=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,ve(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,ve(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,ve(e)),N=o- -64|0,t=b;break t;case 10:y=e,_=n,N=o=N+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,g=o+8|0;n:{r:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],r=h[i+20>>2],(0|e)<=(0|(r=(n=(t=h[i+16>>2])+4|0)>>>0<4?r+1|0:r))&n>>>0>p[i+8>>2]|(0|e)<(0|r))break r;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[g+12>>2]=u,r=h[i+20>>2],r=(e=h[i+16>>2]+4|0)>>>0<4?r+1|0:r,h[i+16>>2]=e,h[i+20>>2]=r}else{if(!yi(1,g+12|0,i))break r;u=h[g+12>>2]}if(t=h[g>>2],(e=h[g+4>>2]-t>>2)>>>0<u>>>0?(ei(g,u-e|0),u=h[g+12>>2]):e>>>0<=u>>>0||(h[g+4>>2]=t+(u<<2)),n=1,!u)break n;for(E=h[i+8>>2],A=h[i+12>>2],S=h[g>>2],t=0;;){if(n=0,(0|A)<=(0|(r=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|r)>(0|A))break n;n=h[i>>2],s=d[n+e|0],r=(e=e+1|0)?r:r+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=r,e=s>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&s)){case 0:break s;case 3:break l;default:break o}if(n=0,(e=e+t|0)>>>0>=u>>>0)break n;xt(S+(t<<2)|0,0,4+(252&s)|0),t=e;break a}for(;;){if((0|r)>=(0|A)&l>>>0>=E>>>0|(0|r)>(0|A))break r;if(u=d[n+l|0],s=r,s=(r=l+1|0)?s:s+1|0,l=r,h[i+16>>2]=r,r=s,h[i+20>>2]=r,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[g+12>>2])>>>0))break}if(l=g+16|0,A=h[g>>2],t=h[g+16>>2],(e=h[g+20>>2]-t|0)>>>0<=262143?ei(l,65536-(e>>>2|0)|0):262144!=(0|e)&&(h[g+20>>2]=t+262144),t=h[(e=g+28|0)>>2],(n=h[g+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-n|0),t=h[e>>2];else if(n>>>0>u>>>0&&(h[g+32>>2]=(u<<3)+t),!u)break r;for(c=0,n=0;;){if(s=h[(r=A+(c<<2)|0)>>2],e=n,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(n=(r=h[r>>2])+e|0)>>>0>65536)break r;if(!(e>>>0>=n>>>0)){if(s=h[l>>2],g=0,E=7&r)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(r-1>>>0<=6))for(;h[(r=s+(e<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|n)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=65536==(0|n)}n=m}if(!(!n|(h[o+20>>2]?0:y))){n=0,N=s=N-16|0;n:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],r=h[i+20>>2],r=(l=(m=h[i+16>>2])+8|0)>>>0<8?r+1|0:r,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|r)|(0|e)<(0|r))break n;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=r}else{if(!hi(1,s+8|0,i))break n;l=h[i+16>>2],r=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[s+8>>2],m=h[s+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+r|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(r=r+m|0,r=(t=e+l|0)>>>0<e>>>0?r+1|0:r,h[i+16>>2]=t,h[i+20>>2]=r,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;r:if((l=d[0|(r=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|r];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break n;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break r;case 1:if(e>>>0<3)break n;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break r}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+262144|0,h[o+56>>2]=e,n=e>>>0<67108864}}if(N=s+16|0,n)if(y)for(t=h[o+36>>2],i=h[o+48>>2],n=h[o+24>>2],e=h[o+56>>2];;){n:if(!(e>>>0>262143))for(b=h[o+52>>2];;){if((0|b)<=0)break n;if(b=b-1|0,h[o+52>>2]=b,e=d[i+b|0]|e<<8,h[o+56>>2]=e,!(e>>>0<262144))break}if(l=h[n+((r=65535&e)<<2)>>2],e=(v(h[(b=t+(l<<3)|0)>>2],e>>>16|0)+r|0)-h[b+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,b=1,(0|y)==(0|(w=w+1|0)))break}else b=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,ve(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,ve(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,ve(e)),N=o- -64|0,t=b;break t;case 11:o=e,y=n,N=s=N+-64|0,h[s+56>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,_=s+8|0;n:{r:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],r=h[i+20>>2],(0|e)<=(0|(r=(n=(t=h[i+16>>2])+4|0)>>>0<4?r+1|0:r))&n>>>0>p[i+8>>2]|(0|e)<(0|r))break r;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[_+12>>2]=u,r=h[i+20>>2],r=(e=h[i+16>>2]+4|0)>>>0<4?r+1|0:r,h[i+16>>2]=e,h[i+20>>2]=r}else{if(!yi(1,_+12|0,i))break r;u=h[_+12>>2]}if(t=h[_>>2],(e=h[_+4>>2]-t>>2)>>>0<u>>>0?(ei(_,u-e|0),u=h[_+12>>2]):e>>>0<=u>>>0||(h[_+4>>2]=t+(u<<2)),n=1,!u)break n;for(E=h[i+8>>2],g=h[i+12>>2],S=h[_>>2],t=0;;){if(n=0,(0|g)<=(0|(r=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|r)>(0|g))break n;n=h[i>>2],A=d[n+e|0],r=(e=e+1|0)?r:r+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=r,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(n=0,(e=e+t|0)>>>0>=u>>>0)break n;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|r)>=(0|g)&l>>>0>=E>>>0|(0|r)>(0|g))break r;if(u=d[n+l|0],r=(l=l+1|0)?r:r+1|0,h[i+16>>2]=l,h[i+20>>2]=r,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[_+12>>2])>>>0))break}if(l=_+16|0,A=h[_>>2],t=h[_+16>>2],(e=h[_+20>>2]-t|0)>>>0<=1048575?ei(l,262144-(e>>>2|0)|0):1048576!=(0|e)&&(h[_+20>>2]=t- -1048576),t=h[(e=_+28|0)>>2],(n=h[_+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-n|0),t=h[e>>2];else if(n>>>0>u>>>0&&(h[_+32>>2]=(u<<3)+t),!u)break r;for(c=0,n=0;;){if(_=h[(r=A+(c<<2)|0)>>2],e=n,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=_,(n=(r=h[r>>2])+e|0)>>>0>262144)break r;if(!(e>>>0>=n>>>0)){if(_=h[l>>2],g=0,E=7&r)for(;h[_+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(r-1>>>0<=6))for(;h[(r=_+(e<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|n)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=262144==(0|n)}n=m}if(!(!n|(h[s+20>>2]?0:o))){n=0,N=_=N-16|0;n:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],r=h[i+20>>2],r=(l=(m=h[i+16>>2])+8|0)>>>0<8?r+1|0:r,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|r)|(0|e)<(0|r))break n;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=r}else{if(!hi(1,_+8|0,i))break n;l=h[i+16>>2],r=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[_+8>>2],m=h[_+12>>2]}if(u=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+r|0)|0))==(0|m)&e>>>0>u>>>0|t>>>0<m>>>0||(r=r+m|0,r=(t=e+l|0)>>>0<e>>>0?r+1|0:r,h[i+16>>2]=t,h[i+20>>2]=r,(0|e)<=0))){t=l+h[i>>2]|0,h[s+48>>2]=t;r:if((l=d[0|(r=(i=e-1|0)+t|0)])>>>0<=63)h[s+52>>2]=i,e=63&d[0|r];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break n;h[s+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break r;case 1:if(e>>>0<3)break n;h[s+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break r}h[s+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e- -1048576|0,h[s+56>>2]=e,n=e>>>0<268435456}}if(N=_+16|0,n)if(o)for(t=h[s+36>>2],i=h[s+48>>2],n=h[s+24>>2],e=h[s+56>>2];;){n:if(!(e>>>0>1048575))for(b=h[s+52>>2];;){if((0|b)<=0)break n;if(b=b-1|0,h[s+52>>2]=b,e=d[i+b|0]|e<<8,h[s+56>>2]=e,!(e>>>0<1048576))break}if(l=h[n+((r=262143&e)<<2)>>2],e=(v(h[(b=t+(l<<3)|0)>>2],e>>>18|0)+r|0)-h[b+4>>2]|0,h[s+56>>2]=e,h[y+(w<<2)>>2]=l,b=1,(0|o)==(0|(w=w+1|0)))break}else b=1}(e=h[s+36>>2])&&(h[s+40>>2]=e,ve(e)),(e=h[s+24>>2])&&(h[s+28>>2]=e,ve(e)),(e=h[s+8>>2])&&(h[s+12>>2]=e,ve(e)),N=s- -64|0,t=b;break t;case 12:y=e,_=n,N=o=N+-64|0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[o+24>>2]=0,h[o+28>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,s=o+8|0;n:{r:if(e=f[i+38>>1]){if(e>>>0<=511){if(e=h[i+12>>2],r=h[i+20>>2],(0|e)<=(0|(r=(n=(t=h[i+16>>2])+4|0)>>>0<4?r+1|0:r))&n>>>0>p[i+8>>2]|(0|e)<(0|r))break r;e=t+h[i>>2]|0,u=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[s+12>>2]=u,r=h[i+20>>2],r=(e=h[i+16>>2]+4|0)>>>0<4?r+1|0:r,h[i+16>>2]=e,h[i+20>>2]=r}else{if(!yi(1,s+12|0,i))break r;u=h[s+12>>2]}if(t=h[s>>2],(e=h[s+4>>2]-t>>2)>>>0<u>>>0?(ei(s,u-e|0),u=h[s+12>>2]):e>>>0<=u>>>0||(h[s+4>>2]=t+(u<<2)),n=1,!u)break n;for(E=h[i+8>>2],g=h[i+12>>2],S=h[s>>2],t=0;;){if(n=0,(0|g)<=(0|(r=h[i+20>>2]))&E>>>0<=(e=h[i+16>>2])>>>0|(0|r)>(0|g))break n;n=h[i>>2],A=d[n+e|0],r=(e=e+1|0)?r:r+1|0,l=e,h[i+16>>2]=e,h[i+20>>2]=r,e=A>>>2|0,c=0;a:{s:{o:{l:switch(0|(T=3&A)){case 0:break s;case 3:break l;default:break o}if(n=0,(e=e+t|0)>>>0>=u>>>0)break n;xt(S+(t<<2)|0,0,4+(252&A)|0),t=e;break a}for(;;){if((0|r)>=(0|g)&l>>>0>=E>>>0|(0|r)>(0|g))break r;if(u=d[n+l|0],r=(l=l+1|0)?r:r+1|0,h[i+16>>2]=l,h[i+20>>2]=r,e|=u<<(c<<3|6),(0|T)==(0|(c=c+1|0)))break}}h[S+(t<<2)>>2]=e}if(!((t=t+1|0)>>>0<(u=h[s+12>>2])>>>0))break}if(l=s+16|0,A=h[s>>2],t=h[s+16>>2],(e=h[s+20>>2]-t|0)>>>0<=2097151?ei(l,524288-(e>>>2|0)|0):2097152!=(0|e)&&(h[s+20>>2]=t+2097152),t=h[(e=s+28|0)>>2],(n=h[s+32>>2]-t>>3)>>>0<u>>>0)ti(e,u-n|0),t=h[e>>2];else if(n>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+t),!u)break r;for(c=0,n=0;;){if(s=h[(r=A+(c<<2)|0)>>2],e=n,h[4+(g=(c<<3)+t|0)>>2]=e,h[g>>2]=s,(n=(r=h[r>>2])+e|0)>>>0>524288)break r;if(!(e>>>0>=n>>>0)){if(s=h[l>>2],g=0,E=7&r)for(;h[s+(e<<2)>>2]=c,e=e+1|0,(0|E)!=(0|(g=g+1|0)););if(!(r-1>>>0<=6))for(;h[(r=s+(e<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|n)!=(0|(e=e+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=524288==(0|n)}n=m}if(!(!n|(h[o+20>>2]?0:y))){n=0,N=u=N-16|0;n:{if(f[i+38>>1]<=511){if(e=c=h[i+12>>2],r=h[i+20>>2],r=(l=(m=h[i+16>>2])+8|0)>>>0<8?r+1|0:r,(t=h[i+8>>2])>>>0<l>>>0&(0|e)<=(0|r)|(0|e)<(0|r))break n;m=m+h[i>>2]|0,e=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[i+16>>2]=l,h[i+20>>2]=r}else{if(!hi(1,u+8|0,i))break n;l=h[i+16>>2],r=h[i+20>>2],t=h[i+8>>2],c=h[i+12>>2],e=h[u+8>>2],m=h[u+12>>2]}if(s=t-l|0,!((0|(t=c-((t>>>0<l>>>0)+r|0)|0))==(0|m)&e>>>0>s>>>0|t>>>0<m>>>0||(s=r+m|0,s=(t=e+l|0)>>>0<e>>>0?s+1|0:s,h[i+16>>2]=t,h[i+20>>2]=s,(0|e)<=0))){t=l+h[i>>2]|0,h[o+48>>2]=t;r:if((l=d[0|(r=(i=e-1|0)+t|0)])>>>0<=63)h[o+52>>2]=i,e=63&d[0|r];else{switch((l>>>6|0)-1|0){case 0:if(e>>>0<2)break n;h[o+52>>2]=e-2,e=d[1+(e=(e+t|0)-2|0)|0]<<8&16128|d[0|e];break r;case 1:if(e>>>0<3)break n;h[o+52>>2]=e-3,e=d[2+(e=(e+t|0)-3|0)|0]<<16&4128768|d[e+1|0]<<8|d[0|e];break r}h[o+52>>2]=e-4,e=d[2+(e=(e+t|0)-4|0)|0]<<16|d[e+3|0]<<24&1056964608|d[e+1|0]<<8|d[0|e]}e=e+2097152|0,h[o+56>>2]=e,n=e>>>0<536870912}}if(N=u+16|0,n)if(y)for(t=h[o+36>>2],i=h[o+48>>2],n=h[o+24>>2],e=h[o+56>>2];;){n:if(!(e>>>0>2097151))for(b=h[o+52>>2];;){if((0|b)<=0)break n;if(b=b-1|0,h[o+52>>2]=b,e=d[i+b|0]|e<<8,h[o+56>>2]=e,!(e>>>0<2097152))break}if(l=h[n+((r=524287&e)<<2)>>2],e=(v(h[(b=t+(l<<3)|0)>>2],e>>>19|0)+r|0)-h[b+4>>2]|0,h[o+56>>2]=e,h[_+(w<<2)>>2]=l,b=1,(0|y)==(0|(w=w+1|0)))break}else b=1}(e=h[o+36>>2])&&(h[o+40>>2]=e,ve(e)),(e=h[o+24>>2])&&(h[o+28>>2]=e,ve(e)),(e=h[o+8>>2])&&(h[o+12>>2]=e,ve(e)),N=o- -64|0,t=b;break t;case 17:t=oe(e,i,n);break t;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:if(N=r=N+-64|0,h[r+56>>2]=0,h[r+48>>2]=0,h[r+52>>2]=0,h[r+40>>2]=0,h[r+44>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,!(!Re(r+8|0,i)|(h[r+20>>2]?0:e))&&je(r+8|0,i))if(e)for(b=h[r+36>>2],m=h[r+48>>2],s=h[r+24>>2],i=h[r+56>>2];;){n:if(!(i>>>0>16383))for(t=h[r+52>>2];;){if((0|t)<=0)break n;if(t=t-1|0,h[r+52>>2]=t,i=d[t+m|0]|i<<8,h[r+56>>2]=i,!(i>>>0<16384))break}if(o=h[s+((t=4095&i)<<2)>>2],i=(v(h[(y=b+(o<<3)|0)>>2],i>>>12|0)+t|0)-h[y+4>>2]|0,h[r+56>>2]=i,h[(l<<2)+n>>2]=o,t=1,(0|(l=l+1|0))==(0|e))break}else t=1;(e=h[r+36>>2])&&(h[r+40>>2]=e,ve(e)),(e=h[r+24>>2])&&(h[r+28>>2]=e,ve(e)),(e=h[r+8>>2])&&(h[r+12>>2]=e,ve(e)),N=r- -64|0;break t;case 13:case 14:case 15:case 16:break i;default:break t}t=oe(e,i,n)}l=t}return l}function F(e){var t,i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0;N=t=N-16|0;e:{t:{i:{n:{r:{a:{s:{o:{l:{c:{u:{if((e|=0)>>>0<=244){if(3&(i=(a=h[4233])>>>(n=(l=e>>>0<11?16:e+11&-8)>>>3|0)|0)){e=(s=h[16980+(i=(r=n+(1&(-1^i))|0)<<3)>>2])+8|0,(0|(n=h[s+8>>2]))!=(0|(i=i+16972|0))?(h[n+12>>2]=i,h[i+8>>2]=n):(m=16932,g=In(r)&a,h[m>>2]=g),i=r<<3,h[s+4>>2]=3|i,h[4+(i=i+s|0)>>2]=1|h[i+4>>2];break e}if((f=h[4235])>>>0>=l>>>0)break u;if(i){n=e=(i=(0-(e=(0-(e=2<<n)|e)&i<<n)&e)-1|0)>>>12&16,n|=e=(i=i>>>e|0)>>>5&8,n|=e=(i=i>>>e|0)>>>2&4,o=h[16980+(e=(n=((n|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)|0)<<3)>>2],(0|(i=h[o+8>>2]))!=(0|(e=e+16972|0))?(h[i+12>>2]=e,h[e+8>>2]=i):(a=In(n)&a,h[4233]=a),e=o+8|0,h[o+4>>2]=3|l,s=(i=n<<3)-l|0,h[4+(r=o+l|0)>>2]=1|s,h[i+o>>2]=s,f&&(n=16972+((i=f>>>3|0)<<3)|0,o=h[4238],(i=1<<i)&a?i=h[n+8>>2]:(h[4233]=i|a,i=n),h[n+8>>2]=o,h[i+12>>2]=o,h[o+12>>2]=n,h[o+8>>2]=i),h[4238]=r,h[4235]=s;break e}if(!(u=h[4234]))break u;for(n=e=(i=(u&0-u)-1|0)>>>12&16,n|=e=(i=i>>>e|0)>>>5&8,n|=e=(i=i>>>e|0)>>>2&4,i=h[17236+(((n|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)<<2)>>2],r=(-8&h[i+4>>2])-l|0,n=i;(e=h[n+16>>2])||(e=h[n+20>>2]);)r=(s=(n=(-8&h[e+4>>2])-l|0)>>>0<r>>>0)?n:r,i=s?e:i,n=e;if(c=h[i+24>>2],(0|(s=h[i+12>>2]))!=(0|i)){e=h[i+8>>2],h[e+12>>2]=s,h[s+8>>2]=e;break t}if(!(e=h[(n=i+20|0)>>2])){if(!(e=h[i+16>>2]))break c;n=i+16|0}for(;o=n,s=e,(e=h[(n=e+20|0)>>2])||(n=s+16|0,e=h[s+16>>2]););h[o>>2]=0;break t}if(l=-1,!(e>>>0>4294967231)&&(l=-8&(e=e+11|0),u=h[4234])){r=0-l|0,a=0,l>>>0<256||(a=31,l>>>0>16777215||(e=e>>>8|0,e<<=o=e+1048320>>>16&8,a=28+((e=((e<<=n=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|n|o)|0)<<1|l>>>e+21&1)|0));h:{d:{if(n=h[17236+(a<<2)>>2])for(e=0,i=l<<(31==(0|a)?0:25-(a>>>1|0)|0);;){if(!((o=(-8&h[n+4>>2])-l|0)>>>0>=r>>>0||(s=n,r=o))){r=0,e=n;break d}if(o=h[n+20>>2],n=h[16+((i>>>29&4)+n|0)>>2],e=o?(0|o)==(0|n)?e:o:e,i<<=1,!n)break}else e=0;if(!(e|s)){if(s=0,!(e=(0-(e=2<<a)|e)&u))break u;n=e=(i=(e&0-e)-1|0)>>>12&16,n|=e=(i=i>>>e|0)>>>5&8,n|=e=(i=i>>>e|0)>>>2&4,e=h[17236+(((n|=e=(i=i>>>e|0)>>>1&2)|(e=(i=i>>>e|0)>>>1&1))+(i>>>e|0)<<2)>>2]}if(!e)break h}for(;r=(n=(i=(-8&h[e+4>>2])-l|0)>>>0<r>>>0)?i:r,s=n?e:s,e=(i=h[e+16>>2])||h[e+20>>2];);}if(!(!s|h[4235]-l>>>0<=r>>>0)){if(a=h[s+24>>2],(0|s)!=(0|(i=h[s+12>>2]))){e=h[s+8>>2],h[e+12>>2]=i,h[i+8>>2]=e;break i}if(!(e=h[(n=s+20|0)>>2])){if(!(e=h[s+16>>2]))break l;n=s+16|0}for(;o=n,i=e,(e=h[(n=e+20|0)>>2])||(n=i+16|0,e=h[i+16>>2]););h[o>>2]=0;break i}}}if((n=h[4235])>>>0>=l>>>0){r=h[4238],(i=n-l|0)>>>0>=16?(h[4235]=i,e=r+l|0,h[4238]=e,h[e+4>>2]=1|i,h[n+r>>2]=i,h[r+4>>2]=3|l):(h[4238]=0,h[4235]=0,h[r+4>>2]=3|n,h[4+(e=n+r|0)>>2]=1|h[e+4>>2]),e=r+8|0;break e}if((c=h[4236])>>>0>l>>>0){i=c-l|0,h[4236]=i,e=(n=h[4239])+l|0,h[4239]=e,h[e+4>>2]=1|i,h[n+4>>2]=3|l,e=n+8|0;break e}if(e=0,u=l+47|0,h[4351]?n=h[4353]:(h[4354]=-1,h[4355]=-1,h[4352]=4096,h[4353]=4096,h[4351]=t+12&-16^1431655768,h[4356]=0,h[4344]=0,n=4096),(n=(o=u+n|0)&(s=0-n|0))>>>0<=l>>>0)break e;if((r=h[4343])&&r>>>0<(a=(i=h[4341])+n|0)>>>0|i>>>0>=a>>>0)break e;if(4&d[17376])break a;u:{h:{if(r=h[4239])for(e=17380;;){if((i=h[e>>2])>>>0<=r>>>0&r>>>0<i+h[e+4>>2]>>>0)break h;if(!(e=h[e+8>>2]))break}if(-1==(0|(i=rn(0))))break s;if(a=n,(e=(r=h[4352])-1|0)&i&&(a=(n-i|0)+(e+i&0-r)|0),a>>>0<=l>>>0|a>>>0>2147483646)break s;if((r=h[4343])&&r>>>0<(s=(e=h[4341])+a|0)>>>0|e>>>0>=s>>>0)break s;if((0|i)!=(0|(e=rn(a))))break u;break r}if((a=s&o-c)>>>0>2147483646)break s;if((0|(i=rn(a)))==(h[e>>2]+h[e+4>>2]|0))break o;e=i}if(!(-1==(0|e)|l+48>>>0<=a>>>0)){if((i=(i=h[4353])+(u-a|0)&0-i)>>>0>2147483646){i=e;break r}if(-1!=(0|rn(i))){a=i+a|0,i=e;break r}rn(0-a|0);break s}if(i=e,-1!=(0|e))break r;break s}s=0;break t}i=0;break i}if(-1!=(0|i))break r}h[4344]=4|h[4344]}if(n>>>0>2147483646)break n;if(-1==(0|(i=rn(n)))|-1==(0|(e=rn(0)))|e>>>0<=i>>>0)break n;if((a=e-i|0)>>>0<=l+40>>>0)break n}e=h[4341]+a|0,h[4341]=e,e>>>0>p[4342]&&(h[4342]=e);r:{a:{s:{if(o=h[4239]){for(e=17380;;){if(((r=h[e>>2])+(n=h[e+4>>2])|0)==(0|i))break s;if(!(e=h[e+8>>2]))break}break a}for((e=h[4237])>>>0<=i>>>0&&e||(h[4237]=i),e=0,h[4346]=a,h[4345]=i,h[4241]=-1,h[4242]=h[4351],h[4348]=0;n=16972+(r=e<<3)|0,h[r+16980>>2]=n,h[r+16984>>2]=n,32!=(0|(e=e+1|0)););n=(r=a-40|0)-(e=i+8&7?-8-i&7:0)|0,h[4236]=n,e=e+i|0,h[4239]=e,h[e+4>>2]=1|n,h[4+(i+r|0)>>2]=40,h[4240]=h[4355];break r}if(!(8&d[e+12|0]|r>>>0>o>>>0|i>>>0<=o>>>0)){h[e+4>>2]=n+a,n=(e=o+8&7?-8-o&7:0)+o|0,h[4239]=n,e=(i=h[4236]+a|0)-e|0,h[4236]=e,h[n+4>>2]=1|e,h[4+(i+o|0)>>2]=40,h[4240]=h[4355];break r}}p[4237]>i>>>0&&(h[4237]=i),n=i+a|0,e=17380;a:{s:{o:{l:{c:{u:{for(;;){if((0|n)!=h[e>>2]){if(e=h[e+8>>2])continue;break u}break}if(!(8&d[e+12|0]))break c}for(e=17380;;){if((n=h[e>>2])>>>0<=o>>>0&&(s=n+h[e+4>>2]|0)>>>0>o>>>0)break l;e=h[e+8>>2]}}if(h[e>>2]=i,h[e+4>>2]=h[e+4>>2]+a,h[4+(u=(i+8&7?-8-i&7:0)+i|0)>>2]=3|l,n=(a=n+(n+8&7?-8-n&7:0)|0)-(c=l+u|0)|0,(0|a)==(0|o)){h[4239]=c,e=h[4236]+n|0,h[4236]=e,h[c+4>>2]=1|e;break s}if(h[4238]==(0|a)){h[4238]=c,e=h[4235]+n|0,h[4235]=e,h[c+4>>2]=1|e,h[e+c>>2]=e;break s}if(1==(3&(e=h[a+4>>2]))){o=-8&e;c:if(e>>>0<=255){if(r=h[a+8>>2],e=e>>>3|0,(0|(i=h[a+12>>2]))==(0|r)){m=16932,g=h[4233]&In(e),h[m>>2]=g;break c}h[r+12>>2]=i,h[i+8>>2]=r}else{if(l=h[a+24>>2],(0|a)==(0|(i=h[a+12>>2])))if((r=h[(e=a+20|0)>>2])||(r=h[(e=a+16|0)>>2])){for(;s=e,(r=h[(e=(i=r)+20|0)>>2])||(e=i+16|0,r=h[i+16>>2]););h[s>>2]=0}else i=0;else e=h[a+8>>2],h[e+12>>2]=i,h[i+8>>2]=e;if(l){r=h[a+28>>2];u:{if(h[(e=17236+(r<<2)|0)>>2]==(0|a)){if(h[e>>2]=i,i)break u;m=16936,g=h[4234]&In(r),h[m>>2]=g;break c}if(h[l+(h[l+16>>2]==(0|a)?16:20)>>2]=i,!i)break c}h[i+24>>2]=l,(e=h[a+16>>2])&&(h[i+16>>2]=e,h[e+24>>2]=i),(e=h[a+20>>2])&&(h[i+20>>2]=e,h[e+24>>2]=i)}}a=a+o|0,n=n+o|0}if(h[a+4>>2]=-2&h[a+4>>2],h[c+4>>2]=1|n,h[n+c>>2]=n,n>>>0<=255){i=16972+((e=n>>>3|0)<<3)|0,(n=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|n,e=i),h[i+8>>2]=c,h[e+12>>2]=c,h[c+12>>2]=i,h[c+8>>2]=e;break s}if(e=31,n>>>0<=16777215&&(e=n>>>8|0,e<<=s=e+1048320>>>16&8,e=28+((e=((e<<=r=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|r|s)|0)<<1|n>>>e+21&1)|0),h[c+28>>2]=e,h[c+16>>2]=0,h[c+20>>2]=0,s=17236+(e<<2)|0,(r=h[4234])&(i=1<<e)){for(e=n<<(31==(0|e)?0:25-(e>>>1|0)|0),i=h[s>>2];;){if(r=i,(-8&h[i+4>>2])==(0|n))break o;if(i=e>>>29|0,e<<=1,!(i=h[16+(s=r+(4&i)|0)>>2]))break}h[s+16>>2]=c,h[c+24>>2]=r}else h[4234]=i|r,h[s>>2]=c,h[c+24>>2]=s;h[c+12>>2]=c,h[c+8>>2]=c;break s}for(n=(r=a-40|0)-(e=i+8&7?-8-i&7:0)|0,h[4236]=n,e=e+i|0,h[4239]=e,h[e+4>>2]=1|n,h[4+(i+r|0)>>2]=40,h[4240]=h[4355],h[(n=(e=(s+(s-39&7?39-s&7:0)|0)-47|0)>>>0<o+16>>>0?o:e)+4>>2]=27,e=h[4348],h[n+16>>2]=h[4347],h[n+20>>2]=e,e=h[4346],h[n+8>>2]=h[4345],h[n+12>>2]=e,h[4347]=n+8,h[4346]=a,h[4345]=i,h[4348]=0,e=n+24|0;h[e+4>>2]=7,i=e+8|0,e=e+4|0,i>>>0<s>>>0;);if((0|n)==(0|o))break r;if(h[n+4>>2]=-2&h[n+4>>2],s=n-o|0,h[o+4>>2]=1|s,h[n>>2]=s,s>>>0<=255){i=16972+((e=s>>>3|0)<<3)|0,(n=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|n,e=i),h[i+8>>2]=o,h[e+12>>2]=o,h[o+12>>2]=i,h[o+8>>2]=e;break r}if(e=31,h[o+16>>2]=0,h[o+20>>2]=0,s>>>0<=16777215&&(e=s>>>8|0,e<<=r=e+1048320>>>16&8,e=28+((e=((e<<=n=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|n|r)|0)<<1|s>>>e+21&1)|0),h[o+28>>2]=e,r=17236+(e<<2)|0,(n=h[4234])&(i=1<<e)){for(e=s<<(31==(0|e)?0:25-(e>>>1|0)|0),i=h[r>>2];;){if(n=i,(0|s)==(-8&h[i+4>>2]))break a;if(i=e>>>29|0,e<<=1,!(i=h[16+(r=n+(4&i)|0)>>2]))break}h[r+16>>2]=o,h[o+24>>2]=n}else h[4234]=i|n,h[r>>2]=o,h[o+24>>2]=r;h[o+12>>2]=o,h[o+8>>2]=o;break r}e=h[r+8>>2],h[e+12>>2]=c,h[r+8>>2]=c,h[c+24>>2]=0,h[c+12>>2]=r,h[c+8>>2]=e}e=u+8|0;break e}e=h[n+8>>2],h[e+12>>2]=o,h[n+8>>2]=o,h[o+24>>2]=0,h[o+12>>2]=n,h[o+8>>2]=e}if(!((e=h[4236])>>>0<=l>>>0)){i=e-l|0,h[4236]=i,e=(n=h[4239])+l|0,h[4239]=e,h[e+4>>2]=1|i,h[n+4>>2]=3|l,e=n+8|0;break e}}h[4190]=48,e=0;break e}i:if(a){n=h[s+28>>2];n:{if(h[(e=17236+(n<<2)|0)>>2]==(0|s)){if(h[e>>2]=i,i)break n;u=In(n)&u,h[4234]=u;break i}if(h[a+(h[a+16>>2]==(0|s)?16:20)>>2]=i,!i)break i}h[i+24>>2]=a,(e=h[s+16>>2])&&(h[i+16>>2]=e,h[e+24>>2]=i),(e=h[s+20>>2])&&(h[i+20>>2]=e,h[e+24>>2]=i)}i:if(r>>>0<=15)e=r+l|0,h[s+4>>2]=3|e,h[4+(e=e+s|0)>>2]=1|h[e+4>>2];else if(h[s+4>>2]=3|l,h[4+(a=s+l|0)>>2]=1|r,h[r+a>>2]=r,r>>>0<=255)i=16972+((e=r>>>3|0)<<3)|0,(n=h[4233])&(e=1<<e)?e=h[i+8>>2]:(h[4233]=e|n,e=i),h[i+8>>2]=a,h[e+12>>2]=a,h[a+12>>2]=i,h[a+8>>2]=e;else{e=31,r>>>0<=16777215&&(e=r>>>8|0,e<<=o=e+1048320>>>16&8,e=28+((e=((e<<=n=e+520192>>>16&4)<<(i=e+245760>>>16&2)>>>15|0)-(i|n|o)|0)<<1|r>>>e+21&1)|0),h[a+28>>2]=e,h[a+16>>2]=0,h[a+20>>2]=0,i=17236+(e<<2)|0;n:{if((n=1<<e)&u){for(e=r<<(31==(0|e)?0:25-(e>>>1|0)|0),l=h[i>>2];;){if((-8&h[(i=l)+4>>2])==(0|r))break n;if(n=e>>>29|0,e<<=1,!(l=h[16+(n=(4&n)+i|0)>>2]))break}h[n+16>>2]=a}else h[4234]=n|u,h[i>>2]=a;h[a+24>>2]=i,h[a+12>>2]=a,h[a+8>>2]=a;break i}e=h[i+8>>2],h[e+12>>2]=a,h[i+8>>2]=a,h[a+24>>2]=0,h[a+12>>2]=i,h[a+8>>2]=e}e=s+8|0;break e}t:if(c){n=h[i+28>>2];i:{if(h[(e=17236+(n<<2)|0)>>2]==(0|i)){if(h[e>>2]=s,s)break i;m=16936,g=In(n)&u,h[m>>2]=g;break t}if(h[c+(h[c+16>>2]==(0|i)?16:20)>>2]=s,!s)break t}h[s+24>>2]=c,(e=h[i+16>>2])&&(h[s+16>>2]=e,h[e+24>>2]=s),(e=h[i+20>>2])&&(h[s+20>>2]=e,h[e+24>>2]=s)}r>>>0<=15?(e=r+l|0,h[i+4>>2]=3|e,h[4+(e=e+i|0)>>2]=1|h[e+4>>2]):(h[i+4>>2]=3|l,h[4+(s=i+l|0)>>2]=1|r,h[r+s>>2]=r,f&&(n=16972+((e=f>>>3|0)<<3)|0,o=h[4238],(e=1<<e)&a?e=h[n+8>>2]:(h[4233]=e|a,e=n),h[n+8>>2]=o,h[e+12>>2]=o,h[o+12>>2]=n,h[o+8>>2]=e),h[4238]=s,h[4235]=r),e=i+8|0}return N=t+16|0,0|e}function G(e,t){var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0;N=i=N-48|0,n=gn(8),h[n+4>>2]=t,h[n>>2]=0,t=n+8|0,h[i+40>>2]=t,h[i+36>>2]=t,h[i+32>>2]=n;e:{t:{i:{n:{for(;;){if(f=h[4+(t=t-8|0)>>2],l=h[t>>2],h[i+36>>2]=t,l){h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,n=1,t=h[e>>2],s=h[t+8>>2];r:if(!((0|(c=h[t+12>>2]))<=(0|(r=h[t+20>>2]))&(o=h[t+16>>2])>>>0>=s>>>0|(0|r)>(0|c))){if(s=d[o+h[t>>2]|0],r=(o=o+1|0)?r:r+1|0,h[t+16>>2]=o,h[t+20>>2]=r,it(i+16|0,s),s){if(r=h[e>>2],g=mn(i+16|0),o=h[r+20>>2],t=s,v=(u=h[r+16>>2])+s|0,c=h[r+12>>2],o=s>>>0>v>>>0?o+1|0:o,v>>>0>p[r+8>>2]&(0|c)<=(0|o)|(0|o)>(0|c))break r;We(g,u+h[r>>2]|0,s),n=h[r+20>>2],n=(s=t+h[r+16>>2]|0)>>>0<t>>>0?n+1|0:n,h[r+16>>2]=s,h[r+20>>2]=n}f=gn(24),h[(t=f)+4>>2]=0,h[t+8>>2]=0,h[(t=t+16|0)>>2]=0,h[t+4>>2]=0,h[f>>2]=f+4,h[f+12>>2]=t,N=s=N-32|0;a:if((0|(m=Lt(o=l+12|0,n=i+16|0)))!=(0|(_=l+16|0)))f&&(an(f+12|0,h[f+16>>2]),pn(f,h[f+4>>2]),ve(f));else{h[s+16>>2]=n;s:{o:{if(t=h[o+4>>2])for(c=(l=(r=d[n+11|0])<<24>>24<0)?h[n>>2]:n,l=l?h[n+4>>2]:r,n=o+4|0;;){l:{c:{u:{h:{d:{f:if(u=(g=(r=(v=(r=d[t+27|0])<<24>>24<0)?h[t+20>>2]:r)>>>0<l>>>0)?r:l){if(b=t+16|0,!(b=xi(c,v=v?h[b>>2]:b,u))){if(r>>>0>l>>>0)break f;break d}if((0|b)>=0)break d}else if(r>>>0<=l>>>0)break h;if(r=h[t>>2])break l;break o}if(r=xi(v,c,u))break u}if(g)break c;break s}if((0|r)>=0)break s}if(n=t+4|0,!(r=h[t+4>>2]))break s;t=n}n=t,t=r}t=o+4|0}n=t}if((r=h[n>>2])?t=0:(c=(r=gn(32))+16|0,l=h[s+16>>2],a[l+11|0]>=0?(v=h[l+4>>2],h[c>>2]=h[l>>2],h[c+4>>2]=v,h[c+8>>2]=h[l+8>>2]):Bi(c,h[l>>2],h[l+4>>2]),h[r+8>>2]=t,h[r>>2]=0,h[r+4>>2]=0,h[r+28>>2]=0,h[n>>2]=r,(t=h[h[o>>2]>>2])?(h[o>>2]=t,t=h[n>>2]):t=r,Ke(h[o+4>>2],t),h[o+8>>2]=h[o+8>>2]+1,t=1),a[s+28|0]=t,h[s+24>>2]=r,n=h[s+24>>2],t=h[n+28>>2],h[n+28>>2]=f,!t)break a;an(t+12|0,h[t+16>>2]),pn(t,h[t+4>>2]),ve(t)}N=s+32|0,n=(0|m)!=(0|_)}if(a[i+27|0]<0&&ve(h[i+16>>2]),n)break t}if(!f)break t;if(h[i+16>>2]=0,!Ti(1,i+16|0,h[e>>2]))break t;if(t=0,A=h[i+16>>2])for(;;){v=0,N=u=N-32|0,h[u+24>>2]=0,h[u+16>>2]=0,h[u+20>>2]=0,n=h[e>>2],s=h[n+8>>2];r:{a:{s:if(!((0|(o=h[n+12>>2]))<=(0|(r=h[n+20>>2]))&(l=h[n+16>>2])>>>0>=s>>>0|(0|r)>(0|o))){if(o=d[l+h[n>>2]|0],s=n,n=r,n=(r=l+1|0)?n:n+1|0,h[s+16>>2]=r,h[s+20>>2]=n,it(u+16|0,o),o){if(s=h[e>>2],g=mn(u+16|0),r=h[s+20>>2],c=(m=h[s+16>>2])+(n=o)|0,l=h[s+12>>2],r=n>>>0>c>>>0?r+1|0:r,c>>>0>p[s+8>>2]&(0|l)<=(0|r)|(0|r)>(0|l))break s;We(g,m+h[s>>2]|0,o),r=h[s+20>>2],r=(o=n+h[s+16>>2]|0)>>>0<n>>>0?r+1|0:r,h[s+16>>2]=o,h[s+20>>2]=r}if(h[u+12>>2]=0,Ti(1,u+12|0,h[e>>2])&&(n=h[u+12>>2])){if(h[u+8>>2]=0,h[u>>2]=0,h[u+4>>2]=0,(0|n)<0)break a;if(r=gn(n),h[u>>2]=r,s=n+r|0,h[u+8>>2]=s,g=xt(r,0,n),h[u+4>>2]=s,s=h[e>>2],v=h[s+8>>2],l=h[s+12>>2],o=h[s+20>>2],v=(0|(o=(c=n+(m=h[s+16>>2])|0)>>>0<n>>>0?o+1|0:o))<=(0|l)&c>>>0<=v>>>0|(0|o)<(0|l)){if(We(g,m+h[s>>2]|0,n),r=n,o=n+h[s+16>>2]|0,n=h[s+20>>2],h[s+16>>2]=o,h[s+20>>2]=r>>>0>o>>>0?n+1|0:n,N=l=N-48|0,(0|(r=Lt(f,u+16|0)))!=(f+4|0)){o:if(s=h[r+4>>2])for(;o=s,s=h[s>>2];);else{if(o=h[r+8>>2],h[o>>2]==(0|r))break o;for(n=r+8|0;n=(s=h[n>>2])+8|0,o=h[s+8>>2],(0|s)!=h[o>>2];);}h[f>>2]==(0|r)&&(h[f>>2]=o),h[f+8>>2]=h[f+8>>2]-1,o=h[f+4>>2],c=r;o:{l:{if(s=h[r>>2]){if(!(n=h[c+4>>2]))break l;for(;r=n,n=h[n>>2];);}if(!(s=h[r+4>>2])){s=0,g=1;break o}}h[s+8>>2]=h[r+8>>2],g=0}m=h[r+8>>2];o:if((0|r)!=(0|(n=h[m>>2])))h[m+4>>2]=s;else{if(h[m>>2]=s,(0|r)==(0|o)){n=0,o=s;break o}n=h[m+4>>2]}b=!d[r+12|0],(0|r)!=(0|c)&&(m=h[c+8>>2],h[r+8>>2]=m,h[m+(((0|c)!=h[h[c+8>>2]>>2])<<2)>>2]=r,m=h[c>>2],h[r>>2]=m,h[m+8>>2]=r,m=h[c+4>>2],h[r+4>>2]=m,m&&(h[m+8>>2]=r),a[r+12|0]=d[c+12|0],o=(0|o)==(0|c)?r:o);o:if(!(b|!o)){if(g)for(;;){s=d[n+12|0];l:{if(r=h[n+8>>2],h[r>>2]!=(0|n)){s||(a[n+12|0]=1,a[r+12|0]=0,s=h[r+4>>2],g=h[s>>2],h[r+4>>2]=g,g&&(h[g+8>>2]=r),h[s+8>>2]=h[r+8>>2],g=h[r+8>>2],h[(((0|r)!=h[g>>2])<<2)+g>>2]=s,h[s>>2]=r,h[r+8>>2]=s,r=n,o=(0|(n=h[n>>2]))==(0|o)?r:o,n=h[n+4>>2]);c:{u:{r=h[n>>2];h:{if(d[r+12|0]||!r){if(s=h[n+4>>2],!d[s+12|0]&&s)break h;if(a[n+12|0]=0,(0|o)!=(0|(n=h[n+8>>2]))){if(d[n+12|0])break l}else n=o;a[n+12|0]=1;break o}if(!(s=h[n+4>>2]))break u}if(!d[s+12|0]){r=n;break c}}a[r+12|0]=1,a[n+12|0]=0,s=h[r+4>>2],h[n>>2]=s,s&&(h[s+8>>2]=n),h[r+8>>2]=h[n+8>>2],s=h[n+8>>2],h[((h[s>>2]!=(0|n))<<2)+s>>2]=r,h[r+4>>2]=n,h[n+8>>2]=r,s=n}n=h[r+8>>2],a[r+12|0]=d[n+12|0],a[n+12|0]=1,a[s+12|0]=1,r=h[n+4>>2],s=h[r>>2],h[n+4>>2]=s,s&&(h[s+8>>2]=n),h[r+8>>2]=h[n+8>>2],s=h[n+8>>2],h[(((0|n)!=h[s>>2])<<2)+s>>2]=r,h[r>>2]=n,h[n+8>>2]=r;break o}s||(a[n+12|0]=1,a[r+12|0]=0,s=h[n+4>>2],h[r>>2]=s,s&&(h[s+8>>2]=r),h[n+8>>2]=h[r+8>>2],s=h[r+8>>2],h[(((0|r)!=h[s>>2])<<2)+s>>2]=n,h[n+4>>2]=r,h[r+8>>2]=n,o=(0|r)==(0|o)?n:o,n=h[r>>2]);c:if(!(s=h[n>>2])|d[s+12|0]){if(r=h[n+4>>2],d[r+12|0]||!r){if(a[n+12|0]=0,(0|(n=h[n+8>>2]))!=(0|o)&&d[n+12|0])break l;a[n+12|0]=1;break o}if(s){if(!d[s+12|0]){r=n;break c}r=h[n+4>>2]}a[r+12|0]=1,a[n+12|0]=0,s=h[r>>2],h[n+4>>2]=s,s&&(h[s+8>>2]=n),h[r+8>>2]=h[n+8>>2],s=h[n+8>>2],h[((h[s>>2]!=(0|n))<<2)+s>>2]=r,h[r>>2]=n,h[n+8>>2]=r,s=n}else r=n;n=h[r+8>>2],a[r+12|0]=d[n+12|0],a[n+12|0]=1,a[s+12|0]=1,r=h[n>>2],s=h[r+4>>2],h[n>>2]=s,s&&(h[s+8>>2]=n),h[r+8>>2]=h[n+8>>2],s=h[n+8>>2],h[(((0|n)!=h[s>>2])<<2)+s>>2]=r,h[r+4>>2]=n,h[n+8>>2]=r;break o}r=n,n=h[n+8>>2],n=h[(((0|r)==h[n>>2])<<2)+n>>2]}a[s+12|0]=1}(n=h[c+28>>2])&&(h[c+32>>2]=n,ve(n)),a[c+27|0]<0&&ve(h[c+16>>2]),ve(c)}h[l>>2]=0,h[l+4>>2]=0,h[l+8>>2]=0,ai(l,n=h[u+4>>2]-h[u>>2]|0),We(h[l>>2],h[u>>2],n),a[u+27|0]>=0?(h[l+24>>2]=h[u+24>>2],n=h[u+20>>2],h[l+16>>2]=h[u+16>>2],h[l+20>>2]=n):Bi(l+16|0,h[u+16>>2],h[u+20>>2]),h[l+36>>2]=0,h[l+28>>2]=0,h[l+32>>2]=0,ai(l+28|0,h[l+4>>2]-h[l>>2]|0),n=h[l>>2],We(h[l+28>>2],n,h[l+4>>2]-n|0),r=o=l+16|0;o:{l:{if(n=h[f+4>>2])for(g=(c=(s=d[r+11|0])<<24>>24<0)?h[r>>2]:r,c=c?h[r+4>>2]:s,r=f+4|0;;){c:{u:{h:{d:{f:{p:if(b=(_=(s=(m=(s=d[n+27|0])<<24>>24<0)?h[n+20>>2]:s)>>>0<c>>>0)?s:c){if(y=n+16|0,!(y=xi(g,m=m?h[y>>2]:y,b))){if(s>>>0>c>>>0)break p;break f}if((0|y)>=0)break f}else if(s>>>0<=c>>>0)break d;if(s=h[n>>2])break c;break l}if(s=xi(m,g,b))break h}if(_)break u;break o}if((0|s)>=0)break o}if(r=n+4|0,!(s=h[n+4>>2]))break o;n=r}r=n,n=s}n=f+4|0}r=n}if((s=h[r>>2])?n=0:(s=gn(40),h[s+24>>2]=h[o+8>>2],c=h[o+4>>2],h[s+16>>2]=h[o>>2],h[s+20>>2]=c,h[o>>2]=0,h[o+4>>2]=0,h[o+8>>2]=0,h[s+36>>2]=0,h[(c=s+28|0)>>2]=0,h[c+4>>2]=0,ai(c,h[o+16>>2]-h[o+12>>2]|0),We(g=h[c>>2],c=h[o+12>>2],h[o+16>>2]-c|0),h[s+8>>2]=n,h[s>>2]=0,h[s+4>>2]=0,h[r>>2]=s,(n=h[h[f>>2]>>2])?(h[f>>2]=n,n=h[r>>2]):n=s,Ke(h[f+4>>2],n),h[f+8>>2]=h[f+8>>2]+1,n=1),a[l+44|0]=n,h[l+40>>2]=s,(n=h[l+28>>2])&&(h[l+32>>2]=n,ve(n)),a[l+27|0]<0&&ve(h[l+16>>2]),(n=h[l>>2])&&(h[l+4>>2]=n,ve(n)),N=l+48|0,!(r=h[u>>2]))break s}h[u+4>>2]=r,ve(r)}}a[u+27|0]<0&&ve(h[u+16>>2]),N=u+32|0;break r}vr(),x()}if(!v)break t;if((0|A)==(0|(t=t+1|0)))break}if(h[i+12>>2]=0,!Ti(1,i+12|0,h[e>>2]))break t;if(t=h[e>>2],(s=(n=h[t+8>>2])-(r=h[t+16>>2])|0)>>>0<(o=h[i+12>>2])>>>0&(0|(t=h[t+12>>2]-(h[t+20>>2]+(n>>>0<r>>>0)|0)|0))<=0|(0|t)<0)break t;if(n=0,t=h[i+36>>2],o)for(;;){if((s=h[i+40>>2])>>>0>t>>>0)h[t+4>>2]=0,h[t>>2]=f,t=t+8|0,h[i+36>>2]=t;else{if((t=1+(c=(l=t-(r=h[i+32>>2])|0)>>3)|0)>>>0>=536870912)break n;if(v=(s=s-r|0)>>2,(t=s>>>0<2147483640?t>>>0>v>>>0?t:v:536870911)>>>0>=536870912)break i;g=c<<3,s=gn(c=t<<3),h[4+(t=g+s|0)>>2]=0,h[t>>2]=f,t=t+8|0,(0|l)>0&&We(s,r,l),h[i+40>>2]=s+c,h[i+36>>2]=t,h[i+32>>2]=s,r&&ve(r)}if((0|o)==(0|(n=n+1|0)))break}if(h[i+32>>2]==(0|t))break}e=1;break e}vr(),x()}Qi(1336),x()}t=h[i+32>>2],e=0}return t&&ve(t),N=i+48|0,e}function V(e,t,i,n,r){var s,o=0,l=0,c=0,f=0,m=0,g=0,v=0,b=0,_=0,y=0;N=s=N-32|0,h[t+32>>2]=n,h[t+40>>2]=i,h[t+4>>2]=r,ue(e,n,s+16|0);e:if(!h[e>>2])if(c=e+4|0,a[e+15|0]<0&&ve(h[c>>2]),n=d[s+23|0],(0|Rr[h[h[t>>2]+8>>2]](t))==(0|n))if(i=d[s+21|0],a[t+36|0]=i,r=d[s+22|0],a[t+37|0]=r,(i-3&255)>>>0<=253)t=gn(32),i=d[1571]|d[1572]<<8|d[1573]<<16|d[1574]<<24,n=d[1567]|d[1568]<<8|d[1569]<<16|d[1570]<<24,a[t+14|0]=n,a[t+15|0]=n>>>8,a[t+16|0]=n>>>16,a[t+17|0]=n>>>24,a[t+18|0]=i,a[t+19|0]=i>>>8,a[t+20|0]=i>>>16,a[t+21|0]=i>>>24,i=d[1565]|d[1566]<<8|d[1567]<<16|d[1568]<<24,n=d[1561]|d[1562]<<8|d[1563]<<16|d[1564]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1557]|d[1558]<<8|d[1559]<<16|d[1560]<<24,n=d[1553]|d[1554]<<8|d[1555]<<16|d[1556]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+22|0]=0,h[e>>2]=-5,Bi(c,t,22),ve(t);else if(2!=(0|i)|r>>>0<=(n?2:3)>>>0){if(i=r|i<<8,u[h[t+32>>2]+38>>1]=i,!((65535&i)>>>0<259|u[s+26>>1]>=0)){N=f=N-16|0,r=gn(36),h[(i=r)+4>>2]=0,h[i+8>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,h[(i=i+16|0)>>2]=0,h[i+4>>2]=0,h[r>>2]=r+4,h[r+32>>2]=0,h[r+12>>2]=i,h[f>>2]=0,n=h[t+32>>2],N=m=N-16|0,i=0;t:if(r&&(h[f>>2]=n,h[m+12>>2]=0,i=0,Ti(1,m+12|0,n))){if(b=h[m+12>>2])for(;;){i:{if(Ti(1,m+8|0,h[f>>2])){if(i=gn(28),h[i+4>>2]=0,h[i+8>>2]=0,h[(n=i+16|0)>>2]=0,h[n+4>>2]=0,h[i>>2]=i+4,h[i+12>>2]=n,h[i+24>>2]=h[m+8>>2],G(f,i))break i;an(i+12|0,h[i+16>>2]),pn(i,h[i+4>>2]),ve(i)}i=0;break t}if(N=o=N-16|0,h[o+8>>2]=i,i){if((n=h[r+28>>2])>>>0<p[r+32>>2])h[o+8>>2]=0,h[n>>2]=i,h[r+28>>2]=n+4;else{n=0;i:{n:{r:{if(l=h[r+24>>2],(i=1+(v=h[r+28>>2]-l>>2)|0)>>>0<1073741824){if(g=(l=h[r+32>>2]-l|0)>>1,i=l>>>0<2147483644?i>>>0>g>>>0?i:g:1073741823){if(i>>>0>=1073741824)break r;n=gn(i<<2)}if(g=h[o+8>>2],h[o+8>>2]=0,h[(l=(v<<2)+n|0)>>2]=g,v=(i<<2)+n|0,g=l+4|0,(0|(n=h[r+28>>2]))==(0|(i=h[r+24>>2])))break n;for(;y=h[(n=n-4|0)>>2],h[n>>2]=0,h[(l=l-4|0)>>2]=y,(0|i)!=(0|n););if(h[r+32>>2]=v,n=h[r+28>>2],h[r+28>>2]=g,i=h[r+24>>2],h[r+24>>2]=l,(0|i)==(0|n))break i;for(;l=h[(n=n-4|0)>>2],h[n>>2]=0,l&&(an(l+12|0,h[l+16>>2]),pn(l,h[l+4>>2]),ve(l)),(0|i)!=(0|n););break i}vr(),x()}Qi(1336),x()}h[r+32>>2]=v,h[r+28>>2]=g,h[r+24>>2]=l}i&&ve(i)}i=h[o+8>>2],h[o+8>>2]=0,i&&(an(i+12|0,h[i+16>>2]),pn(i,h[i+4>>2]),ve(i))}else h[o+8>>2]=0;if(N=o+16|0,(0|b)==(0|(_=_+1|0)))break}i=G(f,r)}if(N=m+16|0,i?(n=h[t+4>>2],i=h[n+4>>2],h[n+4>>2]=r,i&&Mi(i),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0):(i=gn(32),n=d[1723]|d[1724]<<8,a[i+24|0]=n,a[i+25|0]=n>>>8,n=d[1719]|d[1720]<<8|d[1721]<<16|d[1722]<<24,o=d[1715]|d[1716]<<8|d[1717]<<16|d[1718]<<24,a[i+16|0]=o,a[i+17|0]=o>>>8,a[i+18|0]=o>>>16,a[i+19|0]=o>>>24,a[i+20|0]=n,a[i+21|0]=n>>>8,a[i+22|0]=n>>>16,a[i+23|0]=n>>>24,n=d[1711]|d[1712]<<8|d[1713]<<16|d[1714]<<24,o=d[1707]|d[1708]<<8|d[1709]<<16|d[1710]<<24,a[i+8|0]=o,a[i+9|0]=o>>>8,a[i+10|0]=o>>>16,a[i+11|0]=o>>>24,a[i+12|0]=n,a[i+13|0]=n>>>8,a[i+14|0]=n>>>16,a[i+15|0]=n>>>24,n=d[1703]|d[1704]<<8|d[1705]<<16|d[1706]<<24,o=d[1699]|d[1700]<<8|d[1701]<<16|d[1702]<<24,a[0|i]=o,a[i+1|0]=o>>>8,a[i+2|0]=o>>>16,a[i+3|0]=o>>>24,a[i+4|0]=n,a[i+5|0]=n>>>8,a[i+6|0]=n>>>16,a[i+7|0]=n>>>24,a[i+26|0]=0,h[e>>2]=-1,Bi(e+4|0,i,26),ve(i),h[f+8>>2]=0,Mi(r)),N=f+16|0,h[e>>2])break e;a[c+11|0]>=0||ve(h[c>>2])}if(0|Rr[h[h[t>>2]+12>>2]](t))if(0|Rr[h[h[t>>2]+20>>2]](t))if(0|Rr[h[h[t>>2]+24>>2]](t))h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0;else{if(t=Wi(s,1461),h[e>>2]=-1,a[t+11|0]>=0){e=h[s+4>>2],h[c>>2]=h[s>>2],h[c+4>>2]=e,h[c+8>>2]=h[s+8>>2];break e}if(Bi(c,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break e;ve(h[t>>2])}else{if(t=Wi(s,1726),h[e>>2]=-1,a[t+11|0]>=0){e=h[s+4>>2],h[c>>2]=h[s>>2],h[c+4>>2]=e,h[c+8>>2]=h[s+8>>2];break e}if(Bi(c,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break e;ve(h[t>>2])}else t=gn(48),a[t+32|0]=d[1528],i=d[1524]|d[1525]<<8|d[1526]<<16|d[1527]<<24,n=d[1520]|d[1521]<<8|d[1522]<<16|d[1523]<<24,a[t+24|0]=n,a[t+25|0]=n>>>8,a[t+26|0]=n>>>16,a[t+27|0]=n>>>24,a[t+28|0]=i,a[t+29|0]=i>>>8,a[t+30|0]=i>>>16,a[t+31|0]=i>>>24,i=d[1516]|d[1517]<<8|d[1518]<<16|d[1519]<<24,n=d[1512]|d[1513]<<8|d[1514]<<16|d[1515]<<24,a[t+16|0]=n,a[t+17|0]=n>>>8,a[t+18|0]=n>>>16,a[t+19|0]=n>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1508]|d[1509]<<8|d[1510]<<16|d[1511]<<24,n=d[1504]|d[1505]<<8|d[1506]<<16|d[1507]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1500]|d[1501]<<8|d[1502]<<16|d[1503]<<24,n=d[1496]|d[1497]<<8|d[1498]<<16|d[1499]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+33|0]=0,h[e>>2]=-1,Bi(c,t,33),ve(t)}else t=gn(32),i=d[1548]|d[1549]<<8|d[1550]<<16|d[1551]<<24,n=d[1544]|d[1545]<<8|d[1546]<<16|d[1547]<<24,a[t+14|0]=n,a[t+15|0]=n>>>8,a[t+16|0]=n>>>16,a[t+17|0]=n>>>24,a[t+18|0]=i,a[t+19|0]=i>>>8,a[t+20|0]=i>>>16,a[t+21|0]=i>>>24,i=d[1542]|d[1543]<<8|d[1544]<<16|d[1545]<<24,n=d[1538]|d[1539]<<8|d[1540]<<16|d[1541]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1534]|d[1535]<<8|d[1536]<<16|d[1537]<<24,n=d[1530]|d[1531]<<8|d[1532]<<16|d[1533]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+22|0]=0,h[e>>2]=-5,Bi(c,t,22),ve(t);else t=gn(64),i=d[1458]|d[1459]<<8,a[t+48|0]=i,a[t+49|0]=i>>>8,i=d[1454]|d[1455]<<8|d[1456]<<16|d[1457]<<24,n=d[1450]|d[1451]<<8|d[1452]<<16|d[1453]<<24,a[t+40|0]=n,a[t+41|0]=n>>>8,a[t+42|0]=n>>>16,a[t+43|0]=n>>>24,a[t+44|0]=i,a[t+45|0]=i>>>8,a[t+46|0]=i>>>16,a[t+47|0]=i>>>24,i=d[1446]|d[1447]<<8|d[1448]<<16|d[1449]<<24,n=d[1442]|d[1443]<<8|d[1444]<<16|d[1445]<<24,a[t+32|0]=n,a[t+33|0]=n>>>8,a[t+34|0]=n>>>16,a[t+35|0]=n>>>24,a[t+36|0]=i,a[t+37|0]=i>>>8,a[t+38|0]=i>>>16,a[t+39|0]=i>>>24,i=d[1438]|d[1439]<<8|d[1440]<<16|d[1441]<<24,n=d[1434]|d[1435]<<8|d[1436]<<16|d[1437]<<24,a[t+24|0]=n,a[t+25|0]=n>>>8,a[t+26|0]=n>>>16,a[t+27|0]=n>>>24,a[t+28|0]=i,a[t+29|0]=i>>>8,a[t+30|0]=i>>>16,a[t+31|0]=i>>>24,i=d[1430]|d[1431]<<8|d[1432]<<16|d[1433]<<24,n=d[1426]|d[1427]<<8|d[1428]<<16|d[1429]<<24,a[t+16|0]=n,a[t+17|0]=n>>>8,a[t+18|0]=n>>>16,a[t+19|0]=n>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1422]|d[1423]<<8|d[1424]<<16|d[1425]<<24,n=d[1418]|d[1419]<<8|d[1420]<<16|d[1421]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1414]|d[1415]<<8|d[1416]<<16|d[1417]<<24,n=d[1410]|d[1411]<<8|d[1412]<<16|d[1413]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+50|0]=0,h[e>>2]=-1,Bi(c,t,50),ve(t);N=s+32|0}function z(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(a=h[t+12>>2],n=h[t+20>>2],n=(r=(l=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(r>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=l+h[t>>2]|0,h[e>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a=n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,c=l,h[t+16>>2]=l,h[t+20>>2]=n,p[e>>2]>32||(l=h[t+12>>2],n=a,n=(a=r+8|0)>>>0<8?n+1|0:n,a>>>0>p[t+8>>2]&(0|n)>=(0|l)|(0|n)>(0|l))))){if(n=c+h[t>>2]|0,o=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=o,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,!o)return 1;if(o=0,h[e+8>>2]=0,Tt(e+16|0,t)&&Tt(e+36|0,t)&&Tt(e+56|0,t)&&Tt(e+76|0,t)){E=h[e+4>>2],l=i,t=0,i=0,N=r=N-32|0,a=e,e=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=gn(n=e<<2),h[r+8>>2]=t,i=t+n|0,h[r+16>>2]=i,xt(t,0,n),h[r+12>>2]=i}n=h[a+120>>2],(o=h[n>>2])&&(h[n+4>>2]=o,ve(o),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=h[r+12>>2],t=h[r+8>>2],e=h[a+12>>2]),h[n+4>>2]=i,h[n>>2]=t,h[n+8>>2]=h[r+16>>2],t=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=gn(e<<=2),h[r+8>>2]=s,t=e+s|0,h[r+16>>2]=t,xt(s,0,e),h[r+12>>2]=t}e=h[a+132>>2],(i=h[e>>2])&&(h[e+4>>2]=i,ve(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=E,n=1,e=(t=h[r+28>>2])+1|0,h[r+28>>2]=e;n:if(!(e>>>0<t>>>0)){for(;;){if(u=h[r+12>>2],n=h[r+24>>2],i=h[u+((i=((t=n+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(i,341)|0,12)|0,t=h[i+8>>2],o=h[i+4>>2],c=h[i>>2],h[r+28>>2]=s,1+(((s=(i=h[r+16>>2])-u|0)?v(s>>2,341)-1|0:0)-(e+n|0)|0)>>>0>=682&&(ve(h[i-4>>2]),h[r+16>>2]=h[r+16>>2]-4),n=0,c>>>0>E>>>0)break n;if((s=(0|o)==((e=h[a+12>>2])-1|0)?0:o+1|0)>>>0>=e>>>0)break n;m=(f=v(t,12))+h[a+132>>2]|0,u=f+h[a+120>>2]|0;r:{a:{if(b=s<<2,!(i=h[a>>2]-h[b+h[m>>2]>>2]|0)){if(!c)break a;if(m=0,(0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=c+h[l+28>>2],h[a+8>>2]=e+c;break a}for(;;){o=0;s:if((0|e)!=(0|s))for(;;){if(n=v(o,20)+e|0,i=h[u>>2]+(h[n+4>>2]<<2)|0,f=h[n>>2],!((s=h[n+12>>2])>>>0>3))if(t=h[l+12>>2],h[n+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[n+12>>2])|0,(e=e+1|0)>>>0<p[n+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(m=m+1|0)))break a;e=h[l+16>>2],s=h[l+20>>2]}}s:{o:{l:{c:{if(c>>>0<=2){if(i=h[a+108>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break n;(0|(n=(e=h[a+120>>2])+(m=v(g=t+1|0,12))|0))!=(0|u)&&(Vt(n,h[u>>2],h[u+4>>2]),e=h[a+120>>2]),e=b+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1);u:if((0|(e=31^y(c)))<=(0|(o=32-(i=h[a+32>>2])|0))){if((0|(o=h[a+28>>2]))==h[a+20>>2]){n=0;break u}if(n=h[o>>2],u=e+i|0,h[a+32>>2]=u,n=n<<i>>>32-e|0,32!=(0|u))break u;h[a+32>>2]=0,h[a+28>>2]=o+4}else(0|(u=(n=h[a+28>>2])+4|0))!=h[a+20>>2]?(A=h[n>>2],h[a+28>>2]=u,o=e-o|0,h[a+32>>2]=o,n=h[n+4>>2]>>>32-o|A<<i>>>32-e):n=0;if((0|(n=c-(e=(c>>>1|0)-n|0)|0))!=(0|e)){if((0|(i=h[a+88>>2]))==h[a+80>>2])break l;o=h[i>>2],u=(c=h[a+92>>2])+1|0,h[a+92>>2]=u,o&=-2147483648>>>c;u:{if(32==(0|u)){if(h[a+92>>2]=0,h[a+88>>2]=i+4,o)break u;break l}if(!o)break l}}else n=e;o=n,n=e;break o}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break s}o=e}if(e=h[a+132>>2],c=h[(i=e+f|0)>>2],h[(u=c+b|0)>>2]=h[u>>2]+1,Vt(e+m|0,c,h[i+4>>2]),n&&(e=h[r+28>>2]+h[r+24>>2]|0,i=h[r+12>>2],(0|e)==(0|((c=h[r+16>>2]-i|0)?v(c>>2,341)-1|0:0))&&($e(r+8|0),i=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(c=i)+((i=(e>>>0)/341|0)<<2)>>2]+v(e-v(i,341)|0,12)|0,h[e+8>>2]=t,h[e+4>>2]=s,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!o)break a;e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((i=h[r+16>>2]-t|0)?v(i>>2,341)-1|0:0))&&($e(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=o,e=h[r+28>>2]+1|0,h[r+28>>2]=e;break r}if(b=0,c)for(;;){if(e)for(o=h[a+40>>2],n=h[a+96>>2],A=h[a+108>>2],S=h[u>>2],T=h[m>>2],e=0;;){h[n+(h[(s=A+(e<<2)|0)>>2]<<2)>>2]=0,i=h[s>>2]<<2;s:if(t=h[a>>2]-h[i+T>>2]|0)if(i=i+n|0,(0|(_=32-(f=h[a+52>>2])|0))>=(0|t)){if((0|(g=h[a+48>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[g>>2]<<f>>>32-t,t=t+h[a+52>>2]|0,h[a+52>>2]=t,32!=(0|t))break s;h[a+52>>2]=0,h[a+48>>2]=g+4}else(0|o)!=(0|(w=(g=h[a+48>>2])+4|0))?(M=h[g>>2],h[a+48>>2]=w,_=t-_|0,h[a+52>>2]=_,h[i>>2]=h[g+4>>2]>>>32-_|M<<f>>>32-t):h[i>>2]=0;if(t=h[s>>2]<<2,h[(i=t+n|0)>>2]=h[i>>2]|h[t+S>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;s:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(n=v(o,20)+e|0,i=h[a+96>>2]+(h[n+4>>2]<<2)|0,f=h[n>>2],!((s=h[n+12>>2])>>>0>3))if(t=h[l+12>>2],h[n+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[n+12>>2])|0,(e=e+1|0)>>>0<p[n+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(b=b+1|0)))break a;e=h[a+12>>2]}}e=h[r+28>>2]}if(!e)break}n=1}if(h[r+28>>2]=0,(t=(s=h[r+16>>2])-(e=h[r+12>>2])|0)>>>0>=9)for(;ve(h[e>>2]),e=h[r+12>>2]+4|0,h[r+12>>2]=e,(t=(s=h[r+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[r+24>>2]=i}if((0|e)!=(0|s)){for(;ve(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[r+16>>2]))!=(0|(t=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}o=n}}return o}function H(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(a=h[t+12>>2],n=h[t+20>>2],n=(r=(l=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(r>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=l+h[t>>2]|0,h[e>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a=n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,u=l,h[t+16>>2]=l,h[t+20>>2]=n,p[e>>2]>32||(l=h[t+12>>2],n=a,n=(a=r+8|0)>>>0<8?n+1|0:n,a>>>0>p[t+8>>2]&(0|n)>=(0|l)|(0|n)>(0|l))))){if(n=u+h[t>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=s,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,!s)return 1;if(s=0,h[e+8>>2]=0,Tt(e+16|0,t)&&Tt(e+36|0,t)&&Tt(e+56|0,t)&&Tt(e+76|0,t)){_=h[e+4>>2],l=i,t=0,i=0,N=r=N-32|0,a=e,e=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=gn(n=e<<2),h[r+8>>2]=t,i=t+n|0,h[r+16>>2]=i,xt(t,0,n),h[r+12>>2]=i}n=h[a+120>>2],(s=h[n>>2])&&(h[n+4>>2]=s,ve(s),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=h[r+12>>2],t=h[r+8>>2],e=h[a+12>>2]),h[n+4>>2]=i,h[n>>2]=t,h[n+8>>2]=h[r+16>>2],t=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;o=gn(e<<=2),h[r+8>>2]=o,t=e+o|0,h[r+16>>2]=t,xt(o,0,e),h[r+12>>2]=t}e=h[a+132>>2],(i=h[e>>2])&&(h[e+4>>2]=i,ve(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,o=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=o,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,n=1,e=(t=h[r+28>>2])+1|0,h[r+28>>2]=e;n:if(!(e>>>0<t>>>0)){for(;;){if(c=h[r+12>>2],n=h[r+24>>2],t=h[c+((i=((t=n+(o=e-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(i,341)|0,12)|0,i=h[t+8>>2],s=h[t+4>>2],u=h[t>>2],h[r+28>>2]=o,1+(((o=(t=h[r+16>>2])-c|0)?v(o>>2,341)-1|0:0)-(e+n|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[r+16>>2]=h[r+16>>2]-4),u>>>0>_>>>0){n=0;break n}if(n=0,(o=(0|s)==((e=h[a+12>>2])-1|0)?0:s+1|0)>>>0>=e>>>0)break n;m=(e=h[a+120>>2])+(t=v(i,12))|0;r:{a:{if(c=o<<2,A=t+h[a+132>>2]|0,!(s=h[a>>2]-h[c+h[A>>2]>>2]|0)){if(!u)break a;if((0|(e=h[l+16>>2]))==(0|(o=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=u+h[l+28>>2],h[a+8>>2]=e+u;break a}for(;;){s=0;s:if((0|e)!=(0|o))for(;;){if(c=v(s,20)+e|0,i=h[m>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((o=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,o))+(o=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),s=s+1|0,e=h[l+16>>2],!(s>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(n=n+1|0)))break a;e=h[l+16>>2],o=h[l+20>>2]}}s:{o:{l:{c:{if(u>>>0<=2){if(i=h[a+108>>2],h[i>>2]=o,t=1,(e=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break n;Vt((n=e)+(e=t+12|0)|0,h[m>>2],h[m+4>>2]),e=c+h[e+h[a+120>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<s-1);u:if((0|(e=31^y(u)))<=(0|(f=32-(n=h[a+32>>2])|0))){if((0|(s=h[a+28>>2]))==h[a+20>>2]){n=0;break u}if(f=h[s>>2],m=e+n|0,h[a+32>>2]=m,n=f<<n>>>32-e|0,32!=(0|m))break u;h[a+32>>2]=0,h[a+28>>2]=s+4}else(0|(m=(s=h[a+28>>2])+4|0))!=h[a+20>>2]?(g=h[s>>2],h[a+28>>2]=m,f=e-f|0,h[a+32>>2]=f,n=h[s+4>>2]>>>32-f|g<<n>>>32-e):n=0;if(f=i+1|0,(0|(n=u-(e=(u>>>1|0)-n|0)|0))!=(0|e)){if((0|(s=h[a+88>>2]))==h[a+80>>2])break l;u=h[s>>2],g=(m=h[a+92>>2])+1|0,h[a+92>>2]=g,u&=-2147483648>>>m;u:{if(32==(0|g)){if(h[a+92>>2]=0,h[a+88>>2]=s+4,u)break u;break l}if(!u)break l}}else n=e;s=n,n=e;break o}for(;o=(e-1|0)==(0|o)?0:o+1|0,h[i+(t<<2)>>2]=o,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break s}s=e}if(e=h[a+132>>2],u=h[(t=e+t|0)>>2],h[(c=u+c|0)>>2]=h[c>>2]+1,Vt(e+v(f,12)|0,u,h[t+4>>2]),n&&(e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((u=h[r+16>>2]-t|0)?v(u>>2,341)-1|0:0))&&($e(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(u=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=o,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!s)break a;e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((i=h[r+16>>2]-t|0)?v(i>>2,341)-1|0:0))&&($e(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=o,h[e>>2]=s,e=h[r+28>>2]+1|0,h[r+28>>2]=e;break r}if(u)for(;;){if(e)for(o=h[a+40>>2],s=h[a+96>>2],w=h[a+108>>2],S=h[m>>2],T=h[A>>2],e=0;;){h[s+(h[(c=(e<<2)+w|0)>>2]<<2)>>2]=0,i=h[c>>2]<<2;s:if(t=h[a>>2]-h[i+T>>2]|0)if(i=i+s|0,(0|(b=32-(f=h[a+52>>2])|0))>=(0|t)){if((0|(g=h[a+48>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[g>>2]<<f>>>32-t,t=t+h[a+52>>2]|0,h[a+52>>2]=t,32!=(0|t))break s;h[a+52>>2]=0,h[a+48>>2]=g+4}else(0|o)!=(0|(E=(g=h[a+48>>2])+4|0))?(M=h[g>>2],h[a+48>>2]=E,b=t-b|0,h[a+52>>2]=b,h[i>>2]=h[g+4>>2]>>>32-b|M<<f>>>32-t):h[i>>2]=0;if(t=h[c>>2]<<2,h[(i=t+s|0)>>2]=h[i>>2]|h[t+S>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}s=0;s:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(c=v(s,20)+e|0,i=h[a+96>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((o=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,o))+(o=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break s;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),s=s+1|0,e=h[l+16>>2],!(s>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(n=n+1|0)))break a;e=h[a+12>>2]}}e=h[r+28>>2]}if(!e)break}n=1}if(h[r+28>>2]=0,(t=(o=h[r+16>>2])-(e=h[r+12>>2])|0)>>>0>=9)for(;ve(h[e>>2]),e=h[r+12>>2]+4|0,h[r+12>>2]=e,(t=(o=h[r+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[r+24>>2]=i}if((0|e)!=(0|o)){for(;ve(h[e>>2]),(0|o)!=(0|(e=e+4|0)););(0|(e=h[r+16>>2]))!=(0|(t=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}s=n}}return s}function j(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0;if(a=h[t+12>>2],n=h[t+20>>2],n=(r=(l=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!(r>>>0>p[t+8>>2]&(0|n)>=(0|a)|(0|n)>(0|a)||(n=l+h[t>>2]|0,h[e>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,a=n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,c=l,h[t+16>>2]=l,h[t+20>>2]=n,p[e>>2]>32||(l=h[t+12>>2],n=a,n=(a=r+8|0)>>>0<8?n+1|0:n,a>>>0>p[t+8>>2]&(0|n)>=(0|l)|(0|n)>(0|l))))){if(n=c+h[t>>2]|0,o=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=o,n=h[t+20>>2],n=(a=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,!o)return 1;if(o=0,h[e+8>>2]=0,He(e+16|0,t)&&Tt(e+32|0,t)&&Tt(e+52|0,t)&&Tt(e+72|0,t)){A=h[e+4>>2],l=i,t=0,i=0,N=r=N-32|0,a=e,e=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=gn(n=e<<2),h[r+8>>2]=t,i=t+n|0,h[r+16>>2]=i,xt(t,0,n),h[r+12>>2]=i}n=h[a+116>>2],(o=h[n>>2])&&(h[n+4>>2]=o,ve(o),h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,i=h[r+12>>2],t=h[r+8>>2],e=h[a+12>>2]),h[n+4>>2]=i,h[n>>2]=t,h[n+8>>2]=h[r+16>>2],t=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=gn(e<<=2),h[r+8>>2]=s,t=e+s|0,h[r+16>>2]=t,xt(s,0,e),h[r+12>>2]=t}e=h[a+128>>2],(i=h[e>>2])&&(h[e+4>>2]=i,ve(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,n=1,e=(t=h[r+28>>2])+1|0,h[r+28>>2]=e;n:if(!(e>>>0<t>>>0)){for(w=a+16|0;;){if(f=h[r+12>>2],n=h[r+24>>2],i=h[f+((i=((t=n+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(i,341)|0,12)|0,t=h[i+8>>2],o=h[i+4>>2],c=h[i>>2],h[r+28>>2]=s,1+(((s=(i=h[r+16>>2])-f|0)?v(s>>2,341)-1|0:0)-(e+n|0)|0)>>>0>=682&&(ve(h[i-4>>2]),h[r+16>>2]=h[r+16>>2]-4),n=0,c>>>0>A>>>0)break n;if((s=((e=h[a+12>>2])-1|0)==(0|o)?0:o+1|0)>>>0>=e>>>0)break n;m=(i=v(t,12))+h[a+128>>2]|0,f=i+h[a+116>>2]|0;r:{if(u=s<<2,!(o=h[a>>2]-h[u+h[m>>2]>>2]|0)){if(!c)break r;if(m=0,(0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=c+h[l+28>>2],h[a+8>>2]=e+c;break r}for(;;){o=0;a:if((0|e)!=(0|s))for(;;){if(n=v(o,20)+e|0,i=h[f>>2]+(h[n+4>>2]<<2)|0,u=h[n>>2],!((s=h[n+12>>2])>>>0>3))if(t=h[l+12>>2],h[n+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[n+12>>2])|0,(e=e+1|0)>>>0<p[n+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[u+84|0]?e:h[h[u+68>>2]+(e<<2)>>2])>>>0>=p[u+80>>2])break a;if(t=e,e=h[u+40>>2],We(h[h[u>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(m=m+1|0)))break r;e=h[l+16>>2],s=h[l+20>>2]}}a:{s:{o:{l:{if(c>>>0<=2){if(i=h[a+104>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break l;break a}if(p[a+8>>2]>p[a+4>>2])break n;if((0|(n=(e=h[a+116>>2])+(m=v(b=t+1|0,12))|0))!=(0|f)&&(Vt(n,h[f>>2],h[f+4>>2]),e=h[a+116>>2]),e=u+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<o-1),h[r+4>>2]=0,mi(w,31^y(c),r+4|0),(0|(n=c-(e=(c>>>1|0)-h[r+4>>2]|0)|0))!=(0|e)){if((0|(o=h[a+84>>2]))==h[a+76>>2])break o;c=h[o>>2],g=(f=h[a+88>>2])+1|0,h[a+88>>2]=g,c&=-2147483648>>>f;c:{if(32==(0|g)){if(h[a+88>>2]=0,h[a+84>>2]=o+4,c)break c;break o}if(!c)break o}}else n=e;o=n,n=e;break s}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break a}o=e}if(e=h[a+128>>2],c=h[(i=e+i|0)>>2],h[(f=c+u|0)>>2]=h[f>>2]+1,Vt(e+m|0,c,h[i+4>>2]),n&&(e=h[r+28>>2]+h[r+24>>2]|0,i=h[r+12>>2],(0|e)==(0|((c=h[r+16>>2]-i|0)?v(c>>2,341)-1|0:0))&&($e(r+8|0),i=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(c=i)+((i=(e>>>0)/341|0)<<2)>>2]+v(e-v(i,341)|0,12)|0,h[e+8>>2]=t,h[e+4>>2]=s,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!o)break r;e=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|e)==(0|((i=h[r+16>>2]-t|0)?v(i>>2,341)-1|0:0))&&($e(r+8|0),t=h[r+12>>2],e=h[r+24>>2]+h[r+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=b,h[e+4>>2]=s,h[e>>2]=o,h[r+28>>2]=h[r+28>>2]+1;break r}if(b=0,c)for(;;){if(e)for(o=h[a+36>>2],n=h[a+92>>2],S=h[a+104>>2],T=h[f>>2],M=h[m>>2],e=0;;){h[n+(h[(s=(e<<2)+S|0)>>2]<<2)>>2]=0,i=h[s>>2]<<2;a:if(t=h[a>>2]-h[i+M>>2]|0)if(i=i+n|0,(0|(_=32-(u=h[a+48>>2])|0))>=(0|t)){if((0|(g=h[a+44>>2]))==(0|o)){h[i>>2]=0;break a}if(h[i>>2]=h[g>>2]<<u>>>32-t,t=t+h[a+48>>2]|0,h[a+48>>2]=t,32!=(0|t))break a;h[a+48>>2]=0,h[a+44>>2]=g+4}else(0|o)!=(0|(E=(g=h[a+44>>2])+4|0))?(R=h[g>>2],h[a+44>>2]=E,_=t-_|0,h[a+48>>2]=_,h[i>>2]=h[g+4>>2]>>>32-_|R<<u>>>32-t):h[i>>2]=0;if(t=h[s>>2]<<2,h[(i=t+n|0)>>2]=h[i>>2]|h[t+T>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;a:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(n=v(o,20)+e|0,i=h[a+92>>2]+(h[n+4>>2]<<2)|0,u=h[n>>2],!((s=h[n+12>>2])>>>0>3))if(t=h[l+12>>2],h[n+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[n+12>>2])|0,(e=e+1|0)>>>0<p[n+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[u+84|0]?e:h[h[u+68>>2]+(e<<2)>>2])>>>0>=p[u+80>>2])break a;if(t=e,e=h[u+40>>2],We(h[h[u>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|c)==(0|(b=b+1|0)))break r;e=h[a+12>>2]}}if(!(e=h[r+28>>2]))break}n=1}if(h[r+28>>2]=0,(t=(s=h[r+16>>2])-(e=h[r+12>>2])|0)>>>0>=9)for(;ve(h[e>>2]),e=h[r+12>>2]+4|0,h[r+12>>2]=e,(t=(s=h[r+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[r+24>>2]=i}if((0|e)!=(0|s)){for(;ve(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[r+16>>2]))!=(0|(t=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}o=n}}return o}function W(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(o=h[t+12>>2],a=h[t+20>>2],a=(s=(r=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,!(s>>>0>p[t+8>>2]&(0|a)>=(0|o)|(0|a)>(0|o)||(a=r+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,o=a=h[t+20>>2],a=(r=(s=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,l=r,h[t+16>>2]=r,h[t+20>>2]=a,p[e>>2]>32||(a=o,(0|(r=h[t+12>>2]))<=(0|(a=(o=s+8|0)>>>0<8?a+1|0:a))&o>>>0>p[t+8>>2]|(0|r)<(0|a))))){if(n=l+h[t>>2]|0,a=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=a,n=h[t+20>>2],n=(o=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,!a)return 1;if(n=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){A=h[e+4>>2],o=i,i=0,t=0,N=r=N-32|0,a=e,n=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(n){if(n>>>0>=1073741824)break t;i=gn(e=n<<2),h[r+8>>2]=i,t=e+i|0,h[r+16>>2]=t,xt(i,0,e),h[r+12>>2]=t}e=h[a+628>>2],(s=h[e>>2])&&(h[e+4>>2]=s,ve(s),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=h[a+12>>2],i=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=i,h[e+8>>2]=h[r+16>>2],i=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,s=0;i:{if(n){if(n>>>0>=1073741824)break i;s=gn(e=n<<2),h[r+8>>2]=s,i=e+s|0,h[r+16>>2]=i,xt(s,0,e),h[r+12>>2]=i}e=h[a+640>>2],(t=h[e>>2])&&(h[e+4>>2]=t,ve(t),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[r+8>>2],i=h[r+12>>2]),h[e+4>>2]=i,h[e>>2]=s,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,t=1,n=(e=h[r+28>>2])+1|0,h[r+28>>2]=n;n:if(!(e>>>0>n>>>0)){for(;;){if(f=h[r+12>>2],t=h[r+24>>2],e=h[f+((i=((e=t+(s=n-1|0)|0)>>>0)/341|0)<<2)>>2]+v(e-v(i,341)|0,12)|0,c=h[e+8>>2],i=h[e+4>>2],l=h[e>>2],h[r+28>>2]=s,1+(((s=(e=h[r+16>>2])-f|0)?v(s>>2,341)-1|0:0)-(t+n|0)|0)>>>0>=682&&(ve(h[e-4>>2]),h[r+16>>2]=h[r+16>>2]-4),t=0,l>>>0>A>>>0)break n;if((s=((e=h[a+12>>2])-1|0)==(0|i)?0:i+1|0)>>>0>=e>>>0)break n;m=(u=v(c,12))+h[a+640>>2]|0,f=u+h[a+628>>2]|0;r:{a:if(b=s<<2,i=h[a>>2]-h[b+h[m>>2]>>2]|0){s:{o:{l:{c:{if(l>>>0<=2){if(e=h[a+616>>2],h[e>>2]=s,i=1,(n=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break n;if((0|(t=(e=h[a+628>>2])+(m=v(g=c+1|0,12))|0))!=(0|f)&&(Vt(t,h[f>>2],h[f+4>>2]),e=h[a+628>>2]),e=b+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1),i=0,n=0,e=31^y(l))for(;i=Gi(16+((n<<4)+a|0)|0)|i<<1,(0|e)!=(0|(n=n+1|0)););if((0|(n=l-(e=(l>>>1|0)-i|0)|0))!=(0|e)){if((0|(t=h[a+596>>2]))==h[a+588>>2])break l;i=h[t>>2],f=(l=h[a+600>>2])+1|0,h[a+600>>2]=f,i&=-2147483648>>>l;u:{if(32==(0|f)){if(h[a+600>>2]=0,h[a+596>>2]=t+4,i)break u;break l}if(!i)break l}t=n}else t=e;n=e;break o}for(;s=(n-1|0)==(0|s)?0:s+1|0,h[e+(i<<2)>>2]=s,(i=i+1|0)>>>0<(n=h[a+12>>2])>>>0;);break s}t=e}if(e=h[a+640>>2],l=h[(i=e+u|0)>>2],h[(f=l+b|0)>>2]=h[f>>2]+1,Vt(e+m|0,l,h[i+4>>2]),n&&(i=h[r+28>>2]+h[r+24>>2]|0,e=h[r+12>>2],(0|i)==(0|((l=h[r+16>>2]-e|0)?v(l>>2,341)-1|0:0))?($e(r+8|0),i=h[r+24>>2]+h[r+28>>2]|0,l=h[r+12>>2]):l=e,e=h[l+((e=(i>>>0)/341|0)<<2)>>2]+v(i-v(e,341)|0,12)|0,h[e+8>>2]=c,h[e+4>>2]=s,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!t)break a;n=h[r+28>>2]+h[r+24>>2]|0,i=h[r+12>>2],(0|n)==(0|((e=h[r+16>>2]-i|0)?v(e>>2,341)-1|0:0))&&($e(r+8|0),n=h[r+24>>2]+h[r+28>>2]|0,i=h[r+12>>2]),e=h[i+((e=(n>>>0)/341|0)<<2)>>2]+v(n-v(e,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=t,n=h[r+28>>2]+1|0,h[r+28>>2]=n;break r}if(b=0,l)for(;;){if(n)for(s=h[a+548>>2],i=h[a+604>>2],w=h[a+616>>2],S=h[f>>2],T=h[m>>2],n=0;;){h[i+(h[(c=(n<<2)+w|0)>>2]<<2)>>2]=0,t=h[c>>2]<<2;s:if(e=h[a>>2]-h[t+T>>2]|0)if(t=t+i|0,(0|(_=32-(u=h[a+560>>2])|0))>=(0|e)){if((0|(g=h[a+556>>2]))==(0|s)){h[t>>2]=0;break s}if(h[t>>2]=h[g>>2]<<u>>>32-e,e=e+h[a+560>>2]|0,h[a+560>>2]=e,32!=(0|e))break s;h[a+560>>2]=0,h[a+556>>2]=g+4}else(0|s)!=(0|(E=(g=h[a+556>>2])+4|0))?(M=h[g>>2],h[a+556>>2]=E,_=e-_|0,h[a+560>>2]=_,h[t>>2]=h[g+4>>2]>>>32-_|M<<u>>>32-e):h[t>>2]=0;if(e=h[c>>2]<<2,h[(t=e+i|0)>>2]=h[t>>2]|h[e+S>>2],!((n=n+1|0)>>>0<p[a+12>>2]))break}e=0;s:if((0|(n=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=v(e,20)+n|0,t=h[a+604>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(n=0;i=(i=We(i,(n<<2)+t|0,s))+(s=h[c+12>>2])|0,(n=n+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(n=h[o+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+v(i,n)|0,t,i),e=e+1|0,n=h[o+16>>2],!(e>>>0<(h[o+20>>2]-n|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(b=b+1|0)))break a;n=h[a+12>>2]}}else{if(m=0,!l)break a;for(;;){e=0;s:if((0|(n=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=v(e,20)+n|0,t=h[f>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(n=0;i=(i=We(i,(n<<2)+t|0,s))+(s=h[c+12>>2])|0,(n=n+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(n=h[o+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+v(i,n)|0,t,i),e=e+1|0,n=h[o+16>>2],!(e>>>0<(h[o+20>>2]-n|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(m=m+1|0)))break}}n=h[r+28>>2]}if(!n)break}t=1}if(h[r+28>>2]=0,(i=(s=h[r+16>>2])-(n=h[r+12>>2])|0)>>>0>=9)for(;ve(h[n>>2]),n=h[r+12>>2]+4|0,h[r+12>>2]=n,(i=(s=h[r+16>>2])-n|0)>>>0>8;);switch(e=170,(i>>>2|0)-1|0){case 1:e=341;case 0:h[r+24>>2]=e}if((0|n)!=(0|s)){for(;ve(h[n>>2]),(0|s)!=(0|(n=n+4|0)););(0|(e=h[r+16>>2]))!=(0|(i=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-i|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}n=t}}return n}function Y(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0;if(a=h[t+12>>2],r=h[t+20>>2],r=(n=(l=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,!(n>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a)||(r=l+h[t>>2]|0,h[e>>2]=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,a=r=h[t+20>>2],r=(l=(n=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,u=l,h[t+16>>2]=l,h[t+20>>2]=r,p[e>>2]>32||(l=h[t+12>>2],r=a,r=(a=n+8|0)>>>0<8?r+1|0:r,a>>>0>p[t+8>>2]&(0|r)>=(0|l)|(0|r)>(0|l))))){if(r=u+h[t>>2]|0,o=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[e+4>>2]=o,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r,!o)return 1;if(o=0,h[e+8>>2]=0,He(e+16|0,t)&&Tt(e+32|0,t)&&Tt(e+52|0,t)&&Tt(e+72|0,t)){_=h[e+4>>2],l=i,t=0,i=0,N=n=N-32|0,a=e,e=h[e+12>>2],h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;e:{t:{if(e){if(e>>>0>=1073741824)break t;t=gn(r=e<<2),h[n+8>>2]=t,i=t+r|0,h[n+16>>2]=i,xt(t,0,r),h[n+12>>2]=i}r=h[a+116>>2],(o=h[r>>2])&&(h[r+4>>2]=o,ve(o),h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=h[n+12>>2],t=h[n+8>>2],e=h[a+12>>2]),h[r+4>>2]=i,h[r>>2]=t,h[r+8>>2]=h[n+16>>2],t=0,h[n+16>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0;i:{if(e){if(e>>>0>=1073741824)break i;s=gn(e<<=2),h[n+8>>2]=s,t=e+s|0,h[n+16>>2]=t,xt(s,0,e),h[n+12>>2]=t}e=h[a+128>>2],(i=h[e>>2])&&(h[e+4>>2]=i,ve(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[n+8>>2],t=h[n+12>>2]),h[e+4>>2]=t,h[e>>2]=s,h[e+8>>2]=h[n+16>>2],h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,$e(n+8|0),t=((e=h[n+24>>2]+h[n+28>>2]|0)>>>0)/341|0,e=h[h[n+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,r=1,e=(t=h[n+28>>2])+1|0,h[n+28>>2]=e;n:if(!(e>>>0<t>>>0)){for(w=a+16|0;;){if(c=h[n+12>>2],r=h[n+24>>2],t=h[c+((i=((t=r+(s=e-1|0)|0)>>>0)/341|0)<<2)>>2]+v(t-v(i,341)|0,12)|0,i=h[t+8>>2],o=h[t+4>>2],u=h[t>>2],h[n+28>>2]=s,1+(((s=(t=h[n+16>>2])-c|0)?v(s>>2,341)-1|0:0)-(e+r|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[n+16>>2]=h[n+16>>2]-4),u>>>0>_>>>0){r=0;break n}if(r=0,(s=(0|o)==((e=h[a+12>>2])-1|0)?0:o+1|0)>>>0>=e>>>0)break n;g=(e=h[a+116>>2])+(t=v(i,12))|0;r:{if(c=s<<2,A=t+h[a+128>>2]|0,!(o=h[a>>2]-h[c+h[A>>2]>>2]|0)){if(!u)break r;if((0|(e=h[l+16>>2]))==(0|(s=h[l+20>>2]))){e=h[a+8>>2],h[l+28>>2]=u+h[l+28>>2],h[a+8>>2]=e+u;break r}for(;;){o=0;a:if((0|e)!=(0|s))for(;;){if(c=v(o,20)+e|0,i=h[g>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break a;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(r=r+1|0)))break r;e=h[l+16>>2],s=h[l+20>>2]}}a:{s:{o:{l:{if(u>>>0<=2){if(i=h[a+104>>2],h[i>>2]=s,t=1,(e=h[a+12>>2])>>>0>1)break l;break a}if(p[a+8>>2]>p[a+4>>2])break n;if(Vt((r=e)+(e=t+12|0)|0,h[g>>2],h[g+4>>2]),e=c+h[e+h[a+116>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<o-1),h[n+4>>2]=0,mi(w,31^y(u),n+4|0),f=i+1|0,(0|(r=u-(e=(u>>>1|0)-h[n+4>>2]|0)|0))!=(0|e)){if((0|(o=h[a+84>>2]))==h[a+76>>2])break o;u=h[o>>2],m=(g=h[a+88>>2])+1|0,h[a+88>>2]=m,u&=-2147483648>>>g;c:{if(32==(0|m)){if(h[a+88>>2]=0,h[a+84>>2]=o+4,u)break c;break o}if(!u)break o}}else r=e;o=r,r=e;break s}for(;s=(e-1|0)==(0|s)?0:s+1|0,h[i+(t<<2)>>2]=s,(e=h[a+12>>2])>>>0>(t=t+1|0)>>>0;);break a}o=e}if(e=h[a+128>>2],u=h[(t=e+t|0)>>2],h[(c=u+c|0)>>2]=h[c>>2]+1,Vt(e+v(f,12)|0,u,h[t+4>>2]),r&&(e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((u=h[n+16>>2]-t|0)?v(u>>2,341)-1|0:0))&&($e(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(u=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=s,h[e>>2]=r,h[n+28>>2]=h[n+28>>2]+1),!o)break r;e=h[n+28>>2]+h[n+24>>2]|0,t=h[n+12>>2],(0|e)==(0|((i=h[n+16>>2]-t|0)?v(i>>2,341)-1|0:0))&&($e(n+8|0),t=h[n+12>>2],e=h[n+24>>2]+h[n+28>>2]|0),e=h[(i=t)+((t=(e>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=s,h[e>>2]=o,h[n+28>>2]=h[n+28>>2]+1;break r}if(u)for(;;){if(e)for(s=h[a+36>>2],o=h[a+92>>2],S=h[a+104>>2],T=h[g>>2],M=h[A>>2],e=0;;){h[o+(h[(c=(e<<2)+S|0)>>2]<<2)>>2]=0,i=h[c>>2]<<2;a:if(t=h[a>>2]-h[i+M>>2]|0)if(i=i+o|0,(0|(b=32-(f=h[a+48>>2])|0))>=(0|t)){if((0|(m=h[a+44>>2]))==(0|s)){h[i>>2]=0;break a}if(h[i>>2]=h[m>>2]<<f>>>32-t,t=t+h[a+48>>2]|0,h[a+48>>2]=t,32!=(0|t))break a;h[a+48>>2]=0,h[a+44>>2]=m+4}else(0|s)!=(0|(E=(m=h[a+44>>2])+4|0))?(R=h[m>>2],h[a+44>>2]=E,b=t-b|0,h[a+48>>2]=b,h[i>>2]=h[m+4>>2]>>>32-b|R<<f>>>32-t):h[i>>2]=0;if(t=h[c>>2]<<2,h[(i=t+o|0)>>2]=h[i>>2]|h[t+T>>2],!((e=e+1|0)>>>0<p[a+12>>2]))break}o=0;a:if((0|(e=h[l+16>>2]))!=h[l+20>>2])for(;;){if(c=v(o,20)+e|0,i=h[a+92>>2]+(h[c+4>>2]<<2)|0,f=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(t=h[l+12>>2],h[c+16>>2]){for(e=0;t=(t=We(t,(e<<2)+i|0,s))+(s=h[c+12>>2])|0,(e=e+1|0)>>>0<p[c+16>>2];);i=h[l+12>>2]}else i=t;if(e=h[l+28>>2],(e=d[f+84|0]?e:h[h[f+68>>2]+(e<<2)>>2])>>>0>=p[f+80>>2])break a;if(t=e,e=h[f+40>>2],We(h[h[f>>2]>>2]+v(t,e)|0,i,e),o=o+1|0,e=h[l+16>>2],!(o>>>0<(h[l+20>>2]-e|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|u)==(0|(r=r+1|0)))break r;e=h[a+12>>2]}}if(!(e=h[n+28>>2]))break}r=1}if(h[n+28>>2]=0,(t=(s=h[n+16>>2])-(e=h[n+12>>2])|0)>>>0>=9)for(;ve(h[e>>2]),e=h[n+12>>2]+4|0,h[n+12>>2]=e,(t=(s=h[n+16>>2])-e|0)>>>0>8;);switch(i=170,(t>>>2|0)-1|0){case 1:i=341;case 0:h[n+24>>2]=i}if((0|e)!=(0|s)){for(;ve(h[e>>2]),(0|s)!=(0|(e=e+4|0)););(0|(e=h[n+16>>2]))!=(0|(t=h[n+12>>2]))&&(h[n+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[n+8>>2])&&ve(e),N=n+32|0;break e}vr(),x()}vr(),x()}o=r}}return o}function X(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(s=h[t+12>>2],a=h[t+20>>2],!((0|s)<=(0|(a=(r=(l=h[t+16>>2])+4|0)>>>0<4?a+1|0:a))&r>>>0>p[t+8>>2]|(0|s)<(0|a)||(a=l+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,s=a=h[t+20>>2],a=(l=(r=h[t+16>>2])+4|0)>>>0<4?s+1|0:s,c=l,h[t+16>>2]=l,h[t+20>>2]=a,p[e>>2]>32||(l=h[t+12>>2],a=s,a=(s=r+8|0)>>>0<8?a+1|0:a,s>>>0>p[t+8>>2]&(0|a)>=(0|l)|(0|a)>(0|l))))){if(n=c+h[t>>2]|0,a=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=a,n=h[t+20>>2],n=(s=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=s,h[t+20>>2]=n,!a)return 1;if(n=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){_=h[e+4>>2],l=i,t=0,i=0,N=r=N-32|0,s=e,n=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(n){if(n>>>0>=1073741824)break t;t=gn(e=n<<2),h[r+8>>2]=t,i=e+t|0,h[r+16>>2]=i,xt(t,0,e),h[r+12>>2]=i}e=h[s+628>>2],(a=h[e>>2])&&(h[e+4>>2]=a,ve(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=h[s+12>>2],i=h[r+12>>2],t=h[r+8>>2]),h[e+4>>2]=i,h[e>>2]=t,h[e+8>>2]=h[r+16>>2],t=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;i:{if(n){if(n>>>0>=1073741824)break i;o=gn(e=n<<2),h[r+8>>2]=o,t=e+o|0,h[r+16>>2]=t,xt(o,0,e),h[r+12>>2]=t}e=h[s+640>>2],(i=h[e>>2])&&(h[e+4>>2]=i,ve(i),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,o=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=o,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=_,i=1,n=(e=h[r+28>>2])+1|0,h[r+28>>2]=n;n:if(!(e>>>0>n>>>0)){for(;;){if(o=h[r+12>>2],i=h[r+24>>2],e=h[o+((t=((e=i+(a=n-1|0)|0)>>>0)/341|0)<<2)>>2]+v(e-v(t,341)|0,12)|0,f=h[e+8>>2],t=h[e+4>>2],c=h[e>>2],h[r+28>>2]=a,1+(((a=(e=h[r+16>>2])-o|0)?v(a>>2,341)-1|0:0)-(i+n|0)|0)>>>0>=682&&(ve(h[e-4>>2]),h[r+16>>2]=h[r+16>>2]-4),c>>>0>_>>>0){i=0;break n}if(i=0,(o=(0|t)==((e=h[s+12>>2])-1|0)?0:t+1|0)>>>0>=e>>>0)break n;g=(e=h[s+628>>2])+(u=v(f,12))|0;r:{a:if(m=o<<2,A=u+h[s+640>>2]|0,t=h[s>>2]-h[m+h[A>>2]>>2]|0){s:{o:{l:{c:{if(c>>>0<=2){if(e=h[s+616>>2],h[e>>2]=o,t=1,(n=h[s+12>>2])>>>0>1)break c;break s}if(p[s+8>>2]>p[s+4>>2])break n;if(Vt((i=e)+(e=u+12|0)|0,h[g>>2],h[g+4>>2]),e=m+h[e+h[s+628>>2]>>2]|0,h[e>>2]=h[e>>2]+(1<<t-1),t=0,n=0,e=31^y(c))for(;t=Gi(16+((n<<4)+s|0)|0)|t<<1,(0|e)!=(0|(n=n+1|0)););if(i=f+1|0,(0|(n=c-(e=(c>>>1|0)-t|0)|0))!=(0|e)){if((0|(t=h[s+596>>2]))==h[s+588>>2])break l;a=h[t>>2],g=(c=h[s+600>>2])+1|0,h[s+600>>2]=g,a&=-2147483648>>>c;u:{if(32==(0|g)){if(h[s+600>>2]=0,h[s+596>>2]=t+4,a)break u;break l}if(!a)break l}}else n=e;a=n,n=e;break o}for(;o=(n-1|0)==(0|o)?0:o+1|0,h[e+(t<<2)>>2]=o,(t=t+1|0)>>>0<(n=h[s+12>>2])>>>0;);break s}a=e}if(e=h[s+640>>2],c=h[(t=e+u|0)>>2],h[(u=c+m|0)>>2]=h[u>>2]+1,Vt(e+v(i,12)|0,c,h[t+4>>2]),n&&(t=h[r+28>>2]+h[r+24>>2]|0,e=h[r+12>>2],(0|t)==(0|((c=h[r+16>>2]-e|0)?v(c>>2,341)-1|0:0))?($e(r+8|0),t=h[r+24>>2]+h[r+28>>2]|0,c=h[r+12>>2]):c=e,e=h[c+((e=(t>>>0)/341|0)<<2)>>2]+v(t-v(e,341)|0,12)|0,h[e+8>>2]=f,h[e+4>>2]=o,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!a)break a;n=h[r+28>>2]+h[r+24>>2]|0,t=h[r+12>>2],(0|n)==(0|((e=h[r+16>>2]-t|0)?v(e>>2,341)-1|0:0))&&($e(r+8|0),n=h[r+24>>2]+h[r+28>>2]|0,t=h[r+12>>2]),e=h[t+((e=(n>>>0)/341|0)<<2)>>2]+v(n-v(e,341)|0,12)|0,h[e+8>>2]=i,h[e+4>>2]=o,h[e>>2]=a,n=h[r+28>>2]+1|0,h[r+28>>2]=n;break r}if(e=0,c)for(;;){if(n)for(o=h[s+548>>2],a=h[s+604>>2],w=h[s+616>>2],S=h[g>>2],T=h[A>>2],n=0;;){h[a+(h[(f=(n<<2)+w|0)>>2]<<2)>>2]=0,i=h[f>>2]<<2;s:if(t=h[s>>2]-h[i+T>>2]|0)if(i=i+a|0,(0|(b=32-(u=h[s+560>>2])|0))>=(0|t)){if((0|(m=h[s+556>>2]))==(0|o)){h[i>>2]=0;break s}if(h[i>>2]=h[m>>2]<<u>>>32-t,t=t+h[s+560>>2]|0,h[s+560>>2]=t,32!=(0|t))break s;h[s+560>>2]=0,h[s+556>>2]=m+4}else(0|o)!=(0|(E=(m=h[s+556>>2])+4|0))?(M=h[m>>2],h[s+556>>2]=E,b=t-b|0,h[s+560>>2]=b,h[i>>2]=h[m+4>>2]>>>32-b|M<<u>>>32-t):h[i>>2]=0;if(t=h[f>>2]<<2,h[(i=t+a|0)>>2]=h[i>>2]|h[t+S>>2],!((n=n+1|0)>>>0<p[s+12>>2]))break}a=0;s:if((0|(n=h[l+16>>2]))!=h[l+20>>2])for(;;){if(f=v(a,20)+n|0,i=h[s+604>>2]+(h[f+4>>2]<<2)|0,u=h[f>>2],!((o=h[f+12>>2])>>>0>3))if(t=h[l+12>>2],h[f+16>>2]){for(n=0;t=(t=We(t,(n<<2)+i|0,o))+(o=h[f+12>>2])|0,(n=n+1|0)>>>0<p[f+16>>2];);i=h[l+12>>2]}else i=t;if(n=h[l+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(t=h[u+40>>2],We(h[h[u>>2]>>2]+v(t,n)|0,i,t),a=a+1|0,n=h[l+16>>2],!(a>>>0<(h[l+20>>2]-n|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[s+8>>2]=h[s+8>>2]+1,(0|c)==(0|(e=e+1|0)))break a;n=h[s+12>>2]}}else{if(e=0,!c)break a;for(;;){a=0;s:if((0|(n=h[l+16>>2]))!=h[l+20>>2])for(;;){if(f=v(a,20)+n|0,i=h[g>>2]+(h[f+4>>2]<<2)|0,u=h[f>>2],!((o=h[f+12>>2])>>>0>3))if(t=h[l+12>>2],h[f+16>>2]){for(n=0;t=(t=We(t,(n<<2)+i|0,o))+(o=h[f+12>>2])|0,(n=n+1|0)>>>0<p[f+16>>2];);i=h[l+12>>2]}else i=t;if(n=h[l+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(t=h[u+40>>2],We(h[h[u>>2]>>2]+v(t,n)|0,i,t),a=a+1|0,n=h[l+16>>2],!(a>>>0<(h[l+20>>2]-n|0)/20>>>0))break}if(h[l+28>>2]=h[l+28>>2]+1,h[s+8>>2]=h[s+8>>2]+1,(0|c)==(0|(e=e+1|0)))break}}n=h[r+28>>2]}if(!n)break}i=1}if(h[r+28>>2]=0,(t=(o=h[r+16>>2])-(n=h[r+12>>2])|0)>>>0>=9)for(;ve(h[n>>2]),n=h[r+12>>2]+4|0,h[r+12>>2]=n,(t=(o=h[r+16>>2])-n|0)>>>0>8;);switch(e=170,(t>>>2|0)-1|0){case 1:e=341;case 0:h[r+24>>2]=e}if((0|n)!=(0|o)){for(;ve(h[n>>2]),(0|o)!=(0|(n=n+4|0)););(0|(e=h[r+16>>2]))!=(0|(t=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-t|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}n=i}}return n}function Z(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,b=0,_=0,A=0,E=0,w=0,S=0,T=0,M=0;if(o=h[t+12>>2],a=h[t+20>>2],a=(s=(r=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,!(s>>>0>p[t+8>>2]&(0|a)>=(0|o)|(0|a)>(0|o)||(a=r+h[t>>2]|0,h[e>>2]=d[0|a]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,o=a=h[t+20>>2],a=(r=(s=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,l=r,h[t+16>>2]=r,h[t+20>>2]=a,p[e>>2]>32||(a=o,(0|(r=h[t+12>>2]))<=(0|(a=(o=s+8|0)>>>0<8?a+1|0:a))&o>>>0>p[t+8>>2]|(0|r)<(0|a))))){if(n=l+h[t>>2]|0,a=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[e+4>>2]=a,n=h[t+20>>2],n=(o=h[t+16>>2]+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=o,h[t+20>>2]=n,!a)return 1;if(n=0,h[e+8>>2]=0,st(e+16|0,t)&&Tt(e+544|0,t)&&Tt(e+564|0,t)&&Tt(e+584|0,t)){A=h[e+4>>2],o=i,i=0,t=0,N=r=N-32|0,a=e,n=h[e+12>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0;e:{t:{if(n){if(n>>>0>=1073741824)break t;i=gn(e=n<<2),h[r+8>>2]=i,t=e+i|0,h[r+16>>2]=t,xt(i,0,e),h[r+12>>2]=t}e=h[a+628>>2],(s=h[e>>2])&&(h[e+4>>2]=s,ve(s),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=h[a+12>>2],i=h[r+8>>2],t=h[r+12>>2]),h[e+4>>2]=t,h[e>>2]=i,h[e+8>>2]=h[r+16>>2],i=0,h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,s=0;i:{if(n){if(n>>>0>=1073741824)break i;s=gn(e=n<<2),h[r+8>>2]=s,i=e+s|0,h[r+16>>2]=i,xt(s,0,e),h[r+12>>2]=i}e=h[a+640>>2],(t=h[e>>2])&&(h[e+4>>2]=t,ve(t),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,s=h[r+8>>2],i=h[r+12>>2]),h[e+4>>2]=i,h[e>>2]=s,h[e+8>>2]=h[r+16>>2],h[r+24>>2]=0,h[r+28>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,$e(r+8|0),t=((e=h[r+24>>2]+h[r+28>>2]|0)>>>0)/341|0,e=h[h[r+12>>2]+(t<<2)>>2]+v(e-v(t,341)|0,12)|0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=A,t=1,n=(e=h[r+28>>2])+1|0,h[r+28>>2]=n;n:if(!(e>>>0>n>>>0)){for(;;){if(f=h[r+12>>2],e=h[r+24>>2],i=h[f+((s=((i=e+(t=n-1|0)|0)>>>0)/341|0)<<2)>>2]+v(i-v(s,341)|0,12)|0,c=h[i+8>>2],l=h[i>>2],h[r+28>>2]=t,1+(((i=(t=h[r+16>>2])-f|0)?v(i>>2,341)-1|0:0)-(e+n|0)|0)>>>0>=682&&(ve(h[t-4>>2]),h[r+16>>2]=h[r+16>>2]-4),t=0,l>>>0>A>>>0)break n;if(e=h[a+628>>2],(s=ft(a,l,m=(u=v(c,12))+h[a+640>>2]|0))>>>0>=p[a+12>>2])break n;f=e+u|0;r:{a:if(b=s<<2,i=h[a>>2]-h[b+h[m>>2]>>2]|0){s:{o:{l:{c:{if(l>>>0<=2){if(e=h[a+616>>2],h[e>>2]=s,i=1,(n=h[a+12>>2])>>>0>1)break c;break s}if(p[a+8>>2]>p[a+4>>2])break n;if((0|(t=(e=h[a+628>>2])+(m=v(g=c+1|0,12))|0))!=(0|f)&&(Vt(t,h[f>>2],h[f+4>>2]),e=h[a+628>>2]),e=b+h[e+m>>2]|0,h[e>>2]=h[e>>2]+(1<<i-1),i=0,n=0,e=31^y(l))for(;i=Gi(16+((n<<4)+a|0)|0)|i<<1,(0|e)!=(0|(n=n+1|0)););if((0|(n=l-(e=(l>>>1|0)-i|0)|0))!=(0|e)){if((0|(t=h[a+596>>2]))==h[a+588>>2])break l;i=h[t>>2],f=(l=h[a+600>>2])+1|0,h[a+600>>2]=f,i&=-2147483648>>>l;u:{if(32==(0|f)){if(h[a+600>>2]=0,h[a+596>>2]=t+4,i)break u;break l}if(!i)break l}t=n}else t=e;n=e;break o}for(;s=(n-1|0)==(0|s)?0:s+1|0,h[e+(i<<2)>>2]=s,(i=i+1|0)>>>0<(n=h[a+12>>2])>>>0;);break s}t=e}if(e=h[a+640>>2],l=h[(i=e+u|0)>>2],h[(f=l+b|0)>>2]=h[f>>2]+1,Vt(e+m|0,l,h[i+4>>2]),n&&(i=h[r+28>>2]+h[r+24>>2]|0,e=h[r+12>>2],(0|i)==(0|((l=h[r+16>>2]-e|0)?v(l>>2,341)-1|0:0))?($e(r+8|0),i=h[r+24>>2]+h[r+28>>2]|0,l=h[r+12>>2]):l=e,e=h[l+((e=(i>>>0)/341|0)<<2)>>2]+v(i-v(e,341)|0,12)|0,h[e+8>>2]=c,h[e+4>>2]=s,h[e>>2]=n,h[r+28>>2]=h[r+28>>2]+1),!t)break a;n=h[r+28>>2]+h[r+24>>2]|0,i=h[r+12>>2],(0|n)==(0|((e=h[r+16>>2]-i|0)?v(e>>2,341)-1|0:0))&&($e(r+8|0),n=h[r+24>>2]+h[r+28>>2]|0,i=h[r+12>>2]),e=h[i+((e=(n>>>0)/341|0)<<2)>>2]+v(n-v(e,341)|0,12)|0,h[e+8>>2]=g,h[e+4>>2]=s,h[e>>2]=t,n=h[r+28>>2]+1|0,h[r+28>>2]=n;break r}if(b=0,l)for(;;){if(n)for(s=h[a+548>>2],i=h[a+604>>2],w=h[a+616>>2],S=h[f>>2],T=h[m>>2],n=0;;){h[i+(h[(c=(n<<2)+w|0)>>2]<<2)>>2]=0,t=h[c>>2]<<2;s:if(e=h[a>>2]-h[t+T>>2]|0)if(t=t+i|0,(0|(_=32-(u=h[a+560>>2])|0))>=(0|e)){if((0|(g=h[a+556>>2]))==(0|s)){h[t>>2]=0;break s}if(h[t>>2]=h[g>>2]<<u>>>32-e,e=e+h[a+560>>2]|0,h[a+560>>2]=e,32!=(0|e))break s;h[a+560>>2]=0,h[a+556>>2]=g+4}else(0|s)!=(0|(E=(g=h[a+556>>2])+4|0))?(M=h[g>>2],h[a+556>>2]=E,_=e-_|0,h[a+560>>2]=_,h[t>>2]=h[g+4>>2]>>>32-_|M<<u>>>32-e):h[t>>2]=0;if(e=h[c>>2]<<2,h[(t=e+i|0)>>2]=h[t>>2]|h[e+S>>2],!((n=n+1|0)>>>0<p[a+12>>2]))break}e=0;s:if((0|(n=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=v(e,20)+n|0,t=h[a+604>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(n=0;i=(i=We(i,(n<<2)+t|0,s))+(s=h[c+12>>2])|0,(n=n+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(n=h[o+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+v(i,n)|0,t,i),e=e+1|0,n=h[o+16>>2],!(e>>>0<(h[o+20>>2]-n|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(b=b+1|0)))break a;n=h[a+12>>2]}}else{if(m=0,!l)break a;for(;;){e=0;s:if((0|(n=h[o+16>>2]))!=h[o+20>>2])for(;;){if(c=v(e,20)+n|0,t=h[f>>2]+(h[c+4>>2]<<2)|0,u=h[c>>2],!((s=h[c+12>>2])>>>0>3))if(i=h[o+12>>2],h[c+16>>2]){for(n=0;i=(i=We(i,(n<<2)+t|0,s))+(s=h[c+12>>2])|0,(n=n+1|0)>>>0<p[c+16>>2];);t=h[o+12>>2]}else t=i;if(n=h[o+28>>2],(n=d[u+84|0]?n:h[h[u+68>>2]+(n<<2)>>2])>>>0>=p[u+80>>2])break s;if(i=h[u+40>>2],We(h[h[u>>2]>>2]+v(i,n)|0,t,i),e=e+1|0,n=h[o+16>>2],!(e>>>0<(h[o+20>>2]-n|0)/20>>>0))break}if(h[o+28>>2]=h[o+28>>2]+1,h[a+8>>2]=h[a+8>>2]+1,(0|l)==(0|(m=m+1|0)))break}}n=h[r+28>>2]}if(!n)break}t=1}if(h[r+28>>2]=0,(i=(s=h[r+16>>2])-(n=h[r+12>>2])|0)>>>0>=9)for(;ve(h[n>>2]),n=h[r+12>>2]+4|0,h[r+12>>2]=n,(i=(s=h[r+16>>2])-n|0)>>>0>8;);switch(e=170,(i>>>2|0)-1|0){case 1:e=341;case 0:h[r+24>>2]=e}if((0|n)!=(0|s)){for(;ve(h[n>>2]),(0|s)!=(0|(n=n+4|0)););(0|(e=h[r+16>>2]))!=(0|(i=h[r+12>>2]))&&(h[r+16>>2]=e+(((e-i|0)-4>>>2^-1)<<2))}(e=h[r+8>>2])&&ve(e),N=r+32|0;break e}vr(),x()}vr(),x()}n=t}}return n}function q(e,t,i,n,r){var s,o,l,c=0,f=0,p=0,m=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,x=0,M=0,R=0,P=0,C=0,D=0;N=s=N-80|0,h[s+76>>2]=t,l=s+55|0,o=s+56|0,t=0;e:{t:{i:{n:{r:for(;;){if((2147483647-A|0)<(0|t))break n;A=t+A|0;a:{s:{o:{if(_=h[s+76>>2],b=d[0|(t=_)])for(;;){l:{c:if(c=255&b){if(37!=(0|c))break l;for(b=t;;){if(37!=d[t+1|0])break c;if(c=t+2|0,h[s+76>>2]=c,b=b+1|0,f=d[t+2|0],t=c,37!=(0|f))break}}else b=t;if((0|(t=b-_|0))>(0|(R=2147483647-A|0)))break n;if(e&&Xn(e,_,t),t)continue r;S=-1,c=1,t=h[s+76>>2],a[t+1|0]-48>>>0>=10|36!=d[t+2|0]||(S=a[t+1|0]-48|0,T=1,c=3),t=c+t|0,h[s+76>>2]=t,E=0;c:if((f=(m=a[0|t])-32|0)>>>0>31)c=t;else if(c=t,75913&(p=1<<f))for(;;){if(c=t+1|0,h[s+76>>2]=c,E|=p,(f=(m=a[t+1|0])-32|0)>>>0>=32)break c;if(t=c,!(75913&(p=1<<f)))break}c:if(42!=(0|m)){if((0|(w=Hi(s+76|0)))<0)break n;t=h[s+76>>2]}else{if(a[c+1|0]-48>>>0>=10||(t=h[s+76>>2],36!=d[t+2|0])){if(T)break o;T=0,w=0,e&&(t=h[i>>2],h[i>>2]=t+4,w=h[t>>2]),t=h[s+76>>2]+1|0}else h[((a[t+1|0]<<2)+r|0)-192>>2]=10,w=h[((a[t+1|0]<<3)+n|0)-384>>2],T=1,t=t+3|0;if(h[s+76>>2]=t,(0|w)>=0)break c;w=0-w|0,E|=8192}if(c=0,p=-1,f=0,46==d[0|t])if(42!=d[t+1|0])h[s+76>>2]=t+1,p=Hi(s+76|0),t=h[s+76>>2],f=1;else{if(a[t+2|0]-48>>>0>=10||(t=h[s+76>>2],36!=d[t+3|0])){if(T)break o;e?(t=h[i>>2],h[i>>2]=t+4,p=h[t>>2]):p=0,t=h[s+76>>2]+2|0}else h[((a[t+2|0]<<2)+r|0)-192>>2]=10,p=h[((a[t+2|0]<<3)+n|0)-384>>2],t=t+4|0;h[s+76>>2]=t,f=(-1^p)>>>31|0}for(x=f;;){if(y=c,b=28,a[0|t]-123>>>0<4294967238)break i;if(m=t+1|0,h[s+76>>2]=m,c=a[0|t],t=m,!((c=d[13743+(c+v(y,58)|0)|0])-1>>>0<8))break}c:{u:{if(27!=(0|c)){if(!c)break i;if((0|S)>=0){h[(S<<2)+r>>2]=c,c=h[4+(t=(S<<3)+n|0)>>2],h[s+64>>2]=h[t>>2],h[s+68>>2]=c;break u}if(!e)break a;wt(s- -64|0,c,i),m=h[s+76>>2];break c}if((0|S)>=0)break i}if(t=0,!e)continue r}f=-65537&E,c=8192&E?f:E,E=0,S=1244,b=o;c:{u:{h:{d:{f:{p:{m:{g:{v:{b:{_:{y:{A:{E:{w:{switch(t=a[m-1|0],(t=y&&3==(15&t)?-33&t:t)-88|0){case 11:break c;case 9:case 13:case 14:case 15:break u;case 27:break m;case 12:case 17:break b;case 23:break _;case 0:case 32:break y;case 24:break A;case 22:break E;case 29:break w;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break s}switch(t-65|0){case 0:case 4:case 5:case 6:break u;case 2:break f;case 1:case 3:break s}if(83==(0|t))break p;break s}m=h[s+64>>2],f=h[s+68>>2],S=1244;break v}t=0;E:switch(255&y){case 0:case 1:case 6:h[h[s+64>>2]>>2]=A;continue r;case 2:c=h[s+64>>2],h[c>>2]=A,h[c+4>>2]=A>>31;continue r;case 3:u[h[s+64>>2]>>1]=A;continue r;case 4:a[h[s+64>>2]]=A;continue r;case 7:break E;default:continue r}c=h[s+64>>2],h[c>>2]=A,h[c+4>>2]=A>>31;continue r}p=p>>>0>8?p:8,c|=8,t=120}if(y=o,M=32&t,(m=h[s+64>>2])|(f=h[s+68>>2]))for(;a[0|(y=y-1|0)]=M|d[14272+(15&m)|0],P=!f&m>>>0>15|0!=(0|f),_=f,f=f>>>4|0,m=(15&_)<<28|m>>>4,P;);if(_=y,!(h[s+64>>2]|h[s+68>>2])|!(8&c))break g;S=1244+(t>>>4|0)|0,E=2;break g}if(t=o,(m=h[s+64>>2])|(f=h[s+68>>2]))for(;a[0|(t=t-1|0)]=7&m|48,y=!f&m>>>0>7|0!=(0|f),_=f,f=f>>>3|0,m=(7&_)<<29|m>>>3,y;);if(_=t,!(8&c))break g;p=(0|(t=o-_|0))<(0|p)?p:t+1|0;break g}f=t=h[s+68>>2],m=h[s+64>>2],(0|t)<0?(f=0-((0!=(0|m))+f|0)|0,m=0-m|0,h[s+64>>2]=m,h[s+68>>2]=f,E=1,S=1244):2048&c?(E=1,S=1245):S=(E=1&c)?1246:1244}if(_=o,f)for(;C=_=_-1|0,D=m-Zi(y=qe(m,f,10,0),t=L,10,0)|48,a[0|C]=D,M=f>>>0>9,m=y,f=t,M;);else y=m;if(y)for(;t=(y>>>0)/10|0,a[0|(_=_-1|0)]=y-v(t,10)|48,f=y>>>0>9,y=t,f;);}if((0|p)<0&&x)break n;if(c=x?-65537&c:c,!(p|0!=((f=h[s+64>>2])|(t=h[s+68>>2])))){b=_=o,p=0;break s}p=(0|(t=!(t|f)+(o-_|0)|0))<(0|p)?p:t;break s}b=0!=(0|(c=m=(0|p)<0?2147483647:p));m:{g:{v:{b:if(!(!(3&(t=_=(t=h[s+64>>2])||1758))|!c))for(;;){if(!d[0|t])break v;if(b=0!=(0|(c=c-1|0)),!(3&(t=t+1|0)))break b;if(!c)break}if(!b)break g}v:if(!(!d[0|t]|c>>>0<4))for(;;){if((-1^(b=h[t>>2]))&b-16843009&-2139062144)break v;if(t=t+4|0,!((c=c-4|0)>>>0>3))break}if(c)for(;;){if(!d[0|t])break m;if(t=t+1|0,!(c=c-1|0))break}}t=0}if(b=(t=t?t-_|0:m)+_|0,(0|p)>=0){c=f,p=t;break s}if(c=f,p=t,d[0|b])break n;break s}if(p){b=h[s+64>>2];break d}t=0,Ki(e,32,w,0,c);break h}h[s+12>>2]=0,h[s+8>>2]=h[s+64>>2],b=s+8|0,h[s+64>>2]=b,p=-1}t=0;d:{for(;;){if(!(f=h[b>>2]))break d;if(!((_=(0|(f=Jt(s+4|0,f)))<0)|f>>>0>p-t>>>0)){if(b=b+4|0,p>>>0>(t=t+f|0)>>>0)continue;break d}break}if(_)break t}if(b=61,(0|t)<0)break i;if(Ki(e,32,w,t,c),t)for(p=0,b=h[s+64>>2];;){if(!(f=h[b>>2]))break h;if((p=(f=Jt(s+4|0,f))+p|0)>>>0>t>>>0)break h;if(Xn(e,s+4|0,f),b=b+4|0,!(t>>>0>p>>>0))break}else t=0}Ki(e,32,w,t,8192^c),t=(0|t)<(0|w)?w:t;continue r}if((0|p)<0&&x)break n;if(b=61,(0|(t=0|Rr[0](e,g[s+64>>3],w,p,c,t)))>=0)continue r;break i}a[s+55|0]=h[s+64>>2],p=1,_=l,c=f;break s}c=t+1|0,h[s+76>>2]=c,b=d[t+1|0],t=c}if(e)break e;if(!T)break a;for(t=1;;){if(e=h[(t<<2)+r>>2]){if(wt((t<<3)+n|0,e,i),A=1,10!=(0|(t=t+1|0)))continue;break e}break}if(A=1,t>>>0>=10)break e;for(;;){if(h[(t<<2)+r>>2])break o;if(10==(0|(t=t+1|0)))break}break e}b=28;break i}if((0|(y=(0|p)<(0|(m=b-_|0))?m:p))>(2147483647-E|0))break n;if(b=61,(0|R)<(0|(t=(0|(f=y+E|0))>(0|w)?f:w)))break i;Ki(e,32,t,f,c),Xn(e,S,E),Ki(e,48,t,f,65536^c),Ki(e,48,y,m,0),Xn(e,_,m),Ki(e,32,t,f,8192^c);continue}break}A=0;break e}b=61}h[4190]=b}A=-1}return N=s+80|0,A}function Q(e,t,i,n){var r=0,s=0,o=0,l=0,c=0;e:{t:if(n){i:{n:switch(h[e+28>>2]-1|0){case 0:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=a[0|t],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(a[0|t])/b(127),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 1:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=d[0|t],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(d[0|t])/b(255),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+1|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 2:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=u[t>>1],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(u[t>>1])/b(32767),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 3:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=f[t>>1],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(f[t>>1])/b(65535),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+2|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 4:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=h[t>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(h[t>>2])*b(4.656612873077393e-10),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 5:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=p[t>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(p[t>>2])*b(2.3283064365386963e-10),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+4|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 6:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=+p[t>>2]+4294967296*+h[t+4>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(+p[t>>2]+4294967296*+h[t+4>>2])*b(10842021724855044e-35),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 7:c=1;r:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(r=h[e>>2],l=h[r>>2],s=t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,t=l+t|0,r=(o=h[r+4>>2])-l|0,!d[e+32|0]){if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=+p[t>>2]+4294967296*+p[t+4>>2],(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|r)<=(0|s))break e;for(s=0;;){if(m[(s<<2)+n>>2]=b(+p[t>>2]+4294967296*+p[t+4>>2])*b(5.421010862427522e-20),(0|(s=s+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break r;if(!(o>>>0>(t=t+8|0)>>>0))break}break e}if((0|i)>(0|r))break i;break t;case 8:if(c=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,o=h[r+4>>2];;){if(t>>>0>=o>>>0)break e;if(m[(s<<2)+n>>2]=m[t>>2],t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 9:if(c=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,o=h[r+4>>2];;){if(t>>>0>=o>>>0)break e;if(m[(s<<2)+n>>2]=g[t>>3],t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 10:break n;default:break t}if(c=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(o=h[e>>2],t=(r=h[o>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0;;){if(p[o+4>>2]<=t>>>0)break e;if(m[(s<<2)+n>>2]=d[0|t]?b(1):b(0),t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break t}xt((r<<2)+n|0,0,i-r<<2)}return c}return 0}function K(e,t){var i,n,r=0,s=0,o=0;N=i=N-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[(s=e+16|0)>>2]=0,h[s+4>>2]=0,a[s+5|0]=0,a[s+6|0]=0,a[s+7|0]=0,a[s+8|0]=0,a[s+9|0]=0,a[s+10|0]=0,a[s+11|0]=0,a[s+12|0]=0,h[(r=s+16|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+32|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+48|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s- -64|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+80|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+96|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+112|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+128|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+144|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+160|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+176|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+192|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+208|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+224|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+240|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+256|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+272|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+288|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+304|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+320|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+336|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+352|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+368|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+384|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+400|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+416|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+432|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+448|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+464|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(r=s+480|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[(s=s+496|0)>>2]=0,h[s+4>>2]=0,a[s+5|0]=0,a[s+6|0]=0,a[s+7|0]=0,a[s+8|0]=0,a[s+9|0]=0,a[s+10|0]=0,a[s+11|0]=0,a[s+12|0]=0,h[e+528>>2]=0,h[e+532>>2]=0,a[e+533|0]=0,a[e+534|0]=0,a[e+535|0]=0,a[e+536|0]=0,a[e+537|0]=0,a[e+538|0]=0,a[e+539|0]=0,a[e+540|0]=0,h[e+544>>2]=0,h[e+548>>2]=0,h[e+560>>2]=0,h[e+552>>2]=0,h[e+556>>2]=0,h[e+564>>2]=0,h[e+568>>2]=0,h[e+580>>2]=0,h[e+572>>2]=0,h[e+576>>2]=0,h[e+584>>2]=0,h[e+588>>2]=0,h[e+600>>2]=0,h[e+592>>2]=0,h[e+596>>2]=0,h[e+612>>2]=0,h[e+604>>2]=0,h[e+608>>2]=0,n=e+628|0;e:{t:{if(t){if(t>>>0<1073741824)break t;vr(),x()}h[e+616>>2]=0,h[e+620>>2]=0,h[e+624>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,s=1;break e}r=gn(s=t<<2),h[e+604>>2]=r,o=r+s|0,h[e+612>>2]=o,xt(r,0,s),h[e+624>>2]=0,h[e+616>>2]=0,h[e+620>>2]=0,h[e+608>>2]=o,r=gn(s),h[e+616>>2]=r,o=r+s|0,h[e+624>>2]=o,xt(r,0,s),h[e+620>>2]=o,r=gn(s),h[i>>2]=r,o=r+s|0,h[i+8>>2]=o,xt(r,0,s),h[i+4>>2]=o,s=t<<5|1}return Bt(n,s,i),(r=h[i>>2])&&(h[i+4>>2]=r,ve(r)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(r=gn(t<<=2),h[i>>2]=r,o=t+r|0,h[i+8>>2]=o,xt(r,0,t),h[i+4>>2]=o),Bt(e+640|0,s,i),(t=h[i>>2])&&(h[i+4>>2]=t,ve(t)),N=i+16|0,e}function J(e,t){t|=0;var i,n,r,s=0,o=0,l=0,c=0,u=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0;N=i=N-96|0,r=h[4+(e|=0)>>2],l=h[r+32>>2],u=b=h[l+8>>2];e:if(!((0|(o=y=h[l+12>>2]))<=(0|(s=h[l+20>>2]))&(n=h[l+16>>2])>>>0>=u>>>0|(0|s)>(0|o)||(c=h[l>>2],A=d[c+n|0],o=(u=n+1|0)?s:s+1|0,h[l+16>>2]=u,h[l+20>>2]=o,(0|o)>=(0|y)&u>>>0>=b>>>0|(0|o)>(0|y)))){_=d[c+u|0],o=(u=n+2|0)>>>0<2?s+1|0:s,g=u,h[l+16>>2]=u,h[l+20>>2]=o;t:{if((0|(m=A<<24>>24))>=0){if(u=h[e+216>>2],A>>>0>=(h[e+220>>2]-u|0)/144>>>0)break e;if(u=u+v(A,144)|0,h[u>>2]<0)break t;break e}if(h[e+212>>2]>=0)break e;u=e+212|0}h[u>>2]=t;t:{i:{n:{if((65535&((u=f[r+36>>1])<<8|u>>>8))>>>0>=258){if((0|o)>=(0|y)&g>>>0>=b>>>0|(0|o)>(0|y))break e;if(u=d[c+g|0],s=(o=n+3|0)>>>0<3?s+1|0:s,h[l+16>>2]=o,h[l+20>>2]=s,s=u>>>0>1)break e;if(s=s?0:u,!_)break n;if(s)break e;break i}if(_)break i;s=0}if((0|m)<0?l=e+184|0:(l=h[e+216>>2]+v(A,144)|0,a[l+100|0]=0,l=l+104|0),1!=(0|s)?(N=o=N+-64|0,c=h[h[e+4>>2]+44>>2],s=gn(80),h[s>>2]=12672,h[s+4>>2]=0,h[s+76>>2]=0,h[s+72>>2]=l,h[s+68>>2]=c,h[s+8>>2]=12836,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s- -64>>2]=0,h[(u=_=s+56|0)>>2]=0,h[u+4>>2]=0,b=h[e+8>>2],h[o+40>>2]=0,h[o+44>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,h[(u=g=o+24|0)>>2]=0,h[u+4>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,h[o+8>>2]=0,h[o+12>>2]=0,h[o+56>>2]=0,h[o+48>>2]=0,h[o+52>>2]=0,h[o>>2]=12836,h[o+4>>2]=b,m=h[b>>2],u=h[b+4>>2],a[o+63|0]=0,Pt(y=g,(u-m>>2>>>0)/3|0,g=o+63|0),u=h[o+4>>2],m=h[u+28>>2],u=h[u+24>>2],a[o+63|0]=0,Pt(o+36|0,m-u>>2,g),h[o+20>>2]=s,h[o+16>>2]=c,h[o+12>>2]=l,h[o+8>>2]=b,mt(s+8|0,o),Dt(_,h[o+48>>2],h[o+52>>2]),h[o>>2]=12836,(l=h[o+48>>2])&&(h[o+52>>2]=l,ve(l)),h[o>>2]=12652,(l=h[o+36>>2])&&ve(l),(l=h[o+24>>2])&&ve(l),N=o- -64|0):(N=c=N-112|0,g=h[h[e+4>>2]+44>>2],s=gn(120),h[s>>2]=12204,h[s+4>>2]=0,h[s+116>>2]=0,h[s+112>>2]=l,h[s+108>>2]=g,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+56>>2]=0,h[s+60>>2]=0,h[s+8>>2]=12416,h[(o=s- -64|0)>>2]=0,h[o+4>>2]=0,h[s+72>>2]=0,h[s+76>>2]=0,h[s+80>>2]=0,h[s+84>>2]=0,h[s+88>>2]=0,h[s+104>>2]=0,h[s+96>>2]=0,h[s+100>>2]=0,_=h[e+8>>2],h[c+48>>2]=0,h[c+52>>2]=0,h[c+40>>2]=0,h[c+44>>2]=0,h[(o=m=c+32|0)>>2]=0,h[o+4>>2]=0,h[c+24>>2]=0,h[c+28>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,h[(o=c- -64|0)>>2]=0,h[o+4>>2]=0,h[c+72>>2]=0,h[c+76>>2]=0,h[c+80>>2]=0,h[c+84>>2]=0,h[c+88>>2]=0,h[c+104>>2]=0,h[c+56>>2]=0,h[c+60>>2]=0,h[c+8>>2]=12416,h[c+96>>2]=0,h[c+100>>2]=0,h[c+12>>2]=_,u=h[_>>2],o=h[_+4>>2],a[c+111|0]=0,Pt(b=m,(o-u>>2>>>0)/3|0,m=c+111|0),o=h[c+12>>2],u=h[o+28>>2],o=h[o+24>>2],a[c+111|0]=0,Pt(c+44|0,u-o>>2,m),h[c+28>>2]=s,h[c+24>>2]=g,h[c+20>>2]=l,h[c+16>>2]=_,mt(l=s+8|0,o=c+8|0),(0|o)!=(0|l)?(Dt(s+56|0,h[o+48>>2],h[o+52>>2]),Dt(s+68|0,h[o+60>>2],h[o- -64>>2]),Dt(s+80|0,h[o+72>>2],h[o+76>>2]),h[s+92>>2]=h[o+84>>2],Vt(s+96|0,h[o+88>>2],h[o+92>>2])):h[s+92>>2]=h[o+84>>2],h[c+8>>2]=12416,(l=h[c+96>>2])&&(h[c+100>>2]=l,ve(l)),(l=h[c+80>>2])&&(h[c+84>>2]=l,ve(l)),(l=h[c+68>>2])&&(h[c+72>>2]=l,ve(l)),(l=h[c+56>>2])&&(h[c+60>>2]=l,ve(l)),h[c+8>>2]=12652,(l=h[c+44>>2])&&ve(l),(l=h[c+32>>2])&&ve(l),N=c+112|0),!s)break e;break t}if((0|m)<0)break e;u=h[r+44>>2],l=h[e+216>>2],s=gn(80),h[s+76>>2]=0,h[s+68>>2]=u,h[s+8>>2]=11900,h[s>>2]=12964,h[s+4>>2]=0,p=104+(o=l+v(A,144)|0)|0,h[s+72>>2]=p,h[s- -64>>2]=0,h[s+56>>2]=0,h[s+60>>2]=0,h[s+52>>2]=0,h[s+44>>2]=0,h[s+48>>2]=0,h[s+36>>2]=0,h[s+40>>2]=0,h[s+28>>2]=0,h[s+32>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[i+24>>2]=u,h[i+68>>2]=0,h[i+72>>2]=0,h[i+60>>2]=0,h[i+64>>2]=0,h[i+52>>2]=0,h[i+56>>2]=0,h[i+44>>2]=0,h[i+48>>2]=0,h[i+84>>2]=0,h[i+88>>2]=0,h[i+76>>2]=0,h[i+80>>2]=0,h[i+28>>2]=s,l=h[i+28>>2],h[i+8>>2]=h[i+24>>2],h[i+12>>2]=l,o=o+4|0,h[i+16>>2]=o,h[i+20>>2]=p,h[i+36>>2]=0,h[i+40>>2]=0,h[i+32>>2]=11900,l=h[i+20>>2],h[i>>2]=h[i+16>>2],h[i+4>>2]=l,pi(p=i+32|0,o,i),mt(l=s+8|0,p),(0|l)!=(0|p)&&Dt(s+56|0,h[p+48>>2],h[p+52>>2]),un(p)}s=Vi(gn(64),s),m=h[e+4>>2],e=s;t:{i:{if((0|(s=t))>=0){if(o=m+8|0,!((0|(u=(t=h[m+12>>2])-(l=h[m+8>>2])>>2))>(0|s)))if(p=s+1|0,s>>>0>=u>>>0)St(o,p-u|0);else if(!(u>>>0<=p>>>0)){if((0|(l=l+(p<<2)|0))!=(0|t))for(;p=h[(t=t-4|0)>>2],h[t>>2]=0,p&&Rr[h[h[p>>2]+4>>2]](p),(0|t)!=(0|l););h[m+12>>2]=l}if(l=h[o>>2]+(s<<2)|0,t=h[l>>2],h[l>>2]=e,t)break i;break t}if(t=e,!e)break t}Rr[h[h[t>>2]+4>>2]](t)}p=(-1^s)>>>31|0}return N=i+96|0,0|p}function $(e){var t,i=0,n=0,r=0,a=0,s=0;if(N=t=N-16|0,h[t+12>>2]=e,e>>>0<=211)r=h[Li(14288,14480,t+12|0)>>2];else{for(e>>>0>=4294967292&&(Tr(),x()),r=v(a=(e>>>0)/210|0,210),h[t+8>>2]=e-r,s=Li(14480,14672,t+8|0)-14480>>2;;){r=h[14480+(s<<2)>>2]+r|0,e=5;e:{for(;;){t:if(47!=(0|e)){if((i=h[14288+(e<<2)>>2])>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if(e=e+1|0,(0|v(i,n))!=(0|r))continue}else for(e=211;;){if((i=(r>>>0)/(e>>>0)|0)>>>0<e>>>0)break e;if((0|v(e,i))==(0|r))break t;if((i=e+10|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+12|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+16|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+18|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+22|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+28|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+30|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+36|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+40|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+42|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+46|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+52|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+58|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+60|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+66|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+70|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+72|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+78|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+82|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+88|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+96|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+100|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+102|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+106|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+108|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+112|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+120|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+126|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+130|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+136|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+138|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+142|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+148|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+150|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+156|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+162|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+166|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+168|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+172|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+178|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+180|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+186|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+190|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+192|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+196|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+198|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if((0|v(i,n))==(0|r))break t;if((i=e+208|0)>>>0>(n=(r>>>0)/(i>>>0)|0)>>>0)break e;if(e=e+210|0,(0|v(i,n))==(0|r))break}break}s=(e=48==(0|(r=s+1|0)))?0:r,r=v(a=e+a|0,210);continue}break}h[t+12>>2]=r}return N=t+16|0,r}function ee(e,t){var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,_=0,y=0,A=0;N=i=N-16|0;e:{t:{i:{if(d[h[e+4>>2]+36|0]<=1){if(m=-1,n=h[t+20>>2],n=(r=(s=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(0|(g=h[t+12>>2]))<=(0|n)&r>>>0>p[t+8>>2]|(0|n)>(0|g))break i;s=s+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[i+12>>2]=s,h[t+16>>2]=r,h[t+20>>2]=n}else{if(m=-1,!Si(1,i+12|0,t))break i;s=h[i+12>>2]}n:{r:{a:{s:{o:{l:if(s){if(n=h[e+8>>2],(h[n+4>>2]-h[n>>2]>>2>>>0)/3>>>0<s>>>0)break i;if((65535&((n=f[h[e+4>>2]+36>>1])<<8|n>>>8))>>>0>=258){g=0;c:{u:{for(;;){if(!Si(1,i+8|0,t))break i;if(n=h[i+8>>2],!Si(1,i+8|0,t))break i;if((o=n+o|0)>>>0<(n=h[i+8>>2])>>>0)break i;if(c=o-n|0,(0|(l=h[e+40>>2]))==h[e+44>>2]){if((u=1+(l=(0|(r=l-(n=h[e+36>>2])|0))/12|0)|0)>>>0>=357913942)break u;if(b=l<<1,(u=l>>>0<178956970?u>>>0>b>>>0?u:b:357913941)>>>0>=357913942)break c;l=(b=gn(u=v(u,12)))+v(l,12)|0,h[l+4>>2]=o,h[l>>2]=c,c=l+v((0|r)/-12|0,12)|0,l=l+12|0,(0|r)>0&&We(c,n,r),h[e+44>>2]=u+b,h[e+40>>2]=l,h[e+36>>2]=c,n&&ve(n)}else h[l+4>>2]=o,h[l>>2]=c,h[e+40>>2]=l+12;if((0|(g=g+1|0))==(0|s))break}for(m=0,Ut(t,0,0),r=s>>>0>1?s:1;;){n=d[t+36|0];h:{d:{if((65535&((o=f[h[e+4>>2]+36>>1])<<8|o>>>8))>>>0<=513){if(!n)break h;if(l=0,(s=(o=(n=h[t+32>>2])>>>3|0)+(g=h[t+24>>2])|0)>>>0>=(c=h[t+28>>2])>>>0?s=n:(l=d[0|s],s=n+1|0,h[t+32>>2]=s,o=s>>>3|0,l=l>>>(7&n)&1),c>>>0>o+g>>>0)break d;break h}if(!n)break h;if(l=0,s=h[t+32>>2],(n=h[t+24>>2]+(s>>>3|0)|0)>>>0>=p[t+28>>2])break h;l=d[0|n]>>>(7&s)&1}h[t+32>>2]=s+1}if(n=h[e+36>>2]+v(m,12)|0,a[n+8|0]=254&d[n+8|0]|1&l,(0|r)==(0|(m=m+1|0)))break}a[t+36|0]=0,n=h[t+20>>2],o=0,r=(o=(s=h[t+32>>2]+7|0)>>>0<7?1:o)>>>3|0,o=(s=(7&o)<<29|s>>>3)+h[t+16>>2]|0,n=n+r|0,h[t+16>>2]=o,h[t+20>>2]=s>>>0>o>>>0?n+1|0:n;break l}vr(),x()}break e}for(g=0;;){if(r=h[t+12>>2],o=n=h[t+20>>2],n=(u=(c=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,b=u,(_=h[t+8>>2])>>>0<u>>>0&(0|n)>=(0|r)|(0|n)>(0|r))break i;if(y=h[t>>2],A=d[0|(u=y+c|0)]|d[u+1|0]<<8|d[u+2|0]<<16|d[u+3|0]<<24,h[t+16>>2]=b,h[t+20>>2]=n,n=o,(u=c+8|0)>>>0>_>>>0&(0|(n=u>>>0<8?n+1|0:n))>=(0|r)|(0|n)>(0|r))break i;if(b=d[0|(b=b+y|0)]|d[b+1|0]<<8|d[b+2|0]<<16|d[b+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=n,(0|n)>=(0|r)&u>>>0>=_>>>0|(0|n)>(0|r))break i;if(n=d[u+y|0],o=(r=c+9|0)>>>0<9?o+1|0:o,h[t+16>>2]=r,h[t+20>>2]=o,l=1&n|-2&l,(0|(n=h[e+40>>2]))==h[e+44>>2]){if((c=1+(n=(0|(r=n-(o=h[e+36>>2])|0))/12|0)|0)>>>0>=357913942)break o;if(u=n<<1,(c=n>>>0<178956970?c>>>0>u>>>0?c:u:357913941)>>>0>=357913942)break e;n=(_=gn(u=v(c,12)))+v(n,12)|0,a[n+8|0]=l,h[n+4>>2]=b,h[n>>2]=A,c=n+v((0|r)/-12|0,12)|0,(0|r)>0&&We(c,o,r),h[e+44>>2]=u+_,h[e+40>>2]=n+12,h[e+36>>2]=c,o&&ve(o)}else a[n+8|0]=l,h[n+4>>2]=b,h[n>>2]=A,h[e+40>>2]=n+12;if((0|(g=g+1|0))==(0|s))break}}if(h[i+8>>2]=0,(n=65535&((n=f[h[e+4>>2]+36>>1])<<8|n>>>8))>>>0<=511){if(m=-1,n=h[t+20>>2],n=(s=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(0|(r=h[t+12>>2]))<=(0|n)&s>>>0>p[t+8>>2]|(0|n)>(0|r))break i;o=o+h[t>>2]|0,o=d[0|o]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=s,h[t+20>>2]=n}else{if(512!=(0|n))break n;if(m=-1,!Si(1,i+8|0,t))break i;o=h[i+8>>2]}if(!o)break n;if((65535&((n=f[h[e+4>>2]+36>>1])<<8|n>>>8))>>>0<258)break r;for(l=0,m=0;;){if(!Si(1,i+4|0,t))break a;if(m=h[i+4>>2]+m|0,(0|(n=h[e+52>>2]))==h[e+56>>2]){if((n=1+(c=(s=n-(r=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break s;if(g=s>>1,g=s>>>0<2147483644?n>>>0>g>>>0?n:g:1073741823){if(g>>>0>=1073741824)break e;n=gn(g<<2)}else n=0;h[(c=n+(c<<2)|0)>>2]=m,(0|s)>0&&We(n,r,s),h[e+56>>2]=n+(g<<2),h[e+52>>2]=c+4,h[e+48>>2]=n,r&&ve(r)}else h[n>>2]=m,h[e+52>>2]=n+4;if((0|o)==(0|(l=l+1|0)))break}break n}vr(),x()}vr(),x()}m=-1;break i}for(s=0;;){if(n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(0|(m=h[t+12>>2]))<=(0|n)&l>>>0>p[t+8>>2]|(0|n)>(0|m)){m=-1;break i}if(r=r+h[t>>2]|0,g=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n,(0|(n=h[e+52>>2]))==h[e+56>>2]){if((n=1+(c=(r=n-(l=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(m=r>>1,m=r>>>0<2147483644?n>>>0>m>>>0?n:m:1073741823){if(m>>>0>=1073741824)break e;n=gn(m<<2)}else n=0;h[(c=n+(c<<2)|0)>>2]=g,(0|r)>0&&We(n,l,r),h[e+56>>2]=n+(m<<2),h[e+52>>2]=c+4,h[e+48>>2]=n,l&&ve(l)}else h[n>>2]=g,h[e+52>>2]=n+4;if((0|o)==(0|(s=s+1|0)))break}}m=h[t+16>>2]}return N=i+16|0,m}vr(),x()}Qi(1336),x()}function te(e,t,i,n){var r=0,s=0,o=0,l=0,c=b(0),u=0;e:if(n){t:{i:switch(h[e+28>>2]-1|0){case 0:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(a[t+n|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 1:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((0|(r=a[0|s]))<0)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 2:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(((r=f[s>>1])-128&65535)>>>0<65280)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 3:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=f[s>>1])>>>0>127)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 4:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=h[s>>2])-128>>>0<4294967040)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 5:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=h[s>>2])>>>0>127)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 6:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(l=h[s>>2],-1==(0|(r=h[s+4>>2]-(l>>>0<128)|0))&l-128>>>0<4294967040|-1!=(0|r))break e;if(a[t+n|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 7:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(!(r=h[s+4>>2])&(l=h[s>>2])>>>0>127|r)break e;if(a[t+n|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 8:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(l=t+n|0,c=m[s>>2],r=b(_(c))<b(2147483648)?~~c:-2147483648,a[0|l]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 9:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(l=t+n|0,u=g[s>>3],r=_(u)<2147483648?~~u:-2147483648,a[0|l]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 10:break i;default:break e}i:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(a[t+n|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break i;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)<=(0|r))break e}xt(n+r|0,0,i-r|0)}return o}function ie(e,t,i,n){var r=0,s=0,o=0,l=0,c=b(0),u=0;e:if(n){t:{i:switch(h[e+28>>2]-1|0){case 0:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((0|(r=a[0|s]))<0)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 1:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(a[t+n|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 2:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=f[s>>1])>>>0>255)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 3:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=f[s>>1])>>>0>255)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+2|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 4:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=h[s>>2])>>>0>255)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 5:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if((r=h[s>>2])>>>0>255)break e;if(a[t+n|0]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 6:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(!(r=h[s+4>>2])&(l=h[s>>2])>>>0>255|r)break e;if(a[t+n|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 7:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(!(r=h[s+4>>2])&(l=h[s>>2])>>>0>255|r)break e;if(a[t+n|0]=l,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 8:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(l=t+n|0,r=(c=m[s>>2])<b(4294967296)&c>=b(0)?~~c>>>0:0,a[0|l]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+4|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 9:n:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(l=t+n|0,r=(u=g[s>>3])<4294967296&u>=0?~~u>>>0:0,a[0|l]=r,(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break n;if(!((s=s+8|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)>(0|r))break t;break e;case 10:break i;default:break e}i:if(!((0|((0|i)<(0|(r=a[e+24|0]))?i:r))<=0)){if(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0,s=h[e>>2],r=h[s>>2],(0|t)>=(h[s+4>>2]-r|0))break e;for(s=t+r|0,t=0;;){if(a[t+n|0]=d[0|s],(0|(t=t+1|0))>=(0|((0|i)<(0|(r=a[e+24|0]))?i:r)))break i;if(!((s=s+1|0)>>>0<p[h[e>>2]+4>>2]))break}break e}if(o=1,(0|i)<=(0|r))break e}xt(n+r|0,0,i-r|0)}return o}function ne(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;e:{t:{i:{n:{r:if(h[e+92>>2]!=h[e+88>>2]){if((0|(i=h[e+52>>2]))==h[e+56>>2]){if((r=1+(a=(l=i-(n=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(i=l>>1,r=l>>>0<2147483644?i>>>0<r>>>0?r:i:1073741823){if(r>>>0>=1073741824)break e;i=gn(r<<2)}else i=0;h[(a=i+(a<<2)|0)>>2]=t,(0|l)>0&&We(i,n,l),h[e+56>>2]=i+(r<<2),h[e+52>>2]=a+4,h[e+48>>2]=i,n&&ve(n)}else h[i>>2]=t,h[e+52>>2]=i+4;h[e+84>>2]=0,a=-1,i=-1;a:if(-1!=(0|t)){if(r=h[e+4>>2],-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(a=h[h[r>>2]+(i<<2)>>2]),(t>>>0)%3|0)n=t-1|0;else if(i=-1,-1==(0|(n=t+2|0)))break a;i=h[h[r>>2]+(n<<2)>>2]}if(o=i>>>3&536870908,r=h[e+36>>2],(l=h[(s=r+(a>>>3&536870908)|0)>>2])&(n=1<<a)||(h[s>>2]=n|l,tt(s=e+8|0,a,n=-1!=(0|t)?((r=t+1|0)>>>0)%3|0?r:t-2|0:-1),r=h[e+36>>2]),(r=h[(n=r+o|0)>>2])&(a=1<<i)||(h[n>>2]=r|a,a=-1,-1!=(0|t)&&(a=t-1|0,(t>>>0)%3|0||(a=t+2|0)),tt(n=e+8|0,i,a)),a=-1,a=-1!=(0|t)?h[h[h[e+4>>2]>>2]+(t<<2)>>2]:a,n=h[e+36>>2]+(a>>>3&536870908)|0,(r=h[n>>2])&(i=1<<a)||(h[n>>2]=i|r,tt(e+8|0,a,t)),!((0|(n=h[e+84>>2]))>2))for(;;){if(a=v(n,12)+e|0,(0|(t=h[a+52>>2]))==h[a+48>>2]){if(3!=(0|(n=n+1|0)))continue;break r}if(t=h[(i=t-4|0)>>2],h[a+52>>2]=i,h[e+84>>2]=n,-1==(0|t))break r;a=h[e+24>>2];a:if(!(h[a+((i=(t>>>0)/3|0)>>>3&268435452)>>2]>>>i&1)){s:{for(;;){h[(i=((u=(t>>>0)/3|0)>>>3&268435452)+a|0)>>2]=h[i>>2]|1<<u,a=-1;o:{l:{c:{u:{h:{d:{f:{p:{if(a=-1!=(0|t)?h[h[h[e+4>>2]>>2]+(t<<2)>>2]:a,n=h[e+36>>2]+(a>>>3&536870908)|0,!((r=h[n>>2])&(i=1<<a))){if(h[n>>2]=i|r,l=h[(h[h[e+16>>2]+96>>2]+v(u,12)|0)+((t>>>0)%3<<2)>>2],c=h[h[e+20>>2]+4>>2],(0|(i=h[c+4>>2]))==h[c+8>>2]){if((n=1+(r=(o=i-(s=h[c>>2])|0)>>2)|0)>>>0>=1073741824)break p;if(i=o>>1,n=o>>>0<2147483644?i>>>0<n>>>0?n:i:1073741823){if(n>>>0>=1073741824)break e;i=gn(n<<2)}else i=0;h[(r=i+(r<<2)|0)>>2]=l,(0|o)>0&&We(i,s,o),h[c+8>>2]=i+(n<<2),h[c+4>>2]=r+4,h[c>>2]=i,s&&ve(s)}else h[i>>2]=l,h[c+4>>2]=i+4;if(o=h[e+12>>2],(0|(i=h[o+4>>2]))==h[o+8>>2]){if((n=1+(r=(s=i-(l=h[o>>2])|0)>>2)|0)>>>0>=1073741824)break f;if(i=s>>1,n=s>>>0<2147483644?i>>>0<n>>>0?n:i:1073741823){if(n>>>0>=1073741824)break e;i=gn(n<<2)}else i=0;h[(r=i+(r<<2)|0)>>2]=t,(0|s)>0&&We(i,l,s),h[o+8>>2]=i+(n<<2),h[o+4>>2]=r+4,h[o>>2]=i,l&&ve(l)}else h[i>>2]=t,h[o+4>>2]=i+4;i=h[e+12>>2],h[h[i+12>>2]+(a<<2)>>2]=h[i+24>>2],h[i+24>>2]=h[i+24>>2]+1}if(-1==(0|t))break s;o=h[e+4>>2],a=-1,-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(a=h[h[o+12>>2]+(i<<2)>>2]);m:{if((0|v(u,3))==(0|t)){if(r=t+2|0,t=-1,-1==(0|r))break m}else r=t-1|0;t=h[h[o+12>>2]+(r<<2)>>2]}if(s=-1==(0|t),l=(t>>>0)/3|0,r=(a>>>0)/3|0,!(i=-1==(0|a))){if(i=i?-1:r,i=h[h[e+24>>2]+(i>>>3&536870908)>>2]&1<<i,s)break d;n=0!=(0|i);break h}if(n=1,!s)break h;break s}vr(),x()}vr(),x()}if(!i)break u;break s}if(i=s?-1:l,!(h[h[e+24>>2]+(i>>>3&536870908)>>2]>>>i&1)){if(r=0,i=h[h[o>>2]+(t<<2)>>2],h[h[e+36>>2]+(i>>>3&536870908)>>2]>>>i&1||(i=h[e+88>>2]+(i<<2)|0,r=h[i>>2],h[i>>2]=r+1,r=(0|r)<=0?2:1),h[e+84>>2]>=(0|r)&&n)break l;if(c=v(r,12)+e|0,(0|(i=h[c+52>>2]))==h[c+56>>2]){if((s=1+(l=(u=i-(o=h[c+48>>2])|0)>>2)|0)>>>0>=1073741824)break n;if(i=u>>1,s=u>>>0<2147483644?i>>>0<s>>>0?s:i:1073741823){if(s>>>0>=1073741824)break e;i=gn(s<<2)}else i=0;h[(l=i+(l<<2)|0)>>2]=t,(0|u)>0&&We(i,o,u),h[c+48>>2]=i,h[c+52>>2]=l+4,h[c+56>>2]=i+(s<<2),o&&ve(o)}else h[i>>2]=t,h[c+52>>2]=i+4;h[e+84>>2]<=(0|r)||(h[e+84>>2]=r)}if(n)break s;if(t=-1,-1==(0|a))break c}t=h[h[h[e+4>>2]>>2]+(a<<2)>>2]}if(r=0,h[h[e+36>>2]+(t>>>3&536870908)>>2]>>>t&1||(t=h[e+88>>2]+(t<<2)|0,i=h[t>>2],h[t>>2]=i+1,r=(0|i)<=0?2:1),h[e+84>>2]<(0|r))break o;t=a}a=h[e+24>>2];continue}break}if(o=v(r,12)+e|0,(0|(t=h[o+52>>2]))==h[o+56>>2]){if((n=1+(i=(s=t-(l=h[o+48>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(t=s>>1,n=s>>>0<2147483644?t>>>0<n>>>0?n:t:1073741823){if(n>>>0>=1073741824)break e;t=gn(n<<2)}else t=0;h[(i=t+(i<<2)|0)>>2]=a,(0|s)>0&&We(t,l,s),h[o+48>>2]=t,h[o+52>>2]=i+4,h[o+56>>2]=t+(n<<2),l&&ve(l)}else h[t>>2]=a,h[o+52>>2]=t+4;if((0|r)>=(0|(n=h[e+84>>2])))break a;h[e+84>>2]=r,n=r;break a}n=h[e+84>>2]}if(!((0|n)<3))break}}return 1}vr(),x()}vr(),x()}vr(),x()}Qi(1336),x()}function re(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0;if(N=i=N-48|0,n=h[h[e+4>>2]+44>>2],r=h[e+8>>2],s=h[r>>2],r=h[r+4>>2],h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,r=(r-s>>2>>>0)/3|0,c=h[n+96>>2],r>>>0>(s=(h[n+100>>2]-c|0)/12|0)>>>0?ke(n+96|0,r-s|0,i+32|0):r>>>0>=s>>>0||(h[n+100>>2]=c+v(r,12)),h[e+216>>2]!=h[e+220>>2]){h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,u=h[e+8>>2],t=h[u>>2],n=h[u+4>>2],h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0;e:{t:{i:{n:{r:{a:{s:{if(t=n-t|0){if((0|t)<0)break s;p=gn(t),h[i>>2]=p,n=(t=t>>2<<2)+p|0,h[i+8>>2]=n,xt(p,0,t),h[i+4>>2]=n}if(n=h[u+24>>2],(h[u+28>>2]-n|0)<=0){r=0,t=0;break t}for(r=0,s=0,t=0;;){o:if(-1!=(0|(c=h[(m<<2)+n>>2]))){l:if(!(h[h[e+120>>2]+(m>>>3&536870908)>>2]>>>m&1)&&(b=h[e+216>>2],n=h[e+220>>2]-b|0))for(_=(n=(0|n)/144|0)>>>0>1?n:1,d=0,y=0!=(0|(n=(c>>>0)%3|0))|-1!=(0|(o=c+2|0)),A=n?c-1|0:o;;){if(l=c<<2,a=b+v(d,144)|0,n=h[l+h[h[a+68>>2]>>2]>>2],h[h[a+16>>2]+(n>>>3&536870908)>>2]>>>n&1&&(n=-1,y&&(n=-1,-1!=(0|(o=h[h[u+12>>2]+(A<<2)>>2]))&&(n=o-1|0,(o>>>0)%3|0||(n=o+2|0))),(0|c)!=(0|n)))for(a=h[a+32>>2],o=h[a+l>>2];;){if(f=0,-1==(0|n))break e;if(h[a+(n<<2)>>2]!=(0|o)){c=n;break l}c:{if((n>>>0)%3|0)l=n-1|0;else if(f=-1,-1==(0|(l=n+2|0)))break c;f=-1,-1!=(0|(n=h[h[u+12>>2]+(l<<2)>>2]))&&(f=n-1|0,(n>>>0)%3|0||(f=n+2|0))}if((0|c)==(0|(n=f)))break}if((0|_)==(0|(d=d+1|0)))break}if(o=(n=t-s|0)>>2,h[(c<<2)+p>>2]=o,t>>>0<g>>>0)h[t>>2]=c,t=t+4|0,h[i+20>>2]=t;else{if((t=o+1|0)>>>0>=1073741824)break a;if(a=(r=g-s|0)>>1,t=r>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(t>>>0>=1073741824)break r;r=gn(t<<2)}else r=0;h[(o=r+(o<<2)|0)>>2]=c,g=(t<<2)+r|0,t=o+4|0,(0|n)>0&&We(r,s,n),h[i+24>>2]=g,h[i+20>>2]=t,h[i+16>>2]=r,s&&(ve(s),u=h[e+8>>2]),s=r}if(-1!=(0|c)){if((c>>>0)%3|0)n=c-1|0;else if(-1==(0|(n=c+2|0)))break o;if(-1!=(0|(n=h[h[u+12>>2]+(n<<2)>>2]))&&-1!=(0|(n=n+((n>>>0)%3|0?-1:2)|0))&&(0|n)!=(0|(a=c)))for(;;){o=n;l:{c:if(l=h[e+216>>2],n=h[e+220>>2]-l|0){for(d=(n=(0|n)/144|0)>>>0>1?n:1,n=0;;){if(b=h[32+(l+v(n,144)|0)>>2],h[b+(_=o<<2)>>2]==h[b+(a<<2)>>2]){if((0|d)!=(0|(n=n+1|0)))continue;break c}break}if(a=(n=t-r|0)>>2,h[p+_>>2]=a,t>>>0<g>>>0){h[t>>2]=o,t=t+4|0,h[i+20>>2]=t,s=r;break l}if((t=a+1|0)>>>0>=1073741824)break n;if(l=(s=g-r|0)>>1,t=s>>>0<2147483644?t>>>0>l>>>0?t:l:1073741823){if(t>>>0>=1073741824)break i;s=gn(t<<2)}else s=0;if(h[(a=s+(a<<2)|0)>>2]=o,g=(t<<2)+s|0,t=a+4|0,(0|n)>0&&We(s,r,n),h[i+24>>2]=g,h[i+20>>2]=t,h[i+16>>2]=s,!r){r=s;break l}ve(r),u=h[e+8>>2],r=s;break l}h[(o<<2)+p>>2]=h[(a<<2)+p>>2]}if(-1==(0|o))break o;if((o>>>0)%3|0)n=o-1|0;else if(-1==(0|(n=o+2|0)))break o;if(-1==(0|(n=h[h[u+12>>2]+(n<<2)>>2])))break o;if(-1==(0|(n=n+((n>>>0)%3|0?-1:2)|0)))break o;if(a=o,(0|n)==(0|c))break}}}if(m=m+1|0,n=h[u+24>>2],!((0|m)<h[u+28>>2]-n>>2))break}break t}vr(),x()}vr(),x()}Qi(1336),x()}vr(),x()}Qi(1336),x()}if(m=h[e+4>>2],l=h[m+44>>2],(0|(d=h[l+100>>2]))!=h[l+96>>2])for(n=0;s=n+1|0,o=v(n,12),a=h[8+(c=o+p|0)>>2],u=h[c+4>>2],c=h[c>>2],(f=n)>>>0>=(d=(d-(n=h[l+96>>2])|0)/12|0)>>>0&&(h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,ke(l+96|0,s-d|0,i+32|0),m=h[e+4>>2],n=h[l+96>>2]),h[8+(n=n+o|0)>>2]=a,h[n+4>>2]=u,h[n>>2]=c,n=s,l=h[m+44>>2],n>>>0<((d=h[l+100>>2])-h[l+96>>2]|0)/12>>>0;);h[h[m+4>>2]+80>>2]=t-r>>2,f=1}n=f,p&&ve(p),r&&(h[i+20>>2]=r,ve(r))}else{if(u=h[e+4>>2],l=h[u+44>>2],(0|(r=h[l+100>>2]))!=h[l+96>>2])for(n=0;;){o=h[e+8>>2];e:{if(-1!=(0|(a=v(n,3))))if(d=-1,c=h[h[o>>2]+(a<<2)>>2],-1!=(0|(s=a+1|0))){if(d=h[h[o>>2]+(s<<2)>>2],s=-1,-1==(0|(a=a+2|0)))break e}else a=0;else d=h[4+(h[o>>2]+(a<<2)|0)>>2],c=-1,a=1;s=h[h[o>>2]+(a<<2)>>2]}if(o=s,s=n+1|0,(a=((a=r)-(r=h[l+96>>2])|0)/12|0)>>>0<=n>>>0&&(h[i+40>>2]=0,h[i+32>>2]=0,h[i+36>>2]=0,ke(l+96|0,s-a|0,i+32|0),u=h[e+4>>2],r=h[l+96>>2]),n=v(n,12)+r|0,h[n+8>>2]=o,h[n+4>>2]=d,h[n>>2]=c,n=s,l=h[u+44>>2],!(n>>>0<((r=h[l+100>>2])-h[l+96>>2]|0)/12>>>0))break}h[h[u+4>>2]+80>>2]=t,n=1}return N=i+48|0,n}function ae(e,t,i,n){var r=0,s=0,o=0,l=0,c=b(0),p=0,v=0;e:if(n){t:{i:switch(h[e+28>>2]-1|0){case 0:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(r=(s<<3)+n|0,o=a[0|t],h[r>>2]=o,h[r+4>>2]=o>>31,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 1:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(r=(s<<3)+n|0)>>2]=d[0|t],h[r+4>>2]=0,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 2:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(r=(s<<3)+n|0,o=u[t>>1],h[r>>2]=o,h[r+4>>2]=o>>31,t=t+2|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 3:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(r=(s<<3)+n|0)>>2]=f[t>>1],h[r+4>>2]=0,t=t+2|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 4:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(r=(s<<3)+n|0,o=h[t>>2],h[r>>2]=o,h[r+4>>2]=o>>31,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 5:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(r=(s<<3)+n|0)>>2]=h[t>>2],h[r+4>>2]=0,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 6:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(o=h[t+4>>2],h[(r=(s<<3)+n|0)>>2]=h[t>>2],h[r+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 7:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(r=h[t>>2],(0|(o=h[t+4>>2]))<0)break e;if(h[(v=(s<<3)+n|0)>>2]=r,h[v+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 8:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,v=h[r+4>>2];;){if(t>>>0>=v>>>0)break e;if(r=(s<<3)+n|0,c=m[t>>2],b(_(c))<b(0x8000000000000000)?(o=b(_(c))>=b(1)?~~(c>b(0)?b(A(b(w(b(c*b(2.3283064365386963e-10)))),b(4294967296))):b(S(b(b(c-b(~~c>>>0>>>0))*b(2.3283064365386963e-10)))))>>>0:0,l=~~c>>>0):(o=-2147483648,l=0),h[r>>2]=l,h[r+4>>2]=o,t=t+4|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 9:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,v=h[r+4>>2];;){if(t>>>0>=v>>>0)break e;if(r=(s<<3)+n|0,p=g[t>>3],_(p)<0x8000000000000000?(o=_(p)>=1?~~(p>0?A(w(2.3283064365386963e-10*p),4294967295):S(2.3283064365386963e-10*(p-+(~~p>>>0>>>0))))>>>0:0,l=~~p>>>0):(o=-2147483648,l=0),h[r>>2]=l,h[r+4>>2]=o,t=t+8|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break t;break e;case 10:break i;default:break e}if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(o=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,l=h[r+4>>2];;){if(t>>>0>=l>>>0)break e;if(h[(r=(s<<3)+n|0)>>2]=d[0|t],h[r+4>>2]=0,t=t+1|0,!((0|(s=s+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break e}xt((r<<3)+n|0,0,i-r<<3)}}function se(e,t,i){t|=0,i|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0;N=n=N-96|0,s=h[16+(e|=0)>>2],a[n+92|0]=1,h[n+88>>2]=t,h[n+84>>2]=t,h[n+80>>2]=s,m=h[e+20>>2],r=h[m>>2];e:{t:{if((s=h[h[s+28>>2]+(t<<2)>>2])>>>0<h[m+4>>2]-r>>2>>>0){if(r=h[h[e+8>>2]+(h[r+(s<<2)>>2]<<2)>>2],s=h[e+4>>2],d[s+84|0]||(r=h[h[s+68>>2]+(r<<2)>>2]),h[n+72>>2]=0,h[n+76>>2]=0,h[(m=n- -64|0)>>2]=0,h[m+4>>2]=0,h[n+56>>2]=0,h[n+60>>2]=0,ae(s,r,a[s+24|0],n+56|0),r=((s=t+1|0)>>>0)%3|0,t>>>0<=s>>>0)for(m=r?s:t-2|0,l=((t>>>0)%3|0?-1:2)+t|0;;){if(r=m,s=l,h[e+28>>2]&&(r=((s=t+1|0)>>>0)%3|0?s:t-2|0,s=t-1|0,(t>>>0)%3|0||(s=t+2|0)),f=h[e+20>>2],t=h[f>>2],(r=h[h[h[e+16>>2]+28>>2]+(r<<2)>>2])>>>0>=h[f+4>>2]-t>>2>>>0)break t;if(r=h[h[e+8>>2]+(h[t+(r<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(r=h[h[t+68>>2]+(r<<2)>>2]),h[n+48>>2]=0,h[n+52>>2]=0,h[n+40>>2]=0,h[n+44>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,ae(t,r,a[t+24|0],n+32|0),r=h[e+20>>2],t=h[r>>2],(s=h[h[h[e+16>>2]+28>>2]+(s<<2)>>2])>>>0>=h[r+4>>2]-t>>2>>>0)break e;r=h[h[e+8>>2]+(h[t+(s<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(r=h[h[t+68>>2]+(r<<2)>>2]),h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,ae(t,r,a[t+24|0],n+8|0),r=(s=h[n+8>>2])-(t=h[n+56>>2])|0,f=h[n+60>>2],g=h[n+12>>2]-(f+(t>>>0>s>>>0)|0)|0,A=(c=h[n+40>>2])-(s=h[n+64>>2])|0,E=h[n+68>>2],w=Zi(r,g,A,c=h[n+44>>2]-(E+(s>>>0>c>>>0)|0)|0),o=o-(L+(u>>>0<w>>>0)|0)|0,T=S=u-w|0,s=Zi(w=(u=h[n+16>>2])-s|0,E=h[n+20>>2]-((s>>>0>u>>>0)+E|0)|0,S=(u=h[n+32>>2])-t|0,f=h[n+36>>2]-((t>>>0>u>>>0)+f|0)|0),t=L+o|0,o=t=s>>>0>(u=T+s|0)>>>0?t+1|0:t,T=v,b=g,g=(t=h[n+48>>2])-(s=h[n+72>>2])|0,v=h[n+76>>2],b=Zi(r,b,g,M=h[n+52>>2]-(v+(t>>>0<s>>>0)|0)|0),t=L+p|0,t=(r=T+b|0)>>>0<b>>>0?t+1|0:t,v=r-(p=Zi(b=(p=h[n+24>>2])-s|0,s=h[n+28>>2]-((s>>>0>p>>>0)+v|0)|0,S,f))|0,p=t-(L+(r>>>0<p>>>0)|0)|0,r=_-(t=Zi(w,E,g,M))|0,t=y-(L+(t>>>0>_>>>0)|0)|0,y=Zi(b,s,A,c),t=L+t|0,y=t=(_=y+r|0)>>>0<y>>>0?t+1|0:t,t=h[n+88>>2],s=h[n+80>>2];i:if(d[n+92|0]){n:{if(-1==(0|t)||-1==(0|(t=((r=t+1|0)>>>0)%3|0?r:t-2|0))|h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||-1==(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2])))h[n+88>>2]=-1;else if(t=((r=t+1|0)>>>0)%3|0?r:t-2|0,h[n+88>>2]=t,-1!=(0|t))break n;r=-1;r:if(-1!=(0|(t=h[n+84>>2]))){if((t>>>0)%3|0)t=t-1|0;else if(r=-1,-1==(0|(t=t+2|0)))break r;r=-1,h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||(r=-1,-1!=(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2]))&&(r=t-1|0,(t>>>0)%3|0||(r=t+2|0)))}a[n+92|0]=0,h[n+88>>2]=r;break i}if((0|t)!=h[n+84>>2])break i;h[n+88>>2]=-1}else{r=-1;n:if(-1!=(0|t)){if((t>>>0)%3|0)t=t-1|0;else if(r=-1,-1==(0|(t=t+2|0)))break n;r=-1,h[h[s>>2]+(t>>>3&536870908)>>2]>>>t&1||(r=-1,-1!=(0|(t=h[h[h[s+64>>2]+12>>2]+(t<<2)>>2]))&&(r=t-1|0,(t>>>0)%3|0||(r=t+2|0)))}h[n+88>>2]=r}if(-1==(0|(t=h[n+88>>2])))break}r=(t=y>>31)+_|0,s=t,t=t+y|0,f=r^s,l=s^(r>>>0<s>>>0?t+1|0:t),g=-1,r=2147483647,c=t=p>>31,s=t+v|0,t=t+p|0,t=s>>>0<c>>>0?t+1|0:t,s^=c,c=t^=c,A=-1^s,t^=2147483647,m=o;i:{if(h[e+28>>2]){if(!((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)&&(t=l+c|0,s=t=(e=s+f|0)>>>0<s>>>0?t+1|0:t,l=o,o=(t=o>>31)+u|0,c=l,l=t,t=c+t|0,t=o>>>0<l>>>0?t+1|0:t,o^=l,!((0|(l=2147483647^(t^=l)))==(0|s)&(-1^o)>>>0<e>>>0|s>>>0>l>>>0)&&(t=t+s|0,g=e=e+o|0,r=t=e>>>0<o>>>0?t+1|0:t,!t&e>>>0<536870913)))break i;t=r>>>29|0,e=(536870911&r)<<3|g>>>29}else{if((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)break i;if(t=l+c|0,t=(e=s+f|0)>>>0<s>>>0?t+1|0:t,s=e,e=t,r=(t=o>>31)+u|0,l=o,o=t,t=l+t|0,l=r^o,o^=t=r>>>0<o>>>0?t+1|0:t,t=r=l+s|0,(o=!(0&(e=(0|(o^=2147483647))==(0|e)&(-1^l)>>>0<s>>>0|e>>>0>o>>>0)))&(0|(e=e?-1:t))<=536870912|(0|e)<536870912)break i;t=0,e=e>>>29|0}u=Yi(u,m,e,t),v=Yi(v,p,e,t),_=Yi(_,y,e,t)}return h[i+8>>2]=u,h[i+4>>2]=v,h[i>>2]=_,void(N=n+96|0)}Sr(),x()}Sr(),x()}Sr(),x()}function oe(e,t,i){var n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0;N=n=N+-64|0,h[n+56>>2]=0,h[n+48>>2]=0,h[n+52>>2]=0,h[n+40>>2]=0,h[n+44>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,s=n+8|0;e:{t:if(r=f[t+38>>1]){if(r>>>0<=511){if(a=h[t+12>>2],r=h[t+20>>2],r=(l=(o=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,l>>>0>p[t+8>>2]&(0|r)>=(0|a)|(0|r)>(0|a))break t;r=o+h[t>>2]|0,u=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[s+12>>2]=u,r=h[t+20>>2],r=(a=h[t+16>>2]+4|0)>>>0<4?r+1|0:r,h[t+16>>2]=a,h[t+20>>2]=r}else{if(!yi(1,s+12|0,t))break t;u=h[s+12>>2]}if(a=h[s>>2],(r=h[s+4>>2]-a>>2)>>>0<u>>>0?(ei(s,u-r|0),u=h[s+12>>2]):r>>>0<=u>>>0||(h[s+4>>2]=a+(u<<2)),r=1,!u)break e;for(A=h[t+8>>2],g=h[t+12>>2],y=h[s>>2],o=0;;){if(r=0,(0|g)<=(0|(a=h[t+20>>2]))&A>>>0<=(l=h[t+16>>2])>>>0|(0|a)>(0|g))break e;w=h[t>>2],b=d[w+l|0],r=a,r=(a=l+1|0)?r:r+1|0,l=a,h[t+16>>2]=a,h[t+20>>2]=r,a=b>>>2|0,c=0;i:{n:{r:{a:switch(0|(S=3&b)){case 0:break n;case 3:break a;default:break r}if(r=0,(a=a+o|0)>>>0>=u>>>0)break e;xt(y+(o<<2)|0,0,4+(252&b)|0),o=a;break i}for(;;){if((0|r)>=(0|g)&l>>>0>=A>>>0|(0|r)>(0|g))break t;if(u=d[l+w|0],r=(l=l+1|0)?r:r+1|0,h[t+16>>2]=l,h[t+20>>2]=r,a|=u<<(c<<3|6),(0|S)==(0|(c=c+1|0)))break}}h[y+(o<<2)>>2]=a}if(!((u=h[s+12>>2])>>>0>(o=o+1|0)>>>0))break}if(l=s+16|0,A=h[s>>2],a=h[s+16>>2],(r=h[s+20>>2]-a|0)>>>0<=4194303?ei(l,1048576-(r>>>2|0)|0):4194304!=(0|r)&&(h[s+20>>2]=a+4194304),o=h[(r=s+28|0)>>2],(a=h[s+32>>2]-o>>3)>>>0<u>>>0)ti(r,u-a|0),o=h[r>>2];else if(a>>>0>u>>>0&&(h[s+32>>2]=(u<<3)+o),!u)break t;for(c=0,s=0;;){if(g=h[(r=(c<<2)+A|0)>>2],a=s,h[4+(b=(c<<3)+o|0)>>2]=a,h[b>>2]=g,(s=(r=h[r>>2])+a|0)>>>0>1048576)break t;if(!(a>>>0>=s>>>0)){if(g=h[l>>2],b=0,y=7&r)for(;h[g+(a<<2)>>2]=c,a=a+1|0,(0|y)!=(0|(b=b+1|0)););if(!(r-1>>>0<=6))for(;h[(r=g+(a<<2)|0)>>2]=c,h[r+28>>2]=c,h[r+24>>2]=c,h[r+20>>2]=c,h[r+16>>2]=c,h[r+12>>2]=c,h[r+8>>2]=c,h[r+4>>2]=c,(0|s)!=(0|(a=a+8|0)););}if((0|u)==(0|(c=c+1|0)))break}m=1048576==(0|s)}r=m}if(!(!r|(h[n+20>>2]?0:e))){s=0,N=c=N-16|0;e:{if(f[t+38>>1]<=511){if(u=a=h[t+12>>2],r=h[t+20>>2],r=(l=(m=h[t+16>>2])+8|0)>>>0<8?r+1|0:r,(o=h[t+8>>2])>>>0<l>>>0&(0|r)>=(0|a)|(0|r)>(0|a))break e;m=m+h[t>>2]|0,a=d[0|m]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,m=d[m+4|0]|d[m+5|0]<<8|d[m+6|0]<<16|d[m+7|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r}else{if(!hi(1,c+8|0,t))break e;l=h[t+16>>2],r=h[t+20>>2],o=h[t+8>>2],u=h[t+12>>2],a=h[c+8>>2],m=h[c+12>>2]}if(g=o-l|0,!((0|(o=u-(r+(l>>>0>o>>>0)|0)|0))==(0|m)&a>>>0>g>>>0|o>>>0<m>>>0||(r=r+m|0,r=(o=a+l|0)>>>0<a>>>0?r+1|0:r,h[t+16>>2]=o,h[t+20>>2]=r,(0|a)<=0))){t=l+h[t>>2]|0,h[n+48>>2]=t;t:if((l=d[0|(o=(r=a-1|0)+t|0)])>>>0<=63)h[n+52>>2]=r,t=63&d[0|o];else{switch((l>>>6|0)-1|0){case 0:if(a>>>0<2)break e;h[n+52>>2]=a-2,t=d[1+(t=(t+a|0)-2|0)|0]<<8&16128|d[0|t];break t;case 1:if(a>>>0<3)break e;h[n+52>>2]=a-3,t=d[2+(t=(t+a|0)-3|0)|0]<<16&4128768|d[t+1|0]<<8|d[0|t];break t}h[n+52>>2]=a-4,t=d[2+(t=(t+a|0)-4|0)|0]<<16|d[t+3|0]<<24&1056964608|d[t+1|0]<<8|d[0|t]}t=t+4194304|0,h[n+56>>2]=t,s=t>>>0<1073741824}}if(N=c+16|0,s)if(e)for(r=h[n+36>>2],a=h[n+48>>2],o=h[n+24>>2],t=h[n+56>>2];;){e:if(!(t>>>0>4194303))for(_=h[n+52>>2];;){if((0|_)<=0)break e;if(_=_-1|0,h[n+52>>2]=_,t=d[a+_|0]|t<<8,h[n+56>>2]=t,!(t>>>0<4194304))break}if(s=h[o+((l=1048575&t)<<2)>>2],t=(v(h[(m=r+(s<<3)|0)>>2],t>>>20|0)+l|0)-h[m+4>>2]|0,h[n+56>>2]=t,h[(E<<2)+i>>2]=s,_=1,(0|(E=E+1|0))==(0|e))break}else _=1}return(e=h[n+36>>2])&&(h[n+40>>2]=e,ve(e)),(e=h[n+24>>2])&&(h[n+28>>2]=e,ve(e)),(e=h[n+8>>2])&&(h[n+12>>2]=e,ve(e)),N=n- -64|0,_}function le(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,p=b(0),v=0;e:{t:if(n){i:{n:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 3:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(r=u[t>>1]))<0)break t;if(u[(o<<1)+n>>1]=r,t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if(l=1,(0|i)>(0|r))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((r=h[t>>2])-32768>>>0<4294901760)break e;if(u[(o<<1)+n>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((r=h[t>>2])>>>0>32767)break e;if(u[(o<<1)+n>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=h[t>>2],-1==(0|(r=h[t+4>>2]-(c>>>0<32768)|0))&c-32768>>>0<4294901760|-1!=(0|r))break e;if(u[(o<<1)+n>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(r=h[t+4>>2])&(c=h[t>>2])>>>0>32767|r)break e;if(u[(o<<1)+n>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+n|0,p=m[t>>2],r=b(_(p))<b(2147483648)?~~p:-2147483648,u[c>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+n|0,v=g[t>>3],r=_(v)<2147483648?~~v:-2147483648,u[c>>1]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 10:break n;default:break t}if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break t}xt((r<<1)+n|0,0,i-r<<1)}return l}return 0}function ce(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,p=b(0),v=0;e:{t:if(n){i:{n:switch(h[e+28>>2]-1|0){case 0:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(r=a[0|t]))<0)break t;if(u[(o<<1)+n>>1]=255&r,t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if(l=1,(0|i)>(0|r))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 2:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(r=u[t>>1]))<0)break t;if(u[(o<<1)+n>>1]=r,t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if(l=1,(0|i)>(0|r))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((r=h[t>>2])>>>0>65535)break e;if(u[(o<<1)+n>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((r=h[t>>2])>>>0>65535)break e;if(u[(o<<1)+n>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(r=h[t+4>>2])&(c=h[t>>2])>>>0>65535|r)break e;if(u[(o<<1)+n>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(r=h[t+4>>2])&(c=h[t>>2])>>>0>65535|r)break e;if(u[(o<<1)+n>>1]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+n|0,r=(p=m[t>>2])<b(4294967296)&p>=b(0)?~~p>>>0:0,u[c>>1]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<1)+n|0,r=(v=g[t>>3])<4294967296&v>=0?~~v>>>0:0,u[c>>1]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 10:break n;default:break t}if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(u[(o<<1)+n>>1]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break t}xt((r<<1)+n|0,0,i-r<<1)}return l}return 0}function ue(e,t,i){var n,r=0,s=0,o=0,l=0,c=0;N=n=N-48|0,r=f[6693]|f[6694]<<16,s=f[6691]|f[6692]<<16,u[n+38>>1]=s,u[n+40>>1]=s>>>16,u[n+42>>1]=r,u[n+44>>1]=r>>>16,r=h[3345],h[n+32>>2]=h[3344],h[n+36>>2]=r,r=h[3343],h[n+24>>2]=h[3342],h[n+28>>2]=r,r=h[3341],h[n+16>>2]=h[3340],h[n+20>>2]=r,s=h[t+12>>2],r=h[t+20>>2],r=(l=(o=h[t+16>>2])+5|0)>>>0<5?r+1|0:r;e:{t:if(l>>>0>p[t+8>>2]&(0|r)>=(0|s)|(0|r)>(0|s)){if((t=Pi(n+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=gn(r=t+16&-16),h[n+8>>2]=-2147483648|r,h[n>>2]=i,h[n+4>>2]=t;else if(a[n+11|0]=t,i=n,!t)break i;We(i,n+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[n+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}Bi(t=e,e=h[n>>2],h[n+4>>2]),ve(e)}else if(r=o+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,a[0|i]=s,a[i+1|0]=s>>>8,a[i+2|0]=s>>>16,a[i+3|0]=s>>>24,a[i+4|0]=d[r+4|0],r=h[t+20>>2],r=(s=h[t+16>>2]+5|0)>>>0<5?r+1|0:r,h[t+16>>2]=s,h[t+20>>2]=r,xi(i,1404,5))t=gn(32),a[t+16|0]=d[1640],i=d[1636]|d[1637]<<8|d[1638]<<16|d[1639]<<24,r=d[1632]|d[1633]<<8|d[1634]<<16|d[1635]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1628]|d[1629]<<8|d[1630]<<16|d[1631]<<24,r=d[1624]|d[1625]<<8|d[1626]<<16|d[1627]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+17|0]=0,h[e>>2]=-1,Bi(e+4|0,t,17),ve(t);else if((0|(o=h[t+12>>2]))<=(0|r)&p[t+8>>2]<=s>>>0|(0|r)>(0|o)){if((t=Pi(n+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=gn(r=t+16&-16),h[n+8>>2]=-2147483648|r,h[n>>2]=i,h[n+4>>2]=t;else if(a[n+11|0]=t,i=n,!t)break i;We(i,n+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[n+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}Bi(t=e,e=h[n>>2],h[n+4>>2]),ve(e)}else if(a[i+5|0]=d[s+h[t>>2]|0],r=h[t+20>>2],r=(s=h[t+16>>2]+1|0)?r:r+1|0,h[t+16>>2]=s,h[t+20>>2]=r,(0|(o=h[t+12>>2]))<=(0|r)&p[t+8>>2]<=s>>>0|(0|r)>(0|o)){if((t=Pi(n+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=gn(r=t+16&-16),h[n+8>>2]=-2147483648|r,h[n>>2]=i,h[n+4>>2]=t;else if(a[n+11|0]=t,i=n,!t)break i;We(i,n+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[n+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}Bi(t=e,e=h[n>>2],h[n+4>>2]),ve(e)}else if(a[i+6|0]=d[s+h[t>>2]|0],r=h[t+20>>2],r=(s=h[t+16>>2]+1|0)?r:r+1|0,h[t+16>>2]=s,h[t+20>>2]=r,(0|(o=h[t+12>>2]))<=(0|r)&p[t+8>>2]<=s>>>0|(0|r)>(0|o)){if((t=Pi(n+16|0))>>>0>=4294967280)break e;i:{if(t>>>0>=11)i=gn(r=t+16&-16),h[n+8>>2]=-2147483648|r,h[n>>2]=i,h[n+4>>2]=t;else if(a[n+11|0]=t,i=n,!t)break i;We(i,n+16|0,t)}if(a[t+i|0]=0,h[e>>2]=-2,e=e+4|0,a[n+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}Bi(t=e,e=h[n>>2],h[n+4>>2]),ve(e)}else if(a[i+7|0]=d[s+h[t>>2]|0],r=h[t+20>>2],r=(s=h[t+16>>2]+1|0)?r:r+1|0,h[t+16>>2]=s,h[t+20>>2]=r,(0|(o=h[t+12>>2]))<=(0|r)&p[t+8>>2]<=s>>>0|(0|r)>(0|o)){if(t=Wi(n,n+16|0),h[e>>2]=-2,e=e+4|0,a[t+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}if(Bi(e,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break t;ve(h[t>>2])}else if(a[i+8|0]=d[s+h[t>>2]|0],s=r=h[t+20>>2],r=(o=(c=h[t+16>>2])+1|0)?r:r+1|0,h[t+16>>2]=o,h[t+20>>2]=r,l=h[t+12>>2],r=s,r=(s=c+3|0)>>>0<3?r+1|0:r,s>>>0>p[t+8>>2]&(0|r)>=(0|l)|(0|r)>(0|l)){if(t=Wi(n,n+16|0),h[e>>2]=-2,e=e+4|0,a[t+11|0]>=0){t=h[n+4>>2],h[e>>2]=h[n>>2],h[e+4>>2]=t,h[e+8>>2]=h[n+8>>2];break t}if(Bi(e,h[t>>2],h[t+4>>2]),a[t+11|0]>=0)break t;ve(h[t>>2])}else s=i,i=o+h[t>>2]|0,u[s+10>>1]=d[0|i]|d[i+1|0]<<8,r=h[t+20>>2],r=(i=h[t+16>>2]+2|0)>>>0<2?r+1|0:r,h[t+16>>2]=i,h[t+20>>2]=r,h[e+8>>2]=0,h[e+12>>2]=0,h[e>>2]=0,h[e+4>>2]=0;return void(N=n+48|0)}mr(),x()}function he(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,p=b(0),v=0;e:{t:if(n){i:{n:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=u[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 5:if((0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if((0|(r=h[t>>2]))<0)break t;if(h[(o<<2)+n>>2]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if(l=1,(0|i)>(0|r))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(r=h[t>>2],-1!=(h[t+4>>2]-(r>>>0<2147483648)|0))break e;if(h[(o<<2)+n>>2]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(!(r=h[t+4>>2])&(c=h[t>>2])>>>0>2147483647|r)break e;if(h[(o<<2)+n>>2]=c,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+n|0,p=m[t>>2],r=b(_(p))<b(2147483648)?~~p:-2147483648,h[c>>2]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+n|0,v=g[t>>3],r=_(v)<2147483648?~~v:-2147483648,h[c>>2]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 10:break n;default:break t}if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break t}xt((r<<2)+n|0,0,i-r<<2)}return l}return 0}function de(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,p=b(0),v=0;e:{t:if(n){i:{n:switch(h[e+28>>2]-1|0){case 0:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=a[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 1:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 2:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=u[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 3:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=f[t>>1],t=t+2|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 4:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 5:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=h[t>>2],t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 6:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(r=h[t>>2],h[t+4>>2])break e;if(h[(o<<2)+n>>2]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 7:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(r=h[t>>2],h[t+4>>2])break e;if(h[(o<<2)+n>>2]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 8:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+n|0,r=(p=m[t>>2])<b(4294967296)&p>=b(0)?~~p>>>0:0,h[c>>2]=r,t=t+4|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 9:if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(c=(o<<2)+n|0,r=(v=g[t>>3])<4294967296&v>=0?~~v>>>0:0,h[c>>2]=r,t=t+8|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)>(0|r))break i;break t;case 10:break n;default:break t}if(l=1,(0|((0|i)<(0|(r=a[e+24|0]))?i:r))>0)for(r=h[e>>2],t=(s=h[r>>2])+(t=h[e+48>>2]+Zi(h[e+40>>2],h[e+44>>2],t,0)|0)|0,s=h[r+4>>2];;){if(t>>>0>=s>>>0)break e;if(h[(o<<2)+n>>2]=d[0|t],t=t+1|0,!((0|(o=o+1|0))<(0|((0|i)<(0|(r=a[e+24|0]))?i:r))))break}if((0|i)<=(0|r))break t}xt((r<<2)+n|0,0,i-r<<2)}return l}return 0}function fe(e,t,i,n){var r,s=0,o=0,l=0,c=0,u=0,f=0;if(N=r=N-80|0,s=h[i+36>>2],h[r+72>>2]=h[i+32>>2],h[r+76>>2]=s,o=h[i+28>>2],h[(s=r- -64|0)>>2]=h[i+24>>2],h[s+4>>2]=o,s=h[i+20>>2],h[r+56>>2]=h[i+16>>2],h[r+60>>2]=s,s=h[i+12>>2],h[r+48>>2]=h[i+8>>2],h[r+52>>2]=s,s=h[i+4>>2],h[r+40>>2]=h[i>>2],h[r+44>>2]=s,ue(e,r+40|0,r+24|0),!h[e>>2])if(u=e+4|0,a[e+15|0]<0&&ve(h[u>>2]),d[r+31|0])t=gn(32),i=d[1665]|d[1666]<<8|d[1667]<<16|d[1668]<<24,a[t+23|0]=i,a[t+24|0]=i>>>8,a[t+25|0]=i>>>16,a[t+26|0]=i>>>24,i=d[1662]|d[1663]<<8|d[1664]<<16|d[1665]<<24,n=d[1658]|d[1659]<<8|d[1660]<<16|d[1661]<<24,a[t+16|0]=n,a[t+17|0]=n>>>8,a[t+18|0]=n>>>16,a[t+19|0]=n>>>24,a[t+20|0]=i,a[t+21|0]=i>>>8,a[t+22|0]=i>>>16,a[t+23|0]=i>>>24,i=d[1654]|d[1655]<<8|d[1656]<<16|d[1657]<<24,n=d[1650]|d[1651]<<8|d[1652]<<16|d[1653]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1646]|d[1647]<<8|d[1648]<<16|d[1649]<<24,n=d[1642]|d[1643]<<8|d[1644]<<16|d[1645]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+27|0]=0,h[e>>2]=-1,Bi(u,t,27),ve(t);else{N=c=N-16|0;e:{switch(a[r+32|0]){case 0:s=gn(44),h[s>>2]=0,h[s+4>>2]=0,h[s+40>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,o=sn(s),h[s>>2]=13528,h[r+8>>2]=0,h[r+12>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+16>>2]=o;break e;case 1:s=gn(44),h[s>>2]=0,h[s+4>>2]=0,h[s+40>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,o=sn(s),h[s>>2]=13436,h[r+8>>2]=0,h[r+12>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+16>>2]=o;break e}o=gn(32),s=d[1694]|d[1695]<<8|d[1696]<<16|d[1697]<<24,a[o+24|0]=s,a[o+25|0]=s>>>8,a[o+26|0]=s>>>16,a[o+27|0]=s>>>24,s=d[1690]|d[1691]<<8|d[1692]<<16|d[1693]<<24,l=d[1686]|d[1687]<<8|d[1688]<<16|d[1689]<<24,a[o+16|0]=l,a[o+17|0]=l>>>8,a[o+18|0]=l>>>16,a[o+19|0]=l>>>24,a[o+20|0]=s,a[o+21|0]=s>>>8,a[o+22|0]=s>>>16,a[o+23|0]=s>>>24,s=d[1682]|d[1683]<<8|d[1684]<<16|d[1685]<<24,l=d[1678]|d[1679]<<8|d[1680]<<16|d[1681]<<24,a[o+8|0]=l,a[o+9|0]=l>>>8,a[o+10|0]=l>>>16,a[o+11|0]=l>>>24,a[o+12|0]=s,a[o+13|0]=s>>>8,a[o+14|0]=s>>>16,a[o+15|0]=s>>>24,s=d[1674]|d[1675]<<8|d[1676]<<16|d[1677]<<24,l=d[1670]|d[1671]<<8|d[1672]<<16|d[1673]<<24,a[0|o]=l,a[o+1|0]=l>>>8,a[o+2|0]=l>>>16,a[o+3|0]=l>>>24,a[o+4|0]=s,a[o+5|0]=s>>>8,a[o+6|0]=s>>>16,a[o+7|0]=s>>>24,a[o+28|0]=0,h[c>>2]=-1,Bi(s=4|c,o,28),f=a[c+15|0],h[r>>2]=h[c>>2],l=r+4|0,(0|f)>=0?(f=h[s+4>>2],h[l>>2]=h[s>>2],h[l+4>>2]=f,h[l+8>>2]=h[s+8>>2]):Bi(l,h[c+4>>2],h[c+8>>2]),h[r+16>>2]=0,a[c+15|0]<0&&ve(h[c+4>>2]),ve(o)}N=c+16|0;e:if(s=h[r>>2]){if(h[e>>2]=s,a[r+15|0]>=0){t=h[4+(e=4|r)>>2],h[u>>2]=h[e>>2],h[u+4>>2]=t,h[u+8>>2]=h[e+8>>2];break e}Bi(u,h[r+4>>2],h[r+8>>2])}else s=h[r+16>>2],h[r+16>>2]=0,V(e,s,t,i,n),h[e>>2]||(a[u+11|0]<0&&ve(h[u>>2]),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0),Rr[h[h[s>>2]+4>>2]](s);e=h[r+16>>2],h[r+16>>2]=0,e&&Rr[h[h[e>>2]+4>>2]](e),a[r+15|0]>=0||ve(h[r+4>>2])}N=r+80|0}function pe(e,t){var i=0,n=0,r=0,s=0,o=0,l=0;if((s=((i=h[e+4>>2])-(n=h[e>>2])|0)/144|0)>>>0<t>>>0)if(n=e,(o=t-s|0)>>>0<=((i=h[e+8>>2])-(e=h[e+4>>2])|0)/144>>>0){if(o){for(t=v(o,144)+e|0;h[e>>2]=-1,gi(e+4|0),h[e+104>>2]=0,h[e+108>>2]=0,a[e+100|0]=1,h[e+112>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,h[e+124>>2]=0,h[e+128>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,h[e+140>>2]=0,(0|t)!=(0|(e=e+144|0)););e=t}h[n+4>>2]=e}else{e:{t:{i:{if((l=(s=((t=e)-(e=h[n>>2])|0)/144|0)+o|0)>>>0<29826162){if(e=(t=(i-e|0)/144|0)<<1,r=t>>>0<14913080?e>>>0<l>>>0?l:e:29826161){if(r>>>0>=29826162)break i;i=gn(v(r,144))}else i=0;for(l=(t=i+v(s,144)|0)+v(o,144)|0,e=t;h[e>>2]=-1,gi(e+4|0),h[e+104>>2]=0,h[e+108>>2]=0,a[e+100|0]=1,h[e+112>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,h[e+124>>2]=0,h[e+128>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,h[e+140>>2]=0,(0|l)!=(0|(e=e+144|0)););if(s=i+v(r,144)|0,(0|(e=h[n+4>>2]))==(0|(r=h[n>>2])))break t;for(;e=e-144|0,h[(t=t-144|0)>>2]=h[e>>2],h[t+4>>2]=h[e+4>>2],h[t+8>>2]=h[e+8>>2],h[t+12>>2]=h[e+12>>2],h[e+12>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[t+16>>2]=h[e+16>>2],h[t+20>>2]=h[e+20>>2],h[t+24>>2]=h[e+24>>2],h[e+24>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,i=d[e+28|0],h[t+40>>2]=0,h[t+32>>2]=0,h[t+36>>2]=0,a[t+28|0]=i,h[t+32>>2]=h[e+32>>2],h[t+36>>2]=h[e+36>>2],h[t+40>>2]=h[e+40>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[t+52>>2]=0,h[t+44>>2]=0,h[t+48>>2]=0,h[t+44>>2]=h[e+44>>2],h[t+48>>2]=h[e+48>>2],h[t+52>>2]=h[e+52>>2],h[e+52>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[(i=t- -64|0)>>2]=0,h[t+56>>2]=0,h[t+60>>2]=0,h[t+56>>2]=h[e+56>>2],h[t+60>>2]=h[e+60>>2],o=i,i=e- -64|0,h[o>>2]=h[i>>2],h[i>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[t+68>>2]=h[e+68>>2],i=h[e+72>>2],h[t+84>>2]=0,h[t+76>>2]=0,h[t+80>>2]=0,h[t+72>>2]=i,h[t+76>>2]=h[e+76>>2],h[t+80>>2]=h[e+80>>2],h[t+84>>2]=h[e+84>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[t+96>>2]=0,h[t+88>>2]=0,h[t+92>>2]=0,h[t+88>>2]=h[e+88>>2],h[t+92>>2]=h[e+92>>2],h[t+96>>2]=h[e+96>>2],h[e+96>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,i=d[e+100|0],h[t+112>>2]=0,h[t+104>>2]=0,h[t+108>>2]=0,a[t+100|0]=i,h[t+104>>2]=h[e+104>>2],h[t+108>>2]=h[e+108>>2],h[t+112>>2]=h[e+112>>2],h[e+112>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0,h[t+124>>2]=0,h[t+116>>2]=0,h[t+120>>2]=0,h[t+116>>2]=h[e+116>>2],h[t+120>>2]=h[e+120>>2],h[t+124>>2]=h[e+124>>2],h[e+124>>2]=0,h[e+116>>2]=0,h[e+120>>2]=0,i=h[e+128>>2],h[t+140>>2]=0,h[t+132>>2]=0,h[t+136>>2]=0,h[t+128>>2]=i,h[t+132>>2]=h[e+132>>2],h[t+136>>2]=h[e+136>>2],h[t+140>>2]=h[e+140>>2],h[e+140>>2]=0,h[e+132>>2]=0,h[e+136>>2]=0,(0|e)!=(0|r););if(h[n+8>>2]=s,e=h[n+4>>2],h[n+4>>2]=l,r=h[n>>2],h[n>>2]=t,(0|e)==(0|r))break e;for(;(t=h[e-12>>2])&&(h[e-8>>2]=t,ve(t)),(t=h[e-28>>2])&&(h[e-24>>2]=t,ve(t)),(t=h[e-40>>2])&&(h[e-36>>2]=t,ve(t)),Ni(e-140|0),(0|r)!=(0|(e=e-144|0)););break e}vr(),x()}Qi(1336),x()}h[n+8>>2]=s,h[n+4>>2]=l,h[n>>2]=t}r&&ve(r)}else if(t>>>0<s>>>0){if((0|(n=n+v(t,144)|0))!=(0|i))for(;(t=h[i-12>>2])&&(h[i-8>>2]=t,ve(t)),(t=h[i-28>>2])&&(h[i-24>>2]=t,ve(t)),(t=h[i-40>>2])&&(h[i-36>>2]=t,ve(t)),Ni(i-140|0),(0|n)!=(0|(i=i-144|0)););h[e+4>>2]=n}}function me(e,t,i){t|=0,i|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0;if(N=n=N-96|0,r=h[16+(e|=0)>>2],a[n+92|0]=1,h[n+88>>2]=t,h[n+84>>2]=t,h[n+80>>2]=r,-1!=(0|t)&&(m=h[e+20>>2],s=h[m>>2],!((r=h[h[r>>2]+(t<<2)>>2])>>>0>=h[m+4>>2]-s>>2>>>0))){r=h[h[e+8>>2]+(h[s+(r<<2)>>2]<<2)>>2],s=h[e+4>>2],d[s+84|0]||(r=h[h[s+68>>2]+(r<<2)>>2]),h[n+72>>2]=0,h[n+76>>2]=0,h[(m=n- -64|0)>>2]=0,h[m+4>>2]=0,h[n+56>>2]=0,h[n+60>>2]=0,ae(s,r,a[s+24|0],n+56|0),m=((r=t+1|0)>>>0)%3|0?r:t-2|0,l=((t>>>0)%3|0?-1:2)+t|0;e:{t:{for(;;){if(s=m,r=l,h[e+28>>2]&&(s=((r=t+1|0)>>>0)%3|0?r:t-2|0,r=t-1|0,(t>>>0)%3|0||(r=t+2|0)),-1==(0|s))break e;if(f=h[e+20>>2],t=h[f>>2],(s=h[h[h[e+16>>2]>>2]+(s<<2)>>2])>>>0>=h[f+4>>2]-t>>2>>>0)break e;if(s=h[h[e+8>>2]+(h[(s<<2)+t>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(s=h[h[t+68>>2]+(s<<2)>>2]),h[n+48>>2]=0,h[n+52>>2]=0,h[n+40>>2]=0,h[n+44>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,ae(t,s,a[t+24|0],n+32|0),-1==(0|r))break t;if(s=h[e+20>>2],t=h[s>>2],(r=h[h[h[e+16>>2]>>2]+(r<<2)>>2])>>>0>=h[s+4>>2]-t>>2>>>0)break t;if(s=h[h[e+8>>2]+(h[t+(r<<2)>>2]<<2)>>2],t=h[e+4>>2],d[t+84|0]||(s=h[h[t+68>>2]+(s<<2)>>2]),h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,ae(t,s,a[t+24|0],n+8|0),s=(r=h[n+8>>2])-(t=h[n+56>>2])|0,f=h[n+60>>2],g=h[n+12>>2]-(f+(t>>>0>r>>>0)|0)|0,A=(c=h[n+40>>2])-(r=h[n+64>>2])|0,E=h[n+68>>2],w=Zi(s,g,A,c=h[n+44>>2]-(E+(r>>>0>c>>>0)|0)|0),o=o-(L+(u>>>0<w>>>0)|0)|0,T=S=u-w|0,r=Zi(w=(u=h[n+16>>2])-r|0,E=h[n+20>>2]-((r>>>0>u>>>0)+E|0)|0,S=(u=h[n+32>>2])-t|0,f=h[n+36>>2]-((t>>>0>u>>>0)+f|0)|0),t=L+o|0,o=t=r>>>0>(u=T+r|0)>>>0?t+1|0:t,T=v,b=g,g=(t=h[n+48>>2])-(r=h[n+72>>2])|0,v=h[n+76>>2],b=Zi(s,b,g,M=h[n+52>>2]-(v+(t>>>0<r>>>0)|0)|0),t=L+p|0,t=(s=T+b|0)>>>0<b>>>0?t+1|0:t,v=s-(p=Zi(b=(p=h[n+24>>2])-r|0,r=h[n+28>>2]-((r>>>0>p>>>0)+v|0)|0,S,f))|0,p=t-(L+(s>>>0<p>>>0)|0)|0,s=_-(t=Zi(w,E,g,M))|0,t=y-(L+(t>>>0>_>>>0)|0)|0,y=Zi(b,r,A,c),t=L+t|0,y=t=(_=y+s|0)>>>0<y>>>0?t+1|0:t,_t(n+80|0),-1==(0|(t=h[n+88>>2])))break}s=(t=y>>31)+_|0,r=t,t=t+y|0,f=s^r,l=r^(s>>>0<r>>>0?t+1|0:t),g=-1,s=2147483647,c=t=p>>31,r=t+v|0,t=t+p|0,t=r>>>0<c>>>0?t+1|0:t,r^=c,c=t^=c,A=-1^r,t^=2147483647,m=o;i:{if(h[e+28>>2]){if(!((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)&&(t=l+c|0,r=t=(e=r+f|0)>>>0<r>>>0?t+1|0:t,l=o,o=(t=o>>31)+u|0,c=l,l=t,t=c+t|0,t=o>>>0<l>>>0?t+1|0:t,o^=l,!((0|(l=2147483647^(t^=l)))==(0|r)&(-1^o)>>>0<e>>>0|r>>>0>l>>>0)&&(t=t+r|0,g=e=e+o|0,s=t=e>>>0<o>>>0?t+1|0:t,!t&e>>>0<536870913)))break i;t=s>>>29|0,e=(536870911&s)<<3|g>>>29}else{if((0|t)==(0|l)&f>>>0>A>>>0|t>>>0<l>>>0)break i;if(t=l+c|0,t=(e=r+f|0)>>>0<r>>>0?t+1|0:t,r=e,e=t,s=(t=o>>31)+u|0,l=o,o=t,t=l+t|0,l=s^o,o^=t=s>>>0<o>>>0?t+1|0:t,t=s=l+r|0,(o=!(0&(e=(0|(o^=2147483647))==(0|e)&(-1^l)>>>0<r>>>0|e>>>0>o>>>0)))&(0|(e=e?-1:t))<=536870912|(0|e)<536870912)break i;t=0,e=e>>>29|0}u=Yi(u,m,e,t),v=Yi(v,p,e,t),_=Yi(_,y,e,t)}return h[i+8>>2]=u,h[i+4>>2]=v,h[i>>2]=_,void(N=n+96|0)}Sr(),x()}Sr(),x()}Sr(),x()}function ge(e,t){e|=0;var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0;if(!((0|(t|=0))<0||(n=h[e+12>>2])-(i=h[e+8>>2])>>2>>>0<=t>>>0)){a=h[(r=i+(t<<2)|0)>>2],l=h[a+60>>2],s=h[a+56>>2];e:{if((0|(i=r+4|0))!=(0|n)){for(;o=h[i>>2],h[i>>2]=0,h[r>>2]=o,a&&ji(a),r=r+4|0,(0|(i=i+4|0))!=(0|n);)a=h[r>>2];if((0|r)==(0|(n=h[e+12>>2])))break e}for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&ji(i),(0|n)!=(0|r););}h[e+12>>2]=r;e:if(!(!(a=h[e+4>>2])|(0|l)<0)&&(0|(n=h[a+24>>2]))!=(0|(i=h[a+28>>2])))for(;;){if((0|l)==h[h[n>>2]+24>>2]){t:{if((0|(r=n+4|0))!=(0|(l=h[a+28>>2]))){for(;o=h[r>>2],h[r>>2]=0,i=h[n>>2],h[n>>2]=o,i&&(an(i+12|0,h[i+16>>2]),pn(i,h[i+4>>2]),ve(i)),n=n+4|0,(0|l)!=(0|(r=r+4|0)););if((0|(r=h[a+28>>2]))==(0|n))break t}for(;i=h[(r=r-4|0)>>2],h[r>>2]=0,i&&(an(i+12|0,h[i+16>>2]),pn(i,h[i+4>>2]),ve(i)),(0|n)!=(0|r););}h[a+28>>2]=n;break e}if((0|i)==(0|(n=n+4|0)))break}e:if(!((0|s)>4)){t:if(r=v(s,12)+e|0,(0|(n=h[r+20>>2]))!=(0|(i=h[r+24>>2]))){for(;;){if(h[n>>2]==(0|t))break t;if((0|i)==(0|(n=n+4|0)))break}break e}(0|n)!=(0|i)&&((i=i-(a=n+4|0)|0)&&At(n,a,i),h[r+24>>2]=n+i)}if(r=h[e+20>>2],i=h[e+24>>2]-r|0){if(l=1&(a=(n=i>>2)>>>0>1?n:1),n=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=n<<2)+r|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=r+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),n=n+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(n=r+(n<<2)|0)>>2]))<=(0|t)||(h[n>>2]=i-1))}if(r=h[e+32>>2],i=h[e+36>>2]-r|0){if(l=1&(a=(n=i>>2)>>>0>1?n:1),n=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=n<<2)+r|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=r+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),n=n+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(n=r+(n<<2)|0)>>2]))<=(0|t)||(h[n>>2]=i-1))}if(r=h[e+44>>2],i=h[e+48>>2]-r|0){if(l=1&(a=(n=i>>2)>>>0>1?n:1),n=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=n<<2)+r|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=r+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),n=n+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(n=r+(n<<2)|0)>>2]))<=(0|t)||(h[n>>2]=i-1))}if(r=h[e+56>>2],i=h[e+60>>2]-r|0){if(l=1&(a=(n=i>>2)>>>0>1?n:1),n=0,i>>>0>=8)for(a&=-2,i=0;(0|(c=h[(o=(s=n<<2)+r|0)>>2]))>(0|t)&&(h[o>>2]=c-1),(0|(o=h[(s=r+(4|s)|0)>>2]))>(0|t)&&(h[s>>2]=o-1),n=n+2|0,(0|a)!=(0|(i=i+2|0)););l&&((0|(i=h[(n=r+(n<<2)|0)>>2]))<=(0|t)||(h[n>>2]=i-1))}if(i=(i=h[e+72>>2])-(e=h[e+68>>2])|0){if(a=1&(r=(n=i>>2)>>>0>1?n:1),n=0,i>>>0>=8)for(r&=-2,i=0;(0|(o=h[(s=(l=n<<2)+e|0)>>2]))>(0|t)&&(h[s>>2]=o-1),(0|(s=h[(l=e+(4|l)|0)>>2]))>(0|t)&&(h[l>>2]=s-1),n=n+2|0,(0|r)!=(0|(i=i+2|0)););a&&((0|(i=t))>=(0|(t=h[(e=e+(n<<2)|0)>>2]))||(h[e>>2]=t-1))}}}function ve(e){var t=0,i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0;e:if(e|=0){a=(n=e-8|0)+(e=-8&(t=h[e-4>>2]))|0;t:if(!(1&t)){if(!(3&t))break e;if((n=n-(t=h[n>>2])|0)>>>0<p[4237])break e;if(e=e+t|0,h[4238]==(0|n)){if(3==(3&(t=h[a+4>>2])))return h[4235]=e,h[a+4>>2]=-2&t,h[n+4>>2]=1|e,void(h[e+n>>2]=e)}else{if(t>>>0<=255){if(r=h[n+8>>2],t=t>>>3|0,(0|(i=h[n+12>>2]))==(0|r)){l=16932,c=h[4233]&In(t),h[l>>2]=c;break t}h[r+12>>2]=i,h[i+8>>2]=r;break t}if(o=h[n+24>>2],(0|n)==(0|(t=h[n+12>>2])))if((i=h[(r=n+20|0)>>2])||(i=h[(r=n+16|0)>>2])){for(;s=r,(i=h[(r=(t=i)+20|0)>>2])||(r=t+16|0,i=h[t+16>>2]););h[s>>2]=0}else t=0;else i=h[n+8>>2],h[i+12>>2]=t,h[t+8>>2]=i;if(!o)break t;r=h[n+28>>2];i:{if(h[(i=17236+(r<<2)|0)>>2]==(0|n)){if(h[i>>2]=t,t)break i;l=16936,c=h[4234]&In(r),h[l>>2]=c;break t}if(h[o+(h[o+16>>2]==(0|n)?16:20)>>2]=t,!t)break t}if(h[t+24>>2]=o,(i=h[n+16>>2])&&(h[t+16>>2]=i,h[i+24>>2]=t),!(i=h[n+20>>2]))break t;h[t+20>>2]=i,h[i+24>>2]=t}}if(!(n>>>0>=a>>>0)&&1&(t=h[a+4>>2])){t:{if(!(2&t)){if(h[4239]==(0|a)){if(h[4239]=n,e=h[4236]+e|0,h[4236]=e,h[n+4>>2]=1|e,h[4238]!=(0|n))break e;return h[4235]=0,void(h[4238]=0)}if(h[4238]==(0|a))return h[4238]=n,e=h[4235]+e|0,h[4235]=e,h[n+4>>2]=1|e,void(h[e+n>>2]=e);e=(-8&t)+e|0;i:if(t>>>0<=255){if(r=h[a+8>>2],t=t>>>3|0,(0|(i=h[a+12>>2]))==(0|r)){l=16932,c=h[4233]&In(t),h[l>>2]=c;break i}h[r+12>>2]=i,h[i+8>>2]=r}else{if(o=h[a+24>>2],(0|a)==(0|(t=h[a+12>>2])))if((i=h[(r=a+20|0)>>2])||(i=h[(r=a+16|0)>>2])){for(;s=r,(i=h[(r=(t=i)+20|0)>>2])||(r=t+16|0,i=h[t+16>>2]););h[s>>2]=0}else t=0;else i=h[a+8>>2],h[i+12>>2]=t,h[t+8>>2]=i;if(o){r=h[a+28>>2];n:{if(h[(i=17236+(r<<2)|0)>>2]==(0|a)){if(h[i>>2]=t,t)break n;l=16936,c=h[4234]&In(r),h[l>>2]=c;break i}if(h[o+(h[o+16>>2]==(0|a)?16:20)>>2]=t,!t)break i}h[t+24>>2]=o,(i=h[a+16>>2])&&(h[t+16>>2]=i,h[i+24>>2]=t),(i=h[a+20>>2])&&(h[t+20>>2]=i,h[i+24>>2]=t)}}if(h[n+4>>2]=1|e,h[e+n>>2]=e,h[4238]!=(0|n))break t;return void(h[4235]=e)}h[a+4>>2]=-2&t,h[n+4>>2]=1|e,h[e+n>>2]=e}if(e>>>0<=255)return t=16972+((e=e>>>3|0)<<3)|0,(i=h[4233])&(e=1<<e)?e=h[t+8>>2]:(h[4233]=e|i,e=t),h[t+8>>2]=n,h[e+12>>2]=n,h[n+12>>2]=t,void(h[n+8>>2]=e);r=31,h[n+16>>2]=0,h[n+20>>2]=0,e>>>0<=16777215&&(t=e>>>8|0,t<<=s=t+1048320>>>16&8,r=28+((t=((t<<=r=t+520192>>>16&4)<<(i=t+245760>>>16&2)>>>15|0)-(i|r|s)|0)<<1|e>>>t+21&1)|0),h[n+28>>2]=r,s=17236+(r<<2)|0;t:{i:{if((i=h[4234])&(t=1<<r)){for(r=e<<(31==(0|r)?0:25-(r>>>1|0)|0),t=h[s>>2];;){if(i=t,(-8&h[t+4>>2])==(0|e))break i;if(t=r>>>29|0,r<<=1,!(t=h[16+(s=i+(4&t)|0)>>2]))break}h[s+16>>2]=n,h[n+24>>2]=i}else h[4234]=t|i,h[s>>2]=n,h[n+24>>2]=s;h[n+12>>2]=n,h[n+8>>2]=n;break t}e=h[i+8>>2],h[e+12>>2]=n,h[i+8>>2]=n,h[n+24>>2]=0,h[n+12>>2]=i,h[n+8>>2]=e}e=h[4241]-1|0,h[4241]=e||-1}}}function be(e,t,i,n){var r,s=0,o=0,l=0,c=0,u=0,d=b(0),f=0,g=0,v=b(0);r=h[i>>2];e:{t:if(o=h[t+4>>2]){i:{if((l=Dn(o))>>>0>=2){if((s=r)>>>0>=o>>>0&&(s=(r>>>0)%(o>>>0)|0),!(i=h[h[t>>2]+(s<<2)>>2]))break t;if(l>>>0<=1)break i;for(;;){if(!(i=h[i>>2]))break t;if((0|(l=h[i+4>>2]))!=(0|r)&&(o>>>0<=l>>>0&&(l=(l>>>0)%(o>>>0)|0),(0|s)!=(0|l)))break t;if(h[i+8>>2]==(0|r))break}t=0;break e}if(s=o-1&r,!(i=h[h[t>>2]+(s<<2)>>2]))break t}for(l=o-1|0;;){if(!(i=h[i>>2]))break t;if((0|(c=h[i+4>>2]))!=(0|r)&(l&c)!=(0|s))break t;if(h[i+8>>2]==(0|r))break}t=0;break e}if(i=gn(16),n=h[h[n>>2]>>2],h[i+12>>2]=0,h[i+8>>2]=n,h[i+4>>2]=r,h[i>>2]=0,v=b(h[t+12>>2]+1>>>0),d=m[t+16>>2],v>b(d*b(o>>>0))||!o){l=0!=(o-1&o)|o>>>0<3|o<<1,s=2,1!=(0|(n=(n=(d=b(S(b(v/d))))<b(4294967296)&d>=b(0)?~~d>>>0:0)>>>0>l>>>0?n:l))&&(n&n-1?(s=$(n),o=h[t+4>>2]):s=n);t:{if(s>>>0<=o>>>0){if(s>>>0>=o>>>0)break t;if(l=o>>>0<3,n=(d=b(S(b(b(p[t+12>>2])/m[t+16>>2]))))<b(4294967296)&d>=b(0)?~~d>>>0:0,(s=(n=l||Dn(o)>>>0>1?$(n):n>>>0<2?n:1<<32-y(n-1|0))>>>0>s>>>0?n:s)>>>0>=o>>>0)break t}o=0,c=s;i:{n:{r:{a:{if(s){if(c>>>0>=1073741824)break a;if(s=gn(c<<2),n=h[t>>2],h[t>>2]=s,n&&ve(n),h[t+4>>2]=c,s=0,c-1>>>0>=3)for(l=-4&c;h[(n=s<<2)+h[t>>2]>>2]=0,h[h[t>>2]+(4|n)>>2]=0,h[h[t>>2]+(8|n)>>2]=0,h[h[t>>2]+(12|n)>>2]=0,s=s+4|0,(0|l)!=(0|(o=o+4|0)););if(n=3&c)for(;h[h[t>>2]+(s<<2)>>2]=0,s=s+1|0,(0|n)!=(0|(u=u+1|0)););if(!(o=h[t+8>>2]))break i;if(n=t+8|0,l=h[o+4>>2],(s=Dn(c))>>>0<2)break r;if(l=l>>>0>=c>>>0?(l>>>0)%(c>>>0)|0:l,h[h[t>>2]+(l<<2)>>2]=n,!(n=h[o>>2]))break i;if(s>>>0<=1)break n;for(;;){if(c>>>0<=(u=h[n+4>>2])>>>0&&(u=(u>>>0)%(c>>>0)|0),(0|l)!=(0|u))if(s=n,g=(f=u<<2)+h[t>>2]|0,h[g>>2]){for(;u=s,s=h[s>>2],h[n+8>>2]==h[s+8>>2]&&s;);h[o>>2]=s,h[u>>2]=h[h[f+h[t>>2]>>2]>>2],h[h[f+h[t>>2]>>2]>>2]=n}else h[g>>2]=o,o=n,l=u;else o=n;if(!(n=h[o>>2]))break}break i}n=h[t>>2],h[t>>2]=0,n&&ve(n),h[t+4>>2]=0;break i}Qi(1336),x()}if(l&=c-1,h[h[t>>2]+(l<<2)>>2]=n,!(n=h[o>>2]))break i}for(f=c-1|0;;){if((0|(c=f&h[n+4>>2]))!=(0|l))if(s=n,g=(u=c<<2)+h[t>>2]|0,h[g>>2]){for(;c=s,s=h[s>>2],h[n+8>>2]==h[s+8>>2]&&s;);h[o>>2]=s,h[c>>2]=h[h[u+h[t>>2]>>2]>>2],h[h[u+h[t>>2]>>2]>>2]=n}else h[g>>2]=o,o=n,l=c;else o=n;if(!(n=h[o>>2]))break}}}s=(n=(o=h[t+4>>2])-1|0)&o?o>>>0>r>>>0?r:(r>>>0)%(o>>>0)|0:n&r}s=h[t>>2]+(s<<2)|0;t:if(n=h[s>>2])h[i>>2]=h[n>>2],h[n>>2]=i;else{if(h[i>>2]=h[t+8>>2],h[t+8>>2]=i,h[s>>2]=t+8,!(n=h[i>>2]))break t;n=h[n+4>>2],(s=o-1|0)&o?n>>>0<o>>>0||(n=(n>>>0)%(o>>>0)|0):n&=s,h[h[t>>2]+(n<<2)>>2]=i}h[t+12>>2]=h[t+12>>2]+1,t=1}a[e+4|0]=t,h[e>>2]=i}function _e(e){var t=0,i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;h[e+56>>2]=h[e+52>>2],h[e+44>>2]=h[e+40>>2];e:{t:{i:{if(r=h[e+64>>2],(0|(i=h[r+24>>2]))!=h[r+28>>2])for(;;){n=t;n:if(-1!=(0|(l=h[(c<<2)+i>>2]))){if((0|(t=h[e+56>>2]))==h[e+60>>2]){if((t=1+(s=(i=t-(r=h[e+52>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(a=i>>1,a=i>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break e;t=gn(a<<2)}else t=0;h[(s=t+(s<<2)|0)>>2]=n,(0|i)>0&&We(t,r,i),h[e+60>>2]=t+(a<<2),h[e+56>>2]=s+4,h[e+52>>2]=t,r&&ve(r)}else h[t>>2]=n,h[e+56>>2]=t+4;r:if(h[h[e+12>>2]+(c>>>3&536870908)>>2]>>>c&1&&-1!=(0|(t=((t=l+1|0)>>>0)%3|0?t:l-2|0))&&(r=h[e>>2],!(h[r+(t>>>3&536870908)>>2]>>>t&1)&&-1!=(0|(t=h[h[h[e+64>>2]+12>>2]+(t<<2)>>2]))&&-1!=(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))))for(a=h[e+64>>2];;){if(l=i,-1==(0|(t=((t=i+1|0)>>>0)%3|0?t:i-2|0))|h[r+(t>>>3&536870908)>>2]>>>t&1)break r;if(-1==(0|(t=h[h[a+12>>2]+(t<<2)>>2])))break r;if(-1==(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0)))break}if(h[h[e+28>>2]+(l<<2)>>2]=n,(0|(t=h[e+44>>2]))==h[e+48>>2]){if((t=1+(s=(i=t-(r=h[e+40>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(a=i>>1,a=i>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break e;t=gn(a<<2)}else t=0;h[(s=t+(s<<2)|0)>>2]=l,(0|i)>0&&We(t,r,i),h[e+48>>2]=t+(a<<2),h[e+44>>2]=s+4,h[e+40>>2]=t,r&&ve(r)}else h[t>>2]=l,h[e+44>>2]=t+4;if(t=n+1|0,r=h[e+64>>2],(l>>>0)%3|0)i=l-1|0;else if(-1==(0|(i=l+2|0)))break n;if(-1!=(0|(i=h[h[r+12>>2]+(i<<2)>>2]))&&!(-1==(0|(i=i+((i>>>0)%3|0?-1:2)|0))|(0|i)==(0|l)))for(;;){if(r=((r=i+1|0)>>>0)%3|0?r:i-2|0,h[h[e>>2]+(r>>>3&536870908)>>2]>>>r&1){if((0|(n=h[e+56>>2]))==h[e+60>>2]){if((n=1+(o=(r=n-(a=h[e+52>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(s=r>>1,s=r>>>0<2147483644?n>>>0>s>>>0?n:s:1073741823){if(s>>>0>=1073741824)break e;n=gn(s<<2)}else n=0;h[(o=n+(o<<2)|0)>>2]=t,(0|r)>0&&We(n,a,r),h[e+60>>2]=n+(s<<2),h[e+56>>2]=o+4,h[e+52>>2]=n,a&&ve(a)}else h[n>>2]=t,h[e+56>>2]=n+4;if(r=t+1|0,(0|(n=h[e+44>>2]))==h[e+48>>2]){if((n=1+(u=(a=n-(s=h[e+40>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(o=a>>1,o=a>>>0<2147483644?n>>>0>o>>>0?n:o:1073741823){if(o>>>0>=1073741824)break e;n=gn(o<<2)}else n=0;h[(u=n+(u<<2)|0)>>2]=i,(0|a)>0&&We(n,s,a),h[e+48>>2]=n+(o<<2),h[e+44>>2]=u+4,h[e+40>>2]=n,s&&ve(s)}else h[n>>2]=i,h[e+44>>2]=n+4;n=t,t=r}if(h[h[e+28>>2]+(i<<2)>>2]=n,r=h[e+64>>2],(i>>>0)%3|0)i=i-1|0;else if(-1==(0|(i=i+2|0)))break n;if(-1==(0|(i=h[h[r+12>>2]+(i<<2)>>2])))break n;if(-1==(0|(i=i+((i>>>0)%3|0?-1:2)|0)))break n;if((0|i)==(0|l))break}}if(c=c+1|0,i=h[r+24>>2],!(c>>>0<h[r+28>>2]-i>>2>>>0))break}return}vr(),x()}vr(),x()}Qi(1336),x()}function ye(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;if(-1==(0|t))return 1;if(i=(t>>>0)/3|0,!(h[h[e+24>>2]+(i>>>3&268435452)>>2]>>>i&1)){if(n=h[e+48>>2],h[e+52>>2]=n,(0|n)==h[e+56>>2]?(r=gn(4),h[r>>2]=t,a=r+4|0,h[e+56>>2]=a,h[e+52>>2]=a,h[e+48>>2]=r,n&&ve(n)):(h[n>>2]=t,h[e+52>>2]=n+4),a=h[h[e+4>>2]+28>>2],-1==(0|(n=h[a+((r=((n=t+1|0)>>>0)%3|0?n:t-2|0)<<2)>>2])))return 0;if(s=(t-v(i,3)|0?-1:2)+t|0,-1==(0|(i=h[a+(s<<2)>>2])))return 0;if(t=h[e+36>>2],(o=h[(a=t+(n>>>3&536870908)|0)>>2])&(l=1<<n)||(h[a>>2]=o|l,tt(e+8|0,n,r),t=h[e+36>>2]),(n=h[(t=(i>>>3&536870908)+t|0)>>2])&(r=1<<i)||(h[t>>2]=n|r,tt(e+8|0,i,s)),(0|(i=h[e+52>>2]))==h[e+48>>2])return 1;for(u=e+8|0;;){n=((t=h[(i=i-4|0)>>2])>>>0)/3|0;e:{t:if(-1!=(0|t)&&(r=h[e+24>>2]+(n>>>3&268435452)|0,!((a=h[r>>2])&(n=1<<n)))){if(h[r>>2]=n|a,r=h[e+4>>2],-1==(0|(n=h[h[r+28>>2]+(t<<2)>>2])))return 0;for(;;){i=t;i:{if(a=h[e+36>>2]+(n>>>3&536870908)|0,!((s=h[a>>2])&(o=1<<n)))if(-1==(0|(t=h[h[r+40>>2]+(n<<2)>>2]))||-1==(0|(t=((l=t+1|0)>>>0)%3|0?l:t-2|0))|h[h[r>>2]+(t>>>3&536870908)>>2]>>>t&1||-1==(0|(t=h[h[h[r+64>>2]+12>>2]+(t<<2)>>2])))h[a>>2]=s|o,tt(u,n,i);else if(h[a>>2]=s|o,tt(u,n,i),-1!=(0|(((n=t+1|0)>>>0)%3|0?n:t-2|0))){t=-1,r=h[e+4>>2],-1!=(0|i)&&(-1==(0|(n=((n=i+1|0)>>>0)%3|0?n:i-2|0))|h[h[r>>2]+(n>>>3&536870908)>>2]>>>n&1||(t=h[h[h[r+64>>2]+12>>2]+(n<<2)>>2])),o=1<<(n=(t>>>0)/3|0),i=h[e+24>>2],a=h[i+((l=n>>>5|0)<<2)>>2];break i}n:{if(-1!=(0|i)){n=-1,t=((t=i+1|0)>>>0)%3|0?t:i-2|0,r=h[e+4>>2],-1==(0|t)|h[h[r>>2]+(t>>>3&536870908)>>2]>>>t&1||(n=h[h[h[r+64>>2]+12>>2]+(t<<2)>>2]);r:{if((i>>>0)%3|0)i=i-1|0;else if(t=-1,-1==(0|(i=i+2|0)))break r;t=-1,h[h[r>>2]+(i>>>3&536870908)>>2]>>>i&1||(t=h[h[h[r+64>>2]+12>>2]+(i<<2)>>2])}if(s=(c=-1==(0|t))?-1:(t>>>0)/3|0,a=(n>>>0)/3|0,!((o=-1==(0|n))||(i=h[e+24>>2],(a=h[i+((l=(o=o?-1:a)>>>5|0)<<2)>>2])&(o=1<<o))))break n;if(!(c||(o=1<<s,i=h[e+24>>2],o&(a=h[i+((l=s>>>5|0)<<2)>>2]))))break i}i=h[e+52>>2]-4|0,h[e+52>>2]=i;break e}if(c)t=n;else if(h[(s>>>3&536870908)+i>>2]>>>s&1)t=n;else{if(i=h[e+52>>2],h[i-4>>2]=t,(0|i)!=h[e+56>>2]){h[i>>2]=n,i=i+4|0;break t}n:{if((t=1+(i=(r=i-(a=h[e+48>>2])|0)>>2)|0)>>>0<1073741824){if(s=r>>1,s=r>>>0<2147483644?t>>>0>s>>>0?t:s:1073741823){if(s>>>0>=1073741824)break n;t=gn(s<<2)}else t=0;if(h[(i=t+(i<<2)|0)>>2]=n,i=i+4|0,(0|r)>0&&We(t,a,r),h[e+56>>2]=t+(s<<2),h[e+52>>2]=i,h[e+48>>2]=t,!a)break e;ve(a),i=h[e+52>>2];break e}vr(),x()}Qi(1336),x()}}if(h[(l<<2)+i>>2]=a|o,-1==(0|(n=h[h[r+28>>2]+(t<<2)>>2])))break}return 0}h[e+52>>2]=i}if(h[e+48>>2]==(0|i))break}}return 1}function Ae(e,t,i,n){var r,s=0,o=0,l=0,c=0,u=0,f=0;if(N=r=N-80|0,s=h[i+36>>2],h[r+72>>2]=h[i+32>>2],h[r+76>>2]=s,o=h[i+28>>2],h[(s=r- -64|0)>>2]=h[i+24>>2],h[s+4>>2]=o,s=h[i+20>>2],h[r+56>>2]=h[i+16>>2],h[r+60>>2]=s,s=h[i+12>>2],h[r+48>>2]=h[i+8>>2],h[r+52>>2]=s,s=h[i+4>>2],h[r+40>>2]=h[i>>2],h[r+44>>2]=s,ue(e,r+40|0,r+24|0),!h[e>>2])if(u=e+4|0,a[e+15|0]<0&&ve(h[u>>2]),1==d[r+31|0]){N=c=N-16|0;e:{switch(d[r+32|0]){case 0:Yn(s=gn(48)),h[s>>2]=13144,h[r+8>>2]=0,h[r+12>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+16>>2]=s;break e;case 1:Yn(s=gn(52)),h[s+48>>2]=0,h[s>>2]=11304,h[r+8>>2]=0,h[r+12>>2]=0,h[r>>2]=0,h[r+4>>2]=0,h[r+16>>2]=s;break e}o=gn(32),s=d[1694]|d[1695]<<8|d[1696]<<16|d[1697]<<24,a[o+24|0]=s,a[o+25|0]=s>>>8,a[o+26|0]=s>>>16,a[o+27|0]=s>>>24,s=d[1690]|d[1691]<<8|d[1692]<<16|d[1693]<<24,l=d[1686]|d[1687]<<8|d[1688]<<16|d[1689]<<24,a[o+16|0]=l,a[o+17|0]=l>>>8,a[o+18|0]=l>>>16,a[o+19|0]=l>>>24,a[o+20|0]=s,a[o+21|0]=s>>>8,a[o+22|0]=s>>>16,a[o+23|0]=s>>>24,s=d[1682]|d[1683]<<8|d[1684]<<16|d[1685]<<24,l=d[1678]|d[1679]<<8|d[1680]<<16|d[1681]<<24,a[o+8|0]=l,a[o+9|0]=l>>>8,a[o+10|0]=l>>>16,a[o+11|0]=l>>>24,a[o+12|0]=s,a[o+13|0]=s>>>8,a[o+14|0]=s>>>16,a[o+15|0]=s>>>24,s=d[1674]|d[1675]<<8|d[1676]<<16|d[1677]<<24,l=d[1670]|d[1671]<<8|d[1672]<<16|d[1673]<<24,a[0|o]=l,a[o+1|0]=l>>>8,a[o+2|0]=l>>>16,a[o+3|0]=l>>>24,a[o+4|0]=s,a[o+5|0]=s>>>8,a[o+6|0]=s>>>16,a[o+7|0]=s>>>24,a[o+28|0]=0,h[c>>2]=-1,Bi(s=4|c,o,28),f=a[c+15|0],h[r>>2]=h[c>>2],l=r+4|0,(0|f)>=0?(f=h[s+4>>2],h[l>>2]=h[s>>2],h[l+4>>2]=f,h[l+8>>2]=h[s+8>>2]):Bi(l,h[c+4>>2],h[c+8>>2]),h[r+16>>2]=0,a[c+15|0]<0&&ve(h[c+4>>2]),ve(o)}N=c+16|0;e:if(s=h[r>>2]){if(h[e>>2]=s,a[r+15|0]>=0){t=h[4+(e=4|r)>>2],h[u>>2]=h[e>>2],h[u+4>>2]=t,h[u+8>>2]=h[e+8>>2];break e}Bi(u,h[r+4>>2],h[r+8>>2])}else s=h[r+16>>2],h[r+16>>2]=0,h[s+44>>2]=n,V(e,s,t,i,n),h[e>>2]||(a[u+11|0]<0&&ve(h[u>>2]),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0),Rr[h[h[s>>2]+4>>2]](s);e=h[r+16>>2],h[r+16>>2]=0,e&&Rr[h[h[e>>2]+4>>2]](e),a[r+15|0]>=0||ve(h[r+4>>2])}else t=gn(32),i=d[1592]|d[1593]<<8|d[1594]<<16|d[1595]<<24,a[t+16|0]=i,a[t+17|0]=i>>>8,a[t+18|0]=i>>>16,a[t+19|0]=i>>>24,i=d[1588]|d[1589]<<8|d[1590]<<16|d[1591]<<24,n=d[1584]|d[1585]<<8|d[1586]<<16|d[1587]<<24,a[t+8|0]=n,a[t+9|0]=n>>>8,a[t+10|0]=n>>>16,a[t+11|0]=n>>>24,a[t+12|0]=i,a[t+13|0]=i>>>8,a[t+14|0]=i>>>16,a[t+15|0]=i>>>24,i=d[1580]|d[1581]<<8|d[1582]<<16|d[1583]<<24,n=d[1576]|d[1577]<<8|d[1578]<<16|d[1579]<<24,a[0|t]=n,a[t+1|0]=n>>>8,a[t+2|0]=n>>>16,a[t+3|0]=n>>>24,a[t+4|0]=i,a[t+5|0]=i>>>8,a[t+6|0]=i>>>16,a[t+7|0]=i>>>24,a[t+20|0]=0,h[e>>2]=-1,Bi(u,t,20),ve(t);N=r+80|0}function Ee(e,t,i){var n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0;n=v(t,12)+e|0,h[n+12>>2]=h[n+8>>2],u=-1==(0|i)?-1:(i>>>0)/3|0,p=1,c=i;e:{t:{i:{for(;;){n:{if(m=1&a){if(-1==(0|c))break n;if(-1==(0|Mt(e,((c>>>0)%3|0?-1:2)+c|0)))break e;if(-1==(0|(r=((i=c+1|0)>>>0)%3|0?i:c-2|0)))break e;if(-1==(0|(i=((i=r+1|0)>>>0)%3|0?i:r-2|0)))break e;if(-1==(0|(r=h[h[h[e+4>>2]+12>>2]+(i<<2)>>2])))break e;if(-1==(0|(i=((i=r+1|0)>>>0)%3|0?i:r-2|0)))break e;u=(i>>>0)/3|0}if(o=1<<u,f=h[e+56>>2]+(u>>>3&536870908)|0,!(o&(d=h[f>>2]))){for(a=0;;){if(h[f>>2]=o|d,(0|(r=h[n+12>>2]))==h[n+16>>2]){if((s=1+(l=(o=r-(d=h[n+8>>2])|0)>>2)|0)>>>0>=1073741824)break i;if(r=o>>1,s=o>>>0<2147483644?r>>>0<s>>>0?s:r:1073741823){if(s>>>0>=1073741824)break t;r=gn(s<<2)}else r=0;h[(l=r+(l<<2)|0)>>2]=u,(0|o)>0&&We(r,d,o),h[n+8>>2]=r,h[n+12>>2]=l+4,h[n+16>>2]=r+(s<<2),d&&ve(d)}else h[r>>2]=u,h[n+12>>2]=r+4;l=a+1|0;r:{a:{if(a)if(1&l){if(-1==(0|i)){i=-1;break r}i=((r=i+1|0)>>>0)%3|0?r:i-2|0}else{if(c=m?i:c,-1==(0|i)){i=-1;break r}if((i>>>0)%3|0){a=i-1|0;break a}i=i+2|0}if(r=i,i=-1,a=r,-1==(0|r))break r}if(i=h[h[h[e+4>>2]+12>>2]+(a<<2)>>2],f=-1,d=-1,(0|(s=((r=a+1|0)>>>0)%3|0?r:a-2|0))>=0&&(r=(s>>>0)/3|0,d=h[(h[h[e>>2]+96>>2]+v(r,12)|0)+(s-v(r,3)<<2)>>2]),-1!=(0|i)?(o=0,(0|(s=((i>>>0)%3|0?-1:2)+i|0))<0||(r=(s>>>0)/3|0,f=h[(h[h[e>>2]+96>>2]+v(r,12)|0)+(s-v(r,3)<<2)>>2])):o=1,(0|d)==(0|f)){a:{s:{o:{l:{if((0|(a=((a>>>0)%3|0?-1:2)+a|0))>=0){if(r=(a>>>0)/3|0,f=h[(h[h[e>>2]+96>>2]+v(r,12)|0)+(a-v(r,3)<<2)>>2],a=-1,!o)break l;break o}if(f=-1,o)break s}(0|(a=((r=i+1|0)>>>0)%3|0?r:i-2|0))<0?a=-1:(r=(a>>>0)/3|0,a=h[(h[h[e>>2]+96>>2]+v(r,12)|0)+(a-v(r,3)<<2)>>2])}if((0|a)!=(0|f)){i=-1;break r}if(-1!=(0|i))break a;i=-1;break r}if(-1==(0|i)){i=-1;break r}}if(a=l,u=(i>>>0)/3|0,f=h[e+56>>2]+(u>>>3&268435452)|0,!((d=h[f>>2])&(o=1<<u)))continue}else i=-1}break}!m|!(1&l)||(s=h[n+12>>2]-4|0,l=h[s>>2],a=h[e+56>>2]+(l>>>3&536870908)|0,r=h[a>>2],g=a,b=In(l)&r,h[g>>2]=b,h[n+12>>2]=s)}if(a=1,r=p,p=0,r)continue;break e}break}c=-1,Mt(e,-1);break e}vr(),x()}Qi(1336),x()}if(h[44+((t<<2)+e|0)>>2]=c,s=h[n+8>>2],t=h[n+12>>2]-s|0){if(c=h[e+56>>2],l=1&(e=(e=t>>2)>>>0>1?e:1),i=0,t>>>0>=8)for(p=-2&e,u=0;r=h[(a=i<<2)+s>>2],e=h[(t=c+(r>>>3&536870908)|0)>>2],g=t,b=In(r)&e,h[g>>2]=b,r=h[s+(4|a)>>2],e=h[(t=c+(r>>>3&536870908)|0)>>2],g=t,b=In(r)&e,h[g>>2]=b,i=i+2|0,(0|p)!=(0|(u=u+2|0)););l&&(i=h[s+(i<<2)>>2],e=h[(t=c+(i>>>3&536870908)|0)>>2],g=t,b=In(i)&e,h[g>>2]=b)}}function we(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0;if(-1==(0|t))return 1;if(n=(t>>>0)/3|0,!(h[h[e+24>>2]+(n>>>3&268435452)>>2]>>>n&1)){if(i=h[e+48>>2],h[e+52>>2]=i,(0|i)==h[e+56>>2]?(r=gn(4),h[r>>2]=t,a=r+4|0,h[e+56>>2]=a,h[e+52>>2]=a,h[e+48>>2]=r,i&&ve(i)):(h[i>>2]=t,h[e+52>>2]=i+4),r=-1,a=h[e+4>>2],-1!=(0|(s=((i=t+1|0)>>>0)%3|0?i:t-2|0))&&(r=h[h[a>>2]+(s<<2)>>2]),o=t-v(n,3)|0)i=t-1|0;else if(-1==(0|(i=t+2|0)))return 0;if(-1==(0|r))return 0;if(-1==(0|(n=h[h[a>>2]+(i<<2)>>2])))return 0;if(i=h[e+36>>2],(l=h[(a=i+(r>>>3&536870908)|0)>>2])&(c=1<<r)||(h[a>>2]=l|c,tt(e+8|0,r,s),i=h[e+36>>2]),(r=h[(i=(n>>>3&536870908)+i|0)>>2])&(a=1<<n)||(h[i>>2]=r|a,tt(e+8|0,n,(o?-1:2)+t|0)),(0|(i=h[e+52>>2]))==h[e+48>>2])return 1;for(c=e+8|0;;){n=((t=h[(i=i-4|0)>>2])>>>0)/3|0;e:{t:if(-1!=(0|t)&&(r=h[e+24>>2]+(n>>>3&268435452)|0,!((a=h[r>>2])&(n=1<<n)))){for(h[r>>2]=n|a;;){if(n=h[e+4>>2],-1==(0|(i=h[h[n>>2]+(t<<2)>>2])))return 0;i:{if(r=h[e+36>>2]+(i>>>3&536870908)|0,!((a=h[r>>2])&(s=1<<i)))if(-1!=(0|(o=h[h[n+24>>2]+(i<<2)>>2]))&&-1!=(0|(o=((l=o+1|0)>>>0)%3|0?l:o-2|0))&&-1!=(0|(n=h[h[n+12>>2]+(o<<2)>>2]))){if(h[r>>2]=a|s,tt(c,i,t),-1!=(0|(((i=n+1|0)>>>0)%3|0?i:n-2|0))){n=t-2|0,i=t+1|0,t=-1,-1!=(0|(i=(i>>>0)%3|0?i:n))&&(t=h[h[h[e+4>>2]+12>>2]+(i<<2)>>2]),s=1<<(i=(t>>>0)/3|0),r=h[e+24>>2],n=h[r+((o=i>>>5|0)<<2)>>2];break i}}else h[r>>2]=a|s,tt(c,i,t);i=-1,a=h[e+4>>2],-1!=(0|(n=((n=t+1|0)>>>0)%3|0?n:t-2|0))&&(i=h[h[a+12>>2]+(n<<2)>>2]);n:{if((t>>>0)%3|0)r=t-1|0;else if(r=t+2|0,t=-1,-1==(0|r))break n;t=h[h[a+12>>2]+(r<<2)>>2]}if(a=(l=-1==(0|t))?-1:(t>>>0)/3|0,n=(i>>>0)/3|0,(s=-1==(0|i))||(r=h[e+24>>2],(n=h[r+((o=(s=s?-1:n)>>>5|0)<<2)>>2])&(s=1<<s))){if(!(l||(s=1<<a,r=h[e+24>>2],s&(n=h[r+((o=a>>>5|0)<<2)>>2]))))break i;i=h[e+52>>2]-4|0,h[e+52>>2]=i;break e}if(l)t=i;else if(h[(a>>>3&536870908)+r>>2]>>>a&1)t=i;else{if(n=h[e+52>>2],h[n-4>>2]=t,(0|n)!=h[e+56>>2]){h[n>>2]=i,i=n+4|0;break t}n:{if((t=1+(s=(n=n-(r=h[e+48>>2])|0)>>2)|0)>>>0<1073741824){if(a=n>>1,a=n>>>0<2147483644?t>>>0>a>>>0?t:a:1073741823){if(a>>>0>=1073741824)break n;t=gn(a<<2)}else t=0;if(h[(s=t+(s<<2)|0)>>2]=i,i=s+4|0,(0|n)>0&&We(t,r,n),h[e+56>>2]=t+(a<<2),h[e+52>>2]=i,h[e+48>>2]=t,!r)break e;ve(r),i=h[e+52>>2];break e}vr(),x()}Qi(1336),x()}}if(h[(o<<2)+r>>2]=n|s,-1==(0|t))break}return 0}h[e+52>>2]=i}if(h[e+48>>2]==(0|i))break}}return 1}function Se(e,t){e|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;N=i=N-32|0;e:{if(f[38+(t|=0)>>1]<=513){if((0|(n=h[t+20>>2]))>=(0|(c=h[t+12>>2]))&(r=h[t+16>>2])>>>0>=p[t+8>>2]|(0|n)>(0|c))break e;if(c=d[r+h[t>>2]|0],n=(r=r+1|0)?n:n+1|0,h[t+16>>2]=r,h[t+20>>2]=n,c)break e}t:if(Ai(1,i+28|0,t))i:{if(r=h[i+28>>2]){if(rt(e+60|0,r),h[(n=i+8|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,!He(n,t))break i;for(;c=1<<s,o=Gi(n),l=h[e+60>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|r)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(r=h[i+28>>2]){if(s=0,rt(e+72|0,r),h[(n=i+8|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,!He(n,t))break i;for(;c=1<<s,o=Gi(n),l=h[e+72>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|r)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(r=h[i+28>>2]){if(s=0,rt(e+84|0,r),h[(n=i+8|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,!He(n,t))break i;for(;c=1<<s,o=Gi(n),l=h[e+84>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|r)!=(0|(s=s+1|0)););}if(!Ai(1,i+28|0,t))break t;if(r=h[i+28>>2]){if(s=0,rt(e+96|0,r),h[(n=i+8|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,!He(n,t))break i;for(;c=1<<s,o=Gi(n),l=h[e+96>>2]+(s>>>3&536870908)|0,o=o?c|h[l>>2]:h[l>>2]&(-1^c),h[l>>2]=o,(0|r)!=(0|(s=s+1|0)););}if(s=0,c=r=h[t+12>>2],l=n=h[t+20>>2],n=(u=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(m=h[t+8>>2])>>>0<u>>>0&(0|n)>=(0|r)|(0|n)>(0|r))break e;if(g=h[t>>2],r=d[0|(r=g+o|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=n,n=l,o=l=o+8|0,l=n=l>>>0<8?n+1|0:n,o>>>0>m>>>0&(0|n)>=(0|c)|(0|n)>(0|c))break e;if(n=d[0|(n=u+g|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=l,(0|n)<(0|r))break e;if(h[e+16>>2]=n,h[e+12>>2]=r,!(t=(n>>31)-((r>>31)+(n>>>0<r>>>0)|0)|0)&(n=n-r|0)>>>0>2147483646|t)break e;if(s=1,t=n+1|0,h[e+20>>2]=t,n=t>>>1|0,h[e+24>>2]=n,h[e+28>>2]=0-n,1&t)break e;h[e+24>>2]=n-1;break e}s=0}return N=i+32|0,0|s}function Te(e,t,i){t|=0,i|=0;var n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0;e:if(!((0|(g=0|Rr[h[h[(e|=0)>>2]+44>>2]](e)))<=0)&&(r=h[t+4>>2]-h[t>>2]>>2,N=o=N+-64|0,n=tn(o),s=v(h[3408],g),fn(n,h[h[e+8>>2]+56>>2],g<<24>>24,5,0,s,s>>31),n=Nt(s=gn(96),n),a[n+84|0]=1,h[n+72>>2]=h[n+68>>2],kt(n,r),h[n+60>>2]=h[h[e+8>>2]+60>>2],n=h[e+16>>2],h[e+16>>2]=s,n&&ji(n),N=o- -64|0,o=h[e+16>>2],h[o+80>>2]&&(c=h[h[o>>2]>>2])&&!((0|(l=h[i+12>>2]))<=(0|(n=h[i+20>>2]))&(u=h[i+8>>2])>>>0<=(s=h[i+16>>2])>>>0|(0|n)>(0|l)))){f=v(r,g),c=c+h[o+48>>2]|0,p=h[i>>2],m=d[p+s|0],r=(o=s+1|0)?n:n+1|0,h[i+16>>2]=o,h[i+20>>2]=r;t:{i:{n:{if(m){if(B(f,g,i,c))break n;break e}if((0|r)>=(0|l)&o>>>0>=u>>>0|(0|r)>(0|l))break e;o=d[o+p|0],n=(r=s+2|0)>>>0<2?n+1|0:n,h[i+16>>2]=r,h[i+20>>2]=n,n=h[h[e+16>>2]+64>>2],n=h[n+4>>2]-h[n>>2]|0;r:{if((0|o)==h[3408]){if((r=n)>>>0<(n=f<<2)>>>0)break e;if(l=h[i+8>>2],o=h[i+12>>2],r=h[i+20>>2],(0|(r=(s=n+(u=h[i+16>>2])|0)>>>0<n>>>0?r+1|0:r))<=(0|o)&s>>>0<=l>>>0|(0|r)<(0|o))break r;break e}if(n>>>0<v(o,f)>>>0)break e;if(l=h[i+12>>2],r=h[i+20>>2],(s=p=h[i+8>>2])-(u=h[i+16>>2])>>>0<Zi(n=o,0,f,0)>>>0&(0|(s=l-(r+(s>>>0<u>>>0)|0)|0))<=(0|(m=L))|(0|s)<(0|m))break e;if(s=1,!f)break i;if(s=0,(m=p)>>>0<(p=n+u|0)>>>0&(0|(r=p>>>0<n>>>0?r+1|0:r))>=(0|l)|(0|r)>(0|l))break t;for(;;){if(We(c+(b<<2)|0,u+h[i>>2]|0,o),r=h[i+20>>2],r=(l=n+h[i+16>>2]|0)>>>0<n>>>0?r+1|0:r,u=l,h[i+16>>2]=l,h[i+20>>2]=r,(0|f)==(0|(b=b+1|0)))break n;if(m=h[i+8>>2],!((0|(r=(p=n+u|0)>>>0<n>>>0?r+1|0:r))<=(0|(l=h[i+12>>2]))&p>>>0<=m>>>0|(0|r)<(0|l)))break}break t}We(c,u+h[i>>2]|0,n),r=n,o=n+h[i+16>>2]|0,n=h[i+20>>2],h[i+16>>2]=o,h[i+20>>2]=r>>>0>o>>>0?n+1|0:n}if(s=1,f&&!((n=h[e+20>>2])&&(s=0,0|Rr[h[h[n>>2]+32>>2]](n)))){if(n=0,s=0,!((0|f)<=0)){if(1!=(0|f))for(l=-2&f;o=h[(r=n<<2)+c>>2],h[r+c>>2]=0-(1&o)^o>>>1,r=h[(o=4|r)+c>>2],h[o+c>>2]=0-(1&r)^r>>>1,n=n+2|0,(0|l)!=(0|(s=s+2|0)););1&f&&(n=h[(r=n<<2)+c>>2],h[r+c>>2]=0-(1&n)^n>>>1)}s=0}}if(n=h[e+20>>2]){if(!(0|Rr[h[h[n>>2]+40>>2]](n,i)))break e;if(!(s||(s=0,e=h[e+20>>2],0|Rr[h[h[e>>2]+44>>2]](e,c,c,f,g,h[t>>2]))))break t}s=1}return 0|s}return 0}function xe(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;N=i=N-32|0;e:{if(!(h[e+8>>2]<<5>>>0>=t>>>0)){if(h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,(0|t)<0)break e;n=gn((t=1+(t-1>>>5|0)|0)<<2),h[i+24>>2]=t,h[i+20>>2]=0,h[i+16>>2]=n,t=h[e>>2],h[i+12>>2]=0,h[i+8>>2]=t,n=h[e+4>>2],h[i+4>>2]=31&n,h[i>>2]=t+(n>>>3&536870908),N=s=N-32|0,o=(t=((c=h[i+4>>2])-(a=h[i+12>>2])|0)+((u=h[i>>2])-(l=h[i+8>>2])<<3)|0)+(r=h[i+20>>2])|0,h[i+20>>2]=o,!r|(o-1^r-1)>>>0>31?(n=h[i+16>>2],o>>>0<=32?h[n>>2]=0:h[(o-1>>>3&536870908)+n>>2]=0):n=h[i+16>>2],n=(r>>>3&536870908)+n|0;t:if((0|(r&=31))!=(0|a)){if(h[s+28>>2]=a,h[s+24>>2]=l,h[s+20>>2]=c,h[s+16>>2]=u,h[s+12>>2]=r,h[s+8>>2]=n,t=h[s+28>>2],n=h[s+24>>2],(0|(l=(h[s+20>>2]-t|0)+(h[s+16>>2]-n<<3)|0))<=0)t=h[s+12>>2];else{if(t?(o=(r=(0|l)<(0|(u=32-t|0))?l:u)>>>0>(c=32-(a=h[s+12>>2])|0)>>>0?c:r,d=h[s+8>>2],f=h[d>>2]&(-1<<a&-1>>>c-o^-1),c=h[n>>2]&-1<<t&-1>>>u-r,h[d>>2]=f|(t>>>0<a>>>0?c<<a-t:c>>>t-a|0),t=31&(n=a+o|0),h[s+12>>2]=t,a=d+(n>>>3&536870908)|0,h[s+8>>2]=a,(0|(n=r-o|0))>0&&(h[a>>2]=h[a>>2]&(-1>>>32-n^-1)|c>>>o+h[s+28>>2],h[s+12>>2]=n,t=n),l=l-r|0,n=h[s+24>>2]+4|0,h[s+24>>2]=n):t=h[s+12>>2],a=32-t|0,o=-1<<t,(0|l)>=32)for(c=-1^o;r=h[s+8>>2],n=h[n>>2],h[r>>2]=c&h[r>>2]|n<<t,h[s+8>>2]=r+4,h[r+4>>2]=o&h[r+4>>2]|n>>>a,n=h[s+24>>2]+4|0,h[s+24>>2]=n,r=l>>>0>63,l=l-32|0,r;);(0|l)<=0||(r=h[s+8>>2],c=a,a=(0|a)<(0|l)?a:l,c=h[r>>2]&(o&-1>>>c-a^-1),o=h[n>>2]&-1>>>32-l,h[r>>2]=c|o<<t,t=31&(n=t+a|0),h[s+12>>2]=t,r=r+(n>>>3&536870908)|0,h[s+8>>2]=r,(0|(n=l-a|0))<=0||(h[r>>2]=h[r>>2]&(-1>>>32-n^-1)|o>>>a,h[s+12>>2]=n,t=n))}n=h[s+8>>2],h[s+4>>2]=t,h[s>>2]=n}else{if((0|t)<=0)break t;if(a&&(o=-1<<a&-1>>>(o=32-a|0)-(r=(0|t)<(0|o)?t:o),h[n>>2]=h[n>>2]&(-1^o)|o&h[l>>2],t=t-r|0,l=l+4|0,n=n+(r+a>>>3&536870908)|0),r=At(c=n,l,n=(a=(0|t)/32|0)<<2),(0|(t=t-(a<<5)|0))<=0)break t;t=-1>>>32-t|0,h[(a=n+r|0)>>2]=h[a>>2]&(-1^t)|t&h[n+l>>2]}N=s+32|0,t=h[e>>2],h[e>>2]=h[i+16>>2],h[i+16>>2]=t,n=h[e+4>>2],h[e+4>>2]=h[i+20>>2],h[i+20>>2]=n,n=h[e+8>>2],h[e+8>>2]=h[i+24>>2],h[i+24>>2]=n,t&&ve(t)}return void(N=i+32|0)}pr(),x()}function Me(e,t){t|=0;var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0;N=i=N-80|0;e:{if(d[h[28+(e|=0)>>2]+36|0]<=1){if(r=h[t+20>>2],r=(a=(n=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,(0|(u=h[t+12>>2]))<=(0|r)&a>>>0>p[t+8>>2]|(0|r)>(0|u))break e;n=n+h[t>>2]|0,l=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=r}else{if(!Ei(1,i+76|0,t))break e;l=h[i+76>>2]}if(l&&!((r=Zi((r=h[t+8>>2])-(n=h[t+16>>2])|0,h[t+12>>2]-(h[t+20>>2]+(n>>>0>r>>>0)|0)|0,5,0))>>>0<l>>>0&(0|(n=L))<=0|(0|n)<0)){for(n=h[e+4>>2],(r=h[e+8>>2]-n>>2)>>>0<l>>>0?ei(e+4|0,l-r|0):r>>>0<=l>>>0||(h[e+8>>2]=n+(l<<2)),E=e+16|0,g=h[e+32>>2],s=1;;){t:if(!((0|(n=o=h[t+12>>2]))<=(0|(r=h[t+20>>2]))&(_=h[t+8>>2])>>>0<=(c=h[t+16>>2])>>>0|(0|n)<(0|r)||(y=h[t>>2],u=d[y+c|0],n=r,n=(a=c+1|0)?n:n+1|0,h[t+16>>2]=a,h[t+20>>2]=n,(0|n)>=(0|o)&a>>>0>=_>>>0|(0|n)>(0|o)||(a=d[a+y|0],n=r,n=(m=c+2|0)>>>0<2?n+1|0:n,h[t+16>>2]=m,h[t+20>>2]=n,(0|n)>=(0|o)&m>>>0>=_>>>0|(0|n)>(0|o)||(m=d[m+y|0],n=r,n=(A=c+3|0)>>>0<3?n+1|0:n,h[t+16>>2]=A,h[t+20>>2]=n,(0|n)>=(0|o)&A>>>0>=_>>>0|(0|n)>(0|o)||(o=d[A+y|0],n=r,n=(r=c+4|0)>>>0<4?n+1|0:n,h[t+16>>2]=r,h[t+20>>2]=n,!m|(a-12&255)>>>0<245|u>>>0>4)))))){if(c=tn(i+8|0),_=m<<24>>24,o=0!=(0|o),n=(r=a-1|0)>>>0<=10?h[13616+(r<<2)>>2]:-1,fn(c,u,_,a,o,r=v(n,m),r>>31),(65535&((r=f[h[e+28>>2]+36>>1])<<8|r>>>8))>>>0<=258){if(n=h[t+20>>2],n=(a=(r=h[t+16>>2])+2|0)>>>0<2?n+1|0:n,(0|(u=h[t+12>>2]))<=(0|n)&a>>>0>p[t+8>>2]|(0|n)>(0|u))break t;r=r+h[t>>2]|0,s=d[0|r]|d[r+1|0]<<8,h[t+16>>2]=a,h[t+20>>2]=n}else{if(!Ei(1,i+4|0,t))break t;s=h[i+4>>2]}if(h[i+68>>2]=s,r=Nt(gn(96),c),Rr[h[h[g>>2]+8>>2]](g,h[g+12>>2]-h[g+8>>2]>>2,r),r=(h[g+12>>2]-h[g+8>>2]>>2)-1|0,h[h[(a=r<<2)+h[g+8>>2]>>2]+60>>2]=s,h[h[e+4>>2]+(b<<2)>>2]=r,s=h[e+16>>2],(0|(n=h[e+20>>2]-s>>2))>(0|r)||(h[i>>2]=-1,(r=r+1|0)>>>0>n>>>0?(Ye(E,r-n|0,i),s=h[E>>2]):n>>>0<=r>>>0||(h[e+20>>2]=(r<<2)+s)),h[a+s>>2]=b,s=(b=b+1|0)>>>0<l>>>0,(0|l)!=(0|b))continue}break}b=!s}}return N=i+80|0,1&b}function Re(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,v=0,b=0;e:if(i=f[t+38>>1]){if(i>>>0<=511){if(n=h[t+12>>2],i=h[t+20>>2],i=(r=(s=h[t+16>>2])+4|0)>>>0<4?i+1|0:i,r>>>0>p[t+8>>2]&(0|i)>=(0|n)|(0|i)>(0|n))break e;i=s+h[t>>2]|0,a=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[e+12>>2]=a,i=h[t+20>>2],i=(n=h[t+16>>2]+4|0)>>>0<4?i+1|0:i,h[t+16>>2]=n,h[t+20>>2]=i}else{if(!yi(1,e+12|0,t))break e;a=h[e+12>>2]}if(n=h[e>>2],(i=h[e+4>>2]-n>>2)>>>0<a>>>0?(ei(e,a-i|0),a=h[e+12>>2]):i>>>0<=a>>>0||(h[e+4>>2]=n+(a<<2)),!a)return 1;for(c=h[t+8>>2],l=h[t+12>>2],m=h[e>>2],s=0;;){if((0|l)<=(0|(i=h[t+20>>2]))&c>>>0<=(n=h[t+16>>2])>>>0|(0|i)>(0|l))return 0;g=h[t>>2],u=d[g+n|0],i=(n=n+1|0)?i:i+1|0,o=n,h[t+16>>2]=n,h[t+20>>2]=i,n=u>>>2|0,r=0;t:{i:{n:{r:switch(0|(v=3&u)){case 0:break i;case 3:break r;default:break n}if((i=n+s|0)>>>0>=a>>>0)return 0;xt(m+(s<<2)|0,0,4+(252&u)|0),s=i;break t}for(;;){if((0|i)>=(0|l)&o>>>0>=c>>>0|(0|i)>(0|l))break e;if(a=d[o+g|0],i=(o=o+1|0)?i:i+1|0,h[t+16>>2]=o,h[t+20>>2]=i,n|=a<<(r<<3|6),(0|v)==(0|(r=r+1|0)))break}}h[m+(s<<2)>>2]=n}if(!((a=h[e+12>>2])>>>0>(s=s+1|0)>>>0))break}if(i=e+16|0,u=h[e>>2],n=h[e+16>>2],(t=h[e+20>>2]-n|0)>>>0<=16383?ei(i,4096-(t>>>2|0)|0):16384!=(0|t)&&(h[e+20>>2]=n+16384),s=h[(t=e+28|0)>>2],(n=h[e+32>>2]-s>>3)>>>0<a>>>0)ti(t,a-n|0),s=h[t>>2];else if(n>>>0>a>>>0&&(h[e+32>>2]=(a<<3)+s),!a)break e;for(r=0,e=0;;){if(l=h[(t=u+(r<<2)|0)>>2],n=e,h[4+(o=(r<<3)+s|0)>>2]=n,h[o>>2]=l,(e=(l=h[t>>2])+n|0)>>>0>4096)break e;if(!(e>>>0<=n>>>0)){if(o=h[i>>2],t=0,c=7&l)for(;h[o+(n<<2)>>2]=r,n=n+1|0,(0|c)!=(0|(t=t+1|0)););if(!(l-1>>>0<=6))for(;h[(t=o+(n<<2)|0)>>2]=r,h[t+28>>2]=r,h[t+24>>2]=r,h[t+20>>2]=r,h[t+16>>2]=r,h[t+12>>2]=r,h[t+8>>2]=r,h[t+4>>2]=r,(0|(n=n+8|0))!=(0|e););}if((0|(r=r+1|0))==(0|a))break}b=4096==(0|e)}return b}function Pe(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0;N=i=N-16|0,n=h[e+4>>2],h[e+40>>2]=h[e>>2],h[e+44>>2]=n,n=h[e+36>>2],h[e+72>>2]=h[e+32>>2],h[e+76>>2]=n,r=h[e+28>>2],h[(n=e- -64|0)>>2]=h[e+24>>2],h[n+4>>2]=r,n=h[e+20>>2],h[e+56>>2]=h[e+16>>2],h[e+60>>2]=n,n=h[e+12>>2],h[e+48>>2]=h[e+8>>2],h[e+52>>2]=n;e:if(Ut(e+40|0,1,i+8|0)&&(n=h[e+44>>2],h[e>>2]=h[e+40>>2],h[e+4>>2]=n,n=h[e+76>>2],h[e+32>>2]=h[e+72>>2],h[e+36>>2]=n,n=h[e+68>>2],h[e+24>>2]=h[e+64>>2],h[e+28>>2]=n,o=r=h[e+60>>2],n=h[e+56>>2],h[e+16>>2]=n,h[e+20>>2]=r,a=h[e+52>>2],r=h[e+48>>2],h[e+8>>2]=r,h[e+12>>2]=a,l=r-n|0,(0|(s=h[i+12>>2]))==(0|(a=a-((n>>>0>r>>>0)+o|0)|0))&l>>>0>=(r=h[i+8>>2])>>>0|a>>>0>s>>>0)){if(a=n+r|0,n=o+s|0,h[e+16>>2]=a,h[e+20>>2]=r>>>0>a>>>0?n+1|0:n,f[e+38>>1]<=513){if(n=h[e+4>>2],h[e+96>>2]=h[e>>2],h[e+100>>2]=n,n=h[e+36>>2],h[e+128>>2]=h[e+32>>2],h[e+132>>2]=n,n=h[e+28>>2],h[e+120>>2]=h[e+24>>2],h[e+124>>2]=n,n=h[e+20>>2],h[e+112>>2]=h[e+16>>2],h[e+116>>2]=n,n=h[e+12>>2],h[e+104>>2]=h[e+8>>2],h[e+108>>2]=n,!(Ut(e+96|0,1,i+8|0)&&(n=h[e+100>>2],h[e>>2]=h[e+96>>2],h[e+4>>2]=n,n=h[e+132>>2],h[e+32>>2]=h[e+128>>2],h[e+36>>2]=n,n=h[e+124>>2],h[e+24>>2]=h[e+120>>2],h[e+28>>2]=n,o=r=h[e+116>>2],n=h[e+112>>2],h[e+16>>2]=n,h[e+20>>2]=r,a=h[e+108>>2],r=h[e+104>>2],h[e+8>>2]=r,h[e+12>>2]=a,l=r-n|0,(0|(s=h[i+12>>2]))==(0|(a=a-((n>>>0>r>>>0)+o|0)|0))&l>>>0>=(r=h[i+8>>2])>>>0|a>>>0>s>>>0))){n=0;break e}a=n+r|0,n=o+s|0,h[e+16>>2]=a,h[e+20>>2]=r>>>0>a>>>0?n+1|0:n}else if(n=0,!He(e+80|0,e))break e;n=0,Ot(e)&&(n=h[e+4>>2],h[t>>2]=h[e>>2],h[t+4>>2]=n,n=h[e+36>>2],h[t+32>>2]=h[e+32>>2],h[t+36>>2]=n,n=h[e+28>>2],h[t+24>>2]=h[e+24>>2],h[t+28>>2]=n,n=h[e+20>>2],h[t+16>>2]=h[e+16>>2],h[t+20>>2]=n,n=h[e+12>>2],h[t+8>>2]=h[e+8>>2],h[t+12>>2]=n,n=1)}else n=0;return N=i+16|0,n}function Ce(e,t,i){e|=0,t|=0,i|=0;var n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;N=n=N-16|0,h[n+8>>2]=i;e:if(!((0|(s=(a=h[e+12>>2])-(r=h[e+8>>2])>>2))>(0|t)))if((l=t+1|0)>>>0>s>>>0){if((s=l-s|0)>>>0<=(o=h[e+16>>2])-(r=h[e+12>>2])>>2>>>0){s&&(r=xt(a=r,0,r=s<<2)+r|0),h[e+12>>2]=r;break e}t:{i:{n:{if((a=(c=r-(l=h[e+8>>2])>>2)+s|0)>>>0<1073741824){if(d=(o=o-l|0)>>1,o=o>>>0<2147483644?a>>>0>d>>>0?a:d:1073741823){if(o>>>0>=1073741824)break n;u=gn(o<<2)}if(c=(s=xt(a=(c<<2)+u|0,0,c=s<<2))+c|0,o=(o<<2)+u|0,(0|r)==(0|l))break i;for(;s=h[(r=r-4|0)>>2],h[r>>2]=0,h[(a=a-4|0)>>2]=s,(0|r)!=(0|l););if(h[e+16>>2]=o,s=h[e+12>>2],h[e+12>>2]=c,r=h[e+8>>2],h[e+8>>2]=a,(0|r)==(0|s))break t;for(;a=h[(s=s-4|0)>>2],h[s>>2]=0,a&&ji(a),(0|r)!=(0|s););break t}vr(),x()}Qi(1336),x()}h[e+16>>2]=o,h[e+12>>2]=c,h[e+8>>2]=s}r&&ve(r)}else if(!(s>>>0<=l>>>0)){if((0|(r=r+(l<<2)|0))!=(0|a)){for(;i=h[(a=a-4|0)>>2],h[a>>2]=0,i&&ji(i),(0|r)!=(0|a););i=h[n+8>>2]}h[e+12>>2]=r}e:{t:{if(!((0|(r=h[i+56>>2]))>4))if(a=v(r,12)+e|0,(0|(r=h[a+24>>2]))==h[a+28>>2]){if((r=1+(u=(s=r-(l=h[a+20>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(o=s>>1,o=s>>>0<2147483644?r>>>0>o>>>0?r:o:1073741823){if(o>>>0>=1073741824)break e;r=gn(o<<2)}else r=0;h[(u=r+(u<<2)|0)>>2]=t,(0|s)>0&&We(r,l,s),h[a+20>>2]=r,h[a+24>>2]=u+4,h[a+28>>2]=r+(o<<2),l&&ve(l)}else h[r>>2]=t,h[a+24>>2]=r+4;return h[i+60>>2]=t,e=h[e+8>>2],h[n+8>>2]=0,e=h[(t=e+(t<<2)|0)>>2],h[t>>2]=i,e&&ji(e),e=h[n+8>>2],h[n+8>>2]=0,e&&ji(e),void(N=n+16|0)}vr(),x()}Qi(1336),x()}function De(e,t){var i,n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;N=i=N-16|0,h[i>>2]=t,l=-1,-1!=(0|t)?(r=t+1|0,h[i+4>>2]=(r>>>0)%3|0?r:t-2|0,l=(t>>>0)%3|0?t-1|0:t+2|0):h[i+4>>2]=-1,h[i+8>>2]=l,n=-1==(0|t)?-1:(t>>>0)/3|0;e:{t:{i:{n:{for(;;){r:if(-1!=(0|t)&&-1!=(0|(r=h[h[h[e+8>>2]+12>>2]+(t<<2)>>2]))){if(!((r>>>0)/3>>>0<n>>>0)&&(l=0,h[e+220>>2]!=h[e+216>>2]))for(;;){if(Gi(h[e+368>>2]+(l<<4)|0))if(o=h[e+216>>2]+v(l,144)|0,(r=h[o+136>>2])>>>0<(a=h[o+140>>2])>>>0)h[r>>2]=t,h[o+136>>2]=r+4;else{if((r=1+(s=(u=r-(c=h[o+132>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(d=s<<2,s=(a=a-c|0)>>1,a=a>>>0<2147483644?r>>>0>s>>>0?r:s:1073741823){if(a>>>0>=1073741824)break e;r=gn(a<<2)}else r=0;h[(s=d+r|0)>>2]=t,(0|u)>0&&We(r,c,u),h[o+132>>2]=r,h[o+136>>2]=s+4,h[o+140>>2]=r+(a<<2),c&&ve(c)}if(!((l=l+1|0)>>>0<(h[e+220>>2]-h[e+216>>2]|0)/144>>>0))break}}else{if(l=0,(0|(r=h[e+216>>2]))==h[e+220>>2])break r;for(;;){if(o=v(l,144)+r|0,(r=h[o+136>>2])>>>0<(a=h[o+140>>2])>>>0)h[r>>2]=t,h[o+136>>2]=r+4;else{if((r=1+(s=(u=r-(c=h[o+132>>2])|0)>>2)|0)>>>0>=1073741824)break n;if(d=s<<2,s=(a=a-c|0)>>1,a=a>>>0<2147483644?r>>>0>s>>>0?r:s:1073741823){if(a>>>0>=1073741824)break i;r=gn(a<<2)}else r=0;h[(s=d+r|0)>>2]=t,(0|u)>0&&We(r,c,u),h[o+132>>2]=r,h[o+136>>2]=s+4,h[o+140>>2]=r+(a<<2),c&&ve(c)}if(l=l+1|0,r=h[e+216>>2],!(l>>>0<(h[e+220>>2]-r|0)/144>>>0))break}}if(3==(0|(f=f+1|0)))break;t=h[(f<<2)+i>>2]}return N=i+16|0,1}vr(),x()}Qi(1336),x()}vr(),x()}Qi(1336),x()}function Oe(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;N=i=N-16|0,h[i>>2]=t,o=-1,-1!=(0|t)?(n=t+1|0,h[i+4>>2]=(n>>>0)%3|0?n:t-2|0,o=(t>>>0)%3|0?t-1|0:t+2|0):h[i+4>>2]=-1,h[i+8>>2]=o;e:{t:{for(;;){i:{if(!(-1==(0|t)|-1==h[h[h[e+8>>2]+12>>2]+(t<<2)>>2])){if(o=0,h[e+220>>2]==h[e+216>>2])break i;n:{for(;;){r:{if(Gi(h[e+368>>2]+(o<<4)|0))if(s=h[e+216>>2]+v(o,144)|0,(n=h[s+136>>2])>>>0<(r=h[s+140>>2])>>>0)h[n>>2]=t,h[s+136>>2]=n+4;else{if((n=1+(a=(c=n-(l=h[s+132>>2])|0)>>2)|0)>>>0>=1073741824)break r;if(u=a<<2,a=(r=r-l|0)>>1,r=r>>>0<2147483644?n>>>0>a>>>0?n:a:1073741823){if(r>>>0>=1073741824)break n;n=gn(r<<2)}else n=0;h[(a=u+n|0)>>2]=t,(0|c)>0&&We(n,l,c),h[s+132>>2]=n,h[s+136>>2]=a+4,h[s+140>>2]=n+(r<<2),l&&ve(l)}if((o=o+1|0)>>>0<(h[e+220>>2]-h[e+216>>2]|0)/144>>>0)continue;break i}break}vr(),x()}Qi(1336),x()}if(o=0,(0|(n=h[e+216>>2]))!=h[e+220>>2])for(;;){if(s=v(o,144)+n|0,(n=h[s+136>>2])>>>0<(r=h[s+140>>2])>>>0)h[n>>2]=t,h[s+136>>2]=n+4;else{if((n=1+(a=(c=n-(l=h[s+132>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(u=a<<2,a=(r=r-l|0)>>1,r=r>>>0<2147483644?n>>>0>a>>>0?n:a:1073741823){if(r>>>0>=1073741824)break e;n=gn(r<<2)}else n=0;h[(a=u+n|0)>>2]=t,(0|c)>0&&We(n,l,c),h[s+132>>2]=n,h[s+136>>2]=a+4,h[s+140>>2]=n+(r<<2),l&&ve(l)}if(o=o+1|0,n=h[e+216>>2],!(o>>>0<(h[e+220>>2]-n|0)/144>>>0))break}}if(3==(0|(d=d+1|0)))break;t=h[(d<<2)+i>>2]}return N=i+16|0,1}vr(),x()}Qi(1336),x()}function ke(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;if(((r=h[e+8>>2])-(s=h[e+4>>2])|0)/12>>>0>=t>>>0){if(t){if(n=s,a=1+(((r=v(t,12)-12|0)>>>0)/12|0)&3)for(;c=h[i+4>>2],h[n>>2]=h[i>>2],h[n+4>>2]=c,h[n+8>>2]=h[i+8>>2],n=n+12|0,(0|a)!=(0|(o=o+1|0)););if(s=v(t,12)+s|0,!(r>>>0<36))for(;t=h[i+4>>2],h[n>>2]=h[i>>2],h[n+4>>2]=t,h[n+8>>2]=h[i+8>>2],h[n+20>>2]=h[i+8>>2],t=h[i+4>>2],h[n+12>>2]=h[i>>2],h[n+16>>2]=t,h[n+32>>2]=h[i+8>>2],t=h[i+4>>2],h[n+24>>2]=h[i>>2],h[n+28>>2]=t,t=h[i+4>>2],h[n+36>>2]=h[i>>2],h[n+40>>2]=t,h[n+44>>2]=h[i+8>>2],(0|s)!=(0|(n=n+48|0)););}h[e+4>>2]=s}else{e:{if((n=(l=(s-(a=h[e>>2])|0)/12|0)+t|0)>>>0<357913942){if(a=(r=(r-a|0)/12|0)<<1,a=r>>>0<178956970?n>>>0>a>>>0?n:a:357913941){if(a>>>0>=357913942)break e;c=gn(v(a,12))}if(n=r=v(l,12)+c|0,u=1+(((l=(t=v(t,12))-12|0)>>>0)/12|0)&3)for(n=r;d=h[i+4>>2],h[n>>2]=h[i>>2],h[n+4>>2]=d,h[n+8>>2]=h[i+8>>2],n=n+12|0,(0|u)!=(0|(o=o+1|0)););if(o=t+r|0,l>>>0>=36)for(;t=h[i+4>>2],h[n>>2]=h[i>>2],h[n+4>>2]=t,h[n+8>>2]=h[i+8>>2],h[n+20>>2]=h[i+8>>2],t=h[i+4>>2],h[n+12>>2]=h[i>>2],h[n+16>>2]=t,h[n+32>>2]=h[i+8>>2],t=h[i+4>>2],h[n+24>>2]=h[i>>2],h[n+28>>2]=t,t=h[i+4>>2],h[n+36>>2]=h[i>>2],h[n+40>>2]=t,h[n+44>>2]=h[i+8>>2],(0|o)!=(0|(n=n+48|0)););return t=h[e>>2],n=r+v((0|(i=s-t|0))/-12|0,12)|0,(0|i)>0&&We(n,t,i),h[e+8>>2]=v(a,12)+c,h[e+4>>2]=o,h[e>>2]=n,void(t&&ve(t))}vr(),x()}Qi(1336),x()}}function Ie(e,t,i,n){var r,a,s=0,o=0,l=0,c=0,u=0,d=0;if(r=h[t+16>>2],s=l=h[i+4>>2]-r|0,o=h[i>>2]-r|0,h[i>>2]=o,h[i+4>>2]=s,a=(0|(d=h[t+16>>2]))>=((c=(s>>=31)+l^s)+((s=o>>31)+o^s)|0))s=l;else{e:{t:{if((0|o)>=0){if(u=1,c=1,(0|l)>=0)break e;if(s=1,u=-1,c=-1,o)break t;break e}if(s=-1,u=-1,c=-1,(0|l)<=0)break e}u=(0|l)<=0?-1:1,c=s}s=(s=o<<1)-(o=v(c,d))|0,s=(((c=(0|v(u,c))>=0)?0-s|0:s)+(u=v(u,d))|0)/2|0,h[i+4>>2]=s,d=o,o=(l<<1)-u|0,o=(d+(c?0-o|0:o)|0)/2|0,h[i>>2]=o}e:{t:{i:{n:{r:{a:{s:{if(o){if((0|o)<0)break s;if((0|s)>=0)break a;break i}if(s)break r;u=1,l=0,s=0,c=0;break e}if(u=1,(0|s)>0)break n;c=(0|s)>0?253:0,l=s,s=o;break e}l=0-s|0,s=0-o|0,c=254;break t}if((0|s)<=0)break i}s=0-s|0,l=o,c=253;break t}l=0-o|0,c=255}h[i>>2]=s,h[i+4>>2]=l,u=0}i=h[n+4>>2]+l|0,(0|(o=h[n>>2]+s|0))>(0|(l=h[t+16>>2]))?o=o-h[t+4>>2]|0:(0-l|0)<=(0|o)||(o=h[t+4>>2]+o|0),(0|i)>(0|l)?i=i-h[t+4>>2]|0:(0-l|0)<=(0|i)||(i=h[t+4>>2]+i|0);e:if(u)t=i;else{t=i;t:switch((3&c)-1|0){case 0:t=0-o|0,o=i;break e;case 1:t=0-i|0,o=0-o|0;break e;case 2:break t;default:break e}t=o,o=0-i|0}if(a)i=t;else{e:{t:{if((0|o)>=0){if(i=1,s=1,(0|t)>=0)break e;if(n=1,i=-1,s=-1,o)break t;break e}if(n=-1,i=-1,s=-1,(0|t)<=0)break e}i=(0|t)<=0?-1:1,s=n}n=(n=o<<1)-(o=v(s,l))|0,h[e>>2]=n,d=0-n|0,c=n,i=(((n=(0|v(i,s))>=0)?d:c)+(s=v(i,l))|0)/2|0,t=(t<<1)-s|0,o=(o+(n?0-t|0:t)|0)/2|0}h[e>>2]=o+r,h[e+4>>2]=i+r}function Ne(e,t){var i=0,n=0,r=0,s=0;h[e+64>>2]||(i=gn(32),h[i+16>>2]=0,h[i+20>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,n=h[e+64>>2],h[e+64>>2]=i,n&&((i=h[n>>2])&&(h[n+4>>2]=i,ve(i)),ve(n),i=h[e+64>>2]),h[e>>2]=i,n=h[i+20>>2],h[e+8>>2]=h[i+16>>2],h[e+12>>2]=n,n=h[i+24>>2],i=h[i+28>>2],h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+16>>2]=n,h[e+20>>2]=i);e:{a[e+24|0]=d[t+24|0],h[e+28>>2]=h[t+28>>2],a[e+32|0]=d[t+32|0],i=h[t+44>>2],h[e+40>>2]=h[t+40>>2],h[e+44>>2]=i,i=h[t+52>>2],h[e+48>>2]=h[t+48>>2],h[e+52>>2]=i,h[e+56>>2]=h[t+56>>2],i=h[t+12>>2],h[e+8>>2]=h[t+8>>2],h[e+12>>2]=i,i=h[t+20>>2],h[e+16>>2]=h[t+16>>2],h[e+20>>2]=i,h[e+60>>2]=h[t+60>>2],(n=h[t>>2])?(i=0,(r=h[e>>2])&&(zi(r,i=h[n>>2],h[n+4>>2]-i|0,0),i=1)):(h[e>>2]=0,i=1);t:if(i){a[e+84|0]=d[t+84|0],h[e+80>>2]=h[t+80>>2],(0|e)!=(0|t)&&Dt(e+68|0,h[t+68>>2],h[t+72>>2]);i:{if(n=h[t+88>>2]){if(t=gn(40),i=h[n>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t>>2]=i,r=h[n+12>>2]-h[n+8>>2]|0){if((0|r)<0)break e;i=gn(r),h[t+8>>2]=i,h[t+12>>2]=i,h[t+16>>2]=i+r,s=h[n+8>>2],(0|(r=h[n+12>>2]-s|0))>0&&(i=We(i,s,r)+r|0),h[t+12>>2]=i}if(i=h[n+36>>2],h[t+32>>2]=h[n+32>>2],h[t+36>>2]=i,i=h[n+28>>2],h[t+24>>2]=h[n+24>>2],h[t+28>>2]=i,i=h[e+88>>2],h[e+88>>2]=t,i)break i;break t}if(i=h[e+88>>2],h[e+88>>2]=0,!i)break t}(e=h[i+8>>2])&&(h[i+12>>2]=e,ve(e)),ve(i)}return}vr(),x()}function Le(e,t,i,n){var r=0,s=0,o=0,l=0,c=0,u=0;if(!((0|(l=n-i|0))<=0)){e:{if((0|l)<=((s=h[e+8>>2])-(c=h[e+4>>2])|0)){if((0|(u=c-t|0))>=(0|l)){o=c,s=n;break e}if(o=c,(0|(s=i+u|0))!=(0|n))for(r=s;a[0|o]=d[0|r],o=o+1|0,(0|(r=r+1|0))!=(0|n););if(h[e+4>>2]=o,(0|u)>0)break e;return}if((0|(n=l+(c-(r=h[e>>2])|0)|0))>=0){if(u=(s=s-r|0)<<1,i=We((o=t-r|0)+(n=(s=s>>>0<1073741823?n>>>0>u>>>0?n:u:2147483647)?gn(s):0)|0,i,l),(0|o)>0&&We(n,r,o),i=i+l|0,(0|t)!=(0|c)){if(o=(-1^t)+c|0,l=c-t&7)for(r=0;a[0|i]=d[0|t],i=i+1|0,t=t+1|0,(0|l)!=(0|(r=r+1|0)););if(o>>>0>=7)for(;a[0|i]=d[0|t],a[i+1|0]=d[t+1|0],a[i+2|0]=d[t+2|0],a[i+3|0]=d[t+3|0],a[i+4|0]=d[t+4|0],a[i+5|0]=d[t+5|0],a[i+6|0]=d[t+6|0],a[i+7|0]=d[t+7|0],i=i+8|0,(0|c)!=(0|(t=t+8|0)););r=h[e>>2]}return h[e+8>>2]=n+s,h[e+4>>2]=i,h[e>>2]=n,void(r&&ve(r))}vr(),x()}if(c>>>0>(n=(r=o)-l|0)>>>0)for(;a[0|r]=d[0|n],r=r+1|0,c>>>0>(n=n+1|0)>>>0;);if(h[e+4>>2]=r,(e=o-(t+l|0)|0)&&At(o-e|0,t,e),(0|i)!=(0|s)){if(e=(-1^i)+s|0,o=s-i&7)for(n=0,r=t;a[0|r]=d[0|i],r=r+1|0,i=i+1|0,(0|o)!=(0|(n=n+1|0)););else r=t;if(!(e>>>0<7))for(;a[0|r]=d[0|i],a[r+1|0]=d[i+1|0],a[r+2|0]=d[i+2|0],a[r+3|0]=d[i+3|0],a[r+4|0]=d[i+4|0],a[r+5|0]=d[i+5|0],a[r+6|0]=d[i+6|0],a[r+7|0]=d[i+7|0],r=r+8|0,(0|s)!=(0|(i=i+8|0)););}}}function Ue(e,t,i,n){e|=0,i|=0,n|=0;var r,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0;N=r=N-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=v(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|5!=(0|t)&6!=(0|t)){if(h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,e){if((0|e)<0)break t;l=gn(t=e<<2),h[r>>2]=l,o=t+l|0,h[r+8>>2]=o,xt(l,0,t),h[r+4>>2]=o}o=h[n>>2],(t=h[n+4>>2]-o>>2)>>>0<s>>>0?ei(n,s-t|0):t>>>0<=s>>>0||(h[n+4>>2]=o+(s<<2));i:if(c)if(e){for(_=-4&e,g=3&e,y=e-1>>>0<3,t=1,s=0;;){if(he(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(b=h[n>>2],m=0,o=h[r>>2],e=0,t=0,!y)for(;p=e<<2,h[(f=(u<<2)+b|0)>>2]=h[o+p>>2],h[f+4>>2]=h[o+(4|p)>>2],h[f+8>>2]=h[o+(8|p)>>2],h[f+12>>2]=h[o+(12|p)>>2],e=e+4|0,u=u+4|0,(0|_)!=(0|(t=t+4|0)););if(g)for(;h[(u<<2)+b>>2]=h[o+(e<<2)>>2],e=e+1|0,u=u+1|0,(0|(m=m+1|0))!=(0|g););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[r>>2]}else for(e=0,t=1;;){if(!he(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&ve(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=0,e=s<<2){if((0|e)<0)break t;u=(t=We(i=gn(e),l+c|0,e))+e|0,t=t+(e>>2<<2)|0}(e=h[n>>2])&&(h[n+4>>2]=e,ve(e)),h[n+8>>2]=t,h[n+4>>2]=u,h[n>>2]=i,e=1}N=r+16|0,e&=1;break e}vr(),x()}return 0|e}function Be(e,t){e|=0,t|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;N=i=N-32|0,h[i+28>>2]=0;e:{if(f[t+38>>1]<=513){if(n=h[t+20>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(0|(s=h[t+12>>2]))<=(0|n)&l>>>0>p[t+8>>2]|(0|n)>(0|s))break e;r=r+h[t>>2]|0,r=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n}else{if(!Ai(1,i+28|0,t))break e;r=h[i+28>>2]}if(r&&(rt(e+76|0,r),h[(n=i+8|0)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,He(n,t))){for(s=1;o=1<<c,u=Gi(n),l=h[e+76>>2]+(c>>>3&536870908)|0,1&(s^=u)?o=h[l>>2]&(-1^o):o|=h[l>>2],s^=1,h[l>>2]=o,(0|(c=c+1|0))!=(0|r););c=0,l=r=h[t+12>>2],s=n=h[t+20>>2],n=(u=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(m=h[t+8>>2])>>>0<u>>>0&(0|n)>=(0|r)|(0|n)>(0|r)||(g=h[t>>2],r=d[0|(r=g+o|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=n,n=s,o=s=o+8|0,s=n=s>>>0<8?n+1|0:n,o>>>0>m>>>0&(0|n)>=(0|l)|(0|n)>(0|l)||(n=d[0|(n=u+g|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,(0|n)<(0|r)||(h[e+16>>2]=n,h[e+12>>2]=r,!(t=(n>>31)-((r>>31)+(n>>>0<r>>>0)|0)|0)&(n=n-r|0)>>>0>2147483646|t||(c=1,t=n+1|0,h[e+20>>2]=t,n=t>>>1|0,h[e+24>>2]=n,h[e+28>>2]=0-n,1&t||(h[e+24>>2]=n-1)))))}}return N=i+32|0,0|c}function Fe(e,t){var i=0,n=0,r=0,a=0,s=0;n=-1,a=-1,-1!=(0|t)&&(n=((i=t+1|0)>>>0)%3|0?i:t-2|0,a=t-1|0,(t>>>0)%3|0||(a=t+2|0));e:{t:{i:{n:{r:{a:switch(0|(r=h[e+184>>2])){case 7:break i;case 3:break n;case 5:break r;case 0:case 1:break a;default:break e}s=h[e+148>>2],i=-1,r=1,n=(-1!=(0|n)?h[h[s>>2]+(n<<2)>>2]:i)<<2,i=h[e+156>>2],h[(n=n+i|0)>>2]=h[n>>2]+1,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],r=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[r>>2]=h[r>>2]+1,n=((-1!=(0|n)?h[h[s>>2]+(n<<2)>>2]:-1)<<2)+i|0,h[n>>2]=h[n>>2]+1,r=2,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],r=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[r>>2]=h[r>>2]+1,n=((-1!=(0|n)?h[h[s>>2]+(n<<2)>>2]:-1)<<2)+i|0,h[n>>2]=h[n>>2]+2,r=1,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0;break t}s=h[e+148>>2],r=(i=h[e+156>>2])+((-1!=(0|t)?h[h[s>>2]+(t<<2)>>2]:-1)<<2)|0,h[r>>2]=h[r>>2]+2,n=((-1!=(0|n)?h[h[s>>2]+(n<<2)>>2]:-1)<<2)+i|0,h[n>>2]=h[n>>2]+2,r=2,i=((-1!=(0|a)?h[h[s>>2]+(a<<2)>>2]:-1)<<2)+i|0}h[i>>2]=h[i>>2]+r,r=h[e+184>>2]}switch(0|r){case 0:case 5:return a=h[e+156>>2],i=-1,-1!=(0|t)&&(i=-1,-1!=(0|(t=((n=t+1|0)>>>0)%3|0?n:t-2|0))&&(i=h[h[h[e+148>>2]>>2]+(t<<2)>>2])),h[a+(i<<2)>>2]<=5?void(h[e+188>>2]=5):void(h[e+188>>2]=0)}h[e+188>>2]=-1}function Ge(e,t){e|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0;if(N=i=N-16|0,n=h[20+(t|=0)>>2],n=(l=(r=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,!((0|(s=h[t+12>>2]))<=(0|n)&l>>>0>p[t+8>>2]|(0|n)>(0|s))&&(r=r+h[t>>2]|0,r=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=n,!((0|r)<0)&&(rt(e+76|0,r),h[(n=i)>>2]=0,h[n+4>>2]=0,a[n+5|0]=0,a[n+6|0]=0,a[n+7|0]=0,a[n+8|0]=0,a[n+9|0]=0,a[n+10|0]=0,a[n+11|0]=0,a[n+12|0]=0,He(n,t)))){if(r)for(s=1;o=1<<c,u=Gi(n),l=h[e+76>>2]+(c>>>3&536870908)|0,1&(s^=u)?o=h[l>>2]&(-1^o):o|=h[l>>2],s^=1,h[l>>2]=o,(0|r)!=(0|(c=c+1|0)););c=0,l=r=h[t+12>>2],s=n=h[t+20>>2],n=(u=(o=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(f=h[t+8>>2])>>>0<u>>>0&(0|n)>=(0|r)|(0|n)>(0|r)||(m=h[t>>2],r=d[0|(r=m+o|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+16>>2]=u,h[t+20>>2]=n,n=s,o=s=o+8|0,s=n=s>>>0<8?n+1|0:n,o>>>0>f>>>0&(0|n)>=(0|l)|(0|n)>(0|l)||(n=d[0|(n=u+m|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,(0|n)<(0|r)||(h[e+16>>2]=n,h[e+12>>2]=r,!(t=(n>>31)-((r>>31)+(n>>>0<r>>>0)|0)|0)&(n=n-r|0)>>>0>2147483646|t||(c=1,t=n+1|0,h[e+20>>2]=t,n=t>>>1|0,h[e+24>>2]=n,h[e+28>>2]=0-n,1&t||(h[e+24>>2]=n-1)))))}return N=i+16|0,0|c}function Ve(e,t){var i=0,n=0,r=0,a=0,s=0;a=-1,n=-1,-1!=(0|t)&&(a=((n=t+1|0)>>>0)%3|0?n:t-2|0,n=t-1|0,(t>>>0)%3|0||(n=t+2|0));e:{t:{i:switch(h[e+168>>2]){case 0:case 1:r=h[e+148>>2],i=1,s=(t=h[e+156>>2])+((-1!=(0|a)?h[h[r>>2]+(a<<2)>>2]:-1)<<2)|0,h[s>>2]=h[s>>2]+1,t=((-1!=(0|n)?h[h[r>>2]+(n<<2)>>2]:-1)<<2)+t|0;break t;case 5:r=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[r>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+1,i=((-1!=(0|a)?h[h[r>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+1,i=2,t=((-1!=(0|n)?h[h[r>>2]+(n<<2)>>2]:-1)<<2)+t|0;break t;case 3:r=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[r>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+1,i=((-1!=(0|a)?h[h[r>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+2,i=1,t=((-1!=(0|n)?h[h[r>>2]+(n<<2)>>2]:-1)<<2)+t|0;break t;case 7:break i;default:break e}r=h[e+148>>2],i=-1,i=(-1!=(0|t)?h[h[r>>2]+(t<<2)>>2]:i)<<2,t=h[e+156>>2],h[(i=i+t|0)>>2]=h[i>>2]+2,i=((-1!=(0|a)?h[h[r>>2]+(a<<2)>>2]:-1)<<2)+t|0,h[i>>2]=h[i>>2]+2,i=2,t=((-1!=(0|n)?h[h[r>>2]+(n<<2)>>2]:-1)<<2)+t|0}h[t>>2]=h[t>>2]+i}i=e,n=h[e+180>>2],t=h[h[e+156>>2]+((-1!=(0|a)?h[h[h[e+148>>2]>>2]+(a<<2)>>2]:-1)<<2)>>2],e=h[e+176>>2],h[i+172>>2]=(0|e)>(0|t)?0:((0|t)>(0|n)?n:t)-e|0}function ze(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;if((n=h[e+8>>2])-(r=h[e>>2])>>2>>>0>=t>>>0){if(a=t>>>0>(o=(s=h[e+4>>2])-r>>2)>>>0?o:t){if(u=a-1|0,l=7&a)for(n=r;h[n>>2]=h[i>>2],a=a-1|0,n=n+4|0,(0|(c=c+1|0))!=(0|l););else n=r;if(!(u>>>0<7))for(;h[n>>2]=h[i>>2],h[n+4>>2]=h[i>>2],h[n+8>>2]=h[i>>2],h[n+12>>2]=h[i>>2],h[n+16>>2]=h[i>>2],h[n+20>>2]=h[i>>2],h[n+24>>2]=h[i>>2],h[n+28>>2]=h[i>>2],n=n+32|0,a=a-8|0;);}if(t>>>0>o>>>0){if(n=e,e=t-o|0)for(e=(e<<2)+s|0;h[s>>2]=h[i>>2],(0|e)!=(0|(s=s+4|0)););else e=s;return void(h[n+4>>2]=e)}h[e+4>>2]=r+(t<<2)}else if(r&&(h[e+4>>2]=r,ve(r),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,n=0),t>>>0>=1073741824||(r=n>>1,(n=n>>>0<2147483644?t>>>0>r>>>0?t:r:1073741823)>>>0>=1073741824))vr(),x();else{if(r=gn(n<<=2),h[e>>2]=r,h[e+8>>2]=n+r,i=h[i>>2],n=r,s=7&t)for(;h[n>>2]=i,n=n+4|0,(0|s)!=(0|(a=a+1|0)););if(r=r+(t<<2)|0,(t-1&1073741823)>>>0>=7)for(;h[n+28>>2]=i,h[n+24>>2]=i,h[n+20>>2]=i,h[n+16>>2]=i,h[n+12>>2]=i,h[n+8>>2]=i,h[n+4>>2]=i,h[n>>2]=i,(0|r)!=(0|(n=n+32|0)););h[e+4>>2]=r}}function He(e,t){var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0;N=i=N-16|0;e:if(!((0|(s=h[t+20>>2]))>=(0|(n=h[t+12>>2]))&(o=h[t+16>>2])>>>0>=p[t+8>>2]|(0|n)<(0|s))){if(a[e+12|0]=d[o+h[t>>2]|0],n=s=h[t+20>>2],s=(r=(o=h[t+16>>2])+1|0)?n:n+1|0,c=r,h[t+16>>2]=r,h[t+20>>2]=s,f[t+38>>1]<=513){if(l=h[t+12>>2],s=n,s=(n=o+5|0)>>>0<5?s+1|0:s,o=n,(r=h[t+8>>2])>>>0<n>>>0&(0|s)>=(0|l)|(0|s)>(0|l))break e;n=c+h[t>>2]|0,n=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s}else{if(!wi(1,i+12|0,t))break e;o=h[t+16>>2],s=h[t+20>>2],r=h[t+8>>2],l=h[t+12>>2],n=h[i+12>>2]}if(c=r-o|0,!((0|(r=l-(s+(r>>>0<o>>>0)|0)|0))<=0&n>>>0>c>>>0|(0|r)<0|(0|n)<=0)){r=o+h[t>>2]|0,h[e>>2]=r,m=e;t:if((u=d[0|(c=(l=n-1|0)+r|0)])>>>0<=63)h[e+4>>2]=l,e=63&d[0|c];else{i:switch((u>>>6|0)-1|0){case 0:if(n>>>0<2)break e;h[e+4>>2]=n-2,e=d[1+(r=(n+r|0)-2|0)|0]<<8&16128|d[0|r];break t;case 1:break i;default:break e}if(n>>>0<3)break e;h[e+4>>2]=n-3,e=d[2+(r=(n+r|0)-3|0)|0]<<16&4128768|d[r+1|0]<<8|d[0|r]}e=e+4096|0,h[m+8>>2]=e,e>>>0>1048575||(s=(e=n+o|0)>>>0<n>>>0?s+1|0:s,h[t+16>>2]=e,h[t+20>>2]=s,g=1)}}return N=i+16|0,g}function je(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;N=i=N-16|0;e:{if(f[t+38>>1]<=511){if(l=o=h[t+12>>2],n=h[t+20>>2],n=(s=(r=h[t+16>>2])+8|0)>>>0<8?n+1|0:n,(a=h[t+8>>2])>>>0<s>>>0&(0|n)>=(0|o)|(0|n)>(0|o))break e;r=r+h[t>>2]|0,o=d[0|r]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,r=d[r+4|0]|d[r+5|0]<<8|d[r+6|0]<<16|d[r+7|0]<<24,h[t+16>>2]=s,h[t+20>>2]=n}else{if(!hi(1,i+8|0,t))break e;s=h[t+16>>2],n=h[t+20>>2],a=h[t+8>>2],l=h[t+12>>2],o=h[i+8>>2],r=h[i+12>>2]}if(c=a-s|0,!((0|(a=l-(n+(s>>>0>a>>>0)|0)|0))==(0|r)&o>>>0>c>>>0|r>>>0>a>>>0||(n=n+r|0,n=(a=s+o|0)>>>0<s>>>0?n+1|0:n,h[t+16>>2]=a,h[t+20>>2]=n,(0|(n=o))<=0))){t=s+h[t>>2]|0,h[e+40>>2]=t,l=e;t:if((a=d[0|(o=t+(s=n-1|0)|0)])>>>0<=63)h[e+44>>2]=s,e=63&d[0|o];else{switch((a>>>6|0)-1|0){case 0:if(n>>>0<2)break e;h[e+44>>2]=n-2,e=d[1+(t=(t+n|0)-2|0)|0]<<8&16128|d[0|t];break t;case 1:if(n>>>0<3)break e;h[e+44>>2]=n-3,e=d[2+(t=(t+n|0)-3|0)|0]<<16&4128768|d[t+1|0]<<8|d[0|t];break t}h[e+44>>2]=n-4,e=d[2+(t=(t+n|0)-4|0)|0]<<16|d[t+3|0]<<24&1056964608|d[t+1|0]<<8|d[0|t]}e=e+16384|0,h[l+48>>2]=e,u=e>>>0<4194304}}return N=i+16|0,u}function We(e,t,i){var n,r=0,s=0;if(i>>>0>=512)return O(0|e,0|t,0|i),e;n=e+i|0;e:if(3&(e^t))if(n>>>0<4)i=e;else if((r=n-4|0)>>>0<e>>>0)i=e;else for(i=e;a[0|i]=d[0|t],a[i+1|0]=d[t+1|0],a[i+2|0]=d[t+2|0],a[i+3|0]=d[t+3|0],t=t+4|0,r>>>0>=(i=i+4|0)>>>0;);else{t:if(3&e)if(i)for(i=e;;){if(a[0|i]=d[0|t],t=t+1|0,!(3&(i=i+1|0)))break t;if(!(i>>>0<n>>>0))break}else i=e;else i=e;if(!((r=-4&n)>>>0<64||(s=r+-64|0)>>>0<i>>>0))for(;h[i>>2]=h[t>>2],h[i+4>>2]=h[t+4>>2],h[i+8>>2]=h[t+8>>2],h[i+12>>2]=h[t+12>>2],h[i+16>>2]=h[t+16>>2],h[i+20>>2]=h[t+20>>2],h[i+24>>2]=h[t+24>>2],h[i+28>>2]=h[t+28>>2],h[i+32>>2]=h[t+32>>2],h[i+36>>2]=h[t+36>>2],h[i+40>>2]=h[t+40>>2],h[i+44>>2]=h[t+44>>2],h[i+48>>2]=h[t+48>>2],h[i+52>>2]=h[t+52>>2],h[i+56>>2]=h[t+56>>2],h[i+60>>2]=h[t+60>>2],t=t- -64|0,s>>>0>=(i=i- -64|0)>>>0;);if(i>>>0>=r>>>0)break e;for(;h[i>>2]=h[t>>2],t=t+4|0,r>>>0>(i=i+4|0)>>>0;);}if(i>>>0<n>>>0)for(;a[0|i]=d[0|t],t=t+1|0,(0|n)!=(0|(i=i+1|0)););return e}function Ye(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;if((a=h[e+8>>2])-(r=h[e+4>>2])>>2>>>0>=t>>>0){if(t){if(n=r,s=7&t)for(;h[n>>2]=h[i>>2],n=n+4|0,(0|s)!=(0|(o=o+1|0)););if(r=(t<<2)+r|0,!((t-1&1073741823)>>>0<7))for(;h[n>>2]=h[i>>2],h[n+4>>2]=h[i>>2],h[n+8>>2]=h[i>>2],h[n+12>>2]=h[i>>2],h[n+16>>2]=h[i>>2],h[n+20>>2]=h[i>>2],h[n+24>>2]=h[i>>2],h[n+28>>2]=h[i>>2],(0|r)!=(0|(n=n+32|0)););}h[e+4>>2]=r}else{e:{if((n=(r=(u=r-(s=h[e>>2])|0)>>2)+t|0)>>>0<1073741824){if(l=(a=a-s|0)>>1,a=a>>>0<2147483644?n>>>0>l>>>0?n:l:1073741823){if(a>>>0>=1073741824)break e;c=gn(a<<2)}if(n=r=(r<<2)+c|0,l=7&t)for(n=r;h[n>>2]=h[i>>2],n=n+4|0,(0|l)!=(0|(o=o+1|0)););if(r=r+(t<<2)|0,(t-1&1073741823)>>>0>=7)for(;h[n>>2]=h[i>>2],h[n+4>>2]=h[i>>2],h[n+8>>2]=h[i>>2],h[n+12>>2]=h[i>>2],h[n+16>>2]=h[i>>2],h[n+20>>2]=h[i>>2],h[n+24>>2]=h[i>>2],h[n+28>>2]=h[i>>2],(0|r)!=(0|(n=n+32|0)););return(0|u)>0&&We(c,s,u),h[e+8>>2]=(a<<2)+c,h[e+4>>2]=r,h[e>>2]=c,void(s&&ve(s))}vr(),x()}Qi(1336),x()}}function Xe(e){var t,i=0,n=0,r=0,a=0;if(h[(e|=0)>>2]=11512,(i=h[196+(t=e+232|0)>>2])&&(h[t+200>>2]=i,ve(i)),n=h[t+184>>2]){if((0|n)==(0|(i=h[t+188>>2])))i=n;else{for(;(a=h[(r=i-12|0)>>2])&&(h[i-8>>2]=a,ve(a)),(0|n)!=(0|(i=r)););i=h[t+184>>2]}h[t+188>>2]=n,ve(i)}if((i=h[t+156>>2])&&(h[t+160>>2]=i,ve(i)),n=h[t+136>>2],h[t+136>>2]=0,n){if(i=h[(r=n-4|0)>>2])for(i=n+(i<<4)|0;(0|n)!=(0|(i=i-16|0)););ve(r)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,ve(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,ve(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,ve(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,ve(i)),i=h[e+144>>2])for(;n=h[i>>2],ve(i),i=n;);return i=h[e+136>>2],h[e+136>>2]=0,i&&ve(i),(i=h[e+120>>2])&&ve(i),(i=h[e+108>>2])&&ve(i),(i=h[e+96>>2])&&ve(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,ve(i)),(i=h[e+60>>2])&&ve(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,ve(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,ve(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,ve(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,ve(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ii(i),0|e}function Ze(e,t){var i,n,r=0,s=0,o=0;N=i=N-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[(r=e+16|0)>>2]=0,h[r+4>>2]=0,a[r+5|0]=0,a[r+6|0]=0,a[r+7|0]=0,a[r+8|0]=0,a[r+9|0]=0,a[r+10|0]=0,a[r+11|0]=0,a[r+12|0]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+48>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+68>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+88>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+100>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,n=e+116|0;e:{t:{if(t){if(t>>>0<1073741824)break t;vr(),x()}h[e+104>>2]=0,h[e+108>>2]=0,h[e+112>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,r=1;break e}s=gn(r=t<<2),h[e+92>>2]=s,o=r+s|0,h[e+100>>2]=o,xt(s,0,r),h[e+112>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0,h[e+96>>2]=o,s=gn(r),h[e+104>>2]=s,o=r+s|0,h[e+112>>2]=o,xt(s,0,r),h[e+108>>2]=o,s=gn(r),h[i>>2]=s,o=r+s|0,h[i+8>>2]=o,xt(s,0,r),h[i+4>>2]=o,r=t<<5|1}return Bt(n,r,i),(s=h[i>>2])&&(h[i+4>>2]=s,ve(s)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(s=gn(t<<=2),h[i>>2]=s,o=t+s|0,h[i+8>>2]=o,xt(s,0,t),h[i+4>>2]=o),Bt(e+128|0,r,i),(t=h[i>>2])&&(h[i+4>>2]=t,ve(t)),N=i+16|0,e}function qe(e,t,i,n){var r,a=0,s=0,o=0,l=0,c=0,u=0,h=0,d=0;r=i;e:{t:{i:{n:{r:{a:{s:{o:{l:{c:{u:{if(t){if(!r)break u;if(!n)break c;if((i=y(n)-y(t)|0)>>>0<=31)break l;break i}if(1==(0|n)|n>>>0>1)break i;e=(e>>>0)/(r>>>0)|0,L=0;break e}if(!e)break o;if(!n)break s;if(n-1&n)break s;e=t>>>Fn(n)|0,L=0;break e}if(!(r-1&r))break a;a=0-(o=(y(r)+33|0)-y(t)|0)|0;break n}o=i+1|0,a=63-i|0;break n}e=(t>>>0)/(n>>>0)|0,L=0;break e}if((i=y(n)-y(t)|0)>>>0<31)break r;break i}if(1==(0|r))break t;n=31&(i=Fn(r)),(63&i)>>>0>=32?(i=0,e=t>>>n|0):(i=t>>>n|0,e=((1<<n)-1&t)<<32-n|e>>>n),L=i;break e}o=i+1|0,a=63-i|0}if(s=31&(i=63&o),i>>>0>=32?(i=0,l=t>>>s|0):(i=t>>>s|0,l=((1<<s)-1&t)<<32-s|e>>>s),s=i,a=31&(i=63&a),i>>>0>=32?(i=e<<a,e=0):(i=(1<<a)-1&e>>>32-a|t<<a,e<<=a),t=i,o)for(i=n-1|0,d=-1!=(0|(a=r-1|0))?i+1|0:i;l=(i=l<<1|t>>>31)-(u=r&(c=d-((s=s<<1|l>>>31)+(i>>>0>a>>>0)|0)>>31))|0,s=s-((n&c)+(i>>>0<u>>>0)|0)|0,t=t<<1|e>>>31,e=h|e<<1,h=1&c,o=o-1|0;);L=t<<1|e>>>31,e=h|e<<1;break e}e=0,t=0}L=t}return e}function Qe(e,t){var i,n,r=0,a=0,s=0;N=i=N-16|0,h[e+12>>2]=t,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+32>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e+52>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[e+72>>2]=0,h[e+64>>2]=0,h[e+68>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+92>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+104>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,n=e+120|0;e:{t:{if(t){if(t>>>0<1073741824)break t;vr(),x()}h[e+108>>2]=0,h[e+112>>2]=0,h[e+116>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,a=1;break e}r=gn(a=t<<2),h[e+96>>2]=r,s=r+a|0,h[e+104>>2]=s,xt(r,0,a),h[e+116>>2]=0,h[e+108>>2]=0,h[e+112>>2]=0,h[e+100>>2]=s,r=gn(a),h[e+108>>2]=r,s=r+a|0,h[e+116>>2]=s,xt(r,0,a),h[e+112>>2]=s,r=gn(a),h[i>>2]=r,s=r+a|0,h[i+8>>2]=s,xt(r,0,a),h[i+4>>2]=s,a=t<<5|1}return Bt(n,a,i),(r=h[i>>2])&&(h[i+4>>2]=r,ve(r)),h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,t&&(r=gn(t<<=2),h[i>>2]=r,s=t+r|0,h[i+8>>2]=s,xt(r,0,t),h[i+4>>2]=s),Bt(e+132|0,a,i),(t=h[i>>2])&&(h[i+4>>2]=t,ve(t)),N=i+16|0,e}function Ke(e,t){var i=0,n=0,r=0;i=(0|e)==(0|t),a[t+12|0]=i;e:if(!i)for(;;){if(n=h[t+8>>2],d[n+12|0])break e;t:{if(i=h[n+8>>2],(0|n)!=(0|(r=h[i>>2]))){if(!(d[r+12|0]|!r))break t;h[n>>2]==(0|t)?(e=h[t+4>>2],h[n>>2]=e,e&&(h[e+8>>2]=n,i=h[n+8>>2]),h[t+8>>2]=i,e=h[n+8>>2],h[(((0|n)!=h[e>>2])<<2)+e>>2]=t,h[t+4>>2]=n,h[n+8>>2]=t,i=h[t+8>>2]):t=n,a[t+12|0]=1,a[i+12|0]=0,e=h[i+4>>2],t=h[e>>2],h[i+4>>2]=t,t&&(h[t+8>>2]=i),h[e+8>>2]=h[i+8>>2],t=h[i+8>>2],h[((h[t>>2]!=(0|i))<<2)+t>>2]=e,h[e>>2]=i,t=i+8|0}else{if(!(!(r=h[i+4>>2])|d[r+12|0]))break t;h[n>>2]!=(0|t)?(t=h[n+4>>2],e=h[t>>2],h[n+4>>2]=e,e&&(h[e+8>>2]=n,i=h[n+8>>2]),h[t+8>>2]=i,e=h[n+8>>2],h[(((0|n)!=h[e>>2])<<2)+e>>2]=t,h[t>>2]=n,h[n+8>>2]=t,i=h[t+8>>2]):t=n,a[t+12|0]=1,a[i+12|0]=0,e=h[i>>2],t=h[e+4>>2],h[i>>2]=t,t&&(h[t+8>>2]=i),h[e+8>>2]=h[i+8>>2],t=h[i+8>>2],h[((h[t>>2]!=(0|i))<<2)+t>>2]=e,h[e+4>>2]=i,t=i+8|0}h[t>>2]=e;break e}if(a[n+12|0]=1,n=(0|e)==(0|i),a[i+12|0]=n,a[r+12|0]=1,t=i,n)break}}function Je(e,t,i,n){var r,a,s=0,o=0,l=0,c=0,u=0,d=0,f=0;if(r=h[t+16>>2],s=u=h[i+4>>2]-r|0,o=h[i>>2]-r|0,h[i>>2]=o,h[i+4>>2]=s,a=(0|(l=h[t+16>>2]))>=((c=(s>>=31)+u^s)+((s=o>>31)+o^s)|0))s=u;else{e:{t:{if((0|o)>=0){if(s=1,c=1,(0|u)>=0)break e;if(d=1,s=-1,c=-1,o)break t;break e}if(d=-1,s=-1,c=-1,(0|u)<=0)break e}s=(0|u)<=0?-1:1,c=d}o=(o<<1)-(d=v(l,c))|0,s=(((c=(0|v(s,c))>=0)?0-o|0:o)+(l=v(s,l))|0)/2|0,h[i+4>>2]=s,f=i,i=(u<<1)-l|0,o=(d+(c?0-i|0:i)|0)/2|0,h[f>>2]=o,l=h[t+16>>2]}if(i=h[n+4>>2]+s|0,(0|l)<(0|(o=h[n>>2]+o|0))?o=o-h[t+4>>2]|0:(0-l|0)<=(0|o)||(o=h[t+4>>2]+o|0),(0|i)>(0|l)?i=i-h[t+4>>2]|0:(0-l|0)<=(0|i)||(i=h[t+4>>2]+i|0),a)l=i;else{e:{t:{if((0|o)>=0){if(t=1,s=1,(0|i)>=0)break e;if(n=1,t=-1,s=-1,o)break t;break e}if(n=-1,t=-1,s=-1,(0|i)<=0)break e}t=(0|i)<=0?-1:1,s=n}n=(o<<1)-(u=v(s,l))|0,h[e>>2]=n,d=0-n|0,c=n,l=(((n=(0|v(t,s))>=0)?d:c)+(t=v(t,l))|0)/2|0,t=(i<<1)-t|0,o=(u+(n?0-t|0:t)|0)/2|0}h[e>>2]=o+r,h[e+4>>2]=l+r}function $e(e){var t,i=0,n=0,r=0,a=0,s=0,o=0;N=t=N-32|0;e:if((i=h[e+16>>2])>>>0>=341)h[e+16>>2]=i-341,i=h[e+4>>2],h[t+8>>2]=h[i>>2],h[e+4>>2]=i+4,ot(e,t+8|0);else{t:{i:{n:{r:{if((a=(r=h[e+8>>2])-h[e+4>>2]>>2)>>>0<(i=(n=h[e+12>>2])-h[e>>2]|0)>>2>>>0){if((0|n)==(0|r))break r;s=t,o=gn(4092),h[s+8>>2]=o,ot(e,t+8|0);break e}if(h[t+24>>2]=e+12,(i=i?i>>1:1)>>>0>=1073741824)break n;if(i=gn(n=i<<2),h[t+8>>2]=i,r=i+(a<<2)|0,h[t+16>>2]=r,h[t+20>>2]=i+n,h[t+12>>2]=r,s=t,o=gn(4092),h[s+4>>2]=o,ot(t+8|0,t+4|0),(0|(n=h[e+8>>2]))==h[e+4>>2]){i=n;break t}for(;ct(t+8|0,n=n-4|0),h[e+4>>2]!=(0|n););break i}s=t,o=gn(4092),h[s+8>>2]=o,ct(e,i=t+8|0),n=h[e+4>>2],h[t+8>>2]=h[n>>2],h[e+4>>2]=n+4,ot(e,i);break e}Qi(1336),x()}i=h[e+8>>2]}r=h[e>>2],h[e>>2]=h[t+8>>2],h[t+8>>2]=r,h[e+4>>2]=h[t+12>>2],h[t+12>>2]=n,h[e+8>>2]=h[t+16>>2],h[t+16>>2]=i,a=h[e+12>>2],h[e+12>>2]=h[t+20>>2],h[t+20>>2]=a,(0|i)!=(0|n)&&(h[t+16>>2]=i+(((i-n|0)-4>>>2^-1)<<2)),r&&ve(r)}N=t+32|0}function et(e,t,i){e|=0,t|=0,i|=0;var n,r=0,s=0,o=0,l=0,c=0,u=b(0),d=0,f=0,p=0,g=0,v=0,_=0,y=0,A=0,E=0,w=0,S=0;if(N=n=N-16|0,9==h[i+28>>2]){r=h[e+4>>2],s=(l=a[i+24|0])<<2,o=gn((1073741823&l)!=(0|l)?-1:s),h[(f=n+8|0)>>2]=1065353216,u=m[e+20>>2],(0|(r=-1<<r^-1))>0&&(m[f>>2]=u/b(0|r));e:if((v=(0|r)>0)&&(d=h[i+80>>2]))if(r=0,(0|l)<=0){if(1!=(0|d))for(e=-2&d,t=0;We(h[h[i+64>>2]>>2]+r|0,o,s),We((r=r+s|0)+h[h[i+64>>2]>>2]|0,o,s),r=r+s|0,(0|e)!=(0|(t=t+2|0)););if(!(1&d))break e;We(h[h[i+64>>2]>>2]+r|0,o,s)}else for(_=h[h[t>>2]>>2]+h[t+48>>2]|0,w=-2&l,S=1&l;;){if(p=h[e+8>>2],u=m[f>>2],t=0,g=0,1!=(0|l))for(;y=(r<<2)+_|0,m[(c=t<<2)+o>>2]=b(u*b(h[y>>2]))+m[c+p>>2],m[(c|=4)+o>>2]=b(u*b(h[y+4>>2]))+m[c+p>>2],t=t+2|0,r=r+2|0,(0|w)!=(0|(g=g+2|0)););if(S&&(m[(t<<=2)+o>>2]=b(u*b(h[(r<<2)+_>>2]))+m[t+p>>2],r=r+1|0),We(h[h[i+64>>2]>>2]+A|0,o,s),A=s+A|0,(0|(E=E+1|0))==(0|d))break}ve(o)}return N=n+16|0,0|v}function tt(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;n=(i>>>0)/3|0,l=h[(h[h[e+8>>2]+96>>2]+v(n,12)|0)+(i-v(n,3)<<2)>>2],r=h[h[e+12>>2]+4>>2];e:if((0|(n=h[r+4>>2]))==h[r+8>>2]){t:{if((n=1+(c=(s=n-(o=h[r>>2])|0)>>2)|0)>>>0<1073741824){if(a=s>>1,a=s>>>0<2147483644?n>>>0>a>>>0?n:a:1073741823){if(a>>>0>=1073741824)break t;n=gn(a<<2)}else n=0;h[(c=n+(c<<2)|0)>>2]=l,(0|s)>0&&We(n,o,s),h[r+8>>2]=n+(a<<2),h[r+4>>2]=c+4,h[r>>2]=n,o&&ve(o);break e}vr(),x()}Qi(1336),x()}else h[n>>2]=l,h[r+4>>2]=n+4;r=h[e+4>>2];e:{t:{if((0|(n=h[r+4>>2]))==h[r+8>>2]){if((n=1+(l=(s=n-(o=h[r>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(a=s>>1,a=s>>>0<2147483644?n>>>0>a>>>0?n:a:1073741823){if(a>>>0>=1073741824)break e;n=gn(a<<2)}else n=0;h[(l=n+(l<<2)|0)>>2]=i,(0|s)>0&&We(n,o,s),h[r+8>>2]=n+(a<<2),h[r+4>>2]=l+4,h[r>>2]=n,o&&ve(o)}else h[n>>2]=i,h[r+4>>2]=n+4;return e=h[e+4>>2],h[h[e+12>>2]+(t<<2)>>2]=h[e+24>>2],void(h[e+24>>2]=h[e+24>>2]+1)}vr(),x()}Qi(1336),x()}function it(e,t){var i=0,n=0,r=0,s=0,o=0,l=0,c=0,u=0;if((n=d[e+11|0]>>>7|0?h[e+4>>2]:d[e+11|0])>>>0<t>>>0)return N=l=N-16|0,(s=t-n|0)&&(c=(o=(t=d[e+11|0]>>>7|0)?h[e+4>>2]:d[e+11|0])+s|0,(t=t?(2147483647&h[e+8>>2])-1|0:10)-o>>>0<s>>>0&&(N=n=N-16|0,(i=c-t|0)>>>0<=-17-t>>>0?(u=d[e+11|0]>>>7|0?h[e>>2]:e,t>>>0<2147483623?(h[n+8>>2]=t<<1,h[n+12>>2]=t+i,N=i=N-16|0,N=i+16|0,i=n+8|0,i=(i=h[(p[(r=n+12|0)>>2]<p[i>>2]?i:r)>>2])>>>0>=11?11==(0|(i=(r=i+16&-16)-1|0))?r:i:10):i=-18,i=gn(r=i+1|0),o&&nr(i,u,o),10!=(0|t)&&ve(u),h[e>>2]=i,h[e+8>>2]=-2147483648|r,N=n+16|0):(mr(),x())),n=o+(t=d[e+11|0]>>>7|0?h[e>>2]:e)|0,s&&xt(n,0,s),d[e+11|0]>>>7|0?h[e+4>>2]=c:a[e+11|0]=c,a[l+15|0]=0,a[t+c|0]=d[l+15|0]),void(N=l+16|0);N=n=N-16|0,d[e+11|0]>>>7|0?(s=h[e>>2],a[n+15|0]=0,a[t+s|0]=d[n+15|0],h[e+4>>2]=t):(a[n+14|0]=0,a[e+t|0]=d[n+14|0],a[e+11|0]=t),N=n+16|0}function nt(e,t){e|=0;var i,n,r,a=0,s=0,o=0,l=0,c=0,u=0,p=0,m=0;a=i=h[12+(t|=0)>>2],l=s=h[t+20>>2],s=(o=(n=h[t+16>>2])+4|0)>>>0<4?s+1|0:s;e:if(!((r=h[t+8>>2])>>>0<o>>>0&(0|a)<=(0|s)|(0|a)<(0|s)||(u=h[t>>2],a=d[0|(a=n+u|0)]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,h[t+16>>2]=o,h[t+20>>2]=s,s=l,(c=n+8|0)>>>0>r>>>0&(0|(s=c>>>0<8?s+1|0:s))>=(0|i)|(0|s)>(0|i)||(o=d[0|(o=o+u|0)]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=c,h[t+20>>2]=s,(0|a)>(0|o)||(h[e+16>>2]=o,h[e+12>>2]=a,!(m=(o>>31)-((a>>31)+(a>>>0>o>>>0)|0)|0)&(a=o-a|0)>>>0>2147483646|m))))){if(a=a+1|0,h[e+20>>2]=a,o=a>>>1|0,h[e+24>>2]=o,h[e+28>>2]=0-o,1&a||(h[e+24>>2]=o-1),f[t+38>>1]<=513){if((0|s)>=(0|i)&c>>>0>=r>>>0|(0|s)>(0|i))break e;a=d[c+u|0],s=l,s=(l=n+9|0)>>>0<9?s+1|0:s,h[t+16>>2]=l,h[t+20>>2]=s;t:switch(0|a){case 1:p=1;break;case 0:break t;default:break e}h[e+88>>2]=p}p=He(e+112|0,t)}return 0|p}function rt(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0;N=i=N-16|0;e:{t:if((r=h[e+4>>2])>>>0<t>>>0){if((a=t-r|0)>>>0>(n=(o=h[e+8>>2])<<5)>>>0|r>>>0>n-a>>>0){if(h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,(0|t)<0)break e;n>>>0<=1073741822?(n=t+31&-32,t=(t=o<<6)>>>0<n>>>0?n:t):t=2147483647,xe(i,t),r=h[e+4>>2],h[i+4>>2]=r+a,l=h[e>>2],t=h[i>>2],(0|r)<=0||(t=At(t,l,o=(n=r>>>5|0)<<2)+o|0,(0|(s=r-(n<<5)|0))<=0?s=0:(n=-1>>>32-s|0,h[t>>2]=h[t>>2]&(-1^n)|n&h[l+o>>2]),l=h[e>>2]),h[e>>2]=h[i>>2],h[i>>2]=l,n=h[e+4>>2],h[e+4>>2]=h[i+4>>2],h[i+4>>2]=n,n=h[e+8>>2],h[e+8>>2]=h[i+8>>2],h[i+8>>2]=n,l&&ve(l)}else h[e+4>>2]=t,s=31&r,t=h[e>>2]+(r>>>3&536870908)|0;if(!a)break t;if(s&&(e=(n=32-s|0)>>>0>a>>>0?a:n,h[t>>2]=h[t>>2]&(-1<<s&-1>>>n-e^-1),a=a-e|0,t=t+4|0),e=xt(t,0,n=a>>>5<<2),!(t=31&a))break t;h[(e=e+n|0)>>2]=h[e>>2]&(-1>>>32-t^-1)}else h[e+4>>2]=t;return void(N=i+16|0)}pr(),x()}function at(e,t,i){t|=0,i|=0;var n=0,r=0,s=0,o=0,l=0,c=0,u=0;return(n=(s=h[12+(e|=0)>>2])-(l=h[e+8>>2])>>2)>>>0<(t=a[t+24|0])>>>0?(ei(e+8|0,t-n|0),l=h[e+8>>2],s=h[e+12>>2]):t>>>0>=n>>>0||(s=(t<<2)+l|0,h[e+12>>2]=s),t=0,c=h[i+20>>2],s=n=s-l|0,o=(r=h[i+16>>2])+n|0,u=h[i+12>>2],c=n>>>0>o>>>0?c+1|0:c,o>>>0>p[i+8>>2]&(0|u)<=(0|c)|(0|c)>(0|u)||(We(l,r+h[i>>2]|0,n),n=h[i+20>>2],n=(r=s+h[i+16>>2]|0)>>>0<s>>>0?n+1|0:n,o=r,h[i+16>>2]=r,h[i+20>>2]=n,r=h[i+12>>2],n=(s=o+4|0)>>>0<4?n+1|0:n,s>>>0>p[i+8>>2]&(0|n)>=(0|r)|(0|n)>(0|r)||(n=o+h[i>>2]|0,h[e+20>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,n=h[i+20>>2],s=(r=(o=h[i+16>>2])+4|0)>>>0<4?n+1|0:n,u=r,h[i+16>>2]=r,h[i+20>>2]=s,(0|s)>=(0|(r=h[i+12>>2]))&u>>>0>=p[i+8>>2]|(0|s)>(0|r)||(r=d[u+h[i>>2]|0],n=(s=o+5|0)>>>0<5?n+1|0:n,h[i+16>>2]=s,h[i+20>>2]=n,r-1>>>0>29||(h[e+4>>2]=r,t=1)))),0|t}function st(e,t){var i=0;return He(e,t)&&He(e+16|0,t)&&He(e+32|0,t)&&He(e+48|0,t)&&He(e- -64|0,t)&&He(e+80|0,t)&&He(e+96|0,t)&&He(e+112|0,t)&&He(e+128|0,t)&&He(e+144|0,t)&&He(e+160|0,t)&&He(e+176|0,t)&&He(e+192|0,t)&&He(e+208|0,t)&&He(e+224|0,t)&&He(e+240|0,t)&&He(e+256|0,t)&&He(e+272|0,t)&&He(e+288|0,t)&&He(e+304|0,t)&&He(e+320|0,t)&&He(e+336|0,t)&&He(e+352|0,t)&&He(e+368|0,t)&&He(e+384|0,t)&&He(e+400|0,t)&&He(e+416|0,t)&&He(e+432|0,t)&&He(e+448|0,t)&&He(e+464|0,t)&&He(e+480|0,t)&&He(e+496|0,t)&&(i=He(e+512|0,t)),i}function ot(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;e:{if((0|(r=h[e+8>>2]))==h[e+12>>2])if((n=h[e+4>>2])>>>0>(s=h[e>>2])>>>0)i=(s=(1+(n-s>>2)|0)/-2<<2)+n|0,(a=r-n|0)&&(At(i,n,a),n=h[e+4>>2]),r=i+a|0,h[e+8>>2]=r,h[e+4>>2]=n+s;else{if((a=(i=r-s|0)?i>>1:1)>>>0>=1073741824)break e;if(u=(o=gn(i=a<<2))+i|0,i=r-n|0,r=a=(-4&a)+o|0,i){if(d=-4&i,c=1+((l=i-4|0)>>>2|0)&7)for(r=0,i=a;h[i>>2]=h[n>>2],n=n+4|0,i=i+4|0,(0|c)!=(0|(r=r+1|0)););else i=a;if(r=a+d|0,!(l>>>0<28))for(;h[i>>2]=h[n>>2],h[i+4>>2]=h[n+4>>2],h[i+8>>2]=h[n+8>>2],h[i+12>>2]=h[n+12>>2],h[i+16>>2]=h[n+16>>2],h[i+20>>2]=h[n+20>>2],h[i+24>>2]=h[n+24>>2],h[i+28>>2]=h[n+28>>2],n=n+32|0,(0|r)!=(0|(i=i+32|0)););}h[e+12>>2]=u,h[e+8>>2]=r,h[e+4>>2]=a,h[e>>2]=o,s&&(ve(s),r=h[e+8>>2])}return h[r>>2]=h[t>>2],void(h[e+8>>2]=h[e+8>>2]+4)}Qi(1336),x()}function lt(e,t){var i,n=0,r=0,s=0,o=0,l=0;N=i=N-16|0;e:{t:{if(t){if(h[e+88>>2]=0,h[e+92>>2]=0,n=h[e+84>>2],h[e+84>>2]=0,n&&ve(n),h[e+76>>2]=0,h[e+80>>2]=0,n=h[e+72>>2],h[e+72>>2]=0,n&&ve(n),n=h[t>>2],r=h[t+4>>2],a[i+15|0]=0,Pt(e,r-n>>2,i+15|0),n=h[t+28>>2],r=h[t+24>>2],a[i+14|0]=0,Pt(e+12|0,n-r>>2,i+14|0),ze(e+28|0,h[t+4>>2]-h[t>>2]>>2,13740),s=(r=h[t+28>>2]-h[t+24>>2]|0)>>2,n=h[e+52>>2],!(s>>>0<=h[e+60>>2]-n>>2>>>0)){if((0|r)<0)break t;o=h[e+56>>2],l=(r=gn(r))+(s<<2)|0,o=(s=o-n|0)+r|0,(0|s)>0&&We(r,n,s),h[e+60>>2]=l,h[e+56>>2]=o,h[e+52>>2]=r,n&&ve(n)}if(s=(r=h[t+28>>2]-h[t+24>>2]|0)>>2,n=h[e+40>>2],!(s>>>0<=h[e+48>>2]-n>>2>>>0)){if((0|r)<0)break e;o=h[e+44>>2],l=(r=gn(r))+(s<<2)|0,o=(s=o-n|0)+r|0,(0|s)>0&&We(r,n,s),h[e+48>>2]=l,h[e+44>>2]=o,h[e+40>>2]=r,n&&ve(n)}a[e+24|0]=1,h[e+64>>2]=t}return void(N=i+16|0)}Qi(1336),x()}Qi(1336),x()}function ct(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,d=0;e:{if((0|(s=h[e+4>>2]))==h[e>>2])if((n=h[e+8>>2])>>>0<(i=h[e+12>>2])>>>0)i=(a=(1+(i-n>>2)|0)/2<<2)+n|0,(r=n-s|0)&&(At(i=i-r|0,s,r),n=h[e+8>>2]),h[e+4>>2]=i,h[e+8>>2]=n+a;else{if((i=(i=i-s|0)?i>>1:1)>>>0>=1073741824)break e;if(d=(o=gn(r=i<<2))+r|0,a=i=(i+3&-4)+o|0,l=n-s|0){if(n=i,r=s,u=1+((c=l-4|0)>>>2|0)&7)for(a=0;h[n>>2]=h[r>>2],r=r+4|0,n=n+4|0,(0|u)!=(0|(a=a+1|0)););if(a=(-4&l)+i|0,!(c>>>0<28))for(;h[n>>2]=h[r>>2],h[n+4>>2]=h[r+4>>2],h[n+8>>2]=h[r+8>>2],h[n+12>>2]=h[r+12>>2],h[n+16>>2]=h[r+16>>2],h[n+20>>2]=h[r+20>>2],h[n+24>>2]=h[r+24>>2],h[n+28>>2]=h[r+28>>2],r=r+32|0,(0|a)!=(0|(n=n+32|0)););}h[e+12>>2]=d,h[e+8>>2]=a,h[e+4>>2]=i,h[e>>2]=o,s&&(ve(s),i=h[e+4>>2])}else i=s;return h[i-4>>2]=h[t>>2],void(h[e+4>>2]=h[e+4>>2]-4)}Qi(1336),x()}function ut(e,t,i,n){var r,a,s=0,o=0,l=0,c=0,u=0,d=0,f=0;u=+m[t>>2],d=+m[t+4>>2],f=+m[t+8>>2],(l=_(u)+_(d)+_(f))>1e-6?(d*=l=1/l,u*=l,s=l*f<0):(u=1,d=0,s=0),r=h[e+16>>2],l=w(u*(f=+(0|r))+.5),c=(o=(a=_(l)<2147483648?~~l:-2147483648)>>31)+a^o,l=w(d*f+.5),c=(0|(t=r-(c+((o=_(l)<2147483648?~~l:-2147483648)+(t=o>>31)^t)|0)|0))<0?0:t,s=s?0-c|0:c,o=o+(t>>31&((0|o)>0?t:0-t|0))|0,(0|a)>=0?(t=s+r|0,e=h[e+8>>2],s=r+o|0):(t=o>>31,t^=t+o,e=h[e+8>>2],t=(0|s)<0?t:e-t|0,s=(0|o)<0?c:e-c|0),t|s&&(0|e)!=(0|t)|s&&(0|e)!=(0|s)|t?(0|t)<=(0|r)|s?(0|e)!=(0|s)|(0|t)>=(0|r)?(0|e)!=(0|t)|(0|s)>=(0|r)?t?e=s:(t=0,e=(0|s)<=(0|r)?s:(r<<1)-s|0):(t=e,e=(r<<1)-s|0):t=(r<<1)-t|0:(t=(r<<1)-t|0,e=0):t=e,h[i>>2]=e,h[n>>2]=t}function ht(e,t,i){e|=0,t|=0,i|=0;var n=0,r=b(0),s=b(0),o=b(0),u=b(0),f=b(0),p=0,m=b(0),g=b(0),v=b(0),y=b(0),A=0;if(!(9!=h[i+28>>2]|3!=d[i+24|0])&&!((e=h[e+4>>2])-31>>>0<4294967267)&&(A=1,p=h[i+80>>2]))for(m=b(b(2)/b((1<<e)-2|0)),i=h[h[i>>2]>>2]+h[i+48>>2]|0,e=h[h[t>>2]>>2]+h[t+48>>2]|0,t=0;o=b(0),g=b(0),v=b(0),r=b(b(b(h[e>>2])*m)+b(-1)),s=b(b(b(h[e+4>>2])*m)+b(-1)),f=b(b(b(1)-b(_(r)))-b(_(s))),u=b(E(b(-f),b(0))),y=b(-u),s=b(s+(s<b(0)?u:y)),r=b(r+(r<b(0)?u:y)),+(u=b(b(s*s)+b(b(f*f)+b(r*r))))<1e-6||(o=b(b(1)/b(T(u))),v=b(s*o),g=b(r*o),o=b(f*o)),e=e+8|0,l(v),n=c(2),a[i+8|0]=n,a[i+9|0]=n>>>8,a[i+10|0]=n>>>16,a[i+11|0]=n>>>24,l(g),n=c(2),a[i+4|0]=n,a[i+5|0]=n>>>8,a[i+6|0]=n>>>16,a[i+7|0]=n>>>24,l(o),n=c(2),a[0|i]=n,a[i+1|0]=n>>>8,a[i+2|0]=n>>>16,a[i+3|0]=n>>>24,i=i+12|0,(0|p)!=(0|(t=t+1|0)););return 0|A}function dt(e,t){var i,n,r,s=0,o=0,l=0;n=h[e>>2],h[(s=n+(t>>>3&536870908)|0)>>2]=h[s>>2]|1<<t,i=h[e+64>>2],o=-1,(l=-1==(0|t))||(o=-1,-1!=(0|(s=((s=t+1|0)>>>0)%3|0?s:t-2|0))&&(o=h[h[i>>2]+(s<<2)>>2])),s=h[e+12>>2],h[(r=(o>>>3&536870908)+s|0)>>2]=h[r>>2]|1<<o;e:{if(l)e=s+536870908|0,t=h[s+536870908>>2],s=-2147483648;else{t:{if((t>>>0)%3|0)l=t-1|0;else if(o=-1,-1==(0|(l=t+2|0)))break t;o=h[h[i>>2]+(l<<2)>>2]}if(h[(l=(o>>>3&536870908)+s|0)>>2]=h[l>>2]|1<<o,o=-1,-1==(0|(t=h[h[i+12>>2]+(t<<2)>>2])))break e;a[e+24|0]=0,h[(e=(t>>>3&536870908)+n|0)>>2]=h[e>>2]|1<<t,-1!=(0|(e=((e=t+1|0)>>>0)%3|0?e:t-2|0))&&(o=h[h[i>>2]+(e<<2)>>2]),h[(e=s+(o>>>3&536870908)|0)>>2]=h[e>>2]|1<<o;t:{if((t>>>0)%3|0)t=t-1|0;else if(e=-1,-1==(0|(t=t+2|0)))break t;e=h[h[i>>2]+(t<<2)>>2]}t=1<<e,s=h[(e=s+(e>>>3&536870908)|0)>>2]}h[e>>2]=t|s}}function ft(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;e:if(t>>>0<=63){if(t=0,(e=h[e+12>>2])>>>0<2)break e;if(n=h[i>>2],r=3&(t=e-1|0),i=0,e-2>>>0<3)e=1,t=0;else for(a=-4&t,t=0,e=1;s=e+3|0,o=e+2|0,l=e+1|0,t=p[n+(t<<2)>>2]>p[n+(e<<2)>>2]?e:t,t=p[n+(t<<2)>>2]>p[n+(l<<2)>>2]?l:t,t=p[n+(t<<2)>>2]>p[n+(o<<2)>>2]?o:t,t=p[n+(t<<2)>>2]>p[n+(s<<2)>>2]?s:t,e=e+4|0,(0|a)!=(0|(c=c+4|0)););if(!r)break e;for(;t=p[n+(t<<2)>>2]>p[n+(e<<2)>>2]?e:t,e=e+1|0,(0|r)!=(0|(i=i+1|0)););}else{if((0|(n=32-(t=h[e+580>>2])|0))>=4){if((0|(i=h[e+576>>2]))==h[e+568>>2])return 0;if(n=h[i>>2],r=t+4|0,h[e+580>>2]=r,t=n<<t>>>28|0,32!=(0|r))break e;return h[e+580>>2]=0,h[e+576>>2]=i+4,t}if((0|(r=(i=h[e+576>>2])+4|0))==h[e+568>>2])return 0;a=h[i>>2],h[e+576>>2]=r,h[e+580>>2]=t-28,e=60-t|0,t=h[i+4>>2]>>>e|a<<t>>>e-n}return t}function pt(e){var t,i=0,n=0,r=0;if(h[(e|=0)>>2]=11464,(i=h[e+388>>2])&&(h[e+392>>2]=i,ve(i)),t=h[e+368>>2],h[e+368>>2]=0,t){if(i=h[(r=t-4|0)>>2])for(n=(i<<4)+t|0;(0|t)!=(0|(n=n-16|0)););ve(r)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,ve(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,ve(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,ve(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,ve(i)),n=h[e+144>>2])for(;i=h[n>>2],ve(n),n=i,i;);return i=h[e+136>>2],h[e+136>>2]=0,i&&ve(i),(i=h[e+120>>2])&&ve(i),(i=h[e+108>>2])&&ve(i),(i=h[e+96>>2])&&ve(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,ve(i)),(i=h[e+60>>2])&&ve(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,ve(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,ve(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,ve(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,ve(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ii(i),0|e}function mt(e,t){var i=0,n=0;i=h[t+8>>2],h[e+4>>2]=h[t+4>>2],h[e+8>>2]=i,h[e+20>>2]=h[t+20>>2],i=h[t+16>>2],h[e+12>>2]=h[t+12>>2],h[e+16>>2]=i;e:{t:{if((0|e)!=(0|t)){if(i=h[t+28>>2]){if(h[e+32>>2]<<5>>>0>=i>>>0)n=h[e+24>>2];else{if((n=h[e+24>>2])&&(ve(n),h[e+32>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,i=h[t+28>>2]),(0|i)<0)break t;n=gn((i=1+(i-1>>>5|0)|0)<<2),h[e+32>>2]=i,h[e+28>>2]=0,h[e+24>>2]=n,i=h[t+28>>2]}At(n,h[t+24>>2],4+(i-1>>>3&536870908)|0),i=h[t+28>>2]}else i=0;if(h[e+28>>2]=i,i=h[t+40>>2]){if(h[e+44>>2]<<5>>>0>=i>>>0)n=h[e+36>>2];else{if((n=h[e+36>>2])&&(ve(n),h[e+44>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,i=h[t+40>>2]),(0|i)<0)break e;n=gn((i=1+(i-1>>>5|0)|0)<<2),h[e+44>>2]=i,h[e+40>>2]=0,h[e+36>>2]=n,i=h[t+40>>2]}At(n,h[t+36>>2],4+(i-1>>>3&536870908)|0),t=h[t+40>>2]}else t=0;h[e+40>>2]=t}return}pr(),x()}pr(),x()}function gt(e,t){e|=0;var i,n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0;o=h[12+(t|=0)>>2],a=r=h[t+20>>2],r=(s=(i=h[t+16>>2])+4|0)>>>0<4?r+1|0:r,l=s;e:if(!((n=h[t+8>>2])>>>0<s>>>0&(0|r)>=(0|o)|(0|r)>(0|o))){if(p=h[t>>2],c=d[0|(s=i+p|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r,(s=f[t+38>>1])>>>0<=513){if(r=a,l=a=i+8|0,a>>>0>n>>>0&(0|(r=a>>>0<8?r+1|0:r))>=(0|o)|(0|r)>(0|o))break e;h[t+16>>2]=l,h[t+20>>2]=r}if(1&c&&!((a=31^y(c))-30>>>0<4294967267)){if(h[e+8>>2]=a+1,c=-2-(a=-2<<a)|0,h[e+16>>2]=c,h[e+12>>2]=-1^a,h[e+24>>2]=(0|c)/2,m[e+20>>2]=b(2)/b(0|c),s>>>0<=513){if((0|r)>=(0|o)&l>>>0>=n>>>0|(0|r)>(0|o))break e;o=d[l+p|0],r=(a=l+1|0)?r:r+1|0,h[t+16>>2]=a,h[t+20>>2]=r;t:switch(0|o){case 1:u=1;break;case 0:break t;default:break e}h[e+72>>2]=u}u=He(e+96|0,t)}}return 0|u}function vt(e,t){e|=0;var i,n,r=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0;o=h[12+(t|=0)>>2],l=r=h[t+20>>2],r=(a=(i=h[t+16>>2])+4|0)>>>0<4?r+1|0:r;e:if(!((n=h[t+8>>2])>>>0<a>>>0&(0|r)>=(0|o)|(0|r)>(0|o))&&(p=h[t>>2],s=d[0|(s=i+p|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=r,r=l,c=a=i+8|0,!(a>>>0>n>>>0&(0|(r=a>>>0<8?r+1|0:r))>=(0|o)|(0|r)>(0|o))&&(h[t+16>>2]=c,h[t+20>>2]=r,1&s&&!((a=31^y(s))-30>>>0<4294967267)))){if(h[e+8>>2]=a+1,s=-2-(a=-2<<a)|0,h[e+16>>2]=s,h[e+12>>2]=-1^a,h[e+24>>2]=(0|s)/2,m[e+20>>2]=b(2)/b(0|s),f[t+38>>1]<=513){if((0|r)>=(0|o)&c>>>0>=n>>>0|(0|r)>(0|o))break e;o=d[c+p|0],l=(r=i+9|0)>>>0<9?l+1|0:l,h[t+16>>2]=r,h[t+20>>2]=l;t:switch(0|o){case 1:u=1;break;case 0:break t;default:break e}h[e+72>>2]=u}u=He(e+96|0,t)}return 0|u}function bt(e){var t,i=0,n=0,r=0;if(h[(e|=0)>>2]=11412,t=h[e+368>>2],h[e+368>>2]=0,t){if(i=h[(r=t-4|0)>>2])for(n=(i<<4)+t|0;(0|t)!=(0|(n=n-16|0)););ve(r)}if(Ri(e+216|0),(i=h[e+196>>2])&&(h[e+200>>2]=i,ve(i)),(i=h[e+184>>2])&&(h[e+188>>2]=i,ve(i)),(i=h[e+172>>2])&&(h[e+176>>2]=i,ve(i)),(i=h[e+160>>2])&&(h[e+164>>2]=i,ve(i)),n=h[e+144>>2])for(;i=h[n>>2],ve(n),n=i,i;);return i=h[e+136>>2],h[e+136>>2]=0,i&&ve(i),(i=h[e+120>>2])&&ve(i),(i=h[e+108>>2])&&ve(i),(i=h[e+96>>2])&&ve(i),(i=h[e+72>>2])&&(h[e+76>>2]=i,ve(i)),(i=h[e+60>>2])&&ve(i),(i=h[e+48>>2])&&(h[e+52>>2]=i,ve(i)),(i=h[e+36>>2])&&(h[e+40>>2]=i,ve(i)),(i=h[e+24>>2])&&(h[e+28>>2]=i,ve(i)),(i=h[e+12>>2])&&(h[e+16>>2]=i,ve(i)),i=h[e+8>>2],h[e+8>>2]=0,i&&Ii(i),0|e}function _t(e){var t,i=0,n=0;i=h[e+8>>2],t=h[e>>2];e:{if(d[e+12|0]){t:{if(-1!=(0|i)&&-1!=(0|(i=((n=i+1|0)>>>0)%3|0?n:i-2|0))&&-1!=(0|(i=h[h[t+12>>2]+(i<<2)>>2]))){if(i=((n=i+1|0)>>>0)%3|0?n:i-2|0,h[e+8>>2]=i,-1!=(0|i))break t}else h[e+8>>2]=-1;i=-1;i:if(-1!=(0|(n=h[e+4>>2]))){if((n>>>0)%3|0)n=n-1|0;else if(i=-1,-1==(0|(n=n+2|0)))break i;i=-1,-1!=(0|(n=h[h[t+12>>2]+(n<<2)>>2]))&&(i=n-1|0,(n>>>0)%3|0||(i=n+2|0))}return a[e+12|0]=0,void(h[e+8>>2]=i)}if((0|i)!=h[e+4>>2])break e;return void(h[e+8>>2]=-1)}n=-1;t:if(-1!=(0|i)){if((i>>>0)%3|0)i=i-1|0;else if(n=-1,-1==(0|(i=i+2|0)))break t;n=-1,-1!=(0|(i=h[h[t+12>>2]+(i<<2)>>2]))&&(n=i-1|0,(i>>>0)%3|0||(n=i+2|0))}h[e+8>>2]=n}}function yt(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0;h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,l=(0|(a=h[t+4>>2]-h[t>>2]|0))/20|0;e:{t:{i:{if(a){if(l>>>0>=214748365)break i;n=gn(a),h[e+16>>2]=n,h[e+20>>2]=n,h[e+24>>2]=v(l,20)+n,i=h[t>>2],i=t=(0|(t=h[t+4>>2]-i|0))<=0?n:We(n,i,t)+v((t>>>0)/20|0,20)|0,h[e+20>>2]=i}if(h[e+28>>2]=0,!(t=i-n|0))break e;if(a=1&(i=(t=(0|t)/20|0)>>>0>1?t:1),t>>>0<2){t=0;break t}for(l=-2&i,t=0,i=0;s=v(1|t,20)+n|0,s=v(h[s+16>>2],h[s+12>>2]),o=v(t,20)+n|0,r=(r=r>>>0<(o=v(h[o+16>>2],h[o+12>>2]))>>>0?o:r)>>>0<s>>>0?s:r,t=t+2|0,(0|l)!=(0|(i=i+2|0)););break t}vr(),x()}a&&(t=v(t,20)+n|0,r=(t=v(h[t+16>>2],h[t+12>>2]))>>>0>r>>>0?t:r)}return ai(e,r),h[e+12>>2]=h[e>>2],e}function At(e,t,i){var n=0,r=0;e:if((0|e)!=(0|t)){if(t-(r=e+i|0)>>>0<=0-(i<<1)>>>0)return We(e,t,i);if(n=3&(e^t),e>>>0<t>>>0){if(n)n=e;else{if(3&e)for(n=e;;){if(!i)break e;if(a[0|n]=d[0|t],t=t+1|0,i=i-1|0,!(3&(n=n+1|0)))break}else n=e;if(!(i>>>0<=3))for(;h[n>>2]=h[t>>2],t=t+4|0,n=n+4|0,(i=i-4|0)>>>0>3;);}if(i)for(;a[0|n]=d[0|t],n=n+1|0,t=t+1|0,i=i-1|0;);}else{if(!n){if(3&r)for(;;){if(!i)break e;if(a[0|(n=(i=i-1|0)+e|0)]=d[t+i|0],!(3&n))break}if(!(i>>>0<=3))for(;h[(i=i-4|0)+e>>2]=h[t+i>>2],i>>>0>3;);}if(!i)break e;for(;a[(i=i-1|0)+e|0]=d[t+i|0],i;);}}return e}function Et(e,t,i){var n,r,a=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;N=n=N-16|0;e:{if((0|(o=h[e+24>>2]))!=(0|(r=h[e+28>>2])))for(;;){h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,a=Ji(h[o>>2],t,n),c=(e=d[n+11|0])<<24>>24,u=3;t:{i:{n:{r:if(a&&(u=0,s=(a=d[i+11|0])<<24>>24,(0|(f=(0|c)<0?h[n+4>>2]:e))==(0|((0|s)<0?h[i+4>>2]:a)))){l=(0|s)<0?h[i>>2]:i,s=h[n>>2];a:{if(!(a=(0|c)<0)){if(!c)break a;if(a=n,d[0|l]!=(255&s))break t;for(;;){if(!(e=e-1|0))break a;if(s=d[l+1|0],l=l+1|0,(0|s)!=d[0|(a=a+1|0)])break}break r}if(f&&xi(a?s:n,l,f))break n}p=h[o>>2],u=1}if((0|c)>=0)break i}ve(h[n>>2])}switch(0|u){case 0:case 3:break t;default:break e}}if((0|r)==(0|(o=o+4|0)))break}p=0}return N=n+16|0,p}function wt(e,t,i){switch(t-9|0){case 0:return t=h[i>>2],h[i>>2]=t+4,void(h[e>>2]=h[t>>2]);case 6:return t=h[i>>2],h[i>>2]=t+4,t=u[t>>1],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 7:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=f[t>>1],void(h[e+4>>2]=0);case 8:return t=h[i>>2],h[i>>2]=t+4,t=a[0|t],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 9:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=d[0|t],void(h[e+4>>2]=0);case 16:return t=h[i>>2]+7&-8,h[i>>2]=t+8,void(g[e>>3]=g[t>>3]);case 17:Rr[0](e,i);default:return;case 1:case 4:case 14:return t=h[i>>2],h[i>>2]=t+4,t=h[t>>2],h[e>>2]=t,void(h[e+4>>2]=t>>31);case 2:case 5:case 11:case 15:return t=h[i>>2],h[i>>2]=t+4,h[e>>2]=h[t>>2],void(h[e+4>>2]=0);case 3:case 10:case 12:case 13:}t=h[i>>2]+7&-8,h[i>>2]=t+8,i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i}function St(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0;if((n=h[e+8>>2])-(i=h[e+4>>2])>>2>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=2)+t|0),void(h[e+4>>2]=i);e:{t:{i:{if((r=(a=i-(s=h[e>>2])>>2)+t|0)>>>0<1073741824){if(o=(n=n-s|0)>>1,r=n>>>0<2147483644?r>>>0>o>>>0?r:o:1073741823){if(r>>>0>=1073741824)break i;l=gn(r<<2)}if(a=(t=xt(n=(a<<2)+l|0,0,a=t<<2))+a|0,r=(r<<2)+l|0,(0|i)==(0|s))break t;for(;t=h[(i=i-4|0)>>2],h[i>>2]=0,h[(n=n-4|0)>>2]=t,(0|i)!=(0|s););if(h[e+8>>2]=r,t=h[e+4>>2],h[e+4>>2]=a,i=h[e>>2],h[e>>2]=n,(0|t)==(0|i))break e;for(;e=h[(t=t-4|0)>>2],h[t>>2]=0,e&&Rr[h[h[e>>2]+4>>2]](e),(0|t)!=(0|i););break e}vr(),x()}Qi(1336),x()}h[e+8>>2]=r,h[e+4>>2]=a,h[e>>2]=t}i&&ve(i)}function Tt(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0;return h[e+16>>2]=0,i=h[e>>2],h[e+4>>2]=i,h[e+12>>2]=i,i=s=h[t+12>>2],n=h[t+20>>2],n=(r=(a=h[t+16>>2])+4|0)>>>0<4?n+1|0:n,(o=h[t+8>>2])>>>0<r>>>0&(0|i)<=(0|n)|(0|i)<(0|n)||(i=a+h[t>>2]|0,i=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+16>>2]=r,h[t+20>>2]=n,!i|3&i||o-r>>>0<i>>>0&(0|(a=s-(n+(r>>>0>o>>>0)|0)|0))<=0|(0|a)<0||(i>>>0>=4&&(ei(e,i>>>2|0),o=h[t+8>>2],s=h[t+12>>2],r=h[t+16>>2],n=h[t+20>>2]),(a=i+r|0)>>>0>o>>>0&(0|(n=i>>>0>a>>>0?n+1|0:n))>=(0|s)|(0|n)>(0|s)||(We(h[e>>2],r+h[t>>2]|0,i),n=h[t+20>>2],n=(r=i+h[t+16>>2]|0)>>>0<i>>>0?n+1|0:n,h[t+16>>2]=r,h[t+20>>2]=n,h[e+16>>2]=0,h[e+12>>2]=h[e>>2],l=1))),l}function xt(e,t,i){var n=0,r=0,s=0;if(i&&(a[0|e]=t,a[(r=e+i|0)-1|0]=t,!(i>>>0<3||(a[e+2|0]=t,a[e+1|0]=t,a[r-3|0]=t,a[r-2|0]=t,i>>>0<7||(a[e+3|0]=t,a[r-4|0]=t,i>>>0<9||(s=(r=0-e&3)+e|0,n=v(255&t,16843009),h[s>>2]=n,h[(i=(t=i-r&-4)+s|0)-4>>2]=n,t>>>0<9||(h[s+8>>2]=n,h[s+4>>2]=n,h[i-8>>2]=n,h[i-12>>2]=n,t>>>0<25||(h[s+24>>2]=n,h[s+20>>2]=n,h[s+16>>2]=n,h[s+12>>2]=n,h[i-16>>2]=n,h[i-20>>2]=n,h[i-24>>2]=n,h[i-28>>2]=n,(i=(i=t)-(t=4&s|24)|0)>>>0<32))))))))for(n=Zi(n,0,1,1),r=L,t=t+s|0;h[t+24>>2]=n,h[t+28>>2]=r,h[t+16>>2]=n,h[t+20>>2]=r,h[t+8>>2]=n,h[t+12>>2]=r,h[t>>2]=n,h[t+4>>2]=r,t=t+32|0,(i=i-32|0)>>>0>31;);return e}function Mt(e,t){var i=0,n=0,r=0,a=0,s=0;n=-1,a=-1,r=-1;e:{t:if(-1!=(0|t)){if(s=1,a=h[h[h[e+4>>2]+12>>2]+(t<<2)>>2],(0|(i=((i=t+1|0)>>>0)%3|0?i:t-2|0))>=0&&(r=(i>>>0)/3|0,r=h[(h[h[e>>2]+96>>2]+v(r,12)|0)+(i-v(r,3)<<2)>>2]),-1!=(0|a)&&(s=0,(0|(i=((a>>>0)%3|0?-1:2)+a|0))<0||(n=(i>>>0)/3|0,n=h[(h[h[e>>2]+96>>2]+v(n,12)|0)+(i-v(n,3)<<2)>>2])),i=-1,(0|n)!=(0|r))break e;if(r=-1,(0|(t=((t>>>0)%3|0?-1:2)+t|0))>=0){if(n=(t>>>0)/3|0,n=h[(h[h[e>>2]+96>>2]+v(n,12)|0)+(t-v(n,3)<<2)>>2],s)break t}else if(n=-1,s)break t;(0|(t=((t=a+1|0)>>>0)%3|0?t:a-2|0))<0||(i=h[h[e>>2]+96>>2],r=h[(i+v(e=(t>>>0)/3|0,12)|0)+(t-v(e,3)<<2)>>2])}i=(0|n)==(0|r)?a:-1}return i}function Rt(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;if(n=h[(r=e+16|0)>>2]){for(s=h[t>>2],t=r;t=(a=(0|s)>h[n+16>>2])?t:n,n=h[(a<<2)+n>>2];);if(!((0|t)==(0|r)|(0|s)<h[t+16>>2])&&(n=h[t+24>>2]))for(s=(a=(r=d[i+11|0])<<24>>24<0)?h[i>>2]:i,r=a?h[i+4>>2]:r,a=t+20|0;;){e:{t:{i:{if(c=(u=(t=(o=(t=d[n+27|0])<<24>>24<0)?h[n+20>>2]:t)>>>0<r>>>0)?t:r){l=n+16|0;n:{if(!(l=xi(s,o=o?h[l>>2]:l,c))){if(t>>>0<=r>>>0)break n;break e}if((0|l)<0)break e}if(!(t=xi(o,s,c)))break i;if((0|t)<0)break t;return ni(a,i)}if(t>>>0>r>>>0)break e}if(!u)return ni(a,i)}n=n+4|0}if(!(n=h[n>>2]))break}}return ni(e,i)}function Pt(e,t,i){var n,r=0,a=0,s=0;N=n=N-16|0,h[e+4>>2]=0;e:{t:if(t){if((r=(s=h[e+8>>2])<<5)>>>0>=t>>>0)h[e+4>>2]=t;else{if(h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,(0|t)<0)break e;xe(n,r=r>>>0<=1073741822?(r=s<<6)>>>0<(a=t+31&-32)>>>0?a:r:2147483647),a=h[e>>2],h[e>>2]=h[n>>2],h[n>>2]=a,r=h[e+4>>2],h[e+4>>2]=t,h[n+4>>2]=r,r=h[e+8>>2],h[e+8>>2]=h[n+8>>2],h[n+8>>2]=r,a&&ve(a)}if(r=(a=t>>>5|0)<<2,e=h[e>>2],d[0|i]){if(e=xt(e,255,r),!(t&=31))break t;h[(e=e+(a<<2)|0)>>2]=h[e>>2]|-1>>>32-t}else e=xt(e,0,r),(t&=31)&&(h[(e=e+(a<<2)|0)>>2]=h[e>>2]&(-1>>>32-t^-1))}return void(N=n+16|0)}pr(),x()}function Ct(e,t){var i=0,n=0,r=0,a=0,s=0,o=0;if((n=h[e+4>>2])>>>0<(r=h[e+8>>2])>>>0)return h[n>>2]=h[t>>2],h[n+4>>2]=h[t+4>>2],h[n+8>>2]=h[t+8>>2],void(h[e+4>>2]=n+12);e:{if((i=1+(s=(n-(a=h[e>>2])|0)/12|0)|0)>>>0<357913942){if(o=(r=(r-a|0)/12|0)<<1,(i=r>>>0<178956970?i>>>0>o>>>0?i:o:357913941)>>>0>=357913942)break e;if(o=v(s,12),s=gn(r=v(i,12)),h[(i=o+s|0)>>2]=h[t>>2],h[i+4>>2]=h[t+4>>2],h[i+8>>2]=h[t+8>>2],t=i+12|0,(0|n)!=(0|a))for(;n=n-12|0,h[(i=i-12|0)>>2]=h[n>>2],h[i+4>>2]=h[n+4>>2],h[i+8>>2]=h[n+8>>2],(0|n)!=(0|a););return h[e+8>>2]=r+s,h[e+4>>2]=t,h[e>>2]=i,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function Dt(e,t,i){var n,r=0,a=0,s=0,o=0;if((n=(s=i-t|0)>>2)>>>0<=(r=h[e+8>>2])-(a=h[e>>2])>>2>>>0){if((0|(r=n>>>0>(o=(r=(s=h[e+4>>2])-a|0)>>2)>>>0?t+r|0:i))!=(0|t))for(;h[a>>2]=h[t>>2],a=a+4|0,(0|r)!=(0|(t=t+4|0)););return n>>>0>o>>>0?((0|(t=i-r|0))>0&&(s=We(s,r,t)+t|0),void(h[e+4>>2]=s)):void(h[e+4>>2]=a)}if(a&&(h[e+4>>2]=a,ve(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=0),!((0|s)<0||(i=r>>1,(i=r>>>0<2147483644?i>>>0<n>>>0?n:i:1073741823)>>>0>=1073741824)))return i=gn(a=i<<2),h[e>>2]=i,h[e+4>>2]=i,h[e+8>>2]=i+a,s&&(i=We(i,t,s)+s|0),void(h[e+4>>2]=i);vr(),x()}function Ot(e){var t=0,i=0,n=0,r=0;i=1;e:if(!((0|(n=h[e+140>>2]))<=0)){for(t=n<<4,i=gn((0|n)!=(268435455&n)?-1:4|t),h[i>>2]=n,n=(i=i+4|0)+t|0,t=i;h[t>>2]=0,h[t+4>>2]=0,a[t+5|0]=0,a[t+6|0]=0,a[t+7|0]=0,a[t+8|0]=0,a[t+9|0]=0,a[t+10|0]=0,a[t+11|0]=0,a[t+12|0]=0,(0|n)!=(0|(t=t+16|0)););if(r=h[e+136>>2],h[e+136>>2]=i,r){if(i=h[(n=r-4|0)>>2])for(t=(i<<4)+r|0;(0|r)!=(0|(t=t-16|0)););ve(n)}if(i=1,!(h[e+140>>2]<=0))for(t=0;;){if(!(i=He(h[e+136>>2]+(t<<4)|0,e)))break e;if(!((0|(t=t+1|0))<h[e+140>>2]))break}}return i}function kt(e,t){var i,n=0,r=0,s=0,o=0;return h[e+64>>2]||(n=gn(32),h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n>>2]=0,h[n+4>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,r=h[e+64>>2],h[e+64>>2]=n,r&&((n=h[r>>2])&&(h[r+4>>2]=n,ve(n)),ve(r))),s=h[e+64>>2],r=(n=h[e+28>>2]-1|0)>>>0<=10?h[13616+(n<<2)>>2]:-1,r=n=v(r,a[e+24|0]),(s=zi(s,0,Zi(n,i=n>>31,t,0),L))&&(n=h[e+64>>2],h[e>>2]=n,o=h[n+20>>2],h[e+8>>2]=h[n+16>>2],h[e+12>>2]=o,o=h[n+24>>2],n=h[n+28>>2],h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=r,h[e+44>>2]=i,h[e+16>>2]=o,h[e+20>>2]=n,h[e+80>>2]=t),s}function It(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;a=e+4|0;e:{if(e=h[e+4>>2])for(l=(n=(r=d[i+11|0])<<24>>24<0)?h[i>>2]:i,r=n?h[i+4>>2]:r;;){t:{i:{n:{r:{a:{s:if(o=(c=(i=(n=(i=d[e+27|0])<<24>>24<0)?h[e+20>>2]:i)>>>0<r>>>0)?i:r){if(s=e+16|0,!(s=xi(l,n=n?h[s>>2]:s,o))){if(i>>>0>r>>>0)break s;break a}if((0|s)>=0)break a}else if(i>>>0<=r>>>0)break r;if(i=h[e>>2])break t;return h[t>>2]=e,e}if(i=xi(n,l,o))break n}if(c)break i;break e}if((0|i)>=0)break e}if(a=e+4|0,!(i=h[e+4>>2]))break e;e=a}a=e,e=i}return h[t>>2]=a,a}return h[t>>2]=e,a}function Nt(e,t){var i=0;return i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,i=h[t+60>>2],h[e+56>>2]=h[t+56>>2],h[e+60>>2]=i,i=h[t+52>>2],h[e+48>>2]=h[t+48>>2],h[e+52>>2]=i,i=h[t+44>>2],h[e+40>>2]=h[t+40>>2],h[e+44>>2]=i,i=h[t+36>>2],h[e+32>>2]=h[t+32>>2],h[e+36>>2]=i,i=h[t+28>>2],h[e+24>>2]=h[t+24>>2],h[e+28>>2]=i,i=h[t+20>>2],h[e+16>>2]=h[t+16>>2],h[e+20>>2]=i,i=h[t+12>>2],h[e+8>>2]=h[t+8>>2],h[e+12>>2]=i,h[e+88>>2]=0,h[e+64>>2]=0,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,a[e+77|0]=0,a[e+78|0]=0,a[e+79|0]=0,a[e+80|0]=0,a[e+81|0]=0,a[e+82|0]=0,a[e+83|0]=0,a[e+84|0]=0,e}function Lt(e,t){var i,n=0,r=0,a=0,s=0,o=0,l=0,c=0;i=e+4|0;e:{t:if(e=h[e+4>>2]){for(l=(n=(r=d[t+11|0])<<24>>24<0)?h[t>>2]:t,a=n?h[t+4>>2]:r,n=i;(r=(s=(o=(c=(t=d[e+27|0])<<24>>24<0)?h[e+20>>2]:t)>>>0>a>>>0)?a:o)&&(t=e+16|0,t=xi(c?h[t>>2]:t,l,r))||(t=a>>>0>o>>>0?-1:s),n=(0|t)<0?n:e,e=h[(t>>>29&4)+e>>2];);if((0|n)!=(0|i)){if(!((t=(r=(s=(e=d[n+27|0])<<24>>24<0)?h[n+20>>2]:e)>>>0<a>>>0?r:a)&&(e=n+16|0,e=xi(l,s?h[e>>2]:e,t)))){if(r>>>0>a>>>0)break t;break e}if((0|e)>=0)break e}}n=i}return n}function Ut(e,t,i){var n=0,r=0,s=0,o=0;e:{if(t)if(f[e+38>>1]<=513){if(r=h[e+12>>2],t=h[e+20>>2],t=(o=(s=h[e+16>>2])+8|0)>>>0<8?t+1|0:t,o>>>0>p[e+8>>2]&(0|t)>=(0|r)|(0|t)>(0|r))break e;t=s+h[e>>2]|0,n=d[t+4|0]|d[t+5|0]<<8|d[t+6|0]<<16|d[t+7|0]<<24,h[i>>2]=d[0|t]|d[t+1|0]<<8|d[t+2|0]<<16|d[t+3|0]<<24,h[i+4>>2]=n,t=h[e+20>>2],t=(i=h[e+16>>2]+8|0)>>>0<8?t+1|0:t,h[e+16>>2]=i,h[e+20>>2]=t}else if(!ui(1,i,e))break e;a[e+36|0]=1,h[e+32>>2]=0,i=(t=h[e+16>>2])+h[e>>2]|0,h[e+24>>2]=i,n=e,e=h[e+8>>2],h[n+28>>2]=i+(e-t|0),n=1}return n}function Bt(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0;e:{t:{if(t){if(t>>>0>=357913942)break t;if(t=gn(n=v(t,12)),h[e>>2]=t,h[e+4>>2]=t,r=t+n|0,h[e+8>>2]=r,a=h[i>>2],i=h[i+4>>2]-a|0){if((0|i)<0)break e;for(s=i>>2<<2,o=i>>>2<<2;h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,n=gn(i),h[t>>2]=n,h[t+4>>2]=n,h[t+8>>2]=n+s,l=t,c=We(n,a,i)+o|0,h[l+4>>2]=c,(0|r)!=(0|(t=t+12|0)););}else xt(i=t,0,12+((t=n-12|0)-((t>>>0)%12|0)|0)|0);h[e+4>>2]=r}return}vr(),x()}h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,vr(),x()}function Ft(e,t){e|=0,t|=0;var i=0,n=0,r=0,a=0,s=0,o=0;a=gn(64),i=gn(12),h[i+8>>2]=h[h[e+4>>2]+80>>2],h[i>>2]=13248,h[i+4>>2]=0,a=Vi(a,i);e:{if((0|t)<0)i=a;else{if(o=e+8|0,!((0|(s=(i=h[e+12>>2])-(r=h[e+8>>2])>>2))>(0|t)))if(n=t+1|0,t>>>0>=s>>>0)St(o,n-s|0);else if(!(n>>>0>=s>>>0)){if((0|(r=r+(n<<2)|0))!=(0|i))for(;n=h[(i=i-4|0)>>2],h[i>>2]=0,n&&Rr[h[h[n>>2]+4>>2]](n),(0|i)!=(0|r););h[e+12>>2]=r}if(e=h[o>>2]+(t<<2)|0,i=h[e>>2],h[e>>2]=a,!i)break e}Rr[h[h[i>>2]+4>>2]](i)}return(-1^t)>>>31|0}function Gt(e,t){var i,n,r=0;if(N=n=N-16|0,h[n+12>>2]=t,N=i=N-208|0,h[i+204>>2]=t,xt(t=i+160|0,0,40),h[i+200>>2]=h[i+204>>2],!((0|q(0,e,i+200|0,i+80|0,t))<0)){h[3885],t=h[3866],h[3884]<=0&&(h[3866]=-33&t);e:{t:{if(h[3878]){if(h[3870])break t}else h[3878]=80,h[3873]=0,h[3870]=0,h[3871]=0,r=h[3877],h[3877]=i;if(en(15464))break e}q(15464,e,i+200|0,i+80|0,i+160|0)}r&&(Rr[h[3875]](15464,0,0),h[3878]=0,h[3877]=r,h[3873]=0,h[3870]=0,h[3871]=0),h[3866]=h[3866]|32&t}N=i+208|0,N=n+16|0}function Vt(e,t,i){var n,r=0,a=0,s=0,o=0;return(n=(s=i-t|0)>>2)>>>0<=(r=h[e+8>>2])-(a=h[e>>2])>>2>>>0?((o=(r=(s=(r=h[e+4>>2]-a|0)>>2)>>>0<n>>>0?t+r|0:i)-t|0)&&At(a,t,o),s>>>0<n>>>0?(t=h[e+4>>2],(0|(i=i-r|0))>0&&(t=We(t,r,i)+i|0),void(h[e+4>>2]=t)):void(h[e+4>>2]=a+o)):(a&&(h[e+4>>2]=a,ve(a),h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,r=0),(0|s)<0||(i=r>>1,(i=r>>>0<2147483644?i>>>0<n>>>0?n:i:1073741823)>>>0>=1073741824)?(vr(),void x()):(i=gn(a=i<<2),h[e>>2]=i,h[e+4>>2]=i,h[e+8>>2]=i+a,s&&(i=We(i,t,s)+s|0),void(h[e+4>>2]=i)))}function zt(e,t,i){var n=0,r=0,a=0,s=0;e:{if((t|i)>=0){if(!(t>>>0>1431655765)){if(ze(e,n=v(t,3),13680),ze(e+12|0,n,13684),n=h[e+24>>2],!(h[e+32>>2]-n>>2>>>0>=i>>>0)){if(i>>>0>=1073741824)break e;r=h[e+28>>2],a=(i=gn(a=i<<2))+a|0,s=(r=r-n|0)+i|0,(0|r)>0&&We(i,n,r),h[e+32>>2]=a,h[e+28>>2]=s,h[e+24>>2]=i,n&&ve(n)}h[e+80>>2]=0,h[e+84>>2]=0,i=h[e+76>>2],h[e+76>>2]=0,i&&ve(i),h[e+68>>2]=0,h[e+72>>2]=0,e=h[(i=e- -64|0)>>2],h[i>>2]=0,e&&ve(e)}e=t>>>0<1431655766}else e=0;return e}Qi(1336),x()}function Ht(e){var t=0,i=0,n=0,r=0,s=0;if(n=h[e+8>>2],!d[n+84|0]&&!(!(t=h[e+16>>2])|!d[t+84|0]||(i=h[n+72>>2],r=h[n+68>>2],a[t+84|0]=0,i=i-r>>2,s=h[t+68>>2],i>>>0>(r=h[t+72>>2]-s>>2)>>>0?(Ye(t+68|0,i-r|0,2344),n=h[e+8>>2]):i>>>0>=r>>>0||(h[t+72>>2]=s+(i<<2)),(t=d[n+84|0])||(0|(i=h[n+68>>2]))==h[n+72>>2])))if(r=h[h[e+16>>2]+68>>2],t)h[r>>2]=0;else for(t=0;h[(s=t<<2)+r>>2]=h[i+s>>2],t=t+1|0,i=h[n+68>>2],t>>>0<h[n+72>>2]-i>>2>>>0;);return h[e+16>>2]}function jt(e,t){t|=0;var i=0,n=0,r=0,a=0;e:if((0|(i=h[216+(e|=0)>>2]))!=h[e+220>>2]){for(;;){t:if(!((0|(i=h[v(r,144)+i>>2]))<0||(n=h[e+4>>2],a=h[n+8>>2],(0|i)>=h[n+12>>2]-a>>2||(n=0,i=h[(i<<2)+a>>2],(0|Rr[h[h[i>>2]+24>>2]](i))<=0)))){for(;;){if((0|Rr[h[h[i>>2]+20>>2]](i,n))!=(0|t)){if(n=n+1|0,(0|Rr[h[h[i>>2]+24>>2]](i))>(0|n))continue;break t}break}e=h[e+216>>2]+v(r,144)|0,r=d[e+100|0]?e+4|0:0;break e}if(r=r+1|0,i=h[e+216>>2],!(r>>>0<(h[e+220>>2]-i|0)/144>>>0))break}return 0}return 0|r}function Wt(e,t){var i=0,n=0,r=0,a=0,s=0,o=0;if((0|(i=h[e+4>>2]))!=h[e+8>>2])return n=h[t+4>>2],h[i>>2]=h[t>>2],h[i+4>>2]=n,h[i+8>>2]=h[t+8>>2],void(h[e+4>>2]=i+12);e:{if((i=1+(n=(0|(s=i-(a=h[e>>2])|0))/12|0)|0)>>>0<357913942){if(r=n<<1,r=n>>>0<178956970?i>>>0>r>>>0?i:r:357913941){if(r>>>0>=357913942)break e;i=gn(v(r,12))}else i=0;return n=i+v(n,12)|0,o=h[t+4>>2],h[n>>2]=h[t>>2],h[n+4>>2]=o,h[n+8>>2]=h[t+8>>2],t=n+v((0|s)/-12|0,12)|0,(0|s)>0&&We(t,a,s),h[e+8>>2]=i+v(r,12),h[e+4>>2]=n+12,h[e>>2]=t,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function Yt(e){var t=0,i=0,n=0;if(h[(e|=0)>>2]=2156,t=h[e+60>>2]){if((0|t)==(0|(i=h[e- -64>>2])))i=t;else{for(;n=h[(i=i-4|0)>>2],h[i>>2]=0,n&&ji(n),(0|t)!=(0|i););i=h[e+60>>2]}h[e+64>>2]=t,ve(i)}if((t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),t=h[e+36>>2]){if((0|t)==(0|(i=h[e+40>>2])))i=t;else{for(;Rr[h[h[(i=i-24|0)>>2]>>2]](i),(0|t)!=(0|i););i=h[e+36>>2]}h[e+40>>2]=t,ve(i)}return h[e>>2]=2012,(t=h[e+16>>2])&&(h[e+20>>2]=t,ve(t)),(t=h[e+4>>2])&&(h[e+8>>2]=t,ve(t)),0|e}function Xt(e){var t=0,i=0,n=0,r=0;if(i=h[e+132>>2]){if((0|i)==(0|(t=h[e+136>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+132>>2]}h[e+136>>2]=i,ve(t)}if(i=h[e+120>>2]){if((0|i)==(0|(t=h[e+124>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+120>>2]}h[e+124>>2]=i,ve(t)}(t=h[e+108>>2])&&(h[e+112>>2]=t,ve(t)),(t=h[e+96>>2])&&(h[e+100>>2]=t,ve(t)),Pn(e+76|0),Pn(e+56|0),Pn(e+36|0),Pn(e+16|0)}function Zt(e,t,i,n,r,s,o){var l,c=0,u=0;if(N=l=N-16|0,(-1^t)-17>>>0>=i>>>0)return u=d[e+11|0]>>>7|0?h[e>>2]:e,t>>>0<2147483623?(h[l+8>>2]=t<<1,h[l+12>>2]=t+i,N=i=N-16|0,N=i+16|0,i=l+8|0,i=(i=h[(p[(c=l+12|0)>>2]<p[i>>2]?i:c)>>2])>>>0>=11?11==(0|(i=(c=i+16&-16)-1|0))?c:i:10):i=-18,i=gn(c=i+1|0),s&&nr(i,o,s),(n=n-r|0)&&nr(i+s|0,r+u|0,n),10!=(0|t)&&ve(u),h[e>>2]=i,h[e+8>>2]=-2147483648|c,t=e,e=n+s|0,h[t+4>>2]=e,a[l+7|0]=0,a[e+i|0]=d[l+7|0],void(N=l+16|0);mr(),x()}function qt(e){var t=0,i=0,n=0,r=0;if(i=h[e+640>>2]){if((0|i)==(0|(t=h[e+644>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+640>>2]}h[e+644>>2]=i,ve(t)}if(i=h[e+628>>2]){if((0|i)==(0|(t=h[e+632>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+628>>2]}h[e+632>>2]=i,ve(t)}(t=h[e+616>>2])&&(h[e+620>>2]=t,ve(t)),(t=h[e+604>>2])&&(h[e+608>>2]=t,ve(t)),Pn(e+584|0),Pn(e+564|0),Pn(e+544|0)}function Qt(e){var t=0,i=0,n=0,r=0;if(i=h[e+128>>2]){if((0|i)==(0|(t=h[e+132>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+128>>2]}h[e+132>>2]=i,ve(t)}if(i=h[e+116>>2]){if((0|i)==(0|(t=h[e+120>>2])))t=i;else{for(;(n=h[(r=t-12|0)>>2])&&(h[t-8>>2]=n,ve(n)),(0|i)!=(0|(t=r)););t=h[e+116>>2]}h[e+120>>2]=i,ve(t)}(t=h[e+104>>2])&&(h[e+108>>2]=t,ve(t)),(t=h[e+92>>2])&&(h[e+96>>2]=t,ve(t)),Pn(e+72|0),Pn(e+52|0),Pn(e+32|0)}function Kt(e,t){t|=0;var i=0,n=0,r=0,a=0;if((0|(i=h[216+(e|=0)>>2]))!=h[e+220>>2])for(;;){e:if(!((0|(i=h[v(r,144)+i>>2]))<0||(n=h[e+4>>2],a=h[n+8>>2],(0|i)>=h[n+12>>2]-a>>2||(n=0,i=h[(i<<2)+a>>2],(0|Rr[h[h[i>>2]+24>>2]](i))<=0)))){for(;;){if((0|Rr[h[h[i>>2]+20>>2]](i,n))!=(0|t)){if(n=n+1|0,(0|Rr[h[h[i>>2]+24>>2]](i))>(0|n))continue;break e}break}return 104+(h[e+216>>2]+v(r,144)|0)|0}if(r=r+1|0,i=h[e+216>>2],!(r>>>0<(h[e+220>>2]-i|0)/144>>>0))break}return e+184|0}function Jt(e,t){if(!e)return 0;e:{t:{if(e){if(t>>>0<=127)break t;if(h[h[4227]>>2]){if(t>>>0<=2047){a[e+1|0]=63&t|128,a[0|e]=t>>>6|192,e=2;break e}if(!(57344!=(-8192&t)&t>>>0>=55296)){a[e+2|0]=63&t|128,a[0|e]=t>>>12|224,a[e+1|0]=t>>>6&63|128,e=3;break e}if(t-65536>>>0<=1048575){a[e+3|0]=63&t|128,a[0|e]=t>>>18|240,a[e+2|0]=t>>>6&63|128,a[e+1|0]=t>>>12&63|128,e=4;break e}}else if(57216==(-128&t))break t;h[4190]=25,e=-1}else e=1;break e}a[0|e]=t,e=1}return e}function $t(e){var t,i=0,n=0;if(h[(e|=0)>>2]=13756,(i=h[e+68>>2])&&(h[e+72>>2]=i,ve(i)),(i=h[e+56>>2])&&(h[e+60>>2]=i,ve(i)),(i=h[e+44>>2])&&(h[e+48>>2]=i,ve(i)),(i=h[e+32>>2])&&(h[e+36>>2]=i,ve(i)),(i=h[e+20>>2])&&(h[e+24>>2]=i,ve(i)),t=h[e+8>>2]){if((0|(n=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&ji(i),(0|t)!=(0|n););i=h[e+8>>2]}h[e+12>>2]=t,ve(i)}return i=h[e+4>>2],h[e+4>>2]=0,i&&Mi(i),0|e}function ei(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0;if((r=h[e+8>>2])-(i=h[e+4>>2])>>2>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=2)+t|0),void(h[e+4>>2]=i);e:{if((n=(o=(s=i-(a=h[e>>2])|0)>>2)+t|0)>>>0<1073741824){if(i=0,l=(r=r-a|0)>>1,n=r>>>0<2147483644?n>>>0>l>>>0?n:l:1073741823){if(n>>>0>=1073741824)break e;i=gn(n<<2)}return t=xt((o<<2)+i|0,0,t<<=2)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(n<<2)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function ti(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0;if((r=h[e+8>>2])-(i=h[e+4>>2])>>3>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=3)+t|0),void(h[e+4>>2]=i);e:{if((n=(o=(s=i-(a=h[e>>2])|0)>>3)+t|0)>>>0<536870912){if(i=0,l=(r=r-a|0)>>2,n=r>>>0<2147483640?n>>>0>l>>>0?n:l:536870911){if(n>>>0>=536870912)break e;i=gn(n<<3)}return t=xt((o<<3)+i|0,0,t<<=3)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(n<<3)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function ii(e,t){var i,n=0,r=0,a=0,s=0,o=0;if(i=h[e>>2],(e=h[i+4>>2])>>>0<(n=h[i+8>>2])>>>0)return h[e>>2]=h[t>>2],void(h[i+4>>2]=e+4);e:{if((e=1+(r=(s=e-(a=h[i>>2])|0)>>2)|0)>>>0<1073741824){if(o=r<<2,r=(n=n-a|0)>>1,n=n>>>0<2147483644?e>>>0>r>>>0?e:r:1073741823){if(n>>>0>=1073741824)break e;e=gn(n<<2)}else e=0;return h[(r=o+e|0)>>2]=h[t>>2],(0|s)>0&&We(e,a,s),h[i+8>>2]=e+(n<<2),h[i+4>>2]=r+4,h[i>>2]=e,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function ni(e,t){var i=0,n=0,r=0,s=0;if((0|(i=e+4|0))!=(0|(e=Lt(e,t)))){for(t=a[e+39|0]<0?h[e+28>>2]:e+28|0;t=(e=t)+1|0,32==(0|(i=a[0|e]))|i-9>>>0<5;);e:{t:{i:switch((i=a[0|e])-43|0){case 0:break t;case 2:break i;default:break e}r=1}i=a[0|t],e=t}if(i-48>>>0<10)for(;n=48+(v(n,10)-a[0|e]|0)|0,t=a[e+1|0],e=e+1|0,t-48>>>0<10;);-1!=(0|(e=r?n:0-n|0))&&(s=0!=(0|e))}return s}function ri(e,t){var i=0,n=0,r=0,a=0,s=0,o=0;if((r=h[e+8>>2])-(i=h[e+4>>2])>>1>>>0>=t>>>0)return t&&(i=xt(i,0,t<<=1)+t|0),void(h[e+4>>2]=i);e:{if((0|(n=(o=(s=i-(a=h[e>>2])|0)>>1)+t|0))>=0){if(i=0,n=(r=r-a|0)>>>0<2147483646?n>>>0>r>>>0?n:r:2147483647){if((0|n)<0)break e;i=gn(n<<1)}return t=xt((o<<1)+i|0,0,t<<=1)+t|0,(0|s)>0&&We(i,a,s),h[e+8>>2]=(n<<1)+i,h[e+4>>2]=t,h[e>>2]=i,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function ai(e,t){var i=0,n=0,r=0,a=0,s=0;e:{t:{if((a=(i=h[e+4>>2])-(r=h[e>>2])|0)>>>0<t>>>0){if((s=t-a|0)>>>0<=(n=h[e+8>>2])-i>>>0)return s&&(i=xt(i,0,s)+s|0),void(h[e+4>>2]=i);if((0|t)<0)break e;if(n=(i=n-r|0)<<1,xt((i=gn(n=i>>>0<1073741823?t>>>0>n>>>0?t:n:2147483647))+a|0,0,s),(0|a)>0&&We(i,r,a),h[e+8>>2]=i+n,h[e+4>>2]=t+i,h[e>>2]=i,!r)break t;return void ve(r)}t>>>0>=a>>>0||(h[e+4>>2]=t+r)}return}vr(),x()}function si(e){var t=0,i=0,n=0,r=0,a=0;if((0|(t=h[e+4>>2]))!=h[e+8>>2])return h[t>>2]=h[2863],void(h[e+4>>2]=t+4);e:{if((t=1+(r=(n=t-(a=h[e>>2])|0)>>2)|0)>>>0<1073741824){if(i=n>>1,i=n>>>0<2147483644?t>>>0>i>>>0?t:i:1073741823){if(i>>>0>=1073741824)break e;t=gn(i<<2)}else t=0;return h[(r=t+(r<<2)|0)>>2]=h[2863],(0|n)>0&&We(t,a,n),h[e+8>>2]=t+(i<<2),h[e+4>>2]=r+4,h[e>>2]=t,void(a&&ve(a))}vr(),x()}Qi(1336),x()}function oi(e,t){var i=0,n=0,r=0,a=0;n=h[e+12>>2],(i=h[e+16>>2]-n>>2)>>>0<t>>>0?ei(e+12|0,t-i|0):t>>>0>=i>>>0||(h[e+16>>2]=n+(t<<2));e:{if(i=h[e>>2],!(h[e+8>>2]-i>>2>>>0>=t>>>0)){if(t>>>0>=1073741824)break e;n=h[e+4>>2],r=(t=gn(r=t<<2))+r|0,a=(n=n-i|0)+t|0,(0|n)>0&&We(t,i,n),h[e+8>>2]=r,h[e+4>>2]=a,h[e>>2]=t,i&&ve(i)}return}Qi(1336),x()}function li(e,t,i){var n=0,r=0,a=0;e:{if(!(n=h[i+16>>2])){if(en(i))break e;n=h[i+16>>2]}if(n-(a=h[i+20>>2])>>>0<t>>>0)return 0|Rr[h[i+36>>2]](i,e,t);t:if(h[i+80>>2]<0)n=0;else{for(r=t;;){if(!(n=r)){n=0;break t}if(10==d[(r=n-1|0)+e|0])break}if((r=0|Rr[h[i+36>>2]](i,e,n))>>>0<n>>>0)break e;e=e+n|0,t=t-n|0,a=h[i+20>>2]}We(a,e,t),h[i+20>>2]=h[i+20>>2]+t,r=t+n|0}return r}function ci(e){var t=0,i=0,n=0,r=0;d[e+76|0]&&(a[e+76|0]=0,n=h[e+60>>2],r=(t=(i=h[e+72>>2]+7|0)>>>0<7?1:t)>>>3|0,t=(i=t<<29|i>>>3)+h[e+56>>2]|0,n=n+r|0,h[e+56>>2]=t,h[e+60>>2]=t>>>0<i>>>0?n+1|0:n),f[e+38>>1]<=513&&(a[e+132|0]=0,n=h[e+116>>2],t=0,r=(t=(i=h[e+128>>2]+7|0)>>>0<7?1:t)>>>3|0,t=(i=t<<29|i>>>3)+h[e+112>>2]|0,n=n+r|0,h[e+112>>2]=t,h[e+116>>2]=t>>>0<i>>>0?n+1|0:n)}function ui(e,t,i){var n=0,r=0,s=0,o=0;e:if(!(e>>>0>10||(0|(n=h[i+20>>2]))>=(0|(r=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|r))){if(r=a[s+h[i>>2]|0],n=(s=s+1|0)?n:n+1|0,h[i+16>>2]=s,h[i+20>>2]=n,(0|r)<0){if(!ui(e+1|0,t,i))break e;i=h[t>>2],e=h[t+4>>2]<<7|i>>>25,i=127&r|i<<7}else e=0,i=255&r;h[t>>2]=i,h[t+4>>2]=e,o=1}return o}function hi(e,t,i){var n=0,r=0,s=0,o=0;e:if(!(e>>>0>10||(0|(n=h[i+20>>2]))>=(0|(r=h[i+12>>2]))&(s=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|r))){if(r=a[s+h[i>>2]|0],n=(s=s+1|0)?n:n+1|0,h[i+16>>2]=s,h[i+20>>2]=n,(0|r)<0){if(!hi(e+1|0,t,i))break e;i=h[t>>2],e=h[t+4>>2]<<7|i>>>25,i=127&r|i<<7}else e=0,i=255&r;h[t>>2]=i,h[t+4>>2]=e,o=1}return o}function di(e,t){var i,n=0,r=0,a=0,s=0;h[e+144>>2]=t,n=h[32+(0|Rr[h[h[t>>2]+32>>2]](t))>>2],i=h[n>>2]+h[n+16>>2]|0,r=h[32+(0|Rr[h[h[t>>2]+32>>2]](t))>>2],n=(n=h[r+8>>2])-(r=h[r+16>>2])|0,a=e,s=f[h[32+(0|Rr[h[h[t>>2]+32>>2]](t))>>2]+38>>1],u[a+38>>1]=s,h[e>>2]=i,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=n,h[e+12>>2]=0,a=e,s=0|Rr[h[h[t>>2]+36>>2]](t),h[a+148>>2]=s}function fi(e,t,i,n){a[e+53|0]=1;e:if(h[e+4>>2]==(0|i)){a[e+52|0]=1;t:{if(!(i=h[e+16>>2])){if(h[e+36>>2]=1,h[e+24>>2]=n,h[e+16>>2]=t,1!=(0|n))break e;if(1==h[e+48>>2])break t;break e}if((0|t)==(0|i)){if(2==(0|(i=h[e+24>>2]))&&(h[e+24>>2]=n,i=n),1!=h[e+48>>2])break e;if(1==(0|i))break t;break e}h[e+36>>2]=h[e+36>>2]+1}a[e+54|0]=1}}function pi(e,t,i){t|=0,i|=0;var n,r=0;N=n=N-16|0,h[4+(e|=0)>>2]=t,t=h[t+64>>2],r=h[t>>2],t=h[t+4>>2],a[n+15|0]=0,Pt(e+24|0,(t-r>>2>>>0)/3|0,n+15|0),t=h[e+4>>2],r=h[t+56>>2],t=h[t+52>>2],a[n+14|0]=0,Pt(e+36|0,r-t>>2,n+14|0),t=h[i+12>>2],h[e+16>>2]=h[i+8>>2],h[e+20>>2]=t,t=h[i+4>>2],h[e+8>>2]=h[i>>2],h[e+12>>2]=t,N=n+16|0}function mi(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;if(t)for(s=0-d[e+12|0]&255,o=h[e>>2],r=h[e+8>>2];l=n<<1,r>>>0>4095||(0|(n=h[e+4>>2]))<=0||(n=n-1|0,h[e+4>>2]=n,r=d[n+o|0]|r<<8),n=(a=255&r)>>>0<s>>>0,c=a,a=v(r>>>8|0,s),r=n?c+a|0:r-(s+a|0)|0,h[e+8>>2]=r,n|=l,t=t-1|0;);h[i>>2]=n}function gi(e){h[e>>2]=0,h[e+4>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,a[e+24|0]=1,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+68>>2]=e}function vi(e){var t;h[e>>2]=0,h[e+4>>2]=0,h[e+56>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+60>>2]=e}function bi(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!bi(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function _i(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!_i(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function yi(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!yi(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function Ai(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!Ai(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function Ei(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!Ei(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function wi(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!wi(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function Si(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!Si(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function Ti(e,t,i){var n=0,r=0,a=0,s=0,o=0;e:if(!(e>>>0>5||(0|(n=a=h[i+20>>2]))>=(0|(s=h[i+12>>2]))&(r=h[i+16>>2])>>>0>=p[i+8>>2]|(0|n)>(0|s))){if(n=d[r+h[i>>2]|0],a=(r=r+1|0)?a:a+1|0,h[i+16>>2]=r,h[i+20>>2]=a,128&n){if(!Ti(e+1|0,t,i))break e;n=127&n|h[t>>2]<<7}h[t>>2]=n,o=1}return o}function xi(e,t,i){var n=0,r=0;e:{t:{if(i>>>0>=4){if(3&(e|t))break t;for(;;){if(h[e>>2]!=h[t>>2])break t;if(t=t+4|0,e=e+4|0,!((i=i-4|0)>>>0>3))break}}if(!i)break e}for(;;){if((0|(n=d[0|e]))==(0|(r=d[0|t]))){if(t=t+1|0,e=e+1|0,i=i-1|0)continue;break e}break}return n-r|0}return 0}function Mi(e){var t=0,i=0,n=0;if(e){if(n=h[e+24>>2]){if((0|(i=h[e+28>>2]))==(0|n))t=n;else{for(;t=h[(i=i-4|0)>>2],h[i>>2]=0,t&&(an(t+12|0,h[t+16>>2]),pn(t,h[t+4>>2]),ve(t)),(0|n)!=(0|i););t=h[e+24>>2]}h[e+28>>2]=n,ve(t)}an(e+12|0,h[e+16>>2]),pn(e,h[e+4>>2]),ve(e)}}function Ri(e){var t,i=0,n=0;if(t=h[e>>2]){if((0|t)==(0|(i=h[e+4>>2])))i=t;else{for(;(n=h[i-12>>2])&&(h[i-8>>2]=n,ve(n)),(n=h[i-28>>2])&&(h[i-24>>2]=n,ve(n)),(n=h[i-40>>2])&&(h[i-36>>2]=n,ve(n)),Ni(i-140|0),(0|t)!=(0|(i=i-144|0)););i=h[e>>2]}h[e+4>>2]=t,ve(i)}}function Pi(e){var t=0,i=0,n=0;e:{if(3&(t=e))for(;;){if(!d[0|t])break e;if(!(3&(t=t+1|0)))break}for(;i=t,t=t+4|0,!((-1^(n=h[i>>2]))&n-16843009&-2139062144););if(!(255&n))return i-e|0;for(;n=d[i+1|0],i=t=i+1|0,n;);}return t-e|0}function Ci(e){var t,i=0,n=0;if(h[(e|=0)>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,ve(i)),t=h[e+8>>2]){if((0|(n=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+8>>2]}h[e+12>>2]=t,ve(i)}ve(e)}function Di(e,t,i){e|=0,t|=0;var n,r,a,s,o=0,l=0;return(s=h[8+(i|=0)>>2])>>>0>(r=h[i+16>>2])>>>0&(0|(o=a=h[i+12>>2]))>=(0|(n=h[i+20>>2]))|(0|n)<(0|o)&&(t=d[r+h[i>>2]|0],o=(l=r+1|0)?n:n+1|0,h[i+16>>2]=l,h[i+20>>2]=o,h[e+4>>2]=t),r>>>0<s>>>0&(0|n)<=(0|a)|(0|n)<(0|a)}function Oi(e,t,i){var n=0;if(!i)return h[e+4>>2]==h[t+4>>2];if((0|e)==(0|t))return 1;n=h[e+4>>2],e=d[0|n],i=h[t+4>>2];e:if(!(!e|(0|(t=d[0|i]))!=(0|e)))for(;;){if(t=d[i+1|0],!(e=d[n+1|0]))break e;if(i=i+1|0,n=n+1|0,(0|e)!=(0|t))break}return(0|e)==(0|t)}function ki(e,t){var i=0,n=0,r=0,a=0;e:{if(i=h[e>>2],!(h[e+8>>2]-i>>2>>>0>=t>>>0)){if(t>>>0>=1073741824)break e;n=h[e+4>>2],r=(t=gn(r=t<<2))+r|0,a=(n=n-i|0)+t|0,(0|n)>0&&We(t,i,n),h[e+8>>2]=r,h[e+4>>2]=a,h[e>>2]=t,i&&ve(i)}return}Qi(1336),x()}function Ii(e){var t=0;e&&((t=h[e+76>>2])&&(h[e+80>>2]=t,ve(t)),(t=h[e- -64>>2])&&(h[e+68>>2]=t,ve(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),(t=h[e+24>>2])&&(h[e+28>>2]=t,ve(t)),(t=h[e+12>>2])&&(h[e+16>>2]=t,ve(t)),(t=h[e>>2])&&(h[e+4>>2]=t,ve(t)),ve(e))}function Ni(e){var t=0;(t=h[e+84>>2])&&(h[e+88>>2]=t,ve(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,ve(t)),(t=h[e+52>>2])&&(h[e+56>>2]=t,ve(t)),(t=h[e+40>>2])&&(h[e+44>>2]=t,ve(t)),(t=h[e+28>>2])&&(h[e+32>>2]=t,ve(t)),(t=h[e+12>>2])&&ve(t),(e=h[e>>2])&&ve(e)}function Li(e,t,i){var n,r,a=0,s=0,o=0;for(N=n=(N=r=N-16|0)-16|0,t=t-e>>2;t;)h[n+12>>2]=e,a=t>>>1|0,h[n+12>>2]=h[n+12>>2]+(a<<2),o=(-1^a)+t|0,t=a,a=h[n+12>>2],t=(s=p[a>>2]<p[i>>2])?o:t,e=s?a+4|0:e;return N=n+16|0,N=r+16|0,e}function Ui(e){var t,i=0,n=0;if((0|(i=h[e+4>>2]))!=(0|(t=h[e>>2])))for(;(n=h[i-12>>2])&&(h[i-8>>2]=n,ve(n)),(n=h[i-28>>2])&&(h[i-24>>2]=n,ve(n)),(n=h[i-40>>2])&&(h[i-36>>2]=n,ve(n)),Ni(i-140|0),(0|t)!=(0|(i=i-144|0)););h[e+4>>2]=t}function Bi(e,t,i){var n=0,r=0;e:{if(i>>>0<=10)a[(n=e)+11|0]=i;else{if(i>>>0>4294967279)break e;n=i>>>0>=11?11==(0|(n=(r=i+16&-16)-1|0))?r:n:10,n=gn(r=n+1|0),h[e>>2]=n,h[e+8>>2]=-2147483648|r,h[e+4>>2]=i}return void nr(n,t,i+1|0)}mr(),x()}function Fi(e,t){var i,n;return n=gn(40),h[n>>2]=-1,h[16+(i=n+8|0)>>2]=0,h[i+20>>2]=0,h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,Rr[h[h[e>>2]+16>>2]](e,n),e=h[t+88>>2],h[t+88>>2]=n,e&&((t=h[e+8>>2])&&(h[e+12>>2]=t,ve(t)),ve(e)),1}function Gi(e){var t,i,n=0,r=0,a=0;return a=d[e+12|0],(r=h[e+8>>2])>>>0>4095||(0|(n=h[e+4>>2]))<=0||(n=n-1|0,h[e+4>>2]=n,r=d[n+h[e>>2]|0]|r<<8),n=v(a=0-a&255,r>>>8|0),i=(t=255&r)>>>0<a>>>0,h[e+8>>2]=i?n+t|0:r-(n+a|0)|0,i}function Vi(e,t){return h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2012,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+40>>2]=0,h[e>>2]=2356,h[e+44>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,h[e+56>>2]=0,h[e+60>>2]=t,e}function zi(e,t,i,n){if(t){if((0|n)<0)return 0;!n&h[e+4>>2]-h[e>>2]>>>0>=i>>>0||ai(e,i),i&&At(h[e>>2],t,i)}else{if((0|n)<0)return 0;ai(e,i)}return t=h[e+28>>2],t=(i=h[e+24>>2]+1|0)?t:t+1|0,h[e+24>>2]=i,h[e+28>>2]=t,1}function Hi(e){var t=0,i=0,n=0;if(a[h[e>>2]]-48>>>0>=10)return 0;for(;n=h[e>>2],i=-1,t>>>0<=214748364&&(i=(0|(i=a[0|n]-48|0))>(2147483647-(t=v(t,10))|0)?-1:i+t|0),h[e>>2]=n+1,t=i,a[n+1|0]-48>>>0<10;);return t}function ji(e){var t=0,i=0;(e|=0)&&(t=h[e+88>>2],h[e+88>>2]=0,t&&((i=h[t+8>>2])&&(h[t+12>>2]=i,ve(i)),ve(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,ve(t)),t=h[e+64>>2],h[e+64>>2]=0,t&&((i=h[t>>2])&&(h[t+4>>2]=i,ve(i)),ve(t)),ve(e))}function Wi(e,t){var i,n=0,r=0;if((i=Pi(t))>>>0<4294967280){e:{if(i>>>0>=11)n=gn(r=i+16&-16),h[e+8>>2]=-2147483648|r,h[e>>2]=n,h[e+4>>2]=i;else if(a[e+11|0]=i,n=e,!i)break e;We(n,t,i)}return a[i+n|0]=0,e}mr(),x()}function Yi(e,t,i,n){var r,a=0,s=0;return r=(s=t^n)>>31,s>>=31,e=qe((e^=a=t>>31)-a|0,a=(t^a)-((e>>>0<a>>>0)+a|0)|0,(t=i^(e=n>>31))-e|0,(e^n)-((e>>>0>t>>>0)+e|0)|0)^s,L=(r^L)-((e>>>0<s>>>0)+r|0)|0,e-s|0}function Xi(e,t,i){var n,r=0;N=n=N-16|0,(r=2147483647&h[e+8>>2])>>>0>i>>>0?(r=h[e>>2],h[e+4>>2]=i,nr(r,t,i),a[n+15|0]=0,a[i+r|0]=d[n+15|0]):Zt(e,r-1|0,1+(i-r|0)|0,e=h[e+4>>2],e,i,t),N=n+16|0}function Zi(e,t,i,n){var r,a,s,o,l=0,c=0;return o=v(l=i>>>16|0,c=e>>>16|0),l=(65535&(c=((s=v(r=65535&i,a=65535&e))>>>16|0)+v(c,r)|0))+v(l,a)|0,L=(v(t,i)+o|0)+v(e,n)+(c>>>16)+(l>>>16)|0,65535&s|l<<16}function qi(e,t,i){var n;if(!(n=h[e+16>>2]))return h[e+36>>2]=1,h[e+24>>2]=i,void(h[e+16>>2]=t);e:{if((0|t)==(0|n)){if(2!=h[e+24>>2])break e;return void(h[e+24>>2]=i)}a[e+54|0]=1,h[e+24>>2]=2,h[e+36>>2]=h[e+36>>2]+1}}function Qi(e){var t,i,n,r,a;t=0|I(8),h[t>>2]=15156,h[t>>2]=15200,n=gn((i=Pi(e))+13|0),h[n+8>>2]=0,h[n+4>>2]=i,h[n>>2]=i,r=t,a=We(n+12|0,e,i+1|0),h[r+4>>2]=a,h[t>>2]=15248,k(0|t,15280,13),x()}function Ki(e,t,i,n,r){var a;if(N=a=N-256|0,!(73728&r|(0|i)<=(0|n))){if(xt(a,255&t,(n=(i=i-n|0)>>>0<256)?i:256),!n)for(;Xn(e,a,256),(i=i-256|0)>>>0>255;);Xn(e,a,i)}N=a+256|0}function Ji(e,t,i){var n=0;return(0|(n=e+4|0))==(0|(e=Lt(e,t)))?0:((0|(t=h[e+32>>2]))!=(0|(n=h[e+28>>2]))&&(it(i,t-n|0),We(mn(i),i=h[e+28>>2],h[e+32>>2]-i|0)),(0|t)!=(0|n))}function $i(e,t){var i,n=0;if(i=h[e+8>>2],e=h[e+12>>2]-i|0)for(n=(e>>=2)>>>0>1?e:1,e=0;;){if(h[h[(e<<2)+i>>2]+60>>2]==(0|t))return e;if((0|n)==(0|(e=e+1|0)))break}return-1}function en(e){var t=0;return t=h[e+72>>2],h[e+72>>2]=t-1|t,8&(t=h[e>>2])?(h[e>>2]=32|t,-1):(h[e+4>>2]=0,h[e+8>>2]=0,t=h[e+44>>2],h[e+28>>2]=t,h[e+20>>2]=t,h[e+16>>2]=t+h[e+48>>2],0)}function tn(e){return h[e+8>>2]=0,h[e+12>>2]=0,h[e>>2]=0,h[e+40>>2]=0,h[e+44>>2]=0,h[e+28>>2]=9,a[e+24|0]=1,h[e+56>>2]=-1,h[e+60>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+48>>2]=0,h[e+52>>2]=0,e}function nn(e,t,i){var n;N=n=N-16|0,i>>>0<=10?(a[e+11|0]=i,nr(e,t,i),a[n+15|0]=0,a[e+i|0]=d[n+15|0]):Zt(e,10,i-10|0,e=d[e+11|0],e,i,t),N=n+16|0}function rn(e){var t,i;return(e=(t=h[3902])+(i=e+3&-4)|0)>>>0<=t>>>0&&i||e>>>0>Pr()<<16>>>0&&!(0|C(0|e))?(h[4190]=48,-1):(h[3902]=e,t)}function an(e,t){t&&(an(e,h[t>>2]),an(e,h[t+4>>2]),e=h[t+28>>2],h[t+28>>2]=0,e&&(an(e+12|0,h[e+16>>2]),pn(e,h[e+4>>2]),ve(e)),a[t+27|0]<0&&ve(h[t+16>>2]),ve(t))}function sn(e){return h[e+40>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=13312,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+32>>2]=0,u[e+36>>1]=0,e}function on(e){var t=0;return!h[(e|=0)- -64>>2]|!h[e+68>>2]|!h[e+44>>2]|!h[e+48>>2]||!h[e+52>>2]|!h[e+56>>2]||(t=-1!=h[e+92>>2]),0|t}function ln(e){var t=0;return h[(e|=0)>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rr[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),0|e}function cn(e){var t=0;return!h[48+(e|=0)>>2]|!h[e+52>>2]|!h[e+28>>2]|!h[e+32>>2]||!h[e+36>>2]|!h[e+40>>2]||(t=-1!=h[e+76>>2]),0|t}function un(e){var t=0;return h[(e|=0)>>2]=11900,(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12152,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),0|e}function hn(e){var t=0;h[(e|=0)>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rr[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),ve(e)}function dn(e,t){var i=0;return i=-1,-1==(0|t)|(0|t)>4||(t=v(t,12)+e|0,e=h[t+20>>2],(h[t+24>>2]-e|0)<=0||(i=h[e>>2])),i}function fn(e,t,i,n,r,s,o){h[e>>2]=0,h[e+56>>2]=t,h[e+48>>2]=0,h[e+52>>2]=0,h[e+40>>2]=s,h[e+44>>2]=o,a[e+32|0]=r,h[e+28>>2]=n,a[e+24|0]=i}function pn(e,t){t&&(pn(e,h[t>>2]),pn(e,h[t+4>>2]),(e=h[t+28>>2])&&(h[t+32>>2]=e,ve(e)),a[t+27|0]<0&&ve(h[t+16>>2]),ve(t))}function mn(e){return(d[e+11|0]>>>7|0?h[e+4>>2]:d[e+11|0])||(Tr(),x()),d[e+11|0]>>>7|0&&(e=h[e>>2]),e}function gn(e){var t=0;e=e||1;e:{for(;;){if(t=F(e))break e;if(!(t=h[4357]))break;Rr[0|t]()}M(),x()}return t}function vn(e,t){t&&(vn(e,h[t>>2]),vn(e,h[t+4>>2]),a[t+39|0]<0&&ve(h[t+28>>2]),a[t+27|0]<0&&ve(h[t+16>>2]),ve(t))}function bn(e,t){e|=0;var i=0;switch(0|(t|=0)){case 1:t=1;case 0:h[e+28>>2]=t,i=1}return 0|i}function _n(e){var t,i;return h[(e|=0)>>2]=15200,t=h[e+4>>2]-12|0,i=h[t+8>>2]-1|0,h[t+8>>2]=i,(0|i)<0&&ve(t),0|e}function yn(e,t,i){return t|=0,i|=0,h[4+(e|=0)>>2]=t,t=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=t,1}function An(e){var t=0;return!h[60+(e|=0)>>2]|!h[e+44>>2]|!h[e+48>>2]|!h[e+52>>2]||(t=0!=h[e+56>>2]),0|t}function En(e,t){var i,n;ai(e,t),i=t=h[e+28>>2],n=t+1|0,t=h[e+24>>2]+1|0,h[e+24>>2]=t,h[e+28>>2]=t?i:n}function wn(e){var t=0;return!h[52+(e|=0)>>2]|!h[e+44>>2]|!h[e+48>>2]||(t=0!=h[e+56>>2]),0|t}function Sn(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|!t|3!=d[t+24|0]||(h[e+60>>2]=t,i=1),0|i}function Tn(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|3!=d[t+24|0]||(h[e- -64>>2]=t,i=1),0|i}function xn(e){var t=0;(t=h[e+16>>2])&&(h[e+20>>2]=t,ve(t)),(t=h[e>>2])&&(h[e+4>>2]=t,ve(t))}function Mn(e,t){e|=0;var i=0;return h[56+(t|=0)>>2]|3!=d[t+24|0]||(h[e+48>>2]=t,i=1),0|i}function Rn(e){var t;h[(e|=0)>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)}function Pn(e){var t;h[e+16>>2]=0,t=h[e>>2],h[e+4>>2]=t,h[e+12>>2]=t,t&&ve(t)}function Cn(e,t){t&&(Cn(e,h[t>>2]),Cn(e,h[t+4>>2]),vn(t+20|0,h[t+24>>2]),ve(t))}function Dn(e){for(var t=0;e;)e&=e-1,t=t+1|0;return t}function On(){var e;return e=gn(12),h[e>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,0|e}function kn(e){var t=0;(e|=0)&&((t=h[e>>2])&&(h[e+4>>2]=t,ve(t)),ve(e))}function In(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function Nn(e,t,i){h[i+76>>2],e=li(e,t,i)}function Ln(e,t){return t|=0,0|Rr[h[h[(e|=0)>>2]+12>>2]](e,t)}function Un(e,t){return t|=0,h[h[(e|=0)>>2]+(t<<2)>>2]}function Bn(e){return h[e>>2]=13756,xt(e+4|0,0,80),e}function Fn(e){return e?31-y(e-1^e)|0:32}function Gn(e){return h[12+(e|=0)>>2]-h[e+8>>2]>>2}function Vn(e){(e|=0)&&Rr[h[h[e>>2]+4>>2]](e)}function zn(e,t){return t|=0,h[4+(e|=0)>>2]=t,1}function Hn(e){return h[4+(e|=0)>>2]-h[e>>2]>>1}function jn(e){return h[4+(e|=0)>>2]-h[e>>2]>>2}function Wn(e){return h[4+(e|=0)>>2]-h[e>>2]|0}function Yn(e){sn(e),h[e+44>>2]=0,h[e>>2]=11208}function Xn(e,t,i){32&d[0|e]||li(t,i,e)}function Zn(e){return h[28+(e|=0)>>2]}function qn(e){return h[80+(e|=0)>>2]}function Qn(e,t){return-1}function Kn(e){return h[4+(e|=0)>>2]}function Jn(e){return h[8+(e|=0)>>2]}function $n(e,t){return 6}function er(e,t){return 1}function tr(e,t){return 0}function ir(e){return h[(e|=0)>>2]}function nr(e,t,i){i&&We(e,t,i)}function rr(e){(e|=0)&&ve(e)}function ar(e){return 0|e}function sr(e){return 3}function or(e){return 4}function lr(e){return 5}function cr(e){return 2}function ur(e){return 6}function hr(e){return 1}function dr(e){return 0}function fr(e){ve(e|=0)}function pr(){Qi(1276),x()}function mr(){Qi(1323),x()}function gr(e){x()}function vr(){pr(),x()}function br(){return 3}function _r(){return 4}function yr(){return-1}function Ar(){return 1}function Er(){return 0}function wr(){return 2}function Sr(){Tr(),x()}function Tr(){M(),x()}function xr(e){}r(t=d,1028,"YAQAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAE41ZHJhY28yOEF0dHJpYnV0ZU9jdGFoZWRyb25UcmFuc2Zvcm1FAADYOgAAOAQAAMwHAAAAAAAA0AQAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAAAoAAAAXAAAAGAAAAE41ZHJhY28zMEF0dHJpYnV0ZVF1YW50aXphdGlvblRyYW5zZm9ybUUAAAAA2DoAAKQEAADMBwAALSsgICAwWDB4AF9fbmV4dF9wcmltZSBvdmVyZmxvdwB2ZWN0b3IAc3RkOjpleGNlcHRpb24Ac2tpcF9hdHRyaWJ1dGVfdHJhbnNmb3JtAGJhc2ljX3N0cmluZwBhbGxvY2F0b3I8VD46OmFsbG9jYXRlKHNpemVfdCBuKSAnbicgZXhjZWVkcyBtYXhpbXVtIHN1cHBvcnRlZCBzaXplAERSQUNPAFVzaW5nIGluY29tcGF0aWJsZSBkZWNvZGVyIGZvciB0aGUgaW5wdXQgZ2VvbWV0cnkuAEZhaWxlZCB0byBkZWNvZGUgcG9pbnQgYXR0cmlidXRlcy4ARmFpbGVkIHRvIGluaXRpYWxpemUgdGhlIGRlY29kZXIuAFVua25vd24gbWlub3IgdmVyc2lvbi4AVW5rbm93biBtYWpvciB2ZXJzaW9uLgBJbnB1dCBpcyBub3QgYSBtZXNoLgBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlLgBOb3QgYSBEcmFjbyBmaWxlLgBJbnB1dCBpcyBub3QgYSBwb2ludCBjbG91ZC4AVW5zdXBwb3J0ZWQgZW5jb2RpbmcgbWV0aG9kLgBGYWlsZWQgdG8gZGVjb2RlIG1ldGFkYXRhLgBGYWlsZWQgdG8gZGVjb2RlIGdlb21ldHJ5IGRhdGEuAChudWxsKQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBLZFRyZWVBdHRyaWJ1dGVzRGVjb2RlcjogY29tcHJlc3Npb24gbGV2ZWwgJWkgbm90IHN1cHBvcnRlZC4KAEZsb2F0UG9pbnRzVHJlZURlY29kZXI6IGNvbXByZXNzaW9uIGxldmVsICVpIG5vdCBzdXBwb3J0ZWQuCgBWZXJzaW9uIG5vdCBzdXBwb3J0ZWQuIAoATWV0aG9kIG5vdCBzdXBwb3J0ZWQuIAoATjVkcmFjbzE4QXR0cmlidXRlVHJhbnNmb3JtRQCwOgAArwcAAAAAAABYCAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAATjVkcmFjbzE3QXR0cmlidXRlc0RlY29kZXJFAE41ZHJhY28yNkF0dHJpYnV0ZXNEZWNvZGVySW50ZXJmYWNlRQAAAACwOgAAKAgAANg6AAAMCAAAUAgAAAAAAADACAAAJQAAACYAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAJwAAACgAAAApAAAATjVkcmFjbzIzS2RUcmVlQXR0cmlidXRlc0RlY29kZXJFAAAA2DoAAJwIAABYCAAAAAAAACAJAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAABONWRyYWNvMjZTZXF1ZW50aWFsQXR0cmlidXRlRGVjb2RlckUAAAAAsDoAAPgIAAD/////AAAAAJgJAAAzAAAANAAAABsAAAA1AAAANgAAAB4AAAAfAAAAIAAAADcAAAA4AAAAOQAAADoAAAA7AAAATjVkcmFjbzM3U2VxdWVudGlhbEF0dHJpYnV0ZURlY29kZXJzQ29udHJvbGxlckUA2DoAAGgJAABYCAAAAAAAAAwKAAA8AAAAPQAAAD4AAAAtAAAALgAAAC8AAAA/AAAAMQAAAEAAAABBAAAAQgAAAEMAAABEAAAATjVkcmFjbzMzU2VxdWVudGlhbEludGVnZXJBdHRyaWJ1dGVEZWNvZGVyRQDYOgAA4AkAACAJAAAAAAAAmAwAAEUAAABGAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAUAAAAE41ZHJhY280ME1lc2hQcmVkaWN0aW9uU2NoZW1lUGFyYWxsZWxvZ3JhbURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjNQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQBONWRyYWNvMzdQcmVkaWN0aW9uU2NoZW1lVHlwZWREZWNvZGVySW50ZXJmYWNlSWlpRUUATjVkcmFjbzMyUHJlZGljdGlvblNjaGVtZURlY29kZXJJbnRlcmZhY2VFAE41ZHJhY28yNVByZWRpY3Rpb25TY2hlbWVJbnRlcmZhY2VFALA6AAA8DAAA2DoAABEMAABgDAAA2DoAAN0LAABoDAAA2DoAAIkLAAB0DAAA2DoAAPMKAACADAAA2DoAAFAKAACMDAAAAAAAAIwMAABFAAAAUQAAACIAAABIAAAAIgAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAACIAAAAAAAAAgAwAAEUAAABSAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAAD0DQAARQAAAFMAAABUAAAASAAAAFUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAABWAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUA2DoAAEwNAACMDAAAAAAAAOwOAABXAAAAWAAAAFkAAABIAAAAWgAAAEoAAABLAAAATAAAAE0AAABOAAAAWwAAAFwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAOA4AAIwMAAAAAAAA0A8AAF0AAABeAAAAXwAAAEgAAABgAAAAYQAAAGIAAABjAAAATQAAAE4AAABkAAAAZQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAMA8AAIwMAAAAAAAAvBAAAGYAAABnAAAAaAAAAEgAAABpAAAAagAAAGsAAABsAAAATQAAAE4AAABtAAAAbgAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAANg6AAAUEAAAjAwAAAAAAACoEQAAbwAAAHAAAABxAAAASAAAAHIAAABzAAAAdAAAAHUAAABNAAAATgAAAHYAAAB3AAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAAAARAACMDAAAAAAAADATAAB4AAAAeQAAAHoAAAB7AAAAfAAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQmFzZUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAAAAsDoAAHsSAADYOgAA0BEAACgTAAAAAAAAKBMAAHgAAAB9AAAAIgAAAHsAAAAiAAAAAAAAALwUAABFAAAAfgAAAH8AAABIAAAAgAAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAIEAAABONWRyYWNvNDBNZXNoUHJlZGljdGlvblNjaGVtZVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAADYOgAAJhQAAIAMAADYOgAAkBMAALAUAAAAAAAAsBQAAEUAAACCAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAADUFQAARQAAAIMAAACEAAAASAAAAIUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACGAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAADgVAACwFAAAAAAAAMAWAACHAAAAiAAAAIkAAABIAAAAigAAAEoAAABLAAAATAAAAE0AAABOAAAAiwAAAIwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAAGBYAALAUAAAAAAAAmBcAAI0AAACOAAAAjwAAAEgAAACQAAAAkQAAAJIAAACTAAAATQAAAE4AAACUAAAAlQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAABBcAALAUAAAAAAAAeBgAAJYAAACXAAAAmAAAAEgAAACZAAAAmgAAAJsAAACcAAAATQAAAE4AAACdAAAAngAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAAANg6AADcFwAAsBQAAAAAAABUGQAAnwAAAKAAAAChAAAASAAAAKIAAACjAAAApAAAAKUAAABNAAAATgAAAKYAAACnAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQDYOgAAvBgAALAUAAAAAAAAwBoAAKgAAACpAAAAqgAAAKsAAACsAAAATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JBcmVhSWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFALA6AAAaGgAA2DoAAHwZAAC4GgAAAAAAALgaAACoAAAArQAAACIAAACrAAAAIgAAAAAAAAB8GwAARQAAAK4AAACvAAAASAAAALAAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACxAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQAAAADYOgAAIBsAAIAMAAAAAAAA8BsAALIAAACzAAAAtAAAAC0AAAAuAAAAtQAAAD8AAAAxAAAAQAAAALYAAAC3AAAAuAAAALkAAABONWRyYWNvMzJTZXF1ZW50aWFsTm9ybWFsQXR0cmlidXRlRGVjb2RlckUAANg6AADEGwAADAoAAAAAAAD8HQAAugAAALsAAAC8AAAAvQAAAL4AAAC/AAAAwAAAAMEAAADCAAAAwwAAAMQAAADFAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yM1ByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUA2DoAAIUdAAB0DAAA2DoAAOQcAADkHQAA2DoAADQcAADwHQAAAAAAAJgfAADGAAAAxwAAAMgAAADJAAAAygAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQCwOgAA2h4AANg6AAAkHgAAkB8AAAAAAAAgIQAAywAAAMwAAADNAAAAvQAAAM4AAADPAAAA0AAAANEAAADCAAAAwwAAANIAAADTAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAAH8gAADkHQAA2DoAANwfAAAUIQAAAAAAAKQiAADUAAAA1QAAANYAAADXAAAA2AAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAACwOgAA8SEAANg6AABIIQAAnCIAAAAAAABMIwAA2QAAANoAAADbAAAAvQAAANwAAADdAAAA3gAAAN8AAADCAAAAwwAAAOAAAADhAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRUVFANg6AADoIgAA5B0AAAAAAACAJQAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzI3TWVzaFByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzIzUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUAANg6AAD7JAAAdAwAANg6AABNJAAAaCUAANg6AACQIwAAdCUAAAAAAAA4JwAA7gAAAO8AAADwAAAA8QAAAPIAAABONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckFyZWFJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQAAALA6AABrJgAA2DoAAKglAAAwJwAAAAAAANwoAADzAAAA9AAAAPUAAADlAAAA9gAAAPcAAAD4AAAA+QAAAOoAAADrAAAA+gAAAPsAAABONWRyYWNvNDJNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbERlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAACwoAABoJQAA2DoAAHwnAADQKAAAAAAAAHgqAAD8AAAA/QAAAP4AAAD/AAAAAAEAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQCwOgAAuikAANg6AAAEKQAAcCoAAAAAAAAwKwAA2QAAAAEBAAACAQAA5QAAAAMBAAAEAQAABQEAAAYBAADqAAAA6wAAAAcBAAAIAQAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVFRQAAAADYOgAAvCoAAGglAAAAAAAAtCsAAAkBAAAKAQAACwEAAC0AAAAuAAAADAEAAD8AAAAxAAAAQAAAAA0BAABCAAAAQwAAAA4BAAAPAQAAEAEAAE41ZHJhY28zOFNlcXVlbnRpYWxRdWFudGl6YXRpb25BdHRyaWJ1dGVEZWNvZGVyRQAAAADYOgAAgCsAAAwKAAAAAAAAFCwAABEBAAASAQAAEwEAABQBAAAiAAAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAACIAAABONWRyYWNvMTFNZXNoRGVjb2RlckUAAADYOgAA/CsAAGw0AAAAAAAAgCwAABwBAAAdAQAAEwEAAB4BAAAfAQAAFQEAABYBAAAXAQAAIAEAACEBAAAiAQAAIwEAACQBAABONWRyYWNvMjJNZXNoRWRnZWJyZWFrZXJEZWNvZGVyRQAAAADYOgAAXCwAABQsAAAAAAAApC0AACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAD/////AAAAAAguAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAAAAAAGguAAA5AQAAOgEAADsBAAA8AQAAPQEAAD4BAAA/AQAAQAEAAEEBAABCAQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfMzFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxEZWNvZGVyRUVFAE41ZHJhY28zNU1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSW50ZXJmYWNlRQAAALA6AABsLQAA2DoAACAtAACcLQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfNDFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxQcmVkaWN0aXZlRGVjb2RlckVFRQAAANg6AACwLQAAnC0AAE41ZHJhY28yNk1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSU5TXzM4TWVzaEVkZ2VicmVha2VyVHJhdmVyc2FsVmFsZW5jZURlY29kZXJFRUUAANg6AAAULgAAnC0AAAAAAABkLwAAQwEAAEQBAABFAQAATjVkcmFjbzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMV9FRUVFAE41ZHJhY28xM1RyYXZlcnNlckJhc2VJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQCwOgAA9S4AANg6AACILgAAXC8AAAAAAABcLwAARgEAAEcBAABFAQ=="),r(t,12180,"AQAAAAMAAAAFAAAABwAAAAAAAABoMAAASAEAAEkBAABKAQAASwEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAE41ZHJhY28xNVBvaW50c1NlcXVlbmNlckUAAAAAsDoAAEMwAADYOgAAvC8AAGAwAAD/////AAAAAFgxAABMAQAATQEAAE4BAABONWRyYWNvMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQBONWRyYWNvMTNUcmF2ZXJzZXJCYXNlSU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQAAsDoAAPUwAADYOgAAjDAAAFAxAAAAAAAAUDEAAE8BAABQAQAATgEAAAAAAAAQMgAAUQEAAFIBAABTAQAAVAEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAAAA2DoAAJAxAABgMAAAAAAAAJAyAABVAQAAVgEAAE4BAABONWRyYWNvMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQDYOgAAMDIAAFAxAAAAAAAAQDMAAFcBAABYAQAAWQEAAFoBAABONWRyYWNvMjJNZXNoVHJhdmVyc2FsU2VxdWVuY2VySU5TXzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMl9FRUVFRUUAANg6AAC0MgAAYDA="),r(t,13140,"rDMAABEBAABbAQAAEwEAABQBAABcAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAAF0BAABONWRyYWNvMjFNZXNoU2VxdWVudGlhbERlY29kZXJFANg6AACMMwAAFCwAAAAAAADsMwAAXgEAAF8BAABgAQAAYQEAAE41ZHJhY28xNUxpbmVhclNlcXVlbmNlckUAAADYOgAA0DMAAGAwAAAAAAAAbDQAABEBAABiAQAAYwEAABQBAAAiAAAAZAEAABYBAAAXAQAAGAE="),r(t,13360,"RmFpbGVkIHRvIHBhcnNlIERyYWNvIGhlYWRlci4ATjVkcmFjbzE3UG9pbnRDbG91ZERlY29kZXJFAAAAsDoAAE40AAAAAAAAxDQAABEBAABlAQAAYwEAABQBAABmAQAAZwEAABYBAAAXAQAAGAEAAE41ZHJhY28yM1BvaW50Q2xvdWRLZFRyZWVEZWNvZGVyRQAAANg6AACgNAAAbDQAAAAAAAAkNQAAEQEAAGgBAABjAQAAFAEAAGkBAABqAQAAFgEAABcBAAAYAQAATjVkcmFjbzI3UG9pbnRDbG91ZFNlcXVlbnRpYWxEZWNvZGVyRQAAANg6AAD8NAAAbDQAAAEAAAABAAAAAgAAAAIAAAAEAAAABAAAAAgAAAAIAAAABAAAAAgAAAAB"),r(t,13667,"wAAAAMAAAADAAAAAwP//////////AAAAAKA1AABrAQAAbAEAAG0BAABuAQAATjVkcmFjbzRNZXNoRQAAANg6AACQNQAA5DUAAP////8AAAAAAAAAAOQ1AABvAQAAcAEAAHEBAAByAQAATjVkcmFjbzEwUG9pbnRDbG91ZEUAAAAAsDoAAMw1AADYOwAAGQAKABkZGQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAAZABEKGRkZAwoHAAEACQsYAAAJBgsAAAsABhkAAAAZGRk="),r(t,13889,"DgAAAAAAAAAAGQAKDRkZGQANAAACAAkOAAAACQAOAAAO"),r(t,13947,"DA=="),r(t,13959,"EwAAAAATAAAAAAkMAAAAAAAMAAAM"),r(t,14005,"EA=="),r(t,14017,"DwAAAAQPAAAAAAkQAAAAAAAQAAAQ"),r(t,14063,"Eg=="),r(t,14075,"EQAAAAARAAAAAAkSAAAAAAASAAASAAAaAAAAGhoa"),r(t,14130,"GgAAABoaGgAAAAAAAAk="),r(t,14179,"FA=="),r(t,14191,"FwAAAAAXAAAAAAkUAAAAAAAUAAAU"),r(t,14237,"Fg=="),r(t,14249,"FQAAAAAVAAAAAAkWAAAAAAAWAAAWAAAwMTIzNDU2Nzg5QUJDREVGAAAAAAIAAAADAAAABQAAAAcAAAALAAAADQAAABEAAAATAAAAFwAAAB0AAAAfAAAAJQAAACkAAAArAAAALwAAADUAAAA7AAAAPQAAAEMAAABHAAAASQAAAE8AAABTAAAAWQAAAGEAAABlAAAAZwAAAGsAAABtAAAAcQAAAH8AAACDAAAAiQAAAIsAAACVAAAAlwAAAJ0AAACjAAAApwAAAK0AAACzAAAAtQAAAL8AAADBAAAAxQAAAMcAAADTAAAAAQAAAAsAAAANAAAAEQAAABMAAAAXAAAAHQAAAB8AAAAlAAAAKQAAACsAAAAvAAAANQAAADsAAAA9AAAAQwAAAEcAAABJAAAATwAAAFMAAABZAAAAYQAAAGUAAABnAAAAawAAAG0AAABxAAAAeQAAAH8AAACDAAAAiQAAAIsAAACPAAAAlQAAAJcAAACdAAAAowAAAKcAAACpAAAArQAAALMAAAC1AAAAuwAAAL8AAADBAAAAxQAAAMcAAADRAAAAMDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTk="),r(t,14884,"CgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUAypo7TjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAA2DoAAEg6AADMOwAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAA2DoAAHg6AABsOgAAAAAAAJw6AAB4AQAAeQEAAHoBAAB7AQAAfAEAAH0BAAB+AQAAfwEAAAAAAAAgOwAAeAEAAIABAAB6AQAAewEAAHwBAACBAQAAggEAAIMBAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAA2DoAAPg6AACcOgAAAAAAAFA7AACEAQAAhQEAAIYBAABTdDlleGNlcHRpb24AAAAAsDoAAEA7AAAAAAAAfDsAAA0AAACHAQAAiAEAAFN0MTFsb2dpY19lcnJvcgDYOgAAbDsAAFA7AAAAAAAAsDsAAA0AAACJAQAAiAEAAFN0MTJsZW5ndGhfZXJyb3IAAAAA2DoAAJw7AAB8OwAAU3Q5dHlwZV9pbmZvAAAAALA6AAC8Ow=="),r(t,15320,"BQ=="),r(t,15332,"cwE="),r(t,15356,"dAEAAHUBAABoPQ=="),r(t,15380,"Ag=="),r(t,15396,"//////////8="),r(t,15464,"BQ=="),r(t,15476,"dgE="),r(t,15500,"dAEAAHcBAAB4PQAAAAQ="),r(t,15524,"AQ=="),r(t,15540,"/////wo="),r(t,15608,"IERQ");var Mr,Rr=(Mr=[null,ar,fr,cr,function(e,t){e|=0;var i=0;return!(t=h[88+(t|=0)>>2])|2!=h[t>>2]||(i=e,e=h[t+8>>2],h[i+4>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,i=1),0|i},function(e,t){e|=0;var i,n=0;h[(t|=0)>>2]=2,n=h[t+8>>2],(i=h[t+12>>2]-n|0)>>>0<=4294967291&&(En(t+8|0,i+4|0),n=h[t+8>>2]),t=n+i|0,e=h[e+4>>2],a[0|t]=e,a[t+1|0]=e>>>8,a[t+2|0]=e>>>16,a[t+3|0]=e>>>24},function(e,t,i,n){e|=0,t|=0,i|=0;var r,a=0,s=0,o=0,l=0,c=0,u=0,f=0;if(o=h[80+(n|=0)>>2],N=r=N-48|0,!((e=h[e+4>>2])-31>>>0<4294967267))if(l=h[h[n>>2]>>2]+h[n+48>>2]|0,h[r+16>>2]=e,e=-1<<e,h[r+20>>2]=-1^e,e=-2-e|0,h[r+24>>2]=e,h[r+32>>2]=(0|e)/2,m[r+28>>2]=b(2)/b(0|e),(0|(s=h[i>>2]))==h[i+4>>2])if(o)for(n=0,e=0;c=r+36|0,i=h[h[t>>2]>>2],a=h[t+40>>2],We(c,i+(s=h[t+48>>2]+Zi(a,h[t+44>>2],d[t+84|0]?e:h[h[t+68>>2]+(e<<2)>>2],0)|0)|0,a),ut(r+16|0,c,r+12|0,r+8|0),h[(i=n<<2)+l>>2]=h[r+12>>2],h[(4|i)+l>>2]=h[r+8>>2],n=n+2|0,a=1,(0|o)!=(0|(e=e+1|0)););else a=1;else for(e=0,n=0;a=h[(n<<2)+s>>2],o=r+36|0,c=h[h[t>>2]>>2],f=h[t+48>>2],s=h[t+44>>2],u=h[t+40>>2],d[t+84|0]||(a=h[h[t+68>>2]+(a<<2)>>2]),We(o,(a=Zi(u,s,a,0)+f|0)+c|0,u),ut(r+16|0,o,r+12|0,r+8|0),h[(s=e<<2)+l>>2]=h[r+12>>2],h[(4|s)+l>>2]=h[r+8>>2],a=1,e=e+2|0,n=n+1|0,s=h[i>>2],n>>>0<h[i+4>>2]-s>>2>>>0;);return N=r+48|0,0|a},ht,function(e,t){t|=0;var i,n=0;return N=i=N-16|0,-1!=(0|(e=h[4+(e|=0)>>2]))&&(a[i+15|0]=e,n=h[t+20>>2],!!h[t+16>>2]&(0|n)>=0|(0|n)>0||Le(t,h[t+4>>2],i+15|0,i+16|0)),N=i+16|0,-1!=(0|e)|0},Di,function(e,t,i){var n,r,s,o,l,c;return t|=0,i|=0,N=n=N+-64|0,r=0|Rr[h[h[(e|=0)>>2]+44>>2]](e,t),e=0|Rr[h[h[e>>2]+40>>2]](e,t),s=tn(n),o=h[t+56>>2],l=r<<24>>24,c=e,e=(e=e-1|0)>>>0<=10?h[13616+(e<<2)>>2]:-1,fn(s,o,l,c,0,e=v(e,r),e>>31),kt(e=Nt(gn(96),s),i),a[e+84|0]=1,h[e+72>>2]=h[e+68>>2],h[e+60>>2]=h[t+60>>2],N=n- -64|0,0|e},$n,function(e,t){return 2},_n,function(e){var t;return h[(e|=0)>>2]=1140,(t=h[e+8>>2])&&(h[e+12>>2]=t,ve(t)),0|e},function(e){var t;h[(e|=0)>>2]=1140,(t=h[e+8>>2])&&(h[e+12>>2]=t,ve(t)),ve(e)},hr,function(e,t){e|=0;var i=0,n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;if(!(!(i=h[88+(t|=0)>>2])|1!=h[i>>2])){if(n=h[i+8>>2],h[e+4>>2]=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,n=a[t+24|0],r=h[e+8>>2],n>>>0>(s=h[e+12>>2]-r>>2)>>>0?(ei(e+8|0,n-s|0),n=a[t+24|0],r=h[e+8>>2]):n>>>0>=s>>>0||(h[e+12>>2]=(n<<2)+r),f=1,s=h[i+8>>2],(0|n)<=0)t=4;else{if(l=3&n,n-1>>>0<3)t=4,n=0;else for(p=-4&n,n=0,t=4;i=t+s|0,h[(o=n<<2)+r>>2]=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[(4|o)+r>>2]=d[i+4|0]|d[i+5|0]<<8|d[i+6|0]<<16|d[i+7|0]<<24,h[(8|o)+r>>2]=d[i+8|0]|d[i+9|0]<<8|d[i+10|0]<<16|d[i+11|0]<<24,h[(12|o)+r>>2]=d[i+12|0]|d[i+13|0]<<8|d[i+14|0]<<16|d[i+15|0]<<24,n=n+4|0,t=t+16|0,(0|p)!=(0|(c=c+4|0)););if(l)for(;i=t+s|0,h[(n<<2)+r>>2]=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,n=n+1|0,t=t+4|0,(0|(u=u+1|0))!=(0|l););}i=e,e=t+s|0,h[i+20>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24}return 0|f},function(e,t){e|=0;var i,n=0,r=0,s=0,o=0;if(h[(t|=0)>>2]=1,i=t+8|0,n=h[t+8>>2],(r=h[t+12>>2]-n|0)>>>0<=4294967291&&(En(i,r+4|0),n=h[i>>2]),n=n+r|0,r=h[e+4>>2],a[0|n]=r,a[n+1|0]=r>>>8,a[n+2|0]=r>>>16,a[n+3|0]=r>>>24,(0|(n=h[e+8>>2]))!=h[e+12>>2])for(r=0;o=(r<<2)+n|0,n=h[t+8>>2],(s=h[t+12>>2]-n|0)>>>0<=4294967291&&(En(i,s+4|0),n=h[i>>2]),n=n+s|0,s=h[o>>2],a[0|n]=s,a[n+1|0]=s>>>8,a[n+2|0]=s>>>16,a[n+3|0]=s>>>24,r=r+1|0,n=h[e+8>>2],r>>>0<h[e+12>>2]-n>>2>>>0;);(n=(n=h[t+12>>2])-(t=h[t+8>>2])|0)>>>0<=4294967291&&(En(i,n+4|0),t=h[i>>2]),t=t+n|0,e=h[e+20>>2],a[0|t]=e,a[t+1|0]=e>>>8,a[t+2|0]=e>>>16,a[t+3|0]=e>>>24},function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s=b(0),o=0,l=0,c=0,u=0,f=0,p=b(0),g=0,v=0,y=0,A=0,E=0,S=0,T=0,x=0,M=0,R=0,P=0,C=0,D=0,O=0;if(h[i>>2]==h[i+4>>2]){if(l=h[n+80>>2],N=R=N-16|0,f=h[e+4>>2],c=h[n+48>>2],n=h[h[n>>2]>>2],u=a[t+24|0],h[(i=R+8|0)>>2]=1065353216,M=i,m[i>>2]=b(-1<<f^-1)/m[e+20>>2],P=gn((0|u)!=(1073741823&u)?-1:u<<2),!(!l|(0|u)<=0))if(T=n+c|0,D=h[t>>2],i=h[t+48>>2],O=h[t+44>>2],C=h[t+40>>2],d[t+84|0])for(y=-2&u,x=1&u,t=0;;){if(E=We(P,(c=h[D>>2])+(n=Zi(C,O,A,o)+i|0)|0,C),p=m[M>>2],g=h[e+8>>2],n=0,v=0,1!=(0|u))for(;c=T+(t<<2)|0,s=b(w(b(b(p*b(m[(S=n<<2)+E>>2]-m[g+S>>2]))+b(.5)))),f=b(_(s))<b(2147483648)?~~s:-2147483648,h[c>>2]=f,s=b(w(b(b(p*b(m[(f=4|S)+E>>2]-m[g+f>>2]))+b(.5)))),f=b(_(s))<b(2147483648)?~~s:-2147483648,h[c+4>>2]=f,n=n+2|0,t=t+2|0,(0|y)!=(0|(v=v+2|0)););if(x&&(c=T+(t<<2)|0,s=b(w(b(b(p*b(m[(n<<=2)+E>>2]-m[n+g>>2]))+b(.5)))),n=b(_(s))<b(2147483648)?~~s:-2147483648,h[c>>2]=n,t=t+1|0),A=n=A+1|0,!((0|l)!=(0|n)|(o=n?o:o+1|0)))break}else for(y=h[t+68>>2],x=-2&u,f=1&u,t=0;;){if(E=We(P,(o=h[D>>2])+(n=Zi(C,O,h[y+(A<<2)>>2],0)+i|0)|0,C),p=m[M>>2],g=h[e+8>>2],n=0,v=0,1!=(0|u))for(;o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(S=n<<2)+E>>2]-m[g+S>>2]))+b(.5)))),c=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=c,s=b(w(b(b(p*b(m[(c=4|S)+E>>2]-m[g+c>>2]))+b(.5)))),c=b(_(s))<b(2147483648)?~~s:-2147483648,h[o+4>>2]=c,n=n+2|0,t=t+2|0,(0|x)!=(0|(v=v+2|0)););if(f&&(o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(n<<=2)+E>>2]-m[n+g>>2]))+b(.5)))),n=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=n,t=t+1|0),(0|l)==(0|(A=A+1|0)))break}return ve(P),N=R+16|0,1}if(N=R=N-16|0,M=h[e+4>>2],l=h[n+48>>2],o=h[h[n>>2]>>2],r=a[t+24|0],h[(n=R+8|0)>>2]=1065353216,c=n,m[n>>2]=b(-1<<M^-1)/m[e+20>>2],P=gn((0|r)!=(1073741823&r)?-1:r<<2),D=h[i>>2],!(!(i=h[i+4>>2]-D|0)|(0|r)<=0))if(T=o+l|0,O=h[t>>2],n=h[t+48>>2],C=h[t+44>>2],A=h[t+40>>2],S=(i>>=2)>>>0>1?i:1,d[t+84|0])for(f=-2&r,M=1&r,t=0;;){if(g=We(P,(o=h[O>>2])+(i=Zi(A,C,h[D+(v<<2)>>2],0)+n|0)|0,A),p=m[c>>2],y=h[e+8>>2],i=0,u=0,1!=(0|r))for(;o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(x=i<<2)+g>>2]-m[y+x>>2]))+b(.5)))),l=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=l,s=b(w(b(b(p*b(m[(l=4|x)+g>>2]-m[y+l>>2]))+b(.5)))),l=b(_(s))<b(2147483648)?~~s:-2147483648,h[o+4>>2]=l,i=i+2|0,t=t+2|0,(0|f)!=(0|(u=u+2|0)););if(M&&(o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(i<<=2)+g>>2]-m[i+y>>2]))+b(.5)))),i=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=i,t=t+1|0),(0|S)==(0|(v=v+1|0)))break}else for(x=h[t+68>>2],f=-2&r,M=1&r,t=0;;){if(E=We(P,(o=h[O>>2])+(i=Zi(A,C,h[x+(h[D+(v<<2)>>2]<<2)>>2],0)+n|0)|0,A),p=m[c>>2],g=h[e+8>>2],i=0,u=0,1!=(0|r))for(;o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(y=i<<2)+E>>2]-m[g+y>>2]))+b(.5)))),l=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=l,s=b(w(b(b(p*b(m[(l=4|y)+E>>2]-m[g+l>>2]))+b(.5)))),l=b(_(s))<b(2147483648)?~~s:-2147483648,h[o+4>>2]=l,i=i+2|0,t=t+2|0,(0|f)!=(0|(u=u+2|0)););if(M&&(o=T+(t<<2)|0,s=b(w(b(b(p*b(m[(i<<=2)+E>>2]-m[i+g>>2]))+b(.5)))),i=b(_(s))<b(2147483648)?~~s:-2147483648,h[o>>2]=i,t=t+1|0),(0|S)==(0|(v=v+1|0)))break}return ve(P),N=R+16|0,1},et,function(e,t){t|=0;var i,n,r=0,s=0;return N=i=N-16|0,-1!=(0|(n=h[4+(e|=0)>>2]))&&(r=h[t+20>>2],!!h[t+16>>2]&(0|r)>=0|(0|r)>0||(Le(t,h[t+4>>2],h[e+8>>2],h[e+12>>2]),r=h[t+20>>2],!!h[t+16>>2]&(0|r)>=0|(0|r)>0||(r=e+20|0,Le(t,h[t+4>>2],r,r+4|0),r=h[t+20>>2],s=h[t+16>>2],a[i+15|0]=h[e+4>>2],!!s&(0|r)>=0|(0|r)>0||Le(t,h[t+4>>2],i+15|0,i+16|0)))),N=i+16|0,-1!=(0|n)|0},at,$n,function(e,t){return a[24+(t|=0)|0]},function(e){var t=0;return h[(e|=0)>>2]=2012,(t=h[e+16>>2])&&(h[e+20>>2]=t,ve(t)),(t=h[e+4>>2])&&(h[e+8>>2]=t,ve(t)),0|e},gr,function(e,t,i){return t|=0,i|=0,h[32+(e|=0)>>2]=i,h[e+28>>2]=t,1},Me,function(e,t){t|=0;var i=0;return 0|Rr[h[h[(e|=0)>>2]+36>>2]](e,t)&&0|Rr[h[h[e>>2]+40>>2]](e,t)&&(i=0|Rr[h[h[e>>2]+44>>2]](e)),0|i},function(e,t){return t|=0,h[h[4+(e|=0)>>2]+(t<<2)>>2]},function(e){return h[8+(e|=0)>>2]-h[e+4>>2]>>2},Zn,tr,Tr,er,hr,Yt,function(e){ve(Yt(e|=0))},function(e,t){e|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0;N=i=N-704|0,b=1;e:{t:{i:{if(!(f[38+(t|=0)>>1]<515||(b=0,(0|(n=h[t+20>>2]))>=(0|(s=h[t+12>>2]))&(r=h[t+16>>2])>>>0>=p[t+8>>2]|(0|n)>(0|s)))){if(y=d[r+h[t>>2]|0],n=(r=r+1|0)?n:n+1|0,h[t+16>>2]=r,h[t+20>>2]=n,_=h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+80>>2],n=0|Rr[h[h[e>>2]+24>>2]](e),h[i+696>>2]=0,h[i+688>>2]=0,h[i+692>>2]=0,n){if(n>>>0>=214748365)break i;r=gn(n=v(n,20)),h[i+688>>2]=r,h[i+696>>2]=n+r,E=i,w=xt(r,0,n=v((n-20>>>0)/20|0,20)+20|0)+n|0,h[E+692>>2]=w}n:{if((0|Rr[h[h[e>>2]+24>>2]](e))>0)for(;;){if(n=0|Rr[h[h[e>>2]+20>>2]](e,g),kt(s=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],_),a[s+84|0]=1,h[s+72>>2]=h[s+68>>2],(n=h[s+28>>2])>>>0>9)break n;r:{a:{s:{if(!(42&(r=1<<n))){if(84&r)break r;if(9!=(0|n))break n;if(n=a[s+24|0],r=tn(i),o=n,n=v(n,h[3409]),fn(r,h[s+56>>2],o,6,0,n,n>>31),n=Nt(s=gn(96),r),h[i+656>>2]=s,a[n+84|0]=1,h[n+72>>2]=h[n+68>>2],kt(n,_),(n=h[e+64>>2])>>>0>=p[e+68>>2])break s;r=h[i+656>>2],h[i+656>>2]=0,h[n>>2]=r,r=n+4|0,h[e+64>>2]=r;break a}if(r=0,a[s+24|0]<=0)break r;for(;;){if((n=h[e+52>>2])>>>0<(o=h[e+56>>2])>>>0)h[n>>2]=0,h[e+52>>2]=n+4;else{if((n=1+(u=(m=n-(l=h[e+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(A=u<<2,u=(o=o-l|0)>>1,o=o>>>0<2147483644?n>>>0>u>>>0?n:u:1073741823){if(o>>>0>=1073741824)break e;n=gn(o<<2)}else n=0;h[(u=A+n|0)>>2]=0,(0|m)>0&&We(n,l,m),h[e+56>>2]=n+(o<<2),h[e+52>>2]=u+4,h[e+48>>2]=n,l&&ve(l)}if(!((0|(r=r+1|0))<a[s+24|0]))break}break r}r=0;s:{o:{l:{if(s=h[e+60>>2],(n=1+(l=h[e+64>>2]-s>>2)|0)>>>0<1073741824){if(o=(s=h[e+68>>2]-s|0)>>1,s=s>>>0<2147483644?n>>>0>o>>>0?n:o:1073741823){if(s>>>0>=1073741824)break l;r=gn(s<<2)}if(o=h[i+656>>2],h[i+656>>2]=0,h[(n=(l<<2)+r|0)>>2]=o,l=(s<<2)+r|0,o=n+4|0,(0|(r=h[e+64>>2]))==(0|(s=h[e+60>>2])))break o;for(;m=h[(r=r-4|0)>>2],h[r>>2]=0,h[(n=n-4|0)>>2]=m,(0|r)!=(0|s););if(h[e+68>>2]=l,r=h[e+64>>2],h[e+64>>2]=o,s=h[e+60>>2],h[e+60>>2]=n,(0|r)==(0|s))break s;for(;n=h[(r=r-4|0)>>2],h[r>>2]=0,n&&ji(n),(0|r)!=(0|s););break s}vr(),x()}Qi(1336),x()}h[e+68>>2]=l,h[e+64>>2]=o,h[e+60>>2]=n}s&&ve(s),r=h[e+64>>2]}s=h[r-4>>2],n=h[i+656>>2],h[i+656>>2]=0,n&&ji(n)}if(r=(n=(l=h[s+28>>2])-1|0)>>>0<=10?h[13616+(n<<2)>>2]:-1,n=h[i+688>>2]+v(g,20)|0,o=a[s+24|0],h[n+16>>2]=o,h[n+12>>2]=(0|r)>0?r:0,h[n+8>>2]=l,h[n+4>>2]=c,h[n>>2]=s,c=o+c|0,g=g+1|0,!((0|Rr[h[h[e>>2]+24>>2]](e))>(0|g)))break}e=yt(i+656|0,i+688|0);r:{a:{s:switch(0|y){case 0:if(t=z(n=Qe(i,c),t,e),Xt(n),t)break a;break r;case 1:if(t=H(n=Qe(i,c),t,e),Xt(n),t)break a;break r;case 2:if(t=j(n=Ze(i,c),t,e),Qt(n),t)break a;break r;case 3:if(t=Y(n=Ze(i,c),t,e),Qt(n),t)break a;break r;case 4:if(t=W(n=K(i,c),t,e),qt(n),t)break a;break r;case 5:if(t=X(n=K(i,c),t,e),qt(n),t)break a;break r;case 6:break s;default:break r}if(t=Z(n=K(i,c),t,e),qt(n),!t)break r}b=1}(t=h[e+16>>2])&&(h[e+20>>2]=t,ve(t)),(t=h[e>>2])&&(h[e+4>>2]=t,ve(t))}(e=h[i+688>>2])&&(h[i+692>>2]=e,ve(e))}return N=i+704|0,0|b}vr(),x()}vr(),x()}Qi(1336),x()},function(e,t){e|=0,t|=0;var i,n,r=0,l=0,c=0,u=0,g=0,_=0,y=0,A=0,E=0,w=0,S=0,T=b(0),M=0,R=0,P=0;N=i=N-720|0;e:{t:{i:{n:{r:{a:{s:{o:{if(f[t+38>>1]>=515){if(h[i+680>>2]=0,h[i+672>>2]=0,h[i+676>>2]=0,(0|Rr[h[h[e>>2]+24>>2]](e))<=0)break n;for(;;){if(r=0|Rr[h[h[e>>2]+20>>2]](e,A),l=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],9==h[l+28>>2]){if(c=h[i+672>>2],(r=h[i+676>>2]-c>>2)>>>0<(u=a[l+24|0])>>>0?ei(i+672|0,u-r|0):r>>>0<=u>>>0||(h[i+676>>2]=c+(u<<2)),g=0,r=h[t+20>>2],_=(y=h[t+16>>2])+(l=u<<2)|0,c=h[t+12>>2],r=l>>>0>_>>>0?r+1|0:r,_>>>0>p[t+8>>2]&(0|c)<=(0|r)|(0|r)>(0|c))break t;if(We(h[i+672>>2],y+h[t>>2]|0,l),r=h[t+20>>2],r=(c=l+h[t+16>>2]|0)>>>0<l>>>0?r+1|0:r,h[t+16>>2]=c,h[t+20>>2]=r,y=E=h[t+12>>2],l=(_=c+4|0)>>>0<4?r+1|0:r,(w=h[t+8>>2])>>>0<_>>>0&(0|l)>=(0|y)|(0|l)>(0|y))break t;if(S=h[t>>2],y=d[0|(y=S+c|0)]|d[y+1|0]<<8|d[y+2|0]<<16|d[y+3|0]<<24,h[t+16>>2]=_,h[t+20>>2]=l,(0|l)>=(0|E)&_>>>0>=w>>>0|(0|l)>(0|E))break t;if(l=d[_+S|0],r=(c=c+5|0)>>>0<5?r+1|0:r,h[t+16>>2]=c,h[t+20>>2]=r,l>>>0>31)break t;if(n=y,s[2]=n,T=o[2],h[i+20>>2]=-1,h[i+16>>2]=1140,h[i+32>>2]=0,h[i+36>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,r=i+16|0,c=h[i+672>>2],(_=l-1|0)>>>0<=29&&(h[r+4>>2]=l,Vt(r+8|0,c,c+(u<<2)|0),m[r+20>>2]=T),!(_>>>0>=30)&&Fi(i+16|0,h[h[e+60>>2]+((h[e+40>>2]-h[e+36>>2]|0)/24<<2)>>2])){if((0|(r=h[e+40>>2]))==h[e+44>>2]){r=0;l:{c:{u:{h:{if((l=1+(c=((u=h[e+40>>2])-(g=h[e+36>>2])|0)/24|0)|0)>>>0<178956971){if(y=(_=(h[e+44>>2]-g|0)/24|0)<<1,_=_>>>0<89478485?l>>>0>y>>>0?l:y:178956970){if(_>>>0>=178956971)break h;r=gn(v(_,24))}if(c=v(c,24)+r|0,h[c>>2]=1140,l=h[i+20>>2],h[c+16>>2]=0,h[c+8>>2]=0,h[c+12>>2]=0,h[c+4>>2]=l,E=h[i+24>>2],l=h[i+28>>2]-E|0){if((0|l)<0)break u;y=gn(l),h[c+8>>2]=y,h[c+16>>2]=y+(l>>2<<2),R=c,P=We(y,E,l)+l|0,h[R+12>>2]=P}if(r=v(_,24)+r|0,m[c+20>>2]=m[i+36>>2],l=c+24|0,(0|u)==(0|g))break c;for(;h[(c=c-24|0)>>2]=1140,h[c+4>>2]=h[u-20>>2],_=u-16|0,h[c+8>>2]=h[_>>2],h[c+12>>2]=h[u-12>>2],y=u-8|0,h[c+16>>2]=h[y>>2],h[y>>2]=0,h[_>>2]=0,h[_+4>>2]=0,m[c+20>>2]=m[u-4>>2],(0|g)!=(0|(u=u-24|0)););if(h[e+44>>2]=r,g=h[e+40>>2],h[e+40>>2]=l,u=h[e+36>>2],h[e+36>>2]=c,(0|u)==(0|g))break l;for(;Rr[h[h[(g=g-24|0)>>2]>>2]](g),(0|u)!=(0|g););break l}vr(),x()}Qi(1336),x()}vr(),x()}h[e+44>>2]=r,h[e+40>>2]=l,h[e+36>>2]=c}u&&ve(u)}else{if(h[r>>2]=1140,l=h[i+20>>2],h[r+16>>2]=0,h[r+8>>2]=0,h[r+12>>2]=0,h[r+4>>2]=l,u=h[i+28>>2]-h[i+24>>2]|0){if((0|u)<0)break o;l=gn(u),h[r+8>>2]=l,h[r+12>>2]=l,h[r+16>>2]=l+(u>>2<<2),c=h[i+24>>2],(0|(u=h[i+28>>2]-c|0))>0&&(l=We(l,c,u)+u|0),h[r+12>>2]=l}m[r+20>>2]=m[i+36>>2],h[e+40>>2]=r+24}g=1}if(h[i+16>>2]=1140,(r=h[i+24>>2])&&(h[i+28>>2]=r,ve(r)),!g)break i}if(A=A+1|0,!((0|Rr[h[h[e>>2]+24>>2]](e))>(0|A)))break}break n}if(_=0|Rr[h[h[e>>2]+24>>2]](e),h[i+712>>2]=0,h[i+704>>2]=0,h[i+708>>2]=0,_){if(_>>>0>=214748365)break s;for(l=gn(r=v(_,20)),h[i+704>>2]=l,h[i+712>>2]=r+l,R=i,P=xt(l,0,r=v((r-20>>>0)/20|0,20)+20|0)+r|0,h[R+708>>2]=P;;){if(r=0|Rr[h[h[e>>2]+20>>2]](e,A),l=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],(y=(0|(r=(r=(u=h[l+28>>2])-1|0)>>>0<=10?h[13616+(r<<2)>>2]:-1))>0?r:0)>>>0>4)break r;if(r=h[i+704>>2]+v(A,20)|0,E=a[l+24|0],h[r+16>>2]=E,h[r+12>>2]=y,h[r+8>>2]=u,h[r+4>>2]=c,h[r>>2]=l,c=c+E|0,(0|_)==(0|(A=A+1|0)))break}}if(r=0|Rr[h[h[e>>2]+20>>2]](e,0),w=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],a[w+84|0]=1,h[w+72>>2]=h[w+68>>2],(0|(r=u=h[t+12>>2]))<=(0|(l=h[t+20>>2]))&(y=h[t+8>>2])>>>0<=(A=h[t+16>>2])>>>0|(0|r)<(0|l))break r;S=h[t>>2],M=d[S+A|0],r=l,r=(E=A+1|0)?r:r+1|0,h[t+16>>2]=E,h[t+20>>2]=r;l:switch(0|M){case 0:if(!(y>>>0<=E>>>0&(0|r)>=(0|u)|(0|r)>(0|u)||(r=l,r=(e=A+2|0)>>>0<2?r+1|0:r,h[t+16>>2]=e,h[t+20>>2]=r,r=l,(l=A+6|0)>>>0>y>>>0&(0|(r=l>>>0<6?r+1|0:r))>=(0|u)|(0|r)>(0|u)))){e=d[0|(e=e+S|0)]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=r,kt(w,e),h[20+(g=i+672|0)>>2]=0,h[g+12>>2]=0,h[g+16>>2]=0,h[g>>2]=0,h[g+4>>2]=0,h[g+20>>2]=e,A=yt(i+16|0,i+704|0),u=0,N=c=N-32|0,h[c+24>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,y=e=h[t+12>>2],l=r=h[t+20>>2],r=(_=(E=h[t+16>>2])+4|0)>>>0<4?r+1|0:r;c:if(!((w=h[t+8>>2])>>>0<_>>>0&(0|e)<=(0|r)|(0|e)<(0|r))){S=h[t>>2],e=d[0|(e=S+E|0)]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24,h[t+16>>2]=_,h[t+20>>2]=r;u:{switch(e-2|0){case 1:if((0|r)>=(0|y)&_>>>0>=w>>>0|(0|r)>(0|y))break c;if(e=a[_+S|0],r=l,r=(l=E+5|0)>>>0<5?r+1|0:r,h[t+16>>2]=l,h[t+20>>2]=r,h[g+8>>2]=e,1==(0|e)){if(U(g,t,c+16|0))break u;break c}Nn(1943,23,h[3451]);break c;default:Nn(1918,24,h[3451]);break c;case 0:}if(!U(g,t,c+16|0))break c}if(h[c+8>>2]=h[c+16>>2],h[c>>2]=h[c+20>>2],N=e=N-32|0,t=h[g>>2],T=m[g+4>>2],h[(u=e+24|0)>>2]=1065353216,(0|(t=-1<<t^-1))>0&&(m[u>>2]=T/b(0|t)),(0|(g=h[c+8>>2]))!=h[c>>2])for(r=h[A+28>>2];l=h[g>>2],_=h[g+4>>2],T=m[u>>2],m[e+16>>2]=T*b(h[g+8>>2]-t|0),m[e+12>>2]=T*b(_-t|0),m[e+8>>2]=T*b(l-t|0),_=h[A+16>>2],l=h[_>>2],d[l+84|0]||(r=h[h[l+68>>2]+(r<<2)>>2]),y=r,r=h[l+40>>2],We(h[h[l>>2]>>2]+v(y,r)|0,(e+8|0)+(h[_+4>>2]<<2)|0,r),r=h[A+28>>2]+1|0,h[A+28>>2]=r,(0|(g=g+12|0))!=h[c>>2];);N=e+32|0,u=1}if((e=h[c+16>>2])&&(h[c+20>>2]=e,ve(e)),N=c+32|0,xn(A),g=1,u)break r}g=0;break r;case 1:break l;default:break r}if(y>>>0<=E>>>0&(0|r)>=(0|u)|(0|r)>(0|u))break r;if(E=d[E+S|0],r=l,r=(w=A+2|0)>>>0<2?r+1|0:r,h[t+16>>2]=w,h[t+20>>2]=r,E>>>0>=7){h[i>>2]=E,Gt(1795,i);break r}if(r=l,A=l=A+6|0,l>>>0>y>>>0&(0|(r=l>>>0<6?r+1|0:r))>=(0|u)|(0|r)>(0|u))break r;if(l=d[0|(l=w+S|0)]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+16>>2]=A,h[t+20>>2]=r,_)for(A=0;r=0|Rr[h[h[e>>2]+20>>2]](e,A),kt(r=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(r<<2)>>2],l),a[r+84|0]=1,h[r+72>>2]=h[r+68>>2],(0|_)!=(0|(A=A+1|0)););e=yt(i+672|0,i+704|0);l:{c:switch(0|E){case 1:if(t=H(r=Qe(i+16|0,c),t,e),Xt(r),!t)break a;break l;case 2:if(t=j(r=Ze(i+16|0,c),t,e),Qt(r),!t)break a;break l;case 3:if(t=Y(r=Ze(i+16|0,c),t,e),Qt(r),!t)break a;break l;case 4:if(t=W(r=K(i+16|0,c),t,e),qt(r),!t)break a;break l;case 5:if(t=X(r=K(i+16|0,c),t,e),qt(r),!t)break a;break l;case 6:if(t=Z(r=K(i+16|0,c),t,e),qt(r),t)break l;break a;case 0:break c;default:break a}if(t=z(r=Qe(i+16|0,c),t,e),Xt(r),!t)break a}xn(e),g=1;break r}vr(),x()}vr(),x()}xn(e)}if(!(e=h[i+704>>2]))break e;h[i+708>>2]=e,ve(e);break e}if(h[e+52>>2]==h[e+48>>2]){g=1;break t}for(A=0;;){if(!bi(1,i+16|0,t))break i;if(g=1,r=h[e+48>>2],l=h[i+16>>2],h[r+(A<<2)>>2]=l>>>1^0-(1&l),!((A=A+1|0)>>>0<h[e+52>>2]-r>>2>>>0))break}break t}g=0}(e=h[i+672>>2])&&(h[i+676>>2]=e,ve(e))}return N=i+720|0,0|g},function(e){e|=0;var t,i=0,n=0,r=0,s=0,o=0,l=0,c=0,g=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=b(0),k=0;N=t=N-32|0;e:if(h[e+60>>2]!=h[e- -64>>2]|h[e+48>>2]!=h[e+52>>2]){if(_=1,!((0|Rr[h[h[e>>2]+24>>2]](e))<=0)){t:{i:{for(;;){n:{n=0|Rr[h[h[e>>2]+20>>2]](e,k);r:{a:{s:switch(o=h[h[h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]+8>>2]+(n<<2)>>2],h[o+28>>2]-1|0){case 8:break a;case 0:case 2:case 4:break s;default:break r}if(n=a[o+24|0],h[t+24>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,n){if((0|n)<0)break n;if(_=gn(n<<=2),h[t+16>>2]=_,i=n+_|0,h[t+24>>2]=i,A=0,xt(_,0,n),h[t+20>>2]=i,n=a[o+24|0],h[t+8>>2]=0,h[t>>2]=0,h[t+4>>2]=0,n){if((0|n)<0)break i;A=gn(n<<=2),h[t>>2]=A,xt(A,0,n)}}else _=0,h[t>>2]=0,A=0;s:{o:switch(h[o+28>>2]-1|0){case 4:s=0,c=0,E=0,n=0,N=g=N-16|0,r=a[o+24|0],h[g+8>>2]=0,h[g>>2]=0,h[g+4>>2]=0;l:{c:{if(r){if((0|r)<0)break c;c=gn(i=r<<2),h[g>>2]=c,h[g+8>>2]=i+c,xt(c,0,i),xt(s=gn(i),0,i)}if(!h[o+80>>2])break l;for(;;){if(C=h[o>>2],M=h[C>>2],i=h[o+40>>2],y=We(c,M+(y=h[o+48>>2]+Zi(i,h[o+44>>2],E,n)|0)|0,i),!((0|(w=r<<24>>24))<=0)){if(S=h[e+48>>2],l=0,1!=(255&r))for(D=-2&w,r=0;h[(T=l<<2)+s>>2]=h[S+(l+P<<2)>>2]+h[y+T>>2],h[(M=(T=1|l)<<2)+s>>2]=h[S+(P+T<<2)>>2]+h[y+M>>2],l=l+2|0,(0|D)!=(0|(r=r+2|0)););1&w&&(h[(r=l<<2)+s>>2]=h[S+(l+P<<2)>>2]+h[r+y>>2])}if(We(h[C>>2]+v(i,E)|0,s,i),E=i=E+1|0,!(n=i?n:n+1|0)&p[o+80>>2]<=i>>>0|n)break l;r=d[o+24|0]}}vr(),x()}s&&ve(s),c&&ve(c),N=g+16|0;break s;case 2:s=0,c=0,E=0,n=0,N=g=N-16|0,r=a[o+24|0],h[g+8>>2]=0,h[g>>2]=0,h[g+4>>2]=0;l:{c:{if(r){if((0|r)<0)break c;c=gn(i=r<<1),h[g>>2]=c,h[g+8>>2]=i+c,xt(c,0,i),xt(s=gn(i),0,i)}if(!h[o+80>>2])break l;for(;;){if(C=h[o>>2],M=h[C>>2],i=h[o+40>>2],y=We(c,M+(y=h[o+48>>2]+Zi(i,h[o+44>>2],E,n)|0)|0,i),!((0|(w=r<<24>>24))<=0)){if(S=h[e+48>>2],l=0,1!=(255&r))for(D=-2&w,r=0;u[(T=l<<1)+s>>1]=f[y+T>>1]+f[S+(l+P<<2)>>1],u[(M=(T=1|l)<<1)+s>>1]=f[y+M>>1]+f[S+(P+T<<2)>>1],l=l+2|0,(0|D)!=(0|(r=r+2|0)););1&w&&(u[(r=l<<1)+s>>1]=f[r+y>>1]+f[S+(l+P<<2)>>1])}if(We(h[C>>2]+v(i,E)|0,s,i),E=i=E+1|0,!(n=i?n:n+1|0)&p[o+80>>2]<=i>>>0|n)break l;r=d[o+24|0]}}vr(),x()}s&&ve(s),c&&ve(c),N=g+16|0;break s;case 0:break o;default:break s}s=0,l=0,E=0,n=0,N=c=N-16|0,i=a[o+24|0],h[c+8>>2]=0,h[c>>2]=0,h[c+4>>2]=0;o:{l:{if(i){if((0|i)<0)break l;l=gn(i),h[c>>2]=l,h[c+8>>2]=i+l,xt(l,0,i),xt(s=gn(i),0,i)}if(h[o+80>>2])for(;;){if(M=h[h[o>>2]>>2],g=h[o+40>>2],i=We(l,M+(i=h[o+48>>2]+Zi(g,h[o+44>>2],E,n)|0)|0,g),!((0|(y=a[o+24|0]))<=0)){if(S=h[e+48>>2],r=0,1!=(0|y))for(C=-2&y,g=0;a[r+s|0]=d[i+r|0]+d[S+(r+P<<2)|0],a[(w=1|r)+s|0]=d[i+w|0]+d[S+(w+P<<2)|0],r=r+2|0,(0|C)!=(0|(g=g+2|0)););1&y&&(a[r+s|0]=d[i+r|0]+d[S+(r+P<<2)|0])}if(i=h[o+40>>2],We(h[h[o>>2]>>2]+v(i,E)|0,s,i),E=i=E+1|0,!(!(n=i?n:n+1|0)&p[o+80>>2]>i>>>0))break}s&&ve(s),l&&ve(l),N=c+16|0;break o}vr(),x()}}if(P=a[o+24|0]+P|0,n=1,A&&ve(A),_&&ve(_),n)break r;_=0;break e}if(l=h[h[e+60>>2]+(R<<2)>>2],s=h[e+36>>2],_=h[40+(0|Rr[h[h[e>>2]+28>>2]](e))>>2],h[t>>2]=h[o+56>>2],n=gn(32),h[t+16>>2]=n,h[t+20>>2]=24,h[t+24>>2]=-2147483616,a[n+24|0]=0,i=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,r=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[n+16|0]=r,a[n+17|0]=r>>>8,a[n+18|0]=r>>>16,a[n+19|0]=r>>>24,a[n+20|0]=i,a[n+21|0]=i>>>8,a[n+22|0]=i>>>16,a[n+23|0]=i>>>24,i=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,r=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[n+8|0]=r,a[n+9|0]=r>>>8,a[n+10|0]=r>>>16,a[n+11|0]=r>>>24,a[n+12|0]=i,a[n+13|0]=i>>>8,a[n+14|0]=i>>>16,a[n+15|0]=i>>>24,i=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,r=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|n]=r,a[n+1|0]=r>>>8,a[n+2|0]=r>>>16,a[n+3|0]=r>>>24,a[n+4|0]=i,a[n+5|0]=i>>>8,a[n+6|0]=i>>>16,a[n+7|0]=i>>>24,i=Rt(_,t,t+16|0),a[t+27|0]<0&&ve(h[t+16>>2]),n=R+1|0,i)Ne(o,l);else{if(c=s+v(R,24)|0,s=h[c+4>>2],r=(R=a[o+24|0])<<2,i=gn((0|R)!=(1073741823&R)?-1:r),h[t+16>>2]=1065353216,O=m[c+20>>2],(0|(s=-1<<s^-1))>0&&(m[t+16>>2]=O/b(0|s)),(0|s)<=0)break t;if(h[l+80>>2])if((0|R)<=0)for(A=0,_=0;We(h[h[o+64>>2]>>2]+_|0,i,r),_=r+_|0,(A=A+1|0)>>>0<p[l+80>>2];);else for(y=h[h[l>>2]>>2]+h[l+48>>2]|0,C=-2&R,D=1&R,g=0,s=0,_=0;;){if(E=h[c+8>>2],O=m[t+16>>2],A=0,S=0,1!=(0|R))for(;T=y+(_<<2)|0,m[(w=A<<2)+i>>2]=b(O*b(h[T>>2]))+m[E+w>>2],m[(w|=4)+i>>2]=b(O*b(h[T+4>>2]))+m[E+w>>2],A=A+2|0,_=_+2|0,(0|C)!=(0|(S=S+2|0)););if(D&&(m[(A<<=2)+i>>2]=b(O*b(h[y+(_<<2)>>2]))+m[E+A>>2],_=_+1|0),We(h[h[o+64>>2]>>2]+s|0,i,r),s=r+s|0,!((g=g+1|0)>>>0<p[l+80>>2]))break}ve(i)}R=n}if(_=1,k=k+1|0,(0|Rr[h[h[e>>2]+24>>2]](e))>(0|k))continue;break e}break}vr(),x()}vr(),x()}ve(i),_=0}}else _=1;return N=t+32|0,0|_},function(e){var t;return h[(e|=0)>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),0|e},function(e){var t;h[(e|=0)>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),ve(e)},yn,function(e,t){return t|=0,h[12+(e|=0)>>2]=-1,h[e+8>>2]=t,1},function(e,t,i){t|=0,i|=0;var n,r=0;return n=h[8+(e|=0)>>2],a[n+24|0]<=0||kt(n,h[t+4>>2]-h[t>>2]>>2)&&(r=0|Rr[h[h[e>>2]+32>>2]](e,t,i)),0|r},function(e,t,i){return 1},er,function(e,t){e|=0;var i=0,n=0,r=0,a=0,s=0,o=0;a=1;e:if(!((0|Rr[h[h[(t|=0)>>2]+20>>2]](t))<=0))for(;;){if(a=0,-1==(0|(i=dn(h[h[e+4>>2]+4>>2],0|Rr[h[h[t>>2]+24>>2]](t,s)))))break e;r=h[e+4>>2];t:{if(d[r+36|0]<=1){if(0|Rr[h[h[t>>2]+28>>2]](t,h[h[h[r+4>>2]+8>>2]+(i<<2)>>2]))break t;break e}if(n=0,(0|i)<0||(o=h[r+4>>2],h[o+12>>2]-h[o+8>>2]>>2<=(0|i)||(n=h[h[r+8>>2]+(h[h[r+20>>2]+(i<<2)>>2]<<2)>>2],n=0|Rr[h[h[n>>2]+32>>2]](n,i))),!n)break e;if(!(0|Rr[h[h[t>>2]+28>>2]](t,n)))break e}if(a=1,s=s+1|0,!((0|Rr[h[h[t>>2]+20>>2]](t))>(0|s)))break}return 0|a},function(e,t,i){e|=0,i|=0;var n,r,a=0,s=0,o=0,l=0,c=0,u=0,d=0,f=0;if(a=h[(t|=0)>>2],t=h[t+4>>2],r=gn((0|(n=h[h[e+8>>2]+40>>2]))>=0?n:-1),o=1,!((0|(l=t-a|0))<=0||(t=0,o=0,a=0+h[i+20>>2]|0,a=(s=n+(c=h[i+16>>2])|0)>>>0<n>>>0?a+1|0:a,u=s,s=h[i+12>>2],u>>>0>p[i+8>>2]&(0|s)<=(0|a)|(0|a)>(0|s)))){for(o=(0|(d=l>>2))>1?d:1;s=We(r,c+h[i>>2]|0,n),h[i+16>>2]=u,h[i+20>>2]=a,We(h[h[h[e+8>>2]+64>>2]>>2]+t|0,s,n),(0|o)!=(0|(f=f+1|0))&&(t=t+n|0,a=0+h[i+20>>2]|0,a=(s=n+(c=h[i+16>>2])|0)>>>0<n>>>0?a+1|0:a,u=s,l=s,(0|(s=h[i+12>>2]))>=(0|a)&p[i+8>>2]>=l>>>0|(0|a)<(0|s)););o=(0|f)>=(0|d)}return ve(r),0|o},function(e){var t,i=0,n=0;if(h[(e|=0)>>2]=2356,i=h[e+60>>2],h[e+60>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(i=h[e+48>>2])&&(h[e+52>>2]=i,ve(i)),t=h[e+36>>2]){if((0|(n=h[e+40>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+36>>2]}h[e+40>>2]=t,ve(i)}return h[e>>2]=2012,(i=h[e+16>>2])&&(h[e+20>>2]=i,ve(i)),(i=h[e+4>>2])&&(h[e+8>>2]=i,ve(i)),0|e},function(e){var t,i=0,n=0;if(h[(e|=0)>>2]=2356,i=h[e+60>>2],h[e+60>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(i=h[e+48>>2])&&(h[e+52>>2]=i,ve(i)),t=h[e+36>>2]){if((0|(n=h[e+40>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+36>>2]}h[e+40>>2]=t,ve(i)}h[e>>2]=2012,(i=h[e+16>>2])&&(h[e+20>>2]=i,ve(i)),(i=h[e+4>>2])&&(h[e+8>>2]=i,ve(i)),ve(e)},function(e,t){var i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0;if(Me(e|=0,t|=0)){if(l=e+36|0,(s=0|Rr[h[h[e>>2]+24>>2]](e))>>>0>(i=(n=h[e+40>>2])-(r=h[e+36>>2])>>2)>>>0)St(l,s-i|0);else if(!(i>>>0<=s>>>0)){if((0|(r=r+(s<<2)|0))!=(0|n))for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|n)!=(0|r););h[e+40>>2]=r}e:if((0|s)<=0)r=0;else if(r=1,!((0|(i=h[t+20>>2]))>=(0|(n=h[t+12>>2]))&(a=h[t+16>>2])>>>0>=p[t+8>>2]|(0|i)>(0|n)))for(n=0;;){if(o=d[a+h[t>>2]|0],i=(a=a+1|0)?i:i+1|0,h[t+16>>2]=a,h[t+20>>2]=i,a=0|Rr[h[h[e>>2]+48>>2]](e,o),c=(o=n<<2)+h[e+36>>2]|0,i=h[c>>2],h[c>>2]=a,i&&Rr[h[h[i>>2]+4>>2]](i),!(i=h[h[l>>2]+o>>2]))break e;if(f=i,m=0|Rr[h[h[e>>2]+28>>2]](e),g=0|Rr[h[h[e>>2]+20>>2]](e,n),u=h[h[i>>2]+8>>2],!(0|Rr[u](0|f,0|m,0|g)))break e;if(r=(0|s)>(0|(n=n+1|0)),(0|n)==(0|s))break e;if(a=h[t+16>>2],i=h[t+20>>2],o=h[t+12>>2],!(a>>>0<p[t+8>>2]&(0|i)<=(0|o)|(0|i)<(0|o)))break}e=!r}else e=0;return 0|e},function(e,t){t|=0;var i=0,n=0,r=0,a=0,s=0;if((i=h[60+(e|=0)>>2])&&(h[i+4>>2]=e+48,0|Rr[h[h[i>>2]+12>>2]](i))){e:if(!((0|(i=0|Rr[h[h[e>>2]+24>>2]](e)))<=0)){for(;;){if(a=h[4+(0|Rr[h[h[e>>2]+28>>2]](e))>>2],s=0|Rr[h[h[e>>2]+20>>2]](e,n),r=h[e+60>>2],0|Rr[h[h[r>>2]+8>>2]](r,h[h[a+8>>2]+(s<<2)>>2])){if((0|i)!=(0|(n=n+1|0)))continue;break e}break}return 0}n=0,0|Rr[h[h[e>>2]+36>>2]](e,t)&&0|Rr[h[h[e>>2]+40>>2]](e,t)&&(n=0|Rr[h[h[e>>2]+44>>2]](e))}return 0|n},function(e,t){t|=0;var i,n=0;return i=h[16+(e|=0)>>2],n=0,h[e+20>>2]-i>>2<=(0|t)||(n=0,(0|(t=h[(t<<2)+i>>2]))<0||(n=Ht(h[h[e+36>>2]+(t<<2)>>2]))),0|n},function(e,t){t|=0;var i,n=0,r=0,a=0,s=0;if(n=1,!((0|(i=0|Rr[h[h[(e|=0)>>2]+24>>2]](e)))<=0)&&(r=h[h[e+36>>2]>>2],a=e+48|0,n=0,0|Rr[h[h[r>>2]+16>>2]](r,a,t))){for(r=1;(0|i)!=(0|(n=r))&&(r=n+1|0,s=h[h[e+36>>2]+(n<<2)>>2],0|Rr[h[h[s>>2]+16>>2]](s,a,t)););n=(0|n)>=(0|i)}return 0|n},function(e,t){t|=0;var i,n=0,r=0,a=0,s=0;if(n=1,!((0|(i=0|Rr[h[h[(e|=0)>>2]+24>>2]](e)))<=0)&&(r=h[h[e+36>>2]>>2],a=e+48|0,n=0,0|Rr[h[h[r>>2]+20>>2]](r,a,t))){for(r=1;(0|i)!=(0|(n=r))&&(r=n+1|0,s=h[h[e+36>>2]+(n<<2)>>2],0|Rr[h[h[s>>2]+20>>2]](s,a,t)););n=(0|n)>=(0|i)}return 0|n},function(e){var t,i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,p=0;N=t=N-16|0,c=1;e:if((0|(i=0|Rr[h[h[(e|=0)>>2]+24>>2]](e)))<=0)c=0;else for(p=e+48|0;;){if(h[40+(0|Rr[h[h[e>>2]+28>>2]](e))>>2]&&(l=h[(u=o<<2)+h[e+36>>2]>>2],n=h[l+8>>2],(f=Ht(l))&&(l=h[40+(0|Rr[h[h[e>>2]+28>>2]](e))>>2],h[t+12>>2]=h[n+56>>2],n=gn(32),h[t>>2]=n,h[t+4>>2]=24,h[t+8>>2]=-2147483616,a[n+24|0]=0,r=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,s=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[n+16|0]=s,a[n+17|0]=s>>>8,a[n+18|0]=s>>>16,a[n+19|0]=s>>>24,a[n+20|0]=r,a[n+21|0]=r>>>8,a[n+22|0]=r>>>16,a[n+23|0]=r>>>24,r=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,s=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[n+8|0]=s,a[n+9|0]=s>>>8,a[n+10|0]=s>>>16,a[n+11|0]=s>>>24,a[n+12|0]=r,a[n+13|0]=r>>>8,a[n+14|0]=r>>>16,a[n+15|0]=r>>>24,r=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,s=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|n]=s,a[n+1|0]=s>>>8,a[n+2|0]=s>>>16,a[n+3|0]=s>>>24,a[n+4|0]=r,a[n+5|0]=r>>>8,a[n+6|0]=r>>>16,a[n+7|0]=r>>>24,n=Rt(l,t+12|0,t),a[t+11|0]<0&&ve(h[t>>2]),n)))Ne(h[h[h[e+36>>2]+u>>2]+8>>2],f);else if(n=h[h[e+36>>2]+(o<<2)>>2],!(0|Rr[h[h[n>>2]+24>>2]](n,p)))break e;if(c=(0|i)>(0|(o=o+1|0)),(0|o)==(0|i))break}return N=t+16|0,1&(-1^c)},function(e,t){switch(e|=0,e=0,0|(t|=0)){case 0:return e=gn(20),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,0|e;case 1:return e=gn(24),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,0|e;case 2:return e=gn(48),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,h[e+32>>2]=0,h[e+36>>2]=0,h[e+28>>2]=-1,h[e+24>>2]=1140,h[e>>2]=11076,h[e+40>>2]=0,h[e+44>>2]=0,0|e;case 3:e=gn(32),h[e+12>>2]=-1,h[e+16>>2]=0,h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=2260,h[e+20>>2]=0,h[e>>2]=2476,h[e+28>>2]=-1,h[e+24>>2]=1032,h[e>>2]=7056}return 0|e},ln,hn,yn,function(e,t){t|=0;var i,n=0;return(i=h[4+(e|=0)>>2])&&(n=1,d[i+36|0]<2)||(n=0|Rr[h[h[e>>2]+48>>2]](e,h[t+4>>2]-h[t>>2]>>2)),0|n},function(e,t,i){e|=0,t|=0;var n,r,s=0,o=0,l=0,c=0,u=0,f=0,p=0;e:if(!((0|(s=n=h[12+(i|=0)>>2]))<=(0|(o=h[i+20>>2]))&(r=h[i+8>>2])>>>0<=(l=h[i+16>>2])>>>0|(0|s)<(0|o))){if(u=h[i>>2],f=a[u+l|0],s=o,s=(c=l+1|0)?s:s+1|0,h[i+16>>2]=c,h[i+20>>2]=s,-2!=(0|f)){if((0|s)>=(0|n)&c>>>0>=r>>>0|(0|s)>(0|n))break e;if(s=a[c+u|0],o=(l=l+2|0)>>>0<2?o+1|0:o,h[i+16>>2]=l,h[i+20>>2]=o,(s-4&255)>>>0<251)break e;o=0|Rr[h[h[e>>2]+40>>2]](e,f,s),s=h[e+20>>2],h[e+20>>2]=o,s&&Rr[h[h[s>>2]+4>>2]](s)}(!(s=h[e+20>>2])||0|Rr[h[h[e>>2]+28>>2]](e,s))&&0|Rr[h[h[e>>2]+36>>2]](e,t,i)&&(!(i=h[e+4>>2])|d[i+36|0]>1||0|Rr[h[h[e>>2]+48>>2]](e,h[t+4>>2]-h[t>>2]>>2))&&(p=1)}return 0|p},Te,function(e,t,i){e|=0,t|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0,d=0,p=0,m=0,g=0,v=0;if(N=n=N-48|0,1==(0|(i|=0))){o=h[e+4>>2],u=h[e+12>>2],h[n+40>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,s=n+8|0;e:if(-2!=(0|t)){if(m=h[h[h[o+4>>2]+8>>2]+(u<<2)>>2],1==(0|Rr[h[h[o>>2]+8>>2]](o))){if(p=65535&((e=f[o+36>>1])<<8|e>>>8),e=0,N=d=N-32|0,l=h[h[h[o+4>>2]+8>>2]+(u<<2)>>2],!(1!=(0|Rr[h[h[o>>2]+8>>2]](o))|t-1>>>0>5||!(r=0|Rr[h[h[o>>2]+36>>2]](o))|!(c=0|Rr[h[h[o>>2]+44>>2]](o,u))))if(i=0|Rr[h[h[o>>2]+40>>2]](o,u)){e=h[o+44>>2],h[d+12>>2]=i,h[d+8>>2]=e,h[d+20>>2]=c,h[d+16>>2]=c+12,o=d+8|0,e=0;t:{i:{n:switch(t-1|0){case 0:if(e=gn(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=2592;break t;case 1:if(e=gn(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=3356;break t;case 3:if(e=gn(112),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=3592,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0;break t;case 2:if(e=gn(92),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=3840,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=p;break t;case 4:if(e=gn(104),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,i=h[o+8>>2],t=h[o+12>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=4068,h[e+52>>2]=i,h[e+56>>2]=t,t=h[o+4>>2],h[e+88>>2]=h[o>>2],h[e+92>>2]=t,t=h[o+12>>2],h[e+96>>2]=h[o+8>>2],h[e+100>>2]=t;break t;case 5:break n;default:break t}e=gn(128),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t;n:{r:{if(i=h[s+28>>2]-h[s+24>>2]|0){if((0|i)<0)break r;t=gn(i),h[e+32>>2]=t,h[e+36>>2]=t,h[e+40>>2]=t+(i>>2<<2),i=h[s+24>>2],(0|(r=h[s+28>>2]-i|0))>0&&(t=We(t,i,r)+r|0),h[e+36>>2]=t}h[e>>2]=3244,t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+60>>2]=4932,h[e>>2]=4304,t=h[o+4>>2],h[e+72>>2]=h[o>>2],h[e+76>>2]=t,t=h[o+12>>2],h[e+80>>2]=h[o+8>>2],h[e+84>>2]=t,h[e+104>>2]=1065353216,h[e+108>>2]=-1,h[e+96>>2]=-1,h[e+100>>2]=-1,h[e+88>>2]=1,h[e+92>>2]=-1,h[e+60>>2]=4540,h[e+112>>2]=0,h[e+116>>2]=0,a[e+117|0]=0,a[e+118|0]=0,a[e+119|0]=0,a[e+120|0]=0,a[e+121|0]=0,a[e+122|0]=0,a[e+123|0]=0,a[e+124|0]=0;break n}vr(),x()}break t}vr(),x()}}else{e=h[o+44>>2],h[d+12>>2]=r,h[d+8>>2]=e,h[d+20>>2]=c,h[d+16>>2]=c+12,o=d+8|0,e=0;t:{i:{n:switch(t-1|0){case 0:if(e=gn(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=4960;break t;case 1:if(e=gn(60),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e>>2]=5384;break t;case 3:if(e=gn(112),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=5608,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=0,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,h[e+108>>2]=0;break t;case 2:if(e=gn(92),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=5844,h[e+68>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+84>>2]=0,h[e+88>>2]=p;break t;case 4:if(e=gn(104),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t,t=h[s+24>>2],r=h[s+28>>2]-t|0){if((0|r)<0)break i;i=gn(r),h[e+32>>2]=i,h[e+40>>2]=i+(r>>2<<2),g=e,v=We(i,t,r)+r|0,h[g+36>>2]=v}t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,i=h[o+8>>2],t=h[o+12>>2],h[e+84>>2]=0,h[e+76>>2]=0,h[e+80>>2]=0,h[e+60>>2]=0,h[e+64>>2]=0,h[e>>2]=6060,h[e+52>>2]=i,h[e+56>>2]=t,t=h[o+4>>2],h[e+88>>2]=h[o>>2],h[e+92>>2]=t,t=h[o+12>>2],h[e+96>>2]=h[o+8>>2],h[e+100>>2]=t;break t;case 5:break n;default:break t}e=gn(128),h[e+4>>2]=l,h[e>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],r=h[s+20>>2],i=h[s>>2],t=h[s+4>>2],h[e+40>>2]=0,h[e+32>>2]=0,h[e+36>>2]=0,h[e+24>>2]=u,h[e+28>>2]=r,h[e+16>>2]=l,h[e+20>>2]=c,h[e+8>>2]=i,h[e+12>>2]=t;n:{r:{if(i=h[s+28>>2]-h[s+24>>2]|0){if((0|i)<0)break r;t=gn(i),h[e+32>>2]=t,h[e+36>>2]=t,h[e+40>>2]=t+(i>>2<<2),i=h[s+24>>2],(0|(r=h[s+28>>2]-i|0))>0&&(t=We(t,i,r)+r|0),h[e+36>>2]=t}h[e>>2]=5328,t=h[o+4>>2],h[e+44>>2]=h[o>>2],h[e+48>>2]=t,t=h[o+12>>2],h[e+52>>2]=h[o+8>>2],h[e+56>>2]=t,h[(t=e- -64|0)>>2]=0,h[t+4>>2]=0,h[e+60>>2]=6868,h[e>>2]=6284,t=h[o+4>>2],h[e+72>>2]=h[o>>2],h[e+76>>2]=t,t=h[o+12>>2],h[e+80>>2]=h[o+8>>2],h[e+84>>2]=t,h[e+104>>2]=1065353216,h[e+108>>2]=-1,h[e+96>>2]=-1,h[e+100>>2]=-1,h[e+88>>2]=1,h[e+92>>2]=-1,h[e+60>>2]=6504,h[e+112>>2]=0,h[e+116>>2]=0,a[e+117|0]=0,a[e+118|0]=0,a[e+119|0]=0,a[e+120|0]=0,a[e+121|0]=0,a[e+122|0]=0,a[e+123|0]=0,a[e+124|0]=0;break n}vr(),x()}break t}vr(),x()}}if(N=d+32|0,r=e,e)break e}r=gn(44),h[r+4>>2]=m,h[r>>2]=3300,l=h[s+8>>2],c=h[s+12>>2],u=h[s+16>>2],i=h[s+20>>2],t=h[s>>2],e=h[s+4>>2],h[r+40>>2]=0,h[r+32>>2]=0,h[r+36>>2]=0,h[r+24>>2]=u,h[r+28>>2]=i,h[r+16>>2]=l,h[r+20>>2]=c,h[r+8>>2]=t,h[r+12>>2]=e;t:{if(e=h[s+24>>2],i=h[s+28>>2]-e|0){if((0|i)<0)break t;t=gn(i),h[r+32>>2]=t,h[r+40>>2]=t+(i>>2<<2),g=r,v=We(t,e,i)+i|0,h[g+36>>2]=v}h[r>>2]=6896;break e}vr(),x()}(e=h[n+32>>2])&&(h[n+36>>2]=e,ve(e))}return N=n+48|0,0|r},function(e){return a[h[8+(e|=0)>>2]+24|0]},function(e,t){t|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,d=0,f=0,p=0,m=0,g=0,v=0;i=e|=0;e:{t:{i:{n:{r:{a:{s:{o:switch(f=h[e+8>>2],h[f+28>>2]-1|0){case 4:break i;case 5:break n;case 2:break r;case 3:break a;case 0:break s;case 1:break o;default:break e}if(r=gn((0|(n=a[f+24|0]))>=0?n:-1),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|n)>0){for(f=-4&n,m=3&n,s=n-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,a[e+r|0]=h[d>>2],a[(1|e)+r|0]=h[d+4>>2],a[(2|e)+r|0]=h[d+8>>2],a[(3|e)+r|0]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;a[e+r|0]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+g|0,r,n),g=n+g|0,(0|(p=p+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],r,n),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n);break t}if(r=gn((0|(n=a[f+24|0]))>=0?n:-1),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|n)>0){for(f=-4&n,m=3&n,s=n-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,a[e+r|0]=h[d>>2],a[(1|e)+r|0]=h[d+4>>2],a[(2|e)+r|0]=h[d+8>>2],a[(3|e)+r|0]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;a[e+r|0]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+g|0,r,n),g=n+g|0,(0|(p=p+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],r,n),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n);break t}if(r=gn((e=(s=a[f+24|0])+s|0)>>>0<s>>>0?-1:e),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if(n=s<<1,(0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,u[(p=e<<1)+r>>1]=h[d>>2],u[(2|p)+r>>1]=h[d+4>>2],u[(4|p)+r>>1]=h[d+8>>2],u[(6|p)+r>>1]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;u[(e<<1)+r>>1]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+v|0,r,n),v=n+v|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],r,n),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n);break t}if(r=gn((e=(s=a[f+24|0])+s|0)>>>0<s>>>0?-1:e),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if(n=s<<1,(0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,u[(p=e<<1)+r>>1]=h[d>>2],u[(2|p)+r>>1]=h[d+4>>2],u[(4|p)+r>>1]=h[d+8>>2],u[(6|p)+r>>1]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;u[(e<<1)+r>>1]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+v|0,r,n),v=n+v|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],r,n),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n);break t}if(n=(s=a[f+24|0])<<2,r=gn((0|s)!=(1073741823&s)?-1:n),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,!t)break t;if((0|s)>0){for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,h[(p=e<<2)+r>>2]=h[d>>2],h[(4|p)+r>>2]=h[d+4>>2],h[(8|p)+r>>2]=h[d+8>>2],h[(12|p)+r>>2]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;h[(e<<2)+r>>2]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+v|0,r,n),v=n+v|0,(0|(g=g+1|0))==(0|t))break}break t}if(We(h[h[f+64>>2]>>2],r,n),1==(0|t))break t;if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););if(!c)break t;We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n);break t}if(n=(s=a[f+24|0])<<2,r=gn((0|s)!=(1073741823&s)?-1:n),e=h[i+16>>2],c=h[e+80>>2]?h[h[e>>2]>>2]+h[e+48>>2]|0:0,t)if((0|s)>0)for(f=-4&s,m=3&s,s=s-1>>>0<3;;){if(e=0,l=0,!s)for(;d=c+(o<<2)|0,h[(p=e<<2)+r>>2]=h[d>>2],h[(4|p)+r>>2]=h[d+4>>2],h[(8|p)+r>>2]=h[d+8>>2],h[(12|p)+r>>2]=h[d+12>>2],e=e+4|0,o=o+4|0,(0|f)!=(0|(l=l+4|0)););if(l=0,m)for(;h[(e<<2)+r>>2]=h[c+(o<<2)>>2],e=e+1|0,o=o+1|0,(0|m)!=(0|(l=l+1|0)););if(We(h[h[h[i+8>>2]+64>>2]>>2]+v|0,r,n),v=n+v|0,(0|(g=g+1|0))==(0|t))break}else if(We(h[h[f+64>>2]>>2],r,n),1!=(0|t)){if(c=1&(s=t-1|0),e=0,2!=(0|t))for(t=-2&s;We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),We((e=e+n|0)+h[h[h[i+8>>2]+64>>2]>>2]|0,r,n),(0|t)!=(0|(o=o+2|0)););c&&We(h[h[h[i+8>>2]+64>>2]>>2]+(e+n|0)|0,r,n)}}ve(r),r=1}return 0|r},function(e){var t;return h[(e|=0)>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},Rn,hr,Kn,wn,dr,Qn,tr,dr,hr,function(e,t){e|=0;var i,n,r,a=0,s=0,o=0,l=0,c=0,u=0;return n=s=h[12+(t|=0)>>2],o=a=h[t+20>>2],a=(i=(l=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,(r=h[t+8>>2])>>>0<i>>>0&(0|a)>=(0|s)|(0|a)>(0|s)||(c=h[t>>2],s=d[0|(s=c+l|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=i,h[t+20>>2]=a,a=o,l=o=l+8|0,o=a=o>>>0<8?a+1|0:a,l>>>0>r>>>0&(0|a)>=(0|n)|(0|a)>(0|n)||(a=d[0|(a=i+c|0)]|d[a+1|0]<<8|d[a+2|0]<<16|d[a+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=o,(0|a)<(0|s)||(h[e+16>>2]=a,h[e+12>>2]=s,!(t=(a>>31)-((s>>31)+(a>>>0<s>>>0)|0)|0)&(a=a-s|0)>>>0>2147483646|t||(u=1,t=a+1|0,h[e+20>>2]=t,a=t>>>1|0,h[e+24>>2]=a,h[e+28>>2]=0-a,1&t||(h[e+24>>2]=a-1))))),0|u},function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0;if(h[8+(e|=0)>>2]=r,p=h[(n=e+32|0)>>2],(a=h[e+36>>2]-p>>2)>>>0<r>>>0?(ei(n,r-a|0),p=h[n>>2],n=h[e+8>>2]):(r>>>0<a>>>0&&(h[e+36>>2]=(r<<2)+p),n=r),l=h[e+52>>2],s=h[e+48>>2],a=0,m=xt(gn(m=(1073741823&r)!=(0|r)?-1:r<<2),0,m),!((0|n)<=0)){for(;(0|(c=h[(n=a<<2)+m>>2]))>(0|(u=h[e+16>>2]))?h[n+p>>2]=u:(n=n+p|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|c)?u:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(!((0|n)<=0))for(a=0;;){n=(c=a<<2)+i|0,c=h[t+c>>2]+h[c+p>>2]|0,h[n>>2]=c;e:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break e;c=c+h[e+20>>2]|0}h[n>>2]=c}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],o=h[a>>2],(0|(a=h[a+4>>2]-o|0))>=5)for(_=(0|(a>>=2))>2?a:2,y=a>>>0>1?a:1,A=-2&r,E=1&r,p=1;;){e:{t:{if((0|p)!=(0|y)){if(b=v(r,p),-1==(0|(a=h[(p<<2)+o>>2]))|h[h[s>>2]+(a>>>3&536870908)>>2]>>>a&1)break t;if(-1==(0|(a=h[h[h[s+64>>2]+12>>2]+(a<<2)>>2])))break t;if(u=h[l>>2],c=h[s+28>>2],(0|(f=h[u+(h[c+(a<<2)>>2]<<2)>>2]))>=(0|p))break t;if((0|(d=h[u+(h[c+((((d=a+1|0)>>>0)%3|0?d:a-2|0)<<2)>>2]<<2)>>2]))>=(0|p))break t;if((0|(a=h[u+(h[c+(a+((a>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|p))break t;if(!((0|r)<=0)){if(c=v(r,a),u=v(r,d),f=v(r,f),a=0,g=0,1!=(0|r))for(;h[m+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+u<<2)+i>>2]|0)-h[(a+f<<2)+i>>2],h[m+((d=1|a)<<2)>>2]=(h[(c+d<<2)+i>>2]+h[(u+d<<2)+i>>2]|0)-h[(f+d<<2)+i>>2],a=a+2|0,(0|A)!=(0|(g=g+2|0)););E&&(h[m+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+u<<2)+i>>2]|0)-h[(a+f<<2)+i>>2])}if((0|n)<=0)break e;for(u=h[e+32>>2],a=0;(0|(c=h[(n=a<<2)+m>>2]))>(0|(f=h[e+16>>2]))?h[n+u>>2]=f:(n=n+u|0,f=h[e+12>>2],h[n>>2]=(0|f)>(0|c)?f:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,(0|n)<=0)break e;for(f=(n=b<<2)+i|0,d=t+n|0;;){n=(c=a<<2)+f|0,c=h[c+d>>2]+h[c+u>>2]|0,h[n>>2]=c;i:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break i;c=c+h[e+20>>2]|0}h[n>>2]=c}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}Sr(),x()}if(!((0|n)<=0)){for(f=(v(p-1|0,r)<<2)+i|0,u=h[e+32>>2],a=0;(0|(c=h[(n=a<<2)+f>>2]))>(0|(d=h[e+16>>2]))?h[n+u>>2]=d:(n=n+u|0,d=h[e+12>>2],h[n>>2]=(0|d)>(0|c)?d:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,!((0|n)<=0))for(f=(n=b<<2)+i|0,d=t+n|0;;){n=(c=a<<2)+f|0,c=h[c+d>>2]+h[c+u>>2]|0,h[n>>2]=c;t:{if((0|c)>h[e+16>>2])c=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break t;c=c+h[e+20>>2]|0}h[n>>2]=c}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|_)==(0|(p=p+1|0)))break}return ve(m),1},gr,gr,Rn,cr,wn,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0;if(h[8+(e|=0)>>2]=r,d=h[(n=e+32|0)>>2],(a=h[e+36>>2]-d>>2)>>>0<r>>>0?(ei(n,r-a|0),d=h[n>>2],n=h[e+8>>2]):(r>>>0<a>>>0&&(h[e+36>>2]=(r<<2)+d),n=r),s=xt(gn(a=(1073741823&r)!=(0|r)?-1:r<<2),0,a),o=xt(gn(a),0,a),!((0|n)<=0)){for(;(0|(a=h[(n=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[n+d>>2]=u:(n=n+d|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|a)?u:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(!((0|n)<=0))for(a=0;;){n=(u=a<<2)+i|0,u=h[t+u>>2]+h[u+d>>2]|0,h[n>>2]=u;e:{if((0|u)>h[e+16>>2])c=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;c=u+h[e+20>>2]|0}h[n>>2]=c}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],l=h[a>>2],(0|(a=h[a+4>>2]-l|0))>=5)for(M=h[e+52>>2],y=h[e+48>>2],R=(0|(a>>=2))>2?a:2,P=a>>>0>1?a:1,w=-2&r,S=1&r,C=-4&r,T=3&r,E=r-1|0,D=r<<2,b=1;;){e:{t:{i:{n:if((0|b)==(0|P))Sr(),x();else{if(u=h[(b<<2)+l>>2],(A=(0|r)<=0)||xt(s,0,D),-1==(0|u)){f=v(r,b);break t}for(O=h[y>>2],g=0,a=u;;){if(!(h[(a>>>3&536870908)+O>>2]>>>a&1||-1==(0|(c=h[h[h[y+64>>2]+12>>2]+(a<<2)>>2]))||(f=h[M>>2],d=h[y+28>>2],(0|(m=h[f+(h[d+(c<<2)>>2]<<2)>>2]))>=(0|b)||(0|(p=h[f+(h[d+((((p=c+1|0)>>>0)%3|0?p:c-2|0)<<2)>>2]<<2)>>2]))>=(0|b)||(0|(c=h[f+(h[d+(c+((c>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|b)))){if(!A){if(d=v(r,c),f=v(r,p),m=v(r,m),c=0,_=0,E)for(;h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+m<<2)+i>>2],h[((p=1|c)<<2)+o>>2]=(h[(d+p<<2)+i>>2]+h[(f+p<<2)+i>>2]|0)-h[(p+m<<2)+i>>2],c=c+2|0,(0|w)!=(0|(_=_+2|0)););if(S&&(h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+m<<2)+i>>2]),!A){if(d=0,c=0,f=0,E>>>0>2)for(;h[(p=(m=c<<2)+s|0)>>2]=h[p>>2]+h[m+o>>2],h[(_=(p=4|m)+s|0)>>2]=h[_>>2]+h[p+o>>2],h[(_=(p=8|m)+s|0)>>2]=h[_>>2]+h[p+o>>2],h[(p=(m|=12)+s|0)>>2]=h[p>>2]+h[m+o>>2],c=c+4|0,(0|C)!=(0|(f=f+4|0)););if(T)for(;h[(m=(f=c<<2)+s|0)>>2]=h[m>>2]+h[f+o>>2],c=c+1|0,(0|T)!=(0|(d=d+1|0)););}}g=g+1|0}r:{if((a>>>0)%3|0)a=a-1|0;else if(c=-1,-1==(0|(a=a+2|0)))break r;c=-1,h[h[y>>2]+(a>>>3&536870908)>>2]>>>a&1||(c=-1,-1!=(0|(a=h[h[h[y+64>>2]+12>>2]+(a<<2)>>2]))&&(c=a-1|0,(a>>>0)%3|0||(c=a+2|0)))}if(-1==(0|(a=(0|c)==(0|u)?-1:c)))break}if(f=v(r,b),!g)break t;if(A)break i;if(c=0,a=0,!E)break n;for(;h[(d=(u=c<<2)+s|0)>>2]=h[d>>2]/(0|g),h[(u=(4|u)+s|0)>>2]=h[u>>2]/(0|g),c=c+2|0,(0|w)!=(0|(a=a+2|0)););}S&&(h[(a=(c<<2)+s|0)>>2]=h[a>>2]/(0|g))}if((0|n)<=0)break e;for(d=h[e+32>>2],c=0;(0|(a=h[(n=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[n+d>>2]=u:(n=n+d|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|a)?u:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,(0|n)<=0)break e;for(c=(n=f<<2)+i|0,f=t+n|0;;){n=(u=a<<2)+c|0,u=h[u+f>>2]+h[u+d>>2]|0,h[n>>2]=u;i:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break i;u=u+h[e+20>>2]|0}h[n>>2]=u}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}if(!((0|n)<=0)){for(u=(v(b-1|0,r)<<2)+i|0,d=h[e+32>>2],c=0;(0|(a=h[(n=c<<2)+u>>2]))>(0|(g=h[e+16>>2]))?h[n+d>>2]=g:(n=n+d|0,g=h[e+12>>2],h[n>>2]=(0|g)>(0|a)?g:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,!((0|n)<=0))for(c=(n=f<<2)+i|0,f=t+n|0;;){n=(u=a<<2)+c|0,u=h[u+f>>2]+h[u+d>>2]|0,h[n>>2]=u;t:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break t;u=u+h[e+20>>2]|0}h[n>>2]=u}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|R)==(0|(b=b+1|0)))break}return ve(o),ve(s),1},function(e){var t=0;return h[(e|=0)>>2]=3592,(t=h[e+96>>2])&&ve(t),(t=h[e+84>>2])&&ve(t),(t=h[e+72>>2])&&ve(t),(t=h[e+60>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=3592,(t=h[e+96>>2])&&ve(t),(t=h[e+84>>2])&&ve(t),(t=h[e+72>>2])&&ve(t),(t=h[e+60>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},or,wn,Se,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0,B=0;N=s=N+-64|0,h[8+(e|=0)>>2]=r,u=h[(a=e+32|0)>>2];e:{if((n=h[e+36>>2]-u>>2)>>>0<r>>>0)ei(a,r-n|0),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0;else if(n>>>0>r>>>0&&(h[e+36>>2]=u+(r<<2)),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0,n=0,!r)break e;Ye(s+16|0,r,s),d=h[s+28>>2],n=h[s+32>>2]}h[s>>2]=0;e:if((n=n-d>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+32>>2]=(r<<2)+d}else Ye(s+16|12,r-n|0,s);h[s>>2]=0,a=h[s+40>>2];e:if((n=h[s+44>>2]-a>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+44>>2]=a+(r<<2)}else Ye(s+40|0,r-n|0,s);h[s>>2]=0,a=h[s+52>>2];e:if((n=h[s+56>>2]-a>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+56>>2]=a+(r<<2)}else Ye(s+52|0,r-n|0,s);if(d=0,!(h[e+8>>2]<=0)){for(f=h[e+32>>2],u=h[s+16>>2];(0|(a=h[(n=d<<2)+u>>2]))>(0|(g=h[e+16>>2]))?h[n+f>>2]=g:(n=n+f|0,g=h[e+12>>2],h[n>>2]=(0|g)>(0|a)?g:a),(0|(d=d+1|0))<(0|(n=h[e+8>>2])););if(!((0|n)<=0))for(n=0;;){a=(u=n<<2)+i|0,u=h[t+u>>2]+h[u+f>>2]|0,h[a>>2]=u;e:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}c=h[e+52>>2],o=h[e+48>>2],l=gn(16),h[(n=l)>>2]=0,h[n+4>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,h[s+8>>2]=0,h[s>>2]=0,h[s+4>>2]=0;e:{if(r){if(r>>>0>=1073741824)break e;T=gn(n=r<<2),h[s>>2]=T,h[s+8>>2]=n+T,xt(T,0,n)}y=1,n=h[e+56>>2],P=h[n>>2];t:if(!((0|(n=h[n+4>>2]-P|0))<5))for(k=(0|(n>>=2))>2?n:2,I=n>>>0>1?n:1,C=-2&r,D=1&r,L=-4&r,O=3&r,M=r-1|0,U=r<<2,g=1;;){i:{n:{r:{a:{if((0|g)!=(0|I)){n=((a=h[(g<<2)+P>>2])>>>0)%3|0;s:{o:if(-1!=(0|a)){f=0,R=0!=(0|n)|-1!=(0|(u=a+2|0)),b=1,_=1<<(A=n?a-1|0:u),E=A>>>5|0,B=h[o>>2],n=a;l:{for(;;){if(!(h[(n>>>3&536870908)+B>>2]>>>n&1||-1==(0|(u=h[h[h[o+64>>2]+12>>2]+(n<<2)>>2]))||(p=h[c>>2],d=h[o+28>>2],(0|(y=h[p+(h[d+(u<<2)>>2]<<2)>>2]))>=(0|g)||(0|(m=h[p+(h[d+((((m=u+1|0)>>>0)%3|0?m:u-2|0)<<2)>>2]<<2)>>2]))>=(0|g)||(0|(d=h[p+(h[d+(u+((u>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2]))>=(0|g)))){if(r){if(u=h[(s+16|0)+v(f,12)>>2],p=v(r,d),m=v(r,m),y=v(r,y),d=0,S=0,M)for(;h[u+(d<<2)>>2]=(h[(d+p<<2)+i>>2]+h[(d+m<<2)+i>>2]|0)-h[(d+y<<2)+i>>2],h[u+((w=1|d)<<2)>>2]=(h[(p+w<<2)+i>>2]+h[(m+w<<2)+i>>2]|0)-h[(y+w<<2)+i>>2],d=d+2|0,(0|C)!=(0|(S=S+2|0)););D&&(h[u+(d<<2)>>2]=(h[(d+p<<2)+i>>2]+h[(d+m<<2)+i>>2]|0)-h[(d+y<<2)+i>>2])}if(u=4,4==(0|(f=f+1|0)))break l}c:if(1&b){if(d=n-2|0,u=n+1|0,n=-1,-1==(0|(u=(u>>>0)%3|0?u:d))|h[h[o>>2]+(u>>>3&536870908)>>2]>>>u&1)break c;if(-1==(0|(u=h[h[h[o+64>>2]+12>>2]+(u<<2)>>2])))break c;n=((n=u+1|0)>>>0)%3|0?n:u-2|0}else{if((n>>>0)%3|0)d=n-1|0;else if(d=n+2|0,n=-1,-1==(0|d))break c;n=-1,h[h[o>>2]+(d>>>3&536870908)>>2]>>>d&1||-1!=(0|(u=h[h[h[o+64>>2]+12>>2]+(d<<2)>>2]))&&(n=(u>>>0)%3|0?u-1|0:u+2|0)}c:if((0|n)!=(0|a)){if(!(1&(1^b)|-1!=(0|n))){if(!R|_&h[h[o>>2]+(E<<2)>>2])break c;if(-1==(0|(n=h[h[h[o+64>>2]+12>>2]+(A<<2)>>2])))break c;b=0,n=(n>>>0)%3|0?n-1|0:n+2|0}if(-1!=(0|n))continue}break}if((0|(u=f))<=0)break o}for(r&&xt(h[s>>2],0,U),w=((n=u-1|0)<<2)+l|0,S=n=v(n,12)+e|0,R=h[n- -64>>2],y=0,b=0,n=0;;){if(a=h[w>>2],h[w>>2]=a+1,a>>>0>=R>>>0)break t;if(!(h[h[S+60>>2]+(a>>>3&536870908)>>2]>>>a&1)&&(n=n+1|0,r)){if(f=h[s>>2],p=h[(s+16|0)+v(b,12)>>2],A=0,d=0,a=0,M>>>0>=3)for(;h[(_=(m=d<<2)+f|0)>>2]=h[_>>2]+h[p+m>>2],h[(E=(_=4|m)+f|0)>>2]=h[E>>2]+h[p+_>>2],h[(E=(_=8|m)+f|0)>>2]=h[E>>2]+h[p+_>>2],h[(_=(m|=12)+f|0)>>2]=h[_>>2]+h[p+m>>2],d=d+4|0,(0|L)!=(0|(a=a+4|0)););if(O)for(;h[(m=(a=d<<2)+f|0)>>2]=h[m>>2]+h[a+p>>2],d=d+1|0,(0|O)!=(0|(A=A+1|0)););}if((0|(b=b+1|0))==(0|u))break}if(a=b=v(r,g),!n)break s;if(!r)break n;if(a=h[s>>2],d=0,u=0,M)break a;break r}a=v(r,g)}if(h[e+8>>2]<=0)break i;for(b=(v(g-1|0,r)<<2)+i|0,f=h[e+32>>2],d=0;(0|(u=h[(n=d<<2)+b>>2]))>(0|(p=h[e+16>>2]))?h[n+f>>2]=p:(n=n+f|0,p=h[e+12>>2],h[n>>2]=(0|p)>(0|u)?p:u),(0|(d=d+1|0))<(0|(u=h[e+8>>2])););if(n=0,(0|u)<=0)break i;for(d=(a<<=2)+i|0,b=t+a|0;;){a=(u=n<<2)+d|0,u=h[u+b>>2]+h[u+f>>2]|0,h[a>>2]=u;s:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break s;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(n=n+1|0))<h[e+8>>2]))break}break i}Sr(),x()}for(;h[(p=(f=d<<2)+a|0)>>2]=h[p>>2]/(0|n),h[(f=a+(4|f)|0)>>2]=h[f>>2]/(0|n),d=d+2|0,(0|C)!=(0|(u=u+2|0)););}D&&(h[(a=a+(d<<2)|0)>>2]=h[a>>2]/(0|n))}if(!(h[e+8>>2]<=0)){for(f=h[e+32>>2],d=0;(0|(a=h[(n=d<<2)+T>>2]))>(0|(u=h[e+16>>2]))?h[n+f>>2]=u:(n=n+f|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|a)?u:a),(0|(d=d+1|0))<(0|(a=h[e+8>>2])););if(n=0,!((0|a)<=0))for(d=(a=b<<2)+i|0,b=t+a|0;;){a=(u=n<<2)+d|0,u=h[u+b>>2]+h[u+f>>2]|0,h[a>>2]=u;n:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break n;u=u+h[e+20>>2]|0}h[a>>2]=u}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}}if(y=1,(0|k)==(0|(g=g+1|0)))break}return(e=h[s>>2])&&ve(e),ve(l),(e=h[s+52>>2])&&(h[s+56>>2]=e,ve(e)),(e=h[s+40>>2])&&(h[s+44>>2]=e,ve(e)),(e=h[s+28>>2])&&(h[s+32>>2]=e,ve(e)),(e=h[s+16>>2])&&(h[s+20>>2]=e,ve(e)),N=s- -64|0,0|y}vr(),x()},function(e){var t=0;return h[(e|=0)>>2]=3840,(t=h[e+76>>2])&&ve(t),t=h[e+68>>2],h[e+68>>2]=0,t&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=3840,(t=h[e+76>>2])&&ve(t),t=h[e+68>>2],h[e+68>>2]=0,t&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},sr,An,hr,tr,Sn,Be,function(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0;var o=0,l=0,c=b(0),u=b(0),f=0,p=0,g=0,y=b(0),A=b(0),E=b(0),S=b(0),M=0,R=b(0),P=b(0),C=b(0),D=b(0),O=b(0),k=b(0),I=b(0),L=b(0),U=b(0),B=0,F=b(0);h[e+64>>2]=s,h[e+72>>2]=r,s=gn((1073741823&r)!=(0|r)?-1:r<<2),n=h[e+68>>2],h[e+68>>2]=s,n&&ve(n),h[e+8>>2]=r,o=h[(s=e+32|0)>>2],(n=h[e+36>>2]-o>>2)>>>0<r>>>0?ei(s,r-n|0):n>>>0<=r>>>0||(h[e+36>>2]=o+(r<<2));e:if(n=h[e+56>>2],!((0|(n=(o=h[n+4>>2])-(s=h[n>>2])|0))<=0)){if((0|s)!=(0|o))for(B=(n=n>>>2|0)>>>0>1?n:1;;){if(l=h[(g<<2)+s>>2],u=b(0),N=o=N-48|0,s=-1,n=-1,-1!=(0|l)&&(s=((n=l+1|0)>>>0)%3|0?n:l-2|0,n=l-1|0,(l>>>0)%3|0||(n=l+2|0)),f=h[e+52>>2],l=h[f>>2],f=h[f+4>>2]-l>>2,p=s<<2,s=h[h[e+48>>2]+28>>2],f>>>0<=(p=h[p+s>>2])>>>0||(s=h[s+(n<<2)>>2])>>>0>=f>>>0)Sr(),x();else{t:if((0|(f=h[l+(s<<2)>>2]))>=(0|g)|(0|(n=h[l+(p<<2)>>2]))>=(0|g)){if((0|n)<(0|g))s=h[e+72>>2],n=v(n,s);else{if(s=0,(0|g)<=0){if(h[e+72>>2]<=0)break t;for(n=h[e+68>>2];h[n+(s<<2)>>2]=0,(0|(s=s+1|0))<h[e+72>>2];);break t}s=h[e+72>>2],n=v(s,g-1|0)}if(!((0|s)<=0))for(l=h[e+68>>2],s=0;h[l+(s<<2)>>2]=h[(n+s<<2)+i>>2],(0|(s=s+1|0))<h[e+72>>2];);}else{if(s=h[e+72>>2],l=(v(s,f)<<2)+i|0,y=b(h[l+4>>2]),s=(v(n,s)<<2)+i|0,S=b(h[s+4>>2]),!((R=b(h[l>>2]))!=(k=b(h[s>>2]))|y!=S)){if(n=h[e+68>>2],s=b(_(y))<b(2147483648)?~~y:-2147483648,h[n+4>>2]=s,b(_(R))<b(2147483648)){h[n>>2]=~~R;break t}h[n>>2]=-2147483648;break t}s=h[h[e+64>>2]+(g<<2)>>2],h[o+40>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,l=h[e+60>>2],d[l+84|0]||(s=h[h[l+68>>2]+(s<<2)>>2]),Q(l,s,a[l+24|0],o+32|0),s=h[h[e+64>>2]+(n<<2)>>2],h[o+24>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,n=h[e+60>>2],d[n+84|0]||(s=h[h[n+68>>2]+(s<<2)>>2]),Q(n,s,a[n+24|0],o+16|0),s=h[h[e+64>>2]+(f<<2)>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,n=h[e+60>>2],d[n+84|0]||(s=h[h[n+68>>2]+(s<<2)>>2]),Q(n,s,a[n+24|0],o),P=m[o+40>>2],C=m[o+36>>2],F=m[o+32>>2],A=m[o+24>>2],c=b(m[o+8>>2]-A),L=m[o+20>>2],D=b(m[o+4>>2]-L),U=m[o+16>>2],O=b(m[o>>2]-U),!((I=b(b(c*c)+b(b(D*D)+b(b(O*O)+b(0)))))>b(0))&&(E=b(0),h[e+88>>2]>257)||(A=b(P-A),P=b(C-L),C=b(F-U),u=b(b(b(c*A)+b(b(D*P)+b(b(O*C)+b(0))))/I),c=b(A-b(c*u)),A=b(c*c),c=b(P-b(D*u)),E=b(c*c),c=b(C-b(O*u)),E=b(T(b(b(A+b(E+b(b(c*c)+b(0))))/I)))),A=E,n=h[e+80>>2]-1|0,s=h[h[e+76>>2]+(n>>>3&536870908)>>2],h[e+80>>2]=n,c=b(y-S),E=b(b(c*u)+S),S=b(R-k),y=b(S*A),y=b(E+((n=s>>>n&1)?y:b(-y))),E=b(b(S*u)+k),u=b(c*A),(u=b(E+(n?b(-u):u)))==u?(s=h[e+68>>2],M=w(+u+.5),n=_(M)<2147483648?~~M:-2147483648,h[s>>2]=n):(s=h[e+68>>2],h[s>>2]=-2147483648),M=w(+y+.5),n=_(M)<2147483648?~~M:-2147483648,h[s+4>>2]=y!=y?-2147483648:n}N=o+48|0}if(!(h[e+8>>2]<=0)){for(l=h[e+32>>2],f=h[e+68>>2],s=0;(0|(o=h[(n=s<<2)+f>>2]))>(0|(p=h[e+16>>2]))?h[n+l>>2]=p:(n=n+l|0,p=h[e+12>>2],h[n>>2]=(0|p)>(0|o)?p:o),(0|(s=s+1|0))<(0|(o=h[e+8>>2])););if(n=0,!((0|o)<=0))for(f=(s=v(r,g)<<2)+i|0,p=t+s|0;;){s=(o=n<<2)+f|0,o=h[o+p>>2]+h[o+l>>2]|0,h[s>>2]=o;t:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break t;o=o+h[e+20>>2]|0}h[s>>2]=o}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if((0|B)==(0|(g=g+1|0)))break e;if(n=h[e+56>>2],s=h[n>>2],!(h[n+4>>2]-s>>2>>>0>g>>>0))break}Sr(),x()}return 1},function(e){var t=0;return h[(e|=0)>>2]=4068,(t=h[e+76>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=4068,(t=h[e+76>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},lr,An,hr,tr,Sn,Ge,function(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,s|=0;var o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,U=0,B=0,F=0,G=0,V=0,z=0,H=0,j=0,W=0,Y=0,X=0,Z=0,q=0,Q=0,K=0;if(2==(0|(r|=0))){h[e+8>>2]=2,h[e- -64>>2]=s,s=h[(r=e+32|0)>>2],(n=h[e+36>>2]-s|0)>>>0<=7?ei(r,2-(n>>>2|0)|0):8!=(0|n)&&(h[e+36>>2]=s+8);e:if(n=h[e+56>>2],(0|(s=(r=h[n+4>>2])-(n=h[n>>2])|0))<=0)s=0;else{if((0|n)!=(0|r))for(m=e+60|0,Z=(0|(B=s>>2))>1?B:1,s=1;;){N=u=N-80|0,r=-1,o=-1,-1!=(0|(n=h[(_<<2)+n>>2]))&&(r=((r=n+1|0)>>>0)%3|0?r:n-2|0,o=n-1|0,(n>>>0)%3|0||(o=n+2|0)),c=h[m+36>>2],n=h[c>>2];t:{i:{n:{r:{if(c=h[c+4>>2]-n>>2,l=r<<2,r=h[h[m+32>>2]+28>>2],!(c>>>0<=(f=h[l+r>>2])>>>0||(r=h[r+(o<<2)>>2])>>>0>=c>>>0)){a:{if(!((0|(o=h[n+(r<<2)>>2]))>=(0|_)|(0|(c=h[n+(f<<2)>>2]))>=(0|_))){if(S=h[4+(n=(o<<3)+i|0)>>2],A=h[4+(r=(c<<3)+i|0)>>2],!((0|(M=h[n>>2]))!=(0|(O=h[r>>2]))|(0|A)!=(0|S))){h[m+8>>2]=O,h[m+12>>2]=A;break a}if(n=h[h[m+4>>2]+(_<<2)>>2],h[u+72>>2]=0,h[u+76>>2]=0,h[(r=u- -64|0)>>2]=0,h[r+4>>2]=0,h[u+56>>2]=0,h[u+60>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],u+56|0),n=h[h[m+4>>2]+(c<<2)>>2],h[u+48>>2]=0,h[u+52>>2]=0,h[u+40>>2]=0,h[u+44>>2]=0,h[u+32>>2]=0,h[u+36>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],u+32|0),n=h[h[m+4>>2]+(o<<2)>>2],h[u+24>>2]=0,h[u+28>>2]=0,h[u+16>>2]=0,h[u+20>>2]=0,h[u+8>>2]=0,h[u+12>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],u+8|0),F=h[u+44>>2],n=Zi(v=(n=h[u+16>>2])-(r=k=h[u+40>>2])|0,f=h[u+20>>2]-(F+(n>>>0<r>>>0)|0)|0,v,f),r=L,g=n,G=h[u+36>>2],o=Zi(E=(n=h[u+8>>2])-(o=I=h[u+32>>2])|0,l=h[u+12>>2]-(G+(n>>>0<o>>>0)|0)|0,E,l),r=L+r|0,r=(n=g+o|0)>>>0<o>>>0?r+1|0:r,g=n,V=h[u+52>>2],y=Zi(b=(n=h[u+24>>2])-(o=U=h[u+48>>2])|0,p=h[u+28>>2]-(V+(n>>>0<o>>>0)|0)|0,b,p),o=L+r|0,w=n=g+y|0,n|(y=n>>>0<y>>>0?o+1|0:o)){if(n=Zi((n=g=h[u+64>>2])-k|0,(H=h[u+68>>2])-((n>>>0<k>>>0)+F|0)|0,v,f),r=L,n=(o=n)+(c=Zi((n=j=h[u+56>>2])-I|0,(W=h[u+60>>2])-((n>>>0<I>>>0)+G|0)|0,E,l))|0,o=L+r|0,o=n>>>0<c>>>0?o+1|0:o,n=(r=n)+(c=Zi((n=Y=h[u+72>>2])-U|0,(X=h[u+76>>2])-((n>>>0<U>>>0)+V|0)|0,b,p))|0,r=L+o|0,R=n,T=n>>>0<c>>>0?r+1|0:r,o=(n=p>>31)+p|0,o=(r=n+b|0)>>>0<n>>>0?o+1|0:o,r^=n,c=n^=o,o=(n=f>>31)+f|0,C=n^(P=n+v|0),P=n^=n>>>0>P>>>0?o+1|0:o,z=0,o=(n=l>>31)+l|0,o=(D=n+E|0)>>>0<n>>>0?o+1|0:o,q=r,D^=n,(r=qe(-1,2147483647,(r=(0|c)==(0|(n=(o=(0|P)==(0|(n^=o))&C>>>0>D>>>0|n>>>0<P>>>0)?P:n))&r>>>0>(C=o?C:D)>>>0|n>>>0<c>>>0)?q:C,r?c:n)>>>0<R>>>0)&(0|(n=L))<=(0|T)|(0|n)<(0|T))break t;if(c=1,n=0,r=g,v=Yi(Zi(v,f,R,T),L,w,y),o=L+F|0,o=H-((r>>>0<(f=v+k|0)>>>0)+(o=f>>>0<v>>>0?o+1|0:o)|0)|0,o=Zi(r=r-f|0,o,r,o),v=L,r=j,g=o,l=Yi(Zi(E,l,R,T),L,w,y),o=L+G|0,o=W-((r>>>0<(f=l+I|0)>>>0)+(o=l>>>0>f>>>0?o+1|0:o)|0)|0,f=Zi(r=r-f|0,o,r,o),r=L+v|0,f=r=(o=g+f|0)>>>0<f>>>0?r+1|0:r,r=Y,g=o,p=Yi(Zi(b,p,R,T),L,w,y),o=L+V|0,o=X-((r>>>0<(l=p+U|0)>>>0)+(o=l>>>0<p>>>0?o+1|0:o)|0)|0,l=Zi(r=r-l|0,o,r,o),o=L+f|0,f=Zi(r=g+l|0,r>>>0<l>>>0?o+1|0:o,w,y),l=r=L,!r&f>>>0<=1)break r;for(p=f,r=l;o=n<<1|c>>>31,c<<=1,n=o,v=!r&p>>>0>7|0!=(0|r),p=(3&r)<<30|p>>>2,r=r>>>2|0,v;);break n}}if((0|c)<(0|_))n=c<<1;else{if((0|_)<=0){h[m+8>>2]=0,h[m+12>>2]=0;break a}n=(_<<1)-2|0}n=(n<<2)+i|0,h[m+8>>2]=h[n>>2],h[m+12>>2]=h[n+4>>2]}z=1;break t}Sr(),x()}if(n=l,(c=f)-1|0)break i}for(;r=qe(f,l,c,n)+c|0,o=n+L|0,r=Zi(c=(1&(o=r>>>0<c>>>0?o+1|0:o))<<31|r>>>1,n=o>>>1|0,c,n),(0|l)==(0|(o=L))&r>>>0>f>>>0|o>>>0>l>>>0;);}(f=h[m+20>>2])&&(r=f-1|0,p=h[h[m+16>>2]+(r>>>3&536870908)>>2],h[m+20>>2]=r,o=Zi(R,T,v=S-(o=A)|0,E=(S>>31)-((l=o>>31)+(o>>>0>S>>>0)|0)|0),b=L,l=(A=Zi(A,l,w,y))+o|0,o=L+b|0,o=l>>>0<A>>>0?o+1|0:o,g=l,M=l=Zi(c,n,b=M-(l=O)|0,S=(M>>31)-((A=l>>31)+(l>>>0>M>>>0)|0)|0),l=g+(p=(r=p>>>r&1)?0-l|0:l)|0,g=o,o=L,o=g+(r?0-(o+(0!=(0|M))|0)|0:o)|0,Q=m,K=Yi(l,l>>>0<p>>>0?o+1|0:o,w,y),h[Q+12>>2]=K,o=Zi(b,S,R,T),p=L,l=(b=Zi(w,y,O,A))+o|0,o=L+p|0,o=l>>>0<b>>>0?o+1|0:o,g=l,n=Zi(c,n,v,E),c=g+(l=r?n:0-n|0)|0,g=o,o=L,r=g+(r?o:0-((0!=(0|n))+o|0)|0)|0,Q=m,K=Yi(c,c>>>0<l>>>0?r+1|0:r,w,y),h[Q+8>>2]=K),z=0!=(0|f)}if(N=u+80|0,!z)break e;if(!(h[e+8>>2]<=0)){for(o=h[e+32>>2],n=0;(0|(s=h[68+((r=n<<2)+e|0)>>2]))>(0|(c=h[e+16>>2]))?h[r+o>>2]=c:(r=r+o|0,c=h[e+12>>2],h[r>>2]=(0|c)>(0|s)?c:s),(0|(n=n+1|0))<(0|(s=h[e+8>>2])););if(r=0,!((0|s)<=0))for(c=(n=_<<3)+i|0,f=t+n|0;;){n=(s=r<<2)+c|0,s=h[s+f>>2]+h[s+o>>2]|0,h[n>>2]=s;t:{if((0|s)>h[e+16>>2])s=s-h[e+20>>2]|0;else{if((0|s)>=h[e+12>>2])break t;s=s+h[e+20>>2]|0}h[n>>2]=s}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if(s=(0|B)>(0|(_=_+1|0)),(0|_)==(0|Z))break e;if(r=h[e+56>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>_>>>0))break}Sr(),x()}e=1^s}else e=0;return 1&e},function(e){var t;return h[(e|=0)>>2]=4304,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t;h[(e|=0)>>2]=4304,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},ur,on,hr,tr,Tn,nt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0;N=s=N-32|0,h[68+(e|=0)>>2]=a,r=h[e+56>>2],n=h[r>>2],a=h[r+4>>2],h[s+24>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+112|0,p=e+60|0,m=(r=a>>>2|0)>>>0>1?r:1;;){if(se(p,h[(u<<2)+n>>2],s+16|0),n=(r=h[s+20>>2])>>31,o=(a=h[s+16>>2])>>31,l=(c=h[s+24>>2])>>31,o=(l^=l+c)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+108>>2],d=l>>31,a,a>>31),L,o,n),h[s+16>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+20>>2]=n,n=(r=(r=n)+(n>>=31)^n)+((n=a>>31)+a^n)|0,h[s+24>>2]=(0|c)>=0?l-n:n-l):h[s+16>>2]=h[e+108>>2],n=Gi(f),a=h[s+16>>2],n?(h[s+24>>2]=0-h[s+24>>2],r=0-h[s+20>>2]|0,h[s+20>>2]=r,a=0-a|0,h[s+16>>2]=a):r=h[s+20>>2],(0|a)>=0?(a=(n=h[e+108>>2])+h[s+24>>2]|0,n=n+r|0):((0|r)<0?(n=(a=h[s+24>>2])>>31,n^=n+a):(n=(a=h[s+24>>2])>>31,n=h[e+100>>2]-(n^n+a)|0),(0|a)<0?a=(a=r)+(r>>=31)^r:(a=r,r>>=31,a=h[e+100>>2]-(a+r^r)|0)),r=h[e+100>>2],n|a?(0|r)!=(0|a)|n?(0|n)!=(0|r)|a?n||(0|(o=h[e+108>>2]))>=(0|a)?(0|n)!=(0|r)||(0|(o=h[e+108>>2]))<=(0|a)?(0|r)!=(0|a)||(0|(r=h[e+108>>2]))<=(0|n)?a||(a=0,(0|(r=h[e+108>>2]))>=(0|n)||(n=(r<<1)-n|0)):n=(r<<1)-n|0:a=(o<<1)-a|0:(a=(o<<1)-a|0,n=0):a=n:n=a:n=a=r,h[s+12>>2]=a,h[s+8>>2]=n,!(h[e+8>>2]<=0)){for(o=h[e+32>>2],a=0;(0|(r=h[e+16>>2]))<(0|n)?h[o+(a<<2)>>2]=r:(r=o+(a<<2)|0,c=h[e+12>>2],h[r>>2]=(0|c)>(0|n)?c:n),(0|(a=a+1|0))<(0|(r=h[e+8>>2]));)n=h[(s+8|0)+(a<<2)>>2];if(n=0,!((0|r)<=0))for(c=(r=u<<3)+i|0,l=t+r|0;;){r=(a=n<<2)+c|0,a=h[a+l>>2]+h[a+o>>2]|0,h[r>>2]=a;t:{if((0|a)>h[e+16>>2])a=a-h[e+20>>2]|0;else{if((0|a)>=h[e+12>>2])break t;a=a+h[e+20>>2]|0}h[r>>2]=a}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if((0|m)==(0|(u=u+1|0)))break e;if(r=h[e+56>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>u>>>0))break}Sr(),x()}return N=s+32|0,1},ar,fr,bn,Zn,se,gr,Rn,hr,wn,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0;if(h[8+(e|=0)>>2]=r,p=h[(n=e+32|0)>>2],(a=h[e+36>>2]-p>>2)>>>0<r>>>0?(ei(n,r-a|0),p=h[n>>2],n=h[e+8>>2]):(r>>>0<a>>>0&&(h[e+36>>2]=(r<<2)+p),n=r),l=h[e+52>>2],s=h[e+48>>2],a=0,g=xt(gn(g=(1073741823&r)!=(0|r)?-1:r<<2),0,g),!((0|n)<=0)){for(;(0|(c=h[(n=a<<2)+g>>2]))>(0|(d=h[e+16>>2]))?h[n+p>>2]=d:(n=n+p|0,d=h[e+12>>2],h[n>>2]=(0|d)>(0|c)?d:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(!((0|n)<=0))for(a=0;;){n=(c=a<<2)+i|0,c=h[t+c>>2]+h[c+p>>2]|0,h[n>>2]=c;e:{if((0|c)>h[e+16>>2])u=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break e;u=c+h[e+20>>2]|0}h[n>>2]=u}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],o=h[a>>2],(0|(a=h[a+4>>2]-o|0))>=5)for(_=(0|(a>>=2))>2?a:2,y=a>>>0>1?a:1,A=-2&r,E=1&r,p=1;;){e:{t:{if((0|p)!=(0|y)){if(b=v(r,p),-1==(0|(a=h[(p<<2)+o>>2])))break t;if(-1==(0|(a=h[h[s+12>>2]+(a<<2)>>2])))break t;d=h[l>>2],c=h[s>>2],f=h[d+(h[c+(a<<2)>>2]<<2)>>2],u=-1!=(0|(u=((u=a+1|0)>>>0)%3|0?u:a-2|0))?h[c+(u<<2)>>2]:-1;i:{if((a>>>0)%3|0)a=a-1|0;else if(m=-1,-1==(0|(a=a+2|0)))break i;m=h[c+(a<<2)>>2]}if((0|f)>=(0|p))break t;if((0|(a=h[(u<<2)+d>>2]))>=(0|p))break t;if((0|(c=h[d+(m<<2)>>2]))>=(0|p))break t;if(!((0|r)<=0)){if(c=v(r,c),d=v(r,a),f=v(r,f),a=0,m=0,1!=(0|r))for(;h[g+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+d<<2)+i>>2]|0)-h[(a+f<<2)+i>>2],h[g+((u=1|a)<<2)>>2]=(h[(c+u<<2)+i>>2]+h[(d+u<<2)+i>>2]|0)-h[(u+f<<2)+i>>2],a=a+2|0,(0|A)!=(0|(m=m+2|0)););E&&(h[g+(a<<2)>>2]=(h[(a+c<<2)+i>>2]+h[(a+d<<2)+i>>2]|0)-h[(a+f<<2)+i>>2])}if((0|n)<=0)break e;for(d=h[e+32>>2],a=0;(0|(c=h[(n=a<<2)+g>>2]))>(0|(f=h[e+16>>2]))?h[n+d>>2]=f:(n=n+d|0,f=h[e+12>>2],h[n>>2]=(0|f)>(0|c)?f:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,(0|n)<=0)break e;for(f=(n=b<<2)+i|0,u=t+n|0;;){n=(c=a<<2)+f|0,c=h[c+u>>2]+h[c+d>>2]|0,h[n>>2]=c;i:{if((0|c)>h[e+16>>2])m=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break i;m=c+h[e+20>>2]|0}h[n>>2]=m}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}Sr(),x()}if(!((0|n)<=0)){for(f=(v(p-1|0,r)<<2)+i|0,d=h[e+32>>2],a=0;(0|(c=h[(n=a<<2)+f>>2]))>(0|(u=h[e+16>>2]))?h[n+d>>2]=u:(n=n+d|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|c)?u:c),(0|(n=h[e+8>>2]))>(0|(a=a+1|0)););if(a=0,!((0|n)<=0))for(f=(n=b<<2)+i|0,u=t+n|0;;){n=(c=a<<2)+f|0,c=h[c+u>>2]+h[c+d>>2]|0,h[n>>2]=c;t:{if((0|c)>h[e+16>>2])m=c-h[e+20>>2]|0;else{if((0|c)>=h[e+12>>2])break t;m=c+h[e+20>>2]|0}h[n>>2]=m}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|_)==(0|(p=p+1|0)))break}return ve(g),1},gr,Rn,cr,wn,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c=0,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0;if(h[8+(e|=0)>>2]=r,d=h[(n=e+32|0)>>2],(a=h[e+36>>2]-d>>2)>>>0<r>>>0?(ei(n,r-a|0),d=h[n>>2],n=h[e+8>>2]):(r>>>0<a>>>0&&(h[e+36>>2]=(r<<2)+d),n=r),s=xt(gn(a=(1073741823&r)!=(0|r)?-1:r<<2),0,a),o=xt(gn(a),0,a),!((0|n)<=0)){for(;(0|(a=h[(n=c<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[n+d>>2]=u:(n=n+d|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|a)?u:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(!((0|n)<=0))for(a=0;;){n=(u=a<<2)+i|0,u=h[t+u>>2]+h[u+d>>2]|0,h[n>>2]=u;e:{if((0|u)>h[e+16>>2])c=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;c=u+h[e+20>>2]|0}h[n>>2]=c}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}if(a=h[e+56>>2],l=h[a>>2],(0|(a=h[a+4>>2]-l|0))>=5)for(R=h[e+52>>2],E=h[e+48>>2],P=(0|(a>>=2))>2?a:2,C=a>>>0>1?a:1,w=-2&r,S=1&r,D=-4&r,T=3&r,A=r-1|0,O=r<<2,b=1;;){e:{t:{i:{n:if((0|b)==(0|C))Sr(),x();else{if(u=h[(b<<2)+l>>2],(y=(0|r)<=0)||xt(s,0,O),-1==(0|u)){u=v(r,b);break t}for(M=h[E+12>>2],m=0,a=u;;){if(-1!=(0|(c=h[(a<<2)+M>>2]))){f=h[R>>2],d=h[E>>2],_=h[f+(h[d+(c<<2)>>2]<<2)>>2],p=-1!=(0|(p=((p=c+1|0)>>>0)%3|0?p:c-2|0))?h[d+(p<<2)>>2]:-1;r:{if((c>>>0)%3|0)c=c-1|0;else if(g=-1,-1==(0|(c=c+2|0)))break r;g=h[d+(c<<2)>>2]}if(!((0|b)<=(0|_)||(0|(c=h[(p<<2)+f>>2]))>=(0|b)||(0|(d=h[f+(g<<2)>>2]))>=(0|b))){if(!y){if(d=v(r,d),f=v(r,c),_=v(r,_),c=0,g=0,A)for(;h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+_<<2)+i>>2],h[((p=1|c)<<2)+o>>2]=(h[(d+p<<2)+i>>2]+h[(f+p<<2)+i>>2]|0)-h[(p+_<<2)+i>>2],c=c+2|0,(0|w)!=(0|(g=g+2|0)););if(S&&(h[(c<<2)+o>>2]=(h[(c+d<<2)+i>>2]+h[(c+f<<2)+i>>2]|0)-h[(c+_<<2)+i>>2]),!y){if(_=0,c=0,d=0,A>>>0>2)for(;h[(p=(f=c<<2)+s|0)>>2]=h[p>>2]+h[f+o>>2],h[(g=(p=4|f)+s|0)>>2]=h[g>>2]+h[p+o>>2],h[(g=(p=8|f)+s|0)>>2]=h[g>>2]+h[p+o>>2],h[(p=(f|=12)+s|0)>>2]=h[p>>2]+h[f+o>>2],c=c+4|0,(0|D)!=(0|(d=d+4|0)););if(T)for(;h[(f=(d=c<<2)+s|0)>>2]=h[f>>2]+h[d+o>>2],c=c+1|0,(0|T)!=(0|(_=_+1|0)););}}m=m+1|0}}r:{if((a>>>0)%3|0)a=a-1|0;else if(c=-1,-1==(0|(a=a+2|0)))break r;c=-1,-1!=(0|(a=h[(a<<2)+M>>2]))&&(c=a-1|0,(a>>>0)%3|0||(c=a+2|0))}if(-1==(0|(a=(0|c)==(0|u)?-1:c)))break}if(u=v(r,b),!m)break t;if(y)break i;if(c=0,a=0,!A)break n;for(;h[(f=(d=c<<2)+s|0)>>2]=h[f>>2]/(0|m),h[(d=(4|d)+s|0)>>2]=h[d>>2]/(0|m),c=c+2|0,(0|w)!=(0|(a=a+2|0)););}S&&(h[(a=(c<<2)+s|0)>>2]=h[a>>2]/(0|m))}if((0|n)<=0)break e;for(d=h[e+32>>2],c=0;(0|(a=h[(n=c<<2)+s>>2]))>(0|(m=h[e+16>>2]))?h[n+d>>2]=m:(n=n+d|0,m=h[e+12>>2],h[n>>2]=(0|m)>(0|a)?m:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,(0|n)<=0)break e;for(c=(n=u<<2)+i|0,m=t+n|0;;){n=(u=a<<2)+c|0,u=h[u+m>>2]+h[u+d>>2]|0,h[n>>2]=u;i:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break i;u=u+h[e+20>>2]|0}h[n>>2]=u}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}break e}if(!((0|n)<=0)){for(m=(v(b-1|0,r)<<2)+i|0,d=h[e+32>>2],c=0;(0|(a=h[(n=c<<2)+m>>2]))>(0|(f=h[e+16>>2]))?h[n+d>>2]=f:(n=n+d|0,f=h[e+12>>2],h[n>>2]=(0|f)>(0|a)?f:a),(0|(n=h[e+8>>2]))>(0|(c=c+1|0)););if(a=0,!((0|n)<=0))for(c=(n=u<<2)+i|0,m=t+n|0;;){n=(u=a<<2)+c|0,u=h[u+m>>2]+h[u+d>>2]|0,h[n>>2]=u;t:{if((0|u)>h[e+16>>2])u=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break t;u=u+h[e+20>>2]|0}h[n>>2]=u}if(!((0|(n=h[e+8>>2]))>(0|(a=a+1|0))))break}}}if((0|P)==(0|(b=b+1|0)))break}return ve(o),ve(s),1},function(e){var t=0;return h[(e|=0)>>2]=5608,(t=h[e+96>>2])&&ve(t),(t=h[e+84>>2])&&ve(t),(t=h[e+72>>2])&&ve(t),(t=h[e+60>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=5608,(t=h[e+96>>2])&&ve(t),(t=h[e+84>>2])&&ve(t),(t=h[e+72>>2])&&ve(t),(t=h[e+60>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},or,wn,Se,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o,l,c,u=0,d=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0;N=s=N+-64|0,h[8+(e|=0)>>2]=r,u=h[(a=e+32|0)>>2];e:{if((n=h[e+36>>2]-u>>2)>>>0<r>>>0)ei(a,r-n|0),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0;else if(n>>>0>r>>>0&&(h[e+36>>2]=u+(r<<2)),h[s+56>>2]=0,h[s+60>>2]=0,h[s+48>>2]=0,h[s+52>>2]=0,h[s+40>>2]=0,h[s+44>>2]=0,h[s+32>>2]=0,h[s+36>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=0,n=0,!r)break e;Ye(s+16|0,r,s),d=h[s+28>>2],n=h[s+32>>2]}h[s>>2]=0;e:if((n=n-d>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+32>>2]=(r<<2)+d}else Ye(s+16|12,r-n|0,s);h[s>>2]=0,a=h[s+40>>2];e:if((n=h[s+44>>2]-a>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+44>>2]=a+(r<<2)}else Ye(s+40|0,r-n|0,s);h[s>>2]=0,a=h[s+52>>2];e:if((n=h[s+56>>2]-a>>2)>>>0>=r>>>0){if(n>>>0<=r>>>0)break e;h[s+56>>2]=a+(r<<2)}else Ye(s+52|0,r-n|0,s);if(d=0,!(h[e+8>>2]<=0)){for(p=h[e+32>>2],u=h[s+16>>2];(0|(a=h[(n=d<<2)+u>>2]))>(0|(b=h[e+16>>2]))?h[n+p>>2]=b:(n=n+p|0,b=h[e+12>>2],h[n>>2]=(0|b)>(0|a)?b:a),(0|(d=d+1|0))<(0|(n=h[e+8>>2])););if(!((0|n)<=0))for(n=0;;){a=(u=n<<2)+i|0,u=h[t+u>>2]+h[u+p>>2]|0,h[a>>2]=u;e:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break e;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}c=h[e+52>>2],l=h[e+48>>2],o=gn(16),h[(n=o)>>2]=0,h[n+4>>2]=0,h[n+8>>2]=0,h[n+12>>2]=0,h[s+8>>2]=0,h[s>>2]=0,h[s+4>>2]=0;e:{if(r){if(r>>>0>=1073741824)break e;T=gn(n=r<<2),h[s>>2]=T,h[s+8>>2]=n+T,xt(T,0,n)}E=1,n=h[e+56>>2],P=h[n>>2];t:if(!((0|(n=h[n+4>>2]-P|0))<5))for(k=(0|(n>>=2))>2?n:2,I=n>>>0>1?n:1,C=-2&r,D=1&r,L=-4&r,O=3&r,M=r-1|0,U=r<<2,b=1;;){i:{n:{r:{a:{if((0|b)!=(0|I)){n=((a=h[(b<<2)+P>>2])>>>0)%3|0;s:{o:if(-1!=(0|a)){p=0,R=0!=(0|n)|-1!=(0|(u=a+2|0)),A=(w=h[l+12>>2])+((n?a-1|0:u)<<2)|0,_=1,n=a;l:{for(;;){if(-1!=(0|(u=h[w+(n<<2)>>2]))){m=-1,E=h[c>>2],g=h[l>>2],d=E+(h[g+(u<<2)>>2]<<2)|0,-1!=(0|(y=((y=u+1|0)>>>0)%3|0?y:u-2|0))&&(m=h[g+(y<<2)>>2]),y=h[d>>2];c:{if((u>>>0)%3|0)d=u-1|0;else if(f=-1,-1==(0|(d=u+2|0)))break c;f=h[g+(d<<2)>>2]}if(!((0|b)<=(0|y)||(0|(d=h[E+(m<<2)>>2]))>=(0|b)||(0|(m=h[E+(f<<2)>>2]))>=(0|b))){if(u=h[(s+16|0)+v(p,12)>>2],r){if(m=v(r,m),g=v(r,d),E=v(r,y),d=0,f=0,M)for(;h[u+(d<<2)>>2]=(h[(d+m<<2)+i>>2]+h[(d+g<<2)+i>>2]|0)-h[(d+E<<2)+i>>2],h[u+((y=1|d)<<2)>>2]=(h[(m+y<<2)+i>>2]+h[(g+y<<2)+i>>2]|0)-h[(y+E<<2)+i>>2],d=d+2|0,(0|C)!=(0|(f=f+2|0)););D&&(h[u+(d<<2)>>2]=(h[(d+m<<2)+i>>2]+h[(d+g<<2)+i>>2]|0)-h[(d+E<<2)+i>>2])}if(u=4,4==(0|(p=p+1|0)))break l}}c:if(1&_){if(f=-1,-1==(0|(n=((d=n+1|0)>>>0)%3|0?d:n-2|0)))break c;if(f=-1,-1==(0|(n=h[w+(n<<2)>>2])))break c;f=((u=n+1|0)>>>0)%3|0?u:n-2|0}else{if((n>>>0)%3|0)d=n-1|0;else if(f=-1,-1==(0|(d=n+2|0)))break c;f=-1,-1!=(0|(n=h[w+(d<<2)>>2]))&&(f=n-1|0,(n>>>0)%3|0||(f=n+2|0))}c:if((0|a)!=(0|(n=f))){if(!(1&(1^_)|-1!=(0|n))){if(!R)break c;if(-1==(0|(n=h[A>>2])))break c;_=0,n=(n>>>0)%3|0?n-1|0:n+2|0}if(-1!=(0|n))continue}break}if((0|(u=p))<=0)break o}for(r&&xt(h[s>>2],0,U),y=((n=u-1|0)<<2)+o|0,f=n=v(n,12)+e|0,R=h[n- -64>>2],E=0,_=0,n=0;;){if(a=h[y>>2],h[y>>2]=a+1,a>>>0>=R>>>0)break t;if(!(h[h[f+60>>2]+(a>>>3&536870908)>>2]>>>a&1)&&(n=n+1|0,r)){if(p=h[s>>2],w=h[(s+16|0)+v(_,12)>>2],m=0,d=0,a=0,M>>>0>=3)for(;h[(A=(g=d<<2)+p|0)>>2]=h[A>>2]+h[g+w>>2],h[(S=(A=4|g)+p|0)>>2]=h[S>>2]+h[w+A>>2],h[(S=(A=8|g)+p|0)>>2]=h[S>>2]+h[w+A>>2],h[(A=(g|=12)+p|0)>>2]=h[A>>2]+h[g+w>>2],d=d+4|0,(0|L)!=(0|(a=a+4|0)););if(O)for(;h[(g=(a=d<<2)+p|0)>>2]=h[g>>2]+h[a+w>>2],d=d+1|0,(0|O)!=(0|(m=m+1|0)););}if((0|(_=_+1|0))==(0|u))break}if(a=_=v(r,b),!n)break s;if(!r)break n;if(a=h[s>>2],d=0,u=0,M)break a;break r}a=v(r,b)}if(h[e+8>>2]<=0)break i;for(_=(v(b-1|0,r)<<2)+i|0,p=h[e+32>>2],d=0;(0|(u=h[(n=d<<2)+_>>2]))>(0|(m=h[e+16>>2]))?h[n+p>>2]=m:(n=n+p|0,m=h[e+12>>2],h[n>>2]=(0|m)>(0|u)?m:u),(0|(d=d+1|0))<(0|(u=h[e+8>>2])););if(n=0,(0|u)<=0)break i;for(d=(a<<=2)+i|0,_=t+a|0;;){a=(u=n<<2)+d|0,u=h[u+_>>2]+h[u+p>>2]|0,h[a>>2]=u;s:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break s;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(n=n+1|0))<h[e+8>>2]))break}break i}Sr(),x()}for(;h[(m=(p=d<<2)+a|0)>>2]=h[m>>2]/(0|n),h[(p=a+(4|p)|0)>>2]=h[p>>2]/(0|n),d=d+2|0,(0|C)!=(0|(u=u+2|0)););}D&&(h[(a=a+(d<<2)|0)>>2]=h[a>>2]/(0|n))}if(!(h[e+8>>2]<=0)){for(p=h[e+32>>2],d=0;(0|(a=h[(n=d<<2)+T>>2]))>(0|(u=h[e+16>>2]))?h[n+p>>2]=u:(n=n+p|0,u=h[e+12>>2],h[n>>2]=(0|u)>(0|a)?u:a),(0|(d=d+1|0))<(0|(a=h[e+8>>2])););if(n=0,!((0|a)<=0))for(d=(a=_<<2)+i|0,_=t+a|0;;){a=(u=n<<2)+d|0,u=h[u+_>>2]+h[u+p>>2]|0,h[a>>2]=u;n:{if((0|u)>h[e+16>>2])f=u-h[e+20>>2]|0;else{if((0|u)>=h[e+12>>2])break n;f=u+h[e+20>>2]|0}h[a>>2]=f}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}}if(E=1,(0|k)==(0|(b=b+1|0)))break}return(e=h[s>>2])&&ve(e),ve(o),(e=h[s+52>>2])&&(h[s+56>>2]=e,ve(e)),(e=h[s+40>>2])&&(h[s+44>>2]=e,ve(e)),(e=h[s+28>>2])&&(h[s+32>>2]=e,ve(e)),(e=h[s+16>>2])&&(h[s+20>>2]=e,ve(e)),N=s- -64|0,0|E}vr(),x()},function(e){var t=0;return h[(e|=0)>>2]=5844,(t=h[e+76>>2])&&ve(t),t=h[e+68>>2],h[e+68>>2]=0,t&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=5844,(t=h[e+76>>2])&&ve(t),t=h[e+68>>2],h[e+68>>2]=0,t&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},sr,An,hr,tr,Sn,Be,function(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,r|=0,s|=0;var o=0,l=0,c=b(0),u=0,f=b(0),p=0,g=b(0),y=b(0),A=b(0),E=0,S=b(0),M=0,R=b(0),P=b(0),C=b(0),D=b(0),O=b(0),k=b(0),I=b(0),L=b(0),U=b(0),B=0,F=b(0);h[e+64>>2]=s,h[e+72>>2]=r,s=gn((1073741823&r)!=(0|r)?-1:r<<2),n=h[e+68>>2],h[e+68>>2]=s,n&&ve(n),h[e+8>>2]=r,o=h[(s=e+32|0)>>2],(n=h[e+36>>2]-o>>2)>>>0<r>>>0?ei(s,r-n|0):n>>>0<=r>>>0||(h[e+36>>2]=o+(r<<2));e:if(n=h[e+56>>2],!((0|(n=(o=h[n+4>>2])-(s=h[n>>2])|0))<=0)){if((0|s)!=(0|o))for(B=(n=n>>>2|0)>>>0>1?n:1;;){if(f=b(0),N=o=N-48|0,l=-1,-1==(0|(n=h[(p<<2)+s>>2]))||(u=h[e+48>>2],-1!=(0|(s=((s=n+1|0)>>>0)%3|0?s:n-2|0))&&(l=h[h[u>>2]+(s<<2)>>2]),s=-1,-1!=(0|(n=n+((n>>>0)%3|0?-1:2)|0))&&(s=h[h[u>>2]+(n<<2)>>2]),n=h[e+52>>2],u=h[n>>2],(n=h[n+4>>2]-u>>2)>>>0<=l>>>0|n>>>0<=s>>>0))Sr(),x();else{n=h[u+(l<<2)>>2];t:if((0|(u=h[u+(s<<2)>>2]))>=(0|p)|(0|n)>=(0|p)){if((0|n)<(0|p))s=h[e+72>>2],n=v(n,s);else{if(s=0,(0|p)<=0){if(h[e+72>>2]<=0)break t;for(n=h[e+68>>2];h[n+(s<<2)>>2]=0,(0|(s=s+1|0))<h[e+72>>2];);break t}s=h[e+72>>2],n=v(s,p-1|0)}if(!((0|s)<=0))for(l=h[e+68>>2],s=0;h[l+(s<<2)>>2]=h[(n+s<<2)+i>>2],(0|(s=s+1|0))<h[e+72>>2];);}else{if(s=h[e+72>>2],l=(v(s,u)<<2)+i|0,g=b(h[l+4>>2]),s=(v(n,s)<<2)+i|0,S=b(h[s+4>>2]),!((R=b(h[l>>2]))!=(k=b(h[s>>2]))|g!=S)){if(n=h[e+68>>2],s=b(_(g))<b(2147483648)?~~g:-2147483648,h[n+4>>2]=s,b(_(R))<b(2147483648)){h[n>>2]=~~R;break t}h[n>>2]=-2147483648;break t}s=h[h[e+64>>2]+(p<<2)>>2],h[o+40>>2]=0,h[o+32>>2]=0,h[o+36>>2]=0,l=h[e+60>>2],d[l+84|0]||(s=h[h[l+68>>2]+(s<<2)>>2]),Q(l,s,a[l+24|0],o+32|0),s=h[h[e+64>>2]+(n<<2)>>2],h[o+24>>2]=0,h[o+16>>2]=0,h[o+20>>2]=0,n=h[e+60>>2],d[n+84|0]||(s=h[h[n+68>>2]+(s<<2)>>2]),Q(n,s,a[n+24|0],o+16|0),s=h[h[e+64>>2]+(u<<2)>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,n=h[e+60>>2],d[n+84|0]||(s=h[h[n+68>>2]+(s<<2)>>2]),Q(n,s,a[n+24|0],o),P=m[o+40>>2],C=m[o+36>>2],F=m[o+32>>2],y=m[o+24>>2],c=b(m[o+8>>2]-y),L=m[o+20>>2],D=b(m[o+4>>2]-L),U=m[o+16>>2],O=b(m[o>>2]-U),!((I=b(b(c*c)+b(b(D*D)+b(b(O*O)+b(0)))))>b(0))&&(A=b(0),h[e+88>>2]>257)||(y=b(P-y),P=b(C-L),C=b(F-U),f=b(b(b(c*y)+b(b(D*P)+b(b(O*C)+b(0))))/I),c=b(y-b(c*f)),y=b(c*c),c=b(P-b(D*f)),A=b(c*c),c=b(C-b(O*f)),A=b(T(b(b(y+b(A+b(b(c*c)+b(0))))/I)))),y=A,n=h[e+80>>2]-1|0,s=h[h[e+76>>2]+(n>>>3&536870908)>>2],h[e+80>>2]=n,c=b(g-S),A=b(b(c*f)+S),S=b(R-k),g=b(S*y),g=b(A+((n=s>>>n&1)?g:b(-g))),A=b(b(S*f)+k),f=b(c*y),(f=b(A+(n?b(-f):f)))==f?(s=h[e+68>>2],M=w(+f+.5),n=_(M)<2147483648?~~M:-2147483648,h[s>>2]=n):(s=h[e+68>>2],h[s>>2]=-2147483648),M=w(+g+.5),n=_(M)<2147483648?~~M:-2147483648,h[s+4>>2]=g!=g?-2147483648:n}N=o+48|0}if(!(h[e+8>>2]<=0)){for(l=h[e+32>>2],u=h[e+68>>2],s=0;(0|(o=h[(n=s<<2)+u>>2]))>(0|(E=h[e+16>>2]))?h[n+l>>2]=E:(n=n+l|0,E=h[e+12>>2],h[n>>2]=(0|E)>(0|o)?E:o),(0|(s=s+1|0))<(0|(o=h[e+8>>2])););if(n=0,!((0|o)<=0))for(u=(s=v(r,p)<<2)+i|0,E=t+s|0;;){s=(o=n<<2)+u|0,o=h[o+E>>2]+h[o+l>>2]|0,h[s>>2]=o;t:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break t;o=o+h[e+20>>2]|0}h[s>>2]=o}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if((0|B)==(0|(p=p+1|0)))break e;if(n=h[e+56>>2],s=h[n>>2],!(h[n+4>>2]-s>>2>>>0>p>>>0))break}Sr(),x()}return 1},function(e){var t=0;return h[(e|=0)>>2]=6060,(t=h[e+76>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t=0;h[(e|=0)>>2]=6060,(t=h[e+76>>2])&&ve(t),h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},lr,An,hr,tr,Sn,Ge,function(e,t,i,n,r,s){e|=0,t|=0,i|=0,n|=0,s|=0;var o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,U=0,B=0,F=0,G=0,V=0,z=0,H=0,j=0,W=0,Y=0,X=0,Z=0,q=0,Q=0;if(2==(0|(r|=0))){h[e+8>>2]=2,h[e- -64>>2]=s,s=h[(r=e+32|0)>>2],(n=h[e+36>>2]-s|0)>>>0<=7?ei(r,2-(n>>>2|0)|0):8!=(0|n)&&(h[e+36>>2]=s+8);e:if(n=h[e+56>>2],(0|(s=(r=h[n+4>>2])-(n=h[n>>2])|0))<=0)s=0;else{if((0|n)!=(0|r))for(m=e+60|0,Z=(0|(U=s>>2))>1?U:1,s=1;;){if(N=c=N-80|0,r=-1,-1==(0|(o=h[(b<<2)+n>>2]))||(l=h[m+32>>2],-1!=(0|(n=((n=o+1|0)>>>0)%3|0?n:o-2|0))&&(r=h[h[l>>2]+(n<<2)>>2]),n=-1,-1!=(0|(o=o+((o>>>0)%3|0?-1:2)|0))&&(n=h[h[l>>2]+(o<<2)>>2]),l=h[m+36>>2],o=h[l>>2],(l=h[l+4>>2]-o>>2)>>>0<=r>>>0|n>>>0>=l>>>0))Sr(),x();else{l=h[o+(r<<2)>>2];t:{i:{n:{r:{a:{if(!((0|(o=h[o+(n<<2)>>2]))>=(0|b)|(0|l)>=(0|b))){if(T=h[4+(n=(o<<3)+i|0)>>2],y=h[4+(r=(l<<3)+i|0)>>2],!((0|(E=h[n>>2]))!=(0|(O=h[r>>2]))|(0|y)!=(0|T))){h[m+8>>2]=O,h[m+12>>2]=y;break a}if(n=h[h[m+4>>2]+(b<<2)>>2],h[c+72>>2]=0,h[c+76>>2]=0,h[(r=c- -64|0)>>2]=0,h[r+4>>2]=0,h[c+56>>2]=0,h[c+60>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],c+56|0),n=h[h[m+4>>2]+(l<<2)>>2],h[c+48>>2]=0,h[c+52>>2]=0,h[c+40>>2]=0,h[c+44>>2]=0,h[c+32>>2]=0,h[c+36>>2]=0,r=h[m>>2],d[r+84|0]||(n=h[h[r+68>>2]+(n<<2)>>2]),ae(r,n,a[r+24|0],c+32|0),r=h[h[m+4>>2]+(o<<2)>>2],h[c+24>>2]=0,h[c+28>>2]=0,h[c+16>>2]=0,h[c+20>>2]=0,h[c+8>>2]=0,h[c+12>>2]=0,n=h[m>>2],d[n+84|0]||(r=h[h[n+68>>2]+(r<<2)>>2]),ae(n,r,a[n+24|0],c+8|0),B=h[c+44>>2],n=Zi(g=(n=h[c+16>>2])-(r=M=h[c+40>>2])|0,f=h[c+20>>2]-(B+(n>>>0<r>>>0)|0)|0,g,f),r=L,v=n,F=h[c+36>>2],o=Zi(w=(n=h[c+8>>2])-(o=k=h[c+32>>2])|0,u=h[c+12>>2]-(F+(n>>>0<o>>>0)|0)|0,w,u),r=L+r|0,r=(n=v+o|0)>>>0<o>>>0?r+1|0:r,v=n,G=h[c+52>>2],_=Zi(A=(n=h[c+24>>2])-(o=I=h[c+48>>2])|0,p=h[c+28>>2]-(G+(n>>>0<o>>>0)|0)|0,A,p),o=L+r|0,S=n=v+_|0,n|(_=n>>>0<_>>>0?o+1|0:o)){if(n=Zi((n=z=h[c+64>>2])-M|0,(H=h[c+68>>2])-((n>>>0<M>>>0)+B|0)|0,g,f),r=L,n=(o=n)+(l=Zi((n=j=h[c+56>>2])-k|0,(W=h[c+60>>2])-((n>>>0<k>>>0)+F|0)|0,w,u))|0,o=L+r|0,o=n>>>0<l>>>0?o+1|0:o,n=(r=n)+(l=Zi((n=Y=h[c+72>>2])-I|0,(X=h[c+76>>2])-((n>>>0<I>>>0)+G|0)|0,A,p))|0,r=L+o|0,P=n,R=n>>>0<l>>>0?r+1|0:r,o=(n=p>>31)+p|0,l=(r=n+A|0)^n,V=n^=o=r>>>0<n>>>0?o+1|0:o,r=(n=f>>31)+f|0,C=(o=n+g|0)^n,v=n^=o>>>0<n>>>0?r+1|0:r,r=0,o=(n=u>>31)+u|0,o=(D=n+w|0)>>>0<n>>>0?o+1|0:o,D^=n,(o=qe(-1,2147483647,(o=(0|V)==(0|(n=(o=(0|v)==(0|(n^=o))&C>>>0>D>>>0|n>>>0<v>>>0)?v:n))&l>>>0>(C=o?C:D)>>>0|n>>>0<V>>>0)?l:C,o?V:n)>>>0<P>>>0)&(0|(n=L))<=(0|R)|(0|n)<(0|R))break t;if(l=1,n=0,r=z,g=Yi(Zi(g,f,P,R),L,S,_),o=L+B|0,o=H-((r>>>0<(f=g+M|0)>>>0)+(o=f>>>0<g>>>0?o+1|0:o)|0)|0,o=Zi(r=r-f|0,o,r,o),g=L,r=j,v=o,u=Yi(Zi(w,u,P,R),L,S,_),o=L+F|0,o=W-((r>>>0<(f=u+k|0)>>>0)+(o=u>>>0>f>>>0?o+1|0:o)|0)|0,f=Zi(r=r-f|0,o,r,o),r=L+g|0,f=r=(o=v+f|0)>>>0<f>>>0?r+1|0:r,r=Y,v=o,p=Yi(Zi(A,p,P,R),L,S,_),o=L+G|0,o=X-((r>>>0<(u=p+I|0)>>>0)+(o=u>>>0<p>>>0?o+1|0:o)|0)|0,u=Zi(r=r-u|0,o,r,o),o=L+f|0,f=Zi(r=v+u|0,r>>>0<u>>>0?o+1|0:o,S,_),u=r=L,!r&f>>>0<=1)break r;for(p=f,r=u;o=n<<1|l>>>31,l<<=1,n=o,g=!r&p>>>0>7|0!=(0|r),p=(3&r)<<30|p>>>2,r=r>>>2|0,g;);break n}}if((0|l)<(0|b))n=l<<1;else{if((0|b)<=0){h[m+8>>2]=0,h[m+12>>2]=0;break a}n=(b<<1)-2|0}n=(n<<2)+i|0,h[m+8>>2]=h[n>>2],h[m+12>>2]=h[n+4>>2]}r=1;break t}if(n=u,(l=f)-1|0)break i}for(;o=qe(f,u,l,n)+l|0,r=n+L|0,r=Zi(l=(1&(r=o>>>0<l>>>0?r+1|0:r))<<31|o>>>1,n=r>>>1|0,l,n),(0|u)==(0|(o=L))&r>>>0>f>>>0|o>>>0>u>>>0;);}(f=h[m+20>>2])&&(r=f-1|0,p=h[h[m+16>>2]+(r>>>3&536870908)>>2],h[m+20>>2]=r,o=Zi(P,R,g=T-(o=y)|0,w=(T>>31)-((u=o>>31)+(o>>>0>T>>>0)|0)|0),A=L,u=(y=Zi(y,u,S,_))+o|0,o=L+A|0,o=u>>>0<y>>>0?o+1|0:o,v=u,E=u=Zi(l,n,A=E-(u=O)|0,T=(E>>31)-((y=u>>31)+(u>>>0>E>>>0)|0)|0),p=v+(M=(r=u=p>>>r&1)?0-E|0:E)|0,v=o,o=L,r=v+(r?0-(o+(0!=(0|E))|0)|0:o)|0,q=m,Q=Yi(p,p>>>0<M>>>0?r+1|0:r,S,_),h[q+12>>2]=Q,r=Zi(A,T,P,R),o=L,p=Zi(S,_,O,y),o=L+o|0,o=(r=p+r|0)>>>0<p>>>0?o+1|0:o,n=Zi(l,n,g,w),l=(p=u?n:0-n|0)+r|0,r=L,r=(u?r:0-((0!=(0|n))+r|0)|0)+o|0,q=m,Q=Yi(l,l>>>0<p>>>0?r+1|0:r,S,_),h[q+8>>2]=Q),r=0!=(0|f)}N=c+80|0}if(!r)break e;if(!(h[e+8>>2]<=0)){for(o=h[e+32>>2],n=0;(0|(s=h[68+((r=n<<2)+e|0)>>2]))>(0|(l=h[e+16>>2]))?h[r+o>>2]=l:(r=r+o|0,l=h[e+12>>2],h[r>>2]=(0|l)>(0|s)?l:s),(0|(n=n+1|0))<(0|(s=h[e+8>>2])););if(r=0,!((0|s)<=0))for(l=(n=b<<3)+i|0,f=t+n|0;;){n=(s=r<<2)+l|0,s=h[s+f>>2]+h[s+o>>2]|0,h[n>>2]=s;t:{if((0|s)>h[e+16>>2])s=s-h[e+20>>2]|0;else{if((0|s)>=h[e+12>>2])break t;s=s+h[e+20>>2]|0}h[n>>2]=s}if(!((0|(r=r+1|0))<h[e+8>>2]))break}}if(s=(0|U)>(0|(b=b+1|0)),(0|b)==(0|Z))break e;if(r=h[e+56>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>b>>>0))break}Sr(),x()}e=1^s}else e=0;return 1&e},function(e){var t;return h[(e|=0)>>2]=6284,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),0|e},function(e){var t;h[(e|=0)>>2]=6284,h[e>>2]=3300,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),ve(e)},ur,on,hr,tr,Tn,nt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0;N=s=N-32|0,h[68+(e|=0)>>2]=a,r=h[e+56>>2],n=h[r>>2],a=h[r+4>>2],h[s+24>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+112|0,p=e+60|0,m=(r=a>>>2|0)>>>0>1?r:1;;){if(me(p,h[(u<<2)+n>>2],s+16|0),n=(r=h[s+20>>2])>>31,o=(a=h[s+16>>2])>>31,l=(c=h[s+24>>2])>>31,o=(l^=l+c)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+108>>2],d=l>>31,a,a>>31),L,o,n),h[s+16>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+20>>2]=n,n=(r=(r=n)+(n>>=31)^n)+((n=a>>31)+a^n)|0,h[s+24>>2]=(0|c)>=0?l-n:n-l):h[s+16>>2]=h[e+108>>2],n=Gi(f),a=h[s+16>>2],n?(h[s+24>>2]=0-h[s+24>>2],r=0-h[s+20>>2]|0,h[s+20>>2]=r,a=0-a|0,h[s+16>>2]=a):r=h[s+20>>2],(0|a)>=0?(a=(n=h[e+108>>2])+h[s+24>>2]|0,n=n+r|0):((0|r)<0?(n=(a=h[s+24>>2])>>31,n^=n+a):(n=(a=h[s+24>>2])>>31,n=h[e+100>>2]-(n^n+a)|0),(0|a)<0?a=(a=r)+(r>>=31)^r:(a=r,r>>=31,a=h[e+100>>2]-(a+r^r)|0)),r=h[e+100>>2],n|a?(0|r)!=(0|a)|n?(0|n)!=(0|r)|a?n||(0|(o=h[e+108>>2]))>=(0|a)?(0|n)!=(0|r)||(0|(o=h[e+108>>2]))<=(0|a)?(0|r)!=(0|a)||(0|(r=h[e+108>>2]))<=(0|n)?a||(a=0,(0|(r=h[e+108>>2]))>=(0|n)||(n=(r<<1)-n|0)):n=(r<<1)-n|0:a=(o<<1)-a|0:(a=(o<<1)-a|0,n=0):a=n:n=a:n=a=r,h[s+12>>2]=a,h[s+8>>2]=n,!(h[e+8>>2]<=0)){for(o=h[e+32>>2],a=0;(0|(r=h[e+16>>2]))<(0|n)?h[o+(a<<2)>>2]=r:(r=o+(a<<2)|0,c=h[e+12>>2],h[r>>2]=(0|c)>(0|n)?c:n),(0|(a=a+1|0))<(0|(r=h[e+8>>2]));)n=h[(s+8|0)+(a<<2)>>2];if(n=0,!((0|r)<=0))for(c=(r=u<<3)+i|0,l=t+r|0;;){r=(a=n<<2)+c|0,a=h[a+l>>2]+h[a+o>>2]|0,h[r>>2]=a;t:{if((0|a)>h[e+16>>2])a=a-h[e+20>>2]|0;else{if((0|a)>=h[e+12>>2])break t;a=a+h[e+20>>2]|0}h[r>>2]=a}if(!((0|(n=n+1|0))<h[e+8>>2]))break}}if((0|m)==(0|(u=u+1|0)))break e;if(r=h[e+56>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>u>>>0))break}Sr(),x()}return N=s+32|0,1},ar,fr,bn,Zn,me,gr,Rn,dr,hr,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,m=0,g=0;if(h[8+(e|=0)>>2]=r,c=h[(a=e+32|0)>>2],(l=h[e+36>>2]-c>>2)>>>0<r>>>0?(ei(a,r-l|0),c=h[a>>2],a=h[e+8>>2]):(r>>>0<l>>>0&&(h[e+36>>2]=(r<<2)+c),a=r),l=0,s=xt(gn(o=(1073741823&r)!=(0|r)?-1:r<<2),0,o),!((0|a)<=0)){for(;(0|(o=h[(a=l<<2)+s>>2]))>(0|(u=h[e+16>>2]))?h[a+c>>2]=u:(a=a+c|0,u=h[e+12>>2],h[a>>2]=(0|u)>(0|o)?u:o),(0|(a=h[e+8>>2]))>(0|(l=l+1|0)););if(!((0|a)<=0))for(l=0;;){a=(o=l<<2)+i|0,o=h[t+o>>2]+h[o+c>>2]|0,h[a>>2]=o;e:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break e;o=o+h[e+20>>2]|0}h[a>>2]=o}if(!((0|(a=h[e+8>>2]))>(0|(l=l+1|0))))break}}if(!((0|n)<=(0|r)|(0|a)<=0))for(m=0-r<<2,c=r;;){if(!((0|a)<=0)){for(g=(p=(f=c<<2)+i|0)+m|0,u=h[e+32>>2],l=0;(0|(o=h[(a=l<<2)+g>>2]))>(0|(d=h[e+16>>2]))?h[a+u>>2]=d:(a=a+u|0,d=h[e+12>>2],h[a>>2]=(0|d)>(0|o)?d:o),(0|(a=h[e+8>>2]))>(0|(l=l+1|0)););if(l=0,!((0|a)<=0))for(f=t+f|0;;){a=(o=l<<2)+p|0,o=h[o+f>>2]+h[o+u>>2]|0,h[a>>2]=o;e:{if((0|o)>h[e+16>>2])o=o-h[e+20>>2]|0;else{if((0|o)>=h[e+12>>2])break e;o=o+h[e+20>>2]|0}h[a>>2]=o}if(!((0|(a=h[e+8>>2]))>(0|(l=l+1|0))))break}}if(!((0|(c=r+c|0))<(0|n)))break}return ve(s),1},ln,hn,function(e,t,i){t|=0,i|=0;var n=0;return h[4+(e|=0)>>2]=t,t=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=t,e=h[e+8>>2],3==d[e+24|0]&&(n=9==h[e+28>>2]),0|n},function(e,t,i){return t|=0,i|=0,d[h[4+(e|=0)>>2]+36|0]>=2&&(t=0,!Di(e+24|0,Ht(e),i))||(t=Fi(e+24|0,h[e+16>>2])),0|t},function(e,t,i){t|=0,i|=0;var n=0;return d[h[4+(e|=0)>>2]+36|0]<=1&&(n=0,!Di(e+24|0,h[e+8>>2],i))||(n=Te(e,t,i)),0|n},function(e,t,i){e|=0,t|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0;N=n=N-32|0;e:{t:switch((i|=0)-2|0){case 0:if(i=h[e+4>>2],s=h[e+12>>2],h[n+24>>2]=-1,h[n+16>>2]=-1,h[n+20>>2]=1065353216,h[n+8>>2]=-1,h[n+12>>2]=-1,-2==(0|t))break e;if(u=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2],1==(0|Rr[h[h[i>>2]+8>>2]](i))){c=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2];i:if(!(1!=(0|Rr[h[h[i>>2]+8>>2]](i))|t-1>>>0>5||!(l=0|Rr[h[h[i>>2]+36>>2]](i))|!(e=0|Rr[h[h[i>>2]+44>>2]](i,s))))if(o=e+12|0,s=0|Rr[h[h[i>>2]+40>>2]](i,s),i=h[i+44>>2],s){if(6!=(0|t))break i;r=gn(112),h[r+4>>2]=c,t=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=t,t=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=t,h[r+24>>2]=h[n+24>>2],h[r+40>>2]=e,h[r+36>>2]=o,h[r+32>>2]=s,h[r+28>>2]=i,h[r+68>>2]=e,h[r- -64>>2]=o,h[r+60>>2]=s,h[r+56>>2]=i,h[r+48>>2]=0,h[r+52>>2]=0,h[r>>2]=7172,h[r+88>>2]=1065353216,h[r+92>>2]=-1,h[r+80>>2]=-1,h[r+84>>2]=-1,h[r+72>>2]=1,h[r+76>>2]=-1,h[r+44>>2]=7696,h[(e=r+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0}else 6==(0|t)&&(r=gn(112),h[r+4>>2]=c,t=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=t,t=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=t,h[r+24>>2]=h[n+24>>2],h[r+40>>2]=e,h[r+36>>2]=o,h[r+32>>2]=l,h[r+28>>2]=i,h[r+68>>2]=e,h[r- -64>>2]=o,h[r+60>>2]=l,h[r+56>>2]=i,h[r+48>>2]=0,h[r+52>>2]=0,h[r>>2]=8108,h[r+88>>2]=1065353216,h[r+92>>2]=-1,h[r+80>>2]=-1,h[r+84>>2]=-1,h[r+72>>2]=1,h[r+76>>2]=-1,h[r+44>>2]=8500,h[(e=r+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0);if(r)break e}r=gn(28),h[r+4>>2]=u,e=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=e,e=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=e,h[r+24>>2]=h[n+24>>2],h[r>>2]=8888;break e;case 1:break t;default:break e}if(i=h[e+4>>2],s=h[e+12>>2],h[n+24>>2]=-1,h[n+16>>2]=-1,h[n+20>>2]=1065353216,h[n+8>>2]=-1,h[n+12>>2]=-1,-2!=(0|t)){if(u=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2],1==(0|Rr[h[h[i>>2]+8>>2]](i))){c=h[h[h[i+4>>2]+8>>2]+(s<<2)>>2];t:if(!(1!=(0|Rr[h[h[i>>2]+8>>2]](i))|t-1>>>0>5||!(l=0|Rr[h[h[i>>2]+36>>2]](i))|!(e=0|Rr[h[h[i>>2]+44>>2]](i,s))))if(o=e+12|0,s=0|Rr[h[h[i>>2]+40>>2]](i,s),i=h[i+44>>2],s){if(6!=(0|t))break t;r=gn(112),h[r+4>>2]=c,t=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=t,t=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=t,h[r+24>>2]=h[n+24>>2],h[r+40>>2]=e,h[r+36>>2]=o,h[r+32>>2]=s,h[r+28>>2]=i,h[r+68>>2]=e,h[r- -64>>2]=o,h[r+60>>2]=s,h[r+56>>2]=i,h[r+48>>2]=0,h[r+52>>2]=0,h[r>>2]=9056,h[r+88>>2]=1065353216,h[r+92>>2]=-1,h[r+80>>2]=-1,h[r+84>>2]=-1,h[r+72>>2]=1,h[r+76>>2]=-1,h[r+44>>2]=9620,h[(e=r+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0}else 6==(0|t)&&(r=gn(112),h[r+4>>2]=c,t=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=t,t=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=t,h[r+24>>2]=h[n+24>>2],h[r+40>>2]=e,h[r+36>>2]=o,h[r+32>>2]=l,h[r+28>>2]=i,h[r+68>>2]=e,h[r- -64>>2]=o,h[r+60>>2]=l,h[r+56>>2]=i,h[r+48>>2]=0,h[r+52>>2]=0,h[r>>2]=10060,h[r+88>>2]=1065353216,h[r+92>>2]=-1,h[r+80>>2]=-1,h[r+84>>2]=-1,h[r+72>>2]=1,h[r+76>>2]=-1,h[r+44>>2]=10480,h[(e=r+96|0)>>2]=0,h[e+4>>2]=0,a[e+5|0]=0,a[e+6|0]=0,a[e+7|0]=0,a[e+8|0]=0,a[e+9|0]=0,a[e+10|0]=0,a[e+11|0]=0,a[e+12|0]=0);if(r)break e}r=gn(28),h[r+4>>2]=u,e=h[n+12>>2],h[r+8>>2]=h[n+8>>2],h[r+12>>2]=e,e=h[n+20>>2],h[r+16>>2]=h[n+16>>2],h[r+20>>2]=e,h[r+24>>2]=h[n+24>>2],h[r>>2]=10892}}return N=n+32|0,0|r},cr,function(e,t){return 0|ht(24+(e|=0)|0,Ht(e),h[e+8>>2])},function(e){return h[(e|=0)>>2]=7172,0|e},function(e){h[(e|=0)>>2]=7172,ve(e)},ur,Kn,cn,hr,tr,Mn,hr,cr,gt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,v=0;N=s=N-48|0,(n=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=n,n=-2-(r=-1<<n)|0,h[e+84>>2]=n,h[e+80>>2]=-1^r,h[e+92>>2]=(0|n)/2,m[e+88>>2]=b(2)/b(0|n)),h[e+52>>2]=a,r=h[e+40>>2],n=h[r>>2],a=h[r+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,v=(r=a>>>2|0)>>>0>1?r:1;;){if(se(g,h[(c<<2)+n>>2],s+8|0),n=(r=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,n),h[s+8>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+12>>2]=n,r=n>>31,n=(r^=n+r)+((n=a>>31)+a^n)|0,h[s+16>>2]=(0|u)>=0?l-n:n-l):h[s+8>>2]=h[e+92>>2],n=Gi(p),a=h[s+8>>2],n?(h[s+16>>2]=0-h[s+16>>2],r=0-h[s+12>>2]|0,h[s+12>>2]=r,a=0-a|0,h[s+8>>2]=a):r=h[s+12>>2],(0|a)>=0?(n=(a=h[e+92>>2])+h[s+16>>2]|0,a=r+a|0):((0|r)<0?(a=(n=h[s+16>>2])>>31,a^=n+a):(a=(n=h[s+16>>2])>>31,a=h[e+84>>2]-(a^n+a)|0),(0|n)<0?(n=r>>31,n^=n+r):(n=r>>31,n=h[e+84>>2]-(n+r^n)|0)),r=h[e+84>>2],n|a?(0|n)!=(0|r)|a?(0|r)!=(0|a)|n?a||(0|(o=h[e+92>>2]))>=(0|n)?(0|r)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|n)?(0|n)!=(0|r)||(0|(r=h[e+92>>2]))<=(0|a)?n||(n=0,(0|(r=h[e+92>>2]))>=(0|a)||(a=(r<<1)-a|0)):a=(r<<1)-a|0:n=(o<<1)-n|0:(n=(o<<1)-n|0,a=0):n=a:a=n:a=n=r,u=h[4+(o=(r=c<<3)+t|0)>>2],h[s+40>>2]=h[o>>2],h[s+44>>2]=u,h[s+28>>2]=n,h[s+24>>2]=a,Je(s+32|0,f,s+24|0,s+40|0),h[(n=i+r|0)>>2]=h[s+32>>2],h[n+4>>2]=h[s+36>>2],(0|v)==(0|(c=c+1|0)))break e;if(r=h[e+40>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>c>>>0))break}Sr(),x()}return N=s+48|0,1},ar,fr,bn,Zn,se,function(e){return h[(e|=0)>>2]=8108,0|e},function(e){h[(e|=0)>>2]=8108,ve(e)},ur,cn,hr,tr,Mn,gt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,v=0;N=s=N-48|0,(n=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=n,n=-2-(r=-1<<n)|0,h[e+84>>2]=n,h[e+80>>2]=-1^r,h[e+92>>2]=(0|n)/2,m[e+88>>2]=b(2)/b(0|n)),h[e+52>>2]=a,r=h[e+40>>2],n=h[r>>2],a=h[r+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,v=(r=a>>>2|0)>>>0>1?r:1;;){if(me(g,h[(c<<2)+n>>2],s+8|0),n=(r=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,n),h[s+8>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+12>>2]=n,r=n>>31,n=(r^=n+r)+((n=a>>31)+a^n)|0,h[s+16>>2]=(0|u)>=0?l-n:n-l):h[s+8>>2]=h[e+92>>2],n=Gi(p),a=h[s+8>>2],n?(h[s+16>>2]=0-h[s+16>>2],r=0-h[s+12>>2]|0,h[s+12>>2]=r,a=0-a|0,h[s+8>>2]=a):r=h[s+12>>2],(0|a)>=0?(n=(a=h[e+92>>2])+h[s+16>>2]|0,a=r+a|0):((0|r)<0?(a=(n=h[s+16>>2])>>31,a^=n+a):(a=(n=h[s+16>>2])>>31,a=h[e+84>>2]-(a^n+a)|0),(0|n)<0?(n=r>>31,n^=n+r):(n=r>>31,n=h[e+84>>2]-(n+r^n)|0)),r=h[e+84>>2],n|a?(0|n)!=(0|r)|a?(0|r)!=(0|a)|n?a||(0|(o=h[e+92>>2]))>=(0|n)?(0|r)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|n)?(0|n)!=(0|r)||(0|(r=h[e+92>>2]))<=(0|a)?n||(n=0,(0|(r=h[e+92>>2]))>=(0|a)||(a=(r<<1)-a|0)):a=(r<<1)-a|0:n=(o<<1)-n|0:(n=(o<<1)-n|0,a=0):n=a:a=n:a=n=r,u=h[4+(o=(r=c<<3)+t|0)>>2],h[s+40>>2]=h[o>>2],h[s+44>>2]=u,h[s+28>>2]=n,h[s+24>>2]=a,Je(s+32|0,f,s+24|0,s+40|0),h[(n=i+r|0)>>2]=h[s+32>>2],h[n+4>>2]=h[s+36>>2],(0|v)==(0|(c=c+1|0)))break e;if(r=h[e+40>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>c>>>0))break}Sr(),x()}return N=s+48|0,1},ar,fr,bn,Zn,me,ar,fr,dr,hr,dr,Qn,tr,function(e,t){e|=0;var i,n,r,a=0,s=0,o=0,l=0,c=0;o=h[12+(t|=0)>>2],l=a=h[t+20>>2],a=(s=(i=h[t+16>>2])+4|0)>>>0<4?a+1|0:a,r=s;e:if(!((n=h[t+8>>2])>>>0<s>>>0&(0|a)>=(0|o)|(0|a)>(0|o))){if(s=i+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=r,h[t+20>>2]=a,f[t+38>>1]<=513){if(a=l,(l=i+8|0)>>>0>n>>>0&(0|(a=l>>>0<8?a+1|0:a))>=(0|o)|(0|a)>(0|o))break e;h[t+16>>2]=l,h[t+20>>2]=a}1&s&&((a=(t=31^y(s))-30|0)>>>0>=4294967267&&(h[e+8>>2]=t+1,t=-2-(o=-2<<t)|0,h[e+16>>2]=t,h[e+12>>2]=-1^o,h[e+24>>2]=(0|t)/2,m[e+20>>2]=b(2)/b(0|t)),c=a>>>0>4294967266)}return 0|c},function(e,t,i,n,r,a){e|=0,t|=0,i|=0,n|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(N=a=N-32|0,s=xt(gn(o=(1073741823&(r|=0))!=(0|r)?-1:r<<2),0,o),c=h[(o=s)>>2],o=h[o+4>>2],d=h[t+4>>2],h[a+24>>2]=h[t>>2],h[a+28>>2]=d,h[a+8>>2]=c,h[a+12>>2]=o,Je(a+16|0,c=e+8|0,a+8|0,a+24|0),h[i>>2]=h[a+16>>2],h[i+4>>2]=h[a+20>>2],(0|n)>(0|r))for(d=0-r<<2,e=r;f=h[(u=(o=(l=e<<2)+i|0)+d|0)>>2],u=h[u+4>>2],p=h[4+(l=t+l|0)>>2],h[a+24>>2]=h[l>>2],h[a+28>>2]=p,h[a+8>>2]=f,h[a+12>>2]=u,Je(a+16|0,c,a+8|0,a+24|0),h[o>>2]=h[a+16>>2],h[o+4>>2]=h[a+20>>2],(0|n)>(0|(e=e+r|0)););return ve(s),N=a+32|0,1},function(e){return h[(e|=0)>>2]=9056,0|e},function(e){h[(e|=0)>>2]=9056,ve(e)},ur,Kn,cn,hr,tr,Mn,hr,sr,vt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,v=0;N=s=N-48|0,(n=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=n,n=-2-(r=-1<<n)|0,h[e+84>>2]=n,h[e+80>>2]=-1^r,h[e+92>>2]=(0|n)/2,m[e+88>>2]=b(2)/b(0|n)),h[e+52>>2]=a,r=h[e+40>>2],n=h[r>>2],a=h[r+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,v=(r=a>>>2|0)>>>0>1?r:1;;){if(se(g,h[(c<<2)+n>>2],s+8|0),n=(r=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,n),h[s+8>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+12>>2]=n,r=n>>31,n=(r^=n+r)+((n=a>>31)+a^n)|0,h[s+16>>2]=(0|u)>=0?l-n:n-l):h[s+8>>2]=h[e+92>>2],n=Gi(p),a=h[s+8>>2],n?(h[s+16>>2]=0-h[s+16>>2],r=0-h[s+12>>2]|0,h[s+12>>2]=r,a=0-a|0,h[s+8>>2]=a):r=h[s+12>>2],(0|a)>=0?(n=(a=h[e+92>>2])+h[s+16>>2]|0,a=r+a|0):((0|r)<0?(a=(n=h[s+16>>2])>>31,a^=n+a):(a=(n=h[s+16>>2])>>31,a=h[e+84>>2]-(a^n+a)|0),(0|n)<0?(n=r>>31,n^=n+r):(n=r>>31,n=h[e+84>>2]-(n+r^n)|0)),r=h[e+84>>2],n|a?(0|n)!=(0|r)|a?(0|r)!=(0|a)|n?a||(0|(o=h[e+92>>2]))>=(0|n)?(0|r)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|n)?(0|n)!=(0|r)||(0|(r=h[e+92>>2]))<=(0|a)?n||(n=0,(0|(r=h[e+92>>2]))>=(0|a)||(a=(r<<1)-a|0)):a=(r<<1)-a|0:n=(o<<1)-n|0:(n=(o<<1)-n|0,a=0):n=a:a=n:a=n=r,u=h[4+(o=(r=c<<3)+t|0)>>2],o=h[o>>2],h[s+36>>2]=n,h[s+32>>2]=a,h[s+24>>2]=o,h[s+28>>2]=u,Ie(s+40|0,f,s+32|0,s+24|0),h[(n=i+r|0)>>2]=h[s+40>>2],h[n+4>>2]=h[s+44>>2],(0|v)==(0|(c=c+1|0)))break e;if(r=h[e+40>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>c>>>0))break}Sr(),x()}return N=s+48|0,1},ar,fr,bn,Zn,se,function(e){return h[(e|=0)>>2]=10060,0|e},function(e){h[(e|=0)>>2]=10060,ve(e)},ur,cn,hr,tr,Mn,vt,function(e,t,i,n,r,a){t|=0,i|=0,n|=0,r|=0,a|=0;var s,o=0,l=0,c=0,u=0,d=0,f=0,p=0,g=0,v=0;N=s=N-48|0,(n=h[8+(e|=0)>>2])-31>>>0>=4294967267&&(h[e+76>>2]=n,n=-2-(r=-1<<n)|0,h[e+84>>2]=n,h[e+80>>2]=-1^r,h[e+92>>2]=(0|n)/2,m[e+88>>2]=b(2)/b(0|n)),h[e+52>>2]=a,r=h[e+40>>2],n=h[r>>2],a=h[r+4>>2],h[s+16>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0;e:if(!((0|(a=a-n|0))<=0)){if((0|(n=h[r>>2]))!=h[r+4>>2])for(f=e+8|0,p=e+96|0,g=e+44|0,v=(r=a>>>2|0)>>>0>1?r:1;;){if(me(g,h[(c<<2)+n>>2],s+8|0),n=(r=h[s+12>>2])>>31,o=(a=h[s+8>>2])>>31,l=(u=h[s+16>>2])>>31,o=(l^=l+u)+((n^n+r)+(o^a+o)|0)|0,n=0,(n=o>>>0<l>>>0?1:n)|o?(a=Yi(Zi(l=h[e+92>>2],d=l>>31,a,a>>31),L,o,n),h[s+8>>2]=a,n=Yi(Zi(l,d,r,r>>31),L,o,n),h[s+12>>2]=n,r=n>>31,n=(r^=n+r)+((n=a>>31)+a^n)|0,h[s+16>>2]=(0|u)>=0?l-n:n-l):h[s+8>>2]=h[e+92>>2],n=Gi(p),a=h[s+8>>2],n?(h[s+16>>2]=0-h[s+16>>2],r=0-h[s+12>>2]|0,h[s+12>>2]=r,a=0-a|0,h[s+8>>2]=a):r=h[s+12>>2],(0|a)>=0?(n=(a=h[e+92>>2])+h[s+16>>2]|0,a=r+a|0):((0|r)<0?(a=(n=h[s+16>>2])>>31,a^=n+a):(a=(n=h[s+16>>2])>>31,a=h[e+84>>2]-(a^n+a)|0),(0|n)<0?(n=r>>31,n^=n+r):(n=r>>31,n=h[e+84>>2]-(n+r^n)|0)),r=h[e+84>>2],n|a?(0|n)!=(0|r)|a?(0|r)!=(0|a)|n?a||(0|(o=h[e+92>>2]))>=(0|n)?(0|r)!=(0|a)||(0|(o=h[e+92>>2]))<=(0|n)?(0|n)!=(0|r)||(0|(r=h[e+92>>2]))<=(0|a)?n||(n=0,(0|(r=h[e+92>>2]))>=(0|a)||(a=(r<<1)-a|0)):a=(r<<1)-a|0:n=(o<<1)-n|0:(n=(o<<1)-n|0,a=0):n=a:a=n:a=n=r,u=h[4+(o=(r=c<<3)+t|0)>>2],o=h[o>>2],h[s+36>>2]=n,h[s+32>>2]=a,h[s+24>>2]=o,h[s+28>>2]=u,Ie(s+40|0,f,s+32|0,s+24|0),h[(n=i+r|0)>>2]=h[s+40>>2],h[n+4>>2]=h[s+44>>2],(0|v)==(0|(c=c+1|0)))break e;if(r=h[e+40>>2],n=h[r>>2],!(h[r+4>>2]-n>>2>>>0>c>>>0))break}Sr(),x()}return N=s+48|0,1},ar,fr,bn,Zn,me,fr,dr,hr,dr,Qn,tr,function(e,t){e|=0;var i,n,r,a,s=0,o=0,l=0,c=0;return i=h[12+(t|=0)>>2],l=s=h[t+20>>2],s=(o=(n=h[t+16>>2])+4|0)>>>0<4?s+1|0:s,a=o,(r=h[t+8>>2])>>>0<o>>>0&(0|s)>=(0|i)|(0|s)>(0|i)||(o=n+h[t>>2]|0,o=d[0|o]|d[o+1|0]<<8|d[o+2|0]<<16|d[o+3|0]<<24,h[t+16>>2]=a,h[t+20>>2]=s,s=l,(l=n+8|0)>>>0>r>>>0&(0|(s=l>>>0<8?s+1|0:s))>=(0|i)|(0|s)>(0|i)||(h[t+16>>2]=l,h[t+20>>2]=s,1&o&&((t=31^y(o))-30>>>0<4294967267||(c=1,h[e+8>>2]=t+1,t=-2-(s=-2<<t)|0,h[e+16>>2]=t,h[e+12>>2]=-1^s,h[e+24>>2]=(0|t)/2,m[e+20>>2]=b(2)/b(0|t))))),0|c},function(e,t,i,n,r,a){e|=0,t|=0,i|=0,n|=0,a|=0;var s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(N=a=N-32|0,o=xt(gn(o=(1073741823&(r|=0))!=(0|r)?-1:r<<2),0,o),s=h[t>>2],l=h[t+4>>2],u=h[o+4>>2],h[a+16>>2]=h[o>>2],h[a+20>>2]=u,h[a+8>>2]=s,h[a+12>>2]=l,Ie(a+24|0,l=e+8|0,a+16|0,a+8|0),h[i>>2]=h[a+24>>2],h[i+4>>2]=h[a+28>>2],(0|n)>(0|r))for(u=0-r<<2,e=r;f=h[(c=(s=e<<2)+t|0)>>2],c=h[c+4>>2],p=h[4+(d=(s=i+s|0)+u|0)>>2],h[a+16>>2]=h[d>>2],h[a+20>>2]=p,h[a+8>>2]=f,h[a+12>>2]=c,Ie(a+24|0,l,a+16|0,a+8|0),h[s>>2]=h[a+24>>2],h[s+4>>2]=h[a+28>>2],(0|n)>(0|(e=e+r|0)););return ve(o),N=a+32|0,1},function(e){var t=0;return h[24+(e|=0)>>2]=1140,h[e>>2]=11076,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),h[e>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rr[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),0|e},function(e){var t=0;h[24+(e|=0)>>2]=1140,h[e>>2]=11076,(t=h[e+32>>2])&&(h[e+36>>2]=t,ve(t)),h[e>>2]=2476,t=h[e+20>>2],h[e+20>>2]=0,t&&Rr[h[h[t>>2]+4>>2]](t),h[e>>2]=2260,t=h[e+16>>2],h[e+16>>2]=0,t&&ji(t),ve(e)},function(e,t,i){var n;return t|=0,i|=0,h[4+(e|=0)>>2]=t,n=h[h[h[t+4>>2]+8>>2]+(i<<2)>>2],h[e+12>>2]=i,h[e+8>>2]=n,9==h[h[h[h[t+4>>2]+8>>2]+(i<<2)>>2]+28>>2]|0},function(e,t,i){return t|=0,d[h[4+(e|=0)>>2]+36|0]>=2&&(t=0,!(0|Rr[h[h[e>>2]+52>>2]](e)))||(t=Fi(e+24|0,h[e+16>>2])),0|t},function(e,t,i){t|=0,i|=0;var n=0;return d[h[4+(e|=0)>>2]+36|0]<=1&&(n=0,!(0|Rr[h[h[e>>2]+52>>2]](e)))||(n=Te(e,t,i)),0|n},function(e,t){return t|=0,0|Rr[h[h[(e|=0)>>2]+56>>2]](e,t)},function(e){return 0|at(24+(e|=0)|0,Ht(e)||h[e+8>>2],h[h[e+4>>2]+32>>2])},function(e,t){return 0|et(24+(e|=0)|0,Ht(e),h[e+8>>2])},function(e){var t,i=0,n=0;if(h[(e|=0)>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,ve(i)),t=h[e+8>>2]){if((0|(n=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+8>>2]}h[e+12>>2]=t,ve(i)}return 0|e},gr,hr,hr,function(e){return h[44+(e|=0)>>2]?0|Rr[h[h[e>>2]+48>>2]](e):0},function(e){var t=0,i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0;e:{if(i=h[32+(e|=0)>>2],r=h[i+8>>2],t=0,!((0|(a=h[i+12>>2]))<=(0|(n=h[i+20>>2]))&(s=r)>>>0<=(r=h[i+16>>2])>>>0|(0|n)>(0|a))){s=d[r+h[i>>2]|0],n=(a=r+1|0)?n:n+1|0,h[i+16>>2]=a,h[i+20>>2]=n;t:if(s){for(;;){if(0|Rr[h[h[e>>2]+16>>2]](e,t)){if((0|s)!=(0|(t=t+1|0)))continue;break t}break}return 0}if((0|(t=h[e+8>>2]))!=(0|(n=h[e+12>>2])))for(;;){if(i=h[t>>2],!(0|Rr[h[h[i>>2]+8>>2]](i,e,h[e+4>>2])))break e;if((0|n)==(0|(t=t+4|0)))break}if(s){for(t=0;;){if(i=h[h[e+8>>2]+(t<<2)>>2],!(0|Rr[h[h[i>>2]+12>>2]](i,h[e+32>>2])))break e;if((0|s)==(0|(t=t+1|0)))break}if(s)for(r=e+20|0;;){if(t=0,i=h[(a=o<<2)+h[e+8>>2]>>2],(0|(n=0|Rr[h[h[i>>2]+24>>2]](i)))>0)for(;i=h[h[e+8>>2]+a>>2],u=0|Rr[h[h[i>>2]+20>>2]](i,t),l=h[e+20>>2],u>>>0<(c=h[e+24>>2]-l>>2)>>>0||((i=u+1|0)>>>0>c>>>0?(ei(r,i-c|0),l=h[r>>2]):i>>>0>=c>>>0||(h[e+24>>2]=(i<<2)+l)),h[(u<<2)+l>>2]=o,(0|n)!=(0|(t=t+1|0)););if((0|s)==(0|(o=o+1|0)))break}}t=0,0|Rr[h[h[e>>2]+28>>2]](e)&&(t=0|Rr[h[h[e>>2]+32>>2]](e))}return 0|t}return 0},function(e){var t,i=0,n=0;if((0|(i=h[8+(e|=0)>>2]))==(0|(t=h[e+12>>2])))return 1;for(;n=h[i>>2],(n=0|Rr[h[h[n>>2]+16>>2]](n,h[e+32>>2]))&&(0|t)!=(0|(i=i+4|0)););return 0|n},hr,dr,tr,tr,function(e){var t,i=0,n=0;if(h[(e|=0)>>2]=11304,i=h[e+48>>2],h[e+48>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),h[e>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,ve(i)),t=h[e+8>>2]){if((0|(n=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+8>>2]}h[e+12>>2]=t,ve(i)}return 0|e},function(e){var t,i=0,n=0;if(h[(e|=0)>>2]=11304,i=h[e+48>>2],h[e+48>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),h[e>>2]=13312,(i=h[e+20>>2])&&(h[e+24>>2]=i,ve(i)),t=h[e+8>>2]){if((0|(n=h[e+12>>2]))==(0|t))i=t;else{for(;i=h[(n=n-4|0)>>2],h[n>>2]=0,i&&Rr[h[h[i>>2]+4>>2]](i),(0|t)!=(0|n););i=h[e+8>>2]}h[e+12>>2]=t,ve(i)}ve(e)},function(e){var t,i=0,n=0,r=0,s=0;if(n=h[32+(e|=0)>>2],t=h[n+16>>2],r=h[n+12>>2],i=h[n+20>>2],p[n+8>>2]>t>>>0&(0|r)>=(0|i)|(0|i)<(0|r)){s=d[t+h[n>>2]|0],i=(r=t+1|0)?i:i+1|0,h[n+16>>2]=r,h[n+20>>2]=i,n=h[e+48>>2],h[e+48>>2]=0,n&&Rr[h[h[n>>2]+4>>2]](n);e:{t:{i:{n:switch(0|s){case 0:n=gn(384),h[n>>2]=11412,xt(n+4|0,0,80),h[n+96>>2]=0,h[n+100>>2]=0,h[n+92>>2]=-1,h[n+84>>2]=-1,h[n+88>>2]=-1,h[n+104>>2]=0,h[n+108>>2]=0,h[n+112>>2]=0,h[n+116>>2]=0,h[n+120>>2]=0,h[n+124>>2]=0,h[n+128>>2]=0,h[n+132>>2]=0,h[n+136>>2]=0,h[n+140>>2]=0,h[n+144>>2]=0,h[n+148>>2]=0,h[n+156>>2]=0,h[n+160>>2]=0,h[n+152>>2]=1065353216,h[n+164>>2]=0,h[n+168>>2]=0,h[n+172>>2]=0,h[n+176>>2]=0,h[n+180>>2]=0,h[n+184>>2]=0,h[n+188>>2]=0,h[n+192>>2]=0,h[n+196>>2]=0,h[n+200>>2]=0,h[n+204>>2]=0,h[n+208>>2]=0,h[n+212>>2]=-1,h[n+216>>2]=0,h[n+220>>2]=0,h[n+224>>2]=0,u[38+(i=n+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=n+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=n+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=n+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[n+376>>2]=0,h[n+368>>2]=0,h[n+372>>2]=0;break i;case 1:n=gn(424),h[n>>2]=11464,xt(n+4|0,0,80),h[n+96>>2]=0,h[n+100>>2]=0,h[n+92>>2]=-1,h[n+84>>2]=-1,h[n+88>>2]=-1,h[n+104>>2]=0,h[n+108>>2]=0,h[n+112>>2]=0,h[n+116>>2]=0,h[n+120>>2]=0,h[n+124>>2]=0,h[n+128>>2]=0,h[n+132>>2]=0,h[n+136>>2]=0,h[n+140>>2]=0,h[n+144>>2]=0,h[n+148>>2]=0,h[n+156>>2]=0,h[n+160>>2]=0,h[n+152>>2]=1065353216,h[n+164>>2]=0,h[n+168>>2]=0,h[n+172>>2]=0,h[n+176>>2]=0,h[n+180>>2]=0,h[n+184>>2]=0,h[n+188>>2]=0,h[n+192>>2]=0,h[n+196>>2]=0,h[n+200>>2]=0,h[n+204>>2]=0,h[n+208>>2]=0,h[n+212>>2]=-1,h[n+216>>2]=0,h[n+220>>2]=0,h[n+224>>2]=0,u[38+(i=n+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=n+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=n+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=n+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[n+392>>2]=0,h[n+396>>2]=0,h[n+384>>2]=0,h[n+388>>2]=0,h[n+376>>2]=0,h[n+380>>2]=0,h[n+368>>2]=0,h[n+372>>2]=0,h[(i=n+400|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,h[n+416>>2]=-1,h[n+420>>2]=-1;break i;case 2:break n;default:break t}n=gn(440),h[n>>2]=11512,xt(n+4|0,0,80),h[n+96>>2]=0,h[n+100>>2]=0,h[n+92>>2]=-1,h[n+84>>2]=-1,h[n+88>>2]=-1,h[n+104>>2]=0,h[n+108>>2]=0,h[n+112>>2]=0,h[n+116>>2]=0,h[n+120>>2]=0,h[n+124>>2]=0,h[n+128>>2]=0,h[n+132>>2]=0,h[n+136>>2]=0,h[n+140>>2]=0,h[n+144>>2]=0,h[n+148>>2]=0,h[n+156>>2]=0,h[n+160>>2]=0,h[n+152>>2]=1065353216,h[n+164>>2]=0,h[n+168>>2]=0,h[n+172>>2]=0,h[n+176>>2]=0,h[n+180>>2]=0,h[n+184>>2]=0,h[n+188>>2]=0,h[n+192>>2]=0,h[n+196>>2]=0,h[n+200>>2]=0,h[n+204>>2]=0,h[n+208>>2]=0,h[n+212>>2]=-1,h[n+216>>2]=0,h[n+220>>2]=0,h[n+224>>2]=0,u[38+(i=n+232|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,u[38+(i=n+272|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[(i=n+312|0)>>2]=0,h[i+4>>2]=0,a[i+5|0]=0,a[i+6|0]=0,a[i+7|0]=0,a[i+8|0]=0,a[i+9|0]=0,a[i+10|0]=0,a[i+11|0]=0,a[i+12|0]=0,u[38+(i=n+328|0)>>1]=0,h[i>>2]=0,h[i+8>>2]=0,h[i+12>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0,h[i+24>>2]=0,h[i+28>>2]=0,a[i+29|0]=0,a[i+30|0]=0,a[i+31|0]=0,a[i+32|0]=0,a[i+33|0]=0,a[i+34|0]=0,a[i+35|0]=0,a[i+36|0]=0,h[n+392>>2]=0,h[n+396>>2]=0,h[n+384>>2]=0,h[n+388>>2]=0,h[n+376>>2]=0,h[n+380>>2]=0,h[n+368>>2]=0,h[n+372>>2]=0,h[n+416>>2]=0,h[n+420>>2]=0,h[n+408>>2]=2,h[n+412>>2]=7,h[n+400>>2]=-1,h[n+404>>2]=-1,h[n+424>>2]=0,h[n+428>>2]=0,h[n+432>>2]=0,h[n+436>>2]=0}if(i=h[e+48>>2],h[e+48>>2]=n,!i)break e;Rr[h[h[i>>2]+4>>2]](i)}if(!(n=h[e+48>>2]))return 0}e=0|Rr[h[h[n>>2]+8>>2]](n,e)}else e=0;return 0|e},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+20>>2]](e,t)},function(e){return e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+28>>2]](e)},function(e){return e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+36>>2]](e)},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+12>>2]](e,t)},function(e,t){return t|=0,e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+16>>2]](e,t)},function(e){return e=h[48+(e|=0)>>2],0|Rr[h[h[e>>2]+24>>2]](e)},bt,function(e){ve(bt(e|=0))},zn,jt,Kt,J,function(e){var t,i=0,n=0,r=0,s=0,o=0,l=0,c=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0,B=0,F=0,G=0,V=0,z=0,H=0;if(N=t=N+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(n=h[e+144>>2])for(;i=h[n>>2],ve(n),n=i,i;);if(n=0,h[e+144>>2]=0,r=h[e+140>>2]){if(r-1>>>0>=3)for(i=-4&r;h[(m=n<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|m)>>2]=0,h[h[e+136>>2]+(8|m)>>2]=0,h[h[e+136>>2]+(12|m)>>2]=0,n=n+4|0,(0|i)!=(0|(s=s+4|0)););if(i=3&r)for(;h[h[e+136>>2]+(n<<2)>>2]=0,n=n+1|0,(0|i)!=(0|(D=D+1|0)););}h[e+148>>2]=0}e:{t:{if(n=h[e+4>>2],!((i=(D=d[n+36|0])<<8|d[n+37|0])>>>0>513))if(A=h[n+32>>2],i>>>0<=511){if(i=h[A+20>>2],i=(s=(r=h[A+16>>2])+4|0)>>>0<4?i+1|0:i,m=s,s=h[A+12>>2],m>>>0>p[A+8>>2]&(0|s)<=(0|i)|(0|i)>(0|s))break t;s=r+h[A>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[A+16>>2]=m,h[A+20>>2]=i,h[e+132>>2]=s}else{if(!Si(1,t,A))break t;n=h[e+4>>2],D=d[n+36|0],h[e+132>>2]=h[t>>2]}A=h[n+32>>2];i:{n:{if((255&D)>>>0<=1){if(D=0,i=h[A+20>>2],i=(s=(r=h[A+16>>2])+4|0)>>>0<4?i+1|0:i,m=s,s=h[A+12>>2],m>>>0>p[A+8>>2]&(0|s)<=(0|i)|(0|i)>(0|s))break e;s=r+h[A>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+60>>2]=s,h[A+16>>2]=m,h[A+20>>2]=i,h[e+156>>2]=s,g=e+156|0}else{if(D=0,!Si(1,t+60|0,A))break e;if(n=h[e+4>>2],i=d[n+36|0],h[e+156>>2]=h[t+60>>2],g=e+156|0,i>>>0>1)break n}if(r=h[n+32>>2],n=h[r+8>>2],m=h[r+12>>2],c=n,n=h[r+20>>2],c>>>0<(i=(s=h[r+16>>2])+4|0)>>>0&(0|(n=i>>>0<4?n+1|0:n))>=(0|m)|(0|n)>(0|m))break e;s=s+h[r>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+56>>2]=s,h[r+16>>2]=i,h[r+20>>2]=n;break i}if(!Si(1,t+56|0,h[n+32>>2]))break e;s=h[t+56>>2]}if(s>>>0>1431655765|p[g>>2]>v(s,3)>>>0)break e;if(o=h[e+4>>2],i=h[o+32>>2],r=P=h[i+8>>2],(0|(m=h[i+12>>2]))<=(0|(n=h[i+20>>2]))&(g=h[i+16>>2])>>>0>=r>>>0|(0|n)>(0|m))break e;if(c=h[i>>2],l=d[c+g|0],r=(A=g+1|0)?n:n+1|0,h[i+16>>2]=A,h[i+20>>2]=r,d[o+36|0]<=1){if((r=g+5|0)>>>0>P>>>0&(0|(n=r>>>0<5?n+1|0:n))>=(0|m)|(0|n)>(0|m))break e;g=d[0|(m=c+A|0)]|d[m+1|0]<<8|d[m+2|0]<<16|d[m+3|0]<<24,h[t+52>>2]=g,h[i+16>>2]=r,h[i+20>>2]=n}else{if(!Si(1,t+52|0,i))break e;g=h[t+52>>2]}if(s>>>0<g>>>0|((g>>>0)/3|0)+g>>>0<s>>>0)break e;if(n=h[e+4>>2],A=h[n+32>>2],d[n+36|0]<=1){if(n=h[A+20>>2],n=(i=(r=h[A+16>>2])+4|0)>>>0<4?n+1|0:n,m=i,i=h[A+12>>2],m>>>0>p[A+8>>2]&(0|i)<=(0|n)|(0|i)<(0|n))break e;i=r+h[A>>2]|0,i=d[0|i]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+48>>2]=i,h[A+16>>2]=m,h[A+20>>2]=n}else{if(!Si(1,t+48|0,A))break e;i=h[t+48>>2]}if(i>>>0>g>>>0)break e;if(h[e+28>>2]=h[e+24>>2],vi(n=gn(88)),m=h[e+8>>2],h[e+8>>2]=n,m&&(Ii(m),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],ki(e+160|0,s),h[e+176>>2]=h[e+172>>2],ki(e+172|0,s),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(B=e+216|0),pe(B,l),!zt(h[e+8>>2],s,h[e+156>>2]+i|0))break e;if(n=h[e+156>>2],a[0|t]=1,Pt(e+120|0,i+n|0,t),i=h[e+4>>2],(n=65535&((n=f[i+36>>1])<<8|n>>>8))>>>0<=513){if(r=h[i+32>>2],n>>>0<=511){if(i=h[r+20>>2],i=(n=(s=h[r+16>>2])+4|0)>>>0<4?i+1|0:i,m=n,n=h[r+12>>2],m>>>0>p[r+8>>2]&(0|n)<=(0|i)|(0|i)>(0|n))break e;n=s+h[r>>2]|0,s=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[r+16>>2]=m,h[r+20>>2]=i}else{if(!Si(1,t+44|0,r))break e;s=h[t+44>>2]}if(!s)break e;if(r=h[h[e+4>>2]+32>>2],(i=(m=h[r+8>>2])-(n=h[r+16>>2])|0)>>>0<s>>>0&(0|(n=h[r+12>>2]-(h[r+20>>2]+(n>>>0>m>>>0)|0)|0))<=0|(0|n)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,r=h[h[e+4>>2]+32>>2],m=((n=h[r+16>>2])+h[r>>2]|0)+s|0,n=((i=h[r+8>>2])-n|0)-s|0,u[t+38>>1]=f[r+38>>1],h[t>>2]=m,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=n,h[t+12>>2]=0,-1==(0|(A=ee(e,t))))break e;G=A>>31}else if(A=-1,G=-1,-1==(0|ee(e,h[i+32>>2])))break e;h[144+(m=V=e+232|0)>>2]=e,n=h[32+(0|Rr[h[h[e>>2]+32>>2]](e))>>2],s=h[n>>2]+h[n+16>>2]|0,i=h[32+(0|Rr[h[h[e>>2]+32>>2]](e))>>2],n=(n=h[i+8>>2])-(i=h[i+16>>2])|0,z=m,H=f[h[32+(0|Rr[h[h[e>>2]+32>>2]](e))>>2]+38>>1],u[z+38>>1]=H,h[m>>2]=s,h[m+16>>2]=0,h[m+20>>2]=0,h[m+8>>2]=n,h[m+12>>2]=0,h[e+372>>2]=l,u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0;i:if(Pe(m,t)){i=0,s=0,n=0,P=0,m=0,N=_=N-96|0,h[_+72>>2]=0,h[_+64>>2]=0,h[_+68>>2]=0,h[_+48>>2]=0,h[_+52>>2]=0,h[_+40>>2]=0,h[_+44>>2]=0,h[_+56>>2]=1065353216,h[_+32>>2]=0,h[_+24>>2]=0,h[_+28>>2]=0,y=1,l=e,F=h[e+124>>2];n:{r:{a:{s:{o:{l:{c:{u:if(!((0|g)<=0)){for(k=h[l+216>>2]!=h[l+220>>2];;){P=(c=P)+1|0;h:{d:{f:{p:{m:{g:{v:{b:{_:{y:{A:if(d[l+308|0]){E:{if(!((e=(M=h[l+296>>2])+((E=h[l+304>>2])>>>3|0)|0)>>>0>=(b=h[l+300>>2])>>>0)&&(r=d[0|e],e=E+1|0,h[l+304>>2]=e,r>>>(7&E)&1))switch((r=M+(S=e>>>3|0)|0)>>>0>=b>>>0?(r=e,e=0):(o=d[0|r],r=E+2|0,h[l+304>>2]=r,S=r>>>3|0,e=o>>>(7&e)&1),(o=S+M|0)>>>0<b>>>0?(o=d[0|o],h[l+304>>2]=r+1,r=o>>>(7&r)<<1&2):r=0,(e=(e|r)<<1)-1|0){case 0:case 2:case 4:break a;case 5:break y;case 1:case 3:break E;default:break A}if((0|n)==(0|s)){r=-1;break c}S=-1,T=h[l+8>>2],M=h[T+24>>2],e=-1,-1!=(0|(O=h[(b=n-4|0)>>2]))&&(e=-1,-1!=(0|(i=((i=O+1|0)>>>0)%3|0?i:O-2|0))&&(e=h[h[T>>2]+(i<<2)>>2])),-1!=(0|(r=h[M+((i=e)<<2)>>2]))&&(S=((e=r+1|0)>>>0)%3|0?e:r-2|0),r=h[T+12>>2],e=(w=v(c,3))+1|0,h[r+(O<<2)>>2]=e,h[(o=e<<2)+r>>2]=O,E=w+2|0,h[r+(S<<2)>>2]=E,h[(c=E<<2)+r>>2]=S,R=-1,e=-1;w:if(-1!=(0|O)){if((O>>>0)%3|0)r=O-1|0;else if(e=-1,-1==(0|(r=O+2|0)))break w;e=h[h[T>>2]+(r<<2)>>2]}if(-1!=(0|S)&&-1!=(0|(r=((r=S+1|0)>>>0)%3|0?r:S-2|0))&&(R=h[h[T>>2]+(r<<2)>>2]),r=-1,(0|e)==(0|i)|(0|i)==(0|R))break c;r=h[T>>2],h[r+(w<<2)>>2]=i,h[r+o>>2]=R,h[r+c>>2]=e,-1!=(0|e)&&(h[M+(e<<2)>>2]=E),r=h[l+120>>2]+(i>>>3&536870908)|0,e=h[r>>2],z=r,H=In(i)&e,h[z>>2]=H,h[b>>2]=w,i=s;break h}if((0|n)==(0|s)){r=-1;break c}if(R=h[l+8>>2],i=h[R+12>>2],e=(b=(w=v(c,3))+((M=5==(1|e))?2:1)|0)<<2,O=h[(o=n-4|0)>>2],h[i+e>>2]=O,h[i+(O<<2)>>2]=b,si(R+24|0),r=-1,i=h[l+8>>2],E=h[i+24>>2],(0|F)<h[i+28>>2]-E>>2)break c;if(r=(T=h[i>>2])+e|0,e=((i=h[R+28>>2]-h[R+24>>2]|0)>>2)-1|0,h[r>>2]=e,i&&(h[E+(e<<2)>>2]=b),b=M?w:w+2|0,r=T+(w+M<<2)|0,-1!=(0|O)){E:{w:{if((O>>>0)%3|0)i=O-1|0;else if(-1==(0|(i=O+2|0)))break w;if(e=h[T+(i<<2)>>2],h[T+(b<<2)>>2]=e,-1==(0|e))break E;h[E+(e<<2)>>2]=b;break E}h[T+(b<<2)>>2]=-1}i=-1,-1!=(0|(e=((e=O+1|0)>>>0)%3|0?e:O-2|0))&&(i=h[T+(e<<2)>>2])}else h[T+(b<<2)>>2]=-1,i=-1;h[r>>2]=i,h[o>>2]=w,i=s;break _}if((0|n)==(0|s)){r=-1;break c}T=h[(e=n-4|0)>>2],h[_+68>>2]=e;A:if(b=h[_+44>>2])if((o=Dn(b)>>>0>1)?b>>>0>(i=c)>>>0||(i=(c>>>0)%(b>>>0)|0):i=c&b+2147483647,r=h[h[_+40>>2]+(i<<2)>>2])if(r=h[r>>2]){E:{if(!o){for(b=b-1|0;;){w:{if((0|(o=h[r+4>>2]))!=(0|c)){if((o&b)==(0|i))break w;n=e;break A}if((0|c)==h[r+8>>2])break E}if(!(r=h[r>>2]))break}n=e;break A}for(;;){w:{if((0|(o=h[r+4>>2]))!=(0|c)){if(o>>>0>=b>>>0&&(o=(o>>>0)%(b>>>0)|0),(0|i)==(0|o))break w;n=e;break A}if((0|c)==h[r+8>>2])break E}if(!(r=h[r>>2]))break}n=e;break A}if((0|e)==(0|U)){if((i=1+(n=(o=U-s|0)>>2)|0)>>>0>=1073741824)break v;if(e=o>>1,i=o>>>0<2147483644?e>>>0<i>>>0?i:e:1073741823){if(i>>>0>=1073741824)break r;C=gn(i<<2)}else C=0;h[(e=C+(n<<2)|0)>>2]=h[r+12>>2],U=(i<<2)+C|0,n=e+4|0,(0|o)>0&&We(C,s,o),h[_+72>>2]=U,h[_+68>>2]=n,h[_+64>>2]=C,s&&ve(s)}else h[e>>2]=h[r+12>>2],h[_+68>>2]=n}else n=e;else n=e;else n=e;if((0|n)==(0|C))break b;if(i=-1==(0|(w=h[(o=n-4|0)>>2])),R=h[l+8>>2],!i&-1!=h[h[R+12>>2]+(w<<2)>>2])break b;if(E=h[R+12>>2],-1!=(0|T)&-1!=h[E+(T<<2)>>2])break b;if(c=(M=v(c,3))+2|0,h[E+(w<<2)>>2]=c,h[(b=c<<2)+E>>2]=w,e=M+1|0,h[E+(T<<2)>>2]=e,h[(s=e<<2)+E>>2]=T,i)break g;if((w>>>0)%3|0){y=w-1|0;break p}if(-1!=(0|(y=w+2|0)))break p;S=h[R>>2],i=-1;break f}if(si((e=h[l+8>>2])+24|0),r=-1,o=h[l+8>>2],T=v(c,3),b=(R=(E=h[e+28>>2]-h[e+24>>2]|0)>>2)-1|0,h[h[o>>2]+(T<<2)>>2]=b,si(o+24|0),M=T+1|0,h[h[o>>2]+(M<<2)>>2]=(h[o+28>>2]-h[o+24>>2]>>2)-1,si((e=h[l+8>>2])+24|0),o=T+2|0,h[h[e>>2]+(o<<2)>>2]=(h[e+28>>2]-h[e+24>>2]>>2)-1,e=h[l+8>>2],w=h[e+24>>2],(0|F)<h[e+28>>2]-w>>2)break c;y:{if(E){if(h[w+(b<<2)>>2]=T,r=0,-4!=(0|E)&&(h[w+(R<<2)>>2]=M,-1==(0|(r=R+1|0))))break y}else h[w+(R<<2)>>2]=M,r=1;h[w+(r<<2)>>2]=o}if((0|n)==(0|U)){if((C=1+(n=(r=n-i|0)>>2)|0)>>>0>=1073741824)break m;if(e=r>>1,s=r>>>0<2147483644?e>>>0<C>>>0?C:e:1073741823){if(s>>>0>=1073741824)break r;C=gn(s<<2)}else C=0;h[(e=C+(n<<2)|0)>>2]=T,U=(s<<2)+C|0,n=e+4|0,(0|r)>0&&We(C,i,r),h[_+72>>2]=U,h[_+68>>2]=n,h[_+64>>2]=C,i&&ve(i),i=s=C}else h[n>>2]=T,n=n+4|0,h[_+68>>2]=n}if((0|(r=h[l+40>>2]))==h[l+36>>2])break h;for(b=(-1^c)+g|0,o=n-4|0;;){if((e=h[r-8>>2])>>>0>b>>>0)break b;if((0|e)!=(0|b))break h;if(c=d[r-4|0],r=h[(e=r-12|0)>>2],h[l+40>>2]=e,(0|r)<0)break b;M=h[o>>2],h[_+20>>2]=(-1^r)+g,e=_+20|0,h[_+88>>2]=e,be(_,_+40|0,e,_+88|0),r=h[_>>2];_:if(1&c){if(e=-1,-1==(0|M))break _;e=((e=M+1|0)>>>0)%3|0?e:M-2|0}else e=-1,-1!=(0|M)&&(e=M-1|0,(M>>>0)%3|0||(e=M+2|0));if(h[r+12>>2]=e,(0|(r=h[l+40>>2]))==h[l+36>>2])break}break h}if(r=-1,1&y)break c;break u}vr(),x()}i=-1,S=h[R>>2],h[S+(M<<2)>>2]=-1,r=-1;break d}vr(),x()}S=h[R>>2],i=h[S+(y<<2)>>2]}h[(M<<2)+S>>2]=i,r=-1,-1!=(0|(e=((e=w+1|0)>>>0)%3|0?e:w-2|0))&&(r=h[(e<<2)+S>>2])}if(h[s+S>>2]=r,-1!=(0|T)){d:{f:{if((T>>>0)%3|0)r=T-1|0;else if(-1==(0|(r=T+2|0)))break f;if(e=h[(r<<2)+S>>2],h[b+S>>2]=e,-1==(0|e))break d;h[h[R+24>>2]+(e<<2)>>2]=c;break d}h[b+S>>2]=-1}y=-1,r=-1,-1!=(0|(e=((e=T+1|0)>>>0)%3|0?e:T-2|0))&&(y=h[(e<<2)+S>>2],r=e)}else h[b+S>>2]=-1,y=-1,r=-1;c=(e=h[R+24>>2])+(y<<2)|0,-1!=(0|i)&&(h[e+(i<<2)>>2]=h[c>>2]);d:if(-1!=(0|r))for(;;){if(h[(r<<2)+S>>2]=i,-1==(0|(e=((e=r+1|0)>>>0)%3|0?e:r-2|0)))break d;if(-1==(0|(s=h[E+(e<<2)>>2])))break d;if(-1==(0|(r=((e=s+1|0)>>>0)%3|0?e:s-2|0)))break}h[c>>2]=-1;d:if(!k){if((0|I)==(0|L)){f:{if((s=1+(i=(r=I-m|0)>>2)|0)>>>0<1073741824){if(e=r>>1,s=r>>>0<2147483644?e>>>0<s>>>0?s:e:1073741823){if(s>>>0>=1073741824)break f;e=gn(s<<2)}else e=0;h[(i=e+(i<<2)|0)>>2]=y,I=e+(s<<2)|0,L=i+4|0,(0|r)>0&&We(e,m,r),h[_+32>>2]=I,h[_+28>>2]=L,h[_+24>>2]=e,m&&ve(m),m=e;break d}vr(),x()}break r}h[L>>2]=y,L=L+4|0,h[_+28>>2]=L}h[o>>2]=M,i=s=C}if(y=(0|g)>(0|P),(0|g)==(0|P))break}P=g}if(r=-1,y=h[l+8>>2],!((0|F)<h[y+28>>2]-h[y+24>>2]>>2)){if((0|n)!=(0|C)){for(s=l+60|0,M=l+312|0;;){E=h[(n=n-4|0)>>2],h[_+68>>2]=n;u:{h:{d:{if(f[l+270>>1]<=513){if(!d[l+364|0])break d;if(i=h[l+360>>2],(e=h[l+352>>2]+(i>>>3|0)|0)>>>0>=p[l+356>>2])break h;e=d[0|e],h[l+360>>2]=i+1,e=e>>>(7&i)&1}else e=Gi(M);if(!e)break h}if(k=h[l+8>>2],w=h[k>>2],((h[k+4>>2]-w>>2>>>0)/3|0)<=(0|P))break c;if(e=-1,i=-1,b=h[k+24>>2],c=-1,-1!=(0|E)&&(c=-1,-1!=(0|(o=((o=E+1|0)>>>0)%3|0?o:E-2|0))&&(c=h[w+(o<<2)>>2])),-1!=(0|(g=h[b+(c<<2)>>2]))&&-1!=(0|(o=((o=g+1|0)>>>0)%3|0?o:g-2|0))&&(-1!=(0|(e=((e=o+1|0)>>>0)%3|0?e:o-2|0))&&(i=h[w+(e<<2)>>2]),e=o),y=-1,S=-1,g=-1,-1!=(0|(b=h[b+(i<<2)>>2]))&&(g=-1,-1!=(0|(o=((o=b+1|0)>>>0)%3|0?o:b-2|0))&&(-1!=(0|(g=((g=o+1|0)>>>0)%3|0?g:o-2|0))&&(S=h[w+(g<<2)>>2]),g=o)),I=h[k+12>>2],R=v(P,3),h[I+(b=R<<2)>>2]=E,h[I+(E<<2)>>2]=R,h[(o=(E=R+1|0)<<2)+I>>2]=e,h[I+(e<<2)>>2]=E,h[(e=(k=R+2|0)<<2)+I>>2]=g,h[I+(g<<2)>>2]=k,h[b+w>>2]=i,h[(g=o+w|0)>>2]=S,h[(o=e+w|0)>>2]=c,b=h[l+120>>2],e=h[(i=b+((c=E>>>0<R>>>0?-1:i)>>>3&536870908)|0)>>2],z=i,H=In(c)&e,h[z>>2]=H,y=-1!=(0|E)?h[g>>2]:y,e=h[(i=b+(y>>>3&536870908)|0)>>2],z=i,H=In(y)&e,h[z>>2]=H,y=-1,y=-1!=(0|k)?h[o>>2]:y,e=h[(i=b+(y>>>3&536870908)|0)>>2],z=i,H=In(y)&e,h[z>>2]=H,(0|(y=h[l+64>>2]))==(e=h[l+68>>2])<<5){if((y+1|0)<0)break l;xe(s,e=y>>>0<=1073741822?(e<<=6)>>>0<(i=y+32&-32)>>>0?i:e:2147483647),y=h[l+64>>2]}if(P=P+1|0,h[l+64>>2]=y+1,e=h[l+60>>2]+(y>>>3&536870908)|0,h[e>>2]=h[e>>2]|1<<y,(0|(e=h[l+76>>2]))!=h[l+80>>2]){h[e>>2]=R,h[l+76>>2]=e+4;break u}if((c=1+(i=(g=e-(o=h[l+72>>2])|0)>>2)|0)>>>0>=1073741824)break o;if(e=g>>1,c=g>>>0<2147483644?e>>>0<c>>>0?c:e:1073741823){if(c>>>0>=1073741824)break r;e=gn(c<<2)}else e=0;if(h[(i=e+(i<<2)|0)>>2]=R,(0|g)>0&&We(e,o,g),h[l+80>>2]=e+(c<<2),h[l+76>>2]=i+4,h[l+72>>2]=e,!o)break u;ve(o);break u}if((0|(e=h[l+64>>2]))==(c=h[l+68>>2])<<5){if((e+1|0)<0)break l;e>>>0<=1073741822?(i=e+32&-32,e=(e=c<<6)>>>0<i>>>0?i:e):e=2147483647,xe(s,e),e=h[l+64>>2]}if(h[l+64>>2]=e+1,c=h[l+60>>2]+(e>>>3&536870908)|0,i=h[c>>2],z=c,H=In(e)&i,h[z>>2]=H,(0|(e=h[l+76>>2]))==h[l+80>>2]){if((c=1+(i=(g=e-(o=h[l+72>>2])|0)>>2)|0)>>>0>=1073741824)break o;if(e=g>>1,c=g>>>0<2147483644?e>>>0<c>>>0?c:e:1073741823){if(c>>>0>=1073741824)break s;e=gn(c<<2)}else e=0;h[(i=e+(i<<2)|0)>>2]=E,(0|g)>0&&We(e,o,g),h[l+80>>2]=e+(c<<2),h[l+76>>2]=i+4,h[l+72>>2]=e,o&&ve(o)}else h[e>>2]=E,h[l+76>>2]=e+4}if((0|n)==(0|C))break}y=h[l+8>>2]}if(((h[y+4>>2]-h[y>>2]>>2>>>0)/3|0)==(0|P))if(P=h[y+24>>2],r=h[y+28>>2]-P>>2,(0|m)!=(0|L))for(i=m;;){if(s=h[i>>2],-1==h[(S=((n=r-1|0)<<2)+P|0)>>2])for(;n=r-2|0,r=r-1|0,-1==h[(S=(n<<2)+P|0)>>2];);if(n>>>0>=s>>>0){if(h[_>>2]=y,P=h[S>>2],a[_+12|0]=1,h[_+8>>2]=P,h[_+4>>2]=P,-1!=(0|P))for(;h[h[y>>2]+(P<<2)>>2]=s,_t(_),y=h[l+8>>2],-1!=(0|(P=h[_+8>>2])););e=(P=h[y+24>>2])+(n<<2)|0,-1!=(0|s)&&(h[(s<<2)+P>>2]=h[e>>2]),h[e>>2]=-1,o=1<<s,s=(e=h[l+120>>2])+(s>>>3&536870908)|0,c=e+(n>>>3&536870908)|0,e=1<<n,n=h[c>>2]&e?o|h[s>>2]:h[s>>2]&(-1^o),h[s>>2]=n,h[c>>2]=h[c>>2]&(-1^e),r=r-1|0}if((0|L)==(0|(i=i+4|0)))break}else m=L}}if(m&&ve(m),e=h[_+48>>2])for(;n=h[e>>2],ve(e),e=n;);e=h[_+40>>2],h[_+40>>2]=0,e&&ve(e),C&&(h[_+68>>2]=C,ve(C)),N=_+96|0;break n}pr(),x()}vr(),x()}Qi(1336)}x()}Qi(1336),x()}if(-1!=(0|r)){i=(e=h[t+16>>2])+h[t>>2]|0,e=(n=h[t+8>>2])-e|0,n=h[h[l+4>>2]+32>>2],u[n+38>>1]=f[n+38>>1],h[n>>2]=i,h[n+16>>2]=0,h[n+20>>2]=0,h[n+8>>2]=e,h[n+12>>2]=0,i=h[l+4>>2],(65535&(n=(e=f[i+36>>1])<<8|e>>>8))>>>0<=513&&(e=h[i+32>>2],i=G+h[e+20>>2]|0,i=(C=A+h[e+16>>2]|0)>>>0<A>>>0?i+1|0:i,h[e+16>>2]=C,h[e+20>>2]=i);n:if(h[l+216>>2]!=h[l+220>>2]){if(e=h[l+8>>2],i=h[e>>2],e=h[e+4>>2],!((65535&n)>>>0>=513)){if((0|e)==(0|i))break n;for(n=0;;){if(Oe(l,n)){if(n=n+3|0,e=h[l+8>>2],n>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}if((0|e)!=(0|i)){for(n=0;;){if(De(l,n)){if(n=n+3|0,e=h[l+8>>2],n>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}}if(ci(V),(0|(n=h[l+216>>2]))!=h[l+220>>2])for(s=0;;){if(lt(4+((i=v(s,144))+n|0)|0,h[l+8>>2]),D=h[B>>2],(0|(n=h[132+(e=i+D|0)>>2]))!=(0|(e=h[e+136>>2])))for(;dt(4+(i+D|0)|0,h[n>>2]),D=h[B>>2],(0|e)!=(0|(n=n+4|0)););if(_e(4+(i+D|0)|0),s=s+1|0,n=h[l+216>>2],!(s>>>0<(h[l+220>>2]-n|0)/144>>>0))break}if(e=h[l+8>>2],oi(l+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(D=h[l+216>>2]))!=h[l+220>>2])for(n=0;e=v(n,144)+D|0,i=h[e+60>>2]-h[e+56>>2]>>2,s=e+104|0,e=h[l+8>>2],oi(s,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|i)?e:i),n=n+1|0,D=h[l+216>>2],n>>>0<(h[l+220>>2]-D|0)/144>>>0;);D=re(l,r)}}break e}D=0}return N=t- -64|0,0|D},hr,Kn,Jn,pt,function(e){ve(pt(e|=0))},zn,jt,Kt,J,function(e){var t,i=0,n=0,r=0,s=0,o=0,l=0,c=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0,B=0,F=0,G=0,V=0,z=0,H=0,j=0,W=0,Y=0;if(N=t=N+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(s=h[e+144>>2])for(;r=h[s>>2],ve(s),s=r,r;);if(s=0,h[e+144>>2]=0,o=h[e+140>>2]){if(o-1>>>0>=3)for(r=-4&o;h[(i=s<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|i)>>2]=0,h[h[e+136>>2]+(8|i)>>2]=0,h[h[e+136>>2]+(12|i)>>2]=0,s=s+4|0,(0|r)!=(0|(l=l+4|0)););if(r=3&o)for(;h[h[e+136>>2]+(s<<2)>>2]=0,s=s+1|0,(0|r)!=(0|(P=P+1|0)););}h[e+148>>2]=0}e:{t:{if(s=h[e+4>>2],!((r=(P=d[s+36|0])<<8|d[s+37|0])>>>0>513))if(n=h[s+32>>2],r>>>0<=511){if(r=h[n+20>>2],r=(l=(o=h[n+16>>2])+4|0)>>>0<4?r+1|0:r,i=l,l=h[n+12>>2],i>>>0>p[n+8>>2]&(0|l)<=(0|r)|(0|r)>(0|l))break t;l=o+h[n>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[n+16>>2]=i,h[n+20>>2]=r,h[e+132>>2]=l}else{if(!Si(1,t,n))break t;s=h[e+4>>2],P=d[s+36|0],h[e+132>>2]=h[t>>2]}n=h[s+32>>2];i:{n:{if((255&P)>>>0<=1){if(P=0,r=h[n+20>>2],r=(l=(o=h[n+16>>2])+4|0)>>>0<4?r+1|0:r,i=l,l=h[n+12>>2],i>>>0>p[n+8>>2]&(0|l)<=(0|r)|(0|r)>(0|l))break e;l=o+h[n>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+60>>2]=l,h[n+16>>2]=i,h[n+20>>2]=r,h[e+156>>2]=l,n=e+156|0}else{if(P=0,!Si(1,t+60|0,n))break e;if(s=h[e+4>>2],r=d[s+36|0],h[e+156>>2]=h[t+60>>2],n=e+156|0,r>>>0>1)break n}if(A=h[s+32>>2],r=h[A+8>>2],o=h[A+12>>2],g=r,r=h[A+20>>2],g>>>0<(s=l=(i=h[A+16>>2])+4|0)>>>0&(0|(r=l>>>0<4?r+1|0:r))>=(0|o)|(0|r)>(0|o))break e;l=i+h[A>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+56>>2]=l,h[A+16>>2]=s,h[A+20>>2]=r;break i}if(!Si(1,t+56|0,h[s+32>>2]))break e;l=h[t+56>>2]}if(l>>>0>1431655765|p[n>>2]>v(l,3)>>>0)break e;if(D=h[e+4>>2],s=h[D+32>>2],o=g=h[s+8>>2],(0|(i=h[s+12>>2]))<=(0|(r=h[s+20>>2]))&(_=h[s+16>>2])>>>0>=o>>>0|(0|r)>(0|i))break e;if(A=h[s>>2],m=d[A+_|0],o=(n=_+1|0)?r:r+1|0,h[s+16>>2]=n,h[s+20>>2]=o,d[D+36|0]<=1){if((o=_+5|0)>>>0>g>>>0&(0|(r=o>>>0<5?r+1|0:r))>=(0|i)|(0|r)>(0|i))break e;n=d[0|(i=n+A|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+52>>2]=n,h[s+16>>2]=o,h[s+20>>2]=r}else{if(!Si(1,t+52|0,s))break e;n=h[t+52>>2]}if(((n>>>0)/3|0)+n>>>0<l>>>0|n>>>0>l>>>0)break e;if(r=h[e+4>>2],A=h[r+32>>2],d[r+36|0]<=1){if(r=h[A+20>>2],r=(s=(i=h[A+16>>2])+4|0)>>>0<4?r+1|0:r,o=s,s=h[A+12>>2],o>>>0>p[A+8>>2]&(0|s)<=(0|r)|(0|r)>(0|s))break e;s=i+h[A>>2]|0,i=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+48>>2]=i,h[A+16>>2]=o,h[A+20>>2]=r}else{if(!Si(1,t+48|0,A))break e;i=h[t+48>>2]}if(n>>>0<i>>>0)break e;if(h[e+28>>2]=h[e+24>>2],vi(r=gn(88)),s=h[e+8>>2],h[e+8>>2]=r,s&&(Ii(s),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],ki(e+160|0,l),h[e+176>>2]=h[e+172>>2],ki(e+172|0,l),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(V=e+216|0),pe(V,m),!zt(h[e+8>>2],l,h[e+156>>2]+i|0))break e;if(r=h[e+156>>2],a[0|t]=1,Pt(e+120|0,r+i|0,t),l=h[e+4>>2],(r=65535&((r=f[l+36>>1])<<8|r>>>8))>>>0<=513){if(A=h[l+32>>2],r>>>0<=511){if(r=h[A+20>>2],r=(l=(o=h[A+16>>2])+4|0)>>>0<4?r+1|0:r,s=l,l=h[A+12>>2],s>>>0>p[A+8>>2]&(0|l)<=(0|r)|(0|r)>(0|l))break e;l=o+h[A>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[A+16>>2]=s,h[A+20>>2]=r}else{if(!Si(1,t+44|0,A))break e;l=h[t+44>>2]}if(!l)break e;if(A=h[h[e+4>>2]+32>>2],(s=(o=h[A+8>>2])-(r=h[A+16>>2])|0)>>>0<l>>>0&(0|(r=h[A+12>>2]-(h[A+20>>2]+(r>>>0>o>>>0)|0)|0))<=0|(0|r)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,A=h[h[e+4>>2]+32>>2],o=((r=h[(s=A)+16>>2])+h[s>>2]|0)+l|0,r=((s=h[s+8>>2])-r|0)-l|0,u[t+38>>1]=f[A+38>>1],h[t>>2]=o,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=r,h[t+12>>2]=0,-1==(0|(A=ee(e,t))))break e;j=A>>31}else if(A=-1,j=-1,-1==(0|ee(e,h[l+32>>2])))break e;di(U=e+232|0,e),h[e+372>>2]=m,h[e+384>>2]=h[e+156>>2]+i,u[t+38>>1]=0,h[t>>2]=0,h[(r=t)+8>>2]=0,h[r+12>>2]=0,h[r+16>>2]=0,h[r+20>>2]=0,h[r+24>>2]=0,h[r+28>>2]=0,a[r+29|0]=0,a[r+30|0]=0,a[r+31|0]=0,a[r+32|0]=0,a[r+33|0]=0,a[r+34|0]=0,a[r+35|0]=0,a[r+36|0]=0,_=0,N=g=N-16|0,Pe(U,r)&&(l=r,r=h[r+20>>2],r=(s=(o=h[l+16>>2])+4|0)>>>0<4?r+1|0:r,i=s,s=h[l+12>>2],i>>>0>p[l+8>>2]&(0|s)<=(0|r)|(0|r)>(0|s)||(s=o+h[l>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[l+16>>2]=i,h[l+20>>2]=r,(0|s)<0||(0|(i=h[U+152>>2]))<=(0|s)||(h[g+12>>2]=0,r=h[U+156>>2],(s=h[U+160>>2]-r>>2)>>>0<i>>>0?Ye(U+156|0,i-s|0,g+12|0):i>>>0>=s>>>0||(h[U+160>>2]=r+(i<<2)),_=He(U+168|0,l)))),N=g+16|0;i:if(_){i=0,_=0,s=0,r=0,l=0,D=0,N=y=N-96|0,h[y+72>>2]=0,h[y+64>>2]=0,h[y+68>>2]=0,h[y+48>>2]=0,h[y+52>>2]=0,h[y+40>>2]=0,h[y+44>>2]=0,h[y+56>>2]=1065353216,h[y+32>>2]=0,h[y+24>>2]=0,h[y+28>>2]=0,E=1,c=e,z=h[e+124>>2];n:{r:{a:{s:{g=n;o:{l:if(!((0|n)<=0)){for(F=c+400|0,H=c+232|0,k=h[c+216>>2]!=h[c+220>>2];;){D=(m=D)+1|0;c:{u:{h:{d:{if(-1==h[c+420>>2]||!Gi(F)){if(d[c+308|0]){if((e=(w=h[c+296>>2])+((S=h[c+304>>2])>>>3|0)|0)>>>0>=(T=h[c+300>>2])>>>0)break d;if(o=d[0|e],e=S+1|0,h[c+304>>2]=e,!(o>>>(7&S)&1))break d;(o=w+(b=e>>>3|0)|0)>>>0>=T>>>0?(o=e,e=0):(n=d[0|o],o=S+2|0,h[c+304>>2]=o,b=o>>>3|0,e=n>>>(7&e)&1),(n=b+w|0)>>>0<T>>>0?(n=d[0|n],h[c+304>>2]=o+1,o=n>>>(7&o)<<1&2):o=0,n=(e|o)<<1|1}else n=1;h[c+416>>2]=n;break u}if(n=h[c+420>>2],h[c+416>>2]=n,n)break u;break h}h[c+416>>2]=0}if((0|i)==(0|_)){o=-1;break o}T=-1,O=h[c+8>>2],e=S=h[O+24>>2],n=-1,-1!=(0|(I=h[(w=i-4|0)>>2]))&&(n=-1,-1!=(0|(o=((o=I+1|0)>>>0)%3|0?o:I-2|0))&&(n=h[h[O>>2]+(o<<2)>>2])),-1!=(0|(o=h[e+(n<<2)>>2]))&&(T=((e=o+1|0)>>>0)%3|0?e:o-2|0),o=h[O+12>>2],e=(R=v(m,3))+1|0,h[o+(I<<2)>>2]=e,h[(b=e<<2)+o>>2]=I,M=R+2|0,h[o+(T<<2)>>2]=M,h[(m=M<<2)+o>>2]=T,E=-1,e=-1;h:if(-1!=(0|I)){if((I>>>0)%3|0)o=I-1|0;else if(e=-1,-1==(0|(o=I+2|0)))break h;e=h[h[O>>2]+(o<<2)>>2]}if(-1!=(0|T)&&-1!=(0|(o=((o=T+1|0)>>>0)%3|0?o:T-2|0))&&(E=h[h[O>>2]+(o<<2)>>2]),o=-1,(0|e)==(0|n)|(0|n)==(0|E))break o;o=h[O>>2],h[o+(R<<2)>>2]=n,h[o+b>>2]=E,h[o+m>>2]=e,-1!=(0|e)&&(h[S+(e<<2)>>2]=M),o=h[c+120>>2]+(n>>>3&536870908)|0,e=h[o>>2],W=o,Y=In(n)&e,h[W>>2]=Y,h[w>>2]=R,Fe(H,R);break c}o=-1;u:{h:{d:{f:{p:{m:{g:{v:{b:{_:switch(n-1|0){case 2:case 4:if((0|r)==(0|i))break o;if(w=h[c+8>>2],b=h[w+12>>2],e=(n=(S=v(m,3))+((T=5==(0|n))?2:1)|0)<<2,R=h[(_=i-4|0)>>2],h[b+e>>2]=R,h[b+(R<<2)>>2]=n,si(w+24|0),i=h[c+8>>2],b=h[i+24>>2],h[i+28>>2]-b>>2>(0|z))break o;if(I=(M=h[i>>2])+e|0,e=((i=h[w+28>>2]-h[w+24>>2]|0)>>2)-1|0,h[I>>2]=e,i&&(h[b+(e<<2)>>2]=n),w=T?S:S+2|0,i=M+(T+S<<2)|0,-1!=(0|R)){y:{A:{if((R>>>0)%3|0)n=R-1|0;else if(-1==(0|(n=R+2|0)))break A;if(e=h[M+(n<<2)>>2],h[M+(w<<2)>>2]=e,-1==(0|e))break y;h[b+(e<<2)>>2]=w;break y}h[M+(w<<2)>>2]=-1}n=-1,-1!=(0|(e=((e=R+1|0)>>>0)%3|0?e:R-2|0))&&(n=h[M+(e<<2)>>2])}else h[M+(w<<2)>>2]=-1,n=-1;h[i>>2]=n,h[_>>2]=S;break b;case 0:if((0|i)==(0|_))break o;O=h[(s=i-4|0)>>2],h[y+68>>2]=s;y:if((w=h[y+44>>2])&&(n=h[y+40>>2],e=m&w+2147483647,(T=Dn(w)>>>0>1)&&((e=m)>>>0<w>>>0||(e=(m>>>0)%(w>>>0)|0)),(e=h[n+((b=e)<<2)>>2])&&(n=h[e>>2]))){A:{if(!T){for(T=w-1|0;;){E:{if((0|(e=h[n+4>>2]))!=(0|m)){if((0|b)==(e&T))break E;break y}if((0|m)==h[n+8>>2])break A}if(!(n=h[n>>2]))break}break y}for(;;){E:{if((0|(e=h[n+4>>2]))!=(0|m)){if(e>>>0>=w>>>0&&(e=(e>>>0)%(w>>>0)|0),(0|e)==(0|b))break E;break y}if((0|m)==h[n+8>>2])break A}if(!(n=h[n>>2]))break}break y}if((0|s)==(0|G)){if((r=1+(s=(b=G-_|0)>>2)|0)>>>0>=1073741824)break m;if(e=b>>1,i=b>>>0<2147483644?e>>>0<r>>>0?r:e:1073741823){if(i>>>0>=1073741824)break r;r=gn(i<<2)}else r=0;h[(e=r+(s<<2)|0)>>2]=h[n+12>>2],G=(i<<2)+r|0,s=e+4|0,(0|b)>0&&We(r,_,b),h[y+72>>2]=G,h[y+68>>2]=s,h[y+64>>2]=r,_&&ve(_)}else h[s>>2]=h[n+12>>2],h[y+68>>2]=i,s=i}if((0|r)==(0|s))break g;if(n=-1==(0|(R=h[(b=s-4|0)>>2])),M=h[c+8>>2],!n&-1!=h[h[M+12>>2]+(R<<2)>>2])break g;if(S=h[M+12>>2],-1!=(0|O)&-1!=h[S+(O<<2)>>2])break g;if(m=(w=v(m,3))+2|0,h[S+(R<<2)>>2]=m,h[(_=m<<2)+S>>2]=R,e=w+1|0,h[S+(O<<2)>>2]=e,h[(i=e<<2)+S>>2]=O,n)break p;if((R>>>0)%3|0){o=R-1|0;break d}if(-1!=(0|(o=R+2|0)))break d;E=h[M>>2],e=-1;break h;case 6:break _;default:break o}if(si((e=h[c+8>>2])+24|0),s=h[c+8>>2],M=v(m,3),n=(w=(T=h[e+28>>2]-h[e+24>>2]|0)>>2)-1|0,h[h[s>>2]+(M<<2)>>2]=n,si(s+24|0),b=M+1|0,h[h[s>>2]+(b<<2)>>2]=(h[s+28>>2]-h[s+24>>2]>>2)-1,si((e=h[c+8>>2])+24|0),s=M+2|0,h[h[e>>2]+(s<<2)>>2]=(h[e+28>>2]-h[e+24>>2]>>2)-1,e=h[c+8>>2],S=h[e+24>>2],h[e+28>>2]-S>>2>(0|z))break o;_:{if(T){if(h[S+(n<<2)>>2]=M,n=0,-4!=(0|T)&&(h[S+(w<<2)>>2]=b,-1==(0|(n=w+1|0))))break _}else h[S+(w<<2)>>2]=b,n=1;h[S+(n<<2)>>2]=s}if((0|i)!=(0|G)){h[i>>2]=M,s=i+4|0,h[y+68>>2]=s;break v}if((r=1+(s=(n=G-_|0)>>2)|0)>>>0>=1073741824)break f;if(e=n>>1,i=n>>>0<2147483644?e>>>0<r>>>0?r:e:1073741823){if(i>>>0>=1073741824)break r;r=gn(i<<2)}else r=0;h[(e=r+(s<<2)|0)>>2]=M,G=(i<<2)+r|0,s=e+4|0,(0|n)>0&&We(r,_,n),h[y+72>>2]=G,h[y+68>>2]=s,h[y+64>>2]=r,_&&ve(_)}_=r}Fe(H,h[s-4>>2]);v:if((0|(n=h[c+40>>2]))!=h[c+36>>2])for(T=g+(-1^m)|0,b=s-4|0;;){if((e=h[n-8>>2])>>>0>T>>>0)break g;if((0|e)!=(0|T))break v;if(m=d[n-4|0],i=h[(e=n-12|0)>>2],h[c+40>>2]=e,(0|i)<0)break g;n=h[b>>2],h[y+20>>2]=g+(-1^i),e=y+20|0,h[y+88>>2]=e,be(y,y+40|0,e,y+88|0),i=h[y>>2];b:if(1&m){if(e=-1,-1==(0|n))break b;e=((e=n+1|0)>>>0)%3|0?e:n-2|0}else e=-1,-1!=(0|n)&&(e=n-1|0,(n>>>0)%3|0||(e=n+2|0));if(h[i+12>>2]=e,(0|(n=h[c+40>>2]))==h[c+36>>2])break}i=s;break c}if(E)break o;break l}vr(),x()}T=-1,E=h[M>>2],h[E+(w<<2)>>2]=-1,o=-1;break u}vr(),x()}E=h[M>>2],e=h[E+(o<<2)>>2]}T=e,h[(w<<2)+E>>2]=e,o=-1,-1!=(0|(e=((e=R+1|0)>>>0)%3|0?e:R-2|0))&&(o=h[(e<<2)+E>>2])}if(h[i+E>>2]=o,-1!=(0|O)){u:{h:{if((O>>>0)%3|0)o=O-1|0;else if(-1==(0|(o=O+2|0)))break h;if(e=h[(o<<2)+E>>2],h[_+E>>2]=e,-1==(0|e))break u;h[h[M+24>>2]+(e<<2)>>2]=m;break u}h[_+E>>2]=-1}_=-1,o=-1,-1!=(0|(e=((e=O+1|0)>>>0)%3|0?e:O-2|0))&&(_=h[(e<<2)+E>>2],o=e)}else h[_+E>>2]=-1,_=-1,o=-1;m=e=(n=h[c+388>>2])+(i=T<<2)|0,I=h[e>>2],e=_<<2,h[m>>2]=I+h[e+n>>2],n=(m=e)+(e=h[M+24>>2])|0,-1!=(0|T)&&(h[e+i>>2]=h[n>>2]);u:if(-1!=(0|o))for(;;){if(h[(o<<2)+E>>2]=T,-1==(0|(e=((e=o+1|0)>>>0)%3|0?e:o-2|0)))break u;if(-1==(0|(i=h[S+(e<<2)>>2])))break u;if(-1==(0|(o=((e=i+1|0)>>>0)%3|0?e:i-2|0)))break}h[n>>2]=-1;u:if(!k){if((0|L)==(0|B)){h:{if((l=1+(i=(n=L-C|0)>>2)|0)>>>0<1073741824){if(e=n>>1,o=n>>>0<2147483644?e>>>0<l>>>0?l:e:1073741823){if(o>>>0>=1073741824)break h;l=gn(o<<2)}else l=0;h[(e=l+(i<<2)|0)>>2]=_,L=(o<<2)+l|0,B=e+4|0,(0|n)>0&&We(l,C,n),h[y+32>>2]=L,h[y+28>>2]=B,h[y+24>>2]=l,C&&ve(C),C=l;break u}vr(),x()}break r}h[B>>2]=_,B=B+4|0,h[y+28>>2]=B}h[b>>2]=w,i=s,_=r,Fe(H,w)}if(E=(0|g)>(0|D),(0|g)==(0|D))break}D=g}if(o=-1,E=h[c+8>>2],!(h[E+28>>2]-h[E+24>>2]>>2>(0|z))){if((0|r)!=(0|s)){for(e=c+60|0,w=c+312|0;;){k=h[(s=s-4|0)>>2],h[y+68>>2]=s;l:{c:{u:{if(f[c+270>>1]<=513){if(!d[c+364|0])break u;if(n=h[c+360>>2],(i=h[c+352>>2]+(n>>>3|0)|0)>>>0>=p[c+356>>2])break c;i=d[0|i],h[c+360>>2]=n+1,i=i>>>(7&n)&1}else i=Gi(w);if(!i)break c}if(S=h[c+8>>2],L=h[S>>2],((h[S+4>>2]-L>>2>>>0)/3|0)<=(0|D))break o;if(n=-1,_=-1,T=-1,m=C=h[S+24>>2],g=-1,-1!=(0|k)&&(g=-1,-1!=(0|(i=((i=k+1|0)>>>0)%3|0?i:k-2|0))&&(g=h[L+(i<<2)>>2])),i=-1,-1!=(0|(b=h[(g<<2)+m>>2]))&&(i=-1,-1!=(0|(m=((m=b+1|0)>>>0)%3|0?m:b-2|0))&&(n=m,i=-1!=(0|(i=((i=m+1|0)>>>0)%3|0?i:n-2|0))?h[L+(i<<2)>>2]:-1)),b=-1,-1!=(0|(C=h[C+(i<<2)>>2]))&&(b=-1,-1!=(0|(m=((m=C+1|0)>>>0)%3|0?m:C-2|0))&&(-1!=(0|(b=((b=m+1|0)>>>0)%3|0?b:m-2|0))&&(T=h[L+(b<<2)>>2]),b=m)),F=h[S+12>>2],M=v(D,3),h[F+(C=M<<2)>>2]=k,h[F+(k<<2)>>2]=M,h[(m=(k=M+1|0)<<2)+F>>2]=n,h[F+(n<<2)>>2]=k,h[(n=(S=M+2|0)<<2)+F>>2]=b,h[F+(b<<2)>>2]=S,h[C+L>>2]=i,h[(b=m+L|0)>>2]=T,h[(m=n+L|0)>>2]=g,C=h[c+120>>2],i=h[(n=C+((g=M>>>0>k>>>0?-1:i)>>>3&536870908)|0)>>2],W=n,Y=In(g)&i,h[W>>2]=Y,_=-1!=(0|k)?h[b>>2]:_,i=h[(n=C+(_>>>3&536870908)|0)>>2],W=n,Y=In(_)&i,h[W>>2]=Y,n=-1,n=-1!=(0|S)?h[m>>2]:n,i=h[(g=C+(n>>>3&536870908)|0)>>2],W=g,Y=In(n)&i,h[W>>2]=Y,(0|(n=h[c+64>>2]))==(i=h[c+68>>2])<<5){if((n+1|0)<0)break s;xe(e,i=n>>>0<=1073741822?(n=n+32&-32)>>>0>(i<<=6)>>>0?n:i:2147483647),n=h[c+64>>2]}if(D=D+1|0,h[c+64>>2]=n+1,i=h[c+60>>2]+(n>>>3&536870908)|0,h[i>>2]=h[i>>2]|1<<n,(0|(i=h[c+76>>2]))!=h[c+80>>2]){h[i>>2]=M,h[c+76>>2]=i+4;break l}if((g=1+(n=(_=i-(m=h[c+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(i=_>>1,g=_>>>0<2147483644?i>>>0<g>>>0?g:i:1073741823){if(g>>>0>=1073741824)break r;i=gn(g<<2)}else i=0;if(h[(n=i+(n<<2)|0)>>2]=M,(0|_)>0&&We(i,m,_),h[c+80>>2]=i+(g<<2),h[c+76>>2]=n+4,h[c+72>>2]=i,!m)break l;ve(m);break l}if((0|(E=h[c+64>>2]))==(i=h[c+68>>2])<<5){if((E+1|0)<0)break s;xe(e,i=E>>>0<=1073741822?(n=E+32&-32)>>>0>(i<<=6)>>>0?n:i:2147483647),E=h[c+64>>2]}if(h[c+64>>2]=E+1,n=h[c+60>>2]+(E>>>3&536870908)|0,i=h[n>>2],W=n,Y=In(E)&i,h[W>>2]=Y,(0|(i=h[c+76>>2]))==h[c+80>>2]){if((g=1+(n=(_=i-(m=h[c+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(i=_>>1,g=_>>>0<2147483644?i>>>0<g>>>0?g:i:1073741823){if(g>>>0>=1073741824)break r;i=gn(g<<2)}else i=0;h[(n=i+(n<<2)|0)>>2]=k,(0|_)>0&&We(i,m,_),h[c+80>>2]=i+(g<<2),h[c+76>>2]=n+4,h[c+72>>2]=i,m&&ve(m)}else h[i>>2]=k,h[c+76>>2]=i+4}if((0|r)==(0|s))break}E=h[c+8>>2]}if(((h[E+4>>2]-h[E>>2]>>2>>>0)/3|0)==(0|D))if(s=h[E+24>>2],o=h[E+28>>2]-s>>2,(0|l)!=(0|B))for(e=l;;){if(g=h[e>>2],-1==h[(i=((n=o-1|0)<<2)+s|0)>>2])for(;n=o-2|0,o=o-1|0,-1==h[(i=(n<<2)+s|0)>>2];);if(n>>>0>=g>>>0){if(h[y>>2]=E,s=h[i>>2],a[y+12|0]=1,h[y+8>>2]=s,h[y+4>>2]=s,-1!=(0|s))for(;h[h[E>>2]+(s<<2)>>2]=g,_t(y),E=h[c+8>>2],-1!=(0|(s=h[y+8>>2])););i=(s=h[E+24>>2])+(n<<2)|0,-1!=(0|g)&&(h[(g<<2)+s>>2]=h[i>>2]),h[i>>2]=-1,m=1<<g,g=(i=h[c+120>>2])+(g>>>3&536870908)|0,D=i+(n>>>3&536870908)|0,i=1<<n,h[D>>2]&i?m|=h[g>>2]:m=h[g>>2]&(-1^m),h[g>>2]=m,h[D>>2]=h[D>>2]&(-1^i),o=o-1|0}if((0|B)==(0|(e=e+4|0)))break}else l=B}}if(l&&ve(l),e=h[y+48>>2])for(;l=h[e>>2],ve(e),e=l;);e=h[y+40>>2],h[y+40>>2]=0,e&&ve(e),r&&(h[y+68>>2]=r,ve(r)),N=y+96|0;break n}pr(),x()}vr(),x()}Qi(1336),x()}if(-1!=(0|o)){l=(e=h[t+16>>2])+h[t>>2]|0,e=(r=h[t+8>>2])-e|0,r=h[h[c+4>>2]+32>>2],u[r+38>>1]=f[r+38>>1],h[r>>2]=l,h[r+16>>2]=0,h[r+20>>2]=0,h[r+8>>2]=e,h[r+12>>2]=0,r=h[c+4>>2],(65535&(l=(e=f[r+36>>1])<<8|e>>>8))>>>0<=513&&(e=h[r+32>>2],r=j+h[e+20>>2]|0,r=(s=A+h[e+16>>2]|0)>>>0<A>>>0?r+1|0:r,h[e+16>>2]=s,h[e+20>>2]=r);n:if(h[c+216>>2]!=h[c+220>>2]){if(e=h[c+8>>2],r=h[e>>2],e=h[e+4>>2],!((65535&l)>>>0>=513)){if((0|e)==(0|r))break n;for(s=0;;){if(Oe(c,s)){if(s=s+3|0,e=h[c+8>>2],s>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}if((0|e)!=(0|r)){for(s=0;;){if(De(c,s)){if(s=s+3|0,e=h[c+8>>2],s>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}}if(ci(U),(0|(s=h[c+216>>2]))!=h[c+220>>2])for(l=0;;){if(lt(4+((r=v(l,144))+s|0)|0,h[c+8>>2]),P=h[V>>2],(0|(s=h[132+(e=r+P|0)>>2]))!=(0|(e=h[e+136>>2])))for(;dt(4+(r+P|0)|0,h[s>>2]),P=h[V>>2],(0|e)!=(0|(s=s+4|0)););if(_e(4+(r+P|0)|0),l=l+1|0,s=h[c+216>>2],!(l>>>0<(h[c+220>>2]-s|0)/144>>>0))break}if(e=h[c+8>>2],oi(c+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(P=h[c+216>>2]))!=h[c+220>>2])for(s=0;e=v(s,144)+P|0,r=h[e+60>>2]-h[e+56>>2]>>2,l=e+104|0,e=h[c+8>>2],oi(l,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|r)?e:r),s=s+1|0,P=h[c+216>>2],s>>>0<(h[c+220>>2]-P|0)/144>>>0;);P=re(c,o)}}break e}P=0}return N=t- -64|0,0|P},hr,Kn,Jn,Xe,function(e){ve(Xe(e|=0))},zn,jt,Kt,J,function(e){var t,i=0,n=0,r=0,s=0,o=0,l=0,c=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0,F=0,G=0,V=0,z=0,H=0,j=0,W=0;if(N=t=N+-64|0,h[132+(e|=0)>>2]=0,h[e+148>>2]){if(i=h[e+144>>2])for(;s=h[i>>2],ve(i),i=s;);if(i=0,h[e+144>>2]=0,s=h[e+140>>2]){if(s-1>>>0>=3)for(r=-4&s;h[(l=i<<2)+h[e+136>>2]>>2]=0,h[h[e+136>>2]+(4|l)>>2]=0,h[h[e+136>>2]+(8|l)>>2]=0,h[h[e+136>>2]+(12|l)>>2]=0,i=i+4|0,(0|r)!=(0|(c=c+4|0)););if(s&=3)for(;h[h[e+136>>2]+(i<<2)>>2]=0,i=i+1|0,(0|s)!=(0|(P=P+1|0)););}h[e+148>>2]=0}e:{t:{if(i=h[e+4>>2],!((c=(P=d[i+36|0])<<8|d[i+37|0])>>>0>513))if(s=h[i+32>>2],c>>>0<=511){if(c=h[s+20>>2],c=(r=(l=h[s+16>>2])+4|0)>>>0<4?c+1|0:c,(0|(n=h[s+12>>2]))<=(0|c)&r>>>0>p[s+8>>2]|(0|n)<(0|c))break t;l=l+h[s>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[s+16>>2]=r,h[s+20>>2]=c,h[e+132>>2]=l}else{if(!Si(1,t,s))break t;i=h[e+4>>2],P=d[i+36|0],h[e+132>>2]=h[t>>2]}c=h[i+32>>2];i:{n:{if((255&P)>>>0<=1){if(P=0,s=h[c+20>>2],s=(r=(l=h[c+16>>2])+4|0)>>>0<4?s+1|0:s,(0|(n=h[c+12>>2]))<=(0|s)&r>>>0>p[c+8>>2]|(0|n)<(0|s))break e;l=l+h[c>>2]|0,l=d[0|l]|d[l+1|0]<<8|d[l+2|0]<<16|d[l+3|0]<<24,h[t+60>>2]=l,h[c+16>>2]=r,h[c+20>>2]=s,h[e+156>>2]=l,r=e+156|0}else{if(P=0,!Si(1,t+60|0,c))break e;if(i=h[e+4>>2],s=d[i+36|0],h[e+156>>2]=h[t+60>>2],r=e+156|0,s>>>0>1)break n}if(s=h[i+32>>2],i=h[s+8>>2],c=h[s+12>>2],m=i,i=h[s+20>>2],m>>>0<(n=(l=h[s+16>>2])+4|0)>>>0&(0|(i=n>>>0<4?i+1|0:i))>=(0|c)|(0|i)>(0|c))break e;c=l+h[s>>2]|0,c=d[0|c]|d[c+1|0]<<8|d[c+2|0]<<16|d[c+3|0]<<24,h[t+56>>2]=c,h[s+16>>2]=n,h[s+20>>2]=i;break i}if(!Si(1,t+56|0,h[i+32>>2]))break e;c=h[t+56>>2]}if(c>>>0>1431655765|p[r>>2]>v(c,3)>>>0)break e;if(o=h[e+4>>2],l=h[o+32>>2],g=h[(i=l)+8>>2],(0|(r=h[i+12>>2]))<=(0|(s=h[i+20>>2]))&g>>>0<=(n=h[i+16>>2])>>>0|(0|s)>(0|r))break e;if(_=h[l>>2],m=d[_+n|0],i=s,i=(O=n+1|0)?i:i+1|0,h[l+16>>2]=O,h[l+20>>2]=i,d[o+36|0]<=1){if((0|(i=r))<=(0|(s=(r=n+5|0)>>>0<5?s+1|0:s))&(n=r)>>>0>g>>>0|(0|i)<(0|s))break e;r=d[0|(i=_+O|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[t+52>>2]=r,h[l+16>>2]=n,h[l+20>>2]=s}else{if(!Si(1,t+52|0,l))break e;r=h[t+52>>2]}if(((r>>>0)/3|0)+r>>>0<c>>>0|r>>>0>c>>>0)break e;if(i=h[e+4>>2],l=h[i+32>>2],d[i+36|0]<=1){if(i=h[l+20>>2],i=(n=(s=h[l+16>>2])+4|0)>>>0<4?i+1|0:i,(0|(o=h[l+12>>2]))<=(0|i)&n>>>0>p[l+8>>2]|(0|i)>(0|o))break e;s=s+h[l>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+48>>2]=s,h[l+16>>2]=n,h[l+20>>2]=i}else{if(!Si(1,t+48|0,l))break e;s=h[t+48>>2]}if(s>>>0>r>>>0)break e;if(h[e+28>>2]=h[e+24>>2],vi(l=gn(88)),i=h[e+8>>2],h[e+8>>2]=l,i&&(Ii(i),!h[e+8>>2]))break e;if(h[e+164>>2]=h[e+160>>2],ki(e+160|0,c),h[e+176>>2]=h[e+172>>2],ki(e+172|0,c),h[e- -64>>2]=0,h[e+92>>2]=-1,h[e+84>>2]=-1,h[e+88>>2]=-1,h[e+40>>2]=h[e+36>>2],h[e+52>>2]=h[e+48>>2],h[e+76>>2]=h[e+72>>2],Ui(V=e+216|0),pe(V,m),!zt(h[e+8>>2],c,h[e+156>>2]+s|0))break e;if(i=h[e+156>>2],a[0|t]=1,Pt(e+120|0,i+s|0,t),i=h[e+4>>2],(c=65535&((c=f[i+36>>1])<<8|c>>>8))>>>0<=513){if(l=h[i+32>>2],c>>>0<=511){if(c=h[l+20>>2],o=i=(n=h[l+16>>2])+4|0,i=c=i>>>0<4?c+1|0:c,g=h[l+12>>2],o>>>0>p[l+8>>2]&(0|i)>=(0|g)|(0|i)>(0|g))break e;c=n+h[l>>2]|0,c=d[0|c]|d[c+1|0]<<8|d[c+2|0]<<16|d[c+3|0]<<24,h[l+16>>2]=o,h[l+20>>2]=i}else{if(!Si(1,t+44|0,l))break e;c=h[t+44>>2]}if(!c)break e;if(i=h[h[e+4>>2]+32>>2],(o=(l=h[i+8>>2])-(n=h[i+16>>2])|0)>>>0<c>>>0&(0|(i=h[i+12>>2]-(h[i+20>>2]+(n>>>0>l>>>0)|0)|0))<=0|(0|i)<0)break e;if(u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,l=h[h[e+4>>2]+32>>2],n=((i=h[l+16>>2])+h[l>>2]|0)+c|0,i=((o=h[l+8>>2])-i|0)-c|0,u[t+38>>1]=f[l+38>>1],h[t>>2]=n,h[t+16>>2]=0,h[t+20>>2]=0,h[t+8>>2]=i,h[t+12>>2]=0,-1==(0|(O=ee(e,t))))break e;z=O>>31}else if(O=-1,z=-1,-1==(0|ee(e,h[i+32>>2])))break e;di(o=e+232|0,e),h[e+372>>2]=m,h[e+384>>2]=h[e+156>>2]+s,u[t+38>>1]=0,h[t>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,h[t+16>>2]=0,h[t+20>>2]=0,h[t+24>>2]=0,h[t+28>>2]=0,a[t+29|0]=0,a[t+30|0]=0,a[t+31|0]=0,a[t+32|0]=0,a[t+33|0]=0,a[t+34|0]=0,a[t+35|0]=0,a[t+36|0]=0,c=0,N=m=N-16|0;i:{n:{if(i=h[o+144>>2],(65535&((i=f[36+(0|Rr[h[h[i>>2]+32>>2]](i))>>1])<<8|i>>>8))>>>0<=513){if(i=h[o+4>>2],h[o+40>>2]=h[o>>2],h[o+44>>2]=i,i=h[o+36>>2],h[o+72>>2]=h[o+32>>2],h[o+76>>2]=i,s=h[o+28>>2],h[(i=o- -64|0)>>2]=h[o+24>>2],h[i+4>>2]=s,i=h[o+20>>2],h[o+56>>2]=h[o+16>>2],h[o+60>>2]=i,i=h[o+12>>2],h[o+48>>2]=h[o+8>>2],h[o+52>>2]=i,!Ut(o+40|0,1,m+8|0))break n;if(i=h[o+44>>2],h[o>>2]=h[o+40>>2],h[o+4>>2]=i,i=h[o+76>>2],h[o+32>>2]=h[o+72>>2],h[o+36>>2]=i,i=h[o+68>>2],h[o+24>>2]=h[o+64>>2],h[o+28>>2]=i,l=s=h[o+60>>2],i=h[o+56>>2],h[o+16>>2]=i,h[o+20>>2]=s,n=h[o+52>>2],s=h[o+48>>2],h[o+8>>2]=s,h[o+12>>2]=n,g=s-i|0,(0|(_=h[m+12>>2]))==(0|(s=n-((i>>>0>s>>>0)+l|0)|0))&g>>>0<(n=h[m+8>>2])>>>0|s>>>0<_>>>0)break n;s=i,n=i+n|0,i=l+_|0,h[o+16>>2]=n,h[o+20>>2]=n>>>0<s>>>0?i+1|0:i}if(f[o+38>>1]<=513){if(i=h[o+4>>2],h[o+96>>2]=h[o>>2],h[o+100>>2]=i,i=h[o+36>>2],h[o+128>>2]=h[o+32>>2],h[o+132>>2]=i,i=h[o+28>>2],h[o+120>>2]=h[o+24>>2],h[o+124>>2]=i,i=h[o+20>>2],h[o+112>>2]=h[o+16>>2],h[o+116>>2]=i,i=h[o+12>>2],h[o+104>>2]=h[o+8>>2],h[o+108>>2]=i,!Ut(o+96|0,1,m+8|0))break n;if(i=h[o+100>>2],h[o>>2]=h[o+96>>2],h[o+4>>2]=i,i=h[o+132>>2],h[o+32>>2]=h[o+128>>2],h[o+36>>2]=i,i=h[o+124>>2],h[o+24>>2]=h[o+120>>2],h[o+28>>2]=i,l=s=h[o+116>>2],i=h[o+112>>2],h[o+16>>2]=i,h[o+20>>2]=s,n=h[o+108>>2],s=h[o+104>>2],h[o+8>>2]=s,h[o+12>>2]=n,g=s-i|0,(0|(_=h[m+12>>2]))==(0|(s=n-((i>>>0>s>>>0)+l|0)|0))&g>>>0<(n=h[m+8>>2])>>>0|s>>>0<_>>>0)break n;s=l+_|0,s=(n=i+n|0)>>>0<i>>>0?s+1|0:s,h[o+16>>2]=n,h[o+20>>2]=s}else if(!He(o+80|0,o))break i;if(!Ot(o))break i;if(i=h[o+4>>2],h[t>>2]=h[o>>2],h[t+4>>2]=i,i=h[o+36>>2],h[t+32>>2]=h[o+32>>2],h[t+36>>2]=i,i=h[o+28>>2],h[t+24>>2]=h[o+24>>2],h[t+28>>2]=i,i=h[o+20>>2],h[t+16>>2]=h[o+16>>2],h[t+20>>2]=i,i=h[o+12>>2],h[t+8>>2]=h[o+8>>2],h[t+12>>2]=i,i=h[o+144>>2],(65535&((i=f[36+(0|Rr[h[h[i>>2]+32>>2]](i))>>1])<<8|i>>>8))>>>0<=513){if(i=h[o+144>>2],d[36+(0|Rr[h[h[i>>2]+32>>2]](i))|0]<=1){if(i=h[t+20>>2],i=(l=(s=h[t+16>>2])+4|0)>>>0<4?i+1|0:i,(0|(n=h[t+12>>2]))<=(0|i)&l>>>0>p[t+8>>2]|(0|i)>(0|n))break i;s=s+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=l,h[t+20>>2]=i}else{if(!Si(1,m+8|0,t))break i;s=h[m+8>>2]}if(s>>>0>=(i=h[o+152>>2])>>>0)break i;if((0|(s=h[t+20>>2]))>=(0|(n=h[t+12>>2]))&(l=h[t+16>>2])>>>0>=p[t+8>>2]|(0|n)<(0|s))break i;if(n=d[l+h[t>>2]|0],s=(l=l+1|0)?s:s+1|0,h[t+16>>2]=l,h[t+20>>2]=s,n)break i;h[o+176>>2]=2,h[o+180>>2]=7}else h[o+176>>2]=2,h[o+180>>2]=7,i=h[o+152>>2];if((0|i)<0)break i;if(h[m+8>>2]=0,c=2,n=h[o+156>>2],(l=h[o+160>>2]-n>>2)>>>0<i>>>0?(Ye(o+156|0,i-l|0,m+8|0),c=h[o+176>>2],s=h[o+180>>2]):(s=7,i>>>0>=l>>>0||(h[o+160>>2]=n+(i<<2))),l=o+184|0,(s=1+(s-c|0)|0)>>>0>(c=((i=h[o+188>>2])-(n=h[o+184>>2])|0)/12|0)>>>0){if((s=s-c|0)>>>0<=((g=h[l+8>>2])-(i=h[l+4>>2])|0)/12>>>0)s&&(i=xt(c=i,0,i=v((v(s,12)-12>>>0)/12|0,12)+12|0)+i|0),h[l+4>>2]=i;else{r:{a:{s:{if((n=(_=(i-(c=h[l>>2])|0)/12|0)+s|0)>>>0<357913942){if(b=(g=(g-c|0)/12|0)<<1,g=g>>>0<178956970?n>>>0>b>>>0?n:b:357913941){if(g>>>0>=357913942)break s;T=gn(v(g,12))}if(_=(s=xt(n=v(_,12)+T|0,0,_=v((v(s,12)-12>>>0)/12|0,12)+12|0))+_|0,g=v(g,12)+T|0,(0|i)==(0|c))break a;for(;i=i-12|0,h[(n=n-12|0)>>2]=h[i>>2],h[n+4>>2]=h[i+4>>2],h[n+8>>2]=h[i+8>>2],h[i+8>>2]=0,h[i>>2]=0,h[i+4>>2]=0,(0|i)!=(0|c););if(h[l+8>>2]=g,s=h[l+4>>2],h[l+4>>2]=_,i=h[l>>2],h[l>>2]=n,(0|i)==(0|s))break r;for(;(n=h[(c=s-12|0)>>2])&&(h[s-8>>2]=n,ve(n)),(0|(s=c))!=(0|i););break r}vr(),x()}Qi(1336),x()}h[l+8>>2]=g,h[l+4>>2]=_,h[l>>2]=s}i&&ve(i)}s=h[o+188>>2]}else if(s>>>0>=c>>>0)s=i;else{if((0|(s=n+v(s,12)|0))!=(0|i))for(;(n=h[(c=i-12|0)>>2])&&(h[i-8>>2]=n,ve(n)),(0|s)!=(0|(i=c)););h[o+188>>2]=s}if(g=o+196|0,i=(s-(c=h[o+184>>2])|0)/12|0,T=h[o+196>>2],i>>>0>(n=h[o+200>>2]-T>>2)>>>0?(ei(g,i-n|0),c=h[o+184>>2],s=h[o+188>>2]):i>>>0>=n>>>0||(h[o+200>>2]=T+(i<<2)),(0|s)==(0|c)){c=1;break i}for(i=0;;){if(!Si(1,m+8|0,t))break n;if(c=h[m+8>>2],s=h[o+148>>2],c>>>0>(h[s+4>>2]-h[s>>2]>>2>>>0)/3>>>0)break n;if(c&&(s=h[l>>2],b=v(i,12),T=h[(n=s+b|0)>>2],(_=h[n+4>>2]-T>>2)>>>0<c>>>0?(ei(n,c-_|0),s=h[l>>2]):c>>>0>=_>>>0||(h[n+4>>2]=T+(c<<2)),B(c,1,t,h[s+b>>2]),h[h[g>>2]+(i<<2)>>2]=c),c=1,!((i=i+1|0)>>>0<(h[o+188>>2]-h[o+184>>2]|0)/12>>>0))break}break i}c=0}N=m+16|0;i:if(c){i=0,m=0,s=0,l=0,T=0,c=0,N=A=N-96|0,h[A+72>>2]=0,h[A+64>>2]=0,h[A+68>>2]=0,h[A+48>>2]=0,h[A+52>>2]=0,h[A+40>>2]=0,h[A+44>>2]=0,h[A+56>>2]=1065353216,h[A+32>>2]=0,h[A+24>>2]=0,h[A+28>>2]=0,M=1,b=e,L=h[e+124>>2];n:{r:{a:{s:{_=r;o:{l:if(!((0|r)<=0)){for(S=b+232|0,H=h[b+216>>2]!=h[b+220>>2];;){T=(e=T)+1|0;c:if(-1==(0|(r=h[S+172>>2]))){if(n=7,r=h[S+144>>2],!((65535&((r=f[36+(0|Rr[h[h[r>>2]+32>>2]](r))>>1])<<8|r>>>8))>>>0>513)){if(!d[S+76|0]){h[S+168>>2]=1,n=1;break c}n=0,(r=(y=h[S- -64>>2])+((g=h[S+72>>2])>>>3|0)|0)>>>0>=(w=h[S+68>>2])>>>0||(E=d[0|r],r=g+1|0,h[S+72>>2]=r,E>>>(7&g)&1&&((n=y+(E=r>>>3|0)|0)>>>0>=w>>>0?(n=r,r=0):(C=d[0|n],n=g+2|0,h[S+72>>2]=n,E=n>>>3|0,r=C>>>(7&r)&1),(g=y+E|0)>>>0<w>>>0?(g=d[0|g],h[S+72>>2]=n+1,n=g>>>(7&n)<<1&2):n=0,n=(r|n)<<1|1))}h[S+168>>2]=n}else{if(n=h[S+196>>2]+(r<<2)|0,r=(g=h[n>>2])-1|0,h[n>>2]=r,n=9,(0|g)<=0)break c;n=h[12176+(h[h[h[S+184>>2]+v(h[S+172>>2],12)>>2]+(r<<2)>>2]<<2)>>2],h[S+168>>2]=n}c:{if(n){g=-1;u:{h:{d:{f:{p:{m:{g:{v:{b:{_:switch(n-1|0){case 2:case 4:if((0|i)==(0|l))break o;if(r=h[b+8>>2],m=h[r+12>>2],D=(E=(y=v(e,3))+((C=5==(0|n))?2:1)|0)<<2,n=h[(F=i-4|0)>>2],h[m+D>>2]=n,h[m+(n<<2)>>2]=E,si(r+24|0),m=h[b+8>>2],w=h[m+24>>2],h[m+28>>2]-w>>2>(0|L))break o;if(G=(m=h[m>>2])+D|0,D=((r=h[r+28>>2]-h[r+24>>2]|0)>>2)-1|0,h[G>>2]=D,r&&(h[w+(D<<2)>>2]=E),E=C?y:y+2|0,G=m+(y+C<<2)|0,-1!=(0|n)){y:{A:{if((n>>>0)%3|0)r=n-1|0;else if(-1==(0|(r=n+2|0)))break A;if(r=h[m+(r<<2)>>2],h[m+(E<<2)>>2]=r,-1==(0|r))break y;h[w+(r<<2)>>2]=E;break y}h[m+(E<<2)>>2]=-1}r=-1,-1!=(0|(n=((E=n+1|0)>>>0)%3|0?E:n-2|0))&&(r=h[m+(n<<2)>>2])}else h[m+(E<<2)>>2]=-1,r=-1;h[G>>2]=r,h[F>>2]=y;break b;case 0:if((0|i)==(0|m))break o;E=h[(s=i-4|0)>>2],h[A+68>>2]=s;y:if((w=h[A+44>>2])&&(n=h[A+40>>2],r=e&w+2147483647,(C=Dn(w)>>>0>1)&&(r=e,e>>>0<w>>>0||(r=(e>>>0)%(w>>>0)|0)),(r=h[n+((y=r)<<2)>>2])&&(r=h[r>>2]))){A:{if(!C){for(n=w-1|0;;){E:{if((0|(w=h[r+4>>2]))!=(0|e)){if((0|y)==(n&w))break E;break y}if((0|e)==h[r+8>>2])break A}if(!(r=h[r>>2]))break}break y}for(;;){E:{if((0|(n=h[r+4>>2]))!=(0|e)){if(n>>>0>=w>>>0&&(n=(n>>>0)%(w>>>0)|0),(0|n)==(0|y))break E;break y}if((0|e)==h[r+8>>2])break A}if(!(r=h[r>>2]))break}break y}if((0|s)==(0|I)){if((s=1+(n=(i=I-m|0)>>2)|0)>>>0>=1073741824)break m;if(l=i>>1,s=i>>>0<2147483644?s>>>0>l>>>0?s:l:1073741823){if(s>>>0>=1073741824)break r;l=gn(s<<2)}else l=0;h[(n=l+(n<<2)|0)>>2]=h[r+12>>2],I=(s<<2)+l|0,s=n+4|0,(0|i)>0&&We(l,m,i),h[A+72>>2]=I,h[A+68>>2]=s,h[A+64>>2]=l,m&&ve(m)}else h[s>>2]=h[r+12>>2],h[A+68>>2]=i,s=i}if((0|s)==(0|l))break g;if(r=-1==(0|(n=h[(C=s-4|0)>>2])),y=h[b+8>>2],!r&-1!=h[h[y+12>>2]+(n<<2)>>2])break g;if(w=h[y+12>>2],-1!=(0|E)&-1!=h[w+(E<<2)>>2])break g;if(M=(i=v(e,3))+2|0,h[w+(n<<2)>>2]=M,h[(e=M<<2)+w>>2]=n,m=i+1|0,h[w+(E<<2)>>2]=m,h[(D=m<<2)+w>>2]=E,r)break p;if((n>>>0)%3|0){g=n-1|0;break d}if(-1!=(0|(g=n+2|0)))break d;m=h[y>>2],r=-1;break h;case 6:break _;default:break o}if(si((n=h[b+8>>2])+24|0),r=h[b+8>>2],s=v(e,3),C=(y=(E=h[n+28>>2]-h[n+24>>2]|0)>>2)-1|0,h[h[r>>2]+(s<<2)>>2]=C,si(r+24|0),w=s+1|0,h[h[r>>2]+(w<<2)>>2]=(h[r+28>>2]-h[r+24>>2]>>2)-1,si((r=h[b+8>>2])+24|0),D=s+2|0,h[h[r>>2]+(D<<2)>>2]=(h[r+28>>2]-h[r+24>>2]>>2)-1,r=h[b+8>>2],n=h[r+24>>2],h[r+28>>2]-n>>2>(0|L))break o;_:{if(E){if(h[n+(C<<2)>>2]=s,r=0,-4!=(0|E)&&(h[n+(y<<2)>>2]=w,-1==(0|(r=y+1|0))))break _}else h[n+(y<<2)>>2]=w,r=1;h[n+(r<<2)>>2]=D}if((0|i)!=(0|I)){h[i>>2]=s,s=i+4|0,h[A+68>>2]=s,i=s;break v}if((l=1+(n=(i=i-m|0)>>2)|0)>>>0>=1073741824)break f;if(r=i>>1,r=i>>>0<2147483644?r>>>0<l>>>0?l:r:1073741823){if(r>>>0>=1073741824)break r;l=gn(r<<2)}else l=0;h[(n=l+(n<<2)|0)>>2]=s,I=(r<<2)+l|0,s=n+4|0,(0|i)>0&&We(l,m,i),h[A+72>>2]=I,h[A+68>>2]=s,h[A+64>>2]=l,m&&ve(m),i=s}m=l}if(Ve(S,h[i-4>>2]),(0|(r=h[b+40>>2]))==h[b+36>>2])break c;for(n=_+(-1^e)|0,y=s-4|0;;){if((e=h[r-8>>2])>>>0>n>>>0)break g;if((0|e)!=(0|n))break c;if(E=d[r-4|0],i=h[(e=r-12|0)>>2],h[b+40>>2]=e,(0|i)<0)break g;e=h[y>>2],h[A+20>>2]=_+(-1^i),i=A+20|0,h[A+88>>2]=i,be(A,A+40|0,i,A+88|0),r=h[A>>2];v:if(1&E){if(i=-1,-1==(0|e))break v;i=((i=e+1|0)>>>0)%3|0?i:e-2|0}else i=-1,-1!=(0|e)&&(i=e-1|0,(e>>>0)%3|0||(i=e+2|0));if(h[r+12>>2]=i,i=s,(0|(r=h[b+40>>2]))==h[b+36>>2])break}break c}if(1&M)break o;break l}vr(),x()}r=-1,m=h[y>>2],h[m+(i<<2)>>2]=-1,g=-1;break u}vr(),x()}m=h[y>>2],r=h[m+(g<<2)>>2]}h[(i<<2)+m>>2]=r,g=-1,-1!=(0|(n=((F=n+1|0)>>>0)%3|0?F:n-2|0))&&(g=h[(n<<2)+m>>2])}if(h[m+D>>2]=g,-1!=(0|E)){u:{h:{if((E>>>0)%3|0)g=E-1|0;else if(-1==(0|(g=E+2|0)))break h;if(n=e+m|0,e=h[(g<<2)+m>>2],h[n>>2]=e,-1==(0|e))break u;h[h[y+24>>2]+(e<<2)>>2]=M;break u}h[e+m>>2]=-1}M=-1,g=-1,-1!=(0|(e=((e=E+1|0)>>>0)%3|0?e:E-2|0))&&(M=h[(e<<2)+m>>2],g=e)}else h[e+m>>2]=-1,M=-1,g=-1;E=(e=h[b+388>>2])+(n=r<<2)|0,G=e,e=M<<2,h[E>>2]=h[E>>2]+h[G+e>>2],e=(y=h[y+24>>2])+e|0,-1!=(0|r)&&(h[n+y>>2]=h[e>>2]);u:if(-1!=(0|g))for(;;){if(h[(g<<2)+m>>2]=r,-1==(0|(n=((n=g+1|0)>>>0)%3|0?n:g-2|0)))break u;if(-1==(0|(n=h[w+(n<<2)>>2])))break u;if(-1==(0|(g=((g=n+1|0)>>>0)%3|0?g:n-2|0)))break}h[e>>2]=-1;u:if(!H){if((0|k)==(0|U)){h:{if((c=1+(n=(e=U-R|0)>>2)|0)>>>0<1073741824){if(r=e>>1,r=e>>>0<2147483644?r>>>0<c>>>0?c:r:1073741823){if(r>>>0>=1073741824)break h;c=gn(r<<2)}else c=0;h[(n=c+(n<<2)|0)>>2]=M,U=(r<<2)+c|0,k=n+4|0,(0|e)>0&&We(c,R,e),h[A+32>>2]=U,h[A+28>>2]=k,h[A+24>>2]=c,R&&ve(R),R=c;break u}vr(),x()}break r}h[k>>2]=M,k=k+4|0,h[A+28>>2]=k}h[C>>2]=i}else{if((0|s)==(0|l)){g=-1;break o}n=-1,y=h[b+8>>2],i=E=h[y+24>>2],r=-1,-1!=(0|(g=h[(w=s-4|0)>>2]))&&(r=-1,-1!=(0|(m=((m=g+1|0)>>>0)%3|0?m:g-2|0))&&(r=h[h[y>>2]+(m<<2)>>2])),-1!=(0|(i=h[i+(r<<2)>>2]))&&(n=((n=i+1|0)>>>0)%3|0?n:i-2|0),m=h[y+12>>2],e=(i=v(e,3))+1|0,h[m+(g<<2)>>2]=e,h[(C=e<<2)+m>>2]=g,M=i+2|0,h[m+(n<<2)>>2]=M,h[(D=M<<2)+m>>2]=n,m=-1,e=-1;u:if(-1!=(0|g)){if((g>>>0)%3|0)g=g-1|0;else if(e=-1,-1==(0|(g=g+2|0)))break u;e=h[h[y>>2]+(g<<2)>>2]}if(-1!=(0|n)&&-1!=(0|(n=((g=n+1|0)>>>0)%3|0?g:n-2|0))&&(m=h[h[y>>2]+(n<<2)>>2]),g=-1,(0|e)==(0|r)|(0|r)==(0|m))break o;n=h[y>>2],h[n+(i<<2)>>2]=r,h[n+C>>2]=m,h[n+D>>2]=e,-1!=(0|e)&&(h[E+(e<<2)>>2]=M),e=h[b+120>>2]+(r>>>3&536870908)|0,n=h[e>>2],j=e,W=In(r)&n,h[j>>2]=W,h[w>>2]=i}Ve(S,i),i=s,m=l}if(M=(0|_)>(0|T),(0|_)==(0|T))break}T=_}if(g=-1,i=h[b+8>>2],!(h[i+28>>2]-h[i+24>>2]>>2>(0|L))){if((0|s)!=(0|l)){for(e=b+60|0,I=b+312|0;;){R=h[(s=s-4|0)>>2],h[A+68>>2]=s;l:{c:{u:{if(f[b+270>>1]<=513){if(!d[b+364|0])break u;if(i=h[b+360>>2],(r=h[b+352>>2]+(i>>>3|0)|0)>>>0>=p[b+356>>2])break c;r=d[0|r],h[b+360>>2]=i+1,i=r>>>(7&i)&1}else i=Gi(I);if(!i)break c}if(S=h[b+8>>2],y=h[S>>2],((h[S+4>>2]-y>>2>>>0)/3|0)<=(0|T))break o;if(r=-1,n=-1,m=h[S+24>>2],i=-1,-1!=(0|R)&&(i=-1,-1!=(0|(_=((_=R+1|0)>>>0)%3|0?_:R-2|0))&&(i=h[y+(_<<2)>>2])),-1!=(0|(i=h[m+((_=i)<<2)>>2]))&&-1!=(0|(i=((M=i+1|0)>>>0)%3|0?M:i-2|0))&&(-1!=(0|(r=((r=i+1|0)>>>0)%3|0?r:i-2|0))&&(n=h[y+(r<<2)>>2]),r=i),M=-1,E=-1,i=-1,-1!=(0|(m=h[m+(n<<2)>>2]))&&(i=-1,-1!=(0|(m=((w=m+1|0)>>>0)%3|0?w:m-2|0))&&(-1!=(0|(i=((i=m+1|0)>>>0)%3|0?i:m-2|0))&&(E=h[y+(i<<2)>>2]),i=m)),S=h[S+12>>2],m=v(T,3),h[S+(L=m<<2)>>2]=R,h[S+(R<<2)>>2]=m,h[(U=(R=m+1|0)<<2)+S>>2]=r,h[S+(r<<2)>>2]=R,h[(r=(w=m+2|0)<<2)+S>>2]=i,h[S+(i<<2)>>2]=w,h[y+L>>2]=n,h[(S=y+U|0)>>2]=E,h[(y=r+y|0)>>2]=_,i=h[b+120>>2],_=h[(n=i+((r=m>>>0>R>>>0?-1:n)>>>3&536870908)|0)>>2],j=n,W=In(r)&_,h[j>>2]=W,M=-1!=(0|R)?h[S>>2]:M,n=h[(r=i+(M>>>3&536870908)|0)>>2],j=r,W=In(M)&n,h[j>>2]=W,r=-1,r=-1!=(0|w)?h[y>>2]:r,n=h[(i=i+(r>>>3&536870908)|0)>>2],j=i,W=In(r)&n,h[j>>2]=W,(0|(r=h[b+64>>2]))==(i=h[b+68>>2])<<5){if((r+1|0)<0)break s;xe(e,i=r>>>0<=1073741822?(i<<=6)>>>0<(r=r+32&-32)>>>0?r:i:2147483647),r=h[b+64>>2]}if(T=T+1|0,h[b+64>>2]=r+1,i=h[b+60>>2]+(r>>>3&536870908)|0,h[i>>2]=h[i>>2]|1<<r,(0|(i=h[b+76>>2]))!=h[b+80>>2]){h[i>>2]=m,h[b+76>>2]=i+4;break l}if((i=1+(R=(r=i-(n=h[b+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(_=r>>1,_=r>>>0<2147483644?i>>>0>_>>>0?i:_:1073741823){if(_>>>0>=1073741824)break r;i=gn(_<<2)}else i=0;if(h[(R=i+(R<<2)|0)>>2]=m,(0|r)>0&&We(i,n,r),h[b+80>>2]=i+(_<<2),h[b+76>>2]=R+4,h[b+72>>2]=i,!n)break l;ve(n);break l}if((0|(i=h[b+64>>2]))==(r=h[b+68>>2])<<5){if((i+1|0)<0)break s;xe(e,i=i>>>0<=1073741822?(i=i+32&-32)>>>0>(r<<=6)>>>0?i:r:2147483647),i=h[b+64>>2]}if(h[b+64>>2]=i+1,r=h[b+60>>2]+(i>>>3&536870908)|0,n=h[r>>2],j=r,W=In(i)&n,h[j>>2]=W,(0|(i=h[b+76>>2]))==h[b+80>>2]){if((i=1+(_=(r=i-(n=h[b+72>>2])|0)>>2)|0)>>>0>=1073741824)break a;if(m=r>>1,m=r>>>0<2147483644?i>>>0>m>>>0?i:m:1073741823){if(m>>>0>=1073741824)break r;i=gn(m<<2)}else i=0;h[(_=i+(_<<2)|0)>>2]=R,(0|r)>0&&We(i,n,r),h[b+80>>2]=i+(m<<2),h[b+76>>2]=_+4,h[b+72>>2]=i,n&&ve(n)}else h[i>>2]=R,h[b+76>>2]=i+4}if((0|s)==(0|l))break}i=h[b+8>>2]}if(((h[i+4>>2]-h[i>>2]>>2>>>0)/3|0)==(0|T))if(r=h[i+24>>2],g=h[i+28>>2]-r>>2,(0|c)!=(0|k))for(n=c;;){if(e=h[n>>2],-1==h[(m=((s=g-1|0)<<2)+r|0)>>2])for(;s=g-2|0,g=g-1|0,-1==h[(m=(s<<2)+r|0)>>2];);if(e>>>0<=s>>>0){if(h[A>>2]=i,r=h[m>>2],a[A+12|0]=1,h[A+8>>2]=r,h[A+4>>2]=r,-1!=(0|r))for(;h[h[i>>2]+(r<<2)>>2]=e,_t(A),i=h[b+8>>2],-1!=(0|(r=h[A+8>>2])););m=(r=h[i+24>>2])+(s<<2)|0,-1!=(0|e)&&(h[(e<<2)+r>>2]=h[m>>2]),h[m>>2]=-1,m=1<<e,e=(T=h[b+120>>2])+(e>>>3&536870908)|0,T=T+(s>>>3&536870908)|0,s=1<<s,h[T>>2]&s?m|=h[e>>2]:m=h[e>>2]&(-1^m),h[e>>2]=m,h[T>>2]=h[T>>2]&(-1^s),g=g-1|0}if((0|k)==(0|(n=n+4|0)))break}else c=k}}if(c&&ve(c),e=h[A+48>>2])for(;i=h[e>>2],ve(e),e=i,i;);e=h[A+40>>2],h[A+40>>2]=0,e&&ve(e),l&&(h[A+68>>2]=l,ve(l)),N=A+96|0;break n}pr(),x()}vr(),x()}Qi(1336),x()}if(-1!=(0|g)){i=(e=h[t+16>>2])+h[t>>2]|0,s=(s=h[t+8>>2])-e|0,e=h[h[b+4>>2]+32>>2],u[e+38>>1]=f[e+38>>1],h[e>>2]=i,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=s,h[e+12>>2]=0,e=h[b+4>>2],(65535&(c=(i=f[e+36>>1])<<8|i>>>8))>>>0<=513&&(e=h[e+32>>2],s=z+h[e+20>>2]|0,s=(i=O+h[e+16>>2]|0)>>>0<O>>>0?s+1|0:s,h[e+16>>2]=i,h[e+20>>2]=s);n:if(h[b+216>>2]!=h[b+220>>2]){if(i=h[b+8>>2],e=h[i>>2],i=h[i+4>>2],!((65535&c)>>>0>=513)){if((0|e)==(0|i))break n;for(i=0;;){if(Oe(b,i)){if(i=i+3|0,e=h[b+8>>2],i>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}if((0|e)!=(0|i)){for(i=0;;){if(De(b,i)){if(i=i+3|0,e=h[b+8>>2],i>>>0<h[e+4>>2]-h[e>>2]>>2>>>0)continue;break n}break}break i}}if(ci(o),(0|(i=h[b+216>>2]))!=h[b+220>>2])for(c=0;;){if(lt(4+((e=v(c,144))+i|0)|0,h[b+8>>2]),P=h[V>>2],(0|(i=h[132+(s=e+P|0)>>2]))!=(0|(s=h[s+136>>2])))for(;dt(4+(e+P|0)|0,h[i>>2]),P=h[V>>2],(0|s)!=(0|(i=i+4|0)););if(_e(4+(e+P|0)|0),c=c+1|0,i=h[b+216>>2],!(c>>>0<(h[b+220>>2]-i|0)/144>>>0))break}if(e=h[b+8>>2],oi(b+184|0,h[e+28>>2]-h[e+24>>2]>>2),(0|(P=h[b+216>>2]))!=h[b+220>>2])for(i=0;e=v(i,144)+P|0,s=h[e+60>>2]-h[e+56>>2]>>2,c=e+104|0,e=h[b+8>>2],oi(c,(0|(e=h[e+28>>2]-h[e+24>>2]>>2))>(0|s)?e:s),i=i+1|0,P=h[b+216>>2],i>>>0<(h[b+220>>2]-P|0)/144>>>0;);P=re(b,g)}}break e}P=0}return N=t- -64|0,0|P},hr,Kn,Jn,un,function(e){var t=0;h[(e|=0)>>2]=11900,(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12152,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),ve(e)},pi,function(e){var t=0;return h[(e|=0)>>2]=12152,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12152,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),ve(e)},function(e){var t=0;return h[8+(e|=0)>>2]=12416,h[e>>2]=12204,(t=h[e+96>>2])&&(h[e+100>>2]=t,ve(t)),(t=h[e+80>>2])&&(h[e+84>>2]=t,ve(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,ve(t)),(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=12416,h[e>>2]=12204,(t=h[e+96>>2])&&(h[e+100>>2]=t,ve(t)),(t=h[e+80>>2])&&(h[e+84>>2]=t,ve(t)),(t=h[e+68>>2])&&(h[e+72>>2]=t,ve(t)),(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),ve(e)},function(e,t){t|=0;var i,n,r,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(n=h[12+(e|=0)>>2],s=h[e+108>>2],l=h[s+80>>2],a[t+84|0]=0,c=h[t+68>>2],(o=h[t+72>>2]-c>>2)>>>0<l>>>0?(Ye(t+68|0,l-o|0,12404),s=h[e+108>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=c+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;r=(s=(0|s)/12|0)>>>0>1?s:1,s=0;e:{for(;;){if(1431655765==(0|s))break e;if(o=h[n>>2]+(v(s,3)<<2)|0,-1==(0|(d=h[o>>2])))break e;if(c=v(s,12)+i|0,(u=h[c>>2])>>>0>=l>>>0)break e;if(p=h[h[e+112>>2]+12>>2],(f=h[p+(d<<2)>>2])>>>0>=l>>>0)break e;if(d=h[t+68>>2],h[d+(u<<2)>>2]=f,-1==(0|(u=h[o+4>>2])))break e;if((f=h[c+4>>2])>>>0>=l>>>0)break e;if((u=h[(u<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(f<<2)>>2]=u,-1==(0|(o=h[o+8>>2])))break e;if((c=h[c+8>>2])>>>0>=l>>>0)break e;if((o=h[(o<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(c<<2)>>2]=o,(0|r)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t,i=0,n=0,r=0,a=0,s=0,o=0;N=t=N-16|0,i=h[4+(e|=0)>>2],r=h[i>>2];e:{if(n=h[e+12>>2],!((a=(n=h[n+28>>2]-h[n+24>>2]|0)>>2)>>>0<=h[i+8>>2]-r>>2>>>0)){if((0|n)<0)break e;s=h[i+4>>2],o=(n=gn(n))+(a<<2)|0,s=(a=s-r|0)+n|0,(0|a)>0&&We(n,r,a),h[i+8>>2]=o,h[i+4>>2]=s,h[i>>2]=n,r&&ve(r)}i=h[e+12>>2],r=h[i+28>>2],i=h[i+24>>2],h[t+12>>2]=0,i=r-i>>2,a=h[(n=e+96|0)>>2],i>>>0>(r=h[e+100>>2]-a>>2)>>>0?Ye(n,i-r|0,t+12|0):i>>>0>=r>>>0||(h[e+100>>2]=a+(i<<2)),a=e+8|0;t:if(i=h[e+116>>2]){if((0|(n=h[i>>2]))==h[i+4>>2]){r=1;break t}for(i=0;;){if(!(r=ne(a,h[(i<<2)+n>>2])))break t;if(s=h[e+116>>2],n=h[s>>2],!((i=i+1|0)>>>0<h[s+4>>2]-n>>2>>>0))break}}else if(r=1,e=h[e+12>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,i=0;;){if(!(r=ne(a,v(i,3))))break t;if((0|e)==(0|(i=i+1|0)))break}return N=t+16|0,0|r}Qi(1336),x()},function(e){var t=0;return h[(e|=0)>>2]=12416,(t=h[e+88>>2])&&(h[e+92>>2]=t,ve(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,ve(t)),(t=h[e+60>>2])&&(h[e- -64>>2]=t,ve(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12416,(t=h[e+88>>2])&&(h[e+92>>2]=t,ve(t)),(t=h[e+72>>2])&&(h[e+76>>2]=t,ve(t)),(t=h[e+60>>2])&&(h[e- -64>>2]=t,ve(t)),(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),ve(e)},function(e,t,i){t|=0,i|=0;var n,r=0;N=n=N-16|0,h[4+(e|=0)>>2]=t,r=h[t>>2],t=h[t+4>>2],a[n+15|0]=0,Pt(e+24|0,(t-r>>2>>>0)/3|0,n+15|0),t=h[e+4>>2],r=h[t+28>>2],t=h[t+24>>2],a[n+14|0]=0,Pt(e+36|0,r-t>>2,n+14|0),t=h[i+12>>2],h[e+16>>2]=h[i+8>>2],h[e+20>>2]=t,t=h[i+4>>2],h[e+8>>2]=h[i>>2],h[e+12>>2]=t,N=n+16|0},function(e){var t=0;return h[(e|=0)>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),ve(e)},function(e){var t=0;return h[8+(e|=0)>>2]=12836,h[e>>2]=12672,(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=12836,h[e>>2]=12672,(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12652,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),ve(e)},function(e,t){t|=0;var i,n,r,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(n=h[12+(e|=0)>>2],s=h[e+68>>2],l=h[s+80>>2],a[t+84|0]=0,c=h[t+68>>2],(o=h[t+72>>2]-c>>2)>>>0<l>>>0?(Ye(t+68|0,l-o|0,12404),s=h[e+68>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=c+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;r=(s=(0|s)/12|0)>>>0>1?s:1,s=0;e:{for(;;){if(1431655765==(0|s))break e;if(o=h[n>>2]+(v(s,3)<<2)|0,-1==(0|(d=h[o>>2])))break e;if(c=v(s,12)+i|0,(u=h[c>>2])>>>0>=l>>>0)break e;if(p=h[h[e+72>>2]+12>>2],(f=h[p+(d<<2)>>2])>>>0>=l>>>0)break e;if(d=h[t+68>>2],h[d+(u<<2)>>2]=f,-1==(0|(u=h[o+4>>2])))break e;if((f=h[c+4>>2])>>>0>=l>>>0)break e;if((u=h[(u<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(f<<2)>>2]=u,-1==(0|(o=h[o+8>>2])))break e;if((c=h[c+8>>2])>>>0>=l>>>0)break e;if((o=h[(o<<2)+p>>2])>>>0>=l>>>0)break e;if(h[d+(c<<2)>>2]=o,(0|r)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t=0,i=0,n=0,r=0,a=0,s=0;t=h[4+(e|=0)>>2],n=h[t>>2];e:{if(i=h[e+12>>2],!((r=(i=h[i+28>>2]-h[i+24>>2]|0)>>2)>>>0<=h[t+8>>2]-n>>2>>>0)){if((0|i)<0)break e;a=h[t+4>>2],s=(i=gn(i))+(r<<2)|0,a=(r=a-n|0)+i|0,(0|r)>0&&We(i,n,r),h[t+8>>2]=s,h[t+4>>2]=a,h[t>>2]=i,n&&ve(n)}r=e+8|0;t:if(t=h[e+76>>2]){if((0|(n=h[t>>2]))==h[t+4>>2])return 1;for(t=0;;){if(!(i=we(r,h[(t<<2)+n>>2])))break t;if(a=h[e+76>>2],n=h[a>>2],!((t=t+1|0)>>>0<h[a+4>>2]-n>>2>>>0))break}}else if(i=1,e=h[e+12>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,t=0;;){if(!(i=we(r,v(t,3))))break t;if((0|e)==(0|(t=t+1|0)))break}return 0|i}Qi(1336),x()},function(e){var t=0;return h[(e|=0)>>2]=12836,(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),0|e},function(e){var t=0;h[(e|=0)>>2]=12836,(t=h[e+48>>2])&&(h[e+52>>2]=t,ve(t)),h[e>>2]=12652,(t=h[e+36>>2])&&ve(t),(t=h[e+24>>2])&&ve(t),ve(e)},function(e){var t=0;return h[8+(e|=0)>>2]=11900,h[e>>2]=12964,(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12152,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),0|e},function(e){var t=0;h[8+(e|=0)>>2]=11900,h[e>>2]=12964,(t=h[e+56>>2])&&(h[e+60>>2]=t,ve(t)),h[e+8>>2]=12152,(t=h[e+44>>2])&&ve(t),(t=h[e+32>>2])&&ve(t),ve(e)},function(e,t){t|=0;var i,n,r,s=0,o=0,l=0,c=0,u=0,d=0,f=0,p=0;if(d=h[12+(e|=0)>>2],s=h[e+68>>2],l=h[s+80>>2],a[t+84|0]=0,u=h[t+68>>2],(o=h[t+72>>2]-u>>2)>>>0<l>>>0?(Ye(t+68|0,l-o|0,12404),s=h[e+68>>2],l=h[s+80>>2]):l>>>0>=o>>>0||(h[t+72>>2]=u+(l<<2)),i=h[s+96>>2],!(s=h[s+100>>2]-i|0))return 1;n=(s=(0|s)/12|0)>>>0>1?s:1,r=h[d+28>>2],s=0;e:{for(;;){if(o=(v(s,3)<<2)+r|0,-1==(0|(u=h[o>>2])))break e;if(d=v(s,12)+i|0,(f=h[d>>2])>>>0>=l>>>0)break e;if(c=u<<2,u=h[h[e+72>>2]+12>>2],(c=h[c+u>>2])>>>0>=l>>>0)break e;if(p=f<<2,f=h[t+68>>2],h[p+f>>2]=c,-1==(0|(c=h[o+4>>2])))break e;if((p=h[d+4>>2])>>>0>=l>>>0)break e;if((c=h[u+(c<<2)>>2])>>>0>=l>>>0)break e;if(h[f+(p<<2)>>2]=c,-1==(0|(o=h[o+8>>2])))break e;if((d=h[d+8>>2])>>>0>=l>>>0)break e;if((o=h[u+(o<<2)>>2])>>>0>=l>>>0)break e;if(h[f+(d<<2)>>2]=o,(0|n)==(0|(s=s+1|0)))break}return 1}return 0},function(e){var t=0,i=0,n=0,r=0,a=0,s=0;t=h[4+(e|=0)>>2],n=h[t>>2];e:{if(i=h[e+12>>2],!((r=(i=h[i+56>>2]-h[i+52>>2]|0)>>2)>>>0<=h[t+8>>2]-n>>2>>>0)){if((0|i)<0)break e;a=h[t+4>>2],s=(i=gn(i))+(r<<2)|0,a=(r=a-n|0)+i|0,(0|r)>0&&We(i,n,r),h[t+8>>2]=s,h[t+4>>2]=a,h[t>>2]=i,n&&ve(n)}r=e+8|0;t:if(t=h[e+76>>2]){if((0|(n=h[t>>2]))==h[t+4>>2])return 1;for(t=0;;){if(!(i=ye(r,h[(t<<2)+n>>2])))break t;if(a=h[e+76>>2],n=h[a>>2],!((t=t+1|0)>>>0<h[a+4>>2]-n>>2>>>0))break}}else if(i=1,e=h[h[e+12>>2]+64>>2],!((e=h[e+4>>2]-h[e>>2]|0)>>>0<12))for(e=(e>>2>>>0)/3|0,t=0;;){if(!(i=ye(r,v(t,3))))break t;if((0|e)==(0|(t=t+1|0)))break}return 0|i}Qi(1336),x()},Ci,Ft,function(e){var t,i=0,n=0,r=0,a=0,s=0,o=0,l=0,c=0,u=0,p=0,m=0,g=0,b=0;N=t=N-32|0,n=h[32+(e|=0)>>2];e:{if((65535&((r=f[e+36>>1])<<8|r>>>8))>>>0<=513){if(i=h[n+12>>2],a=r=h[n+20>>2],r=(s=(l=h[n+16>>2])+4|0)>>>0<4?r+1|0:r,o=s,(c=h[n+8>>2])>>>0<s>>>0&(0|i)<=(0|r)|(0|i)<(0|r))break e;if(g=h[n>>2],p=d[0|(s=g+l|0)]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[n+16>>2]=o,h[n+20>>2]=r,r=i,i=a,(a=l+8|0)>>>0>c>>>0&(0|(i=a>>>0<8?i+1|0:i))>=(0|r)|(0|i)>(0|r))break e;g=d[0|(r=o+g|0)]|d[r+1|0]<<8|d[r+2|0]<<16|d[r+3|0]<<24,h[t+24>>2]=g,h[n+16>>2]=a,h[n+20>>2]=i}else{if(!_i(1,t+28|0,n))break e;if(!_i(1,t+24|0,h[e+32>>2]))break e;p=h[t+28>>2],g=h[t+24>>2]}if(!(p>>>0>1431655765||(a=h[e+32>>2],r=Yi(o=(i=l=h[(r=a)+8>>2])-(n=h[r+16>>2])|0,(s=h[r+12>>2])-((b=i>>>0<n>>>0)+(i=h[r+20>>2])|0)|0,3,0),!L&r>>>0<p>>>0||(r=Zi(p,0,3,0),!L&r>>>0<g>>>0|(0|i)>=(0|s)&n>>>0>=l>>>0|(0|i)>(0|s))))){s=d[n+h[a>>2]|0],r=(l=n+1|0)?i:i+1|0,h[a+16>>2]=l,h[a+20>>2]=r;t:{if(s){i:if(g>>>0<=255){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,(0|r)>=(0|(i=n=h[a+12>>2]))&l>>>0>=(o=h[a+8>>2])>>>0|(0|i)<(0|r))break i;for(;;){if(s=h[a>>2],u=d[s+l|0],i=r,i=(c=l+1|0)?i:i+1|0,h[a+16>>2]=c,h[a+20>>2]=i,h[t+8>>2]=u,(0|i)>=(0|n)&c>>>0>=o>>>0|(0|i)>(0|n))break i;if(u=d[s+c|0],i=r,i=(c=l+2|0)>>>0<2?i+1|0:i,h[a+16>>2]=c,h[a+20>>2]=i,h[t+12>>2]=u,(0|i)>=(0|n)&c>>>0>=o>>>0|(0|i)>(0|n))break i;if(i=d[s+c|0],r=(n=l+3|0)>>>0<3?r+1|0:r,h[a+16>>2]=n,h[a+20>>2]=r,h[t+16>>2]=i,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],r=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!(l>>>0<(o=h[i+8>>2])>>>0&(0|r)<=(0|(i=n=h[i+12>>2]))|(0|i)>(0|r)))break}}else if(g>>>0<=65535){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[a+12>>2],o=n=n+3|0,n=i=n>>>0<3?i+1|0:i,(c=h[a+8>>2])>>>0<o>>>0&(0|i)>=(0|s)|(0|i)>(0|s))break i;for(;;){if(u=h[a>>2],i=d[0|(i=u+l|0)]|d[i+1|0]<<8,h[a+16>>2]=o,h[a+20>>2]=n,h[t+8>>2]=i,i=r,(n=l+4|0)>>>0>c>>>0&(0|(i=n>>>0<4?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(o=d[0|(o=o+u|0)]|d[o+1|0]<<8,h[a+16>>2]=n,h[a+20>>2]=i,h[t+12>>2]=o,i=r,(r=l+6|0)>>>0>c>>>0&(0|(i=r>>>0<6?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(n=d[0|(n=n+u|0)]|d[n+1|0]<<8,h[a+16>>2]=r,h[a+20>>2]=i,h[t+16>>2]=n,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],r=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[i+12>>2],c=h[i+8>>2],i=r,o=n=l+2|0,n=i=n>>>0<2?i+1|0:i,!((0|i)<=(0|s)&c>>>0>=o>>>0|(0|i)<(0|s)))break}}else if(g>>>0>2097151||(65535&((s=f[e+36>>1])<<8|s>>>8))>>>0<514){if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[a+12>>2],o=n=n+5|0,n=i=n>>>0<5?i+1|0:i,!((c=h[a+8>>2])>>>0<o>>>0&(0|i)>=(0|s)|(0|i)>(0|s)))for(;;){if(u=h[a>>2],i=d[0|(i=u+l|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[a+16>>2]=o,h[a+20>>2]=n,h[t+8>>2]=i,i=r,b=n=l+8|0,n>>>0>c>>>0&(0|(i=n>>>0<8?i+1|0:i))>=(0|s)|(0|i)>(0|s))break i;if(n=d[0|(n=o+u|0)]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[a+16>>2]=b,h[a+20>>2]=i,h[t+12>>2]=n,n=i=l+12|0,i>>>0>c>>>0&(0|(r=i>>>0<12?r+1|0:r))>=(0|s)|(0|r)>(0|s))break i;if(i=d[0|(i=u+b|0)]|d[i+1|0]<<8|d[i+2|0]<<16|d[i+3|0]<<24,h[a+16>>2]=n,h[a+20>>2]=r,h[t+16>>2]=i,Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(a=h[e+32>>2],l=h[(i=a)+16>>2],r=h[i+20>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,s=h[i+12>>2],c=h[i+8>>2],i=r,o=n=l+4|0,n=i=n>>>0<4?i+1|0:i,!((0|i)<=(0|s)&c>>>0>=o>>>0|(0|i)<(0|s)))break}}else{if(!p)break t;if(h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!_i(1,t+4|0,a))break i;for(;;){if(h[t+8>>2]=h[t+4>>2],!_i(1,t+4|0,h[e+32>>2]))break i;if(h[t+12>>2]=h[t+4>>2],!_i(1,t+4|0,h[e+32>>2]))break i;if(h[t+16>>2]=h[t+4>>2],Wt(h[e+44>>2]+96|0,t+8|0),(0|(m=m+1|0))==(0|p))break t;if(r=h[e+32>>2],h[t+16>>2]=0,h[t+8>>2]=0,h[t+12>>2]=0,!_i(1,t+4|0,r))break}}m=0;break e}a=0,N=i=N-32|0,h[i+24>>2]=0,h[i+16>>2]=0,h[i+20>>2]=0;i:{n:{if(r=v(p,3)){if(r>>>0>=1073741824)break n;a=gn(n=v(p,12)),h[i+16>>2]=a,xt(a,0,n)}r:{if(!(r=B(r,1,h[e+32>>2],a))|!p){if(!a)break r}else for(s=0,n=0;c=(o=h[(l=(n<<2)+a|0)>>2])>>>1|0,o=(1&o?0-c|0:c)+u|0,h[i>>2]=o,u=(c=h[l+4>>2])>>>1|0,o=o+(1&c?0-u|0:u)|0,h[i+4>>2]=o,c=(l=h[l+8>>2])>>>1|0,u=o+(1&l?0-c|0:c)|0,h[i+8>>2]=u,Wt(h[e+44>>2]+96|0,i),n=n+3|0,(0|(s=s+1|0))!=(0|p););ve(a)}N=i+32|0;break i}vr(),x()}if(!r)break e}h[h[e+4>>2]+80>>2]=g,m=1}}return N=t+32|0,0|m},ar,fr,function(e,t){return a[84+(t|=0)|0]=1,h[t+72>>2]=h[t+68>>2],1},function(e){var t=0,i=0,n=0,r=0,a=0;e:{if(!((0|(t=h[8+(e|=0)>>2]))<0||(i=h[e+4>>2],r=h[i>>2],(n=h[i+4>>2]-r>>2)>>>0<t>>>0?(ei(i,t-n|0),a=h[e+8>>2]):(a=t,t>>>0>=n>>>0||(h[i+4>>2]=r+(t<<2),a=t)),(0|(n=a))<=0)))for(e=h[e+4>>2],i=h[e>>2],r=h[e+4>>2]-i>>2,e=0;;){if((0|e)==(0|r))break e;if(h[i+(e<<2)>>2]=e,(0|n)==(0|(e=e+1|0)))break}return(-1^t)>>>31|0}Sr(),x()},gr,dr,hr,Ci,function(e,t){e|=0,t|=0;var i,n=0,r=0,a=0,s=0,o=0;n=gn(72),h[n+4>>2]=0,h[n+8>>2]=0,h[n>>2]=2012,h[n+12>>2]=0,h[n+16>>2]=0,h[n+20>>2]=0,h[n+24>>2]=0,h[n+28>>2]=0,h[n+32>>2]=0,h[n+36>>2]=0,h[n+40>>2]=0,h[n>>2]=2156,h[n+44>>2]=0,h[n+48>>2]=0,h[n+52>>2]=0,h[n+56>>2]=0,h[n+60>>2]=0,h[n+64>>2]=0,h[n+68>>2]=0,i=n;e:{if((0|t)>=0){if(o=e+8|0,!((0|(s=(n=h[e+12>>2])-(a=h[e+8>>2])>>2))>(0|t)))if(r=t+1|0,t>>>0>=s>>>0)St(o,r-s|0);else if(!(r>>>0>=s>>>0)){if((0|(a=(r<<2)+a|0))!=(0|n))for(;r=h[(n=n-4|0)>>2],h[n>>2]=0,r&&Rr[h[h[r>>2]+4>>2]](r),(0|n)!=(0|a););h[e+12>>2]=a}if(e=h[o>>2]+(t<<2)|0,n=h[e>>2],h[e>>2]=i,!n)break e}Rr[h[h[n>>2]+4>>2]](n)}return(-1^t)>>>31|0},function(e){var t,i,n=0,r=0,a=0,s=0;return t=h[32+(e|=0)>>2],s=h[t+8>>2],a=h[t+12>>2],r=h[t+20>>2],s>>>0<(i=(s=h[t+16>>2])+4|0)>>>0&(0|(r=i>>>0<4?r+1|0:r))>=(0|a)|(0|r)>(0|a)||(n=s+h[t>>2]|0,a=d[0|n]|d[n+1|0]<<8|d[n+2|0]<<16|d[n+3|0]<<24,h[t+16>>2]=i,h[t+20>>2]=r,n=0,(0|a)<0||(h[h[e+4>>2]+80>>2]=a,n=1)),0|n},Ci,Ft,function(e){var t,i,n,r,a,s=0,o=0;return t=h[32+(e|=0)>>2],i=h[t+12>>2],s=r=h[t+8>>2],o=h[t+20>>2],(0|(o=(n=(a=h[t+16>>2])+4|0)>>>0<4?o+1|0:o))<=(0|i)&s>>>0>=n>>>0|(0|o)<(0|i)&&(s=a+h[t>>2]|0,s=d[0|s]|d[s+1|0]<<8|d[s+2|0]<<16|d[s+3|0]<<24,h[t+16>>2]=n,h[t+20>>2]=o,h[h[e+4>>2]+80>>2]=s),(0|o)<=(0|i)&n>>>0<=r>>>0|(0|o)<(0|i)},function(e){var t=0;return h[(e|=0)>>2]=13696,(t=h[e+96>>2])&&(h[e+100>>2]=t,ve(t)),(t=h[e+84>>2])&&(h[e+88>>2]=t,ve(t)),$t(e),0|e},function(e){var t=0;h[(e|=0)>>2]=13696,(t=h[e+96>>2])&&(h[e+100>>2]=t,ve(t)),(t=h[e+84>>2])&&(h[e+88>>2]=t,ve(t)),$t(e),ve(e)},function(e,t,i){var n=0,r=0,a=0,s=0,o=0,l=0,c=0;if(Ce(e|=0,t|=0,i|=0),i=h[e+84>>2],!((0|(n=h[e+88>>2]-i>>2))>(0|t))){if((t=t+1|0)>>>0>n>>>0){e:if((n=t-n|0)>>>0<=(r=h[e+92>>2])-(i=h[e+88>>2])>>2>>>0){if(n){if(t=i,a=7&n)for(;h[t>>2]=1,t=t+4|0,(0|a)!=(0|(s=s+1|0)););if(i=(n<<2)+i|0,!((n-1&1073741823)>>>0<7))for(;h[t+24>>2]=1,h[t+28>>2]=1,h[t+16>>2]=1,h[t+20>>2]=1,h[t+8>>2]=1,h[t+12>>2]=1,h[t>>2]=1,h[t+4>>2]=1,(0|i)!=(0|(t=t+32|0)););}h[e+88>>2]=i}else{t:{if((t=(i=(c=i-(a=h[e+84>>2])|0)>>2)+n|0)>>>0<1073741824){if(o=(r=r-a|0)>>1,r=r>>>0<2147483644?t>>>0>o>>>0?t:o:1073741823){if(r>>>0>=1073741824)break t;l=gn(r<<2)}if(t=i=(i<<2)+l|0,o=7&n)for(t=i;h[t>>2]=1,t=t+4|0,(0|o)!=(0|(s=s+1|0)););if(i=i+(n<<2)|0,(n-1&1073741823)>>>0>=7)for(;h[t+24>>2]=1,h[t+28>>2]=1,h[t+16>>2]=1,h[t+20>>2]=1,h[t+8>>2]=1,h[t+12>>2]=1,h[t>>2]=1,h[t+4>>2]=1,(0|i)!=(0|(t=t+32|0)););(0|c)>0&&We(l,a,c),h[e+92>>2]=(r<<2)+l,h[e+88>>2]=i,h[e+84>>2]=l,a&&ve(a);break e}vr(),x()}Qi(1336),x()}return}t>>>0>=n>>>0||(h[e+88>>2]=i+(t<<2))}},function(e,t){var i=0,n=0;ge(e|=0,t|=0),(0|t)<0||(i=h[e+88>>2])-(n=h[e+84>>2])>>2<=(0|t)||((i=i-(n=4+(t=n+(t<<2)|0)|0)|0)&&At(t,n,i),h[e+88>>2]=t+i)},$t,function(e){ve($t(e|=0))},Ce,ge,function(e){return 0|D(h[60+(e|=0)>>2])},function(e,t,i){t|=0,i|=0;var n,r=0,a=0,s=0,o=0,l=0,c=0;N=n=N-32|0,a=h[28+(e|=0)>>2],h[n+16>>2]=a,r=h[e+20>>2],h[n+28>>2]=i,h[n+24>>2]=t,t=r-a|0,h[n+20>>2]=t,a=t+i|0,c=2;e:{t:{t=n+16|0,(r=0|R(h[e+60>>2],0|t,2,n+12|0))?(h[4190]=r,r=-1):r=0;i:{if(!r)for(;;){if((0|(r=h[n+12>>2]))==(0|a))break i;if((0|r)<0)break t;if(s=r-((o=(s=h[t+4>>2])>>>0<r>>>0)?s:0)|0,h[(l=(o<<3)+t|0)>>2]=s+h[l>>2],h[(l=(o?12:4)+t|0)>>2]=h[l>>2]-s,a=a-r|0,t=o?t+8|0:t,c=c-o|0,(r=0|R(h[e+60>>2],0|t,0|c,n+12|0))?(h[4190]=r,r=-1):r=0,r)break}if(-1!=(0|a))break t}t=h[e+44>>2],h[e+28>>2]=t,h[e+20>>2]=t,h[e+16>>2]=t+h[e+48>>2],e=i;break e}h[e+28>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e>>2]=32|h[e>>2],e=0,2!=(0|c)&&(e=i-h[t+4>>2]|0)}return N=n+32|0,0|e},function(e,t,i,n){var r;return t|=0,i|=0,n|=0,N=r=N-16|0,(e=0|P(h[60+(e|=0)>>2],0|t,0|i,255&n,r+8|0))?(h[4190]=e,e=-1):e=0,N=r+16|0,L=e?-1:h[r+12>>2],0|(e?-1:h[r+8>>2])},dr,function(e,t,i,n){return L=0,0},ar,fr,xr,xr,function(e,t,i){i|=0;var n,r=0,a=0,s=0,o=0;if(N=n=N+-64|0,r=1,!Oi(e|=0,t|=0,0)&&(r=0,t)){N=r=N+-64|0,a=h[t>>2],s=h[a-4>>2],o=h[a-8>>2],h[r+20>>2]=0,h[r+16>>2]=14956,h[r+12>>2]=t,h[r+8>>2]=15004,a=0,xt(r+24|0,0,39),t=t+o|0;e:if(Oi(s,15004,0))h[r+56>>2]=1,Rr[h[h[s>>2]+20>>2]](s,r+8|0,t,t,1,0),a=1==h[r+32>>2]?t:0;else{Rr[h[h[s>>2]+24>>2]](s,r+8|0,t,1,0);t:switch(h[r+44>>2]){case 0:a=1==h[r+48>>2]&&1==h[r+36>>2]&&1==h[r+40>>2]?h[r+28>>2]:0;break e;case 1:break t;default:break e}1!=h[r+32>>2]&&h[r+48>>2]|1!=h[r+36>>2]|1!=h[r+40>>2]||(a=h[r+24>>2])}N=r- -64|0,r=0,a&&(xt(4|(t=n+8|0),0,52),h[n+56>>2]=1,h[n+20>>2]=-1,h[n+16>>2]=e,h[n+8>>2]=a,Rr[h[h[a>>2]+28>>2]](a,t,h[i>>2],1),1==(0|(e=h[n+32>>2]))&&(h[i>>2]=h[n+24>>2]),r=1==(0|e))}return N=n- -64|0,0|r},function(e,t,i,n,r,a){i|=0,n|=0,r|=0,a|=0,Oi(e|=0,h[8+(t|=0)>>2],a)&&fi(t,i,n,r)},function(e,t,i,n,r){if(i|=0,n|=0,r|=0,Oi(e|=0,h[8+(t|=0)>>2],r))1==h[t+28>>2]|h[t+4>>2]!=(0|i)||(h[t+28>>2]=n);else e:if(Oi(e,h[t>>2],r)){if(!(h[t+16>>2]!=(0|i)&h[t+20>>2]!=(0|i))){if(1!=(0|n))break e;return void(h[t+32>>2]=1)}h[t+20>>2]=i,h[t+32>>2]=n,h[t+40>>2]=h[t+40>>2]+1,1!=h[t+36>>2]|2!=h[t+24>>2]||(a[t+54|0]=1),h[t+44>>2]=4}},function(e,t,i,n){i|=0,n|=0,Oi(e|=0,h[8+(t|=0)>>2],0)&&qi(t,i,n)},fr,function(e,t,i,n,r,a){i|=0,n|=0,r|=0,a|=0,Oi(e|=0,h[8+(t|=0)>>2],a)?fi(t,i,n,r):(e=h[e+8>>2],Rr[h[h[e>>2]+20>>2]](e,t,i,n,r,a))},function(e,t,i,n,r){if(i|=0,n|=0,r|=0,Oi(e|=0,h[8+(t|=0)>>2],r))1==h[t+28>>2]|h[t+4>>2]!=(0|i)||(h[t+28>>2]=n);else e:{if(Oi(e,h[t>>2],r)){if(!(h[t+16>>2]!=(0|i)&h[t+20>>2]!=(0|i))){if(1!=(0|n))break e;return void(h[t+32>>2]=1)}h[t+32>>2]=n;t:if(4!=h[t+44>>2]){if(u[t+52>>1]=0,e=h[e+8>>2],Rr[h[h[e>>2]+20>>2]](e,t,i,i,1,r),d[t+53|0]){if(h[t+44>>2]=3,!d[t+52|0])break t;break e}h[t+44>>2]=4}if(h[t+20>>2]=i,h[t+40>>2]=h[t+40>>2]+1,1!=h[t+36>>2]|2!=h[t+24>>2])break e;return void(a[t+54|0]=1)}e=h[e+8>>2],Rr[h[h[e>>2]+24>>2]](e,t,i,n,r)}},function(e,t,i,n){i|=0,n|=0,Oi(e|=0,h[8+(t|=0)>>2],0)?qi(t,i,n):(e=h[e+8>>2],Rr[h[h[e>>2]+28>>2]](e,t,i,n))},ar,fr,function(e){return 1283},function(e){ve(_n(e|=0))},Kn,function(e){_n(e|=0),ve(e)}],Mr.set=function(e,t){this[e]=t},Mr.get=function(e){return this[e]},Mr);function Pr(){return n.byteLength/65536|0}return{j:function(){h[4227]=16796,h[4209]=42},k:Rr,l:rr,m:function(){var e;return e=gn(40),u[e+38>>1]=0,h[e>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,a[e+29|0]=0,a[e+30|0]=0,a[e+31|0]=0,a[e+32|0]=0,a[e+33|0]=0,a[e+34|0]=0,a[e+35|0]=0,a[e+36|0]=0,0|e},n:function(e,t,i){t|=0,i|=0,h[16+(e|=0)>>2]=0,h[e+20>>2]=0,h[e>>2]=t,h[e+8>>2]=i,h[e+12>>2]=0},o:rr,p:function(){var e,t;return t=gn(40),h[t>>2]=-1,h[16+(e=t+8|0)>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,0|t},q:ir,r:function(e){var t=0;(e|=0)&&((t=h[e+8>>2])&&(h[e+12>>2]=t,ve(t)),ve(e))},s:function(){return 0|tn(gn(64))},t:rr,u:function(){var e;return tn(e=gn(96)),h[e+64>>2]=0,h[e+68>>2]=0,h[e+88>>2]=0,h[e+72>>2]=0,h[e+76>>2]=0,a[e+77|0]=0,a[e+78|0]=0,a[e+79|0]=0,a[e+80|0]=0,a[e+81|0]=0,a[e+82|0]=0,a[e+83|0]=0,a[e+84|0]=0,0|e},v:qn,w:function(e){return h[88+(e|=0)>>2]},x:function(e){return h[56+(e|=0)>>2]},y:Zn,z:function(e){return a[24+(e|=0)|0]},A:function(e){return d[32+(e|=0)|0]},B:function(e){return h[40+(e|=0)>>2]},C:function(e){return h[48+(e|=0)>>2]},D:function(e){return h[60+(e|=0)>>2]},E:ji,F:function(){var e;return e=gn(24),h[e+8>>2]=0,h[e+12>>2]=0,h[e+4>>2]=-1,h[e>>2]=1140,h[e+16>>2]=0,h[e+20>>2]=0,0|e},G:Ln,H:Kn,I:function(e,t){return t|=0,b(m[h[8+(e|=0)>>2]+(t<<2)>>2])},J:function(e){return b(m[20+(e|=0)>>2])},K:Vn,L:function(){var e;return e=gn(8),h[e+4>>2]=-1,h[e>>2]=1032,0|e},M:Ln,N:Kn,O:Vn,P:function(){return 0|Bn(gn(84))},Q:Gn,R:qn,S:Vn,T:function(){var e;return Bn(e=gn(108)),h[e+84>>2]=0,h[e+88>>2]=0,h[e>>2]=13696,h[e+92>>2]=0,h[e+96>>2]=0,h[e+100>>2]=0,h[e+104>>2]=0,0|e},U:function(e){return(h[100+(e|=0)>>2]-h[e+96>>2]|0)/12|0},V:Gn,W:qn,X:Vn,Y:function(){var e,t;return e=gn(24),h[e+4>>2]=0,h[e+8>>2]=0,h[(t=e+16|0)>>2]=0,h[t+4>>2]=0,h[e>>2]=e+4,h[e+12>>2]=t,0|e},Z:function(e){(e|=0)&&(an(e+12|0,h[e+16>>2]),pn(e,h[e+4>>2]),ve(e))},_:ir,$:function(e){return 0|!h[(e|=0)>>2]},aa:function(e){return 0|(a[15+(e|=0)|0]<0?h[e+4>>2]:e+4|0)},ba:function(e){(e|=0)&&(a[e+15|0]<0&&ve(h[e+4>>2]),ve(e))},ca:On,da:function(e,t){return t|=0,b(m[h[(e|=0)>>2]+(t<<2)>>2])},ea:jn,fa:kn,ga:On,ha:function(e,t){return t|=0,a[h[(e|=0)>>2]+t|0]},ia:Wn,ja:kn,ka:On,la:function(e,t){return t|=0,d[h[(e|=0)>>2]+t|0]},ma:Wn,na:kn,oa:On,pa:function(e,t){return t|=0,u[h[(e|=0)>>2]+(t<<1)>>1]},qa:Hn,ra:kn,sa:On,ta:function(e,t){return t|=0,f[h[(e|=0)>>2]+(t<<1)>>1]},ua:Hn,va:kn,wa:On,xa:Un,ya:jn,za:kn,Aa:On,Ba:Un,Ca:jn,Da:kn,Ea:function(){var e;return e=gn(28),h[e>>2]=0,h[e+4>>2]=0,h[e+24>>2]=0,h[e+16>>2]=0,h[e+20>>2]=0,h[e+8>>2]=0,h[e+12>>2]=0,0|e},Fa:function(e,t,i){e|=0,t|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0,f=0;if(N=n=N-16|0,(r=Pi(i|=0))>>>0<4294967280){e:{if(r>>>0>=11)e=gn(s=r+16&-16),h[n+8>>2]=-2147483648|s,h[n>>2]=e,h[n+4>>2]=r;else if(a[n+11|0]=r,e=n,!r)break e;We(e,i,r)}a[e+r|0]=0,r=(i=d[n+11|0])<<24>>24,s=h[n>>2],e=0;e:if(t=h[t+4>>2]){for(e=i,e=(i=(0|r)<0)?h[n+4>>2]:e,u=i?s:n;;){t:{i:{n:{if(c=(f=(i=(o=(i=d[t+27|0])<<24>>24<0)?h[t+20>>2]:i)>>>0<e>>>0)?i:e){l=t+16|0;r:{if(!(l=xi(u,o=o?h[l>>2]:l,c))){if(e>>>0>=i>>>0)break r;break t}if((0|l)<0)break t}if(!(i=xi(o,u,c)))break n;if((0|i)<0)break i;e=1;break e}if(e>>>0<i>>>0)break t}if(!f){e=1;break e}}t=t+4|0}if(!(t=h[t>>2]))break}e=0}(0|r)<0&&ve(s),N=n+16|0}else mr(),x();return 0|e},Ga:function(e,t,i){e|=0,t|=0,i|=0;var n,r,s=0;if(N=n=N-16|0,h[n+12>>2]=0,(r=Pi(i))>>>0<4294967280){e:{if(r>>>0>=11)e=gn(s=r+16&-16),h[n+8>>2]=-2147483648|s,h[n>>2]=e,h[n+4>>2]=r;else if(a[n+11|0]=r,e=n,!r)break e;We(e,i,r)}a[e+r|0]=0,(0|(e=Lt(t,n)))!=(t+4|0)&&4==((t=h[e+32>>2])-(e=h[e+28>>2])|0)&&(h[n+12>>2]=d[0|e]|d[e+1|0]<<8|d[e+2|0]<<16|d[e+3|0]<<24),e=h[n+12>>2],a[n+11|0]<0&&ve(h[n>>2]),N=n+16|0}else mr(),x();return 0|e},Ha:function(e,t,i,n){e|=0,t|=0,n|=0;var r=0,s=0,o=0;if(N=e=N-32|0,(r=Pi(i|=0))>>>0<4294967280){e:{if(r>>>0>=11)s=gn(o=r+16&-16),h[e+24>>2]=-2147483648|o,h[e+16>>2]=s,h[e+20>>2]=r;else if(a[e+27|0]=r,s=e+16|0,!r)break e;We(s,i,r)}a[r+s|0]=0,h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,(0|(i=Lt(t,e+16|0)))!=(t+4|0)&&(0|(t=h[i+28>>2]))!=(0|(s=h[i+32>>2]))&&(3&(t=s-t|0)||((r=t>>>2|0)>>>0>(o=(s=h[e+4>>2])-(t=h[e>>2])>>2)>>>0?(ei(e,r-o|0),t=h[e>>2],s=h[e+4>>2]):r>>>0>=o>>>0||(s=(r<<2)+t|0,h[e+4>>2]=s),(0|t)==(0|s)?(Sr(),x()):We(r=t,t=h[i+28>>2],h[i+32>>2]-t|0))),(t=h[n>>2])&&(h[n+4>>2]=t,ve(t)),h[n>>2]=h[e>>2],h[n+4>>2]=h[e+4>>2],h[n+8>>2]=h[e+8>>2],a[e+27|0]<0&&ve(h[e+16>>2]),N=e+32|0}else mr(),x()},Ia:function(e,t,i){e|=0,t|=0,i|=0;var n,r=0,s=0,o=0;if(N=e=N-32|0,h[e+24>>2]=0,h[e+28>>2]=0,(n=Pi(i))>>>0<4294967280){e:{if(n>>>0>=11)r=gn(s=n+16&-16),h[e+16>>2]=-2147483648|s,h[e+8>>2]=r,h[e+12>>2]=n;else if(a[e+19|0]=n,r=e+8|0,!n)break e;We(r,i,n)}a[n+r|0]=0,(0|(i=t+4|0))!=(0|(t=Lt(t,e+8|0)))&&8==((i=h[t+32>>2])-(t=h[t+28>>2])|0)&&(i=d[t+4|0]|d[t+5|0]<<8|d[t+6|0]<<16|d[t+7|0]<<24,h[e+24>>2]=d[0|t]|d[t+1|0]<<8|d[t+2|0]<<16|d[t+3|0]<<24,h[e+28>>2]=i),o=g[e+24>>3],a[e+19|0]<0&&ve(h[e+8>>2]),N=e+32|0}else mr(),x();return+o},Ja:function(e,t,i){e|=0,t|=0;var n,r,s=0,o=0;if(N=n=N-16|0,(r=Pi(i|=0))>>>0<4294967280){e:{if(r>>>0>=11)s=gn(o=r+16&-16),h[n+8>>2]=-2147483648|o,h[n>>2]=s,h[n+4>>2]=r;else if(a[n+11|0]=r,s=n,!r)break e;We(s,i,r)}a[r+s|0]=0,i=Ji(t,n,s=e+16|0),t=a[e+27|0],e=h[e+16>>2],a[n+11|0]<0&&ve(h[n>>2]),N=n+16|0,e=i?(0|t)<0?e:s:0}else mr(),x();return 0|e},Ka:function(e,t){return h[8+(t|=0)>>2]},La:function(e,t,i){t|=0;var n,r=0,s=0,o=0,l=0,c=0,u=0,d=0;n=i|=0;e:if(h[12+(r=e|=0)>>2]!=(0|t)){if(e=t,(0|(t=h[r+4>>2]))!=(0|(i=h[r>>2])))for(;s=t-12|0,a[t-1|0]<0&&ve(h[s>>2]),(0|i)!=(0|(t=s)););if(h[r+12>>2]=e,h[r+4>>2]=i,(0|(t=h[e>>2]))!=(0|(u=e+4|0)))for(;;){if(h[r+8>>2]==(0|i)){l=0;t:{i:{n:{if((i=1+(o=((s=h[r+4>>2])-(e=h[r>>2])|0)/12|0)|0)>>>0<357913942){if(d=(c=(h[r+8>>2]-e|0)/12|0)<<1,i=c>>>0<178956970?i>>>0>d>>>0?i:d:357913941){if(i>>>0>=357913942)break n;l=gn(v(i,12))}if(c=v(i,12),i=v(o,12)+l|0,a[t+27|0]>=0?(o=h[t+20>>2],h[i>>2]=h[t+16>>2],h[i+4>>2]=o,h[i+8>>2]=h[t+24>>2]):(Bi(i,h[t+16>>2],h[t+20>>2]),s=h[r+4>>2],e=h[r>>2]),l=l+c|0,o=i+12|0,(0|e)==(0|s))break i;for(;c=h[4+(s=s-12|0)>>2],h[(i=i-12|0)>>2]=h[s>>2],h[i+4>>2]=c,h[i+8>>2]=h[s+8>>2],h[s>>2]=0,h[s+4>>2]=0,h[s+8>>2]=0,(0|e)!=(0|s););if(h[r+8>>2]=l,e=h[r+4>>2],h[r+4>>2]=o,s=h[r>>2],h[r>>2]=i,(0|e)==(0|s))break t;for(;i=e-12|0,a[e-1|0]<0&&ve(h[i>>2]),e=i,(0|i)!=(0|s););break t}vr(),x()}Qi(1336),x()}h[r+8>>2]=l,h[r+4>>2]=o,h[r>>2]=i}s&&ve(s)}else a[t+27|0]>=0?(e=h[t+20>>2],h[i>>2]=h[t+16>>2],h[i+4>>2]=e,h[i+8>>2]=h[t+24>>2]):Bi(i,h[t+16>>2],h[t+20>>2]),h[r+4>>2]=i+12;t:if(i=h[t+4>>2])for(;e=i,i=h[i>>2];);else{if(e=h[t+8>>2],h[e>>2]==(0|t))break t;for(t=t+8|0;t=(i=h[t>>2])+8|0,e=h[i+8>>2],(0|i)!=h[e>>2];);}if((0|e)==(0|u))break e;i=h[r+4>>2],t=e}}return i=0,(0|n)<0||(e=h[r>>2],(h[r+4>>2]-e|0)/12>>>0<=n>>>0||(e=e+v(n,12)|0,i=a[e+11|0]<0?h[e>>2]:e)),0|i},Ma:function(e){var t=0,i=0,n=0;if(e|=0){if(a[e+27|0]<0&&ve(h[e+16>>2]),t=h[e>>2]){if((0|(i=h[e+4>>2]))==(0|t))n=t;else{for(;n=i-12|0,a[i-1|0]<0&&ve(h[n>>2]),(0|(i=n))!=(0|t););n=h[e>>2]}h[e+4>>2]=t,ve(n)}ve(e)}},Na:function(){var e,t;return e=gn(40),h[e+4>>2]=0,h[e+8>>2]=0,h[e>>2]=e+4,h[(t=e+16|0)>>2]=0,h[t+4>>2]=0,h[e+24>>2]=0,h[e+28>>2]=0,h[e+12>>2]=t,h[e+32>>2]=0,h[e+36>>2]=0,0|e},Oa:function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s=0,o=0;N=r=N+-64|0,u[38+(s=r+8|0)>>1]=0,h[s>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,a[s+29|0]=0,a[s+30|0]=0,a[s+31|0]=0,a[s+32|0]=0,a[s+33|0]=0,a[s+34|0]=0,a[s+35|0]=0,a[s+36|0]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=t,h[s+8>>2]=i,h[s+12>>2]=0,fe(t=r+48|0,e,s,n),h[e+24>>2]=h[r+48>>2];e:if((0|(i=e+24|0))!=(0|t))if(s=r+48|4,n=(t=d[r+63|0])<<24>>24,a[11+(o=e+28|0)|0]>=0){if((0|n)>=0){e=h[s+4>>2],h[o>>2]=h[s>>2],h[o+4>>2]=e,h[o+8>>2]=h[s+8>>2];break e}nn(o,h[r+52>>2],h[r+56>>2])}else Xi(o,(e=(0|n)<0)?h[r+52>>2]:s,e?h[r+56>>2]:t);return a[r+63|0]<0&&ve(h[r+52>>2]),N=r- -64|0,0|i},Pa:function(e,t,i,n){e|=0,t|=0,i|=0,n|=0;var r,s=0,o=0;N=r=N+-64|0,u[38+(s=r+8|0)>>1]=0,h[s>>2]=0,h[s+8>>2]=0,h[s+12>>2]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s+24>>2]=0,h[s+28>>2]=0,a[s+29|0]=0,a[s+30|0]=0,a[s+31|0]=0,a[s+32|0]=0,a[s+33|0]=0,a[s+34|0]=0,a[s+35|0]=0,a[s+36|0]=0,h[s+16>>2]=0,h[s+20>>2]=0,h[s>>2]=t,h[s+8>>2]=i,h[s+12>>2]=0,Ae(t=r+48|0,e,s,n),h[e+24>>2]=h[r+48>>2];e:if((0|(i=e+24|0))!=(0|t))if(s=r+48|4,n=(t=d[r+63|0])<<24>>24,a[11+(o=e+28|0)|0]>=0){if((0|n)>=0){e=h[s+4>>2],h[o>>2]=h[s>>2],h[o+4>>2]=e,h[o+8>>2]=h[s+8>>2];break e}nn(o,h[r+52>>2],h[r+56>>2])}else Xi(o,(e=(0|n)<0)?h[r+52>>2]:s,e?h[r+56>>2]:t);return a[r+63|0]<0&&ve(h[r+52>>2]),N=r- -64|0,0|i},Qa:function(e,t,i){return 0|dn(t|=0,i|=0)},Ra:function(e,t,i){e|=0,t|=0;var n=0,r=0,s=0;if(N=e=N-32|0,(n=Pi(i|=0))>>>0<4294967280){e:{if(n>>>0>=11)r=gn(s=n+16&-16),h[e+24>>2]=-2147483648|s,h[e+16>>2]=r,h[e+20>>2]=n;else if(a[e+27|0]=n,r=e+16|0,!n)break e;We(r,i,n)}a[n+r|0]=0,a[e+4|0]=0,h[e>>2]=1701667182,a[e+11|0]=4,i=-1,(n=h[t+4>>2])&&(i=-1,(n=Et(n,e,e+16|0))&&(i=$i(t,h[n+24>>2]))),t=i,a[e+11|0]<0&&ve(h[e>>2]),a[e+27|0]<0&&ve(h[e+16>>2]),N=e+32|0}else mr(),x();return 0|t},Sa:function(e,t,i,n){e|=0,t|=0,n|=0;var r,s=0,o=0;N=r=N-32|0;e:{t:{if((s=Pi(i|=0))>>>0<4294967280){i:{if(s>>>0>=11)e=gn(o=s+16&-16),h[r+24>>2]=-2147483648|o,h[r+16>>2]=e,h[r+20>>2]=s;else if(a[r+27|0]=s,e=r+16|0,!s)break i;We(e,i,s)}if(a[e+s|0]=0,(i=Pi(n))>>>0>=4294967280)break t;i:{if(i>>>0>=11)e=gn(s=i+16&-16),h[r+8>>2]=-2147483648|s,h[r>>2]=e,h[r+4>>2]=i;else if(a[r+11|0]=i,e=r,!i)break i;We(e,n,i)}a[e+i|0]=0,e=-1,(i=h[t+4>>2])&&(e=-1,(i=Et(i,r+16|0,r))&&(e=$i(t,h[i+24>>2]))),a[r+11|0]<0&&ve(h[r>>2]),a[r+27|0]<0&&ve(h[r+16>>2]),N=r+32|0;break e}mr(),x()}mr(),x()}return 0|e},Ta:function(e,t,i){return i|=0,h[h[8+(t|=0)>>2]+(i<<2)>>2]},Ua:function(e,t,i){e|=0,i|=0;var n=0,r=0;n=(e=h[12+(t|=0)>>2])-(t=h[t+8>>2])|0,e=0;e:if(n){n=(e=n>>2)>>>0>1?e:1,e=0;t:{for(;;){if(r=h[t+(e<<2)>>2],h[r+60>>2]==(0|i))break t;if((0|n)==(0|(e=e+1|0)))break}e=0;break e}e=-1==(0|e)?0:r}return 0|e},Va:function(e,t){return h[4+(t|=0)>>2]},Wa:function(e,t,i){e|=0,i|=0;var n,r=0;if((n=h[4+(t|=0)>>2])&&!((0|(t=h[h[h[t+8>>2]+(i<<2)>>2]+60>>2]))<0)&&(0|(e=h[n+24>>2]))!=(0|(i=h[n+28>>2])))e:{for(;;){if(r=h[e>>2],(0|t)==h[r+24>>2])break e;if((0|i)==(0|(e=e+4|0)))break}r=0}return 0|r},Xa:function(e,t,i,n){var r,a;return e|=0,i|=0,n|=0,N=e=N-16|0,t=h[96+(t|=0)>>2],h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,a=(i=We(r=gn(12),t+v(i,12)|0,12))+12|0,(t=h[n>>2])&&(h[n+4>>2]=t,ve(t)),h[n+8>>2]=i+12,h[n+4>>2]=a,h[n>>2]=r,N=e+16|0,1},Ya:function(e,t,i){e|=0,t|=0;var n,r,s,o,l,c,u=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0,C=0,D=0,O=0,k=0,I=0,L=0,U=0,B=0,F=0,G=0,V=0;c=i|=0,i=0,N=r=N-96|0,xt(n=r+16|0,0,76),h[r+92>>2]=-1,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,N=s=N-16|0,h[n+68>>2]=0,h[n+72>>2]=0,h[n>>2]=t,N=o=N-16|0,l=t,e=h[t+20>>2],(h[t+24>>2]-e|0)<=0||-1!=(0|(e=h[e>>2]))&&(i=h[h[l+8>>2]+(e<<2)>>2]);e:{t:{if(i){e=h[l+100>>2],f=h[l+96>>2],h[o+8>>2]=0,h[o>>2]=0,h[o+4>>2]=0,t=(0|(u=e-f|0))/12|0;i:if(u){if(t>>>0>=357913942)break t;if(p=gn(u),h[o>>2]=p,h[o+8>>2]=p+v(t,12),e=0,u=xt(m=p,0,p=v((u-12>>>0)/12|0,12)+12|0),h[o+4>>2]=u+p,d[i+84|0]){if(m=1&(i=t>>>0>1?t:1),t>>>0>=2)for(_=-2&i,i=0;p=v(e,12),A=h[4+(t=p+f|0)>>2],E=h[t>>2],h[8+(p=u+p|0)>>2]=h[t+8>>2],h[p>>2]=E,h[p+4>>2]=A,p=v(1|e,12),A=h[8+(t=p+f|0)>>2],E=h[t+4>>2],h[(p=u+p|0)>>2]=h[t>>2],h[p+4>>2]=E,h[p+8>>2]=A,e=e+2|0,(0|_)!=(0|(i=i+2|0)););if(!m)break i;t=v(e,12),i=h[4+(e=t+f|0)>>2],f=h[e>>2],h[8+(t=t+u|0)>>2]=h[e+8>>2],h[t>>2]=f,h[t+4>>2]=i}else for(m=t>>>0>1?t:1,e=h[i+68>>2],i=0;p=v(i,12),_=h[e+(h[(t=p+f|0)>>2]<<2)>>2],A=h[e+(h[t+4>>2]<<2)>>2],h[8+(p=u+p|0)>>2]=h[e+(h[t+8>>2]<<2)>>2],h[p+4>>2]=A,h[p>>2]=_,(0|m)!=(0|(i=i+1|0)););}if(N=k=N-16|0,m=gn(88),h[m>>2]=0,h[m+4>>2]=0,h[m+56>>2]=0,h[m+48>>2]=0,h[m+52>>2]=0,h[m+40>>2]=0,h[m+44>>2]=0,h[m+32>>2]=0,h[m+36>>2]=0,h[m+24>>2]=0,h[m+28>>2]=0,h[m+16>>2]=0,h[m+20>>2]=0,h[m+8>>2]=0,h[m+12>>2]=0,h[(e=m- -64|0)>>2]=0,h[e+4>>2]=0,h[m+72>>2]=0,h[m+76>>2]=0,h[m+80>>2]=0,h[m+84>>2]=0,h[m+60>>2]=m,N=D=N-16|0,h[m+80>>2]=0,h[m+84>>2]=0,e=h[m+76>>2],h[m+76>>2]=0,e&&ve(e),h[m+68>>2]=0,h[m+72>>2]=0,e=h[(t=m- -64|0)>>2],h[t>>2]=0,e&&ve(e),t=h[o>>2],i=h[o+4>>2]-t|0,e=v(_=(0|i)/12|0,3),u=h[m>>2],e>>>0>(f=h[m+4>>2]-u>>2)>>>0?(ei(m,e-f|0),t=h[o>>2],_=(0|(i=h[o+4>>2]-t|0))/12|0,u=h[m>>2]):e>>>0>=f>>>0||(h[m+4>>2]=(e<<2)+u),i)for(p=_>>>0>1?_:1,e=0;i=(f=v(e,12))+u|0,f=t+f|0,h[i>>2]=h[f>>2],h[i+4>>2]=h[f+4>>2],h[i+8>>2]=h[f+8>>2],(0|p)!=(0|(e=e+1|0)););h[D+12>>2]=-1,N=p=N-48|0;i:{n:{if(P=D+12|0){if(E=(i=(u=h[m+4>>2])-(A=h[m>>2])|0)>>2,t=h[m+12>>2],E>>>0>(e=h[m+16>>2]-t>>2)>>>0?(Ye(m+12|0,E-e|0,13684),E=(i=(u=h[m+4>>2])-(A=h[m>>2])|0)>>2):e>>>0<=E>>>0||(h[m+16>>2]=t+(E<<2)),t=0,h[p+40>>2]=0,h[p+32>>2]=0,h[p+36>>2]=0,i){r:{if((0|i)>=0)for(t=gn(i),h[p+36>>2]=t,h[p+32>>2]=t,h[p+40>>2]=(E<<2)+t,e=t,i=0;;){if((_=h[(i<<2)+A>>2])>>>0<(e=e-t>>2)>>>0||(h[p+16>>2]=0,(f=_+1|0)>>>0>e>>>0?(Ye(p+32|0,f-e|0,p+16|0),A=h[m>>2],u=h[m+4>>2],t=h[p+32>>2]):e>>>0<=f>>>0||(h[p+36>>2]=(f<<2)+t)),h[(e=(_<<2)+t|0)>>2]=h[e>>2]+1,(i=i+1|0)>>>0>=(E=(e=u-A|0)>>2)>>>0)break r;e=h[p+36>>2]}break n}if(h[p+24>>2]=0,h[p+16>>2]=0,h[p+20>>2]=0,e){if(e>>>0>=2147483645)break t;e=gn(i=e<<1),h[p+16>>2]=e,f=e+(E<<3)|0,h[p+24>>2]=f,xt(e,255,i),h[p+20>>2]=f}}else h[p+24>>2]=0,h[p+16>>2]=0,h[p+20>>2]=0;if(u=0,h[p+8>>2]=0,h[p>>2]=0,h[p+4>>2]=0,_=(e=h[p+36>>2]-t|0)>>2,e){if((0|e)<0)break t;if(y=gn(e),h[p>>2]=y,i=(e=_<<2)+y|0,h[p+8>>2]=i,e=xt(y,0,e),h[p+4>>2]=i,S=3&(f=_>>>0>1?_:1),i=0,f-1>>>0>=3)for(T=-4&f;h[(f=b<<2)+e>>2]=i,C=4|f,i=h[t+f>>2]+i|0,h[C+e>>2]=i,R=8|f,i=i+h[t+C>>2]|0,h[R+e>>2]=i,f|=12,i=i+h[t+R>>2]|0,h[f+e>>2]=i,i=i+h[t+f>>2]|0,b=b+4|0,(0|T)!=(0|(g=g+4|0)););if(S)for(;h[(f=b<<2)+e>>2]=i,b=b+1|0,i=h[t+f>>2]+i|0,(0|S)!=(0|(w=w+1|0)););}if(E)for(C=h[m+12>>2];;){i=(I=u<<2)+A|0,g=-1,-1!=(0|(e=((f=u+1|0)>>>0)%3|0?f:u-2|0))&&(g=h[(e<<2)+A>>2]),e=h[i>>2];r:{a:{if(!((u>>>0)%3|0)){if(w=-1,-1!=(0|(i=u+2|0))&&(w=h[(i<<2)+A>>2]),!((0|e)==(0|g)|(0|e)==(0|w))&(0|g)!=(0|w))break a;h[m+40>>2]=h[m+40>>2]+1,f=u+3|0;break r}w=h[i-4>>2]}a:{s:if(!((0|(R=h[(i=w<<2)+t>>2]))<=0))for(S=h[p+16>>2],i=h[i+y>>2],b=0;;){if(-1==(0|(M=h[(T=S+(i<<3)|0)>>2])))break s;if((0|g)==(0|M)&&(0|(M=-1!=(0|(T=h[T+4>>2]))?h[(T<<2)+A>>2]:-1))!=(0|e)){for(;e=i,!((0|R)<=(0|(b=b+1|0))||(M=S+(e<<3)|0,U=h[(L=S+((i=e+1|0)<<3)|0)>>2],h[M>>2]=U,h[M+4>>2]=h[L+4>>2],-1==(0|U))););if(h[S+(e<<3)>>2]=-1,-1==(0|T))break s;h[C+I>>2]=T,h[C+(T<<2)>>2]=u;break a}if(i=i+1|0,(0|R)==(0|(b=b+1|0)))break}if(!((0|(g=h[(e=g<<2)+t>>2]))<=0))for(S=h[p+16>>2],i=h[e+y>>2],b=0;;){if(-1==h[(e=S+(i<<3)|0)>>2]){h[e>>2]=w,h[e+4>>2]=u;break a}if(i=i+1|0,(0|g)==(0|(b=b+1|0)))break}}}if(!(E>>>0>(u=f)>>>0))break}h[P>>2]=_,y&&ve(y),(e=h[p+16>>2])&&(h[p+20>>2]=e,ve(e)),(e=h[p+32>>2])&&(h[p+36>>2]=e,ve(e))}if(N=p+48|0,C=0!=(0|P)){N=g=N-32|0,E=h[m>>2],e=h[m+4>>2],h[g+24>>2]=0,h[g+16>>2]=0,h[g+20>>2]=0;r:{a:{if(t=e-E|0){if((0|t)<0)break a;f=gn((p=1+(u=(i=t>>2)-1>>>5|0)|0)<<2),h[g+24>>2]=p,h[g+16>>2]=f,h[g+20>>2]=i,h[f+((t>>>0<132?0:u)<<2)>>2]=0,f=xt(f,0,t=i>>>5<<2),(i&=31)&&(h[(t=t+f|0)>>2]=h[t>>2]&(-1>>>32-i^-1))}for(h[g+8>>2]=0,h[g>>2]=0;;){if(S=0,t=0,(0|e)!=(0|E)){for(;;){u=h[g+16>>2];s:if(!(h[u+(t>>>3&536870908)>>2]>>>t&1)){for(f=h[g>>2],h[g+4>>2]=f,i=h[m+12>>2],e=t;b=e,!(-1==(0|(e=((p=e+1|0)>>>0)%3|0?p:e-2|0))||-1==(0|(e=h[i+(e<<2)>>2]))||(0|t)==(0|(e=((p=e+1|0)>>>0)%3|0?p:e-2|0))|-1==(0|e)||h[(e>>>3&536870908)+u>>2]>>>e&1););i=f,_=b;o:{l:{for(;;){if(h[(e=(_>>>3&536870908)+u|0)>>2]=h[e>>2]|1<<_,p=((e=_+1|0)>>>0)%3|0?e:_-2|0,T=(A=((R=(_>>>0)%3|0)?-1:2)+_|0)<<2,(0|i)!=(0|f))if(P=h[(p<<2)+E>>2],y=h[m+12>>2],e=i,-1==(0|A))for(;;){if((0|P)==h[e>>2]&&(w=-1,A=-1,-1!=(0|(u=h[e+4>>2]))))break l;if((0|f)==(0|(e=e+8|0)))break}else for(M=y+T|0;;){if((0|P)==h[e>>2]&&(0|(u=h[e+4>>2]))!=(0|(w=h[M>>2]))){if(f=-1,e=-1,-1==(0|u))break o;break l}if((0|f)==(0|(e=e+8|0)))break}if(A=h[E+T>>2],h[g+8>>2]==(0|f)){if((e=1+(f=(u=f-i|0)>>3)|0)>>>0>=536870912)break t;if(y=u>>2,y=u>>>0<2147483640?e>>>0>y>>>0?e:y:536870911){if(y>>>0>=536870912)break n;e=gn(y<<3)}else e=0;h[(f=e+(f<<3)|0)>>2]=A,h[f+4>>2]=p,f=f+8|0,(0|u)>0&&We(e,i,u),h[g+8>>2]=e+(y<<3),h[g+4>>2]=f,h[g>>2]=e,i&&ve(i)}else h[f>>2]=A,h[f+4>>2]=p,f=f+8|0,h[g+4>>2]=f;c:{if(R)e=_-1|0;else if(-1==(0|(e=_+2|0)))break c;if(-1!=(0|(e=h[h[m+12>>2]+(e<<2)>>2]))&&!((0|b)==(0|(_=e+((e>>>0)%3|0?-1:2)|0))|-1==(0|_))){E=h[m>>2],i=h[g>>2],u=h[g+16>>2];continue}}break}E=h[m>>2];break s}e=h[y+((f=u)<<2)>>2]}-1!=(0|w)&&(h[y+(w<<2)>>2]=-1),-1!=(0|e)&&(h[h[m+12>>2]+(e<<2)>>2]=-1),e=h[m+12>>2],h[e+(A<<2)>>2]=-1,h[e+(f<<2)>>2]=-1,S=1}if(!((t=t+1|0)>>>0<(e=h[m+4>>2])-E>>2>>>0))break}if(S)continue}break}(e=h[g>>2])&&ve(e),(e=h[g+16>>2])&&ve(e),N=g+32|0;break r}pr(),x()}A=0,N=b=N-32|0,e=h[D+12>>2],h[m+36>>2]=e,E=m+24|0;r:{a:{s:{o:{l:{i=h[m+24>>2];c:{if((t=h[m+28>>2]-i>>2)>>>0<e>>>0)Ye(E,e-t|0,13684),h[b+24>>2]=0,h[b+16>>2]=0,h[b+20>>2]=0;else if(e>>>0<t>>>0&&(h[m+28>>2]=i+(e<<2)),t=0,h[b+24>>2]=0,h[b+16>>2]=0,h[b+20>>2]=0,!e)break c;if((0|e)<0)break l;t=gn((f=1+(i=e-1>>>5|0)|0)<<2),h[b+24>>2]=f,h[b+16>>2]=t,h[b+20>>2]=e,h[((e>>>0<33?0:i)<<2)+t>>2]=0,f=xt(t,0,i=e>>>5<<2),(u=31&e)&&(h[(i=i+f|0)>>2]=h[i>>2]&(-1>>>32-u^-1))}if(y=h[m>>2],_=h[m+4>>2],h[b+8>>2]=0,h[b>>2]=0,h[b+4>>2]=0,!(i=_-y|0))break r;if((0|i)<0)break o;if(g=gn((p=1+(u=(f=i>>2)-1>>>5|0)|0)<<2),h[b+8>>2]=p,h[b>>2]=g,h[b+4>>2]=f,w=0,h[((i>>>0<132?0:u)<<2)+g>>2]=0,p=xt(g,0,u=f>>>5<<2),(f&=31)&&(h[(u=u+p|0)>>2]=h[u>>2]&(-1>>>32-f^-1)),i>>>0<12)break r;for(;;){if(T=v(w,3),i=h[(f=(T<<2)+y|0)>>2],u=-1,-1!=(0|(p=T+1|0))&&(u=h[(p<<2)+y>>2]),(0|i)!=(0|u)&&(0|(p=i))!=(0|(i=h[f+8>>2]))&&(S=0,(0|i)!=(0|u))){for(;;){if(!(h[((f=S+T|0)>>>3&536870908)+g>>2]>>>f&1)){if(P=(u=1<<(i=h[(f<<2)+y>>2]))&h[((g=i>>>5|0)<<2)+t>>2]){if((0|(t=h[m+28>>2]))==h[m+32>>2]){if((t=1+(g=(u=t-(p=h[E>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(_=u>>1,_=u>>>0<2147483644?t>>>0>_>>>0?t:_:1073741823){if(_>>>0>=1073741824)break n;t=gn(_<<2)}else t=0;h[(g=t+(g<<2)|0)>>2]=-1,(0|u)>0&&We(t,p,u),h[m+32>>2]=t+(_<<2),h[m+28>>2]=g+4,h[m+24>>2]=t,p&&ve(p)}else h[t>>2]=-1,h[m+28>>2]=t+4;if((0|(t=h[m+52>>2]))==h[m+56>>2]){if((t=1+(g=(u=t-(p=h[m+48>>2])|0)>>2)|0)>>>0>=1073741824)break t;if(_=u>>1,_=u>>>0<2147483644?t>>>0>_>>>0?t:_:1073741823){if(_>>>0>=1073741824)break n;t=gn(_<<2)}else t=0;h[(g=t+(g<<2)|0)>>2]=i,(0|u)>0&&We(t,p,u),h[m+56>>2]=t+(_<<2),h[m+52>>2]=g+4,h[m+48>>2]=t,p&&ve(p)}else h[t>>2]=i,h[m+52>>2]=t+4;if((0|(u=h[b+20>>2]))==(t=h[b+24>>2])<<5){if((u+1|0)<0)break s;xe(i=b+16|0,t=u>>>0<=1073741822?(t<<=6)>>>0<(u=u+32&-32)>>>0?u:t:2147483647),u=h[b+20>>2]}h[b+20>>2]=u+1,t=h[b+16>>2]+(u>>>3&536870908)|0,i=h[t>>2],G=t,V=In(u)&i,h[G>>2]=V,u=1<<e,g=e>>>5|0,i=e,e=e+1|0}p=e,t=h[b+16>>2],h[(e=t+(g<<2)|0)>>2]=h[e>>2]|u,R=h[m+24>>2]+(i<<2)|0,_=h[m+12>>2],y=h[m>>2],g=h[b>>2],e=f;c:{u:{h:{d:{f:{p:{for(;;){if(-1==(0|e))break p;if(h[(u=(e>>>3&536870908)+g|0)>>2]=h[u>>2]|1<<e,h[R>>2]=e,P&&(h[(e<<2)+y>>2]=i),u=-1,-1!=(0|(e=((M=e+1|0)>>>0)%3|0?M:e-2|0))&&(u=-1,-1!=(0|(e=h[_+(e<<2)>>2]))&&(u=((u=e+1|0)>>>0)%3|0?u:e-2|0)),(0|f)==(0|(e=u)))break}if(-1!=(0|f))break c;e=1;break f}if((f>>>0)%3|0)e=f-1|0;else if(-1==(0|(e=f+2|0)))break d}if(-1!=(0|(e=h[_+(e<<2)>>2]))){if(!((e>>>0)%3|0))break h;e=e-1|0,y=h[m>>2],g=h[b>>2];break u}}y=h[m>>2],g=h[b>>2];break c}if(y=h[m>>2],g=h[b>>2],-1==(0|(e=e+2|0)))break c}for(f=h[m+12>>2];;){if(h[(u=(e>>>3&536870908)+g|0)>>2]=h[u>>2]|1<<e,P&&(h[(e<<2)+y>>2]=i),(e>>>0)%3|0)e=e-1|0;else if(-1==(0|(e=e+2|0)))break c;if(-1==(0|(e=h[f+(e<<2)>>2])))break c;if(-1==(0|(e=e+((e>>>0)%3|0?-1:2)|0)))break}}e=p}if(3==(0|(S=S+1|0)))break}y=h[m>>2],_=h[m+4>>2]}if(!((w=w+1|0)>>>0<(_-y>>2>>>0)/3>>>0))break}break a}pr(),x()}pr(),x()}pr(),x()}t=h[b+16>>2]}if(h[m+44>>2]=0,e=h[b+20>>2])for(i=31&e,f=(e>>>3&536870908)+t|0,e=t,g=0;h[e>>2]>>>A&1||(g=g+1|0,h[m+44>>2]=g),(0|f)!=(0|(e=((u=31==(0|A))<<2)+e|0))|(0|i)!=(0|(A=u?0:A+1|0)););(e=h[b>>2])&&(ve(e),t=h[b+16>>2]),t&&ve(t),N=b+32|0}N=D+16|0,C||(h[k+8>>2]=0,Ii(m),m=0),N=k+16|0,e=m;break i}Qi(1336),x()}(t=h[o>>2])&&(h[o+4>>2]=t,ve(t))}else e=0;if(N=o+16|0,t=h[n+4>>2],h[n+4>>2]=e,t&&(Ii(t),e=h[n+4>>2]),e)if(e=h[l+100>>2],t=h[l+96>>2],a[s+12|0]=0,Pt(n+56|0,(e-t|0)/12|0,s+12|0),(0|(e=h[l+100>>2]))!=(0|(i=h[l+96>>2])))for(;;){if(!(h[h[n+56>>2]+(O>>>3&536870908)>>2]>>>O&1)){if(Ee(n,0,e=v(O,3)),t=h[n+8>>2],i=h[n+12>>2],Ee(n,1,e+1|0),f=h[n+20>>2],u=h[n+24>>2],Ee(n,2,e+2|0),e=(f=u-f>>2)>>>0>(i=(t=i-t|0)>>2)>>>0,i=h[n+36>>2]-h[n+32>>2]>>2>>>0>(e?f:i)>>>0?2:e?1:t?0:-1,h[n+68>>2]<=0||(h[s+12>>2]=h[n+76>>2],h[s+8>>2]=r,ii(s+8|0,s+12|0),(0|(e=h[44+((i<<2)+n|0)>>2]))<0?e=-1:(t=(e>>>0)/3|0,e=h[(h[h[n>>2]+96>>2]+v(t,12)|0)+(e-v(t,3)<<2)>>2]),h[s+12>>2]=e,h[s+8>>2]=r,ii(s+8|0,s+12|0),t=h[n+72>>2],h[n+72>>2]=t+2,1&t&&(h[s+12>>2]=e,h[s+8>>2]=r,ii(s+8|0,s+12|0),h[n+72>>2]=h[n+72>>2]+1)),N=t=N-16|0,h[n+68>>2]=h[n+68>>2]+1,e=v(i,12)+n|0,!((0|(f=h[e+12>>2]-h[e+8>>2]|0))<=0)){e=-1,u=((i=h[44+((i<<2)+n|0)>>2])>>>0)/3|0,p=(b=-1==(0|i))?-1:u,m=h[n+56>>2]+(p>>>3&536870908)|0,h[m>>2]=h[m>>2]|1<<p,h[n+72>>2]=h[n+72>>2]+1,h[t+12>>2]=(0|i)>=0?h[(h[h[n>>2]+96>>2]+v(u,12)|0)+((i>>>0)%3<<2)>>2]:-1,h[t+8>>2]=r,ii(t+8|0,t+12|0);i:if(b)h[t+12>>2]=-1,h[t+8>>2]=r,ii(t+8|0,t+12|0);else{if((0|(p=((p=i+1|0)>>>0)%3|0?p:i-2|0))>=0?(b=(p>>>0)/3|0,p=h[(h[h[n>>2]+96>>2]+v(b,12)|0)+(p-v(b,3)<<2)>>2]):p=-1,h[t+12>>2]=p,h[t+8>>2]=r,ii(t+8|0,t+12|0),(0|(u=i+(i-v(u,3)|0?-1:2)|0))<0)break i;e=(u>>>0)/3|0,e=h[(h[h[n>>2]+96>>2]+v(e,12)|0)+(u-v(e,3)<<2)>>2]}if(h[n+76>>2]=e,h[t+12>>2]=e,h[t+8>>2]=r,e=-1,ii(t+8|0,t+12|0),e=-1!=(0|i)?h[h[h[n+4>>2]+12>>2]+(i<<2)>>2]:e,!(f>>>0<=7))for(b=(i=f>>>2|0)>>>0>1?i:1,f=1;;){i=e,p=(e>>>0)/3|0,e=-1==(0|e)?-1:p,u=h[n+56>>2]+(e>>>3&536870908)|0,h[u>>2]=h[u>>2]|1<<e,h[n+72>>2]=h[n+72>>2]+1,e=-1,e=(0|i)>=0?h[(h[h[n>>2]+96>>2]+v(p,12)|0)+((i>>>0)%3<<2)>>2]:e,h[n+76>>2]=e,h[t+12>>2]=e,h[t+8>>2]=r,ii(t+8|0,t+12|0);i:{n:{if(1&f){if(u=-1,-1==(0|i))break i;if((0|i)!=(0|v(p,3))){e=i-1|0;break n}e=i+2|0}else{if(u=-1,-1==(0|i))break i;e=((e=i+1|0)>>>0)%3|0?e:i-2|0}if(u=-1,-1==(0|e))break i}u=h[h[h[n+4>>2]+12>>2]+(e<<2)>>2]}if(e=u,(0|b)==(0|(f=f+1|0)))break}}N=t+16|0,i=h[l+96>>2],e=h[l+100>>2]}if(B=1,!((O=O+1|0)>>>0<(e-i|0)/12>>>0))break}else B=1;N=s+16|0,B?((e=h[c>>2])&&(h[c+4>>2]=e,ve(e)),h[c>>2]=h[r>>2],h[c+4>>2]=h[r+4>>2],h[c+8>>2]=h[r+8>>2],F=h[r+84>>2]):(e=h[r>>2])&&(h[r+4>>2]=e,ve(e)),(e=h[r+72>>2])&&ve(e),(e=h[r+48>>2])&&(h[r+52>>2]=e,ve(e)),(e=h[r+36>>2])&&(h[r+40>>2]=e,ve(e)),(e=h[r+24>>2])&&(h[r+28>>2]=e,ve(e)),e=h[r+20>>2],h[r+20>>2]=0,e&&Ii(e),N=r+96|0;break e}vr(),x()}return 0|F},Za:function(e,t,i,n){e|=0,i|=0,n|=0;var r=0,a=0,s=0;if(!(p[80+(t|=0)>>2]>65535||(a=h[t+96>>2],t=h[t+100>>2]-a|0,s=(0|(r=v(e=(0|t)/12|0,6)))==(0|i),!t|(0|i)!=(0|r))))for(s=1,r=e>>>0>1?e:1,e=0;t=v(e,6)+n|0,i=v(e,12)+a|0,u[t>>1]=h[i>>2],u[t+2>>1]=h[i+4>>2],u[t+4>>1]=h[i+8>>2],(0|r)!=(0|(e=e+1|0)););return 0|s},_a:function(e,t,i,n){e|=0,i|=0,n|=0;var r,a=0,s=0,o=0;if(r=h[96+(t|=0)>>2],!((0|(t=h[t+100>>2]-r|0))!=(0|i)|!t))for(o=(e=(0|i)/12|0)>>>0>1?e:1,e=0;s=(a=v(e,12))+n|0,a=a+r|0,h[s>>2]=h[a>>2],h[s+4>>2]=h[a+4>>2],h[s+8>>2]=h[a+8>>2],(0|o)!=(0|(e=e+1|0)););return(0|t)==(0|i)|0},$a:function(e,t,i,n){e|=0,i|=0,n|=0;var r=0,s=0,o=0;N=e=N-32|0,r=a[24+(t|=0)|0],s=h[3419],h[e+24>>2]=h[3418],h[e+28>>2]=s,s=h[3417],h[e+16>>2]=h[3416],h[e+20>>2]=s;e:{t:{if(i=Q(t,i,r,e+16|0)){if(h[e+8>>2]=0,h[e>>2]=0,h[e+4>>2]=0,t=0,r){if((0|r)<0)break t;o=We(t=gn(r<<=2),e+16|0,r)+r|0}(r=h[n>>2])&&(h[n+4>>2]=r,ve(r)),h[n+8>>2]=o,h[n+4>>2]=o,h[n>>2]=t}N=e+32|0;break e}vr(),x()}return 0|i},ab:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s,o=0,l=0,c=0,u=0,f=0,p=0,g=0,b=0,_=0,y=0,A=0;e=0,N=r=N-16|0,s=h[80+(t|=0)>>2],o=a[i+24|0],h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0;e:{t:{if(o){if((0|o)<0)break t;if(e=gn(t=o<<2),h[r>>2]=e,c=e+t|0,h[r+8>>2]=c,f=o-1&1073741823,p=7&o)for(t=e;h[t>>2]=-1073741824,t=t+4|0,(0|p)!=(0|(l=l+1|0)););else t=e;if(f>>>0>=7)for(;h[t+24>>2]=-1073741824,h[t+28>>2]=-1073741824,h[t+16>>2]=-1073741824,h[t+20>>2]=-1073741824,h[t+8>>2]=-1073741824,h[t+12>>2]=-1073741824,h[t>>2]=-1073741824,h[t+4>>2]=-1073741824,(0|c)!=(0|(t=t+32|0)););h[r+4>>2]=c}t=v(o,s),c=h[n>>2],t>>>0>(l=h[n+4>>2]-c>>2)>>>0?ei(n,t-l|0):t>>>0>=l>>>0||(h[n+4>>2]=c+(t<<2));i:if(s)if(u=1,(0|o)<=0)for(t=0;;){if(!Q(i,d[i+84|0]?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],e))break i;if(u=s>>>0>(t=t+1|0)>>>0,(0|t)==(0|s))break}else{for(y=-4&o,p=3&o,l=0,A=o-1>>>0<3;;){if(Q(i,d[i+84|0]?g:h[h[i+68>>2]+(g<<2)>>2],a[i+24|0],e)){if(_=h[n>>2],b=0,o=h[r>>2],t=0,u=0,!A)for(;f=t<<2,m[(c=_+(l<<2)|0)>>2]=m[f+o>>2],m[c+4>>2]=m[(4|f)+o>>2],m[c+8>>2]=m[(8|f)+o>>2],m[c+12>>2]=m[(12|f)+o>>2],t=t+4|0,l=l+4|0,(0|y)!=(0|(u=u+4|0)););if(p)for(;m[_+(l<<2)>>2]=m[(t<<2)+o>>2],t=t+1|0,l=l+1|0,(0|p)!=(0|(b=b+1|0)););if(u=(g=g+1|0)>>>0<s>>>0,(0|s)!=(0|g))continue}break}e=h[r>>2]}e&&ve(e),N=r+16|0,e=1&(-1^u);break e}vr(),x()}return 0|e},bb:Ue,cb:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s,o,l=0,c=0,u=0,f=0;N=r=N-16|0,s=h[80+(t|=0)>>2],o=d[i+24|0],t=v(s,l=o<<24>>24);e:{t:{e=h[i+28>>2];i:if(!d[i+84|0]|1!=(0|e)&2!=(0|e)){e=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0;n:{r:{if(l){if((0|l)<0)break t;if(c=gn(l),h[r>>2]=c,xt(c,0,l),ai(n,t),s)break r;t=1;break n}if(ai(n,t),t=1,!s)break i;for(;te(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],0)&&(t=s>>>0>(e=e+1|0)>>>0,(0|e)!=(0|s)););t^=1;break i}u=-2&(t=l-1|0),f=1&t,t=1,l=0;r:{for(;;){if(c=h[r>>2],!te(i,d[i+84|0]?l:h[h[i+68>>2]+(l<<2)>>2],a[i+24|0],c))break r;a[h[n>>2]+e|0]=d[0|c],t=1,e=e+1|0,c=0;a:{switch(o-1|0){default:for(;a[h[n>>2]+e|0]=d[h[r>>2]+t|0],a[1+(h[n>>2]+e|0)|0]=d[1+(h[r>>2]+t|0)|0],t=t+2|0,e=e+2|0,(0|u)!=(0|(c=c+2|0)););break;case 0:break a;case 1:}f&&(a[h[n>>2]+e|0]=d[h[r>>2]+t|0],e=e+1|0)}if(t=s>>>0>(l=l+1|0)>>>0,(0|l)==(0|s))break}c=h[r>>2]}if(t=!t,!c)break i}ve(c)}else{if(l=h[i+48>>2],i=h[h[i>>2]>>2],e=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,t){if((0|t)<0)break t;e=We(c=gn(t),i+l|0,t)+t|0}(t=h[n>>2])&&(h[n+4>>2]=t,ve(t)),h[n+8>>2]=e,h[n+4>>2]=e,h[n>>2]=c,t=1}N=r+16|0,e=1&t;break e}vr(),x()}return 0|e},db:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s,o,l=0,c=0,u=0,f=0;N=r=N-16|0,s=h[80+(t|=0)>>2],o=d[i+24|0],t=v(s,l=o<<24>>24);e:{t:{e=h[i+28>>2];i:if(!d[i+84|0]|1!=(0|e)&2!=(0|e)){e=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0;n:{r:{if(l){if((0|l)<0)break t;if(c=gn(l),h[r>>2]=c,xt(c,0,l),ai(n,t),s)break r;t=1;break n}if(ai(n,t),t=1,!s)break i;for(;ie(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],0)&&(t=s>>>0>(e=e+1|0)>>>0,(0|e)!=(0|s)););t^=1;break i}u=-2&(t=l-1|0),f=1&t,t=1,l=0;r:{for(;;){if(c=h[r>>2],!ie(i,d[i+84|0]?l:h[h[i+68>>2]+(l<<2)>>2],a[i+24|0],c))break r;a[h[n>>2]+e|0]=d[0|c],t=1,e=e+1|0,c=0;a:{switch(o-1|0){default:for(;a[h[n>>2]+e|0]=d[h[r>>2]+t|0],a[1+(h[n>>2]+e|0)|0]=d[1+(h[r>>2]+t|0)|0],t=t+2|0,e=e+2|0,(0|u)!=(0|(c=c+2|0)););break;case 0:break a;case 1:}f&&(a[h[n>>2]+e|0]=d[h[r>>2]+t|0],e=e+1|0)}if(t=s>>>0>(l=l+1|0)>>>0,(0|l)==(0|s))break}c=h[r>>2]}if(t=!t,!c)break i}ve(c)}else{if(l=h[i+48>>2],i=h[h[i>>2]>>2],e=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,t){if((0|t)<0)break t;e=We(c=gn(t),i+l|0,t)+t|0}(t=h[n>>2])&&(h[n+4>>2]=t,ve(t)),h[n+8>>2]=e,h[n+4>>2]=e,h[n>>2]=c,t=1}N=r+16|0,e=1&t;break e}vr(),x()}return 0|e},eb:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s=0,o=0,l=0,c=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0;N=r=N-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=v(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|3!=(0|t)&4!=(0|t)){if(h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,e){if((0|e)<0)break t;l=gn(t=e<<1),h[r>>2]=l,o=t+l|0,h[r+8>>2]=o,xt(l,0,t),h[r+4>>2]=o}o=h[n>>2],(t=h[n+4>>2]-o>>1)>>>0<s>>>0?ri(n,s-t|0):t>>>0<=s>>>0||(h[n+4>>2]=o+(s<<1));i:if(c)if(e){for(A=-4&e,_=3&e,E=e-1>>>0<3,t=1,s=0;;){if(le(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(y=h[n>>2],b=0,o=h[r>>2],e=0,t=0,!E)for(;g=e<<1,u[(m=(p<<1)+y|0)>>1]=f[o+g>>1],u[m+2>>1]=f[o+(2|g)>>1],u[m+4>>1]=f[o+(4|g)>>1],u[m+6>>1]=f[o+(6|g)>>1],e=e+4|0,p=p+4|0,(0|A)!=(0|(t=t+4|0)););if(_)for(;u[(p<<1)+y>>1]=f[o+(e<<1)>>1],e=e+1|0,p=p+1|0,(0|(b=b+1|0))!=(0|_););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[r>>2]}else for(e=0,t=1;;){if(!le(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&ve(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=0,e=s<<1){if((0|e)<0)break t;p=(t=We(i=gn(e),l+c|0,e))+e|0,t=t+(e>>1<<1)|0}(e=h[n>>2])&&(h[n+4>>2]=e,ve(e)),h[n+8>>2]=t,h[n+4>>2]=p,h[n>>2]=i,e=1}N=r+16|0,e&=1;break e}vr(),x()}return 0|e},fb:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s=0,o=0,l=0,c=0,p=0,m=0,g=0,b=0,_=0,y=0,A=0,E=0;N=r=N-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=v(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|3!=(0|t)&4!=(0|t)){if(h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,e){if((0|e)<0)break t;l=gn(t=e<<1),h[r>>2]=l,o=t+l|0,h[r+8>>2]=o,xt(l,0,t),h[r+4>>2]=o}o=h[n>>2],(t=h[n+4>>2]-o>>1)>>>0<s>>>0?ri(n,s-t|0):t>>>0<=s>>>0||(h[n+4>>2]=o+(s<<1));i:if(c)if(e){for(A=-4&e,_=3&e,E=e-1>>>0<3,t=1,s=0;;){if(ce(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(y=h[n>>2],b=0,o=h[r>>2],e=0,t=0,!E)for(;g=e<<1,u[(m=(p<<1)+y|0)>>1]=f[o+g>>1],u[m+2>>1]=f[o+(2|g)>>1],u[m+4>>1]=f[o+(4|g)>>1],u[m+6>>1]=f[o+(6|g)>>1],e=e+4|0,p=p+4|0,(0|A)!=(0|(t=t+4|0)););if(_)for(;u[(p<<1)+y>>1]=f[o+(e<<1)>>1],e=e+1|0,p=p+1|0,(0|(b=b+1|0))!=(0|_););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[r>>2]}else for(e=0,t=1;;){if(!ce(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&ve(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=0,e=s<<1){if((0|e)<0)break t;p=(t=We(i=gn(e),l+c|0,e))+e|0,t=t+(e>>1<<1)|0}(e=h[n>>2])&&(h[n+4>>2]=e,ve(e)),h[n+8>>2]=t,h[n+4>>2]=p,h[n>>2]=i,e=1}N=r+16|0,e&=1;break e}vr(),x()}return 0|e},gb:Ue,hb:function(e,t,i,n){e|=0,i|=0,n|=0;var r,s=0,o=0,l=0,c=0,u=0,f=0,p=0,m=0,g=0,b=0,_=0,y=0;N=r=N-16|0,c=h[80+(t|=0)>>2],e=a[i+24|0],s=v(c,e);e:{t:{if(t=h[i+28>>2],!d[i+84|0]|5!=(0|t)&6!=(0|t)){if(h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,e){if((0|e)<0)break t;l=gn(t=e<<2),h[r>>2]=l,o=t+l|0,h[r+8>>2]=o,xt(l,0,t),h[r+4>>2]=o}o=h[n>>2],(t=h[n+4>>2]-o>>2)>>>0<s>>>0?ei(n,s-t|0):t>>>0<=s>>>0||(h[n+4>>2]=o+(s<<2));i:if(c)if(e){for(_=-4&e,g=3&e,y=e-1>>>0<3,t=1,s=0;;){if(de(i,d[i+84|0]?s:h[h[i+68>>2]+(s<<2)>>2],a[i+24|0],l)){if(b=h[n>>2],m=0,o=h[r>>2],e=0,t=0,!y)for(;p=e<<2,h[(f=(u<<2)+b|0)>>2]=h[o+p>>2],h[f+4>>2]=h[o+(4|p)>>2],h[f+8>>2]=h[o+(8|p)>>2],h[f+12>>2]=h[o+(12|p)>>2],e=e+4|0,u=u+4|0,(0|_)!=(0|(t=t+4|0)););if(g)for(;h[(u<<2)+b>>2]=h[o+(e<<2)>>2],e=e+1|0,u=u+1|0,(0|(m=m+1|0))!=(0|g););if(t=c>>>0>(s=s+1|0)>>>0,(0|s)!=(0|c))continue}break}l=h[r>>2]}else for(e=0,t=1;;){if(!de(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],l))break i;if(t=c>>>0>(e=e+1|0)>>>0,(0|e)==(0|c))break}else t=0;l&&ve(l),e=1^t}else{if(l=h[i+48>>2],c=h[h[i>>2]>>2],t=0,h[r+8>>2]=0,h[r>>2]=0,h[r+4>>2]=0,i=0,e=s<<2){if((0|e)<0)break t;u=(t=We(i=gn(e),l+c|0,e))+e|0,t=t+(e>>2<<2)|0}(e=h[n>>2])&&(h[n+4>>2]=e,ve(e)),h[n+8>>2]=t,h[n+4>>2]=u,h[n>>2]=i,e=1}N=r+16|0,e&=1;break e}vr(),x()}return 0|e},ib:function(e,t,i,n,r,s){e|=0,t|=0,i|=0,r|=0,s|=0;var o=0,l=0,c=0,p=0,g=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0,M=0,R=0,P=0;e:{t:{i:{n:{r:switch((n|=0)-1|0){case 0:e=0,N=_=N-16|0,p=h[t+80>>2],o=a[i+24|0];a:if((0|v(p,o))==(0|r))if((t=1!=h[i+28>>2])|!(e=d[i+84|0])){if(n=0,h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,o){if((0|o)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,o)}s:{o:if(p){if(t){if(!o)for(t=0,n=1;;){if(!te(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(n=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(b=-4&o,g=3&o,t=0,y=o-1>>>0<3,n=1;;){if(!te(i,255&e?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,r=0,!y)for(;a[0|(o=t+s|0)]=d[e+l|0],a[o+1|0]=d[(1|e)+l|0],a[o+2|0]=d[(2|e)+l|0],a[o+3|0]=d[(3|e)+l|0],e=e+4|0,t=t+4|0,(0|b)!=(0|(r=r+4|0)););if(g)for(;a[t+s|0]=d[e+l|0],e=e+1|0,t=t+1|0,(0|g)!=(0|(n=n+1|0)););if((0|p)==(0|(c=c+1|0)))break;n=c>>>0<p>>>0,e=d[i+84|0]}e=c>>>0>=p>>>0;break s}if(o)for(y=-4&o,b=3&o,t=0,A=o-1>>>0<3;;){if(r=h[h[i>>2]>>2],E=h[i+40>>2],o=We(l,r+(e=h[i+48>>2]+Zi(E,h[i+44>>2],255&e?n:h[h[i+68>>2]+(n<<2)>>2],0)|0)|0,E),r=0,e=0,c=0,!A)for(;a[0|(g=t+s|0)]=d[e+o|0],a[g+1|0]=d[o+(1|e)|0],a[g+2|0]=d[o+(2|e)|0],a[g+3|0]=d[o+(3|e)|0],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;a[t+s|0]=d[e+o|0],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break s;e=d[i+84|0]}if(b=h[i>>2],r=h[i+48>>2],A=h[i+68>>2],s=h[i+44>>2],E=i=h[i+40>>2],t=0,1!=(0|p))for(w=-2&p,T=255&e;o=1|t,g=We(l,(y=h[b>>2])+(g=Zi(i,s,T?t:h[A+(t<<2)>>2],0)+r|0)|0,E),S=h[b>>2],T||(o=h[A+(o<<2)>>2]),We(g,(o=Zi(i,s,o,0)+r|0)+S|0,E),t=t+2|0,(0|w)!=(0|(c=c+2|0)););if(!(1&p))break o;c=h[b>>2],255&e||(t=h[A+(t<<2)>>2]),We(l,(e=Zi(i,s,t,0)+r|0)+c|0,E)}if(e=1^n,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break i;case 2:e=0,N=_=N-16|0,o=(n=a[i+24|0])<<1,p=h[t+80>>2];a:if((0|v(o,p))==(0|r))if((t=3!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,n){if((0|n)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,n<<1)}s:{o:if(p){if(t){if(!n)for(t=0,c=1;;){if(!le(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&n,b=3&n,t=0,A=n-1>>>0<3,c=1,n=0;;){if(!le(i,255&e?n:h[h[i+68>>2]+(n<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,c=0,!A)for(;g=e<<1,u[(o=(t<<1)+s|0)>>1]=f[g+l>>1],u[o+2>>1]=f[(2|g)+l>>1],u[o+4>>1]=f[(4|g)+l>>1],u[o+6>>1]=f[(6|g)+l>>1],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;u[(t<<1)+s>>1]=f[(e<<1)+l>>1],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if((0|p)==(0|(n=n+1|0)))break;c=n>>>0<p>>>0,e=d[i+84|0]}e=n>>>0>=p>>>0;break s}if(y=h[i>>2],r=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],n){for(M=-4&n,A=3&n,t=0,R=255&e,P=n-1>>>0<3,n=0;;){if(b=We(l,(i=h[y>>2])+(e=Zi(g,o,R?n:h[E+(n<<2)>>2],0)+r|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<1,u[(w=(t<<1)+s|0)>>1]=f[S+b>>1],u[w+2>>1]=f[b+(2|S)>>1],u[w+4>>1]=f[b+(4|S)>>1],u[w+6>>1]=f[b+(6|S)>>1],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;u[(t<<1)+s>>1]=f[b+(e<<1)>>1],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,b=255&e,n=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Zi(g,o,b?t:h[E+(t<<2)>>2],0)+r|0)|0,T),S=h[y>>2],b||(i=h[E+(i<<2)>>2]),We(s,(i=Zi(g,o,i,0)+r|0)+S|0,T),t=t+2|0,(0|w)!=(0|(n=n+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Zi(g,o,t,0)+r|0)+i|0,T)}if(e=!c,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break t;case 4:e=0,N=_=N-16|0,o=(n=a[i+24|0])<<2,p=h[t+80>>2];a:if((0|v(o,p))==(0|r))if((t=5!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,n){if((0|n)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,n<<2)}s:{o:if(p){if(t){if(!n)for(t=0,c=1;;){if(!he(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&n,b=3&n,t=0,A=n-1>>>0<3,c=1,n=0;;){if(!he(i,255&e?n:h[h[i+68>>2]+(n<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,c=0,!A)for(;g=e<<2,h[(o=(t<<2)+s|0)>>2]=h[g+l>>2],h[o+4>>2]=h[(4|g)+l>>2],h[o+8>>2]=h[(8|g)+l>>2],h[o+12>>2]=h[(12|g)+l>>2],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;h[(t<<2)+s>>2]=h[(e<<2)+l>>2],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if((0|p)==(0|(n=n+1|0)))break;c=n>>>0<p>>>0,e=d[i+84|0]}e=n>>>0>=p>>>0;break s}if(y=h[i>>2],r=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],n){for(M=-4&n,A=3&n,t=0,R=255&e,P=n-1>>>0<3,n=0;;){if(b=We(l,(i=h[y>>2])+(e=Zi(g,o,R?n:h[E+(n<<2)>>2],0)+r|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<2,h[(w=(t<<2)+s|0)>>2]=h[S+b>>2],h[w+4>>2]=h[b+(4|S)>>2],h[w+8>>2]=h[b+(8|S)>>2],h[w+12>>2]=h[b+(12|S)>>2],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;h[(t<<2)+s>>2]=h[b+(e<<2)>>2],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,b=255&e,n=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Zi(g,o,b?t:h[E+(t<<2)>>2],0)+r|0)|0,T),S=h[y>>2],b||(i=h[E+(i<<2)>>2]),We(s,(i=Zi(g,o,i,0)+r|0)+S|0,T),t=t+2|0,(0|w)!=(0|(n=n+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Zi(g,o,t,0)+r|0)+i|0,T)}if(e=!c,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break t;case 1:e=0,N=_=N-16|0,p=h[t+80>>2],o=a[i+24|0];a:if((0|v(p,o))==(0|r))if((t=2!=h[i+28>>2])|!(e=d[i+84|0])){if(n=0,h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,o){if((0|o)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,o)}s:{o:if(p){if(t){if(!o)for(t=0,n=1;;){if(!ie(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(n=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(b=-4&o,g=3&o,t=0,y=o-1>>>0<3,n=1;;){if(!ie(i,255&e?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],l))break o;if(n=0,e=0,r=0,!y)for(;a[0|(o=t+s|0)]=d[e+l|0],a[o+1|0]=d[(1|e)+l|0],a[o+2|0]=d[(2|e)+l|0],a[o+3|0]=d[(3|e)+l|0],e=e+4|0,t=t+4|0,(0|b)!=(0|(r=r+4|0)););if(g)for(;a[t+s|0]=d[e+l|0],e=e+1|0,t=t+1|0,(0|g)!=(0|(n=n+1|0)););if((0|p)==(0|(c=c+1|0)))break;n=c>>>0<p>>>0,e=d[i+84|0]}e=c>>>0>=p>>>0;break s}if(o)for(y=-4&o,b=3&o,t=0,A=o-1>>>0<3;;){if(r=h[h[i>>2]>>2],E=h[i+40>>2],o=We(l,r+(e=h[i+48>>2]+Zi(E,h[i+44>>2],255&e?n:h[h[i+68>>2]+(n<<2)>>2],0)|0)|0,E),r=0,e=0,c=0,!A)for(;a[0|(g=t+s|0)]=d[e+o|0],a[g+1|0]=d[o+(1|e)|0],a[g+2|0]=d[o+(2|e)|0],a[g+3|0]=d[o+(3|e)|0],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;a[t+s|0]=d[e+o|0],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break s;e=d[i+84|0]}if(b=h[i>>2],r=h[i+48>>2],A=h[i+68>>2],s=h[i+44>>2],E=i=h[i+40>>2],t=0,1!=(0|p))for(w=-2&p,T=255&e;o=1|t,g=We(l,(y=h[b>>2])+(g=Zi(i,s,T?t:h[A+(t<<2)>>2],0)+r|0)|0,E),S=h[b>>2],T||(o=h[A+(o<<2)>>2]),We(g,(o=Zi(i,s,o,0)+r|0)+S|0,E),t=t+2|0,(0|w)!=(0|(c=c+2|0)););if(!(1&p))break o;c=h[b>>2],255&e||(t=h[A+(t<<2)>>2]),We(l,(e=Zi(i,s,t,0)+r|0)+c|0,E)}if(e=1^n,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break i;case 3:e=0,N=_=N-16|0,o=(n=a[i+24|0])<<1,p=h[t+80>>2];a:if((0|v(o,p))==(0|r))if((t=4!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,n){if((0|n)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,n<<1)}s:{o:if(p){if(t){if(!n)for(t=0,c=1;;){if(!ce(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&n,b=3&n,t=0,A=n-1>>>0<3,c=1,n=0;;){if(!ce(i,255&e?n:h[h[i+68>>2]+(n<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,c=0,!A)for(;g=e<<1,u[(o=(t<<1)+s|0)>>1]=f[g+l>>1],u[o+2>>1]=f[(2|g)+l>>1],u[o+4>>1]=f[(4|g)+l>>1],u[o+6>>1]=f[(6|g)+l>>1],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;u[(t<<1)+s>>1]=f[(e<<1)+l>>1],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if((0|p)==(0|(n=n+1|0)))break;c=n>>>0<p>>>0,e=d[i+84|0]}e=n>>>0>=p>>>0;break s}if(y=h[i>>2],r=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],n){for(M=-4&n,A=3&n,t=0,R=255&e,P=n-1>>>0<3,n=0;;){if(b=We(l,(i=h[y>>2])+(e=Zi(g,o,R?n:h[E+(n<<2)>>2],0)+r|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<1,u[(w=(t<<1)+s|0)>>1]=f[S+b>>1],u[w+2>>1]=f[b+(2|S)>>1],u[w+4>>1]=f[b+(4|S)>>1],u[w+6>>1]=f[b+(6|S)>>1],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;u[(t<<1)+s>>1]=f[b+(e<<1)>>1],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,b=255&e,n=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Zi(g,o,b?t:h[E+(t<<2)>>2],0)+r|0)|0,T),S=h[y>>2],b||(i=h[E+(i<<2)>>2]),We(s,(i=Zi(g,o,i,0)+r|0)+S|0,T),t=t+2|0,(0|w)!=(0|(n=n+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Zi(g,o,t,0)+r|0)+i|0,T)}if(e=!c,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break t;case 5:e=0,N=_=N-16|0,o=(n=a[i+24|0])<<2,p=h[t+80>>2];a:if((0|v(o,p))==(0|r))if((t=6!=h[i+28>>2])|!(e=d[i+84|0])){if(h[_+8>>2]=0,h[_>>2]=0,h[_+4>>2]=0,n){if((0|n)<0)break n;l=gn(o),h[_>>2]=l,xt(l,0,n<<2)}s:{o:if(p){if(t){if(!n)for(t=0,c=1;;){if(!de(i,255&e?t:h[h[i+68>>2]+(t<<2)>>2],a[i+24|0],l))break o;if(c=p>>>0>(t=t+1|0)>>>0,(0|t)==(0|p))break o;e=d[i+84|0]}for(y=-4&n,b=3&n,t=0,A=n-1>>>0<3,c=1,n=0;;){if(!de(i,255&e?n:h[h[i+68>>2]+(n<<2)>>2],a[i+24|0],l))break o;if(r=0,e=0,c=0,!A)for(;g=e<<2,h[(o=(t<<2)+s|0)>>2]=h[g+l>>2],h[o+4>>2]=h[(4|g)+l>>2],h[o+8>>2]=h[(8|g)+l>>2],h[o+12>>2]=h[(12|g)+l>>2],e=e+4|0,t=t+4|0,(0|y)!=(0|(c=c+4|0)););if(b)for(;h[(t<<2)+s>>2]=h[(e<<2)+l>>2],e=e+1|0,t=t+1|0,(0|b)!=(0|(r=r+1|0)););if((0|p)==(0|(n=n+1|0)))break;c=n>>>0<p>>>0,e=d[i+84|0]}e=n>>>0>=p>>>0;break s}if(y=h[i>>2],r=h[i+48>>2],E=h[i+68>>2],o=h[i+44>>2],T=g=h[i+40>>2],n){for(M=-4&n,A=3&n,t=0,R=255&e,P=n-1>>>0<3,n=0;;){if(b=We(l,(i=h[y>>2])+(e=Zi(g,o,R?n:h[E+(n<<2)>>2],0)+r|0)|0,T),c=0,e=0,i=0,!P)for(;S=e<<2,h[(w=(t<<2)+s|0)>>2]=h[S+b>>2],h[w+4>>2]=h[b+(4|S)>>2],h[w+8>>2]=h[b+(8|S)>>2],h[w+12>>2]=h[b+(12|S)>>2],e=e+4|0,t=t+4|0,(0|M)!=(0|(i=i+4|0)););if(A)for(;h[(t<<2)+s>>2]=h[b+(e<<2)>>2],e=e+1|0,t=t+1|0,(0|A)!=(0|(c=c+1|0)););if(e=1,(0|p)==(0|(n=n+1|0)))break}break s}if(t=0,1!=(0|p))for(w=-2&p,b=255&e,n=0;i=1|t,s=We(l,(A=h[y>>2])+(s=Zi(g,o,b?t:h[E+(t<<2)>>2],0)+r|0)|0,T),S=h[y>>2],b||(i=h[E+(i<<2)>>2]),We(s,(i=Zi(g,o,i,0)+r|0)+S|0,T),t=t+2|0,(0|w)!=(0|(n=n+2|0)););if(!(1&p))break o;i=h[y>>2],255&e||(t=h[E+(t<<2)>>2]),We(l,(e=Zi(g,o,t,0)+r|0)+i|0,T)}if(e=!c,!l)break a}ve(l)}else We(s,h[h[i>>2]>>2]+h[i+48>>2]|0,r),e=1;break t;case 8:break r;default:break e}e=0,N=p=N-16|0,n=(c=a[i+24|0])<<2,g=h[t+80>>2];r:if((0|v(n,g))==(0|r)){r=h[i+28>>2],h[p+8>>2]=0,h[p>>2]=0,h[p+4>>2]=0,t=0;a:{s:{o:{if(c){if((0|c)<0)break o;if(t=gn(n),h[p>>2]=t,o=(c<<2)+t|0,h[p+8>>2]=o,_=1+((n=n-4|0)>>>2|0)&7)for(e=t;h[e>>2]=-1073741824,e=e+4|0,(0|_)!=(0|(l=l+1|0)););else e=t;if(!(n>>>0<28))for(;h[e+24>>2]=-1073741824,h[e+28>>2]=-1073741824,h[e+16>>2]=-1073741824,h[e+20>>2]=-1073741824,h[e+8>>2]=-1073741824,h[e+12>>2]=-1073741824,h[e>>2]=-1073741824,h[e+4>>2]=-1073741824,(0|o)!=(0|(e=e+32|0)););}if(!g)break s;if(9==(0|r)){if(e=0,y=h[i>>2],n=h[i+48>>2],E=h[i+68>>2],T=d[i+84|0],r=h[i+44>>2],w=o=h[i+40>>2],(0|c)<=0){if(1!=(0|g))for(c=-2&g,i=0;s=1|e,l=We(t,(_=h[y>>2])+(l=Zi(o,r,T?e:h[E+(e<<2)>>2],0)+n|0)|0,w),_=h[y>>2],T||(s=h[E+(s<<2)>>2]),We(l,(s=Zi(o,r,s,0)+n|0)+_|0,w),e=e+2|0,(0|c)!=(0|(i=i+2|0)););if(!(1&g))break s;i=h[y>>2],T||(e=h[E+(e<<2)>>2]),We(t,(e=Zi(o,r,e,0)+n|0)+i|0,w);break s}for(R=-4&c,A=3&c,l=0,P=c-1>>>0<3,c=0;;){if(i=We(t,(i=h[y>>2])+(e=Zi(o,r,T?c:h[E+(c<<2)>>2],0)+n|0)|0,w),_=0,e=0,M=0,!P)for(;S=e<<2,m[(b=(l<<2)+s|0)>>2]=m[S+i>>2],m[b+4>>2]=m[i+(4|S)>>2],m[b+8>>2]=m[i+(8|S)>>2],m[b+12>>2]=m[i+(12|S)>>2],e=e+4|0,l=l+4|0,(0|R)!=(0|(M=M+4|0)););if(A)for(;m[(l<<2)+s>>2]=m[i+(e<<2)>>2],e=e+1|0,l=l+1|0,(0|A)!=(0|(_=_+1|0)););if(e=1,(0|g)==(0|(c=c+1|0)))break}break a}if(b=1,(0|c)<=0){for(e=0;;){if(!Q(i,d[i+84|0]?e:h[h[i+68>>2]+(e<<2)>>2],a[i+24|0],t))break s;if(b=g>>>0>(e=e+1|0)>>>0,(0|e)==(0|g))break}break s}for(y=-4&c,o=3&c,l=0,A=c-1>>>0<3,c=0;;){if(!Q(i,d[i+84|0]?c:h[h[i+68>>2]+(c<<2)>>2],a[i+24|0],t))break s;if(b=0,e=0,_=0,!A)for(;r=e<<2,m[(n=(l<<2)+s|0)>>2]=m[r+t>>2],m[n+4>>2]=m[(4|r)+t>>2],m[n+8>>2]=m[(8|r)+t>>2],m[n+12>>2]=m[(12|r)+t>>2],e=e+4|0,l=l+4|0,(0|y)!=(0|(_=_+4|0)););if(o)for(;m[(l<<2)+s>>2]=m[(e<<2)+t>>2],e=e+1|0,l=l+1|0,(0|o)!=(0|(b=b+1|0)););if(b=g>>>0>(c=c+1|0)>>>0,(0|c)==(0|g))break}e=c>>>0>=g>>>0;break a}vr(),x()}if(e=1^b,!t)break r}ve(t)}N=p+16|0,l=1&e;break e}vr(),x()}N=_+16|0,l=1&e;break e}N=_+16|0,l=1&e}return 0|l},jb:function(e,t){e|=0,t|=0;var i,n=0,r=0,s=0,o=0,l=0,c=0,u=0,f=0,m=0,g=0,v=0,b=0,_=0,y=0,A=0,E=0,w=0,S=0,T=0;N=i=N-16|0,h[i+12>>2]=t,t=gn(32),h[i>>2]=t,h[i+4>>2]=24,h[i+8>>2]=-2147483616,a[t+24|0]=0,n=d[1318]|d[1319]<<8|d[1320]<<16|d[1321]<<24,r=d[1314]|d[1315]<<8|d[1316]<<16|d[1317]<<24,a[t+16|0]=r,a[t+17|0]=r>>>8,a[t+18|0]=r>>>16,a[t+19|0]=r>>>24,a[t+20|0]=n,a[t+21|0]=n>>>8,a[t+22|0]=n>>>16,a[t+23|0]=n>>>24,n=d[1310]|d[1311]<<8|d[1312]<<16|d[1313]<<24,r=d[1306]|d[1307]<<8|d[1308]<<16|d[1309]<<24,a[t+8|0]=r,a[t+9|0]=r>>>8,a[t+10|0]=r>>>16,a[t+11|0]=r>>>24,a[t+12|0]=n,a[t+13|0]=n>>>8,a[t+14|0]=n>>>16,a[t+15|0]=n>>>24,n=d[1302]|d[1303]<<8|d[1304]<<16|d[1305]<<24,r=d[1298]|d[1299]<<8|d[1300]<<16|d[1301]<<24,a[0|t]=r,a[t+1|0]=r>>>8,a[t+2|0]=r>>>16,a[t+3|0]=r>>>24,a[t+4|0]=n,a[t+5|0]=n>>>8,a[t+6|0]=n>>>16,a[t+7|0]=n>>>24,N=c=N-48|0,m=e;e:{if(e=h[(n=e+16|0)>>2]){for(r=h[i+12>>2],t=n;t=(o=(0|r)>h[e+16>>2])?t:e,e=h[(o<<2)+e>>2];);if((0|t)!=(0|n)&&(0|r)>=h[t+16>>2])break e}if(h[4+(e=w=c+24|0)>>2]=0,h[e+8>>2]=0,S=e+4|0,h[e>>2]=S,e=h[i+12>>2],h[(r=c+16|0)>>2]=0,h[r+4>>2]=0,h[c+8>>2]=e,h[c+12>>2]=r,(0|S)!=(0|(t=h[w>>2])))for(g=c+8|4;;){o=t,l=t+16|0,N=y=N-16|0,u=y+12|0,e=y+8|0;t:{i:{n:{r:{a:{s:{o:if((0|(A=g+4|0))!=(0|r))if(s=(t=d[r+27|0])<<24>>24<0,f=(0|(T=(v=d[l+11|0])<<24>>24))<0,_=(b=(t=s?h[r+20>>2]:t)>>>0<(v=f?h[l+4>>2]:v)>>>0)?t:v){if(E=r+16|0,!(E=xi(f=f?h[l>>2]:l,s=s?h[E>>2]:E,_))){if(t>>>0>v>>>0)break o;break s}if((0|E)>=0)break s}else if(t>>>0<=v>>>0)break a;s=h[r>>2];o:{l:if((0|(e=r))!=h[g>>2]){if(s)for(t=s;e=t,t=h[t+4>>2];);else{if(e=r+8|0,(0|r)==h[h[r+8>>2]>>2])for(;e=(t=h[e>>2])+8|0,(0|t)==h[h[t+8>>2]>>2];);e=h[e>>2]}if(t=(f=d[l+11|0])<<24>>24<0,v=(b=d[e+27|0])<<24>>24<0,!((_=(f=t?h[l+4>>2]:f)>>>0<(b=v?h[e+20>>2]:b)>>>0?f:b)&&(A=e+16|0,t=xi(v?h[A>>2]:A,t?h[l>>2]:l,_)))){if(f>>>0>b>>>0)break l;break o}if((0|t)>=0)break o}if(!s){h[u>>2]=r,e=r;break t}h[u>>2]=e,e=e+4|0;break t}e=It(g,u,l);break t}if(t=xi(s,f,_))break r}if(b)break n;break i}if((0|t)>=0)break i}if(s=h[r+4>>2])for(t=s;e=t,t=h[t>>2];);else if(e=h[r+8>>2],(0|r)!=h[e>>2])for(t=r+8|0;t=(f=h[t>>2])+8|0,e=h[f+8>>2],(0|f)!=h[e>>2];);n:{r:if((0|e)!=(0|A)){if(!((b=(f=(t=(f=d[e+27|0])<<24>>24<0)?h[e+20>>2]:f)>>>0<v>>>0?f:v)&&(_=e+16|0,t=xi((0|T)<0?h[l>>2]:l,t?h[_>>2]:_,b)))){if(f>>>0>v>>>0)break r;break n}if((0|t)>=0)break n}if(!s){h[u>>2]=r,e=r+4|0;break t}h[u>>2]=e;break t}e=It(g,u,l);break t}h[u>>2]=r,h[e>>2]=r}(e=h[(t=e)>>2])?t=0:(s=(e=gn(40))+16|0,a[l+11|0]>=0?(u=h[l+4>>2],h[s>>2]=h[l>>2],h[s+4>>2]=u,h[s+8>>2]=h[l+8>>2]):Bi(s,h[l>>2],h[l+4>>2]),s=e+28|0,a[l+23|0]>=0?(u=h[l+16>>2],h[s>>2]=h[l+12>>2],h[s+4>>2]=u,h[s+8>>2]=h[l+20>>2]):Bi(s,h[l+12>>2],h[l+16>>2]),h[e+8>>2]=h[y+12>>2],h[e>>2]=0,h[e+4>>2]=0,h[t>>2]=e,(s=h[h[g>>2]>>2])?(h[g>>2]=s,t=h[t>>2]):t=e,Ke(h[g+4>>2],t),h[g+8>>2]=h[g+8>>2]+1,t=1),a[c+44|0]=t,h[c+40>>2]=e,N=y+16|0;t:if(e=h[o+4>>2])for(;e=h[(t=e)>>2];);else{if(t=h[o+8>>2],(0|o)==h[t>>2])break t;for(e=o+8|0;e=(o=h[e>>2])+8|0,t=h[o+8>>2],(0|o)!=h[t>>2];);}if((0|t)==(0|S))break}t:{if(e=h[n>>2])for(n=m+16|0,o=h[c+8>>2];;){i:{if((0|(t=h[e+16>>2]))>(0|o)){if(t=h[e>>2])break i;n=e;break t}if((0|t)>=(0|o))break t;if(n=e+4|0,!(t=h[e+4>>2]))break t;e=n}n=e,e=t}e=n}(t=h[n>>2])||(t=gn(32),h[t+16>>2]=h[c+8>>2],h[t+20>>2]=h[c+12>>2],o=t+24|0,s=h[c+16>>2],h[o>>2]=s,l=h[c+20>>2],h[t+28>>2]=l,l?(h[s+8>>2]=o,h[c+16>>2]=0,h[c+20>>2]=0,h[c+12>>2]=r):h[t+20>>2]=o,h[t+8>>2]=e,h[t>>2]=0,h[t+4>>2]=0,h[n>>2]=t,(e=h[h[m+12>>2]>>2])?(h[m+12>>2]=e,e=h[n>>2]):e=t,Ke(h[m+16>>2],e),h[m+20>>2]=h[m+20>>2]+1),vn(c+8|4,h[c+16>>2]),vn(w,h[w+4>>2])}if(N=r=(N=m=(N=c+48|0)-48|0)-32|0,(0|(o=(n=l=r+32|0)-(e=r+21|0)|0))<=9&(0|o)<(1-(p[3720]>1)|0)?(h[r+8>>2]=n,n=61):(a[0|e]=49,h[r+8>>2]=e+1,n=0),h[r+12>>2]=n,n=m+8|0,N=s=(N=c=N-16|0)-16|0,(o=(g=h[r+8>>2])-e|0)>>>0<=4294967279){for(o>>>0<=10?(a[n+11|0]=o,r=n):(r=o>>>0>=11?11==(0|(r=(u=o+16&-16)-1|0))?u:r:10,r=gn(u=r+1|0),h[n>>2]=r,h[n+8>>2]=-2147483648|u,h[n+4>>2]=o);(0|e)!=(0|g);)a[0|r]=d[0|e],r=r+1|0,e=e+1|0;a[s+15|0]=0,a[0|r]=d[s+15|0],N=s+16|0}else mr(),x();N=c+16|0,N=l,h[m+32>>2]=i;e:{t:{if(e=h[4+(r=t+20|0)>>2])for(s=(n=(t=d[i+11|0])<<24>>24<0)?h[i>>2]:i,o=n?h[i+4>>2]:t,t=r+4|0;;){i:{n:{r:{a:{s:{o:if(g=(c=(n=(l=(n=d[e+27|0])<<24>>24<0)?h[e+20>>2]:n)>>>0<o>>>0)?n:o){if(u=e+16|0,!(u=xi(s,l=l?h[u>>2]:u,g))){if(n>>>0>o>>>0)break o;break s}if((0|u)>=0)break s}else if(n>>>0<=o>>>0)break a;if(n=h[e>>2])break i;break t}if(n=xi(l,s,g))break r}if(c)break n;break e}if((0|n)>=0)break e}if(t=e+4|0,!(n=h[e+4>>2]))break e;e=t}t=e,e=n}e=r+4|0}t=e}(n=h[t>>2])?e=0:(s=(n=gn(40))+16|0,o=h[m+32>>2],a[o+11|0]>=0?(l=h[o+4>>2],h[s>>2]=h[o>>2],h[s+4>>2]=l,h[s+8>>2]=h[o+8>>2]):Bi(s,h[o>>2],h[o+4>>2]),h[n+8>>2]=e,h[n>>2]=0,h[n+4>>2]=0,h[n+36>>2]=0,h[n+28>>2]=0,h[n+32>>2]=0,h[t>>2]=n,(e=h[h[r>>2]>>2])?(h[r>>2]=e,e=h[t>>2]):e=n,Ke(h[r+4>>2],e),h[r+8>>2]=h[r+8>>2]+1,e=1),a[m+44|0]=e,h[m+40>>2]=n,e=h[m+40>>2],a[e+39|0]<0&&ve(h[e+28>>2]),t=h[m+12>>2],h[e+28>>2]=h[m+8>>2],h[e+32>>2]=t,h[e+36>>2]=h[m+16>>2],N=m+48|0,a[i+11|0]<0&&ve(h[i>>2]),N=i+16|0},kb:function(e,t){e|=0;var i,n,r=0,s=0;s=8+(n=N-32|0)|0,N=i=(N=n)-80|0,e=h[36+(t|=0)>>2],h[i+72>>2]=h[t+32>>2],h[i+76>>2]=e,r=h[t+28>>2],h[(e=i- -64|0)>>2]=h[t+24>>2],h[e+4>>2]=r,e=h[t+20>>2],h[i+56>>2]=h[t+16>>2],h[i+60>>2]=e,e=h[t+12>>2],h[i+48>>2]=h[t+8>>2],h[i+52>>2]=e,e=h[t+4>>2],h[i+40>>2]=h[t>>2],h[i+44>>2]=e,ue(i+8|0,i+40|0,i+24|0);e:if(e=h[i+8>>2]){if(h[s>>2]=e,e=s+4|0,a[i+23|0]>=0){s=h[4+(t=i+8|4)>>2],h[e>>2]=h[t>>2],h[e+4>>2]=s,h[e+8>>2]=h[t+8>>2];break e}if(Bi(e,h[i+12>>2],h[i+16>>2]),a[i+23|0]>=0)break e;ve(h[i+12>>2])}else a[i+23|0]<0&&ve(h[i+12>>2]),(e=d[i+31|0])>>>0>=2?(e=gn(32),t=d[1621]|d[1622]<<8,a[e+24|0]=t,a[e+25|0]=t>>>8,t=d[1617]|d[1618]<<8|d[1619]<<16|d[1620]<<24,r=d[1613]|d[1614]<<8|d[1615]<<16|d[1616]<<24,a[e+16|0]=r,a[e+17|0]=r>>>8,a[e+18|0]=r>>>16,a[e+19|0]=r>>>24,a[e+20|0]=t,a[e+21|0]=t>>>8,a[e+22|0]=t>>>16,a[e+23|0]=t>>>24,t=d[1609]|d[1610]<<8|d[1611]<<16|d[1612]<<24,r=d[1605]|d[1606]<<8|d[1607]<<16|d[1608]<<24,a[e+8|0]=r,a[e+9|0]=r>>>8,a[e+10|0]=r>>>16,a[e+11|0]=r>>>24,a[e+12|0]=t,a[e+13|0]=t>>>8,a[e+14|0]=t>>>16,a[e+15|0]=t>>>24,t=d[1601]|d[1602]<<8|d[1603]<<16|d[1604]<<24,r=d[1597]|d[1598]<<8|d[1599]<<16|d[1600]<<24,a[0|e]=r,a[e+1|0]=r>>>8,a[e+2|0]=r>>>16,a[e+3|0]=r>>>24,a[e+4|0]=t,a[e+5|0]=t>>>8,a[e+6|0]=t>>>16,a[e+7|0]=t>>>24,a[e+26|0]=0,h[i+8>>2]=-1,Bi(t=i+8|4,e,26),r=a[i+23|0],h[s>>2]=h[i+8>>2],s=s+4|0,(0|r)>=0?(r=h[t+4>>2],h[s>>2]=h[t>>2],h[s+4>>2]=r,h[s+8>>2]=h[t+8>>2]):Bi(s,h[i+12>>2],h[i+16>>2]),a[i+23|0]<0&&ve(h[i+12>>2]),ve(e)):(h[s>>2]=0,h[s+4>>2]=0,h[s+16>>2]=e,h[s+8>>2]=0,h[s+12>>2]=0);return N=i+80|0,e=h[n+24>>2],a[n+23|0]<0&&ve(h[n+12>>2]),N=n+32|0,0|e},lb:function(e,t,i){var n,r,s=0;N=n=N-16|0,fe(n,e|=0,t|=0,i|=0),h[e+24>>2]=h[n>>2];e:if((0|(r=e+24|0))!=(0|n))if(t=4|n,i=(s=d[n+15|0])<<24>>24,a[11+(e=e+28|0)|0]>=0){if((0|i)>=0){i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,h[e+8>>2]=h[t+8>>2];break e}nn(e,h[n+4>>2],h[n+8>>2])}else Xi(e,(e=(0|i)<0)?h[n+4>>2]:t,e?h[n+8>>2]:s);return a[n+15|0]<0&&ve(h[n+4>>2]),N=n+16|0,0|r},mb:function(e,t,i){var n,r,s=0;N=n=N-16|0,Ae(n,e|=0,t|=0,i|=0),h[e+24>>2]=h[n>>2];e:if((0|(r=e+24|0))!=(0|n))if(t=4|n,i=(s=d[n+15|0])<<24>>24,a[11+(e=e+28|0)|0]>=0){if((0|i)>=0){i=h[t+4>>2],h[e>>2]=h[t>>2],h[e+4>>2]=i,h[e+8>>2]=h[t+8>>2];break e}nn(e,h[n+4>>2],h[n+8>>2])}else Xi(e,(e=(0|i)<0)?h[n+4>>2]:t,e?h[n+8>>2]:s);return a[n+15|0]<0&&ve(h[n+4>>2]),N=n+16|0,0|r},nb:function(e){(e|=0)&&(a[e+39|0]<0&&ve(h[e+28>>2]),Cn(e+12|0,h[e+16>>2]),vn(e,h[e+4>>2]),ve(e))},ob:yr,pb:Er,qb:Ar,rb:wr,sb:yr,tb:Er,ub:Ar,vb:wr,wb:br,xb:_r,yb:yr,zb:Er,Ab:Ar,Bb:Er,Cb:Ar,Db:wr,Eb:br,Fb:_r,Gb:function(){return 5},Hb:function(){return 6},Ib:function(){return 7},Jb:function(){return 8},Kb:function(){return 9},Lb:function(){return 10},Mb:function(){return 11},Nb:function(){return 12},Ob:Er,Pb:yr,Qb:function(){return-2},Rb:function(){return-3},Sb:function(){return-4},Tb:function(){return-5},Ub:F,Vb:ve}}(e)}(ce)},instantiate:function(e,t){return{then:function(t){var i=new T.Module(e);t({instance:new T.Instance(i)})}}},RuntimeError:Error};A=[],"object"!=typeof T&&Y("no native wasm support detected");var x=!1;function M(e,t){e||Y(t)}var R,P,C,D,O="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e,t,i){for(var n=t+i,r=t;e[r]&&!(r>=n);)++r;if(r-t>16&&e.subarray&&O)return O.decode(e.subarray(t,r));for(var a="";t<r;){var s=e[t++];if(128&s){var o=63&e[t++];if(192!=(224&s)){var l=63&e[t++];if((s=224==(240&s)?(15&s)<<12|o<<6|l:(7&s)<<18|o<<12|l<<6|63&e[t++])<65536)a+=String.fromCharCode(s);else{var c=s-65536;a+=String.fromCharCode(55296|c>>10,56320|1023&c)}}else a+=String.fromCharCode((31&s)<<6|o)}else a+=String.fromCharCode(s)}return a}function I(e,t){return e?k(C,e,t):""}function N(e){R=e,a.HEAP8=P=new Int8Array(e),a.HEAP16=new Int16Array(e),a.HEAP32=D=new Int32Array(e),a.HEAPU8=C=new Uint8Array(e),a.HEAPU16=new Uint16Array(e),a.HEAPU32=new Uint32Array(e),a.HEAPF32=new Float32Array(e),a.HEAPF64=new Float64Array(e)}var L,U=a.INITIAL_MEMORY||16777216;(S=a.wasmMemory?a.wasmMemory:new T.Memory({initial:U/65536,maximum:32768}))&&(R=S.buffer),U=R.byteLength,N(R);var B=[],F=[],G=[],V=!1;function z(e){F.unshift(e)}var H=0,j=null,W=null;function Y(e){a.onAbort&&a.onAbort(e),w(e="Aborted("+e+")"),x=!0,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new T.RuntimeError(e);throw r(t),t}a.preloadedImages={},a.preloadedAudios={};var X,Z,q="data:application/octet-stream;base64,";function Q(e){return e.startsWith(q)}function K(e){return e.startsWith("file://")}function J(e){try{if(e==X&&A)return new Uint8Array(A);var t=oe(e);if(t)return t;if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){Y(e)}}function $(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var i=t.func;"number"==typeof i?void 0===t.arg?te(i)():te(i)(t.arg):i(void 0===t.arg?null:t.arg)}else t(a)}}Q(X="draco_decoder.wasm")||(Z=X,X=a.locateFile?a.locateFile(Z,y):y+Z);var ee=[];function te(e){var t=ee[e];return t||(e>=ee.length&&(ee.length=e+1),ee[e]=t=L.get(e)),t}function ie(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){D[this.ptr+4>>2]=e},this.get_type=function(){return D[this.ptr+4>>2]},this.set_destructor=function(e){D[this.ptr+8>>2]=e},this.get_destructor=function(){return D[this.ptr+8>>2]},this.set_refcount=function(e){D[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,P[this.ptr+12>>0]=e},this.get_caught=function(){return 0!=P[this.ptr+12>>0]},this.set_rethrown=function(e){e=e?1:0,P[this.ptr+13>>0]=e},this.get_rethrown=function(){return 0!=P[this.ptr+13>>0]},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=D[this.ptr>>2];D[this.ptr>>2]=e+1},this.release_ref=function(){var e=D[this.ptr>>2];return D[this.ptr>>2]=e-1,1===e}}function ne(e){try{return S.grow(e-R.byteLength+65535>>>16),N(S.buffer),1}catch(e){}}var re={mappings:{},buffers:[null,[],[]],printChar:function(e,t){var i=re.buffers[e];0===t||10===t?((1===e?E:w)(k(i,0)),i.length=0):i.push(t)},varargs:void 0,get:function(){return re.varargs+=4,D[re.varargs-4>>2]},getStr:function(e){return I(e)},get64:function(e,t){return e}},ae=!1,se="function"==typeof atob?atob:function(e){var t,i,n,r,a,s,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=o.indexOf(e.charAt(c++))<<2|(r=o.indexOf(e.charAt(c++)))>>4,i=(15&r)<<4|(a=o.indexOf(e.charAt(c++)))>>2,n=(3&a)<<6|(s=o.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==a&&(l+=String.fromCharCode(i)),64!==s&&(l+=String.fromCharCode(n))}while(c<e.length);return l};function oe(e){if(Q(e))return function(e){if("boolean"==typeof _&&_){var t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}try{for(var i=se(e),n=new Uint8Array(i.length),r=0;r<i.length;++r)n[r]=i.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}(e.slice(q.length))}var le,ce={i:function(e){return Wi(e+16)+16},h:function(e,t,i){throw new ie(e).init(t,i),e},b:function(){Y("")},g:function(e,t,i){C.copyWithin(e,t,t+i)},e:function(e){var t,i=C.length,n=2147483648;if((e>>>=0)>n)return!1;for(var r=1;r<=4;r*=2){var a=i*(1+.2/r);if(a=Math.min(a,e+100663296),ne(Math.min(n,((t=Math.max(e,a))%65536>0&&(t+=65536-t%65536),t))))return!0}return!1},f:function(e){return 0},d:function(e,t,i,n,r){},c:function(e,t,i,n){for(var r=0,a=0;a<i;a++){var s=D[t>>2],o=D[t+4>>2];t+=8;for(var l=0;l<o;l++)re.printChar(e,C[s+l]);r+=o}return D[n>>2]=r,0},a:S},ue=(function(){var e={a:ce};function t(e,t){var i=e.exports;a.asm=i,L=a.asm.k,z(a.asm.j),function(e){if(H--,a.monitorRunDependencies&&a.monitorRunDependencies(H),0==H&&(null!==j&&(clearInterval(j),j=null),W)){var t=W;W=null,t()}}()}function i(e){t(e.instance)}function n(t){return function(){if(!A&&(v||b)){if("function"==typeof fetch&&!K(X))return fetch(X,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+X+"'";return e.arrayBuffer()})).catch((function(){return J(X)}));if(u)return new Promise((function(e,t){u(X,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return J(X)}))}().then((function(t){return T.instantiate(t,e)})).then((function(e){return e})).then(t,(function(e){w("failed to asynchronously prepare wasm: "+e),Y(e)}))}if(H++,a.monitorRunDependencies&&a.monitorRunDependencies(H),a.instantiateWasm)try{return a.instantiateWasm(e,t)}catch(e){return w("Module.instantiateWasm callback failed with error: "+e),!1}(A||"function"!=typeof T.instantiateStreaming||Q(X)||K(X)||"function"!=typeof fetch?n(i):fetch(X,{credentials:"same-origin"}).then((function(t){return T.instantiateStreaming(t,e).then(i,(function(e){return w("wasm streaming compile failed: "+e),w("falling back to ArrayBuffer instantiation"),n(i)}))}))).catch(r)}(),a.___wasm_call_ctors=function(){return(a.___wasm_call_ctors=a.asm.j).apply(null,arguments)},a._emscripten_bind_VoidPtr___destroy___0=function(){return(ue=a._emscripten_bind_VoidPtr___destroy___0=a.asm.l).apply(null,arguments)}),he=a._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(he=a._emscripten_bind_DecoderBuffer_DecoderBuffer_0=a.asm.m).apply(null,arguments)},de=a._emscripten_bind_DecoderBuffer_Init_2=function(){return(de=a._emscripten_bind_DecoderBuffer_Init_2=a.asm.n).apply(null,arguments)},fe=a._emscripten_bind_DecoderBuffer___destroy___0=function(){return(fe=a._emscripten_bind_DecoderBuffer___destroy___0=a.asm.o).apply(null,arguments)},pe=a._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(pe=a._emscripten_bind_AttributeTransformData_AttributeTransformData_0=a.asm.p).apply(null,arguments)},me=a._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(me=a._emscripten_bind_AttributeTransformData_transform_type_0=a.asm.q).apply(null,arguments)},ge=a._emscripten_bind_AttributeTransformData___destroy___0=function(){return(ge=a._emscripten_bind_AttributeTransformData___destroy___0=a.asm.r).apply(null,arguments)},ve=a._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(ve=a._emscripten_bind_GeometryAttribute_GeometryAttribute_0=a.asm.s).apply(null,arguments)},be=a._emscripten_bind_GeometryAttribute___destroy___0=function(){return(be=a._emscripten_bind_GeometryAttribute___destroy___0=a.asm.t).apply(null,arguments)},_e=a._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(_e=a._emscripten_bind_PointAttribute_PointAttribute_0=a.asm.u).apply(null,arguments)},ye=a._emscripten_bind_PointAttribute_size_0=function(){return(ye=a._emscripten_bind_PointAttribute_size_0=a.asm.v).apply(null,arguments)},Ae=a._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(Ae=a._emscripten_bind_PointAttribute_GetAttributeTransformData_0=a.asm.w).apply(null,arguments)},Ee=a._emscripten_bind_PointAttribute_attribute_type_0=function(){return(Ee=a._emscripten_bind_PointAttribute_attribute_type_0=a.asm.x).apply(null,arguments)},we=a._emscripten_bind_PointAttribute_data_type_0=function(){return(we=a._emscripten_bind_PointAttribute_data_type_0=a.asm.y).apply(null,arguments)},Se=a._emscripten_bind_PointAttribute_num_components_0=function(){return(Se=a._emscripten_bind_PointAttribute_num_components_0=a.asm.z).apply(null,arguments)},Te=a._emscripten_bind_PointAttribute_normalized_0=function(){return(Te=a._emscripten_bind_PointAttribute_normalized_0=a.asm.A).apply(null,arguments)},xe=a._emscripten_bind_PointAttribute_byte_stride_0=function(){return(xe=a._emscripten_bind_PointAttribute_byte_stride_0=a.asm.B).apply(null,arguments)},Me=a._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Me=a._emscripten_bind_PointAttribute_byte_offset_0=a.asm.C).apply(null,arguments)},Re=a._emscripten_bind_PointAttribute_unique_id_0=function(){return(Re=a._emscripten_bind_PointAttribute_unique_id_0=a.asm.D).apply(null,arguments)},Pe=a._emscripten_bind_PointAttribute___destroy___0=function(){return(Pe=a._emscripten_bind_PointAttribute___destroy___0=a.asm.E).apply(null,arguments)},Ce=a._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(Ce=a._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=a.asm.F).apply(null,arguments)},De=a._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(De=a._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=a.asm.G).apply(null,arguments)},Oe=a._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Oe=a._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=a.asm.H).apply(null,arguments)},ke=a._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(ke=a._emscripten_bind_AttributeQuantizationTransform_min_value_1=a.asm.I).apply(null,arguments)},Ie=a._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(Ie=a._emscripten_bind_AttributeQuantizationTransform_range_0=a.asm.J).apply(null,arguments)},Ne=a._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(Ne=a._emscripten_bind_AttributeQuantizationTransform___destroy___0=a.asm.K).apply(null,arguments)},Le=a._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(Le=a._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=a.asm.L).apply(null,arguments)},Ue=a._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(Ue=a._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=a.asm.M).apply(null,arguments)},Be=a._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(Be=a._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=a.asm.N).apply(null,arguments)},Fe=a._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(Fe=a._emscripten_bind_AttributeOctahedronTransform___destroy___0=a.asm.O).apply(null,arguments)},Ge=a._emscripten_bind_PointCloud_PointCloud_0=function(){return(Ge=a._emscripten_bind_PointCloud_PointCloud_0=a.asm.P).apply(null,arguments)},Ve=a._emscripten_bind_PointCloud_num_attributes_0=function(){return(Ve=a._emscripten_bind_PointCloud_num_attributes_0=a.asm.Q).apply(null,arguments)},ze=a._emscripten_bind_PointCloud_num_points_0=function(){return(ze=a._emscripten_bind_PointCloud_num_points_0=a.asm.R).apply(null,arguments)},He=a._emscripten_bind_PointCloud___destroy___0=function(){return(He=a._emscripten_bind_PointCloud___destroy___0=a.asm.S).apply(null,arguments)},je=a._emscripten_bind_Mesh_Mesh_0=function(){return(je=a._emscripten_bind_Mesh_Mesh_0=a.asm.T).apply(null,arguments)},We=a._emscripten_bind_Mesh_num_faces_0=function(){return(We=a._emscripten_bind_Mesh_num_faces_0=a.asm.U).apply(null,arguments)},Ye=a._emscripten_bind_Mesh_num_attributes_0=function(){return(Ye=a._emscripten_bind_Mesh_num_attributes_0=a.asm.V).apply(null,arguments)},Xe=a._emscripten_bind_Mesh_num_points_0=function(){return(Xe=a._emscripten_bind_Mesh_num_points_0=a.asm.W).apply(null,arguments)},Ze=a._emscripten_bind_Mesh___destroy___0=function(){return(Ze=a._emscripten_bind_Mesh___destroy___0=a.asm.X).apply(null,arguments)},qe=a._emscripten_bind_Metadata_Metadata_0=function(){return(qe=a._emscripten_bind_Metadata_Metadata_0=a.asm.Y).apply(null,arguments)},Qe=a._emscripten_bind_Metadata___destroy___0=function(){return(Qe=a._emscripten_bind_Metadata___destroy___0=a.asm.Z).apply(null,arguments)},Ke=a._emscripten_bind_Status_code_0=function(){return(Ke=a._emscripten_bind_Status_code_0=a.asm._).apply(null,arguments)},Je=a._emscripten_bind_Status_ok_0=function(){return(Je=a._emscripten_bind_Status_ok_0=a.asm.$).apply(null,arguments)},$e=a._emscripten_bind_Status_error_msg_0=function(){return($e=a._emscripten_bind_Status_error_msg_0=a.asm.aa).apply(null,arguments)},et=a._emscripten_bind_Status___destroy___0=function(){return(et=a._emscripten_bind_Status___destroy___0=a.asm.ba).apply(null,arguments)},tt=a._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(tt=a._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=a.asm.ca).apply(null,arguments)},it=a._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(it=a._emscripten_bind_DracoFloat32Array_GetValue_1=a.asm.da).apply(null,arguments)},nt=a._emscripten_bind_DracoFloat32Array_size_0=function(){return(nt=a._emscripten_bind_DracoFloat32Array_size_0=a.asm.ea).apply(null,arguments)},rt=a._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(rt=a._emscripten_bind_DracoFloat32Array___destroy___0=a.asm.fa).apply(null,arguments)},at=a._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(at=a._emscripten_bind_DracoInt8Array_DracoInt8Array_0=a.asm.ga).apply(null,arguments)},st=a._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(st=a._emscripten_bind_DracoInt8Array_GetValue_1=a.asm.ha).apply(null,arguments)},ot=a._emscripten_bind_DracoInt8Array_size_0=function(){return(ot=a._emscripten_bind_DracoInt8Array_size_0=a.asm.ia).apply(null,arguments)},lt=a._emscripten_bind_DracoInt8Array___destroy___0=function(){return(lt=a._emscripten_bind_DracoInt8Array___destroy___0=a.asm.ja).apply(null,arguments)},ct=a._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(ct=a._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=a.asm.ka).apply(null,arguments)},ut=a._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(ut=a._emscripten_bind_DracoUInt8Array_GetValue_1=a.asm.la).apply(null,arguments)},ht=a._emscripten_bind_DracoUInt8Array_size_0=function(){return(ht=a._emscripten_bind_DracoUInt8Array_size_0=a.asm.ma).apply(null,arguments)},dt=a._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(dt=a._emscripten_bind_DracoUInt8Array___destroy___0=a.asm.na).apply(null,arguments)},ft=a._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(ft=a._emscripten_bind_DracoInt16Array_DracoInt16Array_0=a.asm.oa).apply(null,arguments)},pt=a._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(pt=a._emscripten_bind_DracoInt16Array_GetValue_1=a.asm.pa).apply(null,arguments)},mt=a._emscripten_bind_DracoInt16Array_size_0=function(){return(mt=a._emscripten_bind_DracoInt16Array_size_0=a.asm.qa).apply(null,arguments)},gt=a._emscripten_bind_DracoInt16Array___destroy___0=function(){return(gt=a._emscripten_bind_DracoInt16Array___destroy___0=a.asm.ra).apply(null,arguments)},vt=a._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(vt=a._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=a.asm.sa).apply(null,arguments)},bt=a._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(bt=a._emscripten_bind_DracoUInt16Array_GetValue_1=a.asm.ta).apply(null,arguments)},_t=a._emscripten_bind_DracoUInt16Array_size_0=function(){return(_t=a._emscripten_bind_DracoUInt16Array_size_0=a.asm.ua).apply(null,arguments)},yt=a._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(yt=a._emscripten_bind_DracoUInt16Array___destroy___0=a.asm.va).apply(null,arguments)},At=a._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(At=a._emscripten_bind_DracoInt32Array_DracoInt32Array_0=a.asm.wa).apply(null,arguments)},Et=a._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(Et=a._emscripten_bind_DracoInt32Array_GetValue_1=a.asm.xa).apply(null,arguments)},wt=a._emscripten_bind_DracoInt32Array_size_0=function(){return(wt=a._emscripten_bind_DracoInt32Array_size_0=a.asm.ya).apply(null,arguments)},St=a._emscripten_bind_DracoInt32Array___destroy___0=function(){return(St=a._emscripten_bind_DracoInt32Array___destroy___0=a.asm.za).apply(null,arguments)},Tt=a._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(Tt=a._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=a.asm.Aa).apply(null,arguments)},xt=a._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(xt=a._emscripten_bind_DracoUInt32Array_GetValue_1=a.asm.Ba).apply(null,arguments)},Mt=a._emscripten_bind_DracoUInt32Array_size_0=function(){return(Mt=a._emscripten_bind_DracoUInt32Array_size_0=a.asm.Ca).apply(null,arguments)},Rt=a._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(Rt=a._emscripten_bind_DracoUInt32Array___destroy___0=a.asm.Da).apply(null,arguments)},Pt=a._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(Pt=a._emscripten_bind_MetadataQuerier_MetadataQuerier_0=a.asm.Ea).apply(null,arguments)},Ct=a._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(Ct=a._emscripten_bind_MetadataQuerier_HasEntry_2=a.asm.Fa).apply(null,arguments)},Dt=a._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(Dt=a._emscripten_bind_MetadataQuerier_GetIntEntry_2=a.asm.Ga).apply(null,arguments)},Ot=a._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Ot=a._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=a.asm.Ha).apply(null,arguments)},kt=a._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(kt=a._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=a.asm.Ia).apply(null,arguments)},It=a._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(It=a._emscripten_bind_MetadataQuerier_GetStringEntry_2=a.asm.Ja).apply(null,arguments)},Nt=a._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(Nt=a._emscripten_bind_MetadataQuerier_NumEntries_1=a.asm.Ka).apply(null,arguments)},Lt=a._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(Lt=a._emscripten_bind_MetadataQuerier_GetEntryName_2=a.asm.La).apply(null,arguments)},Ut=a._emscripten_bind_MetadataQuerier___destroy___0=function(){return(Ut=a._emscripten_bind_MetadataQuerier___destroy___0=a.asm.Ma).apply(null,arguments)},Bt=a._emscripten_bind_Decoder_Decoder_0=function(){return(Bt=a._emscripten_bind_Decoder_Decoder_0=a.asm.Na).apply(null,arguments)},Ft=a._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Ft=a._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=a.asm.Oa).apply(null,arguments)},Gt=a._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(Gt=a._emscripten_bind_Decoder_DecodeArrayToMesh_3=a.asm.Pa).apply(null,arguments)},Vt=a._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Vt=a._emscripten_bind_Decoder_GetAttributeId_2=a.asm.Qa).apply(null,arguments)},zt=a._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(zt=a._emscripten_bind_Decoder_GetAttributeIdByName_2=a.asm.Ra).apply(null,arguments)},Ht=a._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(Ht=a._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=a.asm.Sa).apply(null,arguments)},jt=a._emscripten_bind_Decoder_GetAttribute_2=function(){return(jt=a._emscripten_bind_Decoder_GetAttribute_2=a.asm.Ta).apply(null,arguments)},Wt=a._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(Wt=a._emscripten_bind_Decoder_GetAttributeByUniqueId_2=a.asm.Ua).apply(null,arguments)},Yt=a._emscripten_bind_Decoder_GetMetadata_1=function(){return(Yt=a._emscripten_bind_Decoder_GetMetadata_1=a.asm.Va).apply(null,arguments)},Xt=a._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(Xt=a._emscripten_bind_Decoder_GetAttributeMetadata_2=a.asm.Wa).apply(null,arguments)},Zt=a._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Zt=a._emscripten_bind_Decoder_GetFaceFromMesh_3=a.asm.Xa).apply(null,arguments)},qt=a._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(qt=a._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=a.asm.Ya).apply(null,arguments)},Qt=a._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(Qt=a._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=a.asm.Za).apply(null,arguments)},Kt=a._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(Kt=a._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=a.asm._a).apply(null,arguments)},Jt=a._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(Jt=a._emscripten_bind_Decoder_GetAttributeFloat_3=a.asm.$a).apply(null,arguments)},$t=a._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return($t=a._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=a.asm.ab).apply(null,arguments)},ei=a._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(ei=a._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=a.asm.bb).apply(null,arguments)},ti=a._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(ti=a._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=a.asm.cb).apply(null,arguments)},ii=a._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(ii=a._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=a.asm.db).apply(null,arguments)},ni=a._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(ni=a._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=a.asm.eb).apply(null,arguments)},ri=a._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(ri=a._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=a.asm.fb).apply(null,arguments)},ai=a._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(ai=a._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=a.asm.gb).apply(null,arguments)},si=a._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(si=a._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=a.asm.hb).apply(null,arguments)},oi=a._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(oi=a._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=a.asm.ib).apply(null,arguments)},li=a._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(li=a._emscripten_bind_Decoder_SkipAttributeTransform_1=a.asm.jb).apply(null,arguments)},ci=a._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(ci=a._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=a.asm.kb).apply(null,arguments)},ui=a._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(ui=a._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=a.asm.lb).apply(null,arguments)},hi=a._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(hi=a._emscripten_bind_Decoder_DecodeBufferToMesh_2=a.asm.mb).apply(null,arguments)},di=a._emscripten_bind_Decoder___destroy___0=function(){return(di=a._emscripten_bind_Decoder___destroy___0=a.asm.nb).apply(null,arguments)},fi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(fi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=a.asm.ob).apply(null,arguments)},pi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(pi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=a.asm.pb).apply(null,arguments)},mi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(mi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=a.asm.qb).apply(null,arguments)},gi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(gi=a._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=a.asm.rb).apply(null,arguments)},vi=a._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(vi=a._emscripten_enum_draco_GeometryAttribute_Type_INVALID=a.asm.sb).apply(null,arguments)},bi=a._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(bi=a._emscripten_enum_draco_GeometryAttribute_Type_POSITION=a.asm.tb).apply(null,arguments)},_i=a._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(_i=a._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=a.asm.ub).apply(null,arguments)},yi=a._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(yi=a._emscripten_enum_draco_GeometryAttribute_Type_COLOR=a.asm.vb).apply(null,arguments)},Ai=a._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Ai=a._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=a.asm.wb).apply(null,arguments)},Ei=a._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Ei=a._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=a.asm.xb).apply(null,arguments)},wi=a._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(wi=a._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=a.asm.yb).apply(null,arguments)},Si=a._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(Si=a._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=a.asm.zb).apply(null,arguments)},Ti=a._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Ti=a._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=a.asm.Ab).apply(null,arguments)},xi=a._emscripten_enum_draco_DataType_DT_INVALID=function(){return(xi=a._emscripten_enum_draco_DataType_DT_INVALID=a.asm.Bb).apply(null,arguments)},Mi=a._emscripten_enum_draco_DataType_DT_INT8=function(){return(Mi=a._emscripten_enum_draco_DataType_DT_INT8=a.asm.Cb).apply(null,arguments)},Ri=a._emscripten_enum_draco_DataType_DT_UINT8=function(){return(Ri=a._emscripten_enum_draco_DataType_DT_UINT8=a.asm.Db).apply(null,arguments)},Pi=a._emscripten_enum_draco_DataType_DT_INT16=function(){return(Pi=a._emscripten_enum_draco_DataType_DT_INT16=a.asm.Eb).apply(null,arguments)},Ci=a._emscripten_enum_draco_DataType_DT_UINT16=function(){return(Ci=a._emscripten_enum_draco_DataType_DT_UINT16=a.asm.Fb).apply(null,arguments)},Di=a._emscripten_enum_draco_DataType_DT_INT32=function(){return(Di=a._emscripten_enum_draco_DataType_DT_INT32=a.asm.Gb).apply(null,arguments)},Oi=a._emscripten_enum_draco_DataType_DT_UINT32=function(){return(Oi=a._emscripten_enum_draco_DataType_DT_UINT32=a.asm.Hb).apply(null,arguments)},ki=a._emscripten_enum_draco_DataType_DT_INT64=function(){return(ki=a._emscripten_enum_draco_DataType_DT_INT64=a.asm.Ib).apply(null,arguments)},Ii=a._emscripten_enum_draco_DataType_DT_UINT64=function(){return(Ii=a._emscripten_enum_draco_DataType_DT_UINT64=a.asm.Jb).apply(null,arguments)},Ni=a._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(Ni=a._emscripten_enum_draco_DataType_DT_FLOAT32=a.asm.Kb).apply(null,arguments)},Li=a._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(Li=a._emscripten_enum_draco_DataType_DT_FLOAT64=a.asm.Lb).apply(null,arguments)},Ui=a._emscripten_enum_draco_DataType_DT_BOOL=function(){return(Ui=a._emscripten_enum_draco_DataType_DT_BOOL=a.asm.Mb).apply(null,arguments)},Bi=a._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(Bi=a._emscripten_enum_draco_DataType_DT_TYPES_COUNT=a.asm.Nb).apply(null,arguments)},Fi=a._emscripten_enum_draco_StatusCode_OK=function(){return(Fi=a._emscripten_enum_draco_StatusCode_OK=a.asm.Ob).apply(null,arguments)},Gi=a._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(Gi=a._emscripten_enum_draco_StatusCode_DRACO_ERROR=a.asm.Pb).apply(null,arguments)},Vi=a._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(Vi=a._emscripten_enum_draco_StatusCode_IO_ERROR=a.asm.Qb).apply(null,arguments)},zi=a._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(zi=a._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=a.asm.Rb).apply(null,arguments)},Hi=a._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(Hi=a._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=a.asm.Sb).apply(null,arguments)},ji=a._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(ji=a._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=a.asm.Tb).apply(null,arguments)},Wi=a._malloc=function(){return(Wi=a._malloc=a.asm.Ub).apply(null,arguments)};function Yi(e){function i(){le||(le=!0,a.calledRun=!0,x||(V=!0,$(F),t(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),function(){if(a.postRun)for("function"==typeof a.postRun&&(a.postRun=[a.postRun]);a.postRun.length;)e=a.postRun.shift(),G.unshift(e);var e;$(G)}()))}e=e||g,H>0||(function(){if(a.preRun)for("function"==typeof a.preRun&&(a.preRun=[a.preRun]);a.preRun.length;)e=a.preRun.shift(),B.unshift(e);var e;$(B)}(),H>0||(a.setStatus?(a.setStatus("Running..."),setTimeout((function(){setTimeout((function(){a.setStatus("")}),1),i()}),1)):i()))}if(a._free=function(){return(a._free=a.asm.Vb).apply(null,arguments)},W=function e(){le||Yi(),le||(W=e)},a.run=Yi,a.preInit)for("function"==typeof a.preInit&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();function Xi(){}function Zi(e){return(e||Xi).__cache__}function qi(e,t){var i=Zi(t),n=i[e];return n||((n=Object.create((t||Xi).prototype)).ptr=e,i[e]=n)}Yi(),Xi.prototype=Object.create(Xi.prototype),Xi.prototype.constructor=Xi,Xi.prototype.__class__=Xi,Xi.__cache__={},a.WrapperObject=Xi,a.getCache=Zi,a.wrapPointer=qi,a.castObject=function(e,t){return qi(e.ptr,t)},a.NULL=qi(0),a.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete Zi(e.__class__)[e.ptr]},a.compare=function(e,t){return e.ptr===t.ptr},a.getPointer=function(e){return e.ptr},a.getClass=function(e){return e.__class__};var Qi={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Qi.needed){for(var e=0;e<Qi.temps.length;e++)a._free(Qi.temps[e]);Qi.temps.length=0,a._free(Qi.buffer),Qi.buffer=0,Qi.size+=Qi.needed,Qi.needed=0}Qi.buffer||(Qi.size+=128,Qi.buffer=a._malloc(Qi.size),M(Qi.buffer)),Qi.pos=0},alloc:function(e,t){M(Qi.buffer);var i,n=t.BYTES_PER_ELEMENT,r=e.length*n;return r=r+7&-8,Qi.pos+r>=Qi.size?(M(r>0),Qi.needed+=r,i=a._malloc(r),Qi.temps.push(i)):(i=Qi.buffer+Qi.pos,Qi.pos+=r),i},copy:function(e,t,i){switch(i>>>=0,t.BYTES_PER_ELEMENT){case 2:i>>>=1;break;case 4:i>>>=2;break;case 8:i>>>=3}for(var n=0;n<e.length;n++)t[i+n]=e[n]}};function Ki(e){if("string"==typeof e){var t=(r=function(e){for(var t=0,i=0;i<e.length;++i){var n=e.charCodeAt(i);n>=55296&&n<=57343&&(n=65536+((1023&n)<<10)|1023&e.charCodeAt(++i)),n<=127?++t:t+=n<=2047?2:n<=65535?3:4}return t}(n=e)+1,function(e,t,i,n){if(!(n>0))return 0;for(var r=i,a=i+n-1,s=0;s<e.length;++s){var o=e.charCodeAt(s);if(o>=55296&&o<=57343&&(o=65536+((1023&o)<<10)|1023&e.charCodeAt(++s)),o<=127){if(i>=a)break;t[i++]=o}else if(o<=2047){if(i+1>=a)break;t[i++]=192|o>>6,t[i++]=128|63&o}else if(o<=65535){if(i+2>=a)break;t[i++]=224|o>>12,t[i++]=128|o>>6&63,t[i++]=128|63&o}else{if(i+3>=a)break;t[i++]=240|o>>18,t[i++]=128|o>>12&63,t[i++]=128|o>>6&63,t[i++]=128|63&o}}return t[i]=0,i-r}(n,a=new Array(r),0,a.length),a),i=Qi.alloc(t,P);return Qi.copy(t,P,i),i}var n,r,a;return e}function Ji(e){if("object"==typeof e){var t=Qi.alloc(e,P);return Qi.copy(e,P,t),t}return e}function $i(){throw"cannot construct a VoidPtr, no constructor in IDL"}function en(){this.ptr=he(),Zi(en)[this.ptr]=this}function tn(){this.ptr=pe(),Zi(tn)[this.ptr]=this}function nn(){this.ptr=ve(),Zi(nn)[this.ptr]=this}function rn(){this.ptr=_e(),Zi(rn)[this.ptr]=this}function an(){this.ptr=Ce(),Zi(an)[this.ptr]=this}function sn(){this.ptr=Le(),Zi(sn)[this.ptr]=this}function on(){this.ptr=Ge(),Zi(on)[this.ptr]=this}function ln(){this.ptr=je(),Zi(ln)[this.ptr]=this}function cn(){this.ptr=qe(),Zi(cn)[this.ptr]=this}function un(){throw"cannot construct a Status, no constructor in IDL"}function hn(){this.ptr=tt(),Zi(hn)[this.ptr]=this}function dn(){this.ptr=at(),Zi(dn)[this.ptr]=this}function fn(){this.ptr=ct(),Zi(fn)[this.ptr]=this}function pn(){this.ptr=ft(),Zi(pn)[this.ptr]=this}function mn(){this.ptr=vt(),Zi(mn)[this.ptr]=this}function gn(){this.ptr=At(),Zi(gn)[this.ptr]=this}function vn(){this.ptr=Tt(),Zi(vn)[this.ptr]=this}function bn(){this.ptr=Pt(),Zi(bn)[this.ptr]=this}function _n(){this.ptr=Bt(),Zi(_n)[this.ptr]=this}return $i.prototype=Object.create(Xi.prototype),$i.prototype.constructor=$i,$i.prototype.__class__=$i,$i.__cache__={},a.VoidPtr=$i,$i.prototype.__destroy__=$i.prototype.__destroy__=function(){var e=this.ptr;ue(e)},en.prototype=Object.create(Xi.prototype),en.prototype.constructor=en,en.prototype.__class__=en,en.__cache__={},a.DecoderBuffer=en,en.prototype.Init=en.prototype.Init=function(e,t){var i=this.ptr;Qi.prepare(),"object"==typeof e&&(e=Ji(e)),t&&"object"==typeof t&&(t=t.ptr),de(i,e,t)},en.prototype.__destroy__=en.prototype.__destroy__=function(){var e=this.ptr;fe(e)},tn.prototype=Object.create(Xi.prototype),tn.prototype.constructor=tn,tn.prototype.__class__=tn,tn.__cache__={},a.AttributeTransformData=tn,tn.prototype.transform_type=tn.prototype.transform_type=function(){var e=this.ptr;return me(e)},tn.prototype.__destroy__=tn.prototype.__destroy__=function(){var e=this.ptr;ge(e)},nn.prototype=Object.create(Xi.prototype),nn.prototype.constructor=nn,nn.prototype.__class__=nn,nn.__cache__={},a.GeometryAttribute=nn,nn.prototype.__destroy__=nn.prototype.__destroy__=function(){var e=this.ptr;be(e)},rn.prototype=Object.create(Xi.prototype),rn.prototype.constructor=rn,rn.prototype.__class__=rn,rn.__cache__={},a.PointAttribute=rn,rn.prototype.size=rn.prototype.size=function(){var e=this.ptr;return ye(e)},rn.prototype.GetAttributeTransformData=rn.prototype.GetAttributeTransformData=function(){var e=this.ptr;return qi(Ae(e),tn)},rn.prototype.attribute_type=rn.prototype.attribute_type=function(){var e=this.ptr;return Ee(e)},rn.prototype.data_type=rn.prototype.data_type=function(){var e=this.ptr;return we(e)},rn.prototype.num_components=rn.prototype.num_components=function(){var e=this.ptr;return Se(e)},rn.prototype.normalized=rn.prototype.normalized=function(){var e=this.ptr;return!!Te(e)},rn.prototype.byte_stride=rn.prototype.byte_stride=function(){var e=this.ptr;return xe(e)},rn.prototype.byte_offset=rn.prototype.byte_offset=function(){var e=this.ptr;return Me(e)},rn.prototype.unique_id=rn.prototype.unique_id=function(){var e=this.ptr;return Re(e)},rn.prototype.__destroy__=rn.prototype.__destroy__=function(){var e=this.ptr;Pe(e)},an.prototype=Object.create(Xi.prototype),an.prototype.constructor=an,an.prototype.__class__=an,an.__cache__={},a.AttributeQuantizationTransform=an,an.prototype.InitFromAttribute=an.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!De(t,e)},an.prototype.quantization_bits=an.prototype.quantization_bits=function(){var e=this.ptr;return Oe(e)},an.prototype.min_value=an.prototype.min_value=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ke(t,e)},an.prototype.range=an.prototype.range=function(){var e=this.ptr;return Ie(e)},an.prototype.__destroy__=an.prototype.__destroy__=function(){var e=this.ptr;Ne(e)},sn.prototype=Object.create(Xi.prototype),sn.prototype.constructor=sn,sn.prototype.__class__=sn,sn.__cache__={},a.AttributeOctahedronTransform=sn,sn.prototype.InitFromAttribute=sn.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!Ue(t,e)},sn.prototype.quantization_bits=sn.prototype.quantization_bits=function(){var e=this.ptr;return Be(e)},sn.prototype.__destroy__=sn.prototype.__destroy__=function(){var e=this.ptr;Fe(e)},on.prototype=Object.create(Xi.prototype),on.prototype.constructor=on,on.prototype.__class__=on,on.__cache__={},a.PointCloud=on,on.prototype.num_attributes=on.prototype.num_attributes=function(){var e=this.ptr;return Ve(e)},on.prototype.num_points=on.prototype.num_points=function(){var e=this.ptr;return ze(e)},on.prototype.__destroy__=on.prototype.__destroy__=function(){var e=this.ptr;He(e)},ln.prototype=Object.create(Xi.prototype),ln.prototype.constructor=ln,ln.prototype.__class__=ln,ln.__cache__={},a.Mesh=ln,ln.prototype.num_faces=ln.prototype.num_faces=function(){var e=this.ptr;return We(e)},ln.prototype.num_attributes=ln.prototype.num_attributes=function(){var e=this.ptr;return Ye(e)},ln.prototype.num_points=ln.prototype.num_points=function(){var e=this.ptr;return Xe(e)},ln.prototype.__destroy__=ln.prototype.__destroy__=function(){var e=this.ptr;Ze(e)},cn.prototype=Object.create(Xi.prototype),cn.prototype.constructor=cn,cn.prototype.__class__=cn,cn.__cache__={},a.Metadata=cn,cn.prototype.__destroy__=cn.prototype.__destroy__=function(){var e=this.ptr;Qe(e)},un.prototype=Object.create(Xi.prototype),un.prototype.constructor=un,un.prototype.__class__=un,un.__cache__={},a.Status=un,un.prototype.code=un.prototype.code=function(){var e=this.ptr;return Ke(e)},un.prototype.ok=un.prototype.ok=function(){var e=this.ptr;return!!Je(e)},un.prototype.error_msg=un.prototype.error_msg=function(){var e=this.ptr;return I($e(e))},un.prototype.__destroy__=un.prototype.__destroy__=function(){var e=this.ptr;et(e)},hn.prototype=Object.create(Xi.prototype),hn.prototype.constructor=hn,hn.prototype.__class__=hn,hn.__cache__={},a.DracoFloat32Array=hn,hn.prototype.GetValue=hn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),it(t,e)},hn.prototype.size=hn.prototype.size=function(){var e=this.ptr;return nt(e)},hn.prototype.__destroy__=hn.prototype.__destroy__=function(){var e=this.ptr;rt(e)},dn.prototype=Object.create(Xi.prototype),dn.prototype.constructor=dn,dn.prototype.__class__=dn,dn.__cache__={},a.DracoInt8Array=dn,dn.prototype.GetValue=dn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),st(t,e)},dn.prototype.size=dn.prototype.size=function(){var e=this.ptr;return ot(e)},dn.prototype.__destroy__=dn.prototype.__destroy__=function(){var e=this.ptr;lt(e)},fn.prototype=Object.create(Xi.prototype),fn.prototype.constructor=fn,fn.prototype.__class__=fn,fn.__cache__={},a.DracoUInt8Array=fn,fn.prototype.GetValue=fn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ut(t,e)},fn.prototype.size=fn.prototype.size=function(){var e=this.ptr;return ht(e)},fn.prototype.__destroy__=fn.prototype.__destroy__=function(){var e=this.ptr;dt(e)},pn.prototype=Object.create(Xi.prototype),pn.prototype.constructor=pn,pn.prototype.__class__=pn,pn.__cache__={},a.DracoInt16Array=pn,pn.prototype.GetValue=pn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),pt(t,e)},pn.prototype.size=pn.prototype.size=function(){var e=this.ptr;return mt(e)},pn.prototype.__destroy__=pn.prototype.__destroy__=function(){var e=this.ptr;gt(e)},mn.prototype=Object.create(Xi.prototype),mn.prototype.constructor=mn,mn.prototype.__class__=mn,mn.__cache__={},a.DracoUInt16Array=mn,mn.prototype.GetValue=mn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),bt(t,e)},mn.prototype.size=mn.prototype.size=function(){var e=this.ptr;return _t(e)},mn.prototype.__destroy__=mn.prototype.__destroy__=function(){var e=this.ptr;yt(e)},gn.prototype=Object.create(Xi.prototype),gn.prototype.constructor=gn,gn.prototype.__class__=gn,gn.__cache__={},a.DracoInt32Array=gn,gn.prototype.GetValue=gn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Et(t,e)},gn.prototype.size=gn.prototype.size=function(){var e=this.ptr;return wt(e)},gn.prototype.__destroy__=gn.prototype.__destroy__=function(){var e=this.ptr;St(e)},vn.prototype=Object.create(Xi.prototype),vn.prototype.constructor=vn,vn.prototype.__class__=vn,vn.__cache__={},a.DracoUInt32Array=vn,vn.prototype.GetValue=vn.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),xt(t,e)},vn.prototype.size=vn.prototype.size=function(){var e=this.ptr;return Mt(e)},vn.prototype.__destroy__=vn.prototype.__destroy__=function(){var e=this.ptr;Rt(e)},bn.prototype=Object.create(Xi.prototype),bn.prototype.constructor=bn,bn.prototype.__class__=bn,bn.__cache__={},a.MetadataQuerier=bn,bn.prototype.HasEntry=bn.prototype.HasEntry=function(e,t){var i=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),!!Ct(i,e,t)},bn.prototype.GetIntEntry=bn.prototype.GetIntEntry=function(e,t){var i=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),Dt(i,e,t)},bn.prototype.GetIntEntryArray=bn.prototype.GetIntEntryArray=function(e,t,i){var n=this.ptr;Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),i&&"object"==typeof i&&(i=i.ptr),Ot(n,e,t,i)},bn.prototype.GetDoubleEntry=bn.prototype.GetDoubleEntry=function(e,t){var i=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),kt(i,e,t)},bn.prototype.GetStringEntry=bn.prototype.GetStringEntry=function(e,t){var i=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),I(It(i,e,t))},bn.prototype.NumEntries=bn.prototype.NumEntries=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Nt(t,e)},bn.prototype.GetEntryName=bn.prototype.GetEntryName=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),I(Lt(i,e,t))},bn.prototype.__destroy__=bn.prototype.__destroy__=function(){var e=this.ptr;Ut(e)},_n.prototype=Object.create(Xi.prototype),_n.prototype.constructor=_n,_n.prototype.__class__=_n,_n.__cache__={},a.Decoder=_n,_n.prototype.DecodeArrayToPointCloud=_n.prototype.DecodeArrayToPointCloud=function(e,t,i){var n=this.ptr;return Qi.prepare(),"object"==typeof e&&(e=Ji(e)),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),qi(Ft(n,e,t,i),un)},_n.prototype.DecodeArrayToMesh=_n.prototype.DecodeArrayToMesh=function(e,t,i){var n=this.ptr;return Qi.prepare(),"object"==typeof e&&(e=Ji(e)),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),qi(Gt(n,e,t,i),un)},_n.prototype.GetAttributeId=_n.prototype.GetAttributeId=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Vt(i,e,t)},_n.prototype.GetAttributeIdByName=_n.prototype.GetAttributeIdByName=function(e,t){var i=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),zt(i,e,t)},_n.prototype.GetAttributeIdByMetadataEntry=_n.prototype.GetAttributeIdByMetadataEntry=function(e,t,i){var n=this.ptr;return Qi.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:Ki(t),i=i&&"object"==typeof i?i.ptr:Ki(i),Ht(n,e,t,i)},_n.prototype.GetAttribute=_n.prototype.GetAttribute=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(jt(i,e,t),rn)},_n.prototype.GetAttributeByUniqueId=_n.prototype.GetAttributeByUniqueId=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(Wt(i,e,t),rn)},_n.prototype.GetMetadata=_n.prototype.GetMetadata=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),qi(Yt(t,e),cn)},_n.prototype.GetAttributeMetadata=_n.prototype.GetAttributeMetadata=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(Xt(i,e,t),cn)},_n.prototype.GetFaceFromMesh=_n.prototype.GetFaceFromMesh=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Zt(n,e,t,i)},_n.prototype.GetTriangleStripsFromMesh=_n.prototype.GetTriangleStripsFromMesh=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qt(i,e,t)},_n.prototype.GetTrianglesUInt16Array=_n.prototype.GetTrianglesUInt16Array=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Qt(n,e,t,i)},_n.prototype.GetTrianglesUInt32Array=_n.prototype.GetTrianglesUInt32Array=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Kt(n,e,t,i)},_n.prototype.GetAttributeFloat=_n.prototype.GetAttributeFloat=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!Jt(n,e,t,i)},_n.prototype.GetAttributeFloatForAllPoints=_n.prototype.GetAttributeFloatForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!$t(n,e,t,i)},_n.prototype.GetAttributeIntForAllPoints=_n.prototype.GetAttributeIntForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ei(n,e,t,i)},_n.prototype.GetAttributeInt8ForAllPoints=_n.prototype.GetAttributeInt8ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ti(n,e,t,i)},_n.prototype.GetAttributeUInt8ForAllPoints=_n.prototype.GetAttributeUInt8ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ii(n,e,t,i)},_n.prototype.GetAttributeInt16ForAllPoints=_n.prototype.GetAttributeInt16ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ni(n,e,t,i)},_n.prototype.GetAttributeUInt16ForAllPoints=_n.prototype.GetAttributeUInt16ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ri(n,e,t,i)},_n.prototype.GetAttributeInt32ForAllPoints=_n.prototype.GetAttributeInt32ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!ai(n,e,t,i)},_n.prototype.GetAttributeUInt32ForAllPoints=_n.prototype.GetAttributeUInt32ForAllPoints=function(e,t,i){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),!!si(n,e,t,i)},_n.prototype.GetAttributeDataArrayForAllPoints=_n.prototype.GetAttributeDataArrayForAllPoints=function(e,t,i,n,r){var a=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),i&&"object"==typeof i&&(i=i.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),!!oi(a,e,t,i,n,r)},_n.prototype.SkipAttributeTransform=_n.prototype.SkipAttributeTransform=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),li(t,e)},_n.prototype.GetEncodedGeometryType_Deprecated=_n.prototype.GetEncodedGeometryType_Deprecated=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ci(t,e)},_n.prototype.DecodeBufferToPointCloud=_n.prototype.DecodeBufferToPointCloud=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(ui(i,e,t),un)},_n.prototype.DecodeBufferToMesh=_n.prototype.DecodeBufferToMesh=function(e,t){var i=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),qi(hi(i,e,t),un)},_n.prototype.__destroy__=_n.prototype.__destroy__=function(){var e=this.ptr;di(e)},function(){function e(){a.ATTRIBUTE_INVALID_TRANSFORM=fi(),a.ATTRIBUTE_NO_TRANSFORM=pi(),a.ATTRIBUTE_QUANTIZATION_TRANSFORM=mi(),a.ATTRIBUTE_OCTAHEDRON_TRANSFORM=gi(),a.INVALID=vi(),a.POSITION=bi(),a.NORMAL=_i(),a.COLOR=yi(),a.TEX_COORD=Ai(),a.GENERIC=Ei(),a.INVALID_GEOMETRY_TYPE=wi(),a.POINT_CLOUD=Si(),a.TRIANGULAR_MESH=Ti(),a.DT_INVALID=xi(),a.DT_INT8=Mi(),a.DT_UINT8=Ri(),a.DT_INT16=Pi(),a.DT_UINT16=Ci(),a.DT_INT32=Di(),a.DT_UINT32=Oi(),a.DT_INT64=ki(),a.DT_UINT64=Ii(),a.DT_FLOAT32=Ni(),a.DT_FLOAT64=Li(),a.DT_BOOL=Ui(),a.DT_TYPES_COUNT=Bi(),a.OK=Fi(),a.DRACO_ERROR=Gi(),a.IO_ERROR=Vi(),a.INVALID_PARAMETER=zi(),a.UNSUPPORTED_VERSION=Hi(),a.UNKNOWN_VERSION=ji()}V?e():z(e)}(),"function"==typeof a.onModuleParsed&&a.onModuleParsed(),a.Decoder.prototype.GetEncodedGeometryType=function(e){if(e.__class__&&e.__class__===a.DecoderBuffer)return a.Decoder.prototype.GetEncodedGeometryType_Deprecated(e);if(e.byteLength<8)return a.INVALID_GEOMETRY_TYPE;switch(e[7]){case 0:return a.POINT_CLOUD;case 1:return a.TRIANGULAR_MESH;default:return a.INVALID_GEOMETRY_TYPE}},e.ready});e.exports=r},9649:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessorLoader=void 0;const n=i(7038),r=i(4465),a=i(8877);t.AccessorLoader=class{constructor(e,t){this._content=e,this._bufferViewLoader=t,this._logger=a.Logger.instance,this._loaded={}}getAccessor(e){if(!this._content.accessors)throw new Error("AccessorLoader.getAccessor: Accessors not available.");if(!this._content.accessors[e])throw new Error("AccessorLoader.getAccessor: Accessor not available.");if(!this._loaded[e])throw new Error("AccessorLoader.getAccessor: Accessor not loaded.");return this._loaded[e]}load(){if(this._content.accessors)for(let e=0;e<this._content.accessors.length;e++){const t=e;if(!this._content.accessors[t])throw new Error("AccessorLoader.load: BufferView not available.");const i=this._content.accessors[t];if(void 0===i.bufferView){this._loaded[t]=null;continue}const a=this._bufferViewLoader.getBufferView(i.bufferView),s=r.ACCESSORTYPE_V2[i.type];5124===i.componentType&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const o=r.ACCESSORCOMPONENTTYPE_V2[i.componentType],l=o.BYTES_PER_ELEMENT,c=l*s,u=i.byteOffset||0,h=void 0!==i.bufferView&&this._content.bufferViews?this._content.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized,f=this._content.bufferViews?this._content.bufferViews[i.bufferView].target:void 0;let p;if(p=h&&h!==c?new o(a,Math.floor(u/h)*h,i.count*h/l):null===a?new o(i.count*s):new o(a,u,i.count*s),void 0===i.sparse)this._loaded[t]=new n.AttributeData(p,s,c,u,l,d,i.count,i.min,i.max,h,f);else{const e=r.ACCESSORTYPE_V2.SCALAR,a=r.ACCESSORCOMPONENTTYPE_V2[i.sparse.indices.componentType],m=i.sparse.indices.byteOffset||0,g=i.sparse.values.byteOffset||0;if(!i.sparse.indices.bufferView||!i.sparse.values.bufferView)throw new Error("Sparse Mesh not properly defined.");const v=new a(this._bufferViewLoader.getBufferView(i.sparse.indices.bufferView),m,i.sparse.count*e),b=new o(this._bufferViewLoader.getBufferView(i.sparse.values.bufferView),g,i.sparse.count*s);this._loaded[t]=new n.AttributeData(p,s,c,u,l,d,i.count,i.min,i.max,h,f,!0,v,b)}}}}},8103:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferLoader=void 0;const r=i(8877);t.BufferLoader=class{constructor(e,t,i){this._content=e,this._body=t,this._baseUri=i,this._httpClient=r.HttpClient.instance,this._loaded={}}getBuffer(e){if(!this._content.buffers)throw new Error("BufferLoader.getBuffer: Buffers not available.");if(!this._content.buffers[e])throw new Error("BufferLoader.getBuffer: Buffer not available.");if(!this._loaded[e])throw new Error("BufferLoader.getBuffer: Buffer not loaded.");return this._loaded[e]}load(){return n(this,void 0,void 0,(function*(){if(!this._content.buffers)return;const e=[];for(let t=0;t<this._content.buffers.length;t++){const i=t,n=this._content.buffers[i];if(n.type&&"arraybuffer"!==n.type)throw new Error(`BufferLoader.load: ${n.type} is not supported.`);if(void 0===n.uri&&0===i){if(!this._body)throw new Error("BufferLoader.load: Buffer not available.");return void(this._loaded[i]=this._body)}const r=/^data:(.*?)(;base64)?,(.*)$/,a=n.uri.match(r);if(a){const e=!!a[2];let t=a[3];t=decodeURIComponent(t),e&&(t=atob(t));const n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);this._loaded[i]=n.buffer}else{const t=this._httpClient.get(this._baseUri+"/"+n.uri,{responseType:"arraybuffer"}).then((e=>{this._loaded[i]=e.data}));e.push(t)}}yield Promise.all(e)}))}}},9056:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferViewLoader=void 0,t.BufferViewLoader=class{constructor(e,t){this._content=e,this._bufferLoader=t,this._loaded={}}getBufferView(e){if(!this._content.bufferViews)throw new Error("BufferViewLoader.load: BufferViews not available.");if(!this._content.bufferViews[e])throw new Error("BufferViewLoader.load: BufferView not available.");if(!this._loaded[e])throw new Error("BufferViewLoader.load: BufferView not loaded.");return this._loaded[e]}load(){if(this._content.bufferViews)for(let e=0;e<this._content.bufferViews.length;e++){const t=e;if(!this._content.bufferViews[t])throw new Error("BufferViewLoader.load: BufferView not available.");const i=this._content.bufferViews[t],n=i.byteLength||0,r=i.byteOffset||0;if(void 0===i.buffer)throw new Error("BufferViewLoader.load: BufferView has no buffer defined.");const a=this._bufferLoader.getBuffer(i.buffer).slice(r,r+n);this._loaded[t]=a}}}},206:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryLoader=void 0;const n=i(3858),r=i(7038),a=i(2549);t.GeometryLoader=class{constructor(e,t,i,n,a){this._content=e,this._accessorLoader=t,this._bufferViewLoader=i,this._materialLoader=n,this._dracoModule=a,this._materialVariantsData=new r.MaterialVariantsData,this._loaded={}}get materialVariantsData(){return this._materialVariantsData}loadMesh(e,t){if(!this._content.meshes)throw new Error("GeometryLoader.loadMesh: Meshes not available.");if(!this._content.meshes[e])throw new Error("GeometryLoader.loadMesh: Mesh not available.");const i=this._content.meshes[e],r=new n.TreeNode(i.name||"mesh_"+e);if(i.primitives)for(let n=0,a=i.primitives.length;n<a;n++)r.addChild(this.loadPrimitive(e,i.primitives,n,i.weights||t));return r}loadPrimitive(e,t,i,s=[]){const o=t[i],l=new n.TreeNode("primitive_"+i);if(this._loaded["mesh_"+e+"_primitive_"+i])return l.data.push(this._loaded["mesh_"+e+"_primitive_"+i].clone()),l;const c={};let u=null;const h={};if(o.extensions&&o.extensions[a.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]){const e=o.extensions[a.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION],t=this._bufferViewLoader.getBufferView(e.bufferView),i=new this._dracoModule.Decoder,n=new Int8Array(t),s=i.GetEncodedGeometryType(n);let l;if(s===this._dracoModule.TRIANGULAR_MESH?(l=new this._dracoModule.Mesh,i.DecodeArrayToMesh(n,n.byteLength,l)):s===this._dracoModule.POINT_CLOUD&&(l=new this._dracoModule.PointCloud,i.DecodeArrayToPointCloud(n,n.byteLength,l)),void 0===e.attributes.POSITION){const e="No position attribute found in the mesh.";throw this._dracoModule.destroy(i),this._dracoModule.destroy(l),new Error(e)}for(let t in e.attributes){const n=i.GetAttributeByUniqueId(l,e.attributes[t]),a=new this._dracoModule.DracoFloat32Array;i.GetAttributeFloatForAllPoints(l,n,a);const s=n.byte_offset(),o=n.normalized(),u=n.num_components(),h=l.num_points()*u,d=h*Float32Array.BYTES_PER_ELEMENT,f=this._dracoModule._malloc(d);i.GetAttributeDataArrayForAllPoints(l,n,this._dracoModule.DT_FLOAT32,d,f);const p=new Float32Array(this._dracoModule.HEAPF32.buffer,f,h).slice();this._dracoModule._free(f),t.includes("COLOR")&&p.forEach(((e,t)=>p[t]=Math.max(0,Math.min(1,e)))),c[t]=new r.AttributeData(p,u,p.BYTES_PER_ELEMENT*u,s,p.BYTES_PER_ELEMENT,o,p.length/u)}if(s==this._dracoModule.TRIANGULAR_MESH){const e=3*l.num_faces(),t=4*e,n=this._dracoModule._malloc(t);i.GetTrianglesUInt32Array(l,t,n);const a=new Uint32Array(this._dracoModule.HEAPF32.buffer,n,e).slice();this._dracoModule._free(n),u=new r.AttributeData(a,1,1*a.BYTES_PER_ELEMENT,0,a.BYTES_PER_ELEMENT,!1,a.length)}this._dracoModule.destroy(i),this._dracoModule.destroy(l)}for(let e in o.attributes){if(c[e]){h[e]=e;continue}let t=e;if(/\d/.test(t)&&!t.includes("_")){const e=t.search(/\d/);t=t.substring(0,e)+"_"+t.substring(e,t.length)}else"TEXCOORD"===t||"COLOR"===t||"JOINTS"===t||"WEIGHTS"===t?t+="_0":"UV"===t&&(t="TEXCOORD_0");h[e]=t,c[t]=this._accessorLoader.getAccessor(o.attributes[e])}if(!o.indices&&0!==o.indices||u||(u=this._accessorLoader.getAccessor(o.indices)),o.targets)for(let e=0;e<o.targets.length;e++)for(let t in o.targets[e])c[t]&&c[h[t]].morphAttributeData.push(this._accessorLoader.getAccessor(o.targets[e][t]));let d=null;(o.material||0===o.material)&&(d=this._materialLoader.getMaterial(o.material));const f=new r.PrimitiveData(c,u),p=new r.GeometryData(f,o.mode,d);if(o.extensions&&o.extensions[a.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS]){this._materialVariantsData.geometryData.push(p);const e=o.extensions[a.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS];for(let t=0;t<e.mappings.length;t++){const i=e.mappings[t],n=this._materialLoader.getMaterial(i.material);for(let e=0;e<i.variants.length;e++)p.materialVariants.push({variant:i.variants[e],material:n})}}return p.morphWeights=s,this._loaded["mesh_"+e+"_primitive_"+i]=p,l.data.push(p),l}}},3883:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialLoader=void 0;const r=i(8877),a=i(887),s=i(7038),o=i(4320),l=i(2549);t.MaterialLoader=class{constructor(e,t){this._content=e,this._textureLoader=t,this._converter=r.Converter.instance,this._materialEngine=o.MaterialEngine.instance,this._loaded={}}getMaterial(e){if(!this._content.materials)throw new Error("MaterialLoader.getMaterial: Materials not available.");if(!this._content.materials[e])throw new Error("MaterialLoader.getMaterial: Material not available.");if(!this._loaded[e])throw new Error("MaterialLoader.getMaterial: Material not loaded.");return this._loaded[e]}load(){return n(this,void 0,void 0,(function*(){if(this._loaded={},!this._content.materials)return;const e=[];for(let t=0;t<this._content.materials.length;t++){const i=t,n=this._content.materials[i],r=n.extensions||{},a={};if(void 0!==n.name&&(a.name=n.name),r[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET]){const t=r[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET];e.push(new Promise(((e,r)=>{try{this._materialEngine.loadPresetMaterial(t.materialpreset).then((r=>{r.name=n.name,r.color=t.color,this._loaded[i]=r,e()})).catch(r)}catch(e){r(e)}})));continue}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS],t=a;if(t.color="#ffffff",t.opacity=1,void 0!==e.diffuseFactor&&(t.color=[255*e.diffuseFactor[0],255*e.diffuseFactor[1],255*e.diffuseFactor[2]],t.opacity=e.diffuseFactor[3]),void 0!==e.diffuseTexture){const i=e.diffuseTexture.extensions&&e.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.diffuseTexture.texCoord&&(i.texCoord=e.diffuseTexture.texCoord),t.map=this.loadMap(e.diffuseTexture.index,i)}if(t.emissiveness="#000000",t.glossiness=void 0!==e.glossinessFactor?e.glossinessFactor:1,t.specular="#ffffff",void 0!==e.specularFactor&&(t.specular=[255*e.specularFactor[0],255*e.specularFactor[1],255*e.specularFactor[2]]),void 0!==e.specularGlossinessTexture){const i=e.specularGlossinessTexture.extensions&&e.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.specularGlossinessTexture.texCoord&&(i.texCoord=e.specularGlossinessTexture.texCoord),t.specularGlossinessMap=this.loadMap(e.specularGlossinessTexture.index,i)}}else if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=a;if(e.color="#ffffff",e.opacity=1,void 0!==n.pbrMetallicRoughness&&(void 0!==n.pbrMetallicRoughness.baseColorFactor&&(e.color=[255*n.pbrMetallicRoughness.baseColorFactor[0],255*n.pbrMetallicRoughness.baseColorFactor[1],255*n.pbrMetallicRoughness.baseColorFactor[2]],e.opacity=n.pbrMetallicRoughness.baseColorFactor[3]),void 0!==n.pbrMetallicRoughness.baseColorTexture)){const t=n.pbrMetallicRoughness.baseColorTexture.extensions&&n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.pbrMetallicRoughness.baseColorTexture.texCoord&&(t.texCoord=n.pbrMetallicRoughness.baseColorTexture.texCoord),e.map=this.loadMap(n.pbrMetallicRoughness.baseColorTexture.index,t)}}else{const e=a;if(void 0!==n.pbrMetallicRoughness){if(e.color="#ffffff",void 0!==n.pbrMetallicRoughness.baseColorFactor&&(e.color=[255*n.pbrMetallicRoughness.baseColorFactor[0],255*n.pbrMetallicRoughness.baseColorFactor[1],255*n.pbrMetallicRoughness.baseColorFactor[2]],e.opacity=n.pbrMetallicRoughness.baseColorFactor[3]),void 0!==n.pbrMetallicRoughness.baseColorTexture){const t=n.pbrMetallicRoughness.baseColorTexture.extensions&&n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.pbrMetallicRoughness.baseColorTexture.texCoord&&(t.texCoord=n.pbrMetallicRoughness.baseColorTexture.texCoord),e.map=this.loadMap(n.pbrMetallicRoughness.baseColorTexture.index,t)}if(void 0!==n.pbrMetallicRoughness.metallicFactor&&(e.metalness=n.pbrMetallicRoughness.metallicFactor),void 0!==n.pbrMetallicRoughness.roughnessFactor&&(e.roughness=n.pbrMetallicRoughness.roughnessFactor),void 0!==n.pbrMetallicRoughness.metallicRoughnessTexture){const t=n.pbrMetallicRoughness.metallicRoughnessTexture.extensions&&n.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.pbrMetallicRoughness.metallicRoughnessTexture.texCoord&&(t.texCoord=n.pbrMetallicRoughness.metallicRoughnessTexture.texCoord),e.metalnessRoughnessMap=this.loadMap(n.pbrMetallicRoughness.metallicRoughnessTexture.index,t)}}}if(void 0!==n.normalTexture){const e=n.normalTexture.extensions&&n.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.normalTexture.texCoord&&(e.texCoord=n.normalTexture.texCoord),a.normalMap=this.loadMap(n.normalTexture.index,e),a.normalScale=1,void 0!==n.normalTexture.scale&&(a.normalScale=n.normalTexture.scale)}if(void 0!==n.occlusionTexture){const e=n.occlusionTexture.extensions&&n.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.occlusionTexture.texCoord&&(e.texCoord=n.occlusionTexture.texCoord),a.aoMap=this.loadMap(n.occlusionTexture.index,e),void 0!==n.occlusionTexture.strength&&(a.aoMapIntensity=n.occlusionTexture.strength)}if(void 0!==n.emissiveTexture){const e=n.emissiveTexture.extensions&&n.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?n.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==n.emissiveTexture.texCoord&&(e.texCoord=n.emissiveTexture.texCoord),a.emissiveMap=this.loadMap(n.emissiveTexture.index,e)}if(void 0!==n.emissiveFactor&&(a.emissiveness=[255*n.emissiveFactor[0],255*n.emissiveFactor[1],255*n.emissiveFactor[2]]),void 0!==n.alphaMode&&(a.alphaMode=n.alphaMode.toLowerCase()===s.MATERIAL_ALPHA.MASK?s.MATERIAL_ALPHA.MASK:n.alphaMode.toLowerCase()===s.MATERIAL_ALPHA.BLEND?s.MATERIAL_ALPHA.BLEND:s.MATERIAL_ALPHA.OPAQUE,a.alphaMode===s.MATERIAL_ALPHA.MASK&&(a.alphaCutoff=void 0!==n.alphaCutoff?n.alphaCutoff:.5)),void 0!==n.alphaCutoff&&(a.alphaCutoff=n.alphaCutoff),void 0!==n.doubleSided&&(a.side=n.doubleSided?s.MATERIAL_SIDE.DOUBLE:s.MATERIAL_SIDE.FRONT),r[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const e=a,t=new s.MaterialSpecularGlossinessData(e);this._loaded[i]=t;continue}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const e=a,t=new s.MaterialUnlitData(e);this._loaded[i]=t;continue}const o=a;if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT];if(void 0!==e.clearcoatFactor&&(o.clearcoat=e.clearcoatFactor),void 0!==e.clearcoatTexture){const t=e.clearcoatTexture.extensions&&e.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.clearcoatTexture.texCoord&&(t.texCoord=e.clearcoatTexture.texCoord),o.clearcoatMap=this.loadMap(e.clearcoatTexture.index,t)}if(void 0!==e.clearcoatRoughnessFactor&&(o.clearcoatRoughness=e.clearcoatRoughnessFactor),void 0!==e.clearcoatRoughnessTexture){const t=e.clearcoatRoughnessTexture.extensions&&e.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.clearcoatRoughnessTexture.texCoord&&(t.texCoord=e.clearcoatRoughnessTexture.texCoord),o.clearcoatRoughnessMap=this.loadMap(e.clearcoatRoughnessTexture.index,t)}if(void 0!==e.clearcoatNormalTexture){const t=e.clearcoatNormalTexture.extensions&&e.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.clearcoatNormalTexture.texCoord&&(t.texCoord=e.clearcoatNormalTexture.texCoord),o.clearcoatNormalMap=this.loadMap(e.clearcoatNormalTexture.index,t)}}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR];void 0!==e.ior&&(o.ior=e.ior)}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION];if(void 0!==e.transmissionFactor&&(o.transmission=e.transmissionFactor),void 0!==e.transmissionTexture){const t=e.transmissionTexture.extensions&&e.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.transmissionTexture.texCoord&&(t.texCoord=e.transmissionTexture.texCoord),o.transmissionMap=this.loadMap(e.transmissionTexture.index,t)}}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME];if(void 0!==e.thicknessFactor&&(o.thickness=e.thicknessFactor),void 0!==e.thicknessTexture){const t=e.thicknessTexture.extensions&&e.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.thicknessTexture.texCoord&&(t.texCoord=e.thicknessTexture.texCoord),o.thicknessMap=this.loadMap(e.thicknessTexture.index,t)}void 0!==e.attenuationDistance&&(o.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&(o.attenuationColor=[255*e.attenuationColor[0],255*e.attenuationColor[1],255*e.attenuationColor[2]])}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN];if(o.sheen=1,void 0!==e.sheenColorFactor&&(o.sheenColor=[255*e.sheenColorFactor[0],255*e.sheenColorFactor[1],255*e.sheenColorFactor[2]]),void 0!==e.sheenRoughnessFactor&&(o.sheenRoughness=e.sheenRoughnessFactor),void 0!==e.sheenColorTexture){const t=e.sheenColorTexture.extensions&&e.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.sheenColorTexture.texCoord&&(t.texCoord=e.sheenColorTexture.texCoord),o.sheenColorMap=this.loadMap(e.sheenColorTexture.index,t)}if(void 0!==e.sheenRoughnessTexture){const t=e.sheenRoughnessTexture.extensions&&e.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.sheenRoughnessTexture.texCoord&&(t.texCoord=e.sheenRoughnessTexture.texCoord),o.sheenRoughnessMap=this.loadMap(e.sheenRoughnessTexture.index,t)}}if(r[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR]){const e=r[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR];if(void 0!==e.specularFactor&&(o.specularIntensity=e.specularFactor),void 0!==e.specularColorFactor&&(o.specularColor=[255*e.specularColorFactor[0],255*e.specularColorFactor[1],255*e.specularColorFactor[2]]),void 0!==e.specularColorTexture){const t=e.specularColorTexture.extensions&&e.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.specularColorTexture.texCoord&&(t.texCoord=e.specularColorTexture.texCoord),o.specularColorMap=this.loadMap(e.specularColorTexture.index,t)}if(void 0!==e.specularTexture){const t=e.specularTexture.extensions&&e.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?e.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};void 0!==e.specularTexture.texCoord&&(t.texCoord=e.specularTexture.texCoord),o.specularIntensityMap=this.loadMap(e.specularTexture.index,t)}}const c=new s.MaterialStandardData(o);this._loaded[i]=c}yield Promise.all(e)}))}loadMap(e,t){if(!this._content.textures)throw new Error("Textures not available.");const i=this._content.textures[e];if(!this._content.images)throw new Error("Images not available.");const n=this._content.samplers&&i.sampler&&this._content.samplers[i.sampler]?this._content.samplers[i.sampler]:{},r=this._textureLoader.getTexture(e);return new s.MapData(r.image,{blob:r.blob,wrapS:n.wrapS,wrapT:n.wrapT,minFilter:n.minFilter,magFilter:n.magFilter,offset:t&&t.offset?a.vec2.fromValues(t.offset[0],t.offset[1]):a.vec2.create(),repeat:t&&t.scale?a.vec2.fromValues(t.scale[0],t.scale[1]):a.vec2.fromValues(1,1),rotation:t&&void 0!==t.rotation?t.rotation:0,texCoord:null==t?void 0:t.texCoord,flipY:!1})}}},5458:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TextureLoader=void 0;const r=i(8877);t.TextureLoader=class{constructor(e,t,i){this._content=e,this._bufferViewLoader=t,this._baseUri=i,this._converter=r.Converter.instance,this._httpClient=r.HttpClient.instance,this._loaded={}}getTexture(e){if(!this._content.textures)throw new Error("TextureLoader.getTexture: Textures not available.");if(!this._content.textures[e])throw new Error("TextureLoader.getTexture: Texture not available.");if(!this._loaded[e])throw new Error("TextureLoader.getTexture: Texture not loaded.");return this._loaded[e]}load(){return n(this,void 0,void 0,(function*(){if(!this._content.textures)return;const e=[];for(let t=0;t<this._content.textures.length;t++){const i=t,n=this._content.textures[i];if(!this._content.images)throw new Error("TextureLoader.load: Images not available.");const r=this._content.images[n.source],a=/^data:(.*?)(;base64)?,(.*)$/,s=/^https:\/\//;if(void 0!==r.bufferView){const t=this._bufferViewLoader.getBufferView(r.bufferView),n=new DataView(t),a=[];for(let e=0;e<n.byteLength;e+=1)a[e]=n.getUint8(e);const s=new Blob([new Uint8Array(a)],{type:r.mimeType}),o=URL.createObjectURL(s),l=new Image;e.push(new Promise(((e,t)=>{l.onload=()=>{this._loaded[i]={image:l,blob:s},URL.revokeObjectURL(o),e()},l.onerror=t}))),l.crossOrigin="anonymous",l.src=o}else{const t=a.test(r.uri)||s.test(r.uri)?r.uri:`${this._baseUri}/${r.uri}`;e.push(new Promise(((e,n)=>{this._httpClient.loadTexture(t).then((t=>{this._loaded[i]=t.data,e()})).catch((e=>n(e)))})))}}yield Promise.all(e)}))}}},6538:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryEngine=void 0;const n=i(1183);Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return n.GeometryEngine}})},7767:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFConverter=t.GLTF_EXTENSIONS=void 0;const r=i(3441),a=i(3858),s=i(8877),o=i(4465),l=i(887),c=i(7038),u=i(2747);var h;(h=t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={})).KHR_BINARY_GLTF="KHR_binary_glTF",h.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",h.KHR_MATERIALS_UNLIT="KHR_materials_unlit",t.GLTFConverter=class{constructor(){this._converter=s.Converter.instance,this._eventEngine=s.EventEngine.instance,this._globalTransformationInverse=l.mat4.fromValues(1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1),this._uuidGenerator=s.UuidGenerator.instance,this._progressUpdateLimit=500,this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+r.build_data.build_version,version:"2.0",extensions:{}}},this._convertForAR=!1,this._eventId="",this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._nodes=[],this._numberOfNodes=0,this._progressTimer=0,this._promises=[],this._materialCache={},this._meshCache={}}static get instance(){return this._instance||(this._instance=new this)}convert(e,t=!1,i){var r,o;return n(this,void 0,void 0,(function*(){this._eventId=this._uuidGenerator.create();const n={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:0,status:"Starting glTF conversion."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_START,n),this._numberOfNodes=0,e.traverse((()=>this._numberOfNodes++)),this._progressTimer=performance.now(),this.reset(),this._convertForAR=t,this._viewport=i;const u=e.parent,h=new a.TreeNode("ShapeDiverRootNode");h.addChild(e);const d={name:h.name,nodes:[]},f=this._uuidGenerator.create();e.addTransformation({id:f,matrix:this._globalTransformationInverse});const p=this._uuidGenerator.create();if(t){const t=e.boundingBox.boundingSphere.center,i=l.mat4.fromTranslation(l.mat4.create(),l.vec3.multiply(l.vec3.create(),l.vec3.fromValues(t[0],t[1],t[2]),l.vec3.fromValues(-1,-1,-1)));e.addTransformation({id:p,matrix:i})}if(this._viewport){if(this._viewport&&!1===e.excludeViewports.includes(this._viewport)&&0==(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._viewport))){const t=yield this.convertNode(e);-1!==t&&(null===(r=d.nodes)||void 0===r||r.push(t))}}else{const t=yield this.convertNode(e);-1!==t&&(null===(o=d.nodes)||void 0===o||o.push(t))}for(let t=0;t<e.transformations.length;t++)e.transformations[t].id===f&&e.removeTransformation(e.transformations[t]);if(t)for(let t=0;t<e.transformations.length;t++)e.transformations[t].id===p&&e.removeTransformation(e.transformations[t]);this._content.scenes=[],this._content.scenes.push(d),this.convertAnimations(),this._extensionsUsed.length>0&&(this._content.extensionsUsed=this._extensionsUsed),this._extensionsRequired.length>0&&(this._content.extensionsRequired=this._extensionsRequired);let m=0;for(;m!==this._promises.length;)m=this._promises.length,yield Promise.all(this._promises),yield new Promise((e=>setTimeout(e,0)));const g={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:.75,status:"GlTF images resolved."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_PROCESS,g);const v=new Blob(this._buffers,{type:"application/octet-stream"});return u&&u.addChild(e),this._content.buffers&&this._content.buffers.length>0&&(this._content.buffers[0].byteLength=v.size),new Promise(((e,t)=>{try{const i=new window.FileReader;i.readAsArrayBuffer(v),i.onloadend=()=>{const n=this.getPaddedArrayBuffer(i.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,5130562,!0);const a=this.getPaddedArrayBuffer(this.stringToArrayBuffer(JSON.stringify(this._content)),32),o=new DataView(new ArrayBuffer(8));o.setUint32(0,a.byteLength,!0),o.setUint32(4,1313821514,!0);const l=new ArrayBuffer(12),u=new DataView(l);u.setUint32(0,1179937895,!0),u.setUint32(4,2,!0);const h=12+o.byteLength+a.byteLength+r.byteLength+n.byteLength;u.setUint32(8,h,!0);const d=new Blob([l,o,a,r,n],{type:"application/octet-stream"}),f=new window.FileReader;f.readAsArrayBuffer(d),f.onloadend=()=>{const t={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:1,status:"GlTF creation complete."};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_END,t),e(f.result)},f.onerror=t},i.onerror=t}catch(e){t(e)}}))}))}convertAccessor(e){this._content.accessors||(this._content.accessors=[]);const t=this.convertBufferView(e),i=this.getMinMax(e),n={bufferView:t,byteOffset:0,componentType:this.getComponentType(e.array),normalized:e.normalized,count:+e.count,max:i.max,min:i.min,type:this.getType(e.itemSize)};return this._content.accessors.push(n),this._content.accessors.length-1}convertAnimations(){var e;!this._content.animations&&this._animations.length>0&&(this._content.animations=[]);for(let t=0;t<this._animations.length;t++){const i=this._animations[t],n={name:i.name||"animation_"+t,channels:[],samplers:[]};for(let e=0;e<i.tracks.length;e++){const t=i.tracks[e],r=this._nodes.find((e=>e.node===t.node));if(!r)continue;const a=Math.min(...t.times),s=Math.max(...t.times),o=new c.AttributeData(new Float32Array(t.times),1,4,0,4,!1,t.times.length,[a],[s]),l=[];l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==0)))),l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==1)))),l.push(Math.min(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==2)))),"rotation"===t.path&&l.push(Math.min(...t.values.filter(((e,t)=>t%4==3))));const u=[];u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==0)))),u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==1)))),u.push(Math.max(...t.values.filter(((e,i)=>i%("rotation"===t.path?4:3)==2)))),"rotation"===t.path&&u.push(Math.max(...t.values.filter(((e,t)=>t%4==3))));const h=new c.AttributeData(new Float32Array(t.values),"rotation"===t.path?4:3,"rotation"===t.path?16:12,0,4,!1,t.times.length,l,u,"rotation"===t.path?16:12),d={input:this.convertAccessor(o),output:this.convertAccessor(h),interpolation:t.interpolation.toUpperCase()};n.samplers.push(d);const f={sampler:n.samplers.length-1,target:{node:r.id,path:t.path}};n.channels.push(f)}null===(e=this._content.animations)||void 0===e||e.push(n)}}convertBuffer(e){return this._content.buffers||(this._content.buffers=[]),0===this._content.buffers.length&&(this._content.buffers=[{byteLength:0}]),this._buffers.push(e),0}convertBufferView(e){this._content.bufferViews||(this._content.bufferViews=[]);const t=this.getComponentType(e.array),i=o.ACCESSORCOMPONENTSIZE_V2[t],n=4*Math.ceil(e.count*e.itemSize*i/4),r=new DataView(new ArrayBuffer(n));let a=0;for(let t=0;t<e.count;t++)for(let n=0;n<e.itemSize;n++){let s=0;e.itemSize>4?s=e.array[t*e.itemSize+n]:0===n?s=e.array[t*e.itemSize]:1===n?s=e.array[t*e.itemSize+1]:2===n?s=e.array[t*e.itemSize+2]:3===n&&(s=e.array[t*e.itemSize+3]),e.array instanceof Float32Array?r.setFloat32(a,s,!0):e.array instanceof Uint32Array?r.setUint32(a,s,!0):e.array instanceof Uint16Array?r.setUint16(a,s,!0):e.array instanceof Int16Array?r.setInt16(a,s,!0):e.array instanceof Uint8Array?r.setUint8(a,s):e.array instanceof Int8Array&&r.setInt8(a,s),a+=i}const s={buffer:this.convertBuffer(r.buffer),byteOffset:this._byteOffset,byteLength:n,target:e.target};return this._byteOffset+=n,this._content.bufferViews.push(s),this._content.bufferViews.length-1}convertBufferViewImage(e){return n(this,void 0,void 0,(function*(){return this._content.bufferViews||(this._content.bufferViews=[]),new Promise(((t,i)=>{try{const n=new window.FileReader;n.readAsArrayBuffer(e),n.onloadend=()=>{const e=this.getPaddedArrayBuffer(n.result),i={buffer:this.convertBuffer(e),byteOffset:this._byteOffset,byteLength:e.byteLength};this._byteOffset+=e.byteLength,this._content.bufferViews.push(i),t(this._content.bufferViews.length-1)},n.onerror=i}catch(e){i(e)}}))}))}convertImage(e){if(this._content.images||(this._content.images=[]),this._imageCache[e.image.src])return this._imageCache[e.image.src];const t={},i=document.createElement("canvas");i.width=e.image.width,i.height=e.image.height;const r=i.getContext("2d");if(e.flipY&&(r.translate(0,i.height),r.scale(1,-1)),e.blob)t.mimeType=e.blob.type,this._promises.push(new Promise(((i,n)=>{try{this.convertBufferViewImage(e.blob).then((e=>{t.bufferView=e,i()}))}catch(e){n(e)}})));else{let a="image/png";if((e.image.src.endsWith(".jpg")||e.image.src.includes("image/jpeg"))&&(a="image/jpeg"),t.mimeType=a,/^data:(.*?)(;base64)?,(.*)$/.test(e.image.src)){const i=atob(e.image.src.split(",")[1]),n=e.image.src.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(i.length),a=new Uint8Array(r);for(let e=0;e<i.length;e++)a[e]=i.charCodeAt(e);const s=new Blob([r],{type:n});this._promises.push(new Promise(((e,i)=>{try{this.convertBufferViewImage(s).then((i=>{t.bufferView=i,e()})).catch(i)}catch(e){i(e)}})))}else r.drawImage(e.image,0,0,i.width,i.height),this._promises.push(new Promise(((e,r)=>{try{i.toBlob((i=>n(this,void 0,void 0,(function*(){try{const n=yield this.convertBufferViewImage(i);t.bufferView=n,e()}catch(e){r(e)}}))),a)}catch(e){r(e)}})))}return this._content.images.push(t),this._imageCache[e.image.src]=this._content.images.length-1,this._content.images.length-1}convertMaterial(e,t=!0){if(this._content.materials||(this._content.materials=[]),this._materialCache[e.id+"_"+e.version])return this._materialCache[e.id+"_"+e.version];const i={name:e.id,pbrMetallicRoughness:{}};if(e instanceof c.MaterialSpecularGlossinessData){this._extensionsUsed.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsUsed.push("KHR_materials_pbrSpecularGlossiness"),this._extensionsRequired.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsRequired.push("KHR_materials_pbrSpecularGlossiness");const n={};n.diffuseFactor=this._converter.toColorArray(e.color),n.diffuseFactor[3]=e.opacity,e.map&&t&&(n.diffuseTexture={index:this.convertTexture(e.map)}),n.specularFactor=this._converter.toColorArray(e.specular),n.glossinessFactor=e.glossiness,e.specularGlossinessMap&&t&&(n.specularGlossinessTexture={index:this.convertTexture(e.specularGlossinessMap)}),i.extensions={KHR_materials_pbrSpecularGlossiness:n}}else if(e instanceof c.MaterialUnlitData)this._extensionsUsed.includes("KHR_materials_unlit")||this._extensionsUsed.push("KHR_materials_unlit"),this._extensionsRequired.includes("KHR_materials_unlit")||this._extensionsRequired.push("KHR_materials_unlit"),i.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(e.color),i.pbrMetallicRoughness.baseColorFactor[3]=e.opacity,e.map&&t&&(i.pbrMetallicRoughness.baseColorTexture={index:this.convertTexture(e.map)}),i.extensions={KHR_materials_unlit:{}};else{const n=e;i.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(n.color),i.pbrMetallicRoughness.baseColorFactor[3]=n.opacity,n.map&&t&&(i.pbrMetallicRoughness.baseColorTexture={index:this.convertTexture(n.map)}),i.pbrMetallicRoughness.metallicFactor=n.metalnessMap?1:n.metalness,i.pbrMetallicRoughness.roughnessFactor=n.roughnessMap?1:n.roughness,n.metalnessRoughnessMap&&t?i.pbrMetallicRoughness.metallicRoughnessTexture={index:this.convertTexture(n.metalnessRoughnessMap)}:(n.metalnessMap||n.roughnessMap)&&t&&this._promises.push(new Promise(((e,t)=>{try{(0,u.combineTextures)(void 0,n.roughnessMap?n.roughnessMap.image:void 0,n.metalnessMap?n.metalnessMap.image:void 0).then((t=>{const r=n.roughnessMap||n.metalnessMap,a=new c.MapData(t.image,{blob:t.blob,wrapS:r.wrapS,wrapT:r.wrapT,minFilter:r.minFilter,magFilter:r.magFilter,center:r.center,color:r.color,offset:r.offset,repeat:r.repeat,rotation:r.rotation,texCoord:r.texCoord,flipY:r.flipY});i.pbrMetallicRoughness.metallicRoughnessTexture={index:this.convertTexture(a)},e()})).catch(t)}catch(e){t(e)}})))}return e.normalMap&&t&&(i.normalTexture={index:this.convertTexture(e.normalMap)}),e.aoMap&&t&&(i.occlusionTexture={index:this.convertTexture(e.aoMap)}),e.emissiveMap&&t&&(i.emissiveTexture={index:this.convertTexture(e.emissiveMap)}),e.emissiveness&&(i.emissiveFactor=this._converter.toColorArray(e.emissiveness)),i.alphaMode=e.alphaMode.toUpperCase(),e.alphaMode===c.MATERIAL_ALPHA.MASK&&(i.alphaCutoff=e.alphaCutoff),i.doubleSided=e.side===c.MATERIAL_SIDE.DOUBLE,this._content.materials.push(i),this._materialCache[e.id+"_"+e.version]=this._content.materials.length-1,this._materialCache[e.id+"_"+e.version]}convertMesh(e){var t;if(this._content.meshes||(this._content.meshes=[]),this._meshCache[e.id+"_"+e.version])return this._meshCache[e.id+"_"+e.version];const i={primitives:[],name:e.id};return null===(t=i.primitives)||void 0===t||t.push(this.convertPrimitive(e,e.primitive)),this._content.meshes.push(i),this._meshCache[e.id+"_"+e.version]=this._content.meshes.length-1,this._meshCache[e.id+"_"+e.version]}convertNode(e){var t;return n(this,void 0,void 0,(function*(){this._content.nodes||(this._content.nodes=[]);const i={name:this._convertForAR?this._uuidGenerator.create():e.name};if(e.transformations.length>0){let t=e.nodeMatrix;e.nodeMatrix.filter((e=>isNaN(e)||e===1/0||e===-1/0)).length>0&&(t=l.mat4.create()),i.matrix=[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}for(let t=0;t<e.data.length;t++)e.data[t]instanceof c.GeometryData&&(this._convertForAR?e.data[t].mode!==c.PRIMITIVE_MODE.POINTS&&e.data[t].mode!==c.PRIMITIVE_MODE.LINES&&e.data[t].mode!==c.PRIMITIVE_MODE.LINE_LOOP&&e.data[t].mode!==c.PRIMITIVE_MODE.LINE_STRIP&&(i.mesh=this.convertMesh(e.data[t])):i.mesh=this.convertMesh(e.data[t])),e.data[t]instanceof c.AnimationData&&this._animations.push(e.data[t]);e.children.length>0&&(i.children=[]);for(let n=0;n<e.children.length;n++)if(!0===e.children[n].visible){if(this._viewport){if(e.children[n].excludeViewports.includes(this._viewport))continue;if(e.children[n].restrictViewports.length>0&&!e.children[n].restrictViewports.includes(this._viewport))continue}const r=yield this.convertNode(e.children[n]);-1!==r&&(null===(t=i.children)||void 0===t||t.push(r))}if(void 0!==i.children&&0===i.children.length&&(i.children=void 0),performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const e={type:c.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:this._content.nodes.length/this._numberOfNodes/2,status:`GlTF conversion progress: ${this._content.nodes.length}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(s.EVENTTYPE.TASK.TASK_PROCESS,e),yield new Promise((e=>setTimeout(e,0)))}return void 0===i.camera&&void 0===i.children&&void 0===i.mesh&&void 0===i.extensions&&void 0===i.extras&&void 0===i.skin?-1:(this._content.nodes.push(i),this._nodes.push({node:e,id:this._content.nodes.length-1}),this._content.nodes.length-1)}))}convertPrimitive(e,t){const i={attributes:{},mode:e.mode};for(const e in t.attributes)if(t.attributes[e].array.length>0)if(e.includes("COLOR")){if(t.attributes[e].itemSize%4==0)i.attributes[e]=this.convertAccessor(t.attributes[e]);else if(t.attributes[e].itemSize%3==0){const n=t.attributes[e],r=new Float32Array(n.array.length/3*4);let a=0;for(let e=0;e<r.length;e+=4)r[e]=n.array[a]/(1===n.elementBytes?255:1),r[e+1]=n.array[a+1]/(1===n.elementBytes?255:1),r[e+2]=n.array[a+2]/(1===n.elementBytes?255:1),r[e+3]=1,a+=3;i.attributes[e]=this.convertAccessor(new c.AttributeData(r,4,16,n.byteOffset,4,n.normalized,n.count,n.min,n.max,n.byteStride))}}else i.attributes[e]=this.convertAccessor(t.attributes[e]);if(t.indices&&(i.indices=this.convertAccessor(t.indices)),e.material){const t=Object.keys(i.attributes).find((e=>e.includes("TEXCOORD")));i.material=this.convertMaterial(e.material,!!t)}return i}convertTexture(e){this._content.textures||(this._content.textures=[]);const t={source:this.convertImage(e)};return this._content.textures.push(t),this._content.textures.length-1}getComponentType(e){switch(!0){case e instanceof Int8Array:return 5120;case e instanceof Uint8Array:return 5121;case e instanceof Int16Array:return 5122;case e instanceof Uint16Array:return 5123;case e instanceof Uint32Array:return 5125;default:return 5126}}getMinMax(e){const t={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let i=0;i<e.count;i++)for(let n=0;n<e.itemSize;n++){let r=0;e.itemSize>4?r=e.array[i*e.itemSize+n]:0===n?r=e.array[i*e.itemSize]:1===n?r=e.array[i*e.itemSize+1]:2===n?r=e.array[i*e.itemSize+2]:3===n&&(r=e.array[i*e.itemSize+3]),t.min[n]=Math.min(t.min[n],r),t.max[n]=Math.max(t.max[n],r)}return t}getPaddedArrayBuffer(e,t=0){const i=4*Math.ceil(e.byteLength/4);if(i!==e.byteLength){const n=new Uint8Array(i);if(n.set(new Uint8Array(e)),0!==t)for(let r=e.byteLength;r<i;r++)n[r]=t;return n.buffer}return e}getType(e){switch(e){case 1:return"SCALAR";case 2:return"VEC2";case 3:default:return"VEC3";case 4:return"VEC4";case 9:return"MAT3";case 18:return"MAT4"}}reset(){this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+r.build_data.build_version,version:"2.0",extensions:{}}},this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._materialCache={},this._meshCache={},this._nodes=[],this._promises=[],this._convertForAR=!1,this._viewport=void 0}stringToArrayBuffer(e){if(void 0!==window.TextEncoder)return(new TextEncoder).encode(e).buffer;const t=new Uint8Array(new ArrayBuffer(e.length));for(let i=0,n=e.length;i<n;i++){const n=e.charCodeAt(i);t[i]=n>255?32:n}return t.buffer}}},7163:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFConverter=void 0;const n=i(7767);Object.defineProperty(t,"GLTFConverter",{enumerable:!0,get:function(){return n.GLTFConverter}})},2345:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorEngine=void 0;const r=i(7038),a=i(3858),s=i(8877),o=i(5174);t.HTMLElementAnchorEngine=class{constructor(){this._converter=s.Converter.instance,this._inputValidator=s.InputValidator.instance,this._logger=s.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return n(this,void 0,void 0,(function*(){try{const t=new a.TreeNode("htmlElementAnchors");return"tag2d"===e.format?e.data.forEach((e=>{if(!e.location||!e.text)return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Tag2D elements did not have all necessary properties.");const i=this._inputValidator.sanitize(e.text);t.data.push(new r.HTMLElementAnchorTextData({location:this._converter.toVec3(e.location),data:{color:e.color||"#000000",text:i}}))})):"anchor"===e.format&&e.data.forEach((e=>{if(!e.location||!e.data)return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");let i,n;if(e.data.position&&(i={vertical:e.data.position.vertical,horizontal:e.data.position.horizontal}),e.intersectionTarget&&("string"==typeof e.intersectionTarget||Array.isArray(e.intersectionTarget)?n=e.intersectionTarget:e.intersectionTarget.min&&e.intersectionTarget.max&&(n=new o.Box(this._converter.toVec3(e.intersectionTarget.min),this._converter.toVec3(e.intersectionTarget.max)))),e.format&&"text"!==e.format){if("image"===e.format){if(!(e.data.src&&e.data.width&&e.data.height&&e.data.alt))return void this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");const a=e.data;t.data.push(new r.HTMLElementAnchorImageData({location:this._converter.toVec3(e.location),data:{alt:a.alt,height:"string"==typeof a.height?+a.height:a.height,width:"string"==typeof a.width?+a.width:a.width,src:a.src,hidden:a.hidden,position:i},hideable:e.hideable,viewports:e.viewports,intersectionTarget:n}))}}else{if(!e.data.text)return void this._logger.warn("HTMLElementAnchorEngine.load: The text property for an Anchor element is missing.");const a=e.data,s=this._inputValidator.sanitize(a.text);t.data.push(new r.HTMLElementAnchorTextData({location:this._converter.toVec3(e.location),data:{color:a.color||"#000000",text:s,hidden:a.hidden,textAlign:a.textAlign,position:i},hideable:e.hideable,viewports:e.viewports,intersectionTarget:n}))}this._logger.warn(`HTMLElementAnchorEngine.load: The Anchor does not have a recognized format: ${e.format}`)})),t}catch(e){throw new s.ShapeDiverViewerDataProcessingError("HTMLElementAnchorEngine.load: Loading of anchors failed.")}}))}}},9780:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorEngine=void 0;const n=i(2345);Object.defineProperty(t,"HTMLElementAnchorEngine",{enumerable:!0,get:function(){return n.HTMLElementAnchorEngine}})},421:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialEngine=void 0;const r=i(3858),a=i(8877),s=i(7038),o=i(887),l=i(7244);t.MaterialEngine=class{constructor(){this._converter=a.Converter.instance,this._httpClient=a.HttpClient.instance,this._logger=a.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return n(this,void 0,void 0,(function*(){const t=new r.TreeNode(e.name||"material");if(!e)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Invalid content was provided to material engine.");let i=new s.MaterialStandardData;if(!e.data)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: No material data was provided to material engine.");{const t=e.data;let n;if(t.materialpreset&&(n=this.loadPresetMaterialDefinition(t.materialpreset)),t.materialType&&"standard"!==t.materialType);else if(t.version)if("1.0"===t.version)i=yield this.loadMaterialV3(this.loadMaterialDefinitionV1(t,n));else if("2.0"===t.version)i=yield this.loadMaterialV3(this.loadMaterialDefinitionV2(t,n));else{if("3.0"!==t.version)throw new a.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Material data version not supported.");i=yield this.loadMaterialV3(this.loadMaterialDefinitionV3(t,n))}}return t.data.push(i),t}))}loadMap(e,t){return n(this,void 0,void 0,(function*(){let i;return i=t?(yield this._httpClient.loadTexture("https://viewer.shapediver.com/v2/materials/1024/"+t+"/"+e)).data:(yield this._httpClient.loadTexture(e)).data,new s.MapData(i.image,{blob:i.blob})}))}loadMapWithProperties(e){return n(this,void 0,void 0,(function*(){const t=(yield this._httpClient.loadTexture(e.href)).data,i=1===e.wrapS?s.TEXTURE_WRAPPING.CLAMP_TO_EDGE:2===e.wrapS?s.TEXTURE_WRAPPING.MIRRORED_REPEAT:s.TEXTURE_WRAPPING.REPEAT,n=1===e.wrapT?s.TEXTURE_WRAPPING.CLAMP_TO_EDGE:2===e.wrapT?s.TEXTURE_WRAPPING.MIRRORED_REPEAT:s.TEXTURE_WRAPPING.REPEAT,r=e.center?o.vec2.fromValues(e.center[0],e.center[1]):o.vec2.fromValues(0,0),a=e.color?o.vec4.fromValues(e.color[0]/255,e.color[1]/255,e.color[2]/255,e.color[3]/255):o.vec4.fromValues(1,1,1,1),l=e.offset?o.vec2.fromValues(e.offset[0],e.offset[1]):o.vec2.fromValues(0,0),c=e.repeat?o.vec2.fromValues(e.repeat[0],e.repeat[1]):o.vec2.fromValues(1,1);return new s.MapData(t.image,{blob:t.blob,wrapS:i,wrapT:n,minFilter:s.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR,magFilter:s.TEXTURE_FILTERING.LINEAR,center:r,color:a,offset:l,repeat:c,rotation:e.rotation||0})}))}loadMaterialDefinitionV1(e,t={}){return e.color?t.color=e.color:e.diffuse&&(t.color=e.diffuse),(e.shine||0===e.shine)&&(t.metalness=Math.min(1,e.shine),t.roughness=1-Math.min(1,e.shine)),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),e.bitmaptexture&&(t.bitmaptexture={href:e.bitmaptexture}),e.bumptexture&&(t.bumptexture={href:e.bumptexture}),e.transparencytexture&&(t.transparencytexture={href:e.transparencytexture}),t}loadMaterialDefinitionV2(e,t={}){return e.color&&(t.color=e.color),t.side=e.side,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaThreshold=e.alphaThreshold),e.bitmaptexture&&(t.bitmaptexture={href:e.bitmaptexture}),e.metalnesstexture&&(t.metalnesstexture={href:e.metalnesstexture}),e.roughnesstexture&&(t.roughnesstexture={href:e.roughnesstexture}),e.bumptexture&&(t.bumptexture={href:e.bumptexture}),e.normaltexture&&(t.normaltexture={href:e.normaltexture}),e.transparencytexture&&(t.transparencytexture={href:e.transparencytexture}),t}loadMaterialDefinitionV3(e,t={}){return e.color&&(t.color=e.color),t.side=e.side,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.transparency=e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaThreshold=e.alphaThreshold),(e.bumpAmplitude||0===e.bumpAmplitude)&&(t.bumpAmplitude=e.bumpAmplitude),e.bitmaptexture&&(t.bitmaptexture=e.bitmaptexture),e.metalnesstexture&&(t.metalnesstexture=e.metalnesstexture),e.roughnesstexture&&(t.roughnesstexture=e.roughnesstexture),e.bumptexture&&(t.bumptexture=e.bumptexture),e.normaltexture&&(t.normaltexture=e.normaltexture),e.transparencytexture&&(t.transparencytexture=e.transparencytexture),t}loadMaterialV3(e){return n(this,void 0,void 0,(function*(){const t=new s.MaterialStandardData,i=[];return e.color&&(t.color=e.color),t.side="front"===e.side?s.MATERIAL_SIDE.FRONT:"back"===e.side?s.MATERIAL_SIDE.BACK:s.MATERIAL_SIDE.DOUBLE,(e.metalness||0===e.metalness)&&(t.metalness=e.metalness),(e.roughness||0===e.roughness)&&(t.roughness=e.roughness),e.hasOwnProperty("transparency")&&(t.opacity=1-e.transparency),(e.alphaThreshold||0===e.alphaThreshold)&&(t.alphaCutoff=e.alphaThreshold),(e.bumpAmplitude||0===e.bumpAmplitude)&&(t.bumpScale=e.bumpAmplitude),e.bitmaptexture&&i.push(this.loadMapWithProperties(e.bitmaptexture).then((e=>(e&&(t.map=e),e)))),e.metalnesstexture&&i.push(this.loadMapWithProperties(e.metalnesstexture).then((e=>(e&&(t.metalnessMap=e),e)))),e.roughnesstexture&&i.push(this.loadMapWithProperties(e.roughnesstexture).then((e=>(e&&(t.roughnessMap=e),e)))),e.bumptexture&&i.push(this.loadMapWithProperties(e.bumptexture).then((e=>(e&&(t.bumpMap=e),e)))),e.normaltexture&&i.push(this.loadMapWithProperties(e.normaltexture).then((e=>(e&&(t.normalMap=e),e)))),e.transparencytexture&&i.push(this.loadMapWithProperties(e.transparencytexture).then((e=>(e&&(t.alphaMap=e),e)))),yield Promise.all(i),t}))}loadPresetMaterial(e){return n(this,void 0,void 0,(function*(){return this.loadMaterialV3(this.loadPresetMaterialDefinition(e))}))}loadPresetMaterialDefinition(e){const t={},i=this.getClassAndSpecificId(e);return l.materialDatabase[i.class]&&l.materialDatabase[i.class][i.specific]?(this.assignSpecificDefinition(i,l.materialDatabase[i.class][i.specific],t),this.assignGeneralDefinition(i,l.materialDatabase[i.class].properties,l.materialDatabase[i.class][i.specific],t)):l.materialDatabase[i.class]&&l.materialDatabase[i.class]["00"]?(this.assignSpecificDefinition({class:i.class,specific:"00"},l.materialDatabase[i.class]["00"],t),this.assignGeneralDefinition({class:i.class,specific:"00"},l.materialDatabase[i.class].properties,l.materialDatabase[i.class]["00"],t)):(this.assignSpecificDefinition({class:"00",specific:"00"},l.materialDatabase["00"]["00"],t),this.assignGeneralDefinition({class:"00",specific:"00"},l.materialDatabase["00"].properties,l.materialDatabase["00"]["00"],t)),t}assignGeneralDefinition(e,t,i,n){t.transparencytexture&&!i.transparencytexture&&(n.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.transparencytexture}),t.hasOwnProperty("alphaThreshold")&&!i.hasOwnProperty("alphaThreshold")&&(n.alphaThreshold=t.alphaThreshold),t.bumptexture&&!i.bumptexture&&(n.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.bumptexture}),t.hasOwnProperty("bumpAmplitude")&&!i.hasOwnProperty("bumpAmplitude")&&(n.bumpAmplitude=t.bumpAmplitude),t.color&&!i.color&&(n.color=t.color),t.bitmaptexture&&!i.bitmaptexture&&(n.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.bitmaptexture}),t.hasOwnProperty("metalness")&&!i.hasOwnProperty("metalness")&&(n.metalness=t.metalness),t.metalnesstexture&&!i.metalnesstexture&&(n.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.metalnesstexture}),t.normaltexture&&!i.normaltexture&&(n.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.normaltexture}),t.hasOwnProperty("transparency")&&!i.hasOwnProperty("transparency")&&(n.transparency=t.transparency),t.hasOwnProperty("roughness")&&!i.hasOwnProperty("roughness")&&(n.roughness=t.roughness),t.roughnesstexture&&!i.roughnesstexture&&(n.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+t.roughnesstexture}),t.side&&!i.side&&(n.side=t.side)}assignSpecificDefinition(e,t,i){t.transparencytexture&&(i.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.transparencytexture}),t.hasOwnProperty("alphaThreshold")&&(i.alphaThreshold=t.alphaThreshold),t.bumptexture&&(i.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.bumptexture}),t.hasOwnProperty("bumpAmplitude")&&(i.bumpAmplitude=t.bumpAmplitude),t.color&&(i.color=t.color),t.bitmaptexture&&(i.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.bitmaptexture}),t.hasOwnProperty("metalness")&&(i.metalness=t.metalness),t.metalnesstexture&&(i.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.metalnesstexture}),t.normaltexture&&(i.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.normaltexture}),t.hasOwnProperty("transparency")&&(i.transparency=t.transparency),t.hasOwnProperty("roughness")&&(i.roughness=t.roughness),t.roughnesstexture&&(i.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+t.roughnesstexture}),t.side&&(i.side=t.side)}getClassAndSpecificId(e){e<100&&e%10==0&&(e/=10),e<10&&(e*=100);const t=e=>String(e).padStart(2,"0").slice(0,2);return{class:t(Math.floor(e/100)),specific:t(e-100*Math.floor(e/100))}}}},4320:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialEngine=void 0;const n=i(421);Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return n.MaterialEngine}})},7244:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materialDatabase=void 0,t.materialDatabase={"00":{"00":{name:"Default material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Default materials"}},"01":{"01":{name:"Default groundplane material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Groundplane materials"}},"02":{"00":{name:"Default plastic material",color:[211,211,211,255],metalness:0,roughness:1,normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Plastic materials"}},"03":{"00":{name:"Default metal material",color:[205,205,205,255],roughness:.25},"01":{name:"Used metal material 1",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"02":{name:"Used metal material 2",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"03":{name:"Used metal material 3",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},10:{name:"Gold material",color:[230,207,92,255],roughness:0},11:{name:"Used gold material",color:[230,207,92,255],roughness:0,roughnesstexture:"roughnessMap.jpg"},21:{name:"Hammered metal material",color:[205,205,205,255],roughness:1,normaltexture:"normalMap.jpg"},properties:{name:"Metal materials",metalness:1}},"04":{"00":{name:"Default glass material",color:[211,211,211,255],metalness:1,roughness:0,transparency:.75},properties:{name:"Glass materials"}},"05":{"00":{bitmaptexture:"map.jpg",name:"Default wood material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Wood floor material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Natural oak material",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},11:{bitmaptexture:"map.jpg",name:"Premium oak material",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Wood materials",color:[211,211,211,255],metalness:0,roughness:1}},"06":{"00":{bitmaptexture:"map.jpg",name:"Default leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Dark brown leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"02":{bitmaptexture:"map.jpg",name:"Black leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Worn leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Leather materials",metalness:0,roughness:1}},"07":{"00":{bitmaptexture:"map.jpg",name:"Default fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Grey fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Fabric materials",metalness:1,roughness:1}}}},3418:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFEngine=void 0;const r=i(3858),a=i(8877),s=i(7038),o=i(4767),l=i(9116);t.SDTFEngine=class{constructor(){this._logger=a.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,t){return n(this,void 0,void 0,(function*(){const i=new r.TreeNode("sdtf");if(!e||e&&!e.href)throw new a.ShapeDiverViewerDataProcessingError("SDTFEngine.loadContent: Invalid content was provided to geometry engine.");const n=(t?yield(0,o.create)({authToken:t}):yield(0,o.create)()).createParser();this._parsedFile=yield n.readFromUrl(e.href),i.data.push(yield this.createSDTFOverview());for(let e=0;e<this._parsedFile.chunks.length;e++)i.children.push(yield this.loadChunk(this._parsedFile.chunks[e],e));return i}))}createSDTFOverview(){var e,t;return n(this,void 0,void 0,(function*(){const i={};for(let n=0;n<this._parsedFile.attributes.length;n++){const r=this._parsedFile.attributes[n];for(let n in r.entries){const a=r.entries[n],s=yield a.getContent(),o=void 0===a.typeHint?"undefined":a.typeHint.name,c=i[n]?i[n].filter((e=>e.typeHint===o)):[];if(i[n]&&c.length>0){const i=c[0];i.count++,l.SdtfPrimitiveTypeGuard.isStringType(o)&&((null===(e=i.values)||void 0===e?void 0:e.includes(s))||null===(t=i.values)||void 0===t||t.push(s)),l.SdtfPrimitiveTypeGuard.isNumberType(o)&&(i.min=Math.min(s,i.min),i.max=Math.max(s,i.max))}else i[n]?i[n].push({typeHint:o,count:1}):i[n]=[{typeHint:o,count:1}],l.SdtfPrimitiveTypeGuard.isStringType(o)&&(i[n][i[n].length-1].values=[s]),l.SdtfPrimitiveTypeGuard.isNumberType(o)&&(i[n][i[n].length-1].min=s,i[n][i[n].length-1].max=s)}}return new s.SDTFOverviewData(i)}))}loadAttributes(e){var t,i,r,a;return n(this,void 0,void 0,(function*(){const o=new s.SDTFAttributesData;for(let c in e.entries)if(l.SdtfPrimitiveTypeGuard.isBooleanType(null===(t=e.entries[c].typeHint)||void 0===t?void 0:t.name)||l.SdtfPrimitiveTypeGuard.isColorType(null===(i=e.entries[c].typeHint)||void 0===i?void 0:i.name)||l.SdtfPrimitiveTypeGuard.isNumberType(null===(r=e.entries[c].typeHint)||void 0===r?void 0:r.name)||l.SdtfPrimitiveTypeGuard.isStringType(null===(a=e.entries[c].typeHint)||void 0===a?void 0:a.name)){const t=void 0===e.entries[c].typeHint?"undefined":e.entries[c].typeHint.name;o.attributes[c]=new s.SDTFAttributeData(t,yield e.entries[c].getContent())}else{const t=void 0===e.entries[c].typeHint?"undefined":e.entries[c].typeHint.name;o.attributes[c]=new s.SDTFAttributeData(t,(()=>n(this,void 0,void 0,(function*(){return yield e.entries[c].getContent()}))))}return o}))}loadChunk(e,t){return n(this,void 0,void 0,(function*(){const i=new r.TreeNode(e.name||"chunk_"+t);if(void 0!==e.attributes&&i.data.push(yield this.loadAttributes(e.attributes)),void 0!==e.items&&e.items.length>0)for(let t=0,n=e.items.length;t<n;t++)i.addChild(yield this.loadItem(e.items[t],t));if(void 0!==e.nodes&&e.nodes.length>0)for(let t=0,n=e.nodes.length;t<n;t++)i.addChild(yield this.loadNode(e.nodes[t],t));return i}))}loadItem(e,t){return n(this,void 0,void 0,(function*(){const i=new r.TreeNode(t+"");let a;void 0!==e.attributes&&(a=yield this.loadAttributes(e.attributes));const o=void 0===e.typeHint?"undefined":e.typeHint.name;let c;return c=l.SdtfPrimitiveTypeGuard.isBooleanType(o)||l.SdtfPrimitiveTypeGuard.isColorType(o)||l.SdtfPrimitiveTypeGuard.isNumberType(o)||l.SdtfPrimitiveTypeGuard.isStringType(o)?new s.SDTFItemData(o,yield e.getContent(),null==a?void 0:a.attributes):new s.SDTFItemData(o,(()=>n(this,void 0,void 0,(function*(){return yield e.getContent()}))),null==a?void 0:a.attributes),i.data.push(c),i}))}loadNode(e,t){return n(this,void 0,void 0,(function*(){const i=new r.TreeNode(e.name||"node_"+t);if(void 0!==e.attributes&&i.data.push(yield this.loadAttributes(e.attributes)),void 0!==e.items&&e.items.length>0)for(let t=0,n=e.items.length;t<n;t++)i.addChild(yield this.loadItem(e.items[t],t));if(void 0!==e.nodes&&e.nodes.length>0)for(let t=0,n=e.nodes.length;t<n;t++)i.addChild(yield this.loadNode(e.nodes[t],t));return i}))}}},3705:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFEngine=void 0;const n=i(3418);Object.defineProperty(t,"SDTFEngine",{enumerable:!0,get:function(){return n.SDTFEngine}})},3066:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=void 0,(i=t.TAG3D_JUSTIFICATION||(t.TAG3D_JUSTIFICATION={})).TOP_LEFT="TL",i.TOP_CENTER="TC",i.TOP_RIGHT="TR",i.MIDDLE_LEFT="ML",i.MIDDLE_CENTER="MC",i.MIDDLE_RIGHT="MR",i.BOTTOM_LEFT="BL",i.BOTTOM_CENTER="BC",i.BOTTOM_RIGHT="BR"},7761:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACCESSORTYPE=t.ACCESSORCOMPONENTSIZE=t.ACCESSORCOMPONENTTYPE=void 0,t.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint32Array,5125:Uint32Array,5126:Float32Array},t.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},t.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,VEC7:7,VEC10:10,VEC12:12,MAT2:4,MAT3:9,MAT4:16}},2e3:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACCESSORTYPE=t.ACCESSORCOMPONENTSIZE=t.ACCESSORCOMPONENTTYPE=void 0,t.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint16Array,5125:Uint32Array,5126:Float32Array},t.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},t.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}},4465:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=t.ACCESSORTYPE_V2=t.ACCESSORCOMPONENTSIZE_V2=t.ACCESSORCOMPONENTTYPE_V2=t.ACCESSORTYPE_V1=t.ACCESSORCOMPONENTSIZE_V1=t.ACCESSORCOMPONENTTYPE_V1=void 0;const n=i(3066);Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return n.TAG3D_JUSTIFICATION}});const r=i(7761);Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V1",{enumerable:!0,get:function(){return r.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V1",{enumerable:!0,get:function(){return r.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V1",{enumerable:!0,get:function(){return r.ACCESSORTYPE}});const a=i(2e3);Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V2",{enumerable:!0,get:function(){return a.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V2",{enumerable:!0,get:function(){return a.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V2",{enumerable:!0,get:function(){return a.ACCESSORTYPE}})},5656:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tag3dEngine=void 0;const o=a(i(5232)),l=i(3858),c=i(8877),u=i(7038),h=i(9577),d=i(4456),f=i(5743);t.Tag3dEngine=class{constructor(){this._converter=c.Converter.instance,this._httpClient=c.HttpClient.instance,this._logger=c.Logger.instance,this._stateEngine=c.StateEngine.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return s(this,void 0,void 0,(function*(){this._font||(this._font=new d.Font(f.font),this._stateEngine.fontLoaded.resolve(!0));const t=new l.TreeNode("tag3d");if(!1===this._stateEngine.fontLoaded.resolved&&(yield this._stateEngine.fontLoaded),!e)throw new c.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: Invalid content was provided to tag3d engine.");if(!e.data||!Array.isArray(e.data))throw new c.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: No tag3d data was provided to tag3d engine.");for(let r=0;r<e.data.length;r++){const a=e.data[r];if(a.size=a.size?+a.size:1,void 0===a.text||""===a.text||/^[ \t\n\r]*$/.test(a.text))continue;const s=a.text.split(/\r\n|\r|\n/g);let c=[];for(let e=0;e<s.length;++e){if(""===s[e])continue;let t=new h.TextGeometry(s[e],{size:a.size,height:a.size/10,font:this._font});c.push(t)}let d=new o.Object3D;for(let e of c)d.add(new o.Mesh(e,new o.MeshPhongMaterial));let f,p,m,g=0;g=0;for(let e of d.children)f=(new o.Box3).setFromObject(e),m=f.max.y-f.min.y,g=Math.max(g,m);g*=1.15,c.forEach(((e,t)=>{e.translate(0,(-t-1)*g,0)})),f=(new o.Box3).setFromObject(d),p=f.max.x-f.min.x,m=f.max.y-f.min.y;var i=new o.Vector3(0,0,0);switch(a.justification){case"TL":break;case"TC":i.x=.5*-p;break;case"TR":i.x=-p;break;case"ML":i.y=.5*m;break;case"MC":i.x=.5*-p,i.y=.5*m;break;case"MR":i.x=-p,i.y=.5*m;break;case"BL":i.y=m;break;case"BC":i.x=.5*-p,i.y=m;break;case"BR":i.x=-p,i.y=m}for(let e of c)e.translate(i.x,i.y,i.z);if(a.location.hasOwnProperty("xAxis")){var n=new o.Matrix4;n.set(a.location.xAxis.X,a.location.yAxis.X,a.location.normal.X,0,a.location.xAxis.Y,a.location.yAxis.Y,a.location.normal.Y,0,a.location.xAxis.Z,a.location.yAxis.Z,a.location.normal.Z,0,0,0,0,1);for(let e of c)e.applyMatrix4(n),e.translate(a.location.origin.X,a.location.origin.Y,a.location.origin.Z)}for(let e of c){const i={};for(let t in e.attributes){let n=t.toUpperCase();if(/\d/.test(n)&&!n.includes("_")){const e=n.search(/\d/);n=n.substring(0,e)+"_"+n.substring(e,n.length)}else"TEXCOORD"===n||"COLOR"===n||"JOINTS"===n||"WEIGHTS"===n?n+="_0":"UV"===n&&(n="TEXCOORD_0");i[n]=new u.AttributeData(e.attributes[t].array,e.attributes[t].itemSize,0,0,0,!1,e.attributes[t].array.length/e.attributes[t].itemSize)}const n=new l.TreeNode("tag3d_"+e);n.data.push(new u.GeometryData(new u.PrimitiveData(i,null),u.PRIMITIVE_MODE.TRIANGLES,new u.MaterialStandardData({color:a.color,metalness:0,roughness:1}))),t.children.push(n)}}return t}))}}},5743:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.font=void 0,t.font={glyphs:{0:{ha:946,x_min:0,x_max:0,o:"m 478 88 b 740 472 651 88 740 221 l 740 528 b 475 908 740 758 643 908 b 207 525 307 908 207 769 l 207 469 b 478 88 207 218 313 88 m 478 -12 b 83 468 240 -12 83 179 l 83 524 b 475 1006 83 817 232 1006 b 863 526 719 1006 863 810 l 863 471 b 478 -12 863 182 722 -12 "},1:{ha:554,x_min:0,x_max:0,o:"m 268 874 l 46 714 l 46 826 l 276 993 l 389 993 l 389 0 l 268 0 "},2:{ha:769,x_min:0,x_max:0,o:"m 26 28 l 421 443 b 564 731 511 539 564 629 b 386 908 564 842 499 908 b 176 688 271 908 196 843 l 64 688 b 386 1006 79 882 197 1006 b 686 726 569 1006 686 897 b 486 365 686 604 608 485 l 213 99 l 692 99 l 692 0 l 26 0 "},3:{ha:839,x_min:0,x_max:0,o:"m 403 -12 b 56 293 192 -12 63 119 l 167 293 b 406 85 178 175 249 85 b 632 276 561 85 632 160 b 422 469 632 404 563 469 l 347 469 l 347 571 l 417 571 b 603 740 546 571 603 632 b 422 907 603 835 543 907 b 203 719 299 907 215 832 l 97 719 b 422 1006 104 876 233 1006 b 721 743 611 1006 721 881 b 564 526 721 631 654 564 b 756 276 681 496 756 414 b 403 -12 756 96 608 -12 "},4:{ha:857,x_min:0,x_max:0,o:"m 551 208 l 54 208 l 54 247 l 508 993 l 669 993 l 669 307 l 807 307 l 807 208 l 669 208 l 669 0 l 551 0 m 551 307 l 551 901 l 207 307 "},5:{ha:815,x_min:0,x_max:0,o:"m 390 -12 b 60 268 176 -12 74 106 l 175 268 b 389 85 194 160 238 85 b 607 325 524 85 607 175 b 399 557 607 465 525 557 b 164 461 283 557 217 521 l 119 461 l 119 993 l 678 993 l 678 889 l 219 889 l 219 586 b 422 654 260 624 328 654 b 731 325 600 654 731 528 b 390 -12 731 115 579 -12 "},6:{ha:860,x_min:0,x_max:0,o:"m 440 -12 b 83 439 169 -12 83 190 l 83 463 b 472 1006 83 819 244 1006 b 763 765 626 1006 736 925 l 647 765 b 464 907 625 857 575 907 b 203 510 314 907 208 772 b 458 644 250 590 343 644 b 783 319 656 644 783 501 b 440 -12 783 121 650 -12 m 440 82 b 660 314 571 82 660 174 b 439 550 660 457 574 550 b 211 331 306 550 211 460 b 440 82 211 168 307 82 "},7:{ha:729,x_min:0,x_max:0,o:"m 549 896 l 44 896 l 44 993 l 699 993 l 699 976 l 326 0 l 203 0 "},8:{ha:843,x_min:0,x_max:0,o:"m 422 -12 b 79 282 260 -12 79 85 b 267 539 79 415 161 501 b 117 747 172 575 117 650 b 422 1006 117 908 269 1006 b 726 750 576 1006 726 906 b 574 540 726 650 665 581 b 764 285 689 499 764 413 b 422 -12 764 86 590 -12 m 422 86 b 640 289 544 86 640 157 b 425 486 640 419 543 486 b 203 286 307 486 203 418 b 422 86 203 156 307 86 m 426 582 b 604 749 532 582 604 643 b 422 911 604 844 525 911 b 239 746 319 911 239 849 b 426 582 239 642 325 582 "},9:{ha:861,x_min:0,x_max:0,o:"m 403 -11 b 83 244 219 -11 110 85 l 200 244 b 406 88 222 147 278 88 b 660 482 564 88 657 218 b 403 350 613 401 517 350 b 76 675 210 350 76 488 b 419 1007 76 874 210 1007 b 776 563 654 1007 776 849 l 776 500 b 403 -11 776 171 640 -11 m 421 444 b 649 660 554 444 649 531 b 419 913 649 822 553 913 b 200 681 289 913 200 821 b 421 444 200 538 286 444 "}," ":{ha:368,x_min:0,x_max:0,o:""},"!":{ha:397,x_min:0,x_max:0,o:"m 199 -7 b 110 82 150 -7 110 32 b 199 171 110 132 150 171 b 288 82 247 171 288 132 b 199 -7 288 32 247 -7 m 136 993 l 264 993 l 244 281 l 156 281 "},'"':{ha:521,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 m 311 993 l 436 993 l 415 653 l 332 653 "},"#":{ha:699,x_min:0,x_max:0,o:"m 386 392 l 251 392 l 215 138 l 121 138 l 157 392 l 42 392 l 42 489 l 172 489 l 199 672 l 81 672 l 81 769 l 213 769 l 246 993 l 340 993 l 307 769 l 442 769 l 475 993 l 569 993 l 536 769 l 657 769 l 657 672 l 522 672 l 496 489 l 618 489 l 618 392 l 481 392 l 444 138 l 350 138 m 267 489 l 401 489 l 428 672 l 293 672 "},$:{ha:871,x_min:0,x_max:0,o:"m 396 -11 b 63 303 158 6 79 143 l 179 303 b 396 83 193 194 226 99 l 396 469 b 103 736 213 504 103 569 b 396 1004 103 881 222 993 l 396 1129 l 478 1129 l 478 1003 b 767 732 644 988 749 893 l 658 732 b 478 908 638 839 581 894 l 478 561 b 788 281 682 525 788 460 b 478 -11 788 122 658 0 l 478 -187 l 396 -187 m 672 272 b 478 456 672 375 629 424 l 478 83 b 672 272 589 94 672 169 m 213 747 b 396 575 213 660 242 607 l 396 910 b 213 747 279 900 213 833 "},"%":{ha:1089,x_min:0,x_max:0,o:"m 275 622 b 397 767 350 622 397 674 b 275 911 397 856 350 911 b 153 765 201 911 153 860 b 275 622 153 671 201 622 m 275 532 b 47 764 157 532 47 629 b 275 1001 47 901 154 1001 b 503 767 399 1001 503 901 b 275 532 503 629 394 532 m 794 993 l 900 993 l 293 0 l 188 0 m 814 79 b 936 224 889 79 936 131 b 814 368 936 313 889 368 b 692 222 740 368 692 317 b 814 79 692 128 740 79 m 814 -11 b 586 221 696 -11 586 86 b 814 458 586 358 693 458 b 1042 224 938 458 1042 358 b 814 -11 1042 86 933 -11 "},"&":{ha:953,x_min:0,x_max:0,o:"m 732 203 l 899 0 l 758 0 l 660 119 b 385 -10 597 47 510 -10 b 71 263 203 -10 71 99 b 299 561 71 419 171 499 b 211 771 240 636 211 704 b 454 999 211 921 329 999 b 671 794 576 999 671 914 b 458 538 671 674 585 592 l 667 283 l 788 513 l 894 513 m 389 85 b 600 193 468 85 540 121 l 353 494 b 188 274 256 447 188 390 b 389 85 188 154 264 85 m 322 769 b 408 601 322 719 354 669 b 563 797 519 651 563 701 b 450 908 563 861 517 908 b 322 769 381 908 322 867 "},"'":{ha:294,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 "},"(":{ha:447,x_min:0,x_max:0,o:"m 304 -206 b 74 433 176 -56 74 157 b 304 1074 74 710 176 924 l 419 1074 b 194 433 294 918 194 719 b 419 -206 194 147 294 -50 l 304 -206 "},")":{ha:447,x_min:0,x_max:0,o:"m 28 -201 b 253 439 153 -46 253 153 b 28 1078 253 725 153 922 l 143 1078 b 374 439 271 928 374 715 b 143 -201 374 163 271 -51 l 28 -201 "},"*":{ha:586,x_min:0,x_max:0,o:"m 114 625 l 229 779 l 58 819 l 89 913 l 253 846 l 243 1032 l 344 1032 l 335 846 l 497 913 l 528 819 l 356 779 l 471 625 l 393 568 l 290 735 l 193 568 "},"+":{ha:721,x_min:0,x_max:0,o:"m 310 426 l 50 426 l 50 524 l 310 524 l 310 804 l 411 804 l 411 524 l 671 524 l 671 426 l 411 426 l 411 146 l 310 146 "},",":{ha:392,x_min:0,x_max:0,o:"m 50 -132 l 183 172 l 296 119 l 125 -171 "},"-":{ha:464,x_min:0,x_max:0,o:"m 83 436 l 381 436 l 381 328 l 83 328 "},".":{ha:392,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 "},"/":{ha:560,x_min:0,x_max:0,o:"m 413 1078 l 518 1078 l 114 -206 l 8 -206 "},":":{ha:406,x_min:0,x_max:0,o:"m 203 -7 b 114 82 154 -7 114 32 b 203 171 114 132 154 171 b 292 82 251 171 292 132 b 203 -7 292 32 251 -7 m 203 406 b 114 494 154 406 114 444 b 203 583 114 544 154 583 b 292 494 251 583 292 544 b 203 406 292 444 251 406 "},";":{ha:406,x_min:0,x_max:0,o:"m 29 -132 l 163 172 l 275 119 l 104 -171 m 215 406 b 126 494 167 406 126 444 b 215 583 126 544 167 583 b 304 494 264 583 304 544 b 215 406 304 444 264 406 "},"<":{ha:700,x_min:0,x_max:0,o:"m 74 433 l 74 461 l 607 763 l 607 651 l 242 447 l 607 243 l 607 132 "},"=":{ha:672,x_min:0,x_max:0,o:"m 56 372 l 617 372 l 617 272 l 56 272 m 56 622 l 617 622 l 617 522 l 56 522 "},">":{ha:700,x_min:0,x_max:0,o:"m 93 243 l 458 447 l 93 651 l 93 763 l 626 461 l 626 433 l 93 132 "},"?":{ha:679,x_min:0,x_max:0,o:"m 249 350 b 392 600 249 463 322 532 b 493 771 446 654 493 704 b 344 910 493 853 447 910 b 160 729 240 910 169 839 l 51 729 b 346 1006 61 892 176 1006 b 610 775 535 1006 610 892 b 474 543 610 672 540 607 b 351 340 411 483 351 425 l 351 281 l 249 281 m 297 -7 b 208 82 249 -7 208 32 b 297 171 208 132 249 171 b 386 82 346 171 386 132 b 297 -7 386 32 346 -7 "},"@":{ha:1271,x_min:0,x_max:0,o:"m 638 -204 b 63 361 267 -204 63 65 b 656 956 63 701 335 956 b 1208 447 988 956 1208 733 b 947 93 1208 186 1058 93 b 788 213 835 93 799 140 b 581 83 747 140 667 83 b 357 325 446 83 357 175 b 631 647 357 511 479 647 b 799 553 729 647 779 600 l 808 636 l 924 636 l 882 286 b 949 176 872 213 896 176 b 1108 444 1028 176 1108 256 b 656 864 1108 693 942 864 b 169 364 375 864 169 658 b 638 -112 169 111 328 -112 b 965 0 789 -112 879 -74 l 1072 0 b 638 -204 1001 -121 838 -204 m 606 172 b 783 399 692 172 783 251 b 639 556 783 504 729 556 b 475 326 551 556 475 472 b 606 172 475 229 531 172 "},A:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 "},B:{ha:864,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 743 736 608 993 743 932 l 743 731 b 593 521 743 640 707 560 b 792 283 738 486 792 413 l 792 278 b 465 0 792 90 664 0 l 125 0 m 463 94 b 674 279 607 94 674 158 l 674 285 b 446 465 674 407 606 465 l 243 465 l 243 94 m 424 560 b 625 735 569 560 625 613 l 625 740 b 421 899 625 853 560 899 l 243 899 l 243 560 "},C:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 "},D:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 "},E:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 "},F:{ha:758,x_min:0,x_max:0,o:"m 125 993 l 706 993 l 706 894 l 246 894 l 246 543 l 604 543 l 604 444 l 246 444 l 246 0 l 125 0 "},G:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 "},H:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 "},I:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 "},J:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 "},K:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 "},L:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},M:{ha:1189,x_min:0,x_max:0,o:"m 125 993 l 293 993 l 600 219 l 897 993 l 1064 993 l 1064 0 l 943 0 l 943 836 l 614 0 l 576 0 l 236 836 l 236 0 l 125 0 "},N:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 "},O:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 "},P:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 407 993 b 754 703 597 993 754 910 l 754 697 b 407 404 754 486 596 404 l 246 404 l 246 0 l 125 0 m 415 500 b 633 697 557 500 633 569 l 633 703 b 415 896 633 843 550 896 l 246 896 l 246 500 "},Q:{ha:1126,x_min:0,x_max:0,o:"m 776 32 b 568 -12 715 3 644 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 864 86 1050 325 981 178 l 989 -53 l 915 -124 m 568 88 b 704 113 618 88 664 96 l 593 238 l 667 308 l 793 165 b 925 494 878 238 925 353 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 "},R:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 "},S:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 "},T:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 "},U:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 "},V:{ha:908,x_min:0,x_max:0,o:"m 42 993 l 161 993 l 457 117 l 753 993 l 867 993 l 524 0 l 379 0 "},W:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 "},X:{ha:913,x_min:0,x_max:0,o:"m 390 510 l 85 993 l 218 993 l 465 603 l 711 993 l 835 993 l 526 510 l 850 0 l 714 0 l 449 418 l 183 0 l 63 0 "},Y:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 "},Z:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 "},"[":{ha:494,x_min:0,x_max:0,o:"m 122 1078 l 433 1078 l 433 986 l 238 986 l 238 -114 l 433 -114 l 433 -206 l 122 -206 "},"\\":{ha:560,x_min:0,x_max:0,o:"m 42 1078 l 147 1078 l 551 -206 l 446 -206 "},"]":{ha:494,x_min:0,x_max:0,o:"m 61 -114 l 257 -114 l 257 986 l 61 986 l 61 1078 l 372 1078 l 372 -206 l 61 -206 "},"^":{ha:704,x_min:0,x_max:0,o:"m 293 993 l 411 993 l 643 567 l 526 567 l 350 894 l 175 567 l 61 567 "},_:{ha:547,x_min:0,x_max:0,o:"m -1 -128 l 549 -128 l 549 -219 l -1 -219 "},"`":{ha:556,x_min:0,x_max:0,o:"m 101 1056 l 246 1056 l 332 851 l 246 851 "},a:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},b:{ha:871,x_min:0,x_max:0,o:"m 478 -12 b 232 119 360 -12 274 47 l 232 0 l 117 0 l 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},c:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 "},d:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},e:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},f:{ha:481,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 358 1078 142 992 214 1078 b 444 1064 396 1078 415 1074 l 444 967 b 363 982 424 975 394 982 b 257 857 288 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 "},g:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 "},h:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},i:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},j:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},k:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 "},l:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 "},m:{ha:1264,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 615 b 449 739 265 683 344 739 b 661 603 542 739 624 700 b 910 739 711 697 819 739 b 1154 450 1040 739 1154 661 l 1154 0 l 1039 0 l 1039 458 b 885 639 1039 586 985 639 b 693 444 790 639 693 575 l 693 0 l 578 0 l 578 458 b 424 639 578 586 524 639 b 232 444 329 639 232 575 l 232 0 l 117 0 "},n:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},o:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 "},p:{ha:871,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},q:{ha:871,x_min:0,x_max:0,o:"m 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 -253 l 639 -253 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},r:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 "},s:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 "},t:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 "},u:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 "},v:{ha:742,x_min:0,x_max:0,o:"m 35 726 l 160 726 l 375 117 l 588 726 l 707 726 l 446 0 l 299 0 "},w:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 "},x:{ha:733,x_min:0,x_max:0,o:"m 299 374 l 56 726 l 190 726 l 368 463 l 544 726 l 669 726 l 429 382 l 694 0 l 558 0 l 363 293 l 163 0 l 39 0 "},y:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 "},z:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 "},"{":{ha:529,x_min:0,x_max:0,o:"m 468 -204 b 193 85 263 -204 156 -125 l 219 229 b 56 396 235 311 197 396 l 56 482 b 219 649 197 482 235 567 l 193 793 b 468 1082 156 1003 263 1082 l 468 994 b 303 790 332 993 278 949 l 329 631 b 193 439 346 526 286 463 b 329 247 286 415 346 351 l 303 88 b 468 -117 278 -71 332 -115 l 468 -204 "},"|":{ha:351,x_min:0,x_max:0,o:"m 129 1078 l 222 1078 l 222 -206 l 129 -206 "},"}":{ha:529,x_min:0,x_max:0,o:"m 61 -117 b 226 88 197 -115 251 -71 l 200 247 b 336 439 183 351 243 415 b 200 631 243 463 183 526 l 226 790 b 61 994 251 949 197 993 l 61 1082 b 336 793 267 1082 374 1003 l 310 649 b 474 482 294 567 332 482 l 474 396 b 310 229 332 396 294 311 l 336 85 b 61 -204 374 -125 267 -204 "},"~":{ha:618,x_min:0,x_max:0,o:"m 61 310 b 208 488 71 431 139 488 b 403 417 300 488 357 417 b 465 490 432 417 461 440 l 557 490 b 414 313 549 367 479 313 b 217 383 318 313 261 383 b 153 310 186 383 160 358 l 61 310 "}," ":{ha:368,x_min:0,x_max:0,o:""},"¡":{ha:400,x_min:0,x_max:0,o:"m 154 550 l 243 550 l 263 -162 l 135 -162 m 200 660 b 111 749 151 660 111 699 b 200 838 111 799 151 838 b 289 749 249 838 289 799 b 200 660 289 699 249 660 "},"¢":{ha:785,x_min:0,x_max:0,o:"m 371 -10 b 63 356 190 8 63 147 l 63 367 b 371 736 63 572 196 715 l 371 874 l 453 874 l 453 736 b 731 485 589 725 710 653 l 617 485 b 453 640 601 583 535 629 l 453 86 b 628 261 540 99 617 157 l 735 261 b 453 -10 721 115 608 4 l 453 -187 l 371 -187 m 182 356 b 371 86 182 197 256 106 l 371 639 b 182 367 260 618 182 518 l 182 356 "},"£":{ha:828,x_min:0,x_max:0,o:"m 67 524 l 157 524 b 132 719 143 582 132 646 b 438 1006 132 889 265 1006 b 735 743 615 1006 722 901 l 618 743 b 438 907 599 849 553 907 b 254 718 331 907 254 832 b 278 524 254 643 265 582 l 574 524 l 574 438 l 297 438 b 318 254 308 382 318 324 b 300 164 318 221 311 190 b 539 89 392 142 479 89 b 665 208 613 89 660 118 l 767 208 b 553 -12 758 81 683 -12 b 244 75 431 -12 324 75 b 154 0 183 75 158 36 l 53 0 b 196 169 58 63 100 151 b 213 256 206 193 213 221 b 181 438 213 317 197 375 l 67 438 "},"¥":{ha:800,x_min:0,x_max:0,o:"m 117 471 l 333 471 l 39 993 l 169 993 l 413 543 l 644 993 l 761 993 l 483 471 l 701 471 l 701 390 l 468 390 l 468 282 l 701 282 l 701 201 l 468 201 l 468 0 l 350 0 l 350 201 l 117 201 l 117 282 l 350 282 l 350 390 l 117 390 "},"¦":{ha:361,x_min:0,x_max:0,o:"m 129 413 l 222 413 l 222 -206 l 129 -206 m 129 1078 l 222 1078 l 222 510 l 129 510 "},"§":{ha:749,x_min:0,x_max:0,o:"m 369 -190 b 108 36 215 -190 111 -108 l 226 36 b 367 -93 233 -43 269 -93 b 508 32 464 -93 508 -37 b 313 181 508 104 474 140 b 58 415 160 219 58 278 b 215 603 58 507 118 575 b 131 779 160 642 131 693 b 378 1006 131 911 250 1006 b 632 788 529 1006 628 928 l 515 788 b 381 908 510 861 478 908 b 242 782 283 908 242 851 b 428 636 242 710 274 675 b 690 397 581 597 690 549 b 538 211 690 318 635 242 b 619 35 590 172 619 118 b 369 -190 619 -90 508 -190 m 453 257 b 576 388 538 278 576 324 b 403 528 576 468 514 499 l 293 557 b 172 425 221 542 172 493 b 349 286 172 351 232 318 l 453 257 "},"¨":{ha:556,x_min:0,x_max:0,o:"m 147 881 b 74 954 107 881 74 914 b 147 1028 74 994 107 1028 b 221 954 188 1028 221 994 b 147 881 221 914 188 881 m 408 881 b 335 954 368 881 335 914 b 408 1028 335 994 368 1028 b 482 954 449 1028 482 994 b 408 881 482 914 449 881 "},"©":{ha:1172,x_min:0,x_max:0,o:"m 588 215 b 321 490 419 215 321 322 l 321 501 b 588 778 321 667 433 778 b 822 586 713 778 811 715 l 717 586 b 588 694 706 657 664 694 b 431 501 492 694 431 624 l 431 492 b 588 300 431 369 488 300 b 728 415 663 300 717 338 l 828 415 b 588 215 814 282 718 215 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "},ª:{ha:582,x_min:0,x_max:0,o:"m 236 403 b 42 575 129 403 42 456 b 336 757 42 710 179 757 l 417 757 l 417 793 b 299 918 417 879 383 918 b 174 824 222 918 183 885 l 67 824 b 304 1006 78 953 183 1006 b 525 794 425 1006 525 957 l 525 414 l 417 414 l 417 486 b 236 403 376 433 324 403 m 256 488 b 417 618 347 488 417 533 l 417 682 l 339 682 b 151 578 229 682 151 656 b 256 488 151 521 179 488 "},"«":{ha:694,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 m 329 363 l 510 610 l 624 610 l 450 363 l 624 115 l 510 115 "},"®":{ha:714,x_min:0,x_max:0,o:"m 251 854 l 358 854 b 475 763 429 854 475 825 l 475 761 b 413 679 475 715 449 690 l 493 550 l 424 550 l 350 668 l 318 668 l 318 550 l 251 550 m 357 714 b 410 758 392 714 410 729 l 410 760 b 357 803 410 792 390 803 l 318 803 l 318 714 m 357 442 b 610 699 500 442 610 547 b 357 956 610 850 504 956 b 104 697 210 956 104 849 b 357 442 104 544 215 442 m 357 392 b 49 697 186 392 49 524 b 357 1006 49 868 185 1006 b 665 699 532 1006 665 869 b 357 392 665 525 529 392 "},"¯":{ha:556,x_min:0,x_max:0,o:"m 96 989 l 460 989 l 460 900 l 96 900 "},"°":{ha:593,x_min:0,x_max:0,o:"m 297 644 b 421 783 371 644 421 706 b 297 925 421 864 371 925 b 168 783 222 925 168 864 b 297 644 168 706 222 644 m 297 564 b 69 783 171 564 69 664 b 297 1006 69 906 171 1006 b 524 783 422 1006 524 906 b 297 564 524 664 422 564 "},"±":{ha:721,x_min:0,x_max:0,o:"m 310 454 l 50 454 l 50 551 l 310 551 l 310 804 l 411 804 l 411 551 l 671 551 l 671 454 l 411 454 l 411 201 l 310 201 m 50 97 l 671 97 l 671 0 l 50 0 "},"²":{ha:397,x_min:0,x_max:0,o:"m 11 533 l 189 722 b 264 857 235 769 264 813 b 194 926 264 900 239 926 b 111 835 149 926 119 900 l 26 835 b 197 999 32 939 96 999 b 356 858 297 999 356 943 b 264 689 356 796 319 743 l 163 589 l 360 589 l 360 518 l 11 518 "},"³":{ha:432,x_min:0,x_max:0,o:"m 211 511 b 29 665 96 511 32 572 l 114 665 b 208 581 119 617 146 581 b 296 656 268 581 296 610 b 213 731 296 706 268 731 l 176 731 l 176 796 l 211 796 b 289 864 264 796 289 821 b 217 929 289 901 265 929 b 131 853 168 929 136 900 l 46 853 b 218 999 51 938 115 999 b 378 871 319 999 378 943 b 299 768 378 818 346 785 b 392 654 354 756 392 717 b 211 511 392 565 322 511 "},"´":{ha:556,x_min:0,x_max:0,o:"m 310 1056 l 454 1056 l 310 851 l 224 851 "},"¶":{ha:817,x_min:0,x_max:0,o:"m 383 481 l 364 481 b 63 732 188 481 63 564 b 364 993 63 908 193 993 l 686 993 l 686 -139 l 590 -139 l 590 914 l 478 914 l 478 -139 l 383 -139 "},"·":{ha:392,x_min:0,x_max:0,o:"m 196 365 b 107 454 147 365 107 404 b 196 543 107 504 147 543 b 285 454 244 543 285 504 b 196 365 285 404 244 365 "},"¸":{ha:556,x_min:0,x_max:0,o:"m 289 -297 b 150 -181 208 -297 156 -250 l 225 -181 b 285 -231 231 -207 250 -231 b 340 -181 319 -231 340 -210 b 290 -133 340 -151 319 -133 b 251 -144 272 -133 258 -140 l 207 -106 l 265 0 l 339 0 l 299 -74 b 429 -186 363 -65 429 -101 b 289 -297 429 -261 364 -297 "},"¹":{ha:321,x_min:0,x_max:0,o:"m 146 901 l 33 826 l 33 908 l 157 993 l 240 993 l 240 518 l 146 518 "},º:{ha:685,x_min:0,x_max:0,o:"m 343 492 b 519 700 453 492 519 575 l 519 708 b 343 917 519 835 451 917 b 165 708 233 917 165 835 l 165 700 b 343 492 165 574 232 492 m 342 403 b 51 699 174 403 51 526 l 51 707 b 343 1006 51 885 175 1006 b 633 710 510 1006 633 886 l 633 701 b 342 403 633 522 510 403 "},"»":{ha:694,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 m 492 363 l 318 610 l 432 610 l 613 363 l 432 115 l 318 115 "},"¼":{ha:942,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 772 993 l 864 993 l 160 0 l 68 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"½":{ha:940,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 754 993 l 846 993 l 142 0 l 50 0 m 549 15 l 726 204 b 801 339 772 251 801 294 b 732 408 801 382 776 408 b 649 317 686 408 657 382 l 564 317 b 735 481 569 421 633 481 b 893 340 835 481 893 425 b 801 171 893 278 857 225 l 700 71 l 897 71 l 897 0 l 549 0 "},"¾":{ha:946,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 822 993 l 914 993 l 210 0 l 118 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"¿":{ha:679,x_min:0,x_max:0,o:"m 431 481 b 288 231 431 368 357 299 b 186 60 233 176 186 126 b 335 -79 186 -22 232 -79 b 519 101 439 -79 510 -8 l 628 101 b 333 -175 618 -61 503 -175 b 69 56 144 -175 69 -61 b 206 288 69 158 139 224 b 328 490 268 347 328 406 l 328 550 l 431 550 m 382 838 b 471 749 431 838 471 799 b 382 660 471 699 431 660 b 293 749 333 660 293 699 b 382 838 293 799 333 838 "},À:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 297 1247 l 442 1247 l 519 1071 l 433 1071 "},Á:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 494 1247 l 639 1247 l 503 1071 l 417 1071 "},Â:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 417 1247 l 521 1247 l 669 1071 l 585 1071 l 467 1151 l 349 1071 l 267 1071 "},Ã:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 543 1075 b 393 1135 483 1075 433 1135 b 338 1072 367 1135 344 1108 l 254 1072 b 394 1233 265 1171 322 1233 b 543 1174 453 1233 503 1174 b 599 1236 569 1174 592 1200 l 682 1236 b 543 1075 671 1138 614 1075 "},Ä:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 326 1096 b 253 1169 286 1096 253 1129 b 326 1243 253 1210 286 1243 b 400 1169 367 1243 400 1210 b 326 1096 400 1129 367 1096 m 608 1096 b 535 1169 568 1096 535 1129 b 608 1243 535 1210 568 1243 b 682 1169 649 1243 682 1210 b 608 1096 682 1129 649 1096 "},Å:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 468 1054 b 319 1199 386 1054 319 1119 b 468 1343 319 1278 386 1343 b 617 1199 550 1343 617 1278 b 468 1054 617 1119 550 1054 m 468 1118 b 542 1199 511 1118 542 1153 b 468 1279 542 1244 511 1279 b 394 1199 425 1279 394 1244 b 468 1118 394 1153 425 1118 "},Æ:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 "},Ç:{ha:1014,x_min:0,x_max:0,o:"m 529 -297 b 390 -181 449 -297 396 -250 l 465 -181 b 525 -231 471 -207 490 -231 b 581 -181 560 -231 581 -210 b 531 -133 581 -151 560 -133 b 492 -144 513 -133 499 -140 l 447 -106 l 499 -11 b 76 490 236 7 76 199 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 572 -11 922 111 778 -1 l 539 -74 b 669 -186 603 -65 669 -101 b 529 -297 669 -261 604 -297 "},È:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 254 1247 l 399 1247 l 476 1071 l 390 1071 "},É:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 451 1247 l 596 1247 l 460 1071 l 374 1071 "},Ê:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 374 1247 l 478 1247 l 626 1071 l 542 1071 l 424 1151 l 306 1071 l 224 1071 "},Ë:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 283 1096 b 210 1169 243 1096 210 1129 b 283 1243 210 1210 243 1243 b 357 1169 324 1243 357 1210 b 283 1096 357 1129 324 1096 m 565 1096 b 492 1169 525 1096 492 1129 b 565 1243 492 1210 525 1243 b 639 1169 606 1243 639 1210 b 565 1096 639 1129 606 1096 "},Ì:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 21 1247 l 165 1247 l 243 1071 l 157 1071 "},Í:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 218 1247 l 363 1247 l 226 1071 l 140 1071 "},Î:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 140 1247 l 244 1247 l 393 1071 l 308 1071 l 190 1151 l 72 1071 l -10 1071 "},Ï:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 50 1096 b -24 1169 10 1096 -24 1129 b 50 1243 -24 1210 10 1243 b 124 1169 90 1243 124 1210 b 50 1096 124 1129 90 1096 m 332 1096 b 258 1169 292 1096 258 1129 b 332 1243 258 1210 292 1243 b 406 1169 372 1243 406 1210 b 332 1096 406 1129 372 1096 "},Ð:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},Ñ:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 592 1075 b 442 1135 532 1075 482 1135 b 386 1072 415 1135 393 1108 l 303 1072 b 443 1233 314 1171 371 1233 b 592 1174 501 1233 551 1174 b 647 1236 618 1174 640 1200 l 731 1236 b 592 1075 719 1138 663 1075 "},Ò:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 392 1247 l 536 1247 l 614 1071 l 528 1071 "},Ó:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 589 1247 l 733 1247 l 597 1071 l 511 1071 "},Ô:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 511 1247 l 615 1247 l 764 1071 l 679 1071 l 561 1151 l 443 1071 l 361 1071 "},Õ:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 638 1075 b 488 1135 578 1075 528 1135 b 432 1072 461 1135 439 1108 l 349 1072 b 489 1233 360 1171 417 1233 b 638 1174 547 1233 597 1174 b 693 1236 664 1174 686 1200 l 776 1236 b 638 1075 765 1138 708 1075 "},Ö:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 421 1096 b 347 1169 381 1096 347 1129 b 421 1243 347 1210 381 1243 b 494 1169 461 1243 494 1210 b 421 1096 494 1129 461 1096 m 703 1096 b 629 1169 663 1096 629 1129 b 703 1243 629 1210 663 1243 b 776 1169 743 1243 776 1210 b 703 1096 776 1129 743 1096 "},"×":{ha:651,x_min:0,x_max:0,o:"m 46 249 l 260 463 l 46 676 l 111 743 l 325 528 l 539 743 l 606 676 l 392 463 l 606 249 l 539 182 l 325 397 l 111 182 "},Ø:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 "},Ù:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 313 1247 l 457 1247 l 535 1071 l 449 1071 "},Ú:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 510 1247 l 654 1247 l 518 1071 l 432 1071 "},Û:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 432 1247 l 536 1247 l 685 1071 l 600 1071 l 482 1151 l 364 1071 l 282 1071 "},Ü:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 342 1096 b 268 1169 301 1096 268 1129 b 342 1243 268 1210 301 1243 b 415 1169 382 1243 415 1210 b 342 1096 415 1129 382 1096 m 624 1096 b 550 1169 583 1096 550 1129 b 624 1243 550 1210 583 1243 b 697 1169 664 1243 697 1210 b 624 1096 697 1129 664 1096 "},Ý:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 442 1247 l 586 1247 l 450 1071 l 364 1071 "},Þ:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 807 l 407 807 b 754 522 597 807 754 729 l 754 517 b 407 229 754 306 596 229 l 246 229 l 246 0 l 125 0 m 415 325 b 633 517 557 325 633 389 l 633 522 b 415 710 633 663 550 710 l 246 710 l 246 325 "},ß:{ha:819,x_min:0,x_max:0,o:"m 465 -12 b 338 10 407 -12 358 1 l 338 108 b 460 83 364 96 407 83 b 640 292 544 83 640 118 l 640 301 b 368 543 640 451 535 549 l 368 642 b 575 824 525 638 575 739 l 575 829 b 406 983 575 928 515 983 b 232 792 300 983 232 908 l 232 0 l 117 0 l 117 786 b 407 1078 117 964 251 1078 b 685 829 572 1078 685 978 l 685 824 b 519 600 685 736 628 636 b 760 303 663 564 760 447 l 760 294 b 465 -12 760 60 615 -12 "},à:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 197 1056 l 342 1056 l 428 851 l 342 851 "},á:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 411 1056 l 556 1056 l 411 851 l 325 851 "},â:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 310 1051 l 414 1051 l 563 851 l 478 851 l 360 956 l 242 851 l 160 851 "},ã:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 451 860 b 301 919 392 860 342 919 b 246 857 275 919 253 893 l 163 857 b 303 1018 174 956 231 1018 b 451 958 361 1018 411 958 b 507 1021 478 958 500 985 l 590 1021 b 451 860 579 922 522 860 "},ä:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 246 881 b 172 954 206 881 172 914 b 246 1028 172 994 206 1028 b 319 954 286 1028 319 994 b 246 881 319 914 286 881 m 507 881 b 433 954 467 881 433 914 b 507 1028 433 994 467 1028 b 581 954 547 1028 581 994 b 507 881 581 914 547 881 "},å:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 376 894 b 450 975 419 894 450 929 b 376 1056 450 1021 419 1056 b 303 975 333 1056 303 1021 b 376 894 303 929 333 894 m 376 831 b 228 975 294 831 228 896 b 376 1119 228 1054 294 1119 b 525 975 458 1119 525 1054 b 376 831 525 896 458 831 "},æ:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 "},ç:{ha:792,x_min:0,x_max:0,o:"m 397 -297 b 258 -181 317 -297 264 -250 l 333 -181 b 393 -231 339 -207 358 -231 b 449 -181 428 -231 449 -210 b 399 -133 449 -151 428 -133 b 360 -144 381 -133 367 -140 l 315 -106 l 368 -10 b 63 356 190 11 63 149 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 440 -11 719 111 604 -1 l 407 -74 b 538 -186 471 -65 538 -101 b 397 -297 538 -261 472 -297 "},è:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 224 1056 l 368 1056 l 454 851 l 368 851 "},é:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 438 1056 l 582 1056 l 438 851 l 351 851 "},ê:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 351 1051 l 456 1051 l 604 851 l 519 851 l 401 956 l 283 851 l 201 851 "},ë:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 272 881 b 199 954 232 881 199 914 b 272 1028 199 994 232 1028 b 346 954 313 1028 346 994 b 272 881 346 914 313 881 m 533 881 b 460 954 493 881 460 914 b 533 1028 460 994 493 1028 b 607 954 574 1028 607 994 b 533 881 607 914 574 881 "},ì:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m -3 1056 l 142 1056 l 228 851 l 142 851 "},í:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 211 1056 l 356 1056 l 211 851 l 125 851 "},î:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 125 1051 l 229 1051 l 378 851 l 293 851 l 175 956 l 57 851 l -25 851 "},ï:{ha:354,x_min:0,x_max:0,o:"m 51 881 b -22 954 11 881 -22 914 b 51 1028 -22 994 11 1028 b 125 954 92 1028 125 994 b 51 881 125 914 92 881 m 301 881 b 228 954 261 881 228 914 b 301 1028 228 994 261 1028 b 375 954 342 1028 375 994 b 301 881 375 914 342 881 m 119 726 l 235 726 l 235 0 l 119 0 "},ð:{ha:839,x_min:0,x_max:0,o:"m 217 863 l 351 942 b 179 1074 296 990 236 1035 l 328 1074 b 444 997 363 1054 403 1029 l 560 1065 l 600 997 l 507 943 b 776 394 644 815 776 622 l 776 364 b 418 -12 776 144 625 -12 b 63 357 211 -12 63 144 l 63 368 b 393 739 63 586 215 739 b 603 639 489 739 557 696 b 413 888 558 728 490 813 l 257 796 m 419 83 b 657 357 565 83 657 193 l 657 367 b 421 643 657 535 565 643 b 182 368 275 643 182 535 l 182 357 b 419 83 182 192 272 83 "},ñ:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 489 860 b 339 919 429 860 379 919 b 283 857 313 919 290 893 l 200 857 b 340 1018 211 956 268 1018 b 489 958 399 1018 449 958 b 544 1021 515 958 538 985 l 628 1021 b 489 860 617 922 560 860 "},ò:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 240 1056 l 385 1056 l 471 851 l 385 851 "},ó:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 454 1056 l 599 1056 l 454 851 l 368 851 "},ô:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 368 1051 l 472 1051 l 621 851 l 536 851 l 418 956 l 300 851 l 218 851 "},õ:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 494 860 b 344 919 435 860 385 919 b 289 857 318 919 296 893 l 206 857 b 346 1018 217 956 274 1018 b 494 958 404 1018 454 958 b 550 1021 521 958 543 985 l 633 1021 b 494 860 622 922 565 860 "},ö:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 289 881 b 215 954 249 881 215 914 b 289 1028 215 994 249 1028 b 363 954 329 1028 363 994 b 289 881 363 914 329 881 m 550 881 b 476 954 510 881 476 914 b 550 1028 476 994 510 1028 b 624 954 590 1028 624 994 b 550 881 624 914 590 881 "},"÷":{ha:721,x_min:0,x_max:0,o:"m 360 124 b 271 213 311 124 271 163 b 360 301 271 263 311 301 b 449 213 408 301 449 263 b 360 124 449 163 408 124 m 50 524 l 671 524 l 671 426 l 50 426 m 360 649 b 271 738 311 649 271 688 b 360 826 271 788 311 826 b 449 738 408 826 449 788 b 360 649 449 688 408 649 "},ø:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 "},ù:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 233 1056 l 378 1056 l 464 851 l 378 851 "},ú:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 447 1056 l 592 1056 l 447 851 l 361 851 "},û:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 361 1051 l 465 1051 l 614 851 l 529 851 l 411 956 l 293 851 l 211 851 "},ü:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 282 881 b 208 954 242 881 208 914 b 282 1028 208 994 242 1028 b 356 954 322 1028 356 994 b 282 881 356 914 322 881 m 543 881 b 469 954 503 881 469 914 b 543 1028 469 994 503 1028 b 617 954 583 1028 617 994 b 543 881 617 914 583 881 "},ý:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 413 1056 l 557 1056 l 413 851 l 326 851 "},þ:{ha:871,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},ÿ:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 247 881 b 174 954 207 881 174 914 b 247 1028 174 994 207 1028 b 321 954 288 1028 321 994 b 247 881 321 914 288 881 m 508 881 b 435 954 468 881 435 914 b 508 1028 435 994 468 1028 b 582 954 549 1028 582 994 b 508 881 582 914 549 881 "},ı:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 "},Ł:{ha:771,x_min:0,x_max:0,o:"m 58 443 l 153 478 l 153 993 l 274 993 l 274 522 l 550 624 l 550 529 l 274 428 l 274 99 l 728 99 l 728 0 l 153 0 l 153 383 l 58 349 "},ł:{ha:383,x_min:0,x_max:0,o:"m 28 529 l 133 589 l 133 1074 l 250 1074 l 250 656 l 361 719 l 361 622 l 250 558 l 250 0 l 133 0 l 133 492 l 28 432 "},Œ:{ha:1326,x_min:0,x_max:0,o:"m 76 500 b 582 993 76 775 235 993 l 1244 993 l 1244 894 l 808 894 l 808 557 l 1156 557 l 1156 458 l 808 458 l 808 99 l 1269 99 l 1269 0 l 579 0 b 76 488 238 0 76 211 l 76 500 m 585 894 b 201 499 329 894 201 742 l 201 488 b 586 97 201 258 313 97 l 688 97 l 688 894 "},œ:{ha:1382,x_min:0,x_max:0,o:"m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 714 564 556 739 660 672 b 996 739 765 672 864 739 b 1322 378 1164 739 1322 638 l 1322 340 l 775 340 b 1008 83 781 175 860 83 b 1201 210 1121 83 1186 125 l 1317 210 b 1007 -12 1292 64 1171 -12 b 714 161 869 -12 767 51 b 418 -12 658 53 554 -12 m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 1204 433 b 996 643 1193 583 1115 643 b 779 433 878 643 799 563 "},Š:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 218 1247 l 303 1247 l 421 1167 l 539 1247 l 621 1247 l 471 1071 l 367 1071 "},š:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 129 1051 l 214 1051 l 332 947 l 450 1051 l 532 1051 l 382 851 l 278 851 "},Ÿ:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 274 1096 b 200 1169 233 1096 200 1129 b 274 1243 200 1210 233 1243 b 347 1169 314 1243 347 1210 b 274 1096 347 1129 314 1096 m 556 1096 b 482 1169 515 1096 482 1129 b 556 1243 482 1210 515 1243 b 629 1169 596 1243 629 1210 b 556 1096 629 1129 596 1096 "},Ž:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 208 1247 l 293 1247 l 411 1167 l 529 1247 l 611 1247 l 461 1071 l 357 1071 "},ž:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 143 1051 l 228 1051 l 346 947 l 464 1051 l 546 1051 l 396 851 l 292 851 "},ƒ:{ha:551,x_min:0,x_max:0,o:"m 40 574 l 175 574 l 207 785 b 442 1006 229 928 307 1006 b 536 990 482 1006 510 1000 l 536 893 b 444 910 515 901 485 910 b 321 779 367 910 332 854 l 289 574 l 472 574 l 472 479 l 275 479 l 164 -253 l 49 -253 l 160 479 l 40 479 "},ˆ:{ha:556,x_min:0,x_max:0,o:"m 226 1051 l 331 1051 l 479 851 l 394 851 l 276 956 l 158 851 l 76 851 "},ˇ:{ha:556,x_min:0,x_max:0,o:"m 76 1051 l 161 1051 l 279 947 l 397 1051 l 479 1051 l 329 851 l 225 851 "},"˘":{ha:556,x_min:0,x_max:0,o:"m 275 860 b 92 1043 175 860 97 938 l 183 1043 b 275 954 193 989 219 954 b 375 1043 333 954 364 988 l 464 1043 b 275 860 458 938 375 860 "},"˙":{ha:556,x_min:0,x_max:0,o:"m 278 878 b 201 954 236 878 201 913 b 278 1031 201 996 236 1031 b 354 954 319 1031 354 996 b 278 878 354 913 319 878 "},"˚":{ha:556,x_min:0,x_max:0,o:"m 278 894 b 351 975 321 894 351 929 b 278 1056 351 1021 321 1056 b 204 975 235 1056 204 1021 b 278 894 204 929 235 894 m 278 831 b 129 975 196 831 129 896 b 278 1119 129 1054 196 1119 b 426 975 360 1119 426 1054 b 278 831 426 896 360 831 "},"˛":{ha:556,x_min:0,x_max:0,o:"m 310 -253 b 165 -142 224 -253 165 -211 b 274 0 165 -82 214 -29 l 369 0 b 275 -119 307 -42 275 -76 b 328 -169 275 -153 294 -169 b 400 -154 351 -169 379 -165 l 400 -236 b 310 -253 376 -246 349 -253 "},"˜":{ha:556,x_min:0,x_max:0,o:"m 353 860 b 203 919 293 860 243 919 b 147 857 176 919 154 893 l 64 857 b 204 1018 75 956 132 1018 b 353 958 263 1018 313 958 b 408 1021 379 958 401 985 l 492 1021 b 353 860 481 922 424 860 "},"˝":{ha:556,x_min:0,x_max:0,o:"m 189 1056 l 321 1056 l 217 851 l 133 851 m 403 1056 l 535 1056 l 431 851 l 347 851 "},"–":{ha:731,x_min:0,x_max:0,o:"m 63 432 l 668 432 l 668 335 l 63 335 "},"—":{ha:1229,x_min:0,x_max:0,o:"m 63 432 l 1167 432 l 1167 335 l 63 335 "},"‘":{ha:354,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 "},"’":{ha:354,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 "},"‚":{ha:354,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 "},"“":{ha:600,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 m 301 728 l 464 1008 l 535 972 l 411 678 "},"”":{ha:600,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 m 311 714 l 435 1008 l 544 958 l 382 678 "},"„":{ha:600,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 m 311 -122 l 435 172 l 544 122 l 382 -158 "},"†":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 296 l 208 296 "},"‡":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 568 l 472 568 l 472 475 l 313 475 l 313 296 l 208 296 l 208 475 l 47 475 l 47 568 l 208 568 "},"•":{ha:461,x_min:0,x_max:0,o:"m 231 264 b 69 425 139 264 69 336 b 231 586 69 514 139 586 b 392 425 324 586 392 514 b 231 264 392 336 324 264 "},"…":{ha:1119,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 m 560 -7 b 471 82 511 -7 471 32 b 560 171 471 132 511 171 b 649 82 608 171 649 132 b 560 -7 649 32 608 -7 m 924 -7 b 835 82 875 -7 835 32 b 924 171 835 132 875 171 b 1013 82 972 171 1013 132 b 924 -7 1013 32 972 -7 "},"‰":{ha:1564,x_min:0,x_max:0,o:"m 268 638 b 385 775 339 638 385 689 b 268 913 385 858 339 913 b 151 774 199 913 151 863 b 268 638 151 686 199 638 m 268 549 b 47 772 154 549 47 643 b 268 1001 47 906 151 1001 b 489 775 388 1001 489 906 b 268 549 489 643 383 549 m 782 993 l 888 993 l 281 0 l 175 0 m 785 78 b 901 215 856 78 901 129 b 785 353 901 299 856 353 b 668 214 715 353 668 303 b 785 78 668 126 715 78 m 785 -11 b 564 213 671 -11 564 83 b 785 442 564 346 668 442 b 1006 215 904 442 1006 346 b 785 -11 1006 83 900 -11 m 1296 78 b 1413 215 1367 78 1413 129 b 1296 353 1413 299 1367 353 b 1179 214 1226 353 1179 303 b 1296 78 1179 126 1226 78 m 1296 -11 b 1075 213 1182 -11 1075 83 b 1296 442 1075 346 1179 442 b 1517 215 1415 442 1517 346 b 1296 -11 1517 83 1411 -11 "},"‹":{ha:447,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 "},"›":{ha:447,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 "},"⁄":{ha:157,x_min:0,x_max:0,o:"m 385 993 l 476 993 l -228 0 l -319 0 "},"™":{ha:994,x_min:0,x_max:0,o:"m 475 993 l 582 993 l 707 679 l 829 993 l 938 993 l 938 546 l 860 546 l 860 894 l 717 546 l 690 546 l 546 894 l 546 546 l 475 546 m 183 932 l 47 932 l 47 993 l 396 993 l 396 932 l 261 932 l 261 546 l 183 546 "},"−":{ha:721,x_min:0,x_max:0,o:"m 50 524 l 671 524 l 671 426 l 50 426 "},"≈":{ha:692,x_min:0,x_max:0,o:"m 61 231 b 214 396 71 342 138 396 b 481 335 319 396 407 335 b 543 399 510 335 539 354 l 631 399 b 482 233 622 285 554 233 b 213 294 372 233 285 294 b 149 231 182 294 156 274 l 61 231 m 61 476 b 214 642 71 588 138 642 b 481 581 319 642 407 581 b 543 644 510 581 539 600 l 631 644 b 482 479 622 531 554 479 b 213 540 372 479 285 540 b 149 476 182 540 156 519 l 61 476 "},"≠":{ha:672,x_min:0,x_max:0,o:"m 56 622 l 354 622 l 410 765 l 515 765 l 460 622 l 617 622 l 617 522 l 421 522 l 364 372 l 617 372 l 617 272 l 325 272 l 269 129 l 164 129 l 219 272 l 56 272 l 56 372 l 258 372 l 315 522 l 56 522 "},"≤":{ha:700,x_min:0,x_max:0,o:"m 74 450 l 74 478 l 607 763 l 607 651 l 246 464 l 607 276 l 607 165 m 74 97 l 607 97 l 607 0 l 74 0 "},"≥":{ha:700,x_min:0,x_max:0,o:"m 93 276 l 454 464 l 93 651 l 93 763 l 626 478 l 626 450 l 93 165 m 93 97 l 626 97 l 626 0 l 93 0 "},Đ:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},Ŋ:{ha:1006,x_min:0,x_max:0,o:"m 606 -268 b 467 -242 531 -268 493 -256 l 467 -142 b 599 -169 503 -157 539 -169 b 763 -1 696 -169 760 -115 l 240 851 l 240 0 l 125 0 l 125 993 l 282 993 l 765 204 l 765 993 l 881 993 l 881 14 b 606 -268 881 -185 757 -268 "},Ĳ:{ha:913,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 521 -12 b 382 14 446 -12 408 0 l 382 114 b 514 86 418 99 454 86 b 675 275 613 86 675 142 l 675 993 l 796 993 l 796 269 b 521 -12 796 71 672 -12 "},đ:{ha:871,x_min:0,x_max:0,o:"m 392 939 l 639 939 l 639 1074 l 754 1074 l 754 939 l 858 939 l 858 854 l 754 854 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 854 l 392 854 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},ŋ:{ha:831,x_min:0,x_max:0,o:"m 499 -168 b 606 -56 581 -161 606 -119 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 -46 b 499 -265 721 -185 660 -260 "},ĳ:{ha:708,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 m 367 -168 b 474 -56 449 -161 474 -119 l 474 726 l 589 726 l 589 -46 b 367 -265 589 -185 528 -260 m 529 878 b 453 954 488 878 453 913 b 529 1031 453 996 488 1031 b 606 954 571 1031 606 996 b 529 878 606 913 571 878 "},Ă:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 465 1065 b 282 1249 365 1065 288 1143 l 374 1249 b 465 1160 383 1194 410 1160 b 565 1249 524 1160 554 1193 l 654 1249 b 465 1065 649 1143 565 1065 "},Ā:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 283 1181 l 653 1181 l 653 1092 l 283 1092 "},Ą:{ha:936,x_min:0,x_max:0,o:"m 813 -253 b 668 -142 726 -253 668 -211 b 768 -4 668 -85 713 -33 l 669 286 l 260 286 l 164 0 l 50 0 l 392 993 l 550 993 l 885 4 b 778 -119 808 -40 778 -76 b 831 -169 778 -153 797 -169 b 903 -154 854 -169 882 -165 l 903 -236 b 813 -253 879 -246 851 -253 m 293 382 l 638 382 l 465 893 "},Ǻ:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 478 1040 b 329 1185 396 1040 329 1106 b 478 1329 329 1264 396 1329 b 626 1185 560 1329 626 1264 b 478 1040 626 1106 560 1040 m 510 1546 l 654 1546 l 518 1369 l 432 1369 m 478 1104 b 551 1185 521 1104 551 1139 b 478 1265 551 1231 521 1265 b 404 1185 435 1265 404 1231 b 478 1104 404 1139 435 1104 "},Ǽ:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 m 874 1247 l 1018 1247 l 882 1071 l 796 1071 "},Ć:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 572 1247 l 717 1247 l 581 1071 l 494 1071 "},Č:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 344 1247 l 429 1247 l 547 1167 l 665 1247 l 747 1247 l 597 1071 l 493 1071 "},Ĉ:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 494 1247 l 599 1247 l 747 1071 l 663 1071 l 544 1151 l 426 1071 l 344 1071 "},Ċ:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 540 1093 b 464 1169 499 1093 464 1128 b 540 1246 464 1211 499 1246 b 617 1169 582 1246 617 1211 b 540 1093 617 1128 582 1093 "},Ď:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 m 238 1247 l 322 1247 l 440 1167 l 558 1247 l 640 1247 l 490 1071 l 386 1071 "},Ĕ:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 432 1065 b 249 1249 332 1065 254 1143 l 340 1249 b 432 1160 350 1194 376 1160 b 532 1249 490 1160 521 1193 l 621 1249 b 432 1065 615 1143 532 1065 "},Ě:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},Ė:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 425 1093 b 349 1169 383 1093 349 1128 b 425 1246 349 1211 383 1246 b 501 1169 467 1246 501 1211 b 425 1093 501 1128 467 1093 "},Ē:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 240 1181 l 610 1181 l 610 1092 l 240 1092 "},Ę:{ha:786,x_min:0,x_max:0,o:"m 631 -253 b 486 -142 544 -253 486 -211 b 594 0 486 -82 535 -29 l 125 0 l 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 690 0 b 596 -119 628 -42 596 -76 b 649 -169 596 -153 615 -169 b 721 -154 672 -169 700 -165 l 721 -236 b 631 -253 697 -246 669 -253 "},Ğ:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 546 1065 b 363 1249 446 1065 368 1143 l 454 1249 b 546 1160 464 1194 490 1160 b 646 1249 604 1160 635 1193 l 735 1249 b 546 1065 729 1143 646 1065 "},Ĝ:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 497 1247 l 601 1247 l 750 1071 l 665 1071 l 547 1151 l 429 1071 l 347 1071 "},Ģ:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 432 -269 l 513 -51 l 624 -85 l 503 -306 "},Ġ:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 549 1093 b 472 1169 507 1093 472 1128 b 549 1246 472 1211 507 1246 b 625 1169 590 1246 625 1211 b 549 1093 625 1128 590 1093 "},Ħ:{ha:1014,x_min:0,x_max:0,o:"m 28 778 l 125 778 l 125 993 l 246 993 l 246 778 l 768 778 l 768 993 l 889 993 l 889 778 l 986 778 l 986 685 l 889 685 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 l 125 685 l 28 685 m 768 543 l 768 685 l 246 685 l 246 543 "},Ĥ:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 m 456 1247 l 560 1247 l 708 1071 l 624 1071 l 506 1151 l 388 1071 l 306 1071 "},Ĭ:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1065 b 8 1249 92 1065 14 1143 l 100 1249 b 192 1160 110 1194 136 1160 b 292 1249 250 1160 281 1193 l 381 1249 b 192 1065 375 1143 292 1065 "},İ:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1093 b 115 1169 150 1093 115 1128 b 192 1246 115 1211 150 1246 b 268 1169 233 1246 268 1211 b 192 1093 268 1128 233 1093 "},Ī:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 7 1181 l 376 1181 l 376 1092 l 7 1092 "},Į:{ha:385,x_min:0,x_max:0,o:"m 181 -253 b 36 -142 94 -253 36 -211 b 132 -6 36 -86 78 -36 l 132 993 l 253 993 l 253 6 b 146 -119 178 -37 146 -76 b 199 -169 146 -153 165 -169 b 271 -154 222 -169 250 -165 l 271 -236 b 181 -253 247 -246 219 -253 "},Ĩ:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 269 1075 b 119 1135 210 1075 160 1135 b 64 1072 93 1135 71 1108 l -19 1072 b 121 1233 -8 1171 49 1233 b 269 1174 179 1233 229 1174 b 325 1236 296 1174 318 1200 l 408 1236 b 269 1075 397 1138 340 1075 "},Ĵ:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 m 351 1247 l 456 1247 l 604 1071 l 519 1071 l 401 1151 l 283 1071 l 201 1071 "},Ķ:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 m 331 -269 l 411 -51 l 522 -85 l 401 -306 "},Ĺ:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 214 1247 l 358 1247 l 222 1071 l 136 1071 "},Ľ:{ha:743,x_min:0,x_max:0,o:"m 438 993 l 568 993 l 488 775 l 407 775 m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},Ļ:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},Ŀ:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 556 444 b 467 533 507 444 467 483 b 556 622 467 583 507 622 b 644 533 604 622 644 583 b 556 444 644 483 604 444 "},Ń:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 543 1247 l 688 1247 l 551 1071 l 465 1071 "},Ň:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 315 1247 l 400 1247 l 518 1167 l 636 1247 l 718 1247 l 568 1071 l 464 1071 "},Ņ:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 369 -269 l 450 -51 l 561 -85 l 440 -306 "},Ŏ:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 560 1065 b 376 1249 460 1065 382 1143 l 468 1249 b 560 1160 478 1194 504 1160 b 660 1249 618 1160 649 1193 l 749 1249 b 560 1065 743 1143 660 1065 "},Ő:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 458 1247 l 590 1247 l 490 1071 l 407 1071 m 672 1247 l 804 1247 l 704 1071 l 621 1071 "},Ō:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 378 1181 l 747 1181 l 747 1092 l 378 1092 "},Ǿ:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 m 590 1247 l 735 1247 l 599 1071 l 513 1071 "},Ŕ:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 457 1247 l 601 1247 l 465 1071 l 379 1071 "},Ř:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},Ŗ:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 314 -269 l 394 -51 l 506 -85 l 385 -306 "},Ś:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 446 1247 l 590 1247 l 454 1071 l 368 1071 "},Ş:{ha:871,x_min:0,x_max:0,o:"m 403 -297 b 264 -181 322 -297 269 -250 l 339 -181 b 399 -231 344 -207 364 -231 b 454 -181 433 -231 454 -210 b 404 -133 454 -151 433 -133 b 365 -144 386 -133 372 -140 l 321 -106 l 374 -8 b 67 303 163 15 83 149 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 l 413 -74 b 543 -186 476 -65 543 -101 b 403 -297 543 -261 478 -297 "},Ŝ:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 368 1247 l 472 1247 l 621 1071 l 536 1071 l 418 1151 l 300 1071 l 218 1071 "},Ș:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 303 -269 l 383 -51 l 494 -85 l 374 -306 "},Ť:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 188 1247 l 272 1247 l 390 1167 l 508 1247 l 590 1247 l 440 1071 l 336 1071 "},Ţ:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 272 -269 l 353 -51 l 464 -85 l 343 -306 "},Ŧ:{ha:779,x_min:0,x_max:0,o:"m 128 561 l 329 561 l 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 561 l 651 561 l 651 469 l 450 469 l 450 0 l 329 0 l 329 469 l 128 469 "},Ŭ:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 481 1065 b 297 1249 381 1065 303 1143 l 389 1249 b 481 1160 399 1194 425 1160 b 581 1249 539 1160 569 1193 l 669 1249 b 481 1065 664 1143 581 1065 "},Ű:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 379 1247 l 511 1247 l 411 1071 l 328 1071 m 593 1247 l 725 1247 l 625 1071 l 542 1071 "},Ū:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 299 1181 l 668 1181 l 668 1092 l 299 1092 "},Ų:{ha:967,x_min:0,x_max:0,o:"m 533 -253 b 389 -142 447 -253 389 -211 b 475 -12 389 -89 426 -43 l 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 665 25 850 201 785 81 b 499 -119 571 -19 499 -51 b 551 -169 499 -153 518 -169 b 624 -154 575 -169 603 -165 l 624 -236 b 533 -253 600 -246 572 -253 "},Ů:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 483 1090 b 557 1171 526 1090 557 1125 b 483 1251 557 1217 526 1251 b 410 1171 440 1251 410 1217 b 483 1090 410 1125 440 1090 m 483 1026 b 335 1171 401 1026 335 1092 b 483 1315 335 1250 401 1315 b 632 1171 565 1315 632 1250 b 483 1026 632 1092 565 1026 "},Ũ:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 558 1075 b 408 1135 499 1075 449 1135 b 353 1072 382 1135 360 1108 l 269 1072 b 410 1233 281 1171 338 1233 b 558 1174 468 1233 518 1174 b 614 1236 585 1174 607 1200 l 697 1236 b 558 1075 686 1138 629 1075 "},Ẃ:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 689 1247 l 833 1247 l 697 1071 l 611 1071 "},Ŵ:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 593 1247 l 697 1247 l 846 1071 l 761 1071 l 643 1151 l 525 1071 l 443 1071 "},Ẅ:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 507 1096 b 433 1169 467 1096 433 1129 b 507 1243 433 1210 467 1243 b 581 1169 547 1243 581 1210 b 507 1096 581 1129 547 1096 m 789 1096 b 715 1169 749 1096 715 1129 b 789 1243 715 1210 749 1243 b 863 1169 829 1243 863 1210 b 789 1096 863 1129 829 1096 "},Ẁ:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 478 1247 l 622 1247 l 700 1071 l 614 1071 "},Ŷ:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 364 1247 l 468 1247 l 617 1071 l 532 1071 l 414 1151 l 296 1071 l 214 1071 "},Ỳ:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 258 1247 l 403 1247 l 481 1071 l 394 1071 "},Ź:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 436 1247 l 581 1247 l 444 1071 l 358 1071 "},Ż:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 410 1093 b 333 1169 368 1093 333 1128 b 410 1246 333 1211 368 1246 b 486 1169 451 1246 486 1211 b 410 1093 486 1128 451 1093 "},ă:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 374 860 b 190 1043 274 860 196 938 l 282 1043 b 374 954 292 989 318 954 b 474 1043 432 954 463 988 l 563 1043 b 374 860 557 938 474 860 "},ā:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 194 989 l 558 989 l 558 900 l 194 900 "},ą:{ha:750,x_min:0,x_max:0,o:"m 565 -253 b 421 -142 479 -253 421 -211 b 525 -1 421 -83 467 -32 l 525 92 b 299 -12 471 24 406 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 6 b 531 -119 565 -37 531 -76 b 583 -169 531 -153 550 -169 b 656 -154 607 -169 635 -165 l 656 -236 b 565 -253 632 -246 604 -253 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},ǻ:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 379 867 b 453 947 422 867 453 901 b 379 1028 453 993 422 1028 b 306 947 336 1028 306 993 b 379 867 306 901 336 867 m 379 803 b 231 947 297 803 231 868 b 379 1092 231 1026 297 1092 b 528 947 461 1092 528 1026 b 379 803 528 868 461 803 m 421 1328 l 565 1328 l 429 1151 l 343 1151 "},ǽ:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 m 651 1056 l 796 1056 l 651 851 l 565 851 "},ć:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 449 1056 l 593 1056 l 449 851 l 363 851 "},č:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},ĉ:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 363 1051 l 467 1051 l 615 851 l 531 851 l 413 956 l 294 851 l 213 851 "},ċ:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 414 878 b 338 954 372 878 338 913 b 414 1031 338 996 372 1031 b 490 954 456 1031 490 996 b 414 878 490 913 456 878 "},ď:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 m 838 1074 l 968 1074 l 901 831 l 821 831 "},ĕ:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 389 860 b 206 1043 289 860 211 938 l 297 1043 b 389 954 307 989 333 954 b 489 1043 447 954 478 988 l 578 1043 b 389 860 572 938 489 860 "},ě:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 201 1051 l 286 1051 l 404 947 l 522 1051 l 604 1051 l 454 851 l 350 851 "},ė:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 403 878 b 326 954 361 878 326 913 b 403 1031 326 996 361 1031 b 479 954 444 1031 479 996 b 403 878 479 913 444 878 "},ē:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 221 989 l 585 989 l 585 900 l 221 900 "},ę:{ha:789,x_min:0,x_max:0,o:"m 539 -253 b 394 -142 453 -253 394 -211 b 490 -7 394 -86 436 -36 b 414 -12 465 -11 440 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 597 15 704 97 633 46 b 504 -119 543 -31 504 -76 b 557 -169 504 -153 524 -169 b 629 -154 581 -169 608 -165 l 629 -236 b 539 -253 606 -246 578 -253 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},ğ:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 406 860 b 222 1043 306 860 228 938 l 314 1043 b 406 954 324 989 350 954 b 506 1043 464 954 494 988 l 594 1043 b 406 860 589 938 506 860 "},ĝ:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 357 1051 l 461 1051 l 610 851 l 525 851 l 407 956 l 289 851 l 207 851 "},ģ:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 353 869 l 474 1090 l 544 1054 l 464 836 "},ġ:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 408 878 b 332 954 367 878 332 913 b 408 1031 332 996 367 1031 b 485 954 450 1031 485 996 b 408 878 485 913 450 878 "},ħ:{ha:831,x_min:0,x_max:0,o:"m 13 939 l 117 939 l 117 1074 l 232 1074 l 232 939 l 479 939 l 479 854 l 232 854 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 854 l 13 854 "},ĥ:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 383 1317 l 488 1317 l 636 1140 l 551 1140 l 433 1221 l 315 1140 l 233 1140 "},ĭ:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 860 b -8 1043 75 860 -3 938 l 83 1043 b 175 954 93 989 119 954 b 275 1043 233 954 264 988 l 364 1043 b 175 860 358 938 275 860 "},ī:{ha:354,x_min:0,x_max:0,o:"m 42 989 l 311 989 l 311 900 l 42 900 m 119 726 l 235 726 l 235 0 l 119 0 "},į:{ha:354,x_min:0,x_max:0,o:"m 167 -253 b 22 -142 81 -253 22 -211 b 119 -6 22 -85 64 -35 l 119 726 l 235 726 l 235 4 b 132 -119 164 -39 132 -76 b 185 -169 132 -153 151 -169 b 257 -154 208 -169 236 -165 l 257 -236 b 167 -253 233 -246 206 -253 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},ĩ:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 253 860 b 103 919 193 860 143 919 b 47 857 76 919 54 893 l -36 857 b 104 1018 -25 956 32 1018 b 253 958 163 1018 213 958 b 308 1021 279 958 301 985 l 392 1021 b 253 860 381 922 324 860 "},ĵ:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 124 1051 l 228 1051 l 376 851 l 292 851 l 174 956 l 56 851 l -26 851 "},ķ:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 m 258 -269 l 339 -51 l 450 -85 l 329 -306 "},ĺ:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 206 1317 l 350 1317 l 214 1140 l 128 1140 "},ľ:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 319 1074 l 450 1074 l 383 831 l 303 831 "},ļ:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 61 -269 l 142 -51 l 253 -85 l 132 -306 "},ŀ:{ha:456,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 403 421 b 314 510 354 421 314 460 b 403 599 314 560 354 599 b 492 510 451 599 492 560 b 403 421 492 460 451 421 "},ń:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 449 1056 l 593 1056 l 449 851 l 363 851 "},ŉ:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m -61 714 l 63 1008 l 172 958 l 10 678 "},ň:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},ņ:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},ŏ:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 417 860 b 233 1043 317 860 239 938 l 325 1043 b 417 954 335 989 361 954 b 517 1043 475 954 506 988 l 606 1043 b 417 860 600 938 517 860 "},ő:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 319 1056 l 451 1056 l 347 851 l 264 851 m 533 1056 l 665 1056 l 561 851 l 478 851 "},ō:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 238 989 l 601 989 l 601 900 l 238 900 "},ǿ:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 m 453 1056 l 597 1056 l 453 851 l 367 851 "},ŕ:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 319 1056 l 464 1056 l 319 851 l 233 851 "},ř:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 83 1051 l 168 1051 l 286 947 l 404 1051 l 486 1051 l 336 851 l 232 851 "},ŗ:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 54 -269 l 135 -51 l 246 -85 l 125 -306 "},ś:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 365 1056 l 510 1056 l 365 851 l 279 851 "},ş:{ha:667,x_min:0,x_max:0,o:"m 315 -297 b 176 -181 235 -297 182 -250 l 251 -181 b 311 -231 257 -207 276 -231 b 367 -181 346 -231 367 -210 b 317 -133 367 -151 346 -133 b 278 -144 299 -133 285 -140 l 233 -106 l 286 -8 b 57 224 146 7 63 92 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 358 -12 608 81 524 -7 l 325 -74 b 456 -186 389 -65 456 -101 b 315 -297 456 -261 390 -297 "},ŝ:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 279 1051 l 383 1051 l 532 851 l 447 851 l 329 956 l 211 851 l 129 851 "},ș:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 214 -269 l 294 -51 l 406 -85 l 285 -306 "},ŧ:{ha:493,x_min:0,x_max:0,o:"m 38 471 l 142 471 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 471 l 426 471 l 426 389 l 257 389 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 b 142 182 206 -10 142 68 l 142 389 l 38 389 "},ť:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 374 1074 l 504 1074 l 438 831 l 357 831 "},ţ:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 149 -269 l 229 -51 l 340 -85 l 219 -306 "},ŭ:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 410 860 b 226 1043 310 860 232 938 l 318 1043 b 410 954 328 989 354 954 b 510 1043 468 954 499 988 l 599 1043 b 410 860 593 938 510 860 "},ű:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 313 1056 l 444 1056 l 340 851 l 257 851 m 526 1056 l 658 1056 l 554 851 l 471 851 "},ū:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 231 989 l 594 989 l 594 900 l 231 900 "},ų:{ha:825,x_min:0,x_max:0,o:"m 638 -253 b 493 -142 551 -253 493 -211 b 593 -4 493 -85 538 -33 l 593 115 b 363 -12 560 47 479 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 7 b 603 -119 633 -40 603 -76 b 656 -169 603 -153 622 -169 b 728 -154 679 -169 707 -165 l 728 -236 b 638 -253 704 -246 676 -253 "},ů:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 408 853 b 482 933 451 853 482 888 b 408 1014 482 979 451 1014 b 335 933 365 1014 335 979 b 408 853 335 888 365 853 m 408 789 b 260 933 326 789 260 854 b 408 1078 260 1013 326 1078 b 557 933 490 1078 557 1013 b 408 789 557 854 490 789 "},ũ:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 488 860 b 338 919 428 860 378 919 b 282 857 311 919 289 893 l 199 857 b 339 1018 210 956 267 1018 b 488 958 397 1018 447 958 b 543 1021 514 958 536 985 l 626 1021 b 488 860 615 922 558 860 "},ẃ:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 600 1056 l 744 1056 l 600 851 l 514 851 "},ŵ:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 500 1051 l 604 1051 l 753 851 l 668 851 l 550 956 l 432 851 l 350 851 "},ẅ:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 428 881 b 354 954 388 881 354 914 b 428 1028 354 994 388 1028 b 501 954 468 1028 501 994 b 428 881 501 914 468 881 m 689 881 b 615 954 649 881 615 914 b 689 1028 615 994 649 1028 b 763 954 729 1028 763 994 b 689 881 763 914 729 881 "},ẁ:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 385 1056 l 529 1056 l 615 851 l 529 851 "},ŷ:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 315 1051 l 419 1051 l 568 851 l 483 851 l 365 956 l 247 851 l 165 851 "},ỳ:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 193 1056 l 338 1056 l 424 851 l 338 851 "},ź:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 379 1056 l 524 1056 l 379 851 l 293 851 "},ż:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 344 878 b 268 954 303 878 268 913 b 344 1031 268 996 303 1031 b 421 954 386 1031 421 996 b 344 878 421 913 386 878 "},ﬀ:{ha:881,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 835 b 358 1068 142 982 214 1068 b 444 1054 396 1068 415 1064 l 444 957 b 363 972 424 965 394 972 b 257 847 288 972 257 921 l 257 726 l 542 726 l 542 844 b 758 1078 542 992 614 1078 b 844 1064 796 1078 815 1074 l 844 967 b 763 982 824 975 794 982 b 657 857 688 982 657 931 l 657 726 l 835 726 l 835 629 l 657 629 l 657 0 l 542 0 l 542 629 l 257 629 l 257 0 l 142 0 "},ﬁ:{ha:829,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 726 l 710 726 l 710 0 l 594 0 m 650 878 b 574 954 608 878 574 913 b 650 1031 574 996 608 1031 b 726 954 692 1031 726 996 b 650 878 726 913 692 878 "},ﬂ:{ha:831,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 1074 l 711 1074 l 711 0 l 594 0 "},"⅛":{ha:992,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 768 -7 b 589 133 672 -7 589 40 b 676 254 589 194 624 236 b 607 353 633 272 607 306 b 769 481 607 433 685 481 b 931 354 856 481 931 433 b 860 256 931 306 903 274 b 949 136 915 235 949 194 b 768 -7 949 43 868 -7 m 769 63 b 856 143 818 63 856 90 b 769 222 856 193 818 222 b 683 142 722 222 683 193 b 769 63 683 90 722 63 m 769 282 b 842 349 813 282 842 307 b 769 414 842 389 810 414 b 696 347 728 414 696 389 b 769 282 696 306 731 282 "},"⅓":{ha:1004,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 778 -7 b 596 147 663 -7 599 54 l 681 147 b 775 63 686 99 713 63 b 863 138 835 63 863 92 b 779 213 863 188 835 213 l 743 213 l 743 278 l 778 278 b 856 346 831 278 856 303 b 783 411 856 383 832 411 b 697 335 735 411 703 382 l 613 335 b 785 481 618 419 682 481 b 944 353 886 481 944 425 b 865 250 944 300 913 267 b 958 136 921 238 958 199 b 778 -7 958 47 889 -7 "},"⅜":{ha:1033,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 825 993 l 917 993 l 213 0 l 121 0 m 810 -7 b 631 133 714 -7 631 40 b 718 254 631 194 665 236 b 649 353 675 272 649 306 b 811 481 649 433 726 481 b 972 354 897 481 972 433 b 901 256 972 306 944 274 b 990 136 957 235 990 194 b 810 -7 990 43 910 -7 m 811 63 b 897 143 860 63 897 90 b 811 222 897 193 860 222 b 725 142 764 222 725 193 b 811 63 725 90 764 63 m 811 282 b 883 349 854 282 883 307 b 811 414 883 389 851 414 b 738 347 769 414 738 389 b 811 282 738 306 772 282 "},"⅝":{ha:1025,x_min:0,x_max:0,o:"m 206 511 b 33 656 93 511 39 572 l 121 656 b 206 583 128 613 144 583 b 286 676 257 583 286 619 b 204 767 286 732 256 767 b 107 726 157 767 128 751 l 57 726 l 63 993 l 354 993 l 354 921 l 133 921 l 132 793 b 236 835 151 815 185 835 b 382 675 322 835 382 775 b 206 511 382 574 310 511 m 815 993 l 907 993 l 203 0 l 111 0 m 801 -7 b 622 133 706 -7 622 40 b 710 254 622 194 657 236 b 640 353 667 272 640 306 b 803 481 640 433 718 481 b 964 354 889 481 964 433 b 893 256 964 306 936 274 b 982 136 949 235 982 194 b 801 -7 982 43 901 -7 m 803 63 b 889 143 851 63 889 90 b 803 222 889 193 851 222 b 717 142 756 222 717 193 b 803 63 717 90 756 63 m 803 282 b 875 349 846 282 875 307 b 803 414 875 389 843 414 b 729 347 761 414 729 389 b 803 282 729 306 764 282 "},"⅔":{ha:1056,x_min:0,x_max:0,o:"m 15 533 l 193 722 b 268 857 239 769 268 813 b 199 926 268 900 243 926 b 115 835 153 926 124 900 l 31 835 b 201 999 36 939 100 999 b 360 858 301 999 360 943 b 268 689 360 796 324 743 l 167 589 l 364 589 l 364 518 l 15 518 m 838 993 l 929 993 l 225 0 l 133 0 m 829 -7 b 647 147 714 -7 650 54 l 732 147 b 826 63 738 99 764 63 b 914 138 886 63 914 92 b 831 213 914 188 886 213 l 794 213 l 794 278 l 829 278 b 907 346 882 278 907 303 b 835 411 907 383 883 411 b 749 335 786 411 754 382 l 664 335 b 836 481 669 419 733 481 b 996 353 938 481 996 425 b 917 250 996 300 964 267 b 1010 136 972 238 1010 199 b 829 -7 1010 47 940 -7 "},"⅞":{ha:986,x_min:0,x_max:0,o:"m 246 917 l 28 917 l 28 993 l 363 993 l 363 982 l 190 518 l 96 518 m 750 993 l 842 993 l 138 0 l 46 0 m 763 -7 b 583 133 667 -7 583 40 b 671 254 583 194 618 236 b 601 353 628 272 601 306 b 764 481 601 433 679 481 b 925 354 850 481 925 433 b 854 256 925 306 897 274 b 943 136 910 235 943 194 b 763 -7 943 43 863 -7 m 764 63 b 850 143 813 63 850 90 b 764 222 850 193 813 222 b 678 142 717 222 678 193 b 764 63 678 90 717 63 m 764 282 b 836 349 807 282 836 307 b 764 414 836 389 804 414 b 690 347 722 414 690 389 b 764 282 690 306 725 282 "},"":{ha:833,x_min:0,x_max:0,o:"m 378 -11 b 44 303 142 4 61 143 l 161 303 b 378 82 175 193 210 96 l 378 469 b 85 738 196 504 85 571 b 378 1004 85 881 206 992 l 378 1129 l 460 1129 l 460 1003 b 749 732 629 988 731 889 l 640 732 b 460 908 619 838 564 894 l 460 561 b 769 279 664 526 769 458 b 460 -11 769 122 644 3 l 460 -187 l 378 -187 m 654 272 b 460 456 654 375 611 425 l 460 82 b 654 272 576 96 654 169 m 194 747 b 378 575 194 660 225 607 l 378 910 b 194 747 258 900 194 832 "},"":{ha:833,x_min:0,x_max:0,o:"m 396 -10 b 88 356 215 8 88 147 l 88 367 b 396 736 88 572 221 715 l 396 874 l 478 874 l 478 736 b 756 485 614 725 735 653 l 642 485 b 478 640 626 583 560 631 l 478 86 b 653 261 565 99 642 157 l 760 261 b 478 -10 746 115 633 4 l 478 -187 l 396 -187 m 207 356 b 396 86 207 197 281 106 l 396 639 b 207 367 285 618 207 518 l 207 356 "},"":{ha:833,x_min:0,x_max:0,o:"m 21 628 l 106 628 b 449 1006 119 860 242 1006 b 750 706 619 1006 728 897 l 636 706 b 449 911 617 839 558 911 b 226 628 307 911 236 813 l 532 628 l 517 547 l 225 547 l 225 439 l 496 439 l 481 358 l 226 358 b 451 86 236 175 307 86 b 654 308 568 86 632 158 l 767 308 b 451 -12 744 103 625 -12 b 107 358 251 -12 121 119 l 21 358 l 21 439 l 106 439 l 106 547 l 21 547 "},"":{ha:833,x_min:0,x_max:0,o:"m 422 88 b 640 410 578 88 640 178 l 640 590 b 419 908 640 803 568 908 b 194 581 269 908 194 806 l 194 407 b 422 88 194 175 276 88 m 422 -12 b 71 406 214 -12 71 128 l 71 579 b 419 1006 71 861 207 1006 b 763 589 635 1006 763 861 l 763 408 b 422 -12 763 131 636 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 436 871 l 151 643 l 151 756 l 431 993 l 557 993 l 557 0 l 436 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 58 28 l 453 443 b 596 731 543 539 596 629 b 418 908 596 842 531 908 b 208 688 303 908 228 843 l 96 688 b 418 1006 111 882 229 1006 b 718 726 601 1006 718 897 b 518 365 718 604 640 485 l 244 99 l 724 99 l 724 0 l 58 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 61 293 193 -12 68 119 l 172 293 b 403 85 183 175 246 85 b 626 276 558 85 626 160 b 417 469 626 404 557 469 l 342 469 l 342 571 l 411 571 b 601 740 540 571 601 632 b 424 907 601 835 544 907 b 207 719 300 907 219 832 l 101 719 b 424 1006 108 876 235 1006 b 719 743 613 1006 719 881 b 558 526 719 631 651 564 b 750 276 675 496 750 414 b 400 -12 750 96 606 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 540 208 l 57 208 l 57 247 l 497 993 l 658 993 l 658 307 l 775 307 l 775 208 l 658 208 l 658 0 l 540 0 m 540 307 l 540 894 l 207 307 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 69 268 186 -12 83 106 l 185 268 b 399 85 204 160 247 85 b 617 325 533 85 617 175 b 408 557 617 465 535 557 b 174 461 293 557 226 521 l 129 461 l 129 993 l 688 993 l 688 889 l 229 889 l 229 586 b 432 654 269 624 338 654 b 740 325 610 654 740 528 b 400 -12 740 115 589 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 428 -12 b 71 439 157 -12 71 190 l 71 463 b 460 1006 71 819 232 1006 b 750 765 614 1006 724 925 l 635 765 b 451 907 613 857 563 907 b 190 510 301 907 196 772 b 446 644 238 590 331 644 b 771 319 643 644 771 501 b 428 -12 771 121 638 -12 m 428 82 b 647 314 558 82 647 174 b 426 550 647 457 561 550 b 199 331 293 550 199 460 b 428 82 199 168 294 82 "},"":{ha:833,x_min:0,x_max:0,o:"m 596 896 l 97 896 l 97 993 l 751 993 l 751 976 l 354 0 l 231 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 418 -12 b 75 282 256 -12 75 85 b 263 539 75 415 157 501 b 113 747 168 575 113 650 b 418 1006 113 908 265 1006 b 722 750 572 1006 722 906 b 569 540 722 650 661 581 b 760 285 685 499 760 413 b 418 -12 760 86 586 -12 m 418 86 b 636 289 540 86 636 157 b 421 486 636 419 539 486 b 199 286 303 486 199 418 b 418 86 199 156 303 86 m 422 582 b 600 749 528 582 600 643 b 418 911 600 844 521 911 b 235 746 315 911 235 849 b 422 582 235 642 321 582 "},"":{ha:833,x_min:0,x_max:0,o:"m 389 -11 b 69 244 206 -11 96 85 l 186 244 b 392 88 208 147 264 88 b 646 482 550 88 643 218 b 389 350 599 401 503 350 b 63 675 196 350 63 488 b 406 1007 63 874 196 1007 b 763 563 640 1007 763 849 l 763 500 b 389 -11 763 171 626 -11 m 407 444 b 635 660 540 444 635 531 b 406 913 635 822 539 913 b 186 681 275 913 186 821 b 407 444 186 538 272 444 "},"":{ha:854,x_min:0,x_max:0,o:"m 383 -12 b 63 349 210 -12 63 122 l 63 360 b 394 739 63 582 211 739 b 622 613 507 739 581 683 l 622 726 l 738 726 l 738 0 l 622 0 l 622 122 b 383 -12 581 51 481 -12 m 396 83 b 626 358 519 83 626 172 l 626 369 b 406 643 626 556 536 643 b 182 365 272 643 182 542 l 182 354 b 396 83 182 171 282 83 "},"":{ha:469,x_min:0,x_max:0,o:"m 151 629 l 38 629 l 38 726 l 151 726 l 151 892 l 267 892 l 267 726 l 426 726 l 426 629 l 267 629 l 267 0 l 151 0 "},ȷ:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 "}," ":{ha:153,x_min:0,x_max:0,o:""},"′":{ha:294,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 "},"″":{ha:521,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 m 325 993 l 450 993 l 374 653 l 290 653 "},"Ⓟ":{ha:1172,x_min:0,x_max:0,o:"m 422 774 l 600 774 b 804 604 725 774 804 719 l 804 600 b 604 432 804 483 722 432 l 528 432 l 528 225 l 422 225 m 600 508 b 703 600 667 508 703 540 l 703 604 b 600 692 703 667 665 692 l 528 692 l 528 508 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "}},familyName:"Graphik Regular",ascender:1136,descender:-253,underlinePosition:-75,underlineThickness:50,boundingBox:{yMin:-220,xMin:-230,yMax:1113,xMax:1092},resolution:1e3,original_font_information:{format:0,copyright:"©2009 Commercial Type.",fontFamily:"Graphik Regular",fontSubfamily:"Regular",uniqueID:"1.000;COM ;Graphik-Regular",fullName:"Graphik Regular Regular",version:"Version 1.000;PS 001.000;hotconv 1.0.72;makeotf.lib2.5.5900",postScriptName:"Graphik-Regular",trademark:"Graphik is a trademark of Commercial Type/Schwartzco Inc.",manufacturer:"Commercial Type",designer:"Christian Schwartz",manufacturerURL:"http://commercialtype.com",designerURL:"http://christianschwartz.com",licence:'Commercial Type Font Software End User License Agreement\r\rPLEASE READ THIS DOCUMENT CAREFULLY and we recommend that you keep a copy for further reference. \r\rThis End User License Agreement (the "Agreement" "EULA," "License," "Agreement" or "License Agreement") is a legal agreement between you and Schwartzco, Inc., d/b/a Commercial Type, a/d/b/a St. Bride Type Foundry (collectively, "Commercial Type") and becomes a binding contract between you and Schwartzco. This Agreement governs the terms of use the Font Software and the design of the Fonts embodied therein (collectively, "Font Software"), together with any media, printed materials, electronic documentation, updates, add-ons, artwork, web services and any other material that may be associated with the product now or in the future. This Agreement becomes effective (a) when you "ACCEPT LICENSE AGREEMENT," or (b) if you are acquire and accept the Font Software on a Compact Disc or Digital Video Disk (CD, DVD), or (c) when you open the compressed electronic file in which the Font Software is contained. If you do not wish to enter into this Agreement, do not purchase, access, download and/or install or otherwise use the Font Software.\r\r1. Upon payment in full, Commercial Type will grant you a non-exclusive terminable License to the Font Software that accompanies this EULA. Use of the Font Software is limited to Personal or Internal Business Use only. For the purposes of this Agreement, "Font Software" shall be defined as the design of the Fonts together with the Font Software which, when used generates the typeface, typographic designs and, if applicable, ornaments or other designs. Personal or Internal Business Use shall mean Use of the Font Software for your customary personal or internal business purposes and, except as may otherwise permitted herein, shall not mean or include the commercial distribution or use of Font Software, the design of the fonts or artwork embodied therein or any component thereof for any commercial use or in any Commercial Product for sale whatsoever. For the purposes of this Agreement, prohibited commercial uses include, by way of example not limitation, T-shirts, third-party software, electronic devices, mugs, animation, etc. and as may be further noted below. If you are unsure whether your use is not permitted, contact Commercial Type. Your failure to contact to seek permission or the lack of a specific prohibition in this Agreement shall not be interpreted or deemed a waiver or permissible use of any kind. You hereby agree that the Font Software shall further comprise all bitmap representations of typeface and typographic designs and ornaments created by or derived from the Font Software. The Font Software shall be deemed to include any upgrades, updates, related files, permitted modifications, if any, permitted copies, and related documentation.\r\r2. If you are a design consultancy, advertising agency or purchasing this license for use by or on behalf of such an entity, the ultimate end user should also purchase a license appropriate for their intended use of the Font Software, if their use of the Font Software is likely to involve uses not permitted under this Agreement. The license granted herein for personal use does not extend to uses by temporary employees or independent contractors using the Font Software as their use may relate to providing professional services or for other professional uses. Under such circumstances an employer and/or the ultimate end user are also required to purchase a license appropriate for their usage.\r\r3. For the purposes of this Agreement, "Commercial Product" shall also mean, among other things, a user editable electronic document created by Use of the Font Software which is offered for distribution to the general public (or to some subset of the general public), in Flash type software distributed or exhibited, in gaming products or software where the extraction of the Font Software or the designs embodied therein may be extracted; or use on goods for sale as a commercial product in exchange for a separate fee or other consideration. However, a document distributed in connection with a commercial transaction in which the consideration is unrelated to such a document (for example, printed advertising, a business letter or a receipt for purchase of tangible goods such as clothing), or as other design materials distributed incidental to the purchase of goods or services, shall not be considered a Commercial Product.\r\r4. a) Except as may be prohibited herein, you are permitted to electronically distribute a “Personal or Internal Business Use” document (that is, a document other than a Commercial Product as defined above) (i) that is in a static graphic image (for example, a “gif”) or in an embedded electronic document, and (ii) which is distributed in a format that permits only the viewing and printing (and not the editing, altering, enhancing, or modifying) of such static graphic image or embedded document. Personal or Internal Business Use shall not include any Use of the Font Software by persons that are not members of your immediate household, your authorized employees, or your authorized agents. All such household members, employees and agents shall be notified by you as to the terms and conditions of the Agreement and shall agree to be bound by it prior to use of the Font Software.\rb) Use of the Font Software in sIFR (Scalable Inman Font Replacement) is permitted. However, the use of Cufón or @font-face or other forms of web embedding or web font replacement technologies, (“Font Replacement Technologies”) other than pdf as otherwise expressly permitted herein, each require the purchase of a license upgrade.\r\r5. Commercial Type, its successors and assigns, expressly retain all right and title in and to the Font Software together with the design of the Font embodied therein together with any trademarks used in connection therewith. Except as may be otherwise expressly permitted herein, you agree not to copy the Font Software or create derivative works based upon the design of the Font or the Font Software. You hereby agree that the design of the Font and the Font Software are the exclusive property of Commercial Type and that the unauthorized use of the design of the Font or the Font Software is an infringement of Commercial Type\'s exclusive rights and causing significant monetary harm. All rights not expressly granted herein are reserved to Commercial Type. Commercial Type\'s rights and remedies in the event of an infringement shall be cumulative in nature. \r\r6. Except as is prohibited herein, you may install and Use the Font Software on a single file server for Use on a single local area network ("LAN") only when the Use of such Font Software is expressly for and limited to the number of total users disclosed and licensed under this Agreement, i.e., the total number of users who could use the Font Software, not the total number of users who might have access to the Font Software at any one time.\r\r7. Except as may be otherwise expressly permitted herein, you may not alter or copy the Font Software or the designs embodied therein in any manner whatsoever. Reformatting the Font Software into other formats for use in other operating systems is expressly prohibited. Upon payment of an additional fee and a separate written agreement Commercial Type may, if so agreed, provide the Font Software in alternate and/or additional font formats, contact Commercial Type for a quotation. Altering or amending the embedding bits characteristics of the Font Software is expressly prohibited. The Font Software may not be used to create or distribute any electronic document in which the Font Software or any part thereof, is embedded in a manner or format that permits editing, alterations, enhancements, or modifications by the recipient of such document. You may not knowingly transmit any electronic document or the Font Software to any party that intends or is likely to "hack," edit, alter, enhance, or otherwise modify the Font Software or remove the Font Software from any document.\r\r8. You may make one (1) back-up copy of Font Software for archival purposes only, and you agree to retain exclusive custody and control over any such copy. Upon termination of the Agreement, you must destroy the original and any and all copies of the Font Software. The unauthorized sharing, lending, renting, sale, or other unauthorized use or misuse of the back-up copy is a material breach of this Agreement and will result in the immediate termination of this License.\r\r9. If no other option exists, you may take a digitized copy of the Font Software used for a particular document, or Font Software embedded in an electronic document that is sent to a commercial printer or service bureau for use by the printer or service bureau for preparing the document provided that the printer or service bureau represents that it shall destroy any and all copies of the Font Software upon completion of its work. Notwithstanding, you agree that the transmission of a "print/preview" PDF document is the first and preferred method of transmitting such documents to a service bureau or printer.\r\r10. The designs embodied and the Font Software and the Font Software and any trademarks associated therewith are the exclusive property of Commercial Type and their designers, where applicable and are protected by the copyright and other intellectual property laws of the United States, by the copyright and design laws of other nations, and by other international treaties. Any copies that you are expressly permitted to make pursuant to the Agreement must contain the same copyright, trademark, and other proprietary notices that appear on or in the Font Software.\r\r11. You agree not to create, assist in and/or cause the creation of modifications or additions to the Fonts or Font Software, including, but not limited to, creating additional weights; creating additional or deleting existing characters; modifying existing characters; modifying font spacing and kerning; or converting fonts to an alternate digital format, modify, adapt, translate, reverse engineer, decompile, disassemble, alter, or otherwise attempt to discover the source code of the Font Software without first obtaining written permission from Commercial Type. In the event that permission is given to you, any and all modifications and additions shall become and shall remain the sole and exclusive property of Commercial Type and you may not sell, lend or otherwise transmit any modifications or additions to the Font Software to any third party. Other jurisdictions may provide for additional rights, and if applicable, you may reverse engineer or decompile the Font Software only to the extent that sufficient information is not available for the purpose of creating an interoperable software program (but only for such purpose and only to the extent that sufficient information is not provided by Commercial Type upon written request). All trademarks shall be used in accordance with accepted trademark practice, including identification of the trademark owner\'s name. Use of the trademarks associated with the Font Software inures solely to the benefit of Commercial Type. \r\r12. Use of Commercial Type Font Software in the following circumstances and/or applications is NOT permitted without first obtaining the appropriate licensing upgrade. \r\ra) \tALPHABET OR LETTERFORM-RELATED PRODUCTS\r\t\tFOR RESALE OR LETTERFORM CREATION PRODUCTS OR DEVICES;\rb) \tEMBEDDING IN ELECTRONIC DEVICES; ALL GAMING USES AND/OR DEVICES;\rc) \tEMBEDDING IN SOFTWARE;\rd) \tSTORING AND/OR SERVING THE FONT SOFTWARE FOR THE PURPOSES OF MAKING THE FONT SOFTWARE\r\t\tAVAILABLE VIA THE INTERNET USING FONT REPLACEMENT TECHNOLOGIES.\r\r\ri) Letterform or Alphabet Products include, but are not limited to, signage and/or scrapbooking uses involving reproductions of individual letterforms, use in the creation of signage or numbering products, rubber stamps, die-cut products, stencil products, tattoo, flash, or adhesive sticker alphabet products or any other product containing any image of or derived from the design of the Font embodied in the Font Software of which any likeness of the alphabet can be reproduced.\r\rii) Embedding of the Fonts in a print/preview format is permitted. Notwithstanding, embedding or other use of the Fonts or the outlines thereof in any method which permits the extraction of the Font Software of the designs embodied therein is expressly prohibited. Any such use requires the express written permission of Commercial Type and may or may not require the purchase of a license upgrade at the sole discretion of Commercial Type.\r\riii) In the event any dingbats or other art forms are part of the Font Software, use of the artwork is further restricted. You may use the artwork, drawings and/or dingbats on goods for sale, in logo design, retail packaging or in point of sale uses only after the purchase of a license upgrade.\r\rIn order to obtain a license upgrade, you must contact Commercial Type at info@commercialtype.com for more information. If you are unsure whether your use of the Font Software is specifically permitted under this Agreement, contact Commercial Type.\r\r13. Embedded Electronic Devices includes the use of the Font Software for any on-screen display or on an electronic device outside a single location. For example, and not by way of limitation, such electronic devices include a kiosk, gaming devices, embroidery or sewing machines game playing or gambling devices, irrespective of whether the showing or creation of copies of the design embodied in the Font Software is created by use of the software or as an image of the design in tiff, gif or other format. \r\r14. Commercial Type Font Software is licensed for use by a specified number of users. Use of the Font Software in more than one geographic location or by means of server or central CPU outside of the terms of your license is permitted provided the each user or potential user is licensed. License upgrades may be purchased from Commercial Type at info@commercialtype.com.\r\r15. Except as may be otherwise expressly provided for herein, you expressly agree not to rent, lease, sublicense, give, lend, or further distribute the Font Software. You may transfer all your rights under this Agreement another person or entity provided that (i) the transferee accepts and agrees to be bound by all the terms and conditions of this Agreement, and (ii) you destroy all copies of the Font Software, including all copies stored in the memory of a hardware device.\r\r16. Commercial Type warrants that the Font Software will perform substantially in accordance with its documentation for ninety (90) days following delivery of the Font Software. To make a warranty claim, you must either return the Font Software to the location from which you obtained it together with a copy of your sales receipt or, if acquired on-line, contact the on-line provider with sufficient information regarding your acquisition of the Font Software to permit the confirmation of the effective date of this License. Schwartzco, Inc. and Commercial Type hereby EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. COMMERCIAL TYPE DOES NOT WARRANT THAT THE OPERATION OF THE FONT SOFTWARE WILL BE UNINTERRUPTED OR ERROR-FREE, OR THAT THE FONT SOFTWARE IS WITHOUT DEFECTS. UNDER NO CIRCUMSTANCES SHALL COMMERCIAL TYPE BE LIABLE TO YOU OR ANY OTHER PARTY, WHETHER IN CONTRACT OR TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, FOR ANY SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING LOST PROFITS, SAVINGS OR BUSINESS INTERRUPTION AS A RESULT OF THE USE OF THE FONT SOFTWARE EVEN IF NOTIFIED IN ADVANCE OF SUCH POSSIBILITY. You hereby agree that your entire, exclusive, and cumulative liability and remedy shall be limited to the purchase price of this Font Software License. Under no circumstances shall Schwartzco, Inc.\'s or Commercial Type\'s liability to you exceed either the refunding of the cost of the Font Software License or replacement of the Font Software either of which shall be at Commercial Type\'s sole discretion.\r\r17. OTHER LAW - CONSUMERS ONLY. Some jurisdictions do not allow the exclusion or limitation of incidental, consequential or special damages, implied warranties or implied warranties as they relate to sales to consumers. ANY IMPLIED WARRANTY OR OTHER RIGHT CREATED BY LAW IS ONLY EFFECTIVE FOR THE NINETY (90) DAY WARRANTY PERIOD. THERE ARE NO WARRANTIES OR CONDITIONS OF ANY KIND AFTER THE NINETY (90) DAY WARRANTY PERIOD. To the extent permissible by law, you agree that all implied warranties are not to be effective for more than thirty (30) days. \r\r18. You expressly agree that this Agreement shall be governed by the laws of the State of New York, U.S.A., as they apply to contracts entered into and wholly performed therein and without respect to its conflict of laws provisions or the conflict of laws provisions of any other jurisdiction. You expressly submit to the personal jurisdiction of the state and federal courts in the State of New York, USA, agree to waive any defenses arising out of the selection of jurisdiction or venue and further agree to service of process by mail. You hereby expressly agree that the application of the United Nations Convention of Contracts for the International Sale of Goods is expressly excluded.\r\r19. You acknowledge that you have read and understand this Agreement and that by using the software you agree to be bound by its terms and conditions. You further agree that it is the complete and exclusive statement of the agreement between Commercial Type and you which supersedes any proposal or prior agreement, oral or written, and any other communications relating to the subject matter of this Agreement. No variation of the terms of this Agreement or any different terms will be enforceable in the absence of an express written amendment, or consent, including a written express waiver of the affected terms of this Agreement. If any provision of this Agreement is declared by a court of competent jurisdiction to be invalid, void or unenforceable, the remaining provisions of this Agreement shall continue in full force and effect, and the invalid provision shall be replaced by Commercial Type with a provision that effects the intent of the invalid provision.\r\r20. Commercial Type expressly reserves the right to amend or modify its License Agreements at any time and without prior notification.\r\r21. The Agreement shall automatically terminate in the event you or any authorized user breaches any term or condition set forth herein. Notwithstanding any termination of this License, Commercial Type expressly reserves any and all other rights and remedies under equity or law. The Agreement may only be modified in a writing signed by an authorized officer of Commercial Type.\r\r22. You agree to be responsible for compliance with all laws, foreign and domestic relating to the control of exports or the transfer of technology. If you are purchasing this License for government use, or under a government contract, you agree to familiarize yourself with and follow any applicable rules and regulations relating to the purchase of a license to use software and the actual use thereof.\r\rAll inquiries and arrangements for returns, if any, may be sent via e-mail to info@commercialtype.com. The Commercial Type website is located at www.commercialtype.com\r\rv090815',licenceURL:"http://commercialtype.com/license",preferredFamily:"Graphik"},cssFontWeight:"normal",cssFontStyle:"normal"}},2556:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tag3dEngine=void 0;const n=i(5656);Object.defineProperty(t,"Tag3dEngine",{enumerable:!0,get:function(){return n.Tag3dEngine}})},9577:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextGeometry=void 0;const n=i(5232);class r extends n.ExtrudeGeometry{constructor(e,t={}){const i=t.font;if(void 0===i)super();else{const n=i.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(n,t)}this.type="TextGeometry"}}t.TextGeometry=r},4456:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Font=t.FontLoader=void 0;const n=i(5232);class r extends n.Loader{constructor(e){super(e)}load(e,t,i,r){const a=this,s=new n.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,(function(e){let i;try{i=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}const n=a.parse(i);t&&t(n)}),i,r)}parse(e){return new a(e)}}t.FontLoader=r;class a{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],n=function(e,t,i){const n=Array.from(e),r=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*r,o=[];let l=0,c=0;for(let e=0;e<n.length;e++){const t=n[e];if("\n"===t)l=0,c-=a;else{const e=s(t,r,l,c,i);l+=e.offsetX,o.push(e.path)}}return o}(e,t,this.data);for(let e=0,t=n.length;e<t;e++)Array.prototype.push.apply(i,n[e].toShapes());return i}}function s(e,t,i,r,a){const s=a.glyphs[e]||a.glyphs["?"];if(!s)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+a.familyName+".");const o=new n.ShapePath;let l,c,u,h,d,f,p,m;if(s.o){const e=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let n=0,a=e.length;n<a;)switch(e[n++]){case"m":l=e[n++]*t+i,c=e[n++]*t+r,o.moveTo(l,c);break;case"l":l=e[n++]*t+i,c=e[n++]*t+r,o.lineTo(l,c);break;case"q":u=e[n++]*t+i,h=e[n++]*t+r,d=e[n++]*t+i,f=e[n++]*t+r,o.quadraticCurveTo(d,f,u,h);break;case"b":u=e[n++]*t+i,h=e[n++]*t+r,d=e[n++]*t+i,f=e[n++]*t+r,p=e[n++]*t+i,m=e[n++]*t+r,o.bezierCurveTo(d,f,p,m,u,h)}}return{offsetX:s.ha*t,path:o}}t.Font=a,a.prototype.isFont=!0},8199:function(e,t,i){"use strict";var n,r,a,s,o,l,c=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},h=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenter=void 0;const d=i(5174),f=i(3441),p=i(2248),m=i(8877),g=i(7038),v=i(148),b=i(9878),_=i(3858),y=i(6041);t.CreationControlCenter=class{constructor(){n.set(this,m.EventEngine.instance),r.set(this,m.Logger.instance),a.set(this,_.Tree.instance),s.set(this,m.StateEngine.instance),o.set(this,m.UuidGenerator.instance),l.set(this,void 0),this.renderingEngines={},this.sessionEngines={}}static get instance(){return this._instance||(this._instance=new this)}applySettings(e,t,i){i=i||{},this.sessionEngines[e].applySettings(t,i);const n=[];i.session&&i.session.parameter&&i.session.parameter.value&&n.push(this.sessionEngines[e].customize());for(const t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[t].sessionSettingsId)&&(u(this,s,"f").renderingEngines[t].settingsAssigned.reset(),n.push(new Promise((e=>{u(this,s,"f").renderingEngines[t].settingsAssigned.then((()=>{e()}))}))),this.renderingEngines[t].applySettings(i.viewport));return new Promise((e=>Promise.all(n).then((()=>e()))))}applyViewportSettings(e,t,i={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1}){i=i||{};const n=new m.SettingsEngine;n.loadSettings(t);const r=[];return u(this,s,"f").renderingEngines[e].settingsAssigned.reset(),r.push(new Promise((t=>{u(this,s,"f").renderingEngines[e].settingsAssigned.then((()=>{t()}))}))),this.renderingEngines[e].applySettings(i,n),new Promise((e=>Promise.all(r).then((()=>e()))))}closeRenderingEngine(e){return c(this,void 0,void 0,(function*(){this.renderingEngines[e]&&(u(this,r,"f").debugLow(`CreationControlCenter.closeRenderingEngine: Closing viewport ${e}.`),!1===u(this,s,"f").renderingEngines[e].initialized.resolved&&(yield new Promise((t=>{u(this,s,"f").renderingEngines[e].initialized.then((()=>t()))}))),u(this,s,"f").renderingEngines[e].settingsAssigned.reset(),u(this,s,"f").renderingEngines[e].environmentMapLoaded.reset(),u(this,s,"f").renderingEngines[e].initialized.reset(),yield this.renderingEngines[e].close(),this.renderingEngines[e]=void 0,delete this.renderingEngines[e],delete u(this,s,"f").renderingEngines[e],u(this,r,"f").debug("CreationControlCenter.closeRenderingEngine: Viewport closed."),this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,n,"f").emitEvent(m.EVENTTYPE.VIEWPORT.VIEWPORT_CLOSED,{viewportId:e}))}))}closeSessionEngine(e){var t;return c(this,void 0,void 0,(function*(){if(this.sessionEngines[e]){u(this,r,"f").debugLow(`CreationControlCenter.closeSession: Closing session ${e}.`),!1===u(this,s,"f").sessionEngines[e].initialized.resolved&&(yield new Promise((t=>{u(this,s,"f").sessionEngines[e].initialized.then((()=>t()))}))),yield this.sessionEngines[e].close();for(const t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL&&this.renderingEngines[t].sessionSettingsId===e||this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")===this.sessionEngines[e])&&this.renderingEngines[t].reset();if(u(this,l,"f")===this.sessionEngines[e]){const i=Object.values(this.sessionEngines).filter((t=>t.id!==e));if(h(this,l,0===i.length?void 0:i[0],"f"),u(this,l,"f")){const e=[];for(const i in this.renderingEngines)!1===u(this,s,"f").renderingEngines[i].settingsAssigned.resolved&&this.renderingEngines[i].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&(e.push(u(this,s,"f").renderingEngines[i].settingsAssigned),this.assignSettings(this.renderingEngines[i],null===(t=u(this,l,"f"))||void 0===t?void 0:t.id));yield Promise.all(e),this.update&&this.update(this.sessionEngines,this.renderingEngines)}}u(this,s,"f").sessionEngines[e].settingsRegistered.reset(),this.sessionEngines[e]=void 0,delete this.sessionEngines[e],delete u(this,s,"f").sessionEngines[e],u(this,r,"f").debug("CreationControlCenter.closeSessionEngine: Session closed.");for(const e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.closeSessionEngine");this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,n,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_CLOSED,{sessionId:e})}}))}createRenderingEngineThreeJs(e){return c(this,void 0,void 0,(function*(){const t=u(this,o,"f").create(),i=e.id||u(this,o,"f").create();e.id=i;try{const o={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:0,status:"Creating viewport",data:{viewportId:i}};if(u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_START,o),this.renderingEngines[i]){const e={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:.1,status:"Closing viewport with same id",data:{viewportId:i}};u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,e),u(this,r,"f").warn(`CreationControlCenter.createViewport: Viewer with this id (${i}) already exists. Closing initial instance.`),yield this.closeRenderingEngine(i)}u(this,s,"f").renderingEngines[i]={id:i,initialized:new m.StatePromise,environmentMapLoaded:new m.StatePromise,settingsAssigned:new m.StatePromise,boundingBoxCreated:new m.StatePromise,busy:[],update:()=>{}};const c=new y.RenderingEngine(e);if(u(this,s,"f").renderingEngines[i].update=c.update.bind(c),this.renderingEngines[i]=c,c.cameraEngine.createDefaultCameras(),e.sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL){if(!e.sessionSettingsId)throw new m.ShapeDiverViewerViewportError("Session with sessionSettingsMode MANUAL needs to have a sessionSettingsId.");const t=e.sessionSettingsId;this.sessionEngines[t]&&(yield this.assignSettings(c,t,!0))}else e.sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&(yield this.assignSettings(c,u(this,l,"f").id,!0));c.sessionSettingsMode===p.SESSION_SETTINGS_MODE.NONE&&c.visibility===p.VISIBILITY_MODE.SESSION||c.visibility===p.VISIBILITY_MODE.INSTANT?c.show=!0:c.visibility===p.VISIBILITY_MODE.SESSION&&(u(this,a,"f").root.boundingBox.isEmpty()?u(this,n,"f").addListener(m.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{const t=e;t.viewportId===c.id&&(new d.Box(t.boundingBox.min,t.boundingBox.max).isEmpty()?c.show=!1:u(this,s,"f").renderingEngines[i].settingsAssigned.resolved?c.show=!0:u(this,s,"f").renderingEngines[i].settingsAssigned.then((()=>{c.show=!0})))})):u(this,s,"f").renderingEngines[i].settingsAssigned.resolved?c.show=!0:u(this,s,"f").renderingEngines[i].settingsAssigned.then((()=>{c.show=!0}))),u(this,s,"f").renderingEngines[i].initialized.resolve(!0),u(this,r,"f").debug(`CreationControlCenter.createViewport: Viewport(${i}) created.`);const h={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:1,status:"Viewport created",data:{viewportId:i}};return this.update&&this.update(this.sessionEngines,this.renderingEngines),u(this,n,"f").emitEvent(m.EVENTTYPE.VIEWPORT.VIEWPORT_CREATED,{viewportId:i}),u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_END,h),this.renderingEngines[i]}catch(e){const r={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:.9,status:"Viewport created failed, closing viewport",data:{viewportId:i}};u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,r);try{yield this.closeRenderingEngine(i)}catch(e){}const a={type:g.TASK_TYPE.VIEWPORT_CREATION,id:t,progress:1,status:"Viewport created failed, exiting",data:{viewportId:i}};throw u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_CANCEL,a),e}}))}createSessionEngine(e){return c(this,void 0,void 0,(function*(){const t=u(this,o,"f").create(),i=e.id||u(this,o,"f").create();e.id=i;try{const a={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:0,status:"Creating session",data:{sessionId:i}};if(u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_START,a),this.sessionEngines[i]){const e={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.1,status:"Closing session with same id",data:{sessionId:i}};u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,e),u(this,r,"f").warn(`CreationControlCenter.createSession: Session with this id (${i}) already exists. Closing initial instance.`),yield this.closeSessionEngine(i)}u(this,s,"f").sessionEngines[i]={id:i,initialized:new m.StatePromise,initialOutputsLoaded:new m.StatePromise,settingsRegistered:new m.StatePromise};const o=new b.SessionEngine({id:i,guid:e.guid,ticket:e.ticket,modelViewUrl:e.modelViewUrl,excludeViewports:e.excludeViewports,buildVersion:f.build_data.build_version,buildDate:f.build_data.build_date,jwtToken:e.jwtToken}),c={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.25,status:"Initializing session.",data:{sessionId:i}};u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,c),yield o.init(e.initialParameterValues),!1!==e.loadOutputs&&(!1!==e.waitForOutputs?(yield o.updateOutputs({eventId:t,type:g.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:{sessionId:i}}),u(this,s,"f").sessionEngines[i].initialOutputsLoaded.resolve(!0),u(this,n,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i})):o.updateOutputs({eventId:t,type:g.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:{sessionId:i}}).then((()=>{u(this,s,"f").sessionEngines[i].initialOutputsLoaded.resolve(!0),u(this,n,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i});for(const e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.createSessionEngine.waitForOutputs=false")}))),this.sessionEngines[i]=o,u(this,s,"f").sessionEngines[i].initialized.resolve(!0),u(this,r,"f").debug(`CreationControlCenter.createSession: Session(${o.id}) created.`),u(this,l,"f")||h(this,l,o,"f");const d=[];for(const e in this.renderingEngines)!1===u(this,s,"f").renderingEngines[e].settingsAssigned.resolved&&(this.renderingEngines[e].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST||this.renderingEngines[e].sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL&&this.renderingEngines[e].sessionSettingsId===i)&&(d.push(u(this,s,"f").renderingEngines[e].settingsAssigned),this.assignSettings(this.renderingEngines[e],i));yield Promise.all(d);for(const e in this.renderingEngines)this.renderingEngines[e].update("CreationControlCenter.createSessionEngine");this.update&&this.update(this.sessionEngines,this.renderingEngines);const v={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:1,status:"Session created",data:{sessionId:i}};return u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_END,v),u(this,n,"f").emitEvent(m.EVENTTYPE.SESSION.SESSION_CREATED,{sessionId:i}),o}catch(e){if((0,m.isViewerError)(e)&&(this.sessionEngines[i]&&1===Object.values(this.sessionEngines).length||!this.sessionEngines[i]&&0===Object.values(this.sessionEngines).length))for(const t in this.renderingEngines)this.renderingEngines[t].displayErrorMessage(e.message);const r={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:.9,status:"Session created failed, closing session",data:{sessionId:i}};u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_PROCESS,r),yield this.closeSessionEngine(i);const a={type:g.TASK_TYPE.SESSION_CREATION,id:t,progress:1,status:"Session created failed",data:{sessionId:i}};throw u(this,n,"f").emitEvent(m.EVENTTYPE.TASK.TASK_CANCEL,a),e}}))}createSettingsObject(e,t){const i=this.sessionEngines[e];let n;if(i.settingsEngine.settings.build_version=f.build_data.build_version,i.settingsEngine.settings.build_date=f.build_data.build_date,i.settingsEngine.settings.settings_version=v.latestVersion,t&&this.renderingEngines[t])n=this.renderingEngines[t];else for(const t in this.renderingEngines)(this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[t].sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[t].sessionSettingsId)&&(n=this.renderingEngines[t]);return n&&n.saveSettings(),i.settingsEngine.settings}getARSessionEngine(){for(const e in this.sessionEngines)if(this.sessionEngines[e].canUploadGLTF)return this.sessionEngines[e]}getViewportSettings(e){const t=this.renderingEngines[e];if(!t)throw new m.ShapeDiverViewerViewportError("Viewport with id "+e+" could not be found.");const i=new m.SettingsEngine;return t.saveSettings(i),i.settings}resetSettings(e,t){t=t||{},this.sessionEngines[e].resetSettings(t);const i=[];t.session&&t.session.parameter&&t.session.parameter.value&&i.push(this.sessionEngines[e].customize());for(const n in this.renderingEngines)(this.renderingEngines[n].sessionSettingsMode===p.SESSION_SETTINGS_MODE.FIRST&&u(this,l,"f")&&e===u(this,l,"f").id||this.renderingEngines[n].sessionSettingsMode===p.SESSION_SETTINGS_MODE.MANUAL&&e===this.renderingEngines[n].sessionSettingsId)&&(u(this,s,"f").renderingEngines[n].settingsAssigned.reset(),i.push(new Promise((e=>{u(this,s,"f").renderingEngines[n].settingsAssigned.then((()=>{e()}))}))),this.renderingEngines[n].applySettings(t.viewport));return new Promise((e=>Promise.all(i).then((()=>e()))))}saveSettings(e,t){return c(this,void 0,void 0,(function*(){const i=this.sessionEngines[e];yield i.saveUiProperties(!1);const n=this.createSettingsObject(e,t),a=yield i.saveSettings(n);if(!a)throw new m.ShapeDiverViewerSessionError(`Session(${e}).saveSettings: Could not save settings.`);return u(this,r,"f").debug(`Session(${e}).saveSettings: Saved settings.`),a}))}assignSettings(e,t,i=!1){return c(this,void 0,void 0,(function*(){!0===u(this,s,"f").sessionEngines[t].initialized.resolved?(e.settingsEngine=this.sessionEngines[t].settingsEngine,yield e.applySettings(void 0,void 0,i)):yield new Promise((n=>{u(this,s,"f").sessionEngines[t].initialized.then((()=>c(this,void 0,void 0,(function*(){e.settingsEngine=this.sessionEngines[t].settingsEngine,yield e.applySettings(void 0,void 0,i),n()}))))}))}))}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap},5094:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenter=void 0;const n=i(8199);Object.defineProperty(t,"CreationControlCenter",{enumerable:!0,get:function(){return n.CreationControlCenter}})},3979:function(e,t,i){"use strict";var n,r,a,s,o,l=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),c=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&l(t,e,i);return c(t,e),t},h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingEngine=void 0;const f=u(i(5232)),p=i(5897),m=i(3289),g=i(7181),v=i(420),b=i(3689),_=i(6152),y=i(5158),A=i(8030),E=i(2850),w=i(3858),S=i(3490),T=i(3467),x=i(8973),M=i(887),R=i(9346),P=i(6756),C=i(4323),D=i(514),O=i(1990),k=i(2248),I=i(8877),N=i(7038);t.RenderingEngine=class{constructor(e){n.set(this,"https://viewer.shapediver.com/v3/graphics/logo_animated_breath.svg"),r.set(this,"https://viewer.shapediver.com/v3/graphics/logo.png"),a.set(this,"https://viewer.shapediver.com/v3/graphics/spinner_ripple.svg"),this._animationEngine=m.AnimationEngine.instance,this._canvasEngine=v.CanvasEngine.instance,this._colorCache=[],this._converter=I.Converter.instance,this._eventEngine=I.EventEngine.instance,this._intersectionManager=E.IntersectionEngine.instance,this._logger=I.Logger.instance,this._stateEngine=I.StateEngine.instance,this._systemInfo=I.SystemInfo.instance,this._tree=w.Tree.instance,this._uuidGenerator=I.UuidGenerator.instance,s.set(this,{}),o.set(this,{[k.FLAG_TYPE.CAMERA_FREEZE]:[],[k.FLAG_TYPE.CONTINUOUS_RENDERING]:[],[k.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE]:[]}),this._arRotation=M.vec3.create(),this._arScale=M.vec3.fromValues(1,1,1),this._arTranslation=M.vec3.create(),this._automaticColorAdjustment=!0,this._automaticResizing=!0,this._beautyRenderBlendingDuration=1500,this._beautyRenderDelay=50,this._busy=!1,this._busyModeDisplay=k.BUSY_MODE_DISPLAY.SPINNER,this._clearAlpha=1,this._clearColor="#ffffff",this._closed=!1,this._defaultMaterialColor="#199b9b",this._enableAR=!0,this._environmentMap="null",this._environmentMapAsBackground=!1,this._environmentMapBlurriness=0,this._environmentMapForUnlitMaterials=!1,this._environmentMapIntensity=1,this._environmentMapResolution="1024",this._environmentMapRotation=M.quat.create(),this._gridVisibility=!0,this._groundPlaneShadowVisibility=!1,this._groundPlaneVisibility=!0,this._lights=!0,this._maximumRenderingSize={width:1920,height:1080},this._pause=!1,this._pointSize=1,this._shadows=!0,this._show=!1,this._showStatistics=!1,this._softShadows=!0,this._type=k.RENDERER_TYPE.STANDARD,f.Object3D.DEFAULT_UP=new f.Vector3(0,0,1),f.ColorManagement.enabled=!1,(0,p.adaptShaders)();const t=Object.assign({},e),i=Object.assign({},t.branding);this._id=t.id||I.UuidGenerator.instance.create(),this._visibility=t.visibility||k.VISIBILITY_MODE.SESSION,this._sessionSettingsMode=t.sessionSettingsMode||k.SESSION_SETTINGS_MODE.FIRST,this._sessionSettingsId=t.sessionSettingsId,this._branding={logo:void 0===i.logo?d(this,n,"f"):i.logo,backgroundColor:i.backgroundColor||"#393a45FF",busyModeSpinner:void 0===i.busyModeSpinner?d(this,a,"f"):i.busyModeSpinner,busyModeDisplay:i.busyModeDisplay||k.BUSY_MODE_DISPLAY.SPINNER,spinnerPositioning:i.spinnerPositioning||k.SPINNER_POSITIONING.BOTTOM_RIGHT},this._canvas=this._canvasEngine.getCanvas(this._canvasEngine.createCanvasObject(t.canvas)),this._domEventEngine=new I.DomEventEngine(this._canvas.canvasElement),this._cameraEngine=new O.CameraEngine(this,this._canvas.canvasElement),this._lightEngine=new S.LightEngine(this),this._cameraManager=new g.CameraManager(this),this._environmentGeometryManager=new b.EnvironmentGeometryManager(this),this._sceneTracingManager=new P.SceneTracingManager(this),this._sceneTreeManager=new C.SceneTreeManager(this),this._renderingManager=new R.RenderingManager(this),this._postProcessingManager=new x.PostProcessingManager(this),this._environmentMapLoader=new _.EnvironmentMapLoader(this),this._materialLoader=new p.MaterialLoader(this),this._geometryLoader=new y.GeometryLoader(this),this._htmlElementAnchorLoader=new A.HTMLElementAnchorLoader(this),this._lightLoader=new T.LightLoader(this),this._renderer=this.renderingManager.createRenderer(this._canvas.canvasElement),this._spinnerDivElement=this.renderingManager.addSpinner(this._canvas.canvasElement,this._branding),this._logoDivElement=this.renderingManager.addLogo(this._canvas.canvasElement,this._branding),this._cameraManager.init(),this._environmentGeometryManager.init(),this._sceneTracingManager.init(),this._sceneTreeManager.init(),this._renderingManager.init(),this._postProcessingManager.init(),this._environmentMapLoader.init(),this._materialLoader.init(),this._geometryLoader.init(),this._htmlElementAnchorLoader.init(),this._lightLoader.init(),this._renderingManager.start(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.then((()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)})),this._sessionSettingsMode===k.SESSION_SETTINGS_MODE.NONE&&(this.environmentMap="photo_studio")}get arRotation(){return this._arRotation}set arRotation(e){this._arRotation=e}get arScale(){return this._arScale}set arScale(e){this._arScale=e}get arTranslation(){return this._arTranslation}set arTranslation(e){this._arTranslation=e}get automaticColorAdjustment(){return this._automaticColorAdjustment}set automaticColorAdjustment(e){this._automaticColorAdjustment!==e&&(this._automaticColorAdjustment=e,this._colorCache.forEach((t=>t.colorCorrection(e))),this._materialLoader.assignColorCorrection(e))}get automaticResizing(){return this._automaticResizing}set automaticResizing(e){this._automaticResizing=e}get beautyRenderBlendingDuration(){return this._beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){this._beautyRenderBlendingDuration=e}get beautyRenderDelay(){return this._beautyRenderDelay}set beautyRenderDelay(e){this._beautyRenderDelay=e}get branding(){return this._branding}get busy(){return this._busy}set busy(e){this._busy=e}get busyModeDisplay(){return this._busyModeDisplay}set busyModeDisplay(e){this._busyModeDisplay=e}get camera(){return this._cameraManager.camera}get cameraEngine(){return this._cameraEngine}get cameraManager(){return this._cameraManager}get canvas(){return this._canvas.canvasElement}get canvasEngine(){return this._canvasEngine}get clearAlpha(){return this._clearAlpha}set clearAlpha(e){this._clearAlpha=e}get clearColor(){return this._clearColor}set clearColor(e){this._clearColor=e}get closed(){return this._closed}get colorCache(){return this._colorCache}get continuousRendering(){return this._renderingManager.continuousRendering}set continuousRendering(e){this._renderingManager.continuousRendering=e}get continuousShadowMapUpdate(){return this._renderingManager.continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._renderingManager.continuousShadowMapUpdate=e}get defaultMaterialColor(){return this._defaultMaterialColor}set defaultMaterialColor(e){this._defaultMaterialColor=e,this._materialLoader.assignDefaultMaterialColor()}get domEventEngine(){return this._domEventEngine}get enableAR(){return this._enableAR}set enableAR(e){this._enableAR=e}get environmentMap(){return this._environmentMap}set environmentMap(e){this._environmentMap=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapAsBackground(){return this._environmentMapAsBackground}set environmentMapAsBackground(e){this._environmentMapAsBackground=e}get environmentMapBlurriness(){return this._environmentMapBlurriness}set environmentMapBlurriness(e){this._environmentMapBlurriness=e,this._sceneTreeManager.scene.backgroundBlurriness=this._environmentMapBlurriness}get environmentMapForUnlitMaterials(){return this._environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){this._environmentMapForUnlitMaterials=e,this._materialLoader.assignEnvironmentMapForUnlitMaterials(e)}get environmentMapIntensity(){return this._environmentMapIntensity}set environmentMapIntensity(e){this._environmentMapIntensity=e,this._sceneTreeManager.scene.backgroundIntensity=e,this._materialLoader.assignEnvironmentMapIntensity(e)}get environmentMapLoader(){return this._environmentMapLoader}get environmentMapResolution(){return this._environmentMapResolution}set environmentMapResolution(e){this._environmentMapResolution=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapRotation(){return this._environmentMapRotation}set environmentMapRotation(e){this._environmentMapRotation=e,this._materialLoader.updateEnvironmentMapRotation(e)}get eventEngine(){return this._eventEngine}get geometryLoader(){return this._geometryLoader}get gridColor(){return this._environmentGeometryManager.gridColor}set gridColor(e){this._environmentGeometryManager.gridColor=e}get gridVisibility(){return this._gridVisibility}set gridVisibility(e){this._environmentGeometryManager.grid&&(this._environmentGeometryManager.grid.visible=e),this._gridVisibility=e}get groundPlaneColor(){return this._environmentGeometryManager.groundPlaneColor}set groundPlaneColor(e){this._environmentGeometryManager.groundPlaneColor=e}get groundPlaneShadowColor(){return this._environmentGeometryManager.groundPlaneShadowColor}set groundPlaneShadowColor(e){this._environmentGeometryManager.groundPlaneShadowColor=e}get groundPlaneShadowVisibility(){return this._groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){this._environmentGeometryManager.groundPlaneShadow&&(this._environmentGeometryManager.groundPlaneShadow.visible=e),this._groundPlaneShadowVisibility=e}get groundPlaneVisibility(){return this._groundPlaneVisibility}set groundPlaneVisibility(e){this._environmentGeometryManager.groundPlane&&(this._environmentGeometryManager.groundPlane.visible=e),this._groundPlaneVisibility=e}get htmlElementAnchorLoader(){return this._htmlElementAnchorLoader}get id(){return this._id}get lightEngine(){return this._lightEngine}get lightLoader(){return this._lightLoader}get lightScene(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get lightSceneId(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get lights(){return this._lights}set lights(e){this._lights=e}get logoDivElement(){return this._logoDivElement}get materialLoader(){return this._materialLoader}get maximumRenderingSize(){return this._maximumRenderingSize}set maximumRenderingSize(e){this._maximumRenderingSize=e}get minimalRendering(){return this.renderingManager.minimalRendering}get outputEncoding(){switch(this._renderer.outputColorSpace){case f.SRGBColorSpace:return k.TEXTURE_ENCODING.SRGB;case f.LinearSRGBColorSpace:default:return k.TEXTURE_ENCODING.LINEAR}}set outputEncoding(e){switch(e){case k.TEXTURE_ENCODING.SRGB:this._renderer.outputColorSpace=f.SRGBColorSpace;break;case k.TEXTURE_ENCODING.LINEAR:default:this._renderer.outputColorSpace=f.LinearSRGBColorSpace}}get pause(){return this._pause}set pause(e){this._pause=e}get physicallyCorrectLights(){return!this._renderer.useLegacyLights}set physicallyCorrectLights(e){this._renderer.useLegacyLights=!e}get pointSize(){return this._pointSize}set pointSize(e){this._pointSize=e,this.materialLoader.assignPointSize(e)}get postProcessingManager(){return this._postProcessingManager}get renderer(){return this._renderer}get renderingManager(){return this._renderingManager}get scene(){return this._sceneTreeManager.scene}get sceneTracingManager(){return this._sceneTracingManager}get sceneTreeManager(){return this._sceneTreeManager}get sessionSettingsId(){return this._sessionSettingsId}set sessionSettingsId(e){this._sessionSettingsId=e}get sessionSettingsMode(){return this._sessionSettingsMode}set sessionSettingsMode(e){this._sessionSettingsMode=e}get settingsEngine(){return this._settingsEngine}set settingsEngine(e){this._settingsEngine=e}get shadows(){return this._shadows}set shadows(e){this._shadows=e}get show(){return this._show}set show(e){this._show=e}get showStatistics(){return this._showStatistics}set showStatistics(e){this._showStatistics=e}get softShadows(){return this._softShadows}set softShadows(e){this._softShadows=e}get spinnerDivElement(){return this._spinnerDivElement}get stateEngine(){return this._stateEngine}get textureEncoding(){switch(this.materialLoader.textureEncoding){case f.SRGBColorSpace:return k.TEXTURE_ENCODING.SRGB;case f.LinearSRGBColorSpace:default:return k.TEXTURE_ENCODING.LINEAR}}set textureEncoding(e){switch(e){case k.TEXTURE_ENCODING.SRGB:this.environmentMapLoader.textureEncoding=f.SRGBColorSpace,this.materialLoader.textureEncoding=f.SRGBColorSpace;break;case k.TEXTURE_ENCODING.LINEAR:default:this.environmentMapLoader.textureEncoding=f.LinearSRGBColorSpace,this.materialLoader.textureEncoding=f.LinearSRGBColorSpace}}get toneMapping(){switch(this._renderer.toneMapping){case f.LinearToneMapping:return k.TONE_MAPPING.LINEAR;case f.ReinhardToneMapping:return k.TONE_MAPPING.REINHARD;case f.CineonToneMapping:return k.TONE_MAPPING.CINEON;case f.ACESFilmicToneMapping:return k.TONE_MAPPING.ACES_FILMIC;case f.NoToneMapping:default:return k.TONE_MAPPING.NONE}}set toneMapping(e){switch(e){case k.TONE_MAPPING.LINEAR:this._renderer.toneMapping=f.LinearToneMapping;break;case k.TONE_MAPPING.REINHARD:this._renderer.toneMapping=f.ReinhardToneMapping;break;case k.TONE_MAPPING.CINEON:this._renderer.toneMapping=f.CineonToneMapping;break;case k.TONE_MAPPING.ACES_FILMIC:this._renderer.toneMapping=f.ACESFilmicToneMapping;break;case k.TONE_MAPPING.NONE:default:this._renderer.toneMapping=f.NoToneMapping}this.materialLoader.updateMaterials()}get toneMappingExposure(){return this._renderer.toneMappingExposure}set toneMappingExposure(e){this._renderer.toneMappingExposure=e}get type(){return this._type}set type(e){this._type=e,this.update("RenderingEngine.type")}get usingSwiftShader(){return this.renderingManager.usingSwiftShader}get visibility(){return this._visibility}get visualizeAttributes(){return this._visualizeAttributes}set visualizeAttributes(e){this._visualizeAttributes=e}addFlag(e){const t=this._uuidGenerator.create();return e===k.FLAG_TYPE.BUSY_MODE?this.stateEngine.renderingEngines[this.id].busy.push(t):d(this,o,"f")[e].push(t),this.evaluateFlagState(),t}applySettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0},t,i=!0){return h(this,void 0,void 0,(function*(){(t=t||this._settingsEngine)&&(e.environment?yield new Promise(((n,r)=>{this._stateEngine.renderingEngines[this.id].environmentMapLoaded.then((()=>{try{if(!t)return;this.environmentMapAsBackground=t.environment.mapAsBackground,this.clearAlpha=t.environment.clearAlpha,this.clearColor=this._converter.toHexColor(t.environment.clearColor),this.environmentMapRotation=[t.environment.rotation.x,t.environment.rotation.y,t.environment.rotation.z,t.environment.rotation.w],this.environmentMapBlurriness=t.environment.blurriness,this.environmentMapIntensity=t.environment.intensity,this.applySyncSettings(e,t,i),this._eventEngine.emitEvent(I.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id}),n()}catch(e){r(e)}})).catch((e=>r(e))),this.environmentMap=t.environment.map})):(this.applySyncSettings(e,t,i),this._eventEngine.emitEvent(I.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id})))}))}close(){var e,t,i;return h(this,void 0,void 0,(function*(){this._closed=!0,this._lightEngine.close(),this._renderer.clear(!0,!0,!0),this._renderer.dispose(),this._domEventEngine.removeAllDomEventListener(),this._domEventEngine.dispose(),null===(e=this._canvas.canvasElement.parentElement)||void 0===e||e.removeChild(this._logoDivElement),null===(t=this._canvas.canvasElement.parentElement)||void 0===t||t.removeChild(this._spinnerDivElement),null===(i=this._canvas.canvasElement.parentNode)||void 0===i||i.removeChild(this._htmlElementAnchorLoader.parentDiv),this._canvas.reset()}))}continueRendering(){this._pause=!1}convert3Dto2D(e){return this.sceneTracingManager.convert3Dto2D(e)}createSDTFOverview(e){const t=new N.SDTFOverviewData({});for(let i=0,n=e.data.length;i<n;i++)e.data[i]instanceof N.SDTFOverviewData&&t.merge(e.data[i]);for(let i=0,n=e.children.length;i<n;i++)t.merge(new N.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return t.overview}createThreeJsColor(e){const t=new D.SDColor(this._converter.toThreeJsColorInput(e),e);return t.colorCorrection(this.automaticColorAdjustment),this._colorCache.push(t),t}displayErrorMessage(e){for(let e=0;e<this.logoDivElement.children.length;e++)this.logoDivElement.children[e].style.visibility="hidden";const t=document.createElement("div");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translateX(-50%) translateY(-50%)",t.style.textAlign="center",this.logoDivElement.appendChild(t);const i=document.createElement("p");i.textContent=e,i.style.fontFamily='"CircularXXWeb-Book",sans-serif',i.style.fontSize="x-large",i.style.color=this.logoDivElement.style.backgroundColor,i.style.filter="invert(100%)",t.appendChild(i)}evaluateFlagState(){{const e=this.busy;this.stateEngine.renderingEngines[this.id]&&this.stateEngine.renderingEngines[this.id].busy.length>0?e||(this.busy=!0,this._renderingManager.render(),this._eventEngine.emitEvent(I.EVENTTYPE.VIEWPORT.BUSY_MODE_ON,{viewportId:this.id})):e&&(this.busy=!1,this._renderingManager.render(),this._eventEngine.emitEvent(I.EVENTTYPE.VIEWPORT.BUSY_MODE_OFF,{viewportId:this.id}))}d(this,o,"f")[k.FLAG_TYPE.CAMERA_FREEZE].length>0?this.cameraEngine.deactivateCameraEvents():this.cameraEngine.activateCameraEvents();{const e=this.continuousRendering;d(this,o,"f")[k.FLAG_TYPE.CONTINUOUS_RENDERING].length>0?e||(this.continuousRendering=!0,this._renderingManager.render()):e&&(this.continuousRendering=!1)}{const e=this.continuousShadowMapUpdate;d(this,o,"f")[k.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE].length>0?e||(this.continuousShadowMapUpdate=!0,this._renderingManager.render()):e&&(this.continuousShadowMapUpdate=!1)}}getEnvironmentMapImageUrl(){return this._environmentMapLoader.getEnvironmentMapImageUrl(this.environmentMap)}getScreenshot(e,t){return this._renderingManager.getScreenshot(e,t)}isMobileDeviceWithoutBrowserARSupport(){return(!1!==this._systemInfo.isIOS||!1!==this._systemInfo.isAndroid)&&(!0===this._systemInfo.isAndroid&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isInstagram)}mouseEventToRay(e){return this._sceneTracingManager.mouseEventToRay(e)}pauseRendering(){this._pause=!0}raytraceScene(e,t,i){return this._intersectionManager.intersect({origin:e,direction:t},void 0,void 0,i).map((e=>({distance:e.distance,node:e.node,data:e.geometryData})))}removeFlag(e){let t=!1;const i=Object.values(k.FLAG_TYPE);for(const n of i)if(n===k.FLAG_TYPE.BUSY_MODE){if(this.stateEngine.renderingEngines[this.id].busy.includes(e)){this.stateEngine.renderingEngines[this.id].busy.splice(this.stateEngine.renderingEngines[this.id].busy.indexOf(e),1),t=!0;break}}else if(d(this,o,"f")[n].includes(e)){d(this,o,"f")[n].splice(d(this,o,"f")[n].indexOf(e),1),t=!0;break}return this.evaluateFlagState(),t}reset(){this._stateEngine.renderingEngines[this.id].settingsAssigned.reset(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.reset(),this._stateEngine.renderingEngines[this.id].environmentMapLoaded.reset(),this._stateEngine.renderingEngines[this.id].boundingBoxCreated.then((()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)}))}resize(e,t){this._renderingManager.resize(e,t),this._renderingManager.render()}saveSettings(e){(e=e||this._settingsEngine)&&(this.lightEngine.saveSettings(e),this.cameraEngine.saveSettings(e),this.postProcessingManager.saveSettings(e),e.ar.enable=this.enableAR,e.environment.mapResolution=this.environmentMapResolution,e.environment.map=Array.isArray(this.environmentMap)?JSON.stringify(this.environmentMap):this.environmentMap,e.environment.mapAsBackground=this.environmentMapAsBackground,e.environment.clearAlpha=this.clearAlpha,e.environment.clearColor=this._converter.toHexColor(this.clearColor),e.environment.rotation={x:this.environmentMapRotation[0],y:this.environmentMapRotation[1],z:this.environmentMapRotation[2],w:this.environmentMapRotation[3]},e.environment.blurriness=this.environmentMapBlurriness,e.environment.intensity=this.environmentMapIntensity,e.environmentGeometry.gridVisibility=this.gridVisibility,e.environmentGeometry.groundPlaneVisibility=this.groundPlaneVisibility,e.environmentGeometry.groundPlaneShadowVisibility=this.groundPlaneShadowVisibility,e.environmentGeometry.gridColor=this._converter.toHexColor(this.gridColor),e.environmentGeometry.groundPlaneColor=this._converter.toHexColor(this.groundPlaneColor),e.environmentGeometry.groundPlaneShadowColor=this._converter.toHexColor(this.groundPlaneShadowColor),e.general.pointSize=this.pointSize,e.general.transformation.rotation={x:this.arRotation[0],y:this.arRotation[1],z:this.arRotation[2]},e.general.transformation.translation={x:this.arTranslation[0],y:this.arTranslation[1],z:this.arTranslation[2]},e.general.transformation.scale={x:this.arScale[0],y:this.arScale[1],z:this.arScale[2]},e.general.defaultMaterialColor=this._converter.toHexColor(this.defaultMaterialColor),e.rendering.automaticColorAdjustment=this.automaticColorAdjustment,e.rendering.lights=this.lights,e.rendering.outputEncoding=this.outputEncoding,e.rendering.physicallyCorrectLights=this.physicallyCorrectLights,e.rendering.textureEncoding=this.textureEncoding,e.rendering.toneMapping=this.toneMapping,e.rendering.toneMappingExposure=this.toneMappingExposure,e.rendering.beautyRenderBlendingDuration=this.beautyRenderBlendingDuration,e.rendering.beautyRenderDelay=this.beautyRenderDelay,e.rendering.shadows=this.shadows,e.rendering.softShadows=this.softShadows)}touchEventToRay(e){return this._sceneTracingManager.touchEventToRay(e)}touchToRay(e){return this._sceneTracingManager.touchToRay(e)}update(e){this.closed||(this._sceneTreeManager.updateSceneTree(this._tree.root),this._renderingManager.updateShadowMap(),this._animationEngine.updateAnimationData(),this._renderingManager.render(),this._eventEngine.emitEvent(I.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this.id}))}updateEnvironmentGeometry(){this._environmentGeometryManager.updateEnvironmentGeometryPosition()}viewInAR(e,t={arScale:"auto",arPlacement:"floor",xrEnvironment:!1}){return h(this,void 0,void 0,(function*(){const i=this._uuidGenerator.create(),n={type:N.TASK_TYPE.AR_LOADING,id:i,progress:0,status:"Loading AR scene"};if(this._eventEngine.emitEvent(I.EVENTTYPE.TASK.TASK_START,n),!1===this.viewableInAR()){const e={type:N.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Stopped AR loading due to an error"};throw this._eventEngine.emitEvent(I.EVENTTYPE.TASK.TASK_CANCEL,e),new I.ShapeDiverViewerArError('Api.viewInAR: The device or browser is not supported for this functionality, please call "viewableInAR" for more information.')}const a="auto"!==t.arScale?"fixed":"auto";if(this._systemInfo.isIOS){const t=document.createElement("a");t.href=e+("fixed"===a?".usdz_allowsContentScaling=0":".usdz"),t.rel="ar";const i=document.createElement("img");i.src=d(this,r,"f"),t.appendChild(i),t.click()}else{const t=document.createElement("a");t.href=`intent://arvr.google.com/scene-viewer/1.0?resizable=${"fixed"===a?"false":"true"}&file=${e}&mode=ar_only#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;end;`,t.click()}const s={type:N.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Done loading AR scene, launching AR"};this._eventEngine.emitEvent(I.EVENTTYPE.TASK.TASK_END,s)}))}viewableInAR(){return!(!1===this._systemInfo.isIOS&&!1===this._systemInfo.isAndroid||!0===this._systemInfo.isAndroid&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isFirefox||!0===this._systemInfo.isIOS&&!0===this._systemInfo.isInstagram)}applySyncSettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0},t,i=!0){(t=t||this._settingsEngine)&&(e.ar&&(this.enableAR=t.ar.enable,this.arScale=[t.general.transformation.scale.x,t.general.transformation.scale.y,t.general.transformation.scale.z],this.arTranslation=[t.general.transformation.translation.x,t.general.transformation.translation.y,t.general.transformation.translation.z],this.arRotation=[t.general.transformation.rotation.x,t.general.transformation.rotation.y,t.general.transformation.rotation.z]),e.scene&&(this.gridColor=t.environmentGeometry.gridColor,this.gridVisibility=t.environmentGeometry.gridVisibility,this.groundPlaneColor=t.environmentGeometry.groundPlaneColor,this.groundPlaneVisibility=t.environmentGeometry.groundPlaneVisibility,this.groundPlaneShadowColor=t.environmentGeometry.groundPlaneShadowColor,this.groundPlaneShadowVisibility=t.environmentGeometry.groundPlaneShadowVisibility,this.shadows=t.rendering.shadows,this.softShadows=t.rendering.softShadows,this.lights=t.rendering.lights,this.automaticColorAdjustment=t.rendering.automaticColorAdjustment,this.textureEncoding=t.rendering.textureEncoding,this.outputEncoding=t.rendering.outputEncoding,this.physicallyCorrectLights=t.rendering.physicallyCorrectLights,this.toneMapping=t.rendering.toneMapping,this.toneMappingExposure=t.rendering.toneMappingExposure),e.general&&(this.defaultMaterialColor=t.general.defaultMaterialColor,this.pointSize=t.general.pointSize),e.light&&this.lightEngine.applySettings(t),e.camera&&this.cameraEngine.applySettings(t),e.postprocessing&&this.postProcessingManager.applySettings(t),this.cameraManager.adjustCamera(1),this._stateEngine.renderingEngines[this.id].settingsAssigned.resolve(!0),i&&this.update("RenderingEngine.applySyncSettings"))}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},6041:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Resolution=t.PredicationMode=t.EdgeDetectionMode=t.SMAAPreset=t.KernelSize=t.VignetteTechnique=t.BlendFunction=t.VignetteEffect=t.TiltShiftEffect=t.SepiaEffect=t.SelectiveBloomEffect=t.ScanlineEffect=t.SSAOEffect=t.SMAAEffect=t.PixelationEffect=t.OutlineEffect=t.NoiseEffect=t.HueSaturationEffect=t.GridEffect=t.GodRaysEffect=t.FXAAEffect=t.DotScreenEffect=t.DepthOfFieldEffect=t.ChromaticAberrationEffect=t.BloomEffect=t.EffectComposer=t.Effect=t.POST_PROCESSING_EFFECT_TYPE=t.ANTI_ALIASING_TECHNIQUE=t.PostProcessingManager=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.ThreejsData=t.RenderingEngine=void 0;const n=i(3979);Object.defineProperty(t,"RenderingEngine",{enumerable:!0,get:function(){return n.RenderingEngine}});const r=i(3757);Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return r.ThreejsData}});const a=i(6152);Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return a.ENVIRONMENT_MAP_EMPTY}});const s=i(5851);Object.defineProperty(t,"POST_PROCESSING_EFFECT_TYPE",{enumerable:!0,get:function(){return s.POST_PROCESSING_EFFECT_TYPE}}),Object.defineProperty(t,"ANTI_ALIASING_TECHNIQUE",{enumerable:!0,get:function(){return s.ANTI_ALIASING_TECHNIQUE}});const o=i(8973);Object.defineProperty(t,"PostProcessingManager",{enumerable:!0,get:function(){return o.PostProcessingManager}});const l=i(1704);Object.defineProperty(t,"BlendFunction",{enumerable:!0,get:function(){return l.BlendFunction}}),Object.defineProperty(t,"BloomEffect",{enumerable:!0,get:function(){return l.BloomEffect}}),Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:!0,get:function(){return l.ChromaticAberrationEffect}}),Object.defineProperty(t,"DepthOfFieldEffect",{enumerable:!0,get:function(){return l.DepthOfFieldEffect}}),Object.defineProperty(t,"DotScreenEffect",{enumerable:!0,get:function(){return l.DotScreenEffect}}),Object.defineProperty(t,"EdgeDetectionMode",{enumerable:!0,get:function(){return l.EdgeDetectionMode}}),Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return l.Effect}}),Object.defineProperty(t,"EffectComposer",{enumerable:!0,get:function(){return l.EffectComposer}}),Object.defineProperty(t,"FXAAEffect",{enumerable:!0,get:function(){return l.FXAAEffect}}),Object.defineProperty(t,"GodRaysEffect",{enumerable:!0,get:function(){return l.GodRaysEffect}}),Object.defineProperty(t,"GridEffect",{enumerable:!0,get:function(){return l.GridEffect}}),Object.defineProperty(t,"HueSaturationEffect",{enumerable:!0,get:function(){return l.HueSaturationEffect}}),Object.defineProperty(t,"KernelSize",{enumerable:!0,get:function(){return l.KernelSize}}),Object.defineProperty(t,"NoiseEffect",{enumerable:!0,get:function(){return l.NoiseEffect}}),Object.defineProperty(t,"OutlineEffect",{enumerable:!0,get:function(){return l.OutlineEffect}}),Object.defineProperty(t,"PixelationEffect",{enumerable:!0,get:function(){return l.PixelationEffect}}),Object.defineProperty(t,"PredicationMode",{enumerable:!0,get:function(){return l.PredicationMode}}),Object.defineProperty(t,"Resolution",{enumerable:!0,get:function(){return l.Resolution}}),Object.defineProperty(t,"ScanlineEffect",{enumerable:!0,get:function(){return l.ScanlineEffect}}),Object.defineProperty(t,"SelectiveBloomEffect",{enumerable:!0,get:function(){return l.SelectiveBloomEffect}}),Object.defineProperty(t,"SepiaEffect",{enumerable:!0,get:function(){return l.SepiaEffect}}),Object.defineProperty(t,"SMAAEffect",{enumerable:!0,get:function(){return l.SMAAEffect}}),Object.defineProperty(t,"SMAAPreset",{enumerable:!0,get:function(){return l.SMAAPreset}}),Object.defineProperty(t,"SSAOEffect",{enumerable:!0,get:function(){return l.SSAOEffect}}),Object.defineProperty(t,"TiltShiftEffect",{enumerable:!0,get:function(){return l.TiltShiftEffect}}),Object.defineProperty(t,"VignetteEffect",{enumerable:!0,get:function(){return l.VignetteEffect}}),Object.defineProperty(t,"VignetteTechnique",{enumerable:!0,get:function(){return l.VignetteTechnique}})},5851:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ANTI_ALIASING_TECHNIQUE=t.POST_PROCESSING_EFFECT_TYPE=void 0,(n=t.POST_PROCESSING_EFFECT_TYPE||(t.POST_PROCESSING_EFFECT_TYPE={})).BLOOM="bloom",n.CHROMATIC_ABERRATION="chromatic_aberration",n.DEPTH_OF_FIELD="depth_of_field",n.DOT_SCREEN="dot_screen",n.GOD_RAYS="god_rays",n.GRID="grid",n.HBAO="hbao",n.HUE_SATURATION="hue_saturation",n.NOISE="noise",n.OUTLINE="outline",n.PIXELATION="pixelation",n.SSAO="ssao",n.SCANLINE="scanline",n.SELECTIVE_BLOOM="selective_bloom",n.SEPIA="sepia",n.TILT_SHIFT="tilt_shift",n.VIGNETTE="vignette",(i=t.ANTI_ALIASING_TECHNIQUE||(t.ANTI_ALIASING_TECHNIQUE={})).FXAA="fxaa",i.NONE="none",i.SMAA="smaa",i.SSAA="ssaa"},6152:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMapLoader=t.ENVIRONMENT_MAP_TYPE=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP=t.ENVIRONMENT_MAP_CUBE=void 0;const o=a(i(5232)),l=i(8877),c=i(4645),u=i(7038);var h,d,f,p;(p=t.ENVIRONMENT_MAP_CUBE||(t.ENVIRONMENT_MAP_CUBE={})).DEFAULT="default",p.DEFAULT_BW="default_bw",p.BLURRED_LIGHTS="blurred_lights",p.GEORGENTOR="georgentor",p.GEORGENTOR_BLUR="georgentor_blur",p.GEORGENTOR_BLUE_BLUR="georgentor_blue_blur",p.GEORGENTOR_BW_BLUR="georgentor_bw_blur",p.LEVELSETS="levelsets",p.LYTHWOOD_FIELD="lythwood_field",p.MOUNTAINS="mountains",p.OCEAN="ocean",p.PIAZZA_SAN_MARCO="piazza_san_marco",p.RESIDENTIAL_GARDEN="residential_garden",p.ROOM_ABSTRACT_1="room_abstract_1",p.SKY="sky",p.STORAGE_ROOM="storage_room",p.STORM="storm",p.SUBWAY_ENTRANCE="subway_entrance",p.SUBWAY_ENTRANCE_BW_BLUR="subway_entrance_bw_blur",p.WHITE="white",p.YOKOHAMA="yokohama",function(e){e.ANNIVERSARY_LOUNGE="anniversary_lounge",e.BALLROOM="ballroom",e.CANNON_EXTERIOR="cannon_exterior",e.CAPE_HILL="cape_hill",e.CHRISTMAS_PHOTO_STUDIO="christmas_photo_studio",e.CIRCUS_MAXIMUS="circus_maximus",e.COLORFUL_STUDIO="colorful_studio",e.COMBINATION_ROOM="combination_room",e.GREEN_POINT_PARK="green_point_park",e.HILLTOP_CONSTRUCTION="hilltop_construction",e.LARGE_CORRIDOR="large_corridor",e.LYTHWOOD_LOUNGE="lythwood_lounge",e.NEUTRAL="neutral",e.OBERER_KUHBERG="oberer_kuhberg",e.OLD_HALL="old_hall",e.PAUL_LOBE_HAUS="paul_lobe_haus",e.PHOTO_STUDIO="photo_studio",e.PHOTO_STUDIO_BROADWAY_HALL="photo_studio_broadway_hall",e.SNOWY_FIELD="snowy_field",e.STUDIO_SMALL="studio_small",e.SUNFLOWERS="sunflowers",e.TABLE_MOUNTAIN="table_mountain",e.VENICE_SUNSET="venice_sunset",e.WIDE_STREET="wide_street"}(h=t.ENVIRONMENT_MAP||(t.ENVIRONMENT_MAP={})),(f=t.ENVIRONMENT_MAP_EMPTY||(t.ENVIRONMENT_MAP_EMPTY={})).NONE="none",f.NULL="null",function(e){e.LDR="ldr",e.HDR="hdr",e.NONE="none",e.NULL="null"}(d=t.ENVIRONMENT_MAP_TYPE||(t.ENVIRONMENT_MAP_TYPE={})),t.EnvironmentMapLoader=class{constructor(e){this._renderingEngine=e,this._environmentMapFilenames=["px","nx","pz","nz","py","ny"],this._environmentMapHDR=[],this._environmentMapNamesHDR=Object.values(h).filter((e=>"string"==typeof e)),this._environmentMapNamesHDRKhronos=["cannon_exterior","colorful_studio","neutral","wide_street"],this._environmentMapNamesJPG=["default","default_bw","blurred_lights","georgentor","georgentor_blur","georgentor_blue_blur","georgentor_bw_blur","levelsets","lythwood_field","mountains","ocean","piazza_san_marco","residential_garden","room_abstract_1","sky","storage_room","storm","subway_entrance","subway_entrance_bw_blur","white","yokohama"],this._environmentMaps={},this._eventEngine=l.EventEngine.instance,this._httpClient=l.HttpClient.instance,this._stateEngine=l.StateEngine.instance,this._uuidGenerator=l.UuidGenerator.instance,this._envMap=null,this._isHDRMap=!1,this._textureEncoding=o.SRGBColorSpace,this._type=d.NULL}get environmentMap(){return this._envMap}get isHDRMap(){return this._isHDRMap}get textureEncoding(){return this._textureEncoding}set textureEncoding(e){this._textureEncoding=e,this.assignTextureEncoding()}getEnvironmentMapImageUrl(e){if(Array.isArray(e))return"";if(this._environmentMapNamesHDR.indexOf(e)>=0){let t="https://viewer.shapediver.com/v3/envmaps/1k/"+e+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(e)>=0&&(t="https://viewer.shapediver.com/v3/envmaps/khronos/"+e+".hdr"),t}return(e.startsWith("https://")||e.startsWith("http://"))&&(e.endsWith(".hdr")||e.endsWith(".jpg")||e.endsWith(".png"))?e:""}init(){this._environmentMaps.null={name:"null",map:Promise.resolve(null),type:d.NULL},this._environmentMaps.none={name:"none",map:Promise.resolve(null),type:d.NONE},this._pmremGenerator=new o.PMREMGenerator(this._renderingEngine.renderer),this._pmremGenerator.compileEquirectangularShader()}load(e){return s(this,void 0,void 0,(function*(){const t=this._uuidGenerator.create(),i=this.loadEnvMap(e,t);return yield this.assignEnvironmentMap(i.name,i.type,t),Promise.resolve(!0)}))}loadEnvMap(e,t){const i=t||this._uuidGenerator.create(),n={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:i,data:{input:e},progress:0,status:"Loading EnvironmentMap"};if(this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_START,n),"none"===e||"null"===e)return this._environmentMaps[e];let r,a,s;if(!Array.isArray(e)&&e.startsWith('["https')&&e.endsWith('"]'))try{e=JSON.parse(e)}catch(t){throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map.",e)}if(Array.isArray(e)){if(6!==e.length)throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, exactly 6 files are needed in the array.",e);r=JSON.stringify(e,null,0),a=r}else r=e.toLowerCase().replace(/ /g,"_"),a=r+this._renderingEngine.environmentMapResolution;for(const e in this._environmentMaps)if(e===a)return this._environmentMaps[e];try{if(Array.isArray(e))s=e;else{let t;if(s=[],this._environmentMapNamesHDR.indexOf(r)>=0){let e="https://viewer.shapediver.com/v3/envmaps/1k/"+r+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(r)>=0&&(e="https://viewer.shapediver.com/v3/envmaps/khronos/"+r+".hdr"),this._environmentMapHDR.push(e),this.loadEnvironmentMap(a,e,i)}if(this._environmentMapNamesJPG.indexOf(r)>=0)for(t=0;t<this._environmentMapFilenames.length;t++)s.push("https://viewer.shapediver.com/v2/envmaps/"+this._renderingEngine.environmentMapResolution+"/"+r+"/"+this._environmentMapFilenames[t]+".jpg");else{if(!e.startsWith("https://")&&!e.startsWith("http://"))throw this.notify(i,!0),new l.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, format not supported.",e);if(e.endsWith(".hdr"))return this._environmentMapHDR.push(e),this.loadEnvironmentMap(a,e,i);for(e.endsWith("/")||(e+="/"),t=0;t<this._environmentMapFilenames.length;t++)s.push(e+this._environmentMapFilenames[t]+".jpg")}}return this.loadEnvironmentMap(a,s,i)}catch(e){throw this.notify(i,!0),e}}assignEnvironmentMap(e,t,i){return s(this,void 0,void 0,(function*(){if(e in this._environmentMaps==0)return;this._type=t;const n=yield this._environmentMaps[e].map;this._renderingEngine.materialLoader.assignEnvironmentMap(n,t),this._envMap=n,this.notify(i)}))}assignTextureEncoding(){for(const e in this._environmentMaps)this._environmentMaps[e]&&!0===this._environmentMaps[e].resolved&&this._environmentMaps[e].map.then((e=>{e instanceof o.Texture&&(e.dispose(),e.colorSpace=this._textureEncoding,e.needsUpdate=!0)}))}loadEnvironmentMap(e,t,i){return this._environmentMaps[e]={name:e,type:Array.isArray(t)?d.LDR:d.HDR,map:new Promise(((n,r)=>s(this,void 0,void 0,(function*(){try{if(Array.isArray(t)){const i=[];t.forEach((e=>i.push(this._httpClient.get(e,void 0,!0))));const a=(yield Promise.all(i)).map((e=>{const t=new Uint8Array(e.data),i=new Blob([t],{type:e.headers["content-type"]});return URL.createObjectURL(i)}));(new o.CubeTextureLoader).load(a,(t=>{t.colorSpace=o.SRGBColorSpace,t.format=o.RGBAFormat,t.mapping=o.CubeReflectionMapping,a.forEach((e=>URL.revokeObjectURL(e))),this._environmentMaps[e].resolved=!0,n(t)}),(()=>{}),(e=>r(e)))}else{const i=yield this._httpClient.get(t,void 0,!0),a=new Uint8Array(i.data),s=new Blob([a],{type:i.headers["content-type"]}),o=URL.createObjectURL(s);(new c.RGBELoader).load(o,(t=>{const i=this._pmremGenerator.fromEquirectangular(t).texture;this._pmremGenerator.dispose(),URL.revokeObjectURL(o),this._environmentMaps[e].resolved=!0,n(i)}),(()=>{}),(e=>r(e)))}}catch(e){throw this.notify(i,!0),e}}))))},this._environmentMaps[e]}notify(e,t=!1){let i;t?(i={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:e,progress:1,status:"Loading of EnvironmentMap failed"},this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_CANCEL,i)):(i={type:u.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:e,progress:1,status:"Loaded EnvironmentMap"},this._stateEngine.renderingEngines[this._renderingEngine.id].environmentMapLoaded.resolve(!0),this._stateEngine.renderingEngines[this._renderingEngine.id].environmentMapLoaded=new l.StatePromise,this._eventEngine.emitEvent(l.EVENTTYPE.TASK.TASK_END,i))}}},5158:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryLoader=void 0;const s=a(i(5232)),o=i(7038),l=i(8877),c=i(2248),u=i(6012),h=i(887),d=i(1786);t.GeometryLoader=class{constructor(e){this._renderingEngine=e,this._primitiveCache={},this._geometryCache={},this._logger=l.Logger.instance,this._gemSphericalMapsCache={}}emptyGeometryCache(){this._geometryCache={},this._primitiveCache={}}init(){}load(e,t,i,n){const r=(()=>{if(this._primitiveCache[e.primitive.id+"_"+e.primitive.version]){this._primitiveCache[e.primitive.id+"_"+e.primitive.version].counter++;const t=this._primitiveCache[e.primitive.id+"_"+e.primitive.version].threeGeometry.clone();return this._primitiveCache[e.primitive.id+"_"+e.primitive.version].clones.push(t),t}return this.loadPrimitive(e.primitive)})();let a;a=e.effectMaterials.length>0?e.effectMaterials[e.effectMaterials.length-1].material:this._renderingEngine.type===c.RENDERER_TYPE.ATTRIBUTES?e.attributeMaterial:e.material;const l={mode:e.mode,useVertexTangents:void 0!==r.attributes.tangent,useVertexColors:void 0!==r.attributes.color&&this._renderingEngine.type!==c.RENDERER_TYPE.ATTRIBUTES,useFlatShading:void 0===r.attributes.normal,useMorphTargets:Object.keys(r.morphAttributes).length>0,useMorphNormals:Object.keys(r.morphAttributes).length>0&&void 0!==r.morphAttributes.normal};if(a instanceof o.MaterialGemData){const t=a;r.computeBoundingSphere();const i=this.createCubeNormalMap(e,r),n=r.boundingSphere.center,s=r.boundingSphere.radius;t.side=o.MATERIAL_SIDE.FRONT,t.center=h.vec3.fromValues(n.x,n.y,n.z),t.radius=s,t.sphericalNormalMap=i}for(;0!==t.children.length;)t.remove(t.children[0]);const f=this._renderingEngine.materialLoader.load(a||e,l);let p;return this._geometryCache[e.id+"_"+e.version]&&!n?(p=this._geometryCache[e.id+"_"+e.version].obj,(!1===i&&p.parent!==t||!0===i)&&(p=p.cloneObject(),t.add(p)),p.traverse((e=>{(e instanceof s.Points||e instanceof s.LineSegments||e instanceof s.LineLoop||e instanceof s.Line||e instanceof s.Mesh)&&(e.material=f)}))):(p=new d.SDData(e.id,e.version),this.createMesh(p,e,r,f,n),this._geometryCache[e.id+"_"+e.version]={obj:p},t.add(p)),p.children.forEach((e=>e.castShadow=!0)),f instanceof u.GemMaterial?p.children.forEach((e=>e.receiveShadow=!1)):p.children.forEach((e=>e.receiveShadow=!0)),e.boundingBox.clone()}loadPrimitive(e){const t=new s.BufferGeometry;e.indices&&t.setIndex(new s.BufferAttribute(e.indices.array,e.indices.itemSize));for(const i in e.attributes){const n=this.loadAttribute(e.attributes[i],i),r=this.getAttributeName(i);if("NORMAL"===i&&this.checkNormals(e,i,n,t))continue;t.setAttribute(r,n);const a=e.attributes[i].morphAttributeData;if(a.length>0){t.morphTargetsRelative=!0;const e=[];for(let t=0;t<a.length;t++)e.push(this.loadAttribute(a[t],i));t.morphAttributes[r]=e}const s="TEXCOORD_1",o="uv1";if("uv"===r&&!e.attributes[s]){t.setAttribute(o,n);const r=e.attributes[i].morphAttributeData;if(r.length>0){t.morphTargetsRelative=!0;const e=[];for(let t=0;t<r.length;t++)e.push(this.loadAttribute(r[t],i));t.morphAttributes[o]=e}}}return e.threeJsObject[this._renderingEngine.id]=t,this._primitiveCache[e.id+"_"+e.version]={threeGeometry:t,counter:1,clones:[]},t}removeFromGeometryCache(e){this._geometryCache[e]&&delete this._geometryCache[e]}removeFromGemSphericalMapsCache(e){this._gemSphericalMapsCache[e]&&(1===this._gemSphericalMapsCache[e].counter?(this._gemSphericalMapsCache[e].renderTarget.dispose(),this._gemSphericalMapsCache[e].texture.dispose(),delete this._gemSphericalMapsCache[e]):this._gemSphericalMapsCache[e].counter--)}removeFromPrimitiveCache(e){if(this._primitiveCache[e])if(1===this._primitiveCache[e].counter){this._primitiveCache[e].threeGeometry.dispose();for(const t in this._primitiveCache[e].threeGeometry.attributes)this._primitiveCache[e].threeGeometry.deleteAttribute(t);this._primitiveCache[e].threeGeometry.setIndex(null),this._primitiveCache[e].clones.forEach((e=>{e.dispose();for(const t in e.attributes)e.deleteAttribute(t);e.setIndex(null)})),delete this._primitiveCache[e]}else this._primitiveCache[e].counter--}checkNormals(e,t,i,n){let r=!1;for(let e=0;e<10;++e){if(Math.abs(i.array[3*e])>.001){r=!0;break}if(Math.abs(i.array[3*e+1])>.001){r=!0;break}if(Math.abs(i.array[3*e+2])>.001){r=!0;break}}if(!r){n.computeVertexNormals();const i=n.getAttribute("normal");return e.attributes[t]=new o.AttributeData(new Float32Array(i.array),i.itemSize,0,0,3,i.normalized,i.array.length/3),!0}return!1}convertToTriangleMode(e,t){let i=e.getIndex();if(null===i){const t=[],n=e.getAttribute("position");if(void 0===n)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined position attribute. Processing not possible.");for(let e=0;e<n.count;e++)t.push(e);e.setIndex(t),i=e.getIndex()}if(null===i)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined index. Processing not possible.");const n=i.count-2,r=[];if(t===o.PRIMITIVE_MODE.TRIANGLE_FAN)for(let e=1;e<=n;e++)r.push(i.getX(0)),r.push(i.getX(e)),r.push(i.getX(e+1));else for(let e=0;e<n;e++)e%2==0?(r.push(i.getX(e)),r.push(i.getX(e+1)),r.push(i.getX(e+2))):(r.push(i.getX(e+2)),r.push(i.getX(e+1)),r.push(i.getX(e)));if(r.length/3!==n)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Unable to generate correct amount of triangle.");e.setIndex(r)}createCubeNormalMap(e,t,i=1024){if(this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version])return this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].counter++,this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].texture;if(this._gemScene?(this._gemCubeCameraRenderTarget=new s.WebGLCubeRenderTarget(i,{format:s.RGBAFormat,magFilter:s.LinearFilter,minFilter:s.LinearFilter}),this._gemCubeCameraRenderTarget.texture.generateMipmaps=!1,this._gemCubeCameraRenderTarget.texture.minFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.magFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.format=s.RGBAFormat,this._gemCubeCamera.renderTarget=this._gemCubeCameraRenderTarget):(this._gemScene=new s.Scene,this._gemCubeCameraRenderTarget=new s.WebGLCubeRenderTarget(i,{format:s.RGBAFormat,magFilter:s.LinearFilter,minFilter:s.LinearFilter}),this._gemCubeCameraRenderTarget.texture.generateMipmaps=!1,this._gemCubeCameraRenderTarget.texture.minFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.magFilter=s.NearestFilter,this._gemCubeCameraRenderTarget.texture.format=s.RGBAFormat,this._gemCubeCamera=new s.CubeCamera(.001,1e4,this._gemCubeCameraRenderTarget),this._gemScene.add(this._gemCubeCamera)),!this._gemNormalMaterial){const e={defines:{},uniforms:s.UniformsUtils.merge([s.UniformsLib.common]),vertexShader:"\n                varying vec3 vNormal;\n\n                void main() {\n                  vNormal = normal;\n                  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n                }\n                ",fragmentShader:"\n                varying highp vec3 vNormal;\n\n                float decodeFloat(float f) {\n                    float r = mod(f, 1.0/255.0);\n                    return /*r > 0.5/256.0 ? f + (1.0/256.0) - r : */f - r;\n                }\n                \n                vec3 decodeVec3(vec3 v) {\n                    return vec3(decodeFloat(v.x), decodeFloat(v.y), decodeFloat(v.z));\n                }\n                \n                float signEncoding(vec3 v) {\n                    float code = 1.0;\n                     if(v.x < 0.0 && v.y < 0.0 && v.z < 0.0) {\n                        code = 0.0;\n                    } else if (v.x < 0.0 && v.y < 0.0) {\n                        code = 2.0/256.0;\n                    } else if (v.x < 0.0 && v.z < 0.0) {\n                        code = 4.0/256.0;\n                    } else if (v.y < 0.0 && v.z < 0.0) {\n                        code = 6.0/256.0;\n                    } else if (v.x < 0.0) {\n                        code = 8.0/256.0;\n                    } else if (v.y < 0.0) {\n                        code = 10.0/256.0;\n                    } else if (v.z < 0.0) {\n                        code = 12.0/256.0;\n                    }\n                    return code;\n                }\n                \n                void main() {\n                    vec3 n = normalize(vNormal);\n                    gl_FragColor = vec4(decodeVec3(abs(n)), signEncoding(n));\n                }\n                "};this._gemNormalMaterial=new s.ShaderMaterial({uniforms:s.UniformsUtils.clone(e.uniforms),defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this._gemNormalMaterial.blending=s.NoBlending,this._gemNormalMaterial.side=s.DoubleSide,this._gemScene.overrideMaterial=this._gemNormalMaterial}const n=new s.Mesh(t.clone(),this._gemNormalMaterial);return n.geometry.center(),this._gemScene.add(n),this._gemCubeCamera.update(this._renderingEngine.renderer,this._gemScene),this._gemScene.remove(n),n.geometry.dispose(),n.material.dispose(),this._gemCubeCamera.renderTarget.texture.userData={SDid:e.primitive.id,SDversion:e.primitive.version},this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version]={texture:this._gemCubeCameraRenderTarget.texture,renderTarget:this._gemCubeCameraRenderTarget,counter:1},this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].texture}createMesh(e,t,i,n,r){if(t.mode===o.PRIMITIVE_MODE.POINTS){const r=new s.Points(i,n);t.threeJsObject[this._renderingEngine.id]=r,e.add(r)}else if(t.mode===o.PRIMITIVE_MODE.LINES){const r=new s.LineSegments(i,n);t.threeJsObject[this._renderingEngine.id]=r,e.add(r)}else if(t.mode===o.PRIMITIVE_MODE.LINE_LOOP){const r=new s.LineLoop(i,n);t.threeJsObject[this._renderingEngine.id]=r,e.add(r)}else if(t.mode===o.PRIMITIVE_MODE.LINE_STRIP){const r=new s.Line(i,n);t.threeJsObject[this._renderingEngine.id]=r,e.add(r)}else{if(t.mode!==o.PRIMITIVE_MODE.TRIANGLES&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_STRIP&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_FAN)throw new l.ShapeDiverViewerDataProcessingError(`GeometryLoader.load: Unrecognized primitive mode ${t.mode}.`);{const a=i;if(t.mode!==o.PRIMITIVE_MODE.TRIANGLE_STRIP&&t.mode!==o.PRIMITIVE_MODE.TRIANGLE_FAN||this.convertToTriangleMode(a,t.mode),r){const i=new s.SkinnedMesh(a,n);t.threeJsObject[this._renderingEngine.id]=i,i.bind(r,i.matrixWorld),a.attributes.skinWeight.normalized&&i.normalizeSkinWeights(),e.add(i)}else{const i=new s.Mesh(a,n);t.threeJsObject[this._renderingEngine.id]=i,e.add(i)}}}e.traverse((e=>{e instanceof s.Mesh&&!0!==e.userData.transparencyPlaceholder&&(e.geometry.boundingBox=new s.Box3(new s.Vector3(t.boundingBox.min[0],t.boundingBox.min[1],t.boundingBox.min[2]),new s.Vector3(t.boundingBox.max[0],t.boundingBox.max[1],t.boundingBox.max[2])),e.geometry.boundingSphere=new s.Sphere(new s.Vector3(t.boundingBox.boundingSphere.center[0],t.boundingBox.boundingSphere.center[1],t.boundingBox.boundingSphere.center[2]),t.boundingBox.boundingSphere.radius),e.geometry.userData={SDid:t.id,SDversion:t.version,primitiveSDid:t.primitive.id,primitiveSDversion:t.primitive.version},e.renderOrder=t.renderOrder,e.morphTargetInfluences=t.morphWeights)}))}getAttributeName(e){switch(e){case"POSITION":return"position";case"NORMAL":return"normal";case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":case"UV":return"uv";case"TEXCOORD_1":return"uv1";case"TEXCOORD_2":return"uv2";case"TEXCOORD_3":return"uv3";case"COLOR_0":case"COLOR0":case"COLOR":return"color";case"WEIGHT":case"WEIGHTS_0":return"skinWeight";case"JOINT":case"JOINTS_0":return"skinIndex";case"TANGENT":return"tangent";default:this._logger.warn(`GeometryLoader.loadPrimitive: Unrecognized attribute id ${e}.`)}return""}loadAttribute(e,t){let i;if(e.byteStride&&e.byteStride!==e.itemBytes){const t=new s.InterleavedBuffer(e.array,e.byteStride/e.elementBytes);i=new s.InterleavedBufferAttribute(t,e.itemSize,e.byteOffset%e.byteStride/e.elementBytes,e.normalized)}else i=new s.BufferAttribute(e.array,e.itemSize,"COLOR_0"===t||"COLOR0"===t||"COLOR"===t||e.normalized);if(e.sparse){null!==e.array&&(i=new s.BufferAttribute(e.array.slice(),e.itemSize,e.normalized));for(let t=0,n=e.sparseIndices.length;t<n;t++){const n=e.sparseIndices[t];if(i.setX(n,e.sparseValues[t*e.itemSize]),e.itemSize>=2&&i.setY(n,e.sparseValues[t*e.itemSize+1]),e.itemSize>=3&&i.setZ(n,e.sparseValues[t*e.itemSize+2]),e.itemSize>=4&&i.setW(n,e.sparseValues[t*e.itemSize+3]),e.itemSize>=5)throw new l.ShapeDiverViewerDataProcessingError("GeometryLoader.loadPrimitive: Unsupported itemSize in sparse BufferAttribute.")}}return i}}},8030:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorLoader=void 0;const n=i(887),r=i(2248);t.HTMLElementAnchorLoader=class{constructor(e){this._renderingEngine=e,this._htmlElements={},this._parentDiv=document.createElement("div"),this._parentDiv.style.userSelect="none",this._parentDiv.style.cursor="default",this._parentDiv.style.pointerEvents="none",this._parentDiv.style.overflow="hidden",this._parentDiv.style.position="absolute",this._parentDiv.style.width="100%",this._parentDiv.style.height="100%",this._parentDiv.style.left="0%",this._parentDiv.style.top="0%"}get parentDiv(){return this._parentDiv}adjustPositions(e,t){for(let i in this._htmlElements){const r=this._htmlElements[i].anchor,{page:a,container:s,client:o,hidden:l}=this._renderingEngine.sceneTracingManager.convert3Dto2D(n.vec3.clone(r.location)),c=r.createViewerHtmlElement(this._renderingEngine.id);if(!c)continue;let u=this._htmlElements[i].node,h=u.visible;for(;u.parent;)u=u.parent,h=u.visible&&h;!1===this._renderingEngine.show&&(h=!1),r.update({anchor:r,htmlElement:c,page:a,container:s,client:o,scale:n.vec2.fromValues(e,t),hidden:l,visible:h})}}init(){var e;null===(e=this._renderingEngine.canvas.parentNode)||void 0===e||e.appendChild(this._parentDiv)}load(e,t,i){const n=t.createViewerHtmlElement(this._renderingEngine.id);n&&(!1!==this._renderingEngine.show&&!1!==i||(n.style.display="none"),!1!==i&&(this._parentDiv.appendChild(n),this._htmlElements[t.id+"_"+t.version]={node:e,anchor:t}))}removeData(e,t){if(!this._htmlElements[e+"_"+t])return;const i=this._htmlElements[e+"_"+t].anchor;i&&i.getViewerHtmlElement(this._renderingEngine.id)&&(this._parentDiv.removeChild(i.getViewerHtmlElement(this._renderingEngine.id)),delete this._htmlElements[e+"_"+t])}toggleBusyMode(e){if(e&&this._renderingEngine.busyModeDisplay===r.BUSY_MODE_DISPLAY.BLUR){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._parentDiv.style.filter="blur(3px)"}else this._parentDiv.style.filter=""}}},3467:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LightLoader=void 0;const s=a(i(5232)),o=i(3490),l=i(8877);t.LightLoader=class{constructor(e){this._renderingEngine=e,this._converter=l.Converter.instance,this._shadowMapCount=0,this._forceDisabledShadows=!1}init(){}load(e,t){let i=t.children[0]instanceof s.Light?t.children[0]:null;if(e instanceof o.AmbientLight){i||(i=new s.AmbientLight,e.threeJsObject[this._renderingEngine.id]=i,t.add(i));const n=i;n.color=this._renderingEngine.createThreeJsColor(e.color),n.intensity=e.intensity}if(e instanceof o.DirectionalLight){i||(i=new s.DirectionalLight,t.add(i),t.add(i.target),e.threeJsObject[this._renderingEngine.id]=i);const n=i;n.color=this._renderingEngine.createThreeJsColor(e.color),n.intensity=e.intensity,e.useNodeData&&(n.position.set(0,0,0),n.target.position.set(0,0,-1))}if(e instanceof o.HemisphereLight){i||(i=new s.HemisphereLight,t.add(i),e.threeJsObject[this._renderingEngine.id]=i);const n=i;n.color=this._renderingEngine.createThreeJsColor(e.color),n.intensity=e.intensity,n.groundColor=this._renderingEngine.createThreeJsColor(e.groundColor)}if(e instanceof o.PointLight){i||(i=new s.PointLight,t.add(i),e.threeJsObject[this._renderingEngine.id]=i);const n=i;n.color=this._renderingEngine.createThreeJsColor(e.color),n.intensity=e.intensity,n.distance=e.distance,n.decay=e.decay,n.position.set(e.position[0],e.position[1],e.position[2])}if(e instanceof o.SpotLight){i||(i=new s.SpotLight(this._renderingEngine.createThreeJsColor(e.color),e.intensity,e.distance,e.angle,e.penumbra,e.decay),t.add(i),t.add(i.target),e.threeJsObject[this._renderingEngine.id]=i);const n=i;n.color=this._renderingEngine.createThreeJsColor(e.color),n.intensity=e.intensity,n.distance=e.distance,n.angle=e.angle,n.penumbra=e.penumbra,n.decay=e.decay,n.position.set(e.position[0],e.position[1],e.position[2]),n.target.position.set(e.target[0],e.target[1],e.target[2])}}adjustToBoundingBox(e,t,i){let n=t.children[0];if(e instanceof o.DirectionalLight){const t=n,r=i.boundingSphere;t.position.set(r.center[0]+e.direction[0]*r.radius*2.35,r.center[1]+e.direction[1]*r.radius*2.35,r.center[2]+e.direction[2]*r.radius*2.35),t.target.position.set(r.center[0],r.center[1],r.center[2]),!0===e.castShadow&&!1===this.forceDisabledShadows?(t.castShadow=!0,t.shadow.camera.up.set(0,0,1),t.shadow.camera.far=8*r.radius,t.shadow.camera.right=1.5*r.radius,t.shadow.camera.left=-1.5*r.radius,t.shadow.camera.top=1.5*r.radius,t.shadow.camera.bottom=-1.5*r.radius,t.shadow.mapSize.width=e.shadowMapResolution,t.shadow.mapSize.height=e.shadowMapResolution,t.shadow.bias=e.shadowMapBias,t.shadow.camera.updateProjectionMatrix(),this._shadowMapCount++):t.castShadow=!1}}get shadowMapCount(){return this._shadowMapCount}set shadowMapCount(e){this._shadowMapCount=e}get forceDisabledShadows(){return this._forceDisabledShadows}set forceDisabledShadows(e){this._forceDisabledShadows=e}}},5897:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialLoader=t.adaptShaders=t.MATERIAL_TYPE=void 0;const s=a(i(5232)),o=i(8877),l=i(7863),c=i(6152),u=i(6012),h=i(887),d=i(514),f=i(1560),p=i(7038);var m;!function(e){e.POINT="point",e.LINE="line",e.MESH="mesh"}(m=t.MATERIAL_TYPE||(t.MATERIAL_TYPE={})),t.adaptShaders=()=>{let e=s.ShaderChunk.shadowmap_pars_fragment;if(e.includes("PCSS implementation")||(e=e.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP"+l.main),e=e.replace(e.substr(e.indexOf("#if defined( SHADOWMAP_TYPE_PCF )"),e.indexOf("#elif defined( SHADOWMAP_TYPE_PCF_SOFT )")-e.indexOf("#if defined( SHADOWMAP_TYPE_PCF )")),"#if defined( SHADOWMAP_TYPE_PCF )\n"+l.entry)),s.ShaderChunk.shadowmap_pars_fragment=e,s.ShaderLib.backgroundCube.uniforms.envMapRotation={value:new s.Matrix4},s.ShaderChunk.cube_uv_reflection_fragment.includes("uniform mat4 envMapRotation;")||(s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("#ifdef ENVMAP_TYPE_CUBE_UV","uniform mat4 envMapRotation;\n            #ifdef ENVMAP_TYPE_CUBE_UV")),s.ShaderChunk.envmap_fragment=s.ShaderChunk.envmap_fragment.replace("vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );","\n        #ifdef ENVMAP_TYPE_LDR\n            vec4 adjustedEnvReflectVector = vec4( flipEnvMap * reflectVec.x, reflectVec.yz, 1.0 ) * envMapRotation;\n            vec4 envColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n        #else\n            vec4 adjustedEnvReflectVector = vec4( flipEnvMap * reflectVec.x, reflectVec.zy, 1.0 ) * envMapRotation;\n            vec4 envColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n        #endif\n        "),s.ShaderChunk.backgroundCube_frag=s.ShaderChunk.backgroundCube_frag.replace("vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );","\n        vec4 adjustedEnvReflectVector = vec4( flipEnvMap * vWorldDirection.x, vWorldDirection.zy, 1.0 ) * envMapRotation;\n        vec4 texColor = textureCube( envMap, adjustedEnvReflectVector.xyz );\n        "),s.ShaderLib.backgroundCube.fragmentShader=s.ShaderChunk.backgroundCube_frag,s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );","\n        vec4 adjustedEnvReflectVector = vec4(sampleDir.xzy, 1.0) * envMapRotation;\n        vec3 color0 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt );      \n        "),s.ShaderChunk.cube_uv_reflection_fragment=s.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );","\n        vec4 adjustedEnvReflectVector = vec4(sampleDir.xzy, 1.0) * envMapRotation;\n        vec3 color1 = bilinearCubeUV( envMap, adjustedEnvReflectVector.xyz, mipInt + 1.0 );        \n        "),!s.ShaderChunk.lights_fragment_maps.includes("vec3 reflectVec")){const e=s.ShaderChunk.lights_fragment_maps.lastIndexOf("#endif");s.ShaderChunk.lights_fragment_maps=s.ShaderChunk.lights_fragment_maps.substring(0,e)+"#else\n            #ifdef ENVMAP_TYPE_NONE\n                vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n                reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n                vec4 adjustedEnvReflectVector = vec4(reflectVec, 1.0);\n                radiance += (vec3((adjustedEnvReflectVector.z + 1.0) / 2.0) + 0.5) / 1.5;\n            #endif\n        #endif\n        "+s.ShaderChunk.lights_fragment_maps.substring(e+6)}},t.MaterialLoader=class{constructor(e){this._renderingEngine=e,this._converter=o.Converter.instance,this._blending=0,this._envMap=null,this._envMapIntensity=1,this._envMapType=c.ENVIRONMENT_MAP_TYPE.NULL,this._environmentMapRotationMatrix=new s.Matrix4,this._height=1020,this._lightSizeUV=.025,this._materialCache={},this._maxMapCount=0,this._pointSize=1,this._sceneBackgroundNeedsUpdate=!1,this._textureEncoding=s.SRGBColorSpace,this._threeJsTextureCache={},s.ShaderLib.backgroundCube.uniforms.envMapRotation={value:this.transformEnvMapRotationMatrix(!0)}}get maxMapCount(){return this._maxMapCount}set maxMapCount(e){this._maxMapCount=e}get sceneBackgroundNeedsUpdate(){return this._sceneBackgroundNeedsUpdate}set sceneBackgroundNeedsUpdate(e){this._sceneBackgroundNeedsUpdate=e}get textureEncoding(){return this._textureEncoding}set textureEncoding(e){this._textureEncoding=e,this.assignTextureEncoding()}get threeJsTextureCache(){return this._threeJsTextureCache}set threeJsTextureCache(e){this._threeJsTextureCache=e}assignColorCorrection(e){const t=(e,t)=>{if(e){if(e instanceof d.SDColor)return e.colorCorrection(t),e;{const i=this._renderingEngine.colorCache.find((t=>t.equals(e)));if(i)return i.colorCorrection(t),i;{const i=e.clone();!0===t?i.convertSRGBToLinear():i.convertLinearToSRGB();const n=this._renderingEngine.colorCache.find((e=>e.equals(i)));return n?(n.colorCorrection(t),n):e}}}};for(const i in this._materialCache){const n=this._materialCache[i].material;n.color&&(n.color=t(n.color,e)),n.specular&&(n.specular=t(n.specular,e)),n.emissive&&(n.emissive=t(n.emissive,e)),n.colorTransferBegin&&(n.colorTransferBegin=t(n.colorTransferBegin,e)),n.colorTransferEnd&&(n.colorTransferEnd=t(n.colorTransferEnd,e)),n.attenuationColor&&(n.attenuationColor=t(n.attenuationColor,e)),n.sheencolor&&(n.sheencolor=t(n.sheencolor,e)),n.specularColor&&(n.specularColor=t(n.specularColor,e)),n.needsUpdate=!0}}assignDefaultMaterialColor(){for(const e in this._materialCache){const{material:t,materialData:i,materialSettings:n}=this._materialCache[e];i||void 0!==n&&n.useVertexColors||(t.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor))}}assignEnvironmentMap(e,t){this._envMap=e,this._envMapType=t;for(const t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshPhysicalMaterial||this._materialCache[t].material instanceof s.MeshStandardMaterial||this._materialCache[t].material instanceof s.MeshBasicMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&(this._materialCache[t].materialData instanceof p.MaterialStandardData||this._materialCache[t].materialData instanceof p.MaterialGemData||this._materialCache[t].materialData instanceof p.MaterialSpecularGlossinessData||this._materialCache[t].materialData instanceof p.MaterialUnlitData)&&void 0!==this._materialCache[t].materialData.envMap)continue;if(this._materialCache[t].materialData instanceof p.MaterialUnlitData&&!1===this._renderingEngine.environmentMapForUnlitMaterials)return;i.envMap=e,i.needsUpdate=!0;for(const e in i.defines)e.startsWith("ENVMAP_TYPE_")&&delete i.defines[e];i.defines&&(i.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]=""),this.updateEnvironmentMapRotation(this._renderingEngine.environmentMapRotation)}}assignEnvironmentMapForUnlitMaterials(e){for(const t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshBasicMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&this._materialCache[t].materialData instanceof p.MaterialUnlitData&&void 0!==this._materialCache[t].materialData.envMap)continue;if(e){i.envMap=this._envMap,i.needsUpdate=!0;for(const e in i.defines)e.startsWith("ENVMAP_TYPE_")&&delete i.defines[e];i.defines&&(i.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]=""),i.userData.shader.uniforms.envMapRotation.value=this.transformEnvMapRotationMatrix()}else i.envMap=null,i.needsUpdate=!0}}assignEnvironmentMapIntensity(e){this._envMapIntensity=e;for(const t in this._materialCache)if(this._materialCache[t].material instanceof s.MeshPhysicalMaterial||this._materialCache[t].material instanceof s.MeshStandardMaterial){const i=this._materialCache[t].material;if(this._materialCache[t].materialData&&(this._materialCache[t].materialData instanceof p.MaterialStandardData||this._materialCache[t].materialData instanceof p.MaterialGemData||this._materialCache[t].materialData instanceof p.MaterialSpecularGlossinessData||this._materialCache[t].materialData instanceof p.MaterialUnlitData)&&void 0!==this._materialCache[t].materialData.envMap)continue;i.envMapIntensity=e,i.needsUpdate=!0}}assignPointSize(e){const t=this._renderingEngine.renderer?this._renderingEngine.renderer.getSize(new s.Vector2).y:1080;if(t!==this._height||e*(this._height/1080)!==this._pointSize){this._height=t,this._pointSize=e*(this._height/1080);for(const e in this._materialCache)this._materialCache[e].material instanceof s.PointsMaterial&&(this._materialCache[e].material.size=this._pointSize,this._materialCache[e].material.needsUpdate=!0)}}cacheSize(){return Object.entries(this._materialCache).length}createMaterial(e,t,i,n){const{properties:r,mapCount:a}=this.getMaterialProperties(i,e,n);let o;if(this.maxMapCount=Math.max(this.maxMapCount,a),e===m.POINT)o=new s.PointsMaterial(Object.assign(r,{size:this._pointSize}));else if(e===m.LINE)o=new s.LineBasicMaterial(r);else if(i instanceof p.MaterialUnlitData)o=new s.MeshBasicMaterial(r);else{o=i instanceof p.MaterialShadowData?new s.ShadowMaterial({opacity:r.opacity,color:r.color}):i instanceof p.MaterialSpecularGlossinessData?new f.SpecularGlossinessMaterial(r):i instanceof p.MaterialGemData?new u.GemMaterial(r):new s.MeshPhysicalMaterial(r);const e=o.onBeforeCompile;o.onBeforeCompile=(t,i)=>{e(t,i),t.uniforms.lightSizeUV={value:this._lightSizeUV},t.uniforms.blending={value:this._blending};const n=this.transformEnvMapRotationMatrix();t.uniforms.envMapRotation={value:n},o.userData.shader=t},(o instanceof f.SpecularGlossinessMaterial||o instanceof s.MeshPhysicalMaterial)&&(o.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="",n&&n.useVertexTangents&&(o.normalScale.y*=-1),n&&n.useVertexTangents&&o instanceof s.MeshPhysicalMaterial&&(o.clearcoatNormalScale.y*=-1),n&&n.useFlatShading&&(o.flatShading=!0))}if(n&&n.useVertexColors&&(o.vertexColors=!0),(i instanceof p.MaterialStandardData||i instanceof p.MaterialGemData||i instanceof p.MaterialSpecularGlossinessData||i instanceof p.MaterialUnlitData)&&void 0!==i.envMap){const e=i.envMap;void 0!==e&&this._renderingEngine.environmentMapLoader.loadEnvMap(e).map.then((e=>{if(o instanceof s.MeshBasicMaterial&&!1===this._renderingEngine.environmentMapForUnlitMaterials)return;o.envMap=e;const t=o.envMap instanceof s.CubeTexture?c.ENVIRONMENT_MAP_TYPE.LDR:c.ENVIRONMENT_MAP_TYPE.HDR;for(const e in o.defines)e.startsWith("ENVMAP_TYPE_")&&delete o.defines[e];o.defines&&(o.defines["ENVMAP_TYPE_"+t.toUpperCase()]=""),o.needsUpdate=!0}))}return i&&(i.threeJsObject[this._renderingEngine.id]=o),o.needsUpdate=!0,o.userData={SDid:t.id,SDversion:t.version},o}emptyMaterialCache(){this._materialCache={}}getMaterialProperties(e,t,i){const n={};let r=0;if(!e)return n.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor),void 0!==i&&i.useVertexColors&&(n.color=this._renderingEngine.createThreeJsColor("#d3d3d3")),n.side=s.DoubleSide,t!==m.POINT&&t!==m.LINE&&(n.envMap=this._envMap,n.envMapIntensity=this._envMapIntensity),{properties:n,mapCount:r};if(n.alphaTest=e.alphaCutoff,void 0!==e.opacity&&(n.opacity=e.opacity,n.transparent=n.opacity<1),e.alphaMode===p.MATERIAL_ALPHA.BLEND?(n.transparent=!0,n.depthWrite=!1):n.transparent||(n.transparent=!1),void 0!==e.color&&(n.color=this._renderingEngine.createThreeJsColor(e.color)),void 0===e.color&&void 0!==e.map&&void 0!==e.map.color&&(n.color=this._renderingEngine.createThreeJsColor(e.map.color)),void 0!==e.color||void 0===e.map||void 0!==e.map.color||void 0!==i&&i.useVertexColors||(n.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor)),void 0===i||!i.useVertexColors||e.color!==this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)&&e.color+"ff"!==this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)&&e.color!==this._renderingEngine.defaultMaterialColor&&e.color!==this._renderingEngine.defaultMaterialColor+"ff"&&void 0!==e.color||(n.color=this._renderingEngine.createThreeJsColor("#d3d3d3")),void 0!==e.side&&(n.side=e.side===p.MATERIAL_SIDE.BACK?s.BackSide:e.side===p.MATERIAL_SIDE.FRONT?s.FrontSide:s.DoubleSide),t===m.POINT)return n.size=this._pointSize,{properties:n,mapCount:r};if(t===m.LINE)return{properties:n,mapCount:r};if(e instanceof p.MaterialShadowData)return{properties:n,mapCount:r};const a=n;if(void 0!==e.alphaMap&&(a.alphaMap=this.createTexture(e.alphaMap),a.transparent=!0,a.depthWrite=!1,r++),void 0!==e.aoMap&&(a.aoMap=this.createTexture(e.aoMap),r++),void 0!==e.aoMapIntensity&&(a.aoMapIntensity=e.aoMapIntensity),void 0!==e.map&&(a.map=this.createTexture(e.map),a.map.colorSpace=this._textureEncoding,r++),e instanceof p.MaterialUnlitData)return{properties:a,mapCount:r};const l=a;if(void 0!==e.shading&&(l.flatShading="smooth"!==e.shading),void 0!==e.bumpMap&&(l.bumpMap=this.createTexture(e.bumpMap),r++),l.bumpScale=e.bumpScale,void 0!==e.emissiveness&&(l.emissive=this._renderingEngine.createThreeJsColor(e.emissiveness)),void 0!==e.emissiveMap&&(l.emissiveMap=this.createTexture(e.emissiveMap),l.emissiveMap.colorSpace=this._textureEncoding,r++),l.envMap=this._envMap,l.envMapIntensity=this._envMapIntensity,void 0!==e.normalMap&&(l.normalMap=this.createTexture(e.normalMap),r++),void 0!==e.normalScale&&(l.normalScale=new s.Vector2(e.normalScale,-e.normalScale)),e instanceof p.MaterialSpecularGlossinessData){const t=l;return t.specular=this._renderingEngine.createThreeJsColor(e.specular),t.glossiness=e.glossiness,void 0!==e.specularGlossinessMap?(t.specularMap2=this.createTexture(e.specularGlossinessMap),t.specularMap2.colorSpace=s.SRGBColorSpace,t.glossinessMap=t.specularMap2,r++):(void 0!==e.specularMap&&(t.specularMap2=this.createTexture(e.specularMap),t.specularMap2.colorSpace=s.SRGBColorSpace,r++),void 0!==e.glossinessMap&&(t.glossinessMap=this.createTexture(e.glossinessMap),r++)),{properties:t,mapCount:r}}if(e instanceof p.MaterialGemData){const t=l;return t.refractionIndex=e.refractionIndex,void 0!==e.impurityMap&&(t.impurityMap=this.createTexture(e.impurityMap),r++),t.impurityScale=e.impurityScale,void 0!==e.colorTransferBegin&&(t.colorTransferBegin=this._renderingEngine.createThreeJsColor(e.colorTransferBegin)),void 0!==e.colorTransferEnd&&(t.colorTransferEnd=this._renderingEngine.createThreeJsColor(e.colorTransferEnd)),t.center=new s.Vector3(e.center[0],e.center[1],e.center[2]),t.tracingDepth=e.tracingDepth,t.radius=e.radius,t.sphericalNormalMap=e.sphericalNormalMap,t.gamma=e.gamma,t.contrast=e.contrast,t.brightness=e.brightness,t.dispersion=e.dispersion,t.tracingOpacity=e.tracingOpacity,t.roughness=0,t.metalness=1,t.transparent=!0,t.opacity=1,t.side=s.FrontSide,{properties:t,mapCount:r}}if(e instanceof p.MaterialStandardData){const t=l;return t.clearcoat=e.clearcoat,void 0!==e.clearcoatMap&&(t.clearcoatMap=this.createTexture(e.clearcoatMap),r++),void 0!==e.clearcoatNormalMap&&(t.clearcoatNormalMap=this.createTexture(e.clearcoatNormalMap),r++),t.clearcoatRoughness=e.clearcoatRoughness,void 0!==e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap=this.createTexture(e.clearcoatRoughnessMap),r++),void 0!==e.displacementMap&&(t.displacementMap=this.createTexture(e.displacementMap),r++),t.displacementScale=e.displacementScale,t.displacementBias=e.displacementBias,t.ior=e.ior,t.transmission=e.transmission,void 0!==e.transmissionMap&&(t.transmissionMap=this.createTexture(e.transmissionMap),r++),t.thickness=e.thickness,void 0!==e.thicknessMap&&(t.thicknessMap=this.createTexture(e.thicknessMap),r++),t.attenuationDistance=e.attenuationDistance,t.attenuationColor=this._renderingEngine.createThreeJsColor(e.attenuationColor),t.sheen=e.sheen,t.sheenColor=this._renderingEngine.createThreeJsColor(e.sheenColor),t.sheenRoughness=e.sheenRoughness,void 0!==e.sheenColorMap&&(t.sheenColorMap=this.createTexture(e.sheenColorMap),r++),void 0!==e.sheenRoughnessMap&&(t.sheenRoughnessMap=this.createTexture(e.sheenRoughnessMap),r++),t.specularIntensity=e.specularIntensity,void 0!==e.specularIntensityMap&&(t.specularIntensityMap=this.createTexture(e.specularIntensityMap),r++),t.specularColor=this._renderingEngine.createThreeJsColor(e.specularColor),void 0!==e.specularColorMap&&(t.specularColorMap=this.createTexture(e.specularColorMap),r++),t.metalness=e.metalness,t.roughness=e.roughness,void 0!==e.metalnessRoughnessMap?(t.metalnessMap=this.createTexture(e.metalnessRoughnessMap),t.roughnessMap=t.metalnessMap,r++):(void 0!==e.metalnessMap&&(t.metalnessMap=this.createTexture(e.metalnessMap),r++),void 0!==e.roughnessMap&&(t.roughnessMap=this.createTexture(e.roughnessMap),r++)),{properties:t,mapCount:r}}throw new o.ShapeDiverViewerDataProcessingError("MaterialLoader.getMaterialProperties: No proper material properties were found.")}init(){}load(e,t){let i,n=null;if(e instanceof p.GeometryData||(n=e),i=t&&0===t.mode?m.POINT:!t||1!==t.mode&&2!==t.mode&&3!==t.mode?m.MESH:m.LINE,!n){if(t&&0===t.mode){if(this._defaultPointsMaterial)return this._defaultPointsMaterial}else if(!t||1!==t.mode&&2!==t.mode&&3!==t.mode){if(this._defaultMaterial)return this._defaultMaterial}else if(this._defaultLineMaterial)return this._defaultLineMaterial;const r=this.createMaterial(i,e,n,t);return i===m.POINT?this._defaultPointsMaterial=r:i===m.LINE?this._defaultLineMaterial=r:this._defaultMaterial=r,this._materialCache[i+"_"+i]={material:r,materialData:n,materialSettings:t},r}const r=this.createMaterial(i,e,n,t);return this._materialCache[e.id+"_"+e.version+"_"+i]?(this._materialCache[e.id+"_"+e.version+"_"+i].material.copy(r),this._materialCache[e.id+"_"+e.version+"_"+i].material):(this._materialCache[e.id+"_"+e.version+"_"+i]={material:r,materialData:n,materialSettings:t},r)}removeFromMaterialCache(e){for(const t in this._materialCache)t.startsWith(e)&&delete this._materialCache[t]}transformEnvMapRotationMatrix(e=!1){const t=(new s.Matrix4).fromArray([1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1]);return!0===e?"LDR"===this._envMapType.toUpperCase()?this._environmentMapRotationMatrix.clone().invert().multiply(t):this._environmentMapRotationMatrix:"LDR"===this._envMapType.toUpperCase()?this._environmentMapRotationMatrix.clone().multiply(t):this._environmentMapRotationMatrix}updateEnvironmentMapRotation(e){this._environmentMapRotationMatrix=(new s.Matrix4).fromArray(h.mat4.fromQuat(h.mat4.create(),e)).transpose();const t=this.transformEnvMapRotationMatrix(),i=this.transformEnvMapRotationMatrix(!0);for(const e in this._materialCache)this._materialCache[e].material.userData.shader&&(this._materialCache[e].material.userData.shader.uniforms.envMapRotation.value=t);s.ShaderLib.backgroundCube.uniforms.envMapRotation={value:i},this._sceneBackgroundNeedsUpdate=!0}updateMaterials(){for(const e in this._materialCache)this._materialCache[e].material.needsUpdate=!0}updateSoftShadow(e,t){this._lightSizeUV=e,this._blending=t;for(const i in this._materialCache)this._materialCache[i].material.userData.shader&&(this._materialCache[i].material.userData.shader.uniforms.lightSizeUV.value=e,this._materialCache[i].material.userData.shader.uniforms.blending.value=t)}assignTextureEncoding(){for(const e in this._materialCache)if(this._materialCache[e].material instanceof s.MeshPhysicalMaterial||this._materialCache[e].material instanceof s.MeshStandardMaterial){const t=this._materialCache[e].material;t.emissiveMap&&(t.emissiveMap.colorSpace=this._textureEncoding,t.emissiveMap.needsUpdate=!0),t.map&&(t.map.colorSpace=this._textureEncoding,t.map.needsUpdate=!0),t.needsUpdate=!0}}createDataKeyFromMap(e){return window.btoa(`${e.image.src}_${e.center}_${e.color}_${e.flipY}_${e.magFilter}_${e.minFilter}_${e.offset}_${e.repeat}_${e.rotation}_${e.texCoord}_${e.wrapS}_${e.wrapT}`)}createTexture(e){const t=this.createDataKeyFromMap(e);if(this._threeJsTextureCache[t])return this._threeJsTextureCache[t].usage++,this._threeJsTextureCache[t].texture;const i=new s.Texture(e.image);return i.format=s.RGBAFormat,i.minFilter=(()=>{switch(e.minFilter){case p.TEXTURE_FILTERING.NEAREST:return s.NearestFilter;case p.TEXTURE_FILTERING.NEAREST_MIPMAP_NEAREST:return s.NearestMipMapNearestFilter;case p.TEXTURE_FILTERING.LINEAR_MIPMAP_NEAREST:return s.LinearMipMapNearestFilter;case p.TEXTURE_FILTERING.NEAREST_MIPMAP_LINEAR:return s.NearestMipMapLinearFilter;case p.TEXTURE_FILTERING.LINEAR:return s.LinearFilter;case p.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR:default:return s.LinearMipMapLinearFilter}})(),i.magFilter=(()=>{switch(e.magFilter){case p.TEXTURE_FILTERING.NEAREST:return s.NearestFilter;case p.TEXTURE_FILTERING.LINEAR:default:return s.LinearFilter}})(),i.wrapS=(()=>{switch(e.wrapS){case p.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return s.ClampToEdgeWrapping;case p.TEXTURE_WRAPPING.MIRRORED_REPEAT:return s.MirroredRepeatWrapping;case p.TEXTURE_WRAPPING.REPEAT:default:return s.RepeatWrapping}})(),i.wrapT=(()=>{switch(e.wrapT){case p.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return s.ClampToEdgeWrapping;case p.TEXTURE_WRAPPING.MIRRORED_REPEAT:return s.MirroredRepeatWrapping;case p.TEXTURE_WRAPPING.REPEAT:default:return s.RepeatWrapping}})(),i.center=new s.Vector2(e.center[0],e.center[1]),i.offset=new s.Vector2(e.offset[0],e.offset[1]),i.repeat=new s.Vector2(e.repeat[0],e.repeat[1]),i.rotation=e.rotation,void 0!==e.texCoord&&(i.channel=e.texCoord),i.flipY=e.flipY,i.needsUpdate=!0,i.userData.cacheKey=t,this._threeJsTextureCache[t]={texture:i,usage:1,initialized:!1},this._threeJsTextureCache[t].texture}}},7181:function(e,t,i){"use strict";var n,r,a=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},c=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraManager=void 0;const u=o(i(5232)),h=i(887),d=i(1990);t.CameraManager=class{constructor(e){this._renderingEngine=e,n.set(this,new u.PerspectiveCamera),r.set(this,{})}get camera(){return l(this,n,"f")}adjustCamera(e){let t,i;const r=this._renderingEngine.cameraEngine.camera;if(r.useNodeData)t=r.node.threeJsObject[this._renderingEngine.id].children[0].children[0];else if(this._renderingEngine.cameraEngine.camera.type===d.CAMERA_TYPE.ORTHOGRAPHIC){const i=r;let n=i.threeJsObject[this._renderingEngine.id];n||this.load(i),n=i.threeJsObject[this._renderingEngine.id];const a=h.vec3.distance(i.position,i.target)/2;n.up.set(i.up[0],i.up[1],i.up[2]),n.left=i.left=-a*e,n.bottom=i.bottom=-a,n.right=i.right=a*e,n.top=i.top=a,n.near=i.near=.01,n.far=i.far=100*a,n.position.set(i.position[0],i.position[1],i.position[2]),n.lookAt(i.target[0],i.target[1],i.target[2]),n.updateProjectionMatrix(),t=n}else{const n=r;let a=n.threeJsObject[this._renderingEngine.id];a||this.load(n),a=n.threeJsObject[this._renderingEngine.id],a.up.set(0,0,1);const s=this._renderingEngine.cameraEngine.camera.fov,o=this._renderingEngine.sceneTreeManager.boundingBox.boundingSphere,l=o.radius>0?o.radius:2;a.fov=n.fov=s,a.aspect=n.aspect=e,a.far=n.far=s<10?100*s*100*l:100*l,a.near=n.near=s<10?100*s*.01*l:.01*l,a.position.set(n.position[0],n.position[1],n.position[2]),a.lookAt(n.target[0],n.target[1],n.target[2]),a.updateProjectionMatrix(),!0===n.controls.enableTurntableControls&&(i=h.mat4.create(),h.mat4.rotateZ(i,i,-n.sceneRotation[1]),h.mat4.translate(i,i,n.controls.turntableCenter)),t=a}return c(this,n,t,"f"),{camera:t,matrix:i}}init(){}load(e,t){let i=l(this,r,"f")[e.id];if(e instanceof d.PerspectiveCamera){i?(e.threeJsObject[this._renderingEngine.id]=i,t&&!t.children.find((e=>e===i))&&t.add(i)):(i=new u.PerspectiveCamera,l(this,r,"f")[e.id]=i,e.threeJsObject[this._renderingEngine.id]=i,t&&t.add(i));const n=e,a=i;a.up.set(0,0,1),n.useNodeData&&(a.fov=n.fov,a.aspect=n.aspect,a.far=n.far,a.near=n.near,a.updateProjectionMatrix())}else{i?(e.threeJsObject[this._renderingEngine.id]=i,t&&!t.children.find((e=>e===i))&&t.add(i)):(i=new u.OrthographicCamera(0,0,0,0),l(this,r,"f")[e.id]=i,e.threeJsObject[this._renderingEngine.id]=i,t&&t.add(i));const n=e,a=i;a.up.set(n.up[0],n.up[1],n.up[2]),n.useNodeData&&(a.left=n.left,a.bottom=n.bottom,a.right=n.right,a.top=n.top,a.near=n.near,a.far=n.far,a.updateProjectionMatrix())}}updateCamera(e,t){var i;return"perspective"===(null===(i=this._renderingEngine.cameraEngine.camera)||void 0===i?void 0:i.type)&&(this._renderingEngine.cameraEngine.camera.aspect=t),this._renderingEngine.cameraEngine.camera.update(e)}},n=new WeakMap,r=new WeakMap},3689:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentGeometryManager=void 0;const s=a(i(5232)),o=i(7038),l=i(887),c=i(5174),u=i(8877),h=i(1786),d=i(9277);t.EnvironmentGeometryManager=class{constructor(e){this._renderingEngine=e,this._converter=u.Converter.instance,this._eventEngine=u.EventEngine.instance,this._groundPlaneColor="#d3d3d3ff",this._groundPlaneShadowColor="#d3d3d3ff",this._gridColor="#44444426",this._initialized=!1,this._eventEngine.addListener(u.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{this.updateEnvironmentGeometryPosition()}))}get gridColor(){return this._gridColor}set gridColor(e){this._gridColor=e,this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.material.needsUpdate=!0}get groundPlaneColor(){return this._groundPlaneColor}set groundPlaneColor(e){this._groundPlaneColor=e,this.assignGroundPlaneColor(e)}get groundPlaneShadowColor(){return this._groundPlaneShadowColor}set groundPlaneShadowColor(e){this._groundPlaneShadowColor=e,this.assignGroundPlaneShadowColor(e)}get grid(){return this._grid}get groundPlane(){return this._groundPlane}get groundPlaneShadow(){return this._groundPlaneShadow}assignGroundPlaneColor(e){this._groundPlane.material.opacity=this._converter.toAlpha(e),this._groundPlane.material.transparent=1!==this._groundPlane.material.opacity,this._groundPlane.material.depthWrite=!this._groundPlane.material.transparent,this._groundPlane.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlane.material.needsUpdate=!0}assignGroundPlaneShadowColor(e){this._groundPlaneShadow.material.opacity=this._converter.toAlpha(e),this._groundPlaneShadow.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlaneShadow.material.needsUpdate=!0}evaluateGridMeasurements(e){let t=.1,i=1;if(e>1){let n=Math.floor(e).toString(),r=Math.pow(10,n.length-1);i=Math.max(Math.ceil(e/r)*r,1),r/=10,t=i/r}else if(0!==e){let n=1-Math.floor(Math.log(e)/Math.log(10))-2,r=e.toFixed(n+1),a=parseInt(r.substr(r.length-1))+1,s="0.";for(let e=0;e<n;++e)s+="0";i=parseFloat(s+a),t=10*a}return{divisions:t,gridExtents:i}}changeSceneExtents(e){if(0===e.min[0]&&0===e.min[1]&&0===e.min[2]&&0===e.max[0]&&0===e.max[1]&&0===e.max[2]||e.isEmpty())return;this._initialized=!0;let t=l.vec3.distance(e.min,e.max);const{divisions:i,gridExtents:n}=this.evaluateGridMeasurements(t);this._gridObject.remove(this._grid),this._grid=new s.GridHelper(2*n,i),this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._groundPlane.geometry=new s.PlaneGeometry(2*n,2*n,2,2),this._groundPlaneShadow.geometry=new s.PlaneGeometry(2*n,2*n,2,2);let r=e.boundingSphere;this._grid.position.set(r.center[0],r.center[1],e.min[2]-.005),this._groundPlane.position.set(r.center[0],r.center[1],e.min[2]-.01),this._groundPlaneShadow.position.set(r.center[0],r.center[1],e.min[2]-.01)}init(){this._environmentGeometryObject=new d.SDObject("environmentGeometry",""),this._renderingEngine.sceneTreeManager.scene.add(this._environmentGeometryObject),this._gridObject=new h.SDData("grid",""),this._grid=new s.GridHelper,this._grid.material.opacity="string"==typeof this._gridColor&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=1!==this._grid.material.opacity,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._environmentGeometryObject.add(this._gridObject),this._groundPlaneObject=new h.SDData("groundPlane","");let e=new o.MaterialStandardData;e.color=this._groundPlaneColor,e.side=o.MATERIAL_SIDE.FRONT,e.opacity=this._converter.toAlpha(this._groundPlaneColor),e.roughness=1,e.metalness=0,this._groundPlane=new s.Mesh(new s.PlaneGeometry,this._renderingEngine.materialLoader.load(e)),this._groundPlane.receiveShadow=!0,this._groundPlane.visible=this._renderingEngine.groundPlaneVisibility,this._groundPlaneObject.add(this._groundPlane),this._environmentGeometryObject.add(this._groundPlaneObject),this._groundPlaneShadowObject=new h.SDData("groundPlaneShadow","");let t=new o.MaterialShadowData;t.color=this._groundPlaneShadowColor,t.opacity=this._converter.toAlpha(this._groundPlaneShadowColor),this._groundPlaneShadow=new s.Mesh(new s.PlaneGeometry,this._renderingEngine.materialLoader.load(t)),this._groundPlaneShadow.receiveShadow=!0,this._groundPlaneShadow.visible=this._renderingEngine.groundPlaneShadowVisibility,this._groundPlaneShadowObject.add(this._groundPlaneShadow),this._groundPlaneShadowObject.userData.ambientOcclusion=!1,this._environmentGeometryObject.add(this._groundPlaneShadowObject);let i=.005;this._grid.position.set(0,0,-i),this._groundPlane.position.set(0,0,-i),this._groundPlaneShadow.position.set(0,0,-i)}updateEnvironmentGeometryPosition(){const e=new c.Box(this._renderingEngine.sceneTreeManager.boundingBox.min,this._renderingEngine.sceneTreeManager.boundingBox.max);if(!(0===e.min[0]&&0===e.min[1]&&0===e.min[2]&&0===e.max[0]&&0===e.max[1]&&0===e.max[2]||e.isEmpty()))if(this._initialized){let t=.005,i=e.boundingSphere,n=l.vec3.distance(e.min,e.max);const{divisions:r,gridExtents:a}=this.evaluateGridMeasurements(n);this._groundPlaneShadow.geometry=new s.PlaneGeometry(2*a,2*a,2,2),this._grid&&this._grid.position.set(i.center[0],i.center[1],e.min[2]-t),this._groundPlane&&this._groundPlane.position.set(i.center[0],i.center[1],e.min[2]-2*t),this._groundPlaneShadow&&this._groundPlaneShadow.position.set(i.center[0],i.center[1],e.min[2]-2*t)}else this.changeSceneExtents(e)}}},8973:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PostProcessingManager=void 0;const o=a(i(5232)),l=i(1704),c=i(8877),u=i(199),h=i(5851),d=i(2207),f=i(5479),p=i(4520),m=i(754),g=i(368),v=i(887);t.PostProcessingManager=class{constructor(e){this._renderingEngine=e,this._converter=c.Converter.instance,this._eventEngine=c.EventEngine.instance,this._systemInfo=c.SystemInfo.instance,this._uuidGenerator=c.UuidGenerator.instance,this._antiAliasingTechnique=h.ANTI_ALIASING_TECHNIQUE.SMAA,this._antiAliasingTechniqueMobile=h.ANTI_ALIASING_TECHNIQUE.FXAA,this._effectDefinitions=[],this._effects=[],this._enablePostProcessingOnMobile=!0,this._godRaysManagers={},this._manualPostProcessing=!1,this._outlineManagers={},this._selectiveBloomManagers={},this._sceneExtents=0,this._suspendEffectPassUpdate=!1,this._currentCameraType="PerspectiveCamera",this._eventEngine.addListener(c.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{const t=e;t.viewportId===this._renderingEngine.id&&(this._sceneExtents=v.vec3.distance(t.boundingBox.min,t.boundingBox.max),this.changeEffectPass())}))}get antiAliasingTechnique(){return this._antiAliasingTechnique}set antiAliasingTechnique(e){this._antiAliasingTechnique=e,this.changeEffectPass()}get antiAliasingTechniqueMobile(){return this._antiAliasingTechniqueMobile}set antiAliasingTechniqueMobile(e){this._antiAliasingTechniqueMobile=e,this.changeEffectPass()}get effectComposer(){return this._composer}get effects(){return this._effects}get enablePostProcessingOnMobile(){return this._enablePostProcessingOnMobile}set enablePostProcessingOnMobile(e){this._enablePostProcessingOnMobile=e}get godRaysManagers(){return this._godRaysManagers}get manualPostProcessing(){return this._manualPostProcessing}set manualPostProcessing(e){this._manualPostProcessing=e,this._composer&&!0===this._manualPostProcessing&&this._composer.removeAllPasses()}get outlineManagers(){return this._outlineManagers}get selectiveBloomManagers(){return this._selectiveBloomManagers}get ssaaSampleLevel(){return this._ssaaRenderPass?this._ssaaRenderPass.sampleLevel:2}set ssaaSampleLevel(e){this._ssaaRenderPass&&(this._ssaaRenderPass.sampleLevel=e)}addEffect(e,t){const i=t||this._uuidGenerator.create();switch(this._effectDefinitions.push({token:i,definition:e}),e.type){case h.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:this._godRaysManagers[i]||(this._godRaysManagers[i]=new u.GodRaysManager(this._renderingEngine));break;case h.POST_PROCESSING_EFFECT_TYPE.OUTLINE:this._outlineManagers[i]||(this._outlineManagers[i]=new d.OutlineManager(this._renderingEngine));break;case h.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:this._selectiveBloomManagers[i]||(this._selectiveBloomManagers[i]=new f.SelectiveBloomManager(this._renderingEngine))}return this.changeEffectPass(),i}applySettings(e){this._suspendEffectPassUpdate=!0,this.antiAliasingTechnique=e.settings.postprocessing.antiAliasingTechnique,this.antiAliasingTechniqueMobile=e.settings.postprocessing.antiAliasingTechniqueMobile,this.enablePostProcessingOnMobile=e.settings.postprocessing.enablePostProcessingOnMobile,this.ssaaSampleLevel=e.settings.postprocessing.ssaaSampleLevel,this._effectDefinitions=[];const t=e.settings.postprocessing.effects;for(let e=0;e<t.length;e++){const i=this._uuidGenerator.create();this._effectDefinitions.push({token:i,definition:{type:t[e].type,properties:t[e].properties}})}this._suspendEffectPassUpdate=!1,this.changeEffectPass()}changeEffectPass(){if(!this._composer)return;if(!0===this._suspendEffectPassUpdate)return;if(!0===this._systemInfo.isMobile&&!1===this._enablePostProcessingOnMobile)return;if(this._manualPostProcessing)return;for(let e=0;e<this._composer.passes.length;e++)this._composer.passes[e].dispose();this._composer.removeAllPasses();const e=!0===this._systemInfo.isMobile?this._antiAliasingTechniqueMobile:this._antiAliasingTechnique;e===h.ANTI_ALIASING_TECHNIQUE.SSAA?this._composer.addPass(this._ssaaRenderPass):this._composer.addPass(this._renderPass),this._effects.forEach((e=>e.effect.dispose())),this._effects=[];for(let e=0;e<this._effectDefinitions.length;e++)switch(this._effectDefinitions[e].definition.type){case h.POST_PROCESSING_EFFECT_TYPE.BLOOM:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.BloomEffect({blendFunction:t.blendFunction,luminanceThreshold:t.luminanceThreshold,luminanceSmoothing:t.luminanceSmoothing,mipmapBlur:t.mipmapBlur,intensity:t.intensity,kernelSize:t.kernelSize})})}break;case h.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:{const t=this._effectDefinitions[e].definition.properties||{},i=void 0!==t.offset?Array.isArray(t.offset)?t.offset:[t.offset.x,t.offset.y]:void 0;this._effects.push({token:this._effectDefinitions[e].token,effect:new l.ChromaticAberrationEffect({blendFunction:t.blendFunction,offset:i?new o.Vector2(...i):void 0,radialModulation:void 0!==t.radialModulation&&t.radialModulation,modulationOffset:void 0!==t.modulationOffset?t.modulationOffset:.15})})}break;case h.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:{const t=this._effectDefinitions[e].definition.properties||{},i=new l.DepthOfFieldEffect(this._renderingEngine.camera,{blendFunction:t.blendFunction,focusDistance:void 0!==t.focusDistance?t.focusDistance:0,focusRange:void 0!==t.focusRange?t.focusRange:.01,bokehScale:void 0!==t.bokehScale?t.bokehScale:5,resolutionScale:1});i.resolution.height=1080,i.blurPass.kernelSize=l.KernelSize.HUGE,this._effects.push({token:this._effectDefinitions[e].token,effect:i})}break;case h.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.DotScreenEffect({blendFunction:t.blendFunction,scale:t.scale,angle:t.angle})})}break;case h.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:{const t=this._effectDefinitions[e].definition.properties||{},i=new l.GodRaysEffect(this._renderingEngine.camera,new o.Mesh,{blendFunction:t.blendFunction,density:t.density,decay:t.decay,weight:t.weight,exposure:t.exposure,clampMax:t.clampMax,kernelSize:t.kernelSize,blur:t.blur});this._effects.push({token:this._effectDefinitions[e].token,effect:i}),this._godRaysManagers[this._effectDefinitions[e].token].setEffect(i)}break;case h.POST_PROCESSING_EFFECT_TYPE.GRID:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.GridEffect({blendFunction:void 0!==t.blendFunction?t.blendFunction:l.BlendFunction.MULTIPLY,scale:t.scale})})}break;case h.POST_PROCESSING_EFFECT_TYPE.HBAO:{if(!1===this._renderingEngine.renderer.capabilities.isWebGL2)break;const t=this._effectDefinitions[e].definition.properties||{},i=this._sceneExtents/10,n=new g.HBAOEffect(this._composer,this._renderingEngine.camera,this._renderingEngine.scene,{resolutionScale:void 0!==t.resolutionScale?t.resolutionScale:1,spp:void 0!==t.spp?t.spp:8,distance:void 0!==t.distance?t.distance*i:i,distancePower:void 0!==t.distanceIntensity?t.distanceIntensity:1,power:void 0!==t.intensity?t.intensity:2.5,bias:void 0!==t.bias?t.bias:10,thickness:void 0!==t.thickness?t.thickness:.5,color:void 0!==t.color?new o.Color(this._converter.toHexColor(t.color).substring(0,7)):new o.Color("black"),iterations:void 0!==t.iterations?t.iterations:1,radius:void 0!==t.radius?t.radius:15,rings:void 0!==t.rings?t.rings:4,lumaPhi:void 0!==t.lumaPhi?t.lumaPhi:10,depthPhi:void 0!==t.depthPhi?t.depthPhi:2,normalPhi:void 0!==t.normalPhi?t.normalPhi:3.25,samples:void 0!==t.samples?t.samples:16});this._effects.push({token:this._effectDefinitions[e].token,effect:n})}break;case h.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.HueSaturationEffect({blendFunction:t.blendFunction,hue:t.hue,saturation:t.saturation})})}break;case h.POST_PROCESSING_EFFECT_TYPE.NOISE:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.NoiseEffect({blendFunction:t.blendFunction,premultiply:t.premultiply})})}break;case h.POST_PROCESSING_EFFECT_TYPE.OUTLINE:{const t=this._effectDefinitions[e].definition.properties||{},i=new l.OutlineEffect(this._renderingEngine.scene,this._renderingEngine.camera,{blendFunction:void 0!==t.blendFunction?t.blendFunction:l.BlendFunction.SCREEN,edgeStrength:t.edgeStrength,pulseSpeed:t.pulseSpeed,visibleEdgeColor:new o.Color(this._converter.toHexColor(t.visibleEdgeColor).substring(0,7)),hiddenEdgeColor:new o.Color(this._converter.toHexColor(t.hiddenEdgeColor).substring(0,7)),kernelSize:t.kernelSize,blur:t.blur,xRay:t.xRay,multisampling:t.multisampling});this._effects.push({token:this._effectDefinitions[e].token,effect:i}),this._outlineManagers[this._effectDefinitions[e].token].setEffect(i)}break;case h.POST_PROCESSING_EFFECT_TYPE.PIXELATION:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.PixelationEffect(t.granularity)})}break;case h.POST_PROCESSING_EFFECT_TYPE.SSAO:{if(!1===this._renderingEngine.renderer.capabilities.isWebGL2)break;const t=this._effectDefinitions[e].definition.properties||{},i=this._sceneExtents/50,n=new m.SSAOEffect(this._composer,this._renderingEngine.camera,this._renderingEngine.scene,{resolutionScale:void 0!==t.resolutionScale?t.resolutionScale:1,spp:void 0!==t.spp?t.spp:8,distance:void 0!==t.distance?t.distance*i:i,distancePower:void 0!==t.distanceIntensity?t.distanceIntensity:1,power:void 0!==t.intensity?t.intensity:2.5,color:void 0!==t.color?new o.Color(this._converter.toHexColor(t.color).substring(0,7)):new o.Color("black"),iterations:void 0!==t.iterations?t.iterations:1,radius:void 0!==t.radius?t.radius:15,rings:void 0!==t.rings?t.rings:4,lumaPhi:void 0!==t.lumaPhi?t.lumaPhi:10,depthPhi:void 0!==t.depthPhi?t.depthPhi:2,normalPhi:void 0!==t.normalPhi?t.normalPhi:3.25,samples:void 0!==t.samples?t.samples:16});this._effects.push({token:this._effectDefinitions[e].token,effect:n})}break;case h.POST_PROCESSING_EFFECT_TYPE.SCANLINE:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.ScanlineEffect({blendFunction:t.blendFunction,density:t.density})})}break;case h.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:{const t=this._effectDefinitions[e].definition.properties||{},i=new l.SelectiveBloomEffect(this._renderingEngine.scene,this._renderingEngine.camera,{blendFunction:t.blendFunction,mipmapBlur:t.mipmapBlur,luminanceThreshold:t.luminanceThreshold,luminanceSmoothing:t.luminanceSmoothing,intensity:t.intensity,kernelSize:t.kernelSize});i.ignoreBackground=void 0===t.ignoreBackground||t.ignoreBackground,this._effects.push({token:this._effectDefinitions[e].token,effect:i}),this._selectiveBloomManagers[this._effectDefinitions[e].token].setEffect(i)}break;case h.POST_PROCESSING_EFFECT_TYPE.SEPIA:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.SepiaEffect({blendFunction:t.blendFunction})})}break;case h.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.TiltShiftEffect({blendFunction:t.blendFunction,offset:t.offset,rotation:t.rotation,focusArea:t.focusArea,feather:t.feather,kernelSize:t.kernelSize})})}break;case h.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:{const t=this._effectDefinitions[e].definition.properties||{};this._effects.push({token:this._effectDefinitions[e].token,effect:new l.VignetteEffect({blendFunction:t.blendFunction,technique:t.technique,offset:t.offset,darkness:t.darkness})})}}this._effects.sort(((e,t)=>this._effectDefinitions.indexOf(this._effectDefinitions.find((t=>t.token===e.token)))-this._effectDefinitions.indexOf(this._effectDefinitions.find((e=>e.token===t.token)))));const t=this._effects.map((e=>e.effect));e===h.ANTI_ALIASING_TECHNIQUE.FXAA?t.unshift(this._fxaaEffect):e===h.ANTI_ALIASING_TECHNIQUE.SMAA&&t.unshift(this._smaaEffect),this._effectPass=new l.EffectPass(this._renderingEngine.camera,...this._effects.map((e=>e.effect))),this._composer.addPass(this._effectPass),this._effectDefinitions.find((e=>e.definition.type===h.POST_PROCESSING_EFFECT_TYPE.HBAO||e.definition.type===h.POST_PROCESSING_EFFECT_TYPE.SSAO))&&this._composer.addPass(new l.EffectPass(this._renderingEngine.camera,e===h.ANTI_ALIASING_TECHNIQUE.FXAA?this._fxaaEffect:this._smaaEffect))}getDefaultEffectProperties(e){switch(e){case h.POST_PROCESSING_EFFECT_TYPE.BLOOM:return{blendFunction:l.BlendFunction.ADD,intensity:1,kernelSize:l.KernelSize.LARGE,luminanceSmoothing:.025,luminanceThreshold:.9,mipmapBlur:!1};case h.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:return{blendFunction:l.BlendFunction.NORMAL,modulationOffset:.15,offset:{x:.001,y:5e-4},radialModulation:!1};case h.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:return{blendFunction:l.BlendFunction.NORMAL,bokehScale:5,focusDistance:0,focusRange:.01};case h.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:return{angle:1.57,blendFunction:l.BlendFunction.NORMAL,scale:1};case h.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:return{blendFunction:l.BlendFunction.SCREEN,blur:!0,clampMax:1,decay:.9,density:.96,exposure:.6,kernelSize:l.KernelSize.SMALL,weight:.4};case h.POST_PROCESSING_EFFECT_TYPE.GRID:return{blendFunction:l.BlendFunction.MULTIPLY,scale:1};case h.POST_PROCESSING_EFFECT_TYPE.HBAO:return{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",bias:10,thickness:.5,iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16};case h.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:return{blendFunction:l.BlendFunction.NORMAL,hue:0,saturation:0};case h.POST_PROCESSING_EFFECT_TYPE.NOISE:return{blendFunction:l.BlendFunction.SCREEN,premultiply:!1};case h.POST_PROCESSING_EFFECT_TYPE.OUTLINE:return{blendFunction:l.BlendFunction.SCREEN,blur:!1,edgeStrength:1,hiddenEdgeColor:"#22090a",kernelSize:l.KernelSize.VERY_SMALL,multisampling:0,pulseSpeed:0,resolution:480,visibleEdgeColor:"#ffffff",xRay:!0};case h.POST_PROCESSING_EFFECT_TYPE.PIXELATION:return{granularity:30};case h.POST_PROCESSING_EFFECT_TYPE.SSAO:return{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16};case h.POST_PROCESSING_EFFECT_TYPE.SCANLINE:return{blendFunction:l.BlendFunction.OVERLAY,density:1.25};case h.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:return{blendFunction:l.BlendFunction.ADD,intensity:1,kernelSize:l.KernelSize.LARGE,luminanceSmoothing:.025,luminanceThreshold:.9,mipmapBlur:!1,ignoreBackground:!0};case h.POST_PROCESSING_EFFECT_TYPE.SEPIA:return{blendFunction:l.BlendFunction.NORMAL};case h.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:return{blendFunction:l.BlendFunction.NORMAL,feather:.3,focusArea:.4,kernelSize:l.KernelSize.MEDIUM,offset:0,rotation:0};case h.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:return{blendFunction:l.BlendFunction.NORMAL,darkness:.5,offset:.5,technique:l.VignetteTechnique.DEFAULT};default:return{}}}getEffect(e){return this._effects.find((t=>t.token===e)).effect}getEffectTokens(){return Object.assign({},...this._effectDefinitions.map((e=>({[e.token]:e.definition.type}))))}getPostProcessingEffectsArray(){const e=[];for(let t=0;t<this._effectDefinitions.length;t++)switch(this._effectDefinitions[t].definition.type){case h.POST_PROCESSING_EFFECT_TYPE.BLOOM:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.BLOOM,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,luminanceThreshold:i.luminanceThreshold,luminanceSmoothing:i.luminanceSmoothing,mipmapBlur:i.mipmapBlur,intensity:i.intensity,kernelSize:i.kernelSize}})}break;case h.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,offset:i.offset?Array.isArray(i.offset)?{x:i.offset[0],y:i.offset[1]}:i.offset:void 0,radialModulation:i.radialModulation,modulationOffset:i.modulationOffset}})}break;case h.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,focusDistance:i.focusDistance,focusRange:i.focusRange,bokehScale:i.bokehScale}})}break;case h.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,scale:i.scale,angle:i.angle}})}break;case h.POST_PROCESSING_EFFECT_TYPE.GRID:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.GRID,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,scale:i.scale}})}break;case h.POST_PROCESSING_EFFECT_TYPE.HBAO:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.HBAO,token:this._effectDefinitions[t].token,properties:{resolutionScale:i.resolutionScale,spp:i.spp,distance:i.distance,distanceIntensity:i.distanceIntensity,intensity:i.intensity,bias:i.bias,thickness:i.thickness,color:void 0!==i.color?this._converter.toHexColor(i.color):void 0,iterations:i.iterations,radius:i.radius,rings:i.rings,lumaPhi:i.lumaPhi,depthPhi:i.depthPhi,normalPhi:i.normalPhi,samples:i.samples}})}break;case h.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,hue:i.hue,saturation:i.saturation}})}break;case h.POST_PROCESSING_EFFECT_TYPE.NOISE:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.NOISE,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,premultiply:i.premultiply}})}break;case h.POST_PROCESSING_EFFECT_TYPE.PIXELATION:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.PIXELATION,token:this._effectDefinitions[t].token,properties:{granularity:i.granularity}})}break;case h.POST_PROCESSING_EFFECT_TYPE.SSAO:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.SSAO,token:this._effectDefinitions[t].token,properties:{resolutionScale:i.resolutionScale,spp:i.spp,distance:i.distance,distanceIntensity:i.distanceIntensity,intensity:i.intensity,color:void 0!==i.color?this._converter.toHexColor(i.color):void 0,iterations:i.iterations,radius:i.radius,rings:i.rings,lumaPhi:i.lumaPhi,depthPhi:i.depthPhi,normalPhi:i.normalPhi,samples:i.samples}})}break;case h.POST_PROCESSING_EFFECT_TYPE.SCANLINE:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.SCANLINE,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,density:i.density}})}break;case h.POST_PROCESSING_EFFECT_TYPE.SEPIA:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.SEPIA,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction}})}break;case h.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,offset:i.offset,rotation:i.rotation,focusArea:i.focusArea,feather:i.feather,kernelSize:i.kernelSize}})}break;case h.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:{const i=this._effectDefinitions[t].definition.properties||{};e.push({type:h.POST_PROCESSING_EFFECT_TYPE.VIGNETTE,token:this._effectDefinitions[t].token,properties:{blendFunction:i.blendFunction,technique:i.technique,offset:i.offset,darkness:i.darkness}})}}return e}init(){l.OverrideMaterialManager.workaroundEnabled=!0;const e=()=>{this._composer=new l.EffectComposer(this._renderingEngine.renderer),this._renderingEngine.renderer.autoClear=!0,this._fxaaEffect=new l.FXAAEffect,this._smaaEffect=new l.SMAAEffect({preset:l.SMAAPreset.ULTRA}),this._renderPass=new l.RenderPass(this._renderingEngine.scene,this._renderingEngine.camera),this._ssaaRenderPass=new p.SSAARenderPass(this._renderingEngine.scene,this._renderingEngine.camera)};if(0===this._sceneExtents){const t=this._eventEngine.addListener(c.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(i=>s(this,void 0,void 0,(function*(){const n=i;n.viewportId===this._renderingEngine.id&&v.vec3.distance(n.boundingBox.min,n.boundingBox.max)>0&&(e(),this.changeEffectPass(),this._eventEngine.removeListener(t))}))))}else e()}removeEffect(e){const t=this._effectDefinitions.find((t=>t.token===e));return t&&this._effectDefinitions.splice(this._effectDefinitions.indexOf(t),1),this.changeEffectPass(),!0}render(e,t){if(!this._composer)return;const i=t.type+("PerspectiveCamera"===t.type?"":t.up.toArray().toString());i!==this._currentCameraType&&(this._currentCameraType=i,this.changeEffectPass());const n=this._renderingEngine.renderer.getClearColor(new o.Color),r=n.clone().convertSRGBToLinear();this._renderingEngine.renderer.setClearColor(r),this._renderingEngine.renderer.setClearAlpha(this._renderingEngine.clearAlpha),this._renderingEngine.renderer.autoClear=!1,this._composer.setMainCamera(t),this._composer.render(),this._renderingEngine.renderer.autoClear=!0,this._renderingEngine.renderer.setClearColor(n)}resize(e,t){var i;this._composer&&(this.effects.forEach((i=>{i.effect.setSize&&i.effect.setSize(e,t)})),this._renderPass.setSize(e,t),this._ssaaRenderPass.setSize(e,t),null===(i=this._effectPass)||void 0===i||i.setSize(e,t),this._composer.setSize(e,t))}saveSettings(e){e.settings.postprocessing.antiAliasingTechnique=this.antiAliasingTechnique,e.settings.postprocessing.antiAliasingTechniqueMobile=this.antiAliasingTechniqueMobile,e.settings.postprocessing.enablePostProcessingOnMobile=this.enablePostProcessingOnMobile,e.settings.postprocessing.ssaaSampleLevel=this.ssaaSampleLevel;const t=this.getPostProcessingEffectsArray();t.forEach((e=>delete e.token)),e.settings.postprocessing.effects=t}updateEffect(e,t){this._effectDefinitions.find((t=>t.token===e))&&(this.removeEffect(e),this.addEffect(t,e))}}},9346:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RenderingManager=void 0;const s=a(i(3466)),o=a(i(5232)),l=i(3289),c=i(8715),u=i(2248),h=i(3858),d=i(1990),f=i(8877);t.RenderingManager=class{constructor(e){this._renderingEngine=e,this._animationEngine=l.AnimationEngine.instance,this._animationFrameEngine=c.AnimationFrameEngine.instance,this._converter=f.Converter.instance,this._eventEngine=f.EventEngine.instance,this._logger=f.Logger.instance,this._systemInfo=f.SystemInfo.instance,this._tree=h.Tree.instance,this._activeRendering=!0,this._cameraChanged=!1,this._continuousRendering=!1,this._continuousShadowMapUpdate=!1,this._height=0,this._hidden=!0,this._hiddenCamera=new o.PerspectiveCamera,this._hiddenRenderTarget=new o.WebGLRenderTarget,this._hideLogo=!1,this._lastSize={adjustedWidth:0,adjustedHeight:0,width:0,height:0},this._lightSizeUVEnd=.15,this._lightSizeUVStart=.025,this._maxTextureUnits=0,this._minimalRendering=!1,this._noWebGL=!1,this._runningAnimation=!1,this._sizeChanged=!1,this._softShadowRenderingActive=!1,this._softShadowRenderingDurationActive=0,this._softShadowRenderingTimeout=null,this._usingSwiftShader=!1,this._width=0}get continuousRendering(){return this._continuousRendering}set continuousRendering(e){this._continuousRendering=e}get continuousShadowMapUpdate(){return this._continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._continuousShadowMapUpdate=e}get minimalRendering(){return this._minimalRendering}get usingSwiftShader(){return this._usingSwiftShader}addLogo(e,t){var i,n;const r=document.createElement("div");if(r.style.backgroundColor=t.backgroundColor,r.style.position="relative",r.style.height="100%",r.style.width="100%",null===(i=e.parentElement)||void 0===i||i.insertBefore(r,null===(n=e.parentElement)||void 0===n?void 0:n.firstChild),t.logo){const e=new Image;e.style.position="absolute",e.style.top="50%",e.style.left="50%",e.style.maxWidth="calc(100% * 0.5)",e.style.maxHeight="calc(100% * 0.5)",e.style.transform="translateX(-50%) translateY(-50%)",e.src=t.logo,r.appendChild(e)}return r}addSpinner(e,t){var i,n;const r=document.createElement("div");if(r.style.position="absolute",r.style.height="100%",r.style.width="100%",r.style.top="0",r.style.left="0",r.style.userSelect="none",r.style.cursor="default",r.style.pointerEvents="none",r.style.visibility="hidden",null===(i=e.parentElement)||void 0===i||i.insertBefore(r,null===(n=e.parentElement)||void 0===n?void 0:n.firstChild),t.busyModeSpinner){const e=new Image;e.src=t.busyModeSpinner,e.style.position="absolute",t.spinnerPositioning===u.SPINNER_POSITIONING.CENTER?(e.style.top="50%",e.style.left="50%",e.style.transform="translateX(-50%) translateY(-50%)"):t.spinnerPositioning===u.SPINNER_POSITIONING.BOTTOM_RIGHT?(e.style.right="calc(100% * 0.01)",e.style.bottom="calc(100% * 0.01)",e.style.float="right"):t.spinnerPositioning===u.SPINNER_POSITIONING.BOTTOM_LEFT?(e.style.left="calc(100% * 0.01)",e.style.bottom="calc(100% * 0.01)",e.style.float="left"):t.spinnerPositioning===u.SPINNER_POSITIONING.TOP_RIGHT?(e.style.right="calc(100% * 0.01)",e.style.top="calc(100% * 0.01)",e.style.float="right"):t.spinnerPositioning===u.SPINNER_POSITIONING.TOP_LEFT&&(e.style.left="calc(100% * 0.01)",e.style.top="calc(100% * 0.01)",e.style.float="left"),e.style.maxWidth="calc(100% * 0.15)",e.style.maxHeight="calc(100% * 0.15)",e.style.mixBlendMode="difference",e.style.filter="invert(1) grayscale(100%)",r.appendChild(e)}return r}createRenderer(e){const t={alpha:!0,depth:!0,antialias:!0,preserveDrawingBuffer:!0,stencil:!0,premultipliedAlpha:!0,canvas:e},i=new o.WebGLRenderer(t);i.setPixelRatio(window.devicePixelRatio);const n=i.getContext();if(i.extensions.has("WEBGL_debug_renderer_info")){const e=i.extensions.get("WEBGL_debug_renderer_info");"Google SwiftShader"===n.getParameter(e.UNMASKED_RENDERER_WEBGL)&&(this._usingSwiftShader=!0,this._logger.warn("RenderingLogic.createWebGLContext: The current device is using Google SwiftShader, a CPU-based renderer. To achieve better rendering results, please enable GPU-rendering in your settings."))}return i.extensions.has("EXT_shader_texture_lod")||(this._minimalRendering=!0),i.useLegacyLights=!0,i.outputColorSpace=o.SRGBColorSpace,i.toneMapping=o.NoToneMapping,i.shadowMap.enabled=!0,i.shadowMap.needsUpdate=!0,i.shadowMap.type=o.PCFSoftShadowMap,i.shadowMap.autoUpdate=!1,i.localClippingEnabled=!0,i.setSize(e.width,e.height),i.setClearColor(new o.Color("#ffffff"),1),this._maxTextureUnits=i.getContext().getParameter(i.getContext().MAX_TEXTURE_IMAGE_UNITS),i}evaluateTextureUnitCount(e){e>this._maxTextureUnits?(this._logger.warn("RenderingManager.evaluateTextureUnitCount: Maximum number of texture units exceeded. Disabling shadows."),this._renderingEngine.lightLoader.forceDisabledShadows=!0,this._renderingEngine.update("RenderingManager.evaluateTextureUnitCount")):this._renderingEngine.lightLoader.forceDisabledShadows=!1}getScreenshot(e="image/png",t=1){return this._renderingEngine.renderer.domElement.toDataURL(e,t)}init(){try{this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVEnd,1),this._renderingEngine.renderer.shadowMap.type=o.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials(),this._eventEngine.addListener(f.EVENTTYPE.CAMERA.CAMERA_START,(e=>{e.viewportId===this._renderingEngine.id&&this.startRendering()})),this._eventEngine.addListener(f.EVENTTYPE.CAMERA.CAMERA_END,(e=>{e.viewportId===this._renderingEngine.id&&this.stopRendering()})),window.onresize=()=>{this.render()},this._renderingEngine.canvas.onresize=()=>{this.render()},this._renderingEngine.canvas.parentElement.onresize=()=>{this.render()};const e=new s.default;e.showPanel(0),e.dom.style.cssText="position:absolute;top:0px;left:0px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(e.dom);const t=new s.default;t.showPanel(1),t.dom.style.cssText="position:absolute;top:0px;left:80px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(t.dom);const i=new s.default;i.showPanel(2),i.dom.style.cssText="position:absolute;top:0px;left:160px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(i.dom),this._stats={stats:[e,t,i],begin:()=>{e.begin(),t.begin(),i.begin()},end:()=>{e.end(),t.end(),i.end()}}}catch(e){throw this._noWebGL=!0,e}}render(){this.startAndStopRendering()}resize(e,t){this._width=e,this._height=t}start(){this._animationFrameEngine.addAnimationFrameCallback(this.animate.bind(this)),this.startAndStopRendering()}updateShadowMap(){this._renderingEngine.renderer.shadowMap.needsUpdate=!0}activateBeautyRenderShaders(){this._renderingEngine.renderer.shadowMap.type=o.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials()}animate(e,t,i){if(this._renderingEngine.closed||this._noWebGL)return;this._renderingEngine.evaluateFlagState(),!0===this._renderingEngine.show&&this._tree.root.version!==this._renderingEngine.sceneTreeManager.lastRootVersion&&(this._renderingEngine.sceneTreeManager.updateSceneTree(this._tree.root),this.updateShadowMap(),this._animationEngine.updateAnimationData(),this.render(),this._eventEngine.emitEvent(f.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this._renderingEngine.id})),i!==this._runningAnimation&&this.render(),this._runningAnimation=i,this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateNode(void 0,void 0,{transformationOnly:!0}),this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateMorphWeights();const{width:n,height:r,adjustedWidth:a,adjustedHeight:s}=this.calculateSize(),l=n/r;this._sizeChanged=this._lastSize.adjustedHeight!==s||this._lastSize.adjustedWidth!==a||this._lastSize.height!==r||this._lastSize.width!==n,this._lastSize={width:n,height:r,adjustedWidth:a,adjustedHeight:s},this._cameraChanged=!!this._renderingEngine.cameraEngine.camera&&this._renderingEngine.cameraManager.updateCamera(t,l);const c=this.evaluateRenderingState();if(this.toggleBusyMode(c.busyMode),!1===c.showScene)return this.toggleLogo(!0),!1===this._hidden&&this._eventEngine.emitEvent(f.EVENTTYPE.VIEWPORT.VIEWPORT_HIDDEN,{viewportId:this._renderingEngine.id}),void(this._hidden=!0);if(!0===this._hideLogo&&!0===this._hidden?(this.toggleLogo(!1),this._hideLogo=!1,!0===this._hidden&&this._eventEngine.emitEvent(f.EVENTTYPE.VIEWPORT.VIEWPORT_VISIBLE,{viewportId:this._renderingEngine.id}),this._hidden=!1):(this._hideLogo=!0,!0===this._hidden&&this._renderingEngine.postProcessingManager.changeEffectPass()),!1===c.rendering||!0===this._renderingEngine.pause)return;this._stats.begin(),this.showStatistics();const h=new o.Vector2;this._renderingEngine.renderer.getSize(h),h.equals(new o.Vector2(a,s))||(this._renderingEngine.renderer.setSize(a,s),this._renderingEngine.postProcessingManager.resize(a,s),this._renderingEngine.renderer.domElement.style.width=n+"px",this._renderingEngine.renderer.domElement.style.height=r+"px",this._renderingEngine.materialLoader.assignPointSize(this._renderingEngine.pointSize));const{camera:d,matrix:p}=this._renderingEngine.cameraManager.adjustCamera(l);if(p){for(let e=0;e<this._tree.root.children.length;e++){if(!this._tree.root.children[e].sessionNode||this._tree.root.children[e].excludeViewports.includes(this._renderingEngine.id))continue;const t=this._tree.root.children[e].transformations.find((e=>"turntableRotation"===e.id));t?t.matrix=p:this._tree.root.children[e].addTransformation({id:"turntableRotation",matrix:p})}c.updateShadowMap=!0,this._renderingEngine.sceneTreeManager.updateNode(void 0,void 0,{transformationOnly:!0})}this._renderingEngine.htmlElementAnchorLoader.adjustPositions(a/n,s/r);const m=this._renderingEngine.renderer.shadowMap.enabled;this._renderingEngine.renderer.shadowMap.enabled=!this._renderingEngine.usingSwiftShader&&this._renderingEngine.type!==u.RENDERER_TYPE.ATTRIBUTES&&this._renderingEngine.shadows,m!==this._renderingEngine.renderer.shadowMap.enabled&&this._renderingEngine.materialLoader.updateMaterials();let g,v=!0;if(!1===this._renderingEngine.lights){const e=this._renderingEngine.lightEngine.lightScene;e&&(g=e.node.threeJsObject[this._renderingEngine.id],g&&(v=g.visible,g.visible=!1))}c.updateShadowMap&&this._renderingEngine.renderer.shadowMap.enabled&&(this._renderingEngine.renderer.shadowMap.needsUpdate=!0),this._renderingEngine.sceneTreeManager.scene.background=this._renderingEngine.environmentMapAsBackground?this._renderingEngine.environmentMapLoader.environmentMap:null,this._renderingEngine.renderer.setClearColor(new o.Color(this._converter.toThreeJsColorInput(this._renderingEngine.clearColor)),this._renderingEngine.clearAlpha);const b=(this._renderingEngine.postProcessingManager.effects.length>0||this._renderingEngine.postProcessingManager.manualPostProcessing)&&!(!1===this._renderingEngine.postProcessingManager.enablePostProcessingOnMobile&&!0===this._systemInfo.isMobile);if(!0===c.softShadowRendering?(this.setShaderProperties(),b?this._renderingEngine.postProcessingManager.render(t,d):this._renderingEngine.renderer.render(this._renderingEngine.sceneTreeManager.scene,d),this._softShadowRenderingDurationActive>=this._renderingEngine.beautyRenderBlendingDuration?(this._eventEngine.emitEvent(f.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this.deactivateBeautyRenderShaders(),this._activeRendering=!1):this._softShadowRenderingDurationActive+=t):(b?this._renderingEngine.postProcessingManager.render(t,d):this._renderingEngine.renderer.render(this._renderingEngine.sceneTreeManager.scene,d),this._softShadowRenderingActive&&(this._eventEngine.emitEvent(f.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this.deactivateBeautyRenderShaders(),this._activeRendering=!1)),g&&(g.visible=v),!0===this._renderingEngine.materialLoader.sceneBackgroundNeedsUpdate){b&&(this._renderingEngine.renderer.setRenderTarget(this._hiddenRenderTarget),this._renderingEngine.renderer.render(this._renderingEngine.scene,this._hiddenCamera),this._renderingEngine.renderer.setRenderTarget(null)),this._renderingEngine.materialLoader.sceneBackgroundNeedsUpdate=!1;const e=this._renderingEngine.materialLoader.transformEnvMapRotationMatrix(),t=this._renderingEngine.materialLoader.transformEnvMapRotationMatrix(!0);this._renderingEngine.renderer.renderLists.get(this._renderingEngine.scene,0).opaque.forEach((i=>{"BackgroundCubeMaterial"===i.material.name?i.material.uniforms&&i.material.uniforms.envMapRotation&&(i.material.uniforms.envMapRotation={value:t}):i.material.uniforms&&i.material.uniforms.envMapRotation&&(i.material.uniforms.envMapRotation={value:e})}))}this._stats.end()}calculateSize(){let e=this._width,t=this._height;this._renderingEngine.automaticResizing&&(e=this._renderingEngine.canvas.parentNode.clientWidth,t=this._renderingEngine.canvas.parentNode.clientHeight);const i=e/t;let n=e,r=t;return(e>this._renderingEngine.maximumRenderingSize.width||t>this._renderingEngine.maximumRenderingSize.height)&&((e-this._renderingEngine.maximumRenderingSize.width)/i>t-this._renderingEngine.maximumRenderingSize.height?(n=this._renderingEngine.maximumRenderingSize.width,r=this._renderingEngine.maximumRenderingSize.width/i):(n=this._renderingEngine.maximumRenderingSize.height*i,r=this._renderingEngine.maximumRenderingSize.height)),{width:e,adjustedWidth:n,height:t,adjustedHeight:r}}deactivateBeautyRenderShaders(){this._softShadowRenderingTimeout=null,this._softShadowRenderingActive=!1,this._softShadowRenderingDurationActive=0,this._renderingEngine.renderer.shadowMap.type=o.PCFSoftShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,.1),this._renderingEngine.materialLoader.updateMaterials()}evaluateRenderingState(){let e=!1;this._renderingEngine.cameraEngine.camera&&!0===this._renderingEngine.show&&(e=!0);let t=!1;!0!==this._activeRendering&&!0!==this._cameraChanged&&!0!==this._sizeChanged&&!0!==this._runningAnimation&&!0!==this._continuousRendering||(t=!0);let i=!1;if(!0!==this._runningAnimation&&!0!==this._continuousShadowMapUpdate||(i=!0),this._renderingEngine.cameraEngine.camera){const t=this._renderingEngine.cameraEngine.camera;if(t.type===d.CAMERA_TYPE.PERSPECTIVE){const n=t.controls;if(!0===n.enableAutoRotation&&0!==n.autoRotationSpeed)return{showScene:e,rendering:!0,updateShadowMap:i,busyMode:this._renderingEngine.busy,softShadowRendering:!1}}}else t=!1;let n=!1;this._renderingEngine.busy&&(n=!0);let r=!1;return!0!==this._softShadowRenderingActive||!1!==n||!1!==this._continuousRendering||!this._renderingEngine.shadows&&this._systemInfo.isIOS||!1!==this._renderingEngine.usingSwiftShader||!1!==this._runningAnimation||this._renderingEngine.type===u.RENDERER_TYPE.ATTRIBUTES||(r=!0),{showScene:e,rendering:t,updateShadowMap:i,busyMode:n,softShadowRendering:r}}setShaderProperties(){if(!1===this._renderingEngine.softShadows)return this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,0),0;const e=Math.min(this._softShadowRenderingDurationActive,this._renderingEngine.beautyRenderBlendingDuration)/this._renderingEngine.beautyRenderBlendingDuration;if(e<.25){const t=e/.25;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,t)}else{const t=(e-.25)/.75;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart+(this._lightSizeUVEnd-this._lightSizeUVStart)*t,1)}return e}showStatistics(){if(this._renderingEngine.showStatistics)for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="";else for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="none"}startAndStopRendering(){this._activeRendering=!0,this.stopBeautyRenderCountdown(),this.startBeautyRenderCountdown()}startBeautyRenderCountdown(){this._softShadowRenderingTimeout=setTimeout((()=>{this._softShadowRenderingActive=!0,this._softShadowRenderingDurationActive=0,this.activateBeautyRenderShaders()}),this._renderingEngine.beautyRenderDelay)}startRendering(){this._activeRendering=!0,this.stopBeautyRenderCountdown()}stopBeautyRenderCountdown(){this._softShadowRenderingTimeout&&clearTimeout(this._softShadowRenderingTimeout),this.deactivateBeautyRenderShaders()}stopRendering(){this.startBeautyRenderCountdown()}toggleBusyMode(e){if(this._renderingEngine.branding.busyModeDisplay===u.BUSY_MODE_DISPLAY.BLUR)if(this._renderingEngine.htmlElementAnchorLoader.toggleBusyMode(e),e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._renderingEngine.renderer.domElement.style.filter="blur(3px)"}else this._renderingEngine.renderer.domElement.style.filter="";else this._renderingEngine.branding.busyModeDisplay===u.BUSY_MODE_DISPLAY.SPINNER&&(this._renderingEngine.spinnerDivElement.style.visibility=e?"visible":"hidden")}toggleLogo(e){this._renderingEngine.logoDivElement&&(this._renderingEngine.logoDivElement.style.display=e?"inherit":"none"),this._renderingEngine.canvas&&(this._renderingEngine.canvas.style.display=e?"none":"inherit")}}},6756:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTracingManager=void 0;const s=i(887),o=i(1990),l=i(8877),c=a(i(5232));t.SceneTracingManager=class{constructor(e){this._renderingEngine=e,this._raycaster=new c.Raycaster}convert3Dto2D(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.canvas.width,n=this._renderingEngine.canvas.height,r=this._renderingEngine.cameraEngine.camera;if(!r)throw new l.ShapeDiverViewerViewportError("SceneTracingManager.convert3Dto2D: No camera is defined for this viewer.");s.vec3.normalize(s.vec3.create(),s.vec3.subtract(s.vec3.create(),e,r.position));const a=new c.Vector3;a.set(e[0],e[1],e[2]),this._raycaster.ray.direction.copy(a),this._raycaster.ray.origin.set(0,0,0),r.threeJsObject[this._renderingEngine.id].localToWorld(this._raycaster.ray.origin),this._raycaster.ray.direction.sub(this._raycaster.ray.origin),this._raycaster.ray.direction.normalize();let o=Number.MAX_VALUE;this._renderingEngine.sceneTreeManager.scene.traverseVisible((e=>{if(e instanceof c.Mesh){let t=this._raycaster.intersectObject(e);t.length&&t[0].distance<o&&(o=t[0].distance)}}));const u=r.project(s.vec3.clone(e));return u[0]=u[0]*(i/2)+i/2,u[1]=-u[1]*(n/2)+n/2,u[0]=u[0]/devicePixelRatio,u[1]=u[1]/devicePixelRatio,{hidden:o+1e-4<s.vec3.distance(r.position,e),container:s.vec2.clone(u),client:s.vec2.fromValues(u[0]+t.left,u[1]+t.top),page:s.vec2.fromValues(u[0]+t.left+window.pageXOffset,u[1]+t.top+window.pageYOffset)}}init(){}mouseEventToRay(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.cameraEngine.camera;if(!i)throw new l.ShapeDiverViewerViewportError("SceneTracingManager.mouseEventToRay: No camera is defined for this viewer.");let n=(e.clientX-t.left)/t.width*2-1,r=-(e.clientY-t.top)/t.height*2+1,a=s.vec3.clone(i.position);return i instanceof o.OrthographicCamera&&(i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.right,r*i.top,0)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.left,r*i.top,0)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(0,n*i.left,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(0,n*i.right,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.right,0,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.left,0,r*i.top)))),{origin:a,direction:s.vec3.normalize(s.vec3.create(),s.vec3.sub(s.vec3.create(),i.unproject(s.vec3.fromValues(n,r,.5)),a))}}touchEventToRay(e){if(e.touches.length<1)throw new l.ShapeDiverViewerViewportError("SceneTracingManager.touchEventToRay: No touches in this event.");const t=e.changedTouches[0],i=this._renderingEngine.canvas.getBoundingClientRect(),n=this._renderingEngine.cameraEngine.camera;if(!n)throw new l.ShapeDiverViewerViewportError("SceneTracingManager.touchEventToRay: No camera is defined for this viewer.");let r=(t.clientX-i.left)/i.width*2-1,a=-(t.clientY-i.top)/i.height*2+1,c=s.vec3.clone(n.position);return n instanceof o.OrthographicCamera&&(n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(r*n.right,a*n.top,0)):n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(r*n.left,a*n.top,0)):n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(0,r*n.left,a*n.top)):n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(0,r*n.right,a*n.top)):n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(r*n.right,0,a*n.top)):n.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(c=s.vec3.add(s.vec3.create(),n.position,s.vec3.fromValues(r*n.left,0,a*n.top)))),{origin:c,direction:s.vec3.normalize(s.vec3.create(),s.vec3.sub(s.vec3.create(),n.unproject(s.vec3.fromValues(r,a,.5)),c))}}touchToRay(e){const t=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.cameraEngine.camera;if(!i)throw new l.ShapeDiverViewerViewportError("SceneTracingManager.touchToRay: No camera is defined for this viewer.");let n=(e.clientX-t.left)/t.width*2-1,r=-(e.clientY-t.top)/t.height*2+1,a=s.vec3.clone(i.position);return i instanceof o.OrthographicCamera&&(i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.right,r*i.top,0)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.left,r*i.top,0)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(0,n*i.left,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(0,n*i.right,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.right,0,r*i.top)):i.direction==o.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK&&(a=s.vec3.add(s.vec3.create(),i.position,s.vec3.fromValues(n*i.left,0,r*i.top)))),{origin:a,direction:s.vec3.normalize(s.vec3.create(),s.vec3.sub(s.vec3.create(),i.unproject(s.vec3.fromValues(n,r,.5)),a))}}}},4323:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SceneTreeManager=void 0;const s=a(i(5232)),o=i(1990),l=i(3490),c=i(7038),u=i(5174),h=i(2248),d=i(3858),f=i(887),p=i(1786),m=i(1422),g=i(9277),v=i(3757),b=i(8877);t.SceneTreeManager=class{constructor(e){this._renderingEngine=e,this._eventEngine=b.EventEngine.instance,this._inputValidator=b.InputValidator.instance,this._scene=new s.Scene,this._stateEngine=b.StateEngine.instance,this._tree=d.Tree.instance,this._boundingBox=new u.Box,this._boundingBoxSensitiveData=[],this._hiddenCamera=new s.PerspectiveCamera,this._lastRendererType=h.RENDERER_TYPE.STANDARD,this._lastRootVersion="",this._scene.background=new s.Color("#ffffff")}get boundingBox(){return this._boundingBox}get lastRendererType(){return this._lastRendererType}get lastRootVersion(){return this._lastRootVersion}get scene(){return this._scene}init(){}isEmpty(){return 0===this._boundingBox.min[0]&&0===this._boundingBox.min[1]&&0===this._boundingBox.min[2]&&0===this._boundingBox.max[0]&&0===this._boundingBox.max[1]&&0===this._boundingBox.max[2]||this._boundingBox.isEmpty()}updateData(e,t,i,n,r,a){let d=t.children.find((e=>e.SDid===i.id&&e.SDversion===i.version)),m=!1;switch(d||(m=!0,d=new p.SDData(i.id,i.version),t.add(d)),this._renderingEngine.type===h.RENDERER_TYPE.ATTRIBUTES&&this.injectAttributeData(e,i),!0){case i instanceof c.GeometryData:{d.SDtype=p.SD_DATA_TYPE.GEOMETRY,!1===n.transformationOnly&&this._renderingEngine.geometryLoader.load(i,d,m,a).clone();let t=new u.Box;if(a)t=i.primitive.computeBoundingBox(e.worldMatrix);else{const i=d.clone();i.applyTransformation(e.worldMatrix);const n=(new s.Box3).setFromObject(i,!0);t=new u.Box(f.vec3.fromValues(n.min.x,n.min.y,n.min.z),f.vec3.fromValues(n.max.x,n.max.y,n.max.z))}e.boundingBox.union(t),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new u.Box),e.boundingBoxViewport[this._renderingEngine.id].union(t)}break;case i instanceof v.ThreejsData:{d.SDtype=p.SD_DATA_TYPE.THREEJS,d.add(i.obj);const t=(new s.Box3).setFromObject(i.obj);e.boundingBox.union(new u.Box(f.vec3.fromValues(...t.min.toArray()),f.vec3.fromValues(...t.max.toArray()))),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new u.Box),e.boundingBoxViewport[this._renderingEngine.id].union(new u.Box(f.vec3.fromValues(...t.min.toArray()),f.vec3.fromValues(...t.max.toArray())))}break;case i instanceof c.AbstractMaterialData:d.SDtype=p.SD_DATA_TYPE.MATERIAL;break;case i instanceof l.AbstractLight:d.SDtype=p.SD_DATA_TYPE.LIGHT,!1===n.transformationOnly&&this._renderingEngine.lightLoader.load(i,d),i instanceof l.DirectionalLight&&!1===i.useNodeData&&this._boundingBoxSensitiveData.push({data:i,dataChild:d});break;case i instanceof o.AbstractCamera:d.SDtype=p.SD_DATA_TYPE.CAMERA,!1===n.transformationOnly&&this._renderingEngine.cameraManager.load(i,d);break;case i instanceof c.HTMLElementAnchorData:d.SDtype=p.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR,!1===n.transformationOnly&&this._renderingEngine.htmlElementAnchorLoader.load(e,i,r);break;case i instanceof c.AnimationData:d.SDtype=p.SD_DATA_TYPE.ANIMATION}}updateMorphWeights(e=this._tree.root,t=this._mainNode){if(e&&t){for(let i=0,n=e.data.length;i<n;i++)if(e.data[i]instanceof c.GeometryData){const n=e.data[i],r=t.children.find((e=>e.SDid===n.id&&e.SDversion===n.version));r&&r.traverse((e=>{(e instanceof s.Points||e instanceof s.LineSegments||e instanceof s.LineLoop||e instanceof s.Line||e instanceof s.Mesh)&&(e.morphTargetInfluences=n.morphWeights)}))}for(let i=0,n=e.children.length;i<n;i++){const n=e.children[i];if(!n)continue;const r=t.children.find((e=>e.SDid===n.id));r&&this.updateMorphWeights(n,r)}}}updateNode(e=this._tree.root,t=this._mainNode,i={transformationOnly:!1},n=!0,r){const a=t;if(e.boundingBox.reset(),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new u.Box),e.boundingBoxViewport[this._renderingEngine.id].reset(),!1===i.transformationOnly){const t=e.data.map((e=>e.id));a.children.filter((i=>{if(i instanceof p.SDData){if(t.includes(i.SDid)){const t=e.data.find((e=>e.id===i.SDid));return!(!t||t.version===i.SDversion)}return!0}return!1})).forEach((e=>{this.removeData(e),a.remove(e)}));const i=e.children.filter((e=>!e.excludeViewports.includes(this._renderingEngine.id))).map((e=>e.id));a.children.filter((t=>{if(t instanceof g.SDObject&&!(t instanceof p.SDData)){if(i.includes(t.SDid)){const i=e.children.find((e=>e.id===t.SDid));return!(!i||i.version===t.SDversion)}return!0}return!1})).forEach((e=>{e.traverse((e=>{e instanceof p.SDData&&this.removeData(e)})),a.remove(e)}))}if(!0===e.skinNode){const t=[];for(let i=0;i<e.bones.length;i++)t.push(this.getBone(e.bones[i]));const i=[];for(let t=0;t<e.boneInverses.length;t++)i.push((new s.Matrix4).fromArray(e.boneInverses[t]));r=new s.Skeleton(t,i)}const o=e.visible&&!e.excludeViewports.includes(this._renderingEngine.id)&&!(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)),l=n&&o;for(let t=0,n=e.data.length;t<n;t++)this.updateData(e,a,e.data[t],i,l,r);for(let t=0,n=e.children.length;t<n;t++){const n=e.children[t],s=a.children.find((e=>e.SDid===n.id));if(s)s.SDversion!==n.version?(this.updateNode(n,s,i,l,r),s.SDversion=n.version):this.updateNode(n,s,i,l,r);else{const t=e.data.find((e=>e instanceof c.BoneData))?new m.SDBone(n.id,n.version):new g.SDObject(n.id,n.version),s=n.threeJsObject[this._renderingEngine.id];n.threeJsObject[this._renderingEngine.id]=t,n.updateCallbackThreeJsObject&&n.updateCallbackThreeJsObject(t,s,this._renderingEngine.id),a.add(t),this.updateNode(n,t,i,l,r)}n.boundingBox.isEmpty()||e.boundingBox.union(n.boundingBox),n.boundingBoxViewport[this._renderingEngine.id]&&!n.boundingBoxViewport[this._renderingEngine.id].isEmpty()&&o&&e.boundingBoxViewport[this._renderingEngine.id].union(n.boundingBoxViewport[this._renderingEngine.id])}a.visible=e.visible&&!e.excludeViewports.includes(this._renderingEngine.id)&&!(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)),a.applyTransformation(e.nodeMatrix)}updateSceneTree(e){if(this._tree.root.version===this._lastRootVersion&&this._renderingEngine.type===h.RENDERER_TYPE.STANDARD)return;if(this._lastRootVersion=this._tree.root.version,this._lastRendererType=this._renderingEngine.type,this._renderingEngine.closed)return;const t=this._boundingBox.clone();if(this._boundingBox=new u.Box,this._renderingEngine.lightLoader.shadowMapCount=0,!this._mainNode){this._mainNode=new g.SDObject(e.id,e.version);const t=e.threeJsObject[this._renderingEngine.id];e.threeJsObject[this._renderingEngine.id]=this._mainNode,e.updateCallbackThreeJsObject&&e.updateCallbackThreeJsObject(this._mainNode,t,this._renderingEngine.id),this._scene.add(this._mainNode)}this._boundingBoxSensitiveData=[],this._currentSDTFOverview=this.createSDTFOverview(),this.updateNode(e,this._mainNode),this._boundingBox=e.boundingBoxViewport[this._renderingEngine.id].clone();for(let e=0;e<this._boundingBoxSensitiveData.length;e++)this._renderingEngine.lightLoader.adjustToBoundingBox(this._boundingBoxSensitiveData[e].data,this._boundingBoxSensitiveData[e].dataChild,this._boundingBox);this._boundingBox.min[0]===t.min[0]&&this._boundingBox.min[1]===t.min[1]&&this._boundingBox.min[2]===t.min[2]&&this._boundingBox.max[0]===t.max[0]&&this._boundingBox.max[1]===t.max[1]&&this._boundingBox.max[2]===t.max[2]||(this._stateEngine.renderingEngines[this._renderingEngine.id].boundingBoxCreated.resolved||this._boundingBox.isEmpty()||this._stateEngine.renderingEngines[this._renderingEngine.id].boundingBoxCreated.resolve(!0),this._eventEngine.emitEvent(b.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,{viewportId:this._renderingEngine.id,boundingBox:{min:f.vec3.clone(this._boundingBox.min),max:f.vec3.clone(this._boundingBox.max)}})),this._boundingBox.isEmpty()&&Object.values(this._stateEngine.sessionEngines).every((e=>!0===e.initialOutputsLoaded.resolved))&&this._eventEngine.emitEvent(b.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_EMPTY,{viewportId:this._renderingEngine.id}),this._renderingEngine.renderingManager.evaluateTextureUnitCount(this._renderingEngine.lightLoader.shadowMapCount+this._renderingEngine.materialLoader.maxMapCount);const i=this._renderingEngine.materialLoader.threeJsTextureCache;for(const e in i)0===i[e].usage?(i[e].texture.dispose(),delete i[e]):!1===i[e].initialized&&(this._renderingEngine.renderer.initTexture(i[e].texture),i[e].initialized=!0);this._renderingEngine.renderer.compile(this._renderingEngine.scene,this._hiddenCamera)}collectSDTFItemData(e){for(let t=0,i=e.data.length;t<i;t++)if(e.data[t]instanceof c.SDTFItemData)return e.data[t];if(e.parent)return this.collectSDTFItemData(e.parent)}createSDTFOverview(e=this._tree.root){const t=new c.SDTFOverviewData({});for(let i=0,n=e.data.length;i<n;i++)e.data[i]instanceof c.SDTFOverviewData&&t.merge(e.data[i]);for(let i=0,n=e.children.length;i<n;i++)t.merge(new c.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return t.overview}getBone(e){let t;return this._mainNode.traverse((i=>{i.SDid===e.id&&(t=i)})),t}injectAttributeData(e,t){const i=this.collectSDTFItemData(e),n={material:new c.MaterialStandardData({color:this._renderingEngine.defaultMaterialColor,opacity:1}),matrix:f.mat4.create()};if(this._renderingEngine.visualizeAttributes){const e=this._renderingEngine.visualizeAttributes(this._currentSDTFOverview,i);this._inputValidator.validateAndError("Viewer.visualizeAttributes",e,"object",!0),this._inputValidator.validateAndError("Viewer.visualizeAttributes",e.matrix,"mat4",!0),n.material=e.material,n.matrix=e.matrix}e.addTransformation({id:"sdtf",matrix:n.matrix}),t instanceof c.GeometryData&&(t.attributeMaterial=n.material)}removeData(e){if(!0!==e.userData.removed)switch(e.userData.removed=!0,!0){case e.SDtype===p.SD_DATA_TYPE.GEOMETRY:e.traverse((t=>{if((e.id===t.id||!0!==t.userData.removed)&&(t.userData.removed=!0,t instanceof s.Mesh)){this.scene.remove(t),this._renderingEngine.geometryLoader.removeFromGeometryCache(t.geometry.userData.SDid+"_"+t.geometry.userData.SDversion),this._renderingEngine.geometryLoader.removeFromPrimitiveCache(t.geometry.userData.primitiveSDid+"_"+t.geometry.userData.primitiveSDversion),this._renderingEngine.materialLoader.removeFromMaterialCache(t.material.userData.SDid+"_"+t.material.userData.SDversion);const e=[];for(const i in t.material)t.material[i]instanceof s.Texture&&(t.material[i].name=i,"envMap"!==i&&(e.includes(t.material[i])||e.push(t.material[i])));for(const i of e)i.userData.cacheKey?this._renderingEngine.materialLoader.threeJsTextureCache[i.userData.cacheKey].usage--:"sphericalNormalMap"===i.name?(this._renderingEngine.geometryLoader.removeFromGemSphericalMapsCache(t.geometry.userData.primitiveSDid+"_"+t.geometry.userData.primitiveSDversion),i.dispose()):i.dispose()}}));break;case e.SDtype===p.SD_DATA_TYPE.THREEJS:case e.SDtype===p.SD_DATA_TYPE.MATERIAL:break;case e.SDtype===p.SD_DATA_TYPE.LIGHT:e.traverse((e=>{e instanceof s.Light&&e.dispose()}));break;case e.SDtype===p.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR:this._renderingEngine.htmlElementAnchorLoader.removeData(e.SDid,e.SDversion);case e.SDtype===p.SD_DATA_TYPE.ANIMATION:}}}},199:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GodRaysManager=void 0;const s=a(i(5232));t.GodRaysManager=class{constructor(e){this._renderingEngine=e,this._lightSource=null}removeLightSource(){this._godRaysEffect.lightSource=new s.Mesh}setEffect(e){this._godRaysEffect=e,this._godRaysEffect.lightSource=this._lightSource}setLightSource(e){this._lightSource=null,e.threeJsObject[this._renderingEngine.id].traverse((e=>{(e instanceof s.Mesh||e instanceof s.Points)&&(this._lightSource=e)})),this._lightSource&&(Array.isArray(this._lightSource.material)?(this._lightSource.material.forEach((e=>e.transparent=!0)),this._lightSource.material.forEach((e=>e.depthWrite=!1))):(this._lightSource.material.transparent=!0,this._lightSource.material.depthWrite=!1)),this._godRaysEffect.lightSource=this._lightSource}}},2207:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OutlineManager=void 0;const s=a(i(5232));t.OutlineManager=class{constructor(e){this._renderingEngine=e,this._outlineNodes=[]}addSelection(e){this._outlineNodes.push(e),this.updateOutlineEffectObjects()}clearSelection(){this._outlineNodes=[],this.updateOutlineEffectObjects()}removeSelection(e){const t=this._outlineNodes.indexOf(e);return-1!==t&&this._outlineNodes.splice(t,1),this.updateOutlineEffectObjects(),-1!==t}setEffect(e){this._outlineEffect=e,this.updateOutlineEffectObjects()}updateOutlineEffectObjects(){this._outlineEffect.selection.clear();for(let e=0;e<this._outlineNodes.length;e++)this._outlineNodes[e].threeJsObject[this._renderingEngine.id].traverse((e=>{e instanceof s.Mesh&&this._outlineEffect.selection.add(e)}))}}},4520:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SSAARenderPass=void 0;const n=i(1704),r=i(5232),a=i(3808),s=i(7800),o=i(7923);let l=null;class c extends n.Pass{constructor(e,t){super("SSAARenderPass",e,t),this._clearColor=new r.Color,this._oldClearColor=new r.Color,this._sampleLevel=2,this._unbiased=!0,this.needsSwap=!1,this._sampleRenderTarget=new r.WebGLRenderTarget(1,1,{type:r.HalfFloatType}),this._sampleRenderTarget.texture.name="SSAARender.Target",this._sampleRenderTarget.texture.colorSpace=r.SRGBColorSpace;const i=a.CopyShader;this._copyUniforms=r.UniformsUtils.clone(i.uniforms),this._ssaaCopyMaterial=new r.ShaderMaterial({uniforms:this._copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:r.CustomBlending,blendEquation:r.AddEquation,blendDst:r.OneFactor,blendDstAlpha:r.OneFactor,blendSrc:r.SrcAlphaFactor,blendSrcAlpha:r.OneFactor}),this._fsQuad=new s.FullScreenQuad(this._ssaaCopyMaterial),this._copyMaterial=new o.CopyMaterial,this._fullScreen=new r.Mesh((()=>{if(null===l){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);l=new r.BufferGeometry,l.setAttribute("position",new r.BufferAttribute(e,3)),l.setAttribute("uv",new r.BufferAttribute(t,2))}return l})(),this._copyMaterial),this._fullScreen.frustumCulled=!1,this._clearPass=new n.ClearPass(!0,!0,!1)}set mainCamera(e){this.camera=e}set mainScene(e){this.scene=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e}get sampleLevel(){return this._sampleLevel}set sampleLevel(e){this._sampleLevel=e}set unbiased(e){this._unbiased=e}dispose(){this._sampleRenderTarget.dispose(),this._ssaaCopyMaterial.dispose(),this._fsQuad.dispose()}render(e,t,i,n,a){this._clearColor=e.getClearColor(new r.Color),this._clearAlpha=e.getClearAlpha(),this._sampleRenderTarget.texture.colorSpace=e.outputColorSpace;const s=u[Math.max(0,Math.min(this._sampleLevel,5))],o=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const l=e.getClearAlpha(),c=1/s.length;this._copyUniforms.tDiffuse.value=this._sampleRenderTarget.texture;const h={fullWidth:t.width,fullHeight:t.height,offsetX:0,offsetY:0,width:t.width,height:t.height},d=Object.assign({},this.camera.view);d.enabled&&Object.assign(h,d);for(let t=0;t<s.length;t++){const n=s[t];this.camera.setViewOffset&&this.camera.setViewOffset(h.fullWidth,h.fullHeight,h.offsetX+.0625*n[0],h.offsetY+.0625*n[1],h.width,h.height);let r=c;this._unbiased&&(r+=.03125*((t+.5)/s.length-.5)),e.setClearColor(this._clearColor,this._clearAlpha),e.setRenderTarget(this._sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:i),0===t&&(e.setClearColor(0,0),e.clear()),this._copyUniforms.opacity.value=r,this._fsQuad.render(e)}this._clearPass.render(e,t,t),this._copyMaterial.uniforms.inputBuffer.value=i.texture,this._copyMaterial.uniforms.opacity.value=1,e.setRenderTarget(this.renderToScreen?null:t),this.scene.add(this._fullScreen),e.render(this.scene,this.camera),this.scene.remove(this._fullScreen),this.camera.setViewOffset&&d.enabled?this.camera.setViewOffset(d.fullWidth,d.fullHeight,d.offsetX,d.offsetY,d.width,d.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=o,e.setClearColor(this._oldClearColor,l)}setSize(e,t){this._sampleRenderTarget.setSize(e,t)}}t.SSAARenderPass=c;const u=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},5479:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectiveBloomManager=void 0;const s=a(i(5232));t.SelectiveBloomManager=class{constructor(e){this._renderingEngine=e,this._selectiveBloomNodes=[]}addSelection(e){this._selectiveBloomNodes.push(e),this.updateSelectiveBloomEffectObjects()}clearSelection(){this._selectiveBloomNodes=[],this.updateSelectiveBloomEffectObjects()}removeSelection(e){const t=this._selectiveBloomNodes.indexOf(e);return-1!==t&&this._selectiveBloomNodes.splice(t,1),this.updateSelectiveBloomEffectObjects(),-1!==t}setEffect(e){this._selectiveBloomEffect=e,this.updateSelectiveBloomEffectObjects()}updateSelectiveBloomEffectObjects(){this._selectiveBloomEffect.selection.clear();for(let e=0;e<this._selectiveBloomNodes.length;e++)this._selectiveBloomNodes[e].threeJsObject[this._renderingEngine.id].traverse((e=>{e instanceof s.Mesh&&this._selectiveBloomEffect.selection.add(e)}))}}},5020:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AOEffect=void 0;const n=i(1704),r=i(5232),a=i(1885),s=i(3143),o=i(4252),l=Object.assign({resolutionScale:1,spp:8,distancePower:1,power:2,bias:40,thickness:.075,color:new r.Color("black"),useNormalPass:!1,velocityDepthNormalPass:null},a.PoissionDenoisePass.DefaultOptions);class c extends n.Effect{constructor(e,t,i,n,c=l){var u,h;super("AOEffect",s.ao_compose,{uniforms:new Map([["inputTexture",new r.Uniform(null)],["depthTexture",new r.Uniform(null)],["power",new r.Uniform(0)],["color",new r.Uniform(new r.Color("black"))]])}),this.lastSize={width:0,height:0,resolutionScale:0},this.resolutionScale=1,this.composer=e,this.aoPass=n,c=Object.assign(Object.assign({},l),c),this.normalPass=new o.NormalPass(i,t);const d=null!==(u=c.normalTexture)&&void 0!==u?u:null===(h=this.normalPass)||void 0===h?void 0:h.texture;this.aoPass.fullscreenMaterial.uniforms.normalTexture.value=d,this.aoPass.fullscreenMaterial.defines.useNormalTexture="",this.aoPass.fullscreenMaterial.uniforms.depthTexture.value=this.normalPass.depthTexture,this.uniforms.get("depthTexture").value=this.normalPass.depthTexture,this.poissionDenoisePass=new a.PoissionDenoisePass(t,this.aoPass.texture,this.normalPass.depthTexture),this.makeOptionsReactive(c)}makeOptionsReactive(e){for(const t of Object.keys(e))Object.defineProperty(this,t,{get:()=>e[t],set(i){if(null!=i)switch(e[t]=i,t){case"spp":this.aoPass.fullscreenMaterial.defines.spp=i.toFixed(0),this.aoPass.fullscreenMaterial.needsUpdate=!0;break;case"distance":this.aoPass.fullscreenMaterial.uniforms.aoDistance.value=i,this.poissionDenoisePass.fullscreenMaterial.uniforms.distance.value=Math.max(i,1e-4);break;case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"power":this.uniforms.get("power").value=i;break;case"color":this.uniforms.get("color").value.copy(new r.Color(i));break;case"iterations":case"radius":case"rings":case"samples":this.poissionDenoisePass[t]=i;break;case"lumaPhi":case"depthPhi":case"normalPhi":this.poissionDenoisePass.fullscreenMaterial.uniforms[t].value=Math.max(i,1e-4);break;default:t in this.aoPass.fullscreenMaterial.uniforms&&(this.aoPass.fullscreenMaterial.uniforms[t].value=i)}},configurable:!0}),this[t]=e[t]}setSize(e,t){var i;void 0!==e&&void 0!==t&&(e===this.lastSize.width&&t===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale||(null===(i=this.normalPass)||void 0===i||i.setSize(e,t),this.aoPass.setSize(e*this.resolutionScale,t*this.resolutionScale),this.poissionDenoisePass.setSize(e,t),this.lastSize={width:e,height:t,resolutionScale:this.resolutionScale}))}update(e){var t;"animatedNoise"in this.aoPass.fullscreenMaterial.defines&&(delete this.aoPass.fullscreenMaterial.defines.animatedNoise,this.aoPass.fullscreenMaterial.needsUpdate=!0),this.poissionDenoisePass.iterations>0?this.uniforms.get("inputTexture").value=this.poissionDenoisePass.texture:this.uniforms.get("inputTexture").value=this.aoPass.texture,null===(t=this.normalPass)||void 0===t||t.render(e),this.aoPass.render(e),this.poissionDenoisePass.render(e)}}t.AOEffect=c,c.DefaultOptions=l},331:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AOPass=void 0;const n=i(1704),r=i(5232),a=i(6605),s=i(2726),o=i(1885);class l extends n.Pass{constructor(e,t,i){super(),this._camera=e,this._scene=t,this.renderTarget=new r.WebGLRenderTarget(1,1,{type:r.HalfFloatType,depthBuffer:!1});const n=i.replace("#include <sampleBlueNoise>",s.sampleBlueNoise);this.fullscreenMaterial=new r.ShaderMaterial({fragmentShader:n,vertexShader:a.basic,uniforms:{depthTexture:{value:null},normalTexture:{value:null},cameraNear:{value:0},cameraFar:{value:0},viewMatrix:{value:this._camera.matrixWorldInverse},projectionViewMatrix:{value:new r.Matrix4},projectionMatrixInverse:{value:this._camera.projectionMatrixInverse},cameraMatrixWorld:{value:this._camera.matrixWorld},texSize:{value:new r.Vector2},blueNoiseTexture:{value:null},blueNoiseRepeat:{value:new r.Vector2},aoDistance:{value:0},distancePower:{value:0},bias:{value:0},thickness:{value:0},power:{value:0},frame:{value:0}},blending:r.NoBlending,depthWrite:!1,depthTest:!1,toneMapped:!1}),this.fullscreenMaterial.uniforms.blueNoiseTexture.value=o.PoissionDenoisePass.blueNoiseTexture}get texture(){return this.renderTarget.texture}render(e){const t=+this.fullscreenMaterial.defines.spp;this.fullscreenMaterial.uniforms.frame.value=(this.fullscreenMaterial.uniforms.frame.value+t)%65536,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.projectionViewMatrix.value.multiplyMatrices(this._camera.projectionMatrix,this._camera.matrixWorldInverse);const i=this.fullscreenMaterial.uniforms.blueNoiseTexture.value;if(i){const{width:e,height:t}=i.source.data;this.fullscreenMaterial.uniforms.blueNoiseRepeat.value.set(this.renderTarget.width/e,this.renderTarget.height/t)}e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.renderTarget.setSize(e,t),this.fullscreenMaterial.uniforms.texSize.value.set(this.renderTarget.width,this.renderTarget.height)}}t.AOPass=l},3143:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ao_compose=void 0,t.ao_compose="\nuniform sampler2D inputTexture;\nuniform highp sampler2D depthTexture;\nuniform float power;\nuniform vec3 color;\n\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\n    float unpackedDepth = textureLod(depthTexture, uv, 0.).r;\n\n    float ao = unpackedDepth > 0.9999 ? 1.0 : textureLod(inputTexture, uv, 0.0).a;\n    ao = pow(ao, power);\n\n    vec3 aoColor = mix(color, vec3(1.), ao);\n\n    aoColor *= inputColor.rgb;\n\n    outputColor = vec4(aoColor, inputColor.a);\n}\n"},368:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HBAOEffect=void 0;const n=i(5020),r=i(331),a=i(4135),s=i(7345),o=a.hbao.replace("#include <hbao_utils>",s.hbao_utils);class l extends r.AOPass{constructor(e,t){super(e,t,o)}}class c extends n.AOEffect{constructor(e,t,i,r=n.AOEffect.DefaultOptions){super(e,t,i,new l(t,i),Object.assign(Object.assign(Object.assign({},n.AOEffect.DefaultOptions),c.DefaultOptions),r)),this.lastSize={width:0,height:0,resolutionScale:0}}}t.HBAOEffect=c},4135:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hbao=void 0,t.hbao="\nvarying vec2 vUv;\n\nuniform highp sampler2D depthTexture;\n\nuniform mat4 projectionViewMatrix;\nuniform int frame;\n\nuniform sampler2D blueNoiseTexture;\nuniform vec2 blueNoiseRepeat;\nuniform vec2 texSize;\n\nuniform float aoDistance;\nuniform float distancePower;\nuniform float bias;\nuniform float thickness;\n\n#include <packing>\n// HBAO Utils\n#include <hbao_utils>\n\nfloat getOcclusion(const vec3 cameraPosition, const vec3 worldPos, const vec3 worldNormal, const float depth, const int seed, inout float totalWeight) {\n    vec4 blueNoise = sampleBlueNoise(blueNoiseTexture, seed, blueNoiseRepeat, texSize);\n\n    vec3 sampleWorldDir = cosineSampleHemisphere(worldNormal, blueNoise.rg);\n\n    vec3 sampleWorldPos = worldPos + aoDistance * pow(blueNoise.b, distancePower + 1.0) * sampleWorldDir;\n\n    // Project the sample position to screen space\n    vec4 sampleUv = projectionViewMatrix * vec4(sampleWorldPos, 1.);\n    sampleUv.xy /= sampleUv.w;\n    sampleUv.xy = sampleUv.xy * 0.5 + 0.5;\n\n    // Get the depth of the sample position\n    float sampleDepth = textureLod(depthTexture, sampleUv.xy, 0.0).r;\n\n    // Compute the horizon line\n    float deltaDepth = depth - sampleDepth;\n\n    // distance based bias\n    float d = distance(sampleWorldPos, cameraPosition) / aoDistance;\n    deltaDepth *= 0.001 * d * d;\n\n    float th = thickness * 0.01;\n\n    float theta = dot(worldNormal, sampleWorldDir);\n    totalWeight += theta;\n\n    if (deltaDepth < th) {\n        float horizon = sampleDepth + deltaDepth * bias * 1000.;\n\n        float occlusion = max(0.0, horizon - depth) * theta;\n\n        float m = max(0., 1. - deltaDepth / th);\n        occlusion = 10. * occlusion * m / d;\n\n        occlusion = max(0.0, occlusion);\n        occlusion = sqrt(occlusion);\n        return occlusion;\n    }\n\n    return 0.;\n}\n\nvoid main() {\n    float depth = textureLod(depthTexture, vUv, 0.0).r;\n\n    // filter out background\n    if (depth == 1.0) {\n        discard;\n        return;\n    }\n\n    vec4 cameraPosition = cameraMatrixWorld * vec4(0.0, 0.0, 0.0, 1.0);\n\n    vec3 worldPos = getWorldPos(depth, vUv);\n    vec3 worldNormal = getWorldNormal(vUv);\n\n    float ao = 0.0, totalWeight = 0.0;\n\n    for (int i = 0; i < spp; i++) {\n        int seed = i;\n#ifdef animatedNoise\n        seed += frame;\n#endif\n\n        float occlusion = getOcclusion(cameraPosition.xyz, worldPos, worldNormal, depth, seed, totalWeight);\n        ao += occlusion;\n    }\n\n    if (totalWeight > 0.) ao /= totalWeight;\n\n    // clamp ao to [0, 1]\n    ao = clamp(1. - ao, 0., 1.);\n\n    gl_FragColor = vec4(worldNormal, ao);\n}\n"},7345:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hbao_utils=void 0,t.hbao_utils="\n#include <sampleBlueNoise>\n\nuniform sampler2D normalTexture;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform mat4 projectionMatrixInverse;\nuniform mat4 cameraMatrixWorld;\n\n// source: https://github.com/mrdoob/three.js/blob/342946c8392639028da439b6dc0597e58209c696/examples/js/shaders/SAOShader.js#L123\nfloat getViewZ(const float depth) {\n#ifdef PERSPECTIVE_CAMERA\n    return perspectiveDepthToViewZ(depth, cameraNear, cameraFar);\n#else\n    return orthographicDepthToViewZ(depth, cameraNear, cameraFar);\n#endif\n}\n\n// source: https://github.com/N8python/ssao/blob/master/EffectShader.js#L52\nvec3 getWorldPos(const float depth, const vec2 coord) {\n    float z = depth * 2.0 - 1.0;\n    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;\n\n    // Perspective division\n    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;\n    worldSpacePosition.xyz /= worldSpacePosition.w;\n\n    return worldSpacePosition.xyz;\n}\n\nvec3 slerp(const vec3 a, const vec3 b, const float t) {\n    float cosAngle = dot(a, b);\n    float angle = acos(cosAngle);\n\n    if (abs(angle) < 0.001) {\n        return mix(a, b, t);\n    }\n\n    float sinAngle = sin(angle);\n    float t1 = sin((1.0 - t) * angle) / sinAngle;\n    float t2 = sin(t * angle) / sinAngle;\n\n    return (a * t1) + (b * t2);\n}\n\nvec3 computeWorldNormal() {\n    vec2 size = vec2(textureSize(depthTexture, 0));\n    ivec2 p = ivec2(vUv * size);\n    float c0 = texelFetch(depthTexture, p, 0).x;\n    float l2 = texelFetch(depthTexture, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(depthTexture, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(depthTexture, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(depthTexture, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(depthTexture, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(depthTexture, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(depthTexture, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(depthTexture, p + ivec2(0, 2), 0).x;\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / size.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / size.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / size.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / size.y))).xyz;\n    return normalize(cross(dpdx, dpdy));\n}\n\nvec3 getWorldNormal(const vec2 uv) {\n#ifdef useNormalTexture\n    vec3 worldNormal = unpackRGBToNormal(textureLod(normalTexture, uv, 0.).rgb);\n\n    worldNormal = (vec4(worldNormal, 1.) * viewMatrix).xyz;  // view-space to world-space\n    return normalize(worldNormal);\n#else\n    return computeWorldNormal();  // compute world normal from depth\n#endif\n}\n\n#define PI 3.14159265358979323846264338327950288\n\n// source: https://www.shadertoy.com/view/cll3R4\nvec3 cosineSampleHemisphere(const vec3 n, const vec2 u) {\n    float r = sqrt(u.x);\n    float theta = 2.0 * PI * u.y;\n\n    vec3 b = normalize(cross(n, vec3(0.0, 1.0, 1.0)));\n    vec3 t = cross(b, n);\n\n    return normalize(r * sin(theta) * b + sqrt(1.0 - u.x) * n + r * cos(theta) * t);\n}\n\n"},1885:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PoissionDenoisePass=void 0;const n=i(1704),r=i(5232),a=i(6605),s=i(2726),o=i(1551).poissionDenoise.replace("#include <sampleBlueNoise>",s.sampleBlueNoise),l={iterations:1,radius:8,rings:5.625,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16,distance:1,normalTexture:null};class c extends n.Pass{constructor(e,t,i,n=l){super("PoissionBlurPass"),this.index=0,this.iterations=l.iterations,this.radius=8,this.rings=5.625,this.samples=16,n=Object.assign(Object.assign({},l),n),this.inputTexture=t,this.fullscreenMaterial=new r.ShaderMaterial({fragmentShader:o,vertexShader:a.basic,uniforms:{depthTexture:{value:null},inputTexture:{value:null},projectionMatrixInverse:{value:new r.Matrix4},cameraMatrixWorld:{value:new r.Matrix4},lumaPhi:{value:5},depthPhi:{value:5},normalPhi:{value:5},distance:{value:1},resolution:{value:new r.Vector2},blueNoiseTexture:{value:null},index:{value:0},blueNoiseRepeat:{value:new r.Vector2}}});const s={type:r.HalfFloatType,depthBuffer:!1};this.renderTargetA=new r.WebGLRenderTarget(1,1,s),this.renderTargetB=new r.WebGLRenderTarget(1,1,s);const{uniforms:u}=this.fullscreenMaterial;u.inputTexture.value=this.inputTexture,u.depthTexture.value=i,u.projectionMatrixInverse.value=e.projectionMatrixInverse,u.cameraMatrixWorld.value=e.matrixWorld,u.depthPhi.value=n.depthPhi,u.normalPhi.value=n.normalPhi,u.distance.value=n.distance,n.normalTexture?u.normalTexture={value:n.normalTexture}:this.fullscreenMaterial.defines.NORMAL_IN_RGB="";for(const e of["radius","rings","samples"])Object.defineProperty(this,e,{get:()=>n[e],set:t=>{n[e]=t,this.setSize(this.renderTargetA.width,this.renderTargetA.height)}});this.fullscreenMaterial.uniforms.blueNoiseTexture.value=c.blueNoiseTexture}get texture(){return this.renderTargetB.texture}generateDenoiseSamples(e,t,i,n){const a=2*Math.PI*t/e,s=1/e,o=s,l=[];let c=s,u=0;for(let t=0;t<e;t++){const e=new r.Vector2(Math.cos(u),Math.sin(u)).multiplyScalar(Math.pow(c,.75)).multiply(n).multiplyScalar(i);(isNaN(e.x)||e.x===1/0||e.x===-1/0)&&(e.x=0),(isNaN(e.y)||e.y===1/0||e.y===-1/0)&&(e.y=0),l.push(e),c+=o,u+=a}return l}generatePoissonDiskConstant(e){const t=e.length;let i="const vec2 poissonDisk[samples] = vec2[samples](\n";for(let n=0;n<t;n++){const r=e[n];i+=`    vec2(${r.x}, ${r.y})`,n<t-1&&(i+=","),i+="\n"}return i+=");",i}render(e){this.fullscreenMaterial.uniforms.index.value=0;const t=this.fullscreenMaterial.uniforms.blueNoiseTexture.value;if(t){const{width:e,height:i}=t.source.data;this.fullscreenMaterial.uniforms.blueNoiseRepeat.value.set(this.renderTargetA.width/e,this.renderTargetA.height/i)}for(let t=0;t<2*this.iterations;t++){const i=t%2==0,n=i?this.renderTargetB:this.renderTargetA;this.fullscreenMaterial.uniforms.inputTexture.value=0===t?this.inputTexture:n.texture;const r=i?this.renderTargetA:this.renderTargetB;e.setRenderTarget(r),e.render(this.scene,this.camera),this.fullscreenMaterial.uniforms.index.value=(this.fullscreenMaterial.uniforms.index.value+1)%4}}setSize(e,t){this.renderTargetA.setSize(e,t),this.renderTargetB.setSize(e,t),this.fullscreenMaterial.uniforms.resolution.value.set(e,t);const i=this.generateDenoiseSamples(this.samples,this.rings,this.radius,new r.Vector2(1/e,1/t)),n=`const int samples = ${this.samples};\n`,a=this.generatePoissonDiskConstant(i);this.fullscreenMaterial.fragmentShader=n+a+"\n"+o,this.fullscreenMaterial.needsUpdate=!0}}t.PoissionDenoisePass=c,c.DefaultOptions=l,c.blueNoiseTexture=(new r.TextureLoader).load("https://viewer.shapediver.com/v3/graphics/LDR_RGBA_0.png",(e=>{e.minFilter=r.NearestFilter,e.magFilter=r.NearestFilter,e.wrapS=r.RepeatWrapping,e.wrapT=r.RepeatWrapping,e.colorSpace=r.NoColorSpace}))},1551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.poissionDenoise=void 0,t.poissionDenoise="\nvarying vec2 vUv;\n\nuniform sampler2D inputTexture;\nuniform highp sampler2D depthTexture;\nuniform sampler2D normalTexture;\nuniform mat4 projectionMatrixInverse;\nuniform mat4 cameraMatrixWorld;\nuniform float lumaPhi;\nuniform float depthPhi;\nuniform float normalPhi;\nuniform float distance;\nuniform sampler2D blueNoiseTexture;\nuniform vec2 blueNoiseRepeat;\nuniform int index;\nuniform vec2 resolution;\n\n#include <common>\n#include <sampleBlueNoise>\n\nvec3 getWorldPos(float depth, vec2 coord) {\n    float z = depth * 2.0 - 1.0;\n    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;\n\n    // Perspective division\n    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;\n    worldSpacePosition.xyz /= worldSpacePosition.w;\n    return worldSpacePosition.xyz;\n}\n\n#define luminance(a) dot(vec3(0.2125, 0.7154, 0.0721), a)\n\nvec3 getNormal(vec2 uv, vec4 texel) {\n#ifdef NORMAL_IN_RGB\n    // in case the normal is stored in the RGB channels of the texture\n    return texel.rgb;\n#else\n    return normalize(textureLod(normalTexture, uv, 0.).xyz * 2.0 - 1.0);\n#endif\n}\n\nfloat distToPlane(const vec3 worldPos, const vec3 neighborWorldPos, const vec3 worldNormal) {\n    vec3 toCurrent = worldPos - neighborWorldPos;\n    float distToPlane = abs(dot(toCurrent, worldNormal));\n\n    return distToPlane;\n}\n\nvoid main() {\n    vec4 depthTexel = textureLod(depthTexture, vUv, 0.);\n\n    if (depthTexel.r == 1.0 || dot(depthTexel.rgb, depthTexel.rgb) == 0.) {\n        discard;\n        return;\n    }\n\n    vec4 texel = textureLod(inputTexture, vUv, 0.0);\n\n    vec3 normal = getNormal(vUv, texel);\n\n#ifdef NORMAL_IN_RGB\n    float denoised = texel.a;\n    float center = texel.a;\n#else\n    vec3 denoised = texel.rgb;\n    vec3 center = texel.rgb;\n#endif\n\n    float depth = depthTexel.x;\n    vec3 worldPos = getWorldPos(depth, vUv);\n\n    float totalWeight = 1.0;\n\n    vec4 blueNoise = sampleBlueNoise(blueNoiseTexture, 0, blueNoiseRepeat, resolution);\n    float angle = blueNoise[index];\n\n    float s = sin(angle), c = cos(angle);\n\n    mat2 rotationMatrix = mat2(c, -s, s, c);\n\n    for (int i = 0; i < samples; i++) {\n        vec2 offset = rotationMatrix * poissonDisk[i];\n        vec2 neighborUv = vUv + offset;\n\n        vec4 neighborTexel = textureLod(inputTexture, neighborUv, 0.0);\n\n        vec3 neighborNormal = getNormal(neighborUv, neighborTexel);\n#ifdef NORMAL_IN_RGB\n        float neighborColor = neighborTexel.a;\n#else\n        vec3 neighborColor = neighborTexel.rgb;\n#endif\n\n        float sampleDepth = textureLod(depthTexture, neighborUv, 0.0).x;\n\n        vec3 worldPosSample = getWorldPos(sampleDepth, neighborUv);\n        float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));\n\n        float normalDiff = dot(normal, neighborNormal);\n        float normalSimilarity = pow(max(normalDiff, 0.), normalPhi);\n\n#ifdef NORMAL_IN_RGB\n        float lumaDiff = abs(neighborColor - center);\n#else\n        float lumaDiff = abs(luminance(neighborColor) - luminance(center));\n#endif\n        float lumaSimilarity = max(1.0 - lumaDiff / lumaPhi, 0.0);\n\n        float depthDiff = 1. - (distToPlane(worldPos, worldPosSample, normal) / distance);\n        float depthSimilarity = max(depthDiff / depthPhi, 0.);\n\n        float w = lumaSimilarity * depthSimilarity * normalSimilarity;\n\n        denoised += w * neighborColor;\n        totalWeight += w;\n    }\n\n    if (totalWeight > 0.) denoised /= totalWeight;\n\n#ifdef NORMAL_IN_RGB\n    gl_FragColor = vec4(normal, denoised);\n#else\n    gl_FragColor = vec4(denoised, 1.);\n#endif\n}\n"},754:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SSAOEffect=void 0;const n=i(5232),r=i(5020),a=i(331),s=i(4891);class o extends a.AOPass{constructor(e,t){super(e,t,s.ssao)}}class l extends r.AOEffect{constructor(e,t,i,n){super(e,t,i,new o(t,i),n),this.spp=16,l.DefaultOptions=Object.assign(Object.assign({},r.AOEffect.DefaultOptions),{spp:16,distance:1,distancePower:.25,power:2}),n=Object.assign(Object.assign({},l.DefaultOptions),n)}getPointsOnSphere(e){const t=[],i=Math.PI*(3-Math.sqrt(5)),r=2/e;for(let a=0;a<e;a++){const e=a*r-1+r/2,s=Math.sqrt(1-e*e),o=a*i;t.push(new n.Vector3(Math.cos(o)*s,e,Math.sin(o)*s))}return t}makeOptionsReactive(e){super.makeOptionsReactive(e);for(const t of["spp"])Object.defineProperty(this,t,{get:()=>e[t],set(i){if(null!=i)switch(e[t]=i,t){case"spp":{this.aoPass.fullscreenMaterial.defines.spp=i.toFixed(0);const e=this.getPointsOnSphere(i),t=[];for(let e=0;e<i;e++)t.push((e+1)/i);this.aoPass.fullscreenMaterial.uniforms.samples={value:e},this.aoPass.fullscreenMaterial.uniforms.samplesR={value:t},this.aoPass.fullscreenMaterial.needsUpdate=!0;break}}},configurable:!0});this.spp=e.spp}}t.SSAOEffect=l},4891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ssao=void 0,t.ssao="\nvarying vec2 vUv;\n\nuniform highp sampler2D depthTexture;\nuniform sampler2D normalTexture;\nuniform mat4 projectionViewMatrix;\nuniform mat4 cameraMatrixWorld;\n\nuniform sampler2D blueNoiseTexture;\nuniform vec2 blueNoiseRepeat;\nuniform vec2 texSize;\nuniform mat4 projectionMatrixInverse;\n\nuniform float aoDistance;\nuniform float distancePower;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform int frame;\n\nuniform vec3[spp] samples;\nuniform float[spp] samplesR;\n\n#include <common>\n#include <packing>\n#include <sampleBlueNoise>\n\n// source: https://github.com/N8python/ssao/blob/master/EffectShader.js#L52\nvec3 getWorldPos(const float depth, const vec2 coord) {\n    float z = depth * 2.0 - 1.0;\n    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;\n\n    // Perspective division\n    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;\n    worldSpacePosition.xyz /= worldSpacePosition.w;\n\n    return worldSpacePosition.xyz;\n}\n\nvec3 computeNormal(vec3 worldPos, vec2 vUv) {\n    vec2 size = vec2(textureSize(depthTexture, 0));\n    ivec2 p = ivec2(vUv * size);\n    float c0 = texelFetch(depthTexture, p, 0).x;\n    float l2 = texelFetch(depthTexture, p - ivec2(2, 0), 0).x;\n    float l1 = texelFetch(depthTexture, p - ivec2(1, 0), 0).x;\n    float r1 = texelFetch(depthTexture, p + ivec2(1, 0), 0).x;\n    float r2 = texelFetch(depthTexture, p + ivec2(2, 0), 0).x;\n    float b2 = texelFetch(depthTexture, p - ivec2(0, 2), 0).x;\n    float b1 = texelFetch(depthTexture, p - ivec2(0, 1), 0).x;\n    float t1 = texelFetch(depthTexture, p + ivec2(0, 1), 0).x;\n    float t2 = texelFetch(depthTexture, p + ivec2(0, 2), 0).x;\n    float dl = abs((2.0 * l1 - l2) - c0);\n    float dr = abs((2.0 * r1 - r2) - c0);\n    float db = abs((2.0 * b1 - b2) - c0);\n    float dt = abs((2.0 * t1 - t2) - c0);\n    vec3 ce = getWorldPos(c0, vUv).xyz;\n    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / size.x, 0.0))).xyz\n                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / size.x, 0.0))).xyz;\n    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / size.y))).xyz\n                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / size.y))).xyz;\n    return normalize(cross(dpdx, dpdy));\n}\n\nhighp float linearize_depth(highp float d, highp float zNear, highp float zFar) {\n    highp float z_n = 2.0 * d - 1.0;\n    return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));\n}\n\nvoid main() {\n    float depth = textureLod(depthTexture, vUv, 0.).x;\n\n    // filter out background\n    if (depth == 1.0) {\n        discard;\n        return;\n    }\n\n    vec3 worldPos = getWorldPos(depth, vUv);\n    vec3 normal = computeNormal(worldPos, vUv);\n\n#ifdef animatedNoise\n    int seed = frame;\n#else\n    int seed = 0;\n#endif\n\n    vec4 noise = sampleBlueNoise(blueNoiseTexture, seed, blueNoiseRepeat, texSize);\n\n    vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);\n    vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));\n    vec3 bitangent = cross(normal, tangent);\n    mat3 tbn = mat3(tangent, bitangent, normal);\n\n    float occluded = 0.0;\n    float totalWeight = 0.0;\n\n    vec3 samplePos;\n\n    float sppF = float(spp);\n\n    for (float i = 0.0; i < sppF; i++) {\n        vec3 sampleDirection = tbn * samples[int(i)];\n\n        // make sure sample direction is in the same hemisphere as the normal\n        if (dot(sampleDirection, normal) < 0.0) sampleDirection *= -1.0;\n\n        float moveAmt = samplesR[int(mod(i + noise.a * sppF, sppF))];\n        samplePos = worldPos + aoDistance * moveAmt * sampleDirection;\n\n        vec4 offset = projectionViewMatrix * vec4(samplePos, 1.0);\n        offset.xyz /= offset.w;\n        offset.xyz = offset.xyz * 0.5 + 0.5;\n\n        float sampleDepth = textureLod(depthTexture, offset.xy, 0.0).x;\n\n        float distSample = linearize_depth(sampleDepth, cameraNear, cameraFar);\n        float distWorld = linearize_depth(offset.z, cameraNear, cameraFar);\n\n        float rangeCheck = smoothstep(0.0, 1.0, aoDistance / abs(distSample - distWorld));\n        rangeCheck = pow(rangeCheck, distancePower);\n        float weight = dot(sampleDirection, normal);\n\n        occluded += rangeCheck * weight * (distSample < distWorld ? 1.0 : 0.0);\n        totalWeight += weight;\n    }\n\n    float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);\n    gl_FragColor = vec4(normal, occ);\n}\n"},6605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.basic=void 0,t.basic="\nvarying vec2 vUv;\n\nvoid main() {\n    vUv = position.xy * 0.5 + 0.5;\n    gl_Position = vec4(position.xy, 1.0, 1.0);\n}\n"},2726:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sampleBlueNoise=void 0,t.sampleBlueNoise="\nconst float g = 1.6180339887498948482;\nconst float a1 = 1.0 / g;\n\n// reference: https://extremelearning.com.au/unreasonable-effectiveness-of-quasirandom-sequences/\nfloat r1(float n) {\n    // 7th harmonious number\n    return fract(1.1127756842787055 + a1 * n);\n}\n\nconst vec4 hn = vec4(0.618033988749895, 0.3247179572447458, 0.2207440846057596, 0.1673039782614187);\n\nvec4 sampleBlueNoise(sampler2D texture, int seed, vec2 repeat, vec2 texSize) {\n    vec2 size = vUv * texSize;\n    vec2 blueNoiseSize = texSize / repeat;\n    float blueNoiseIndex = floor(floor(size.y / blueNoiseSize.y) * repeat.x) + floor(size.x / blueNoiseSize.x);\n\n    // get the offset of this pixel's blue noise tile\n    // int blueNoiseTileOffset = int(r1(blueNoiseIndex + 1.0) * 65536.);\n\n    vec2 blueNoiseUv = vUv * repeat;\n\n    // fetch blue noise for this pixel\n    vec4 blueNoise = textureLod(texture, blueNoiseUv, 0.);\n\n    // animate blue noise\n    if (seed != 0) {\n        blueNoise = fract(blueNoise + hn * float(seed));\n\n        blueNoise.r = (blueNoise.r > 0.5 ? 1.0 - blueNoise.r : blueNoise.r) * 2.0;\n        blueNoise.g = (blueNoise.g > 0.5 ? 1.0 - blueNoise.g : blueNoise.g) * 2.0;\n        blueNoise.b = (blueNoise.b > 0.5 ? 1.0 - blueNoise.b : blueNoise.b) * 2.0;\n        blueNoise.a = (blueNoise.a > 0.5 ? 1.0 - blueNoise.a : blueNoise.a) * 2.0;\n    }\n\n    return blueNoise;\n}\n"},7923:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyMaterial=void 0;const n=i(5232);class r extends n.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new n.Uniform(null),opacity:new n.Uniform(1)},blending:n.CustomBlending,blendEquation:n.AddEquation,blendDst:n.ZeroFactor,blendSrc:n.OneFactor,toneMapped:!1,depthWrite:!1,depthTest:!1,transparent:!0,fragmentShader:"\n#include <common>\n#include <dithering_pars_fragment>\n\n#ifdef FRAMEBUFFER_PRECISION_HIGH\n\n\tuniform mediump sampler2D inputBuffer;\n\n#else\n\n\tuniform lowp sampler2D inputBuffer;\n\n#endif\n\nuniform float opacity;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texel = texture2D(inputBuffer, vUv);\n\tgl_FragColor = opacity * texel;\n\n\t#include <encodings_fragment>\n\t#include <dithering_fragment>\n\n}\n",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvUv = position.xy * 0.5 + 0.5;\n\tgl_Position = vec4(position.xy, 1.0, 1.0);\n\n}\n"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}}t.CopyMaterial=r},3808:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CopyShader=void 0,t.CopyShader={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tgl_FragColor = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor.a *= opacity;\n\n\n\t\t}"}},7800:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FullScreenQuad=void 0;const n=i(5232),r=new n.OrthographicCamera(-1,1,1,-1,0,1),a=new n.BufferGeometry;a.setAttribute("position",new n.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new n.Float32BufferAttribute([0,2,0,0,2,0],2)),t.FullScreenQuad=class{constructor(e){this._mesh=new n.Mesh(a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,r)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},4252:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NormalPass=void 0;const n=i(1704),r=i(5232),a=i(8204);class s extends n.Pass{constructor(e,t,{renderTarget:i,resolutionScale:s=1,width:o=n.Resolution.AUTO_SIZE,height:l=n.Resolution.AUTO_SIZE,resolutionX:c=o,resolutionY:u=l}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new a.RenderPass(e,t,new r.MeshNormalMaterial);const h=this.renderPass;h.ignoreBackground=!0,h.skipShadowMapUpdate=!0;const d=h.getClearPass();d.overrideClearColor=new r.Color(7829503),d.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new r.WebGLRenderTarget(1,1,{minFilter:r.NearestFilter,magFilter:r.NearestFilter}),this.renderTarget.texture.name="NormalPass.Target"),this.dTexture=new r.DepthTexture(1,1),this.renderTarget.depthTexture=this.dTexture,this.renderTarget.dispose(),this.renderTarget.stencilBuffer?(this.dTexture.format=r.DepthStencilFormat,this.dTexture.type=r.UnsignedInt248Type):this.dTexture.type=r.UnsignedIntType;const f=this.resolution=new n.Resolution(this,c,u,s);f.addEventListener("change",(e=>this.setSize(f.baseWidth,f.baseHeight)))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){var e;return null===(e=this.renderTarget)||void 0===e?void 0:e.texture}get depthTexture(){var e;return null===(e=this.renderTarget)||void 0===e?void 0:e.depthTexture}getTexture(){var e;return null===(e=this.renderTarget)||void 0===e?void 0:e.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e){const t=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,t,t,0,!0)}setSize(e,t){var i;const n=this.resolution;n.setBaseSize(e,t),null===(i=this.renderTarget)||void 0===i||i.setSize(n.width,n.height)}}t.NormalPass=s},8204:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderPass=void 0;const n=i(1704),r=i(5232),a=i(6012);class s extends n.Pass{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new n.ClearPass,this.overrideMaterialManager=null===i?null:new n.OverrideMaterialManager(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new n.OverrideMaterialManager(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,n,s){const o=[];this.scene.traverse((function(e){!0===e.visible&&(e instanceof r.Mesh&&e.material&&e.material instanceof r.MeshPhysicalMaterial&&!(e.material instanceof a.GemMaterial)&&e.material.transparent&&(o.push(e),e.visible=!1),(e instanceof r.Line||e instanceof r.LineLoop||e instanceof r.LineSegments)&&(o.push(e),e.visible=!1),!1===e.userData.ambientOcclusion&&(o.push(e),e.visible=!1))}));const l=this.scene,c=this.camera,u=this.selection,h=c.layers.mask,d=l.background,f=e.shadowMap.autoUpdate,p=this.renderToScreen?null:t;null!==u&&c.layers.set(u.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(l.background=null),this.clearPass.enabled&&this.clearPass.render(e,t,t),e.setRenderTarget(p),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,l,c):e.render(l,c),c.layers.mask=h,l.background=d,e.shadowMap.autoUpdate=f;for(let e=0;e<o.length;e++)o[e].visible=!0}}t.RenderPass=s},6012:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.GemMaterial=void 0;const s=a(i(5232)),o=i(5232),l=i(4988);class c extends o.MeshPhysicalMaterial{constructor(e){super(),this.refractionIndex=2.4,this.impurityMap=null,this.impurityScale=1,this.colorTransferBegin=new s.Color(16777215),this.colorTransferEnd=new s.Color(16777215),this.center=new s.Vector3(0,0,0),this.tracingDepth=5,this.radius=1,this.sphericalNormalMap=null,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingOpacity=0,this.isGemMaterial=!0;const t={refractionIndex:{value:2.4},impurityMap:{value:null},impurityScale:{value:1},colorTransferBegin:{value:new s.Color(16777215)},colorTransferEnd:{value:new s.Color(16777215)},center:{value:new s.Vector3(0,0,0)},tracingDepth:{value:5},radius:{value:1},sphericalNormalMap:{value:null},gamma:{value:1},contrast:{value:1},brightness:{value:0},dispersion:{value:0},tracingOpacity:{value:0}};this._extraUniforms=t,this.onBeforeCompile=function(e){for(const i in t)e.uniforms[i]=t[i];e.vertexShader=l.vert,e.fragmentShader=l.frag},Object.defineProperties(this,{tracingDepth:{get:function(){return t.tracingDepth.value},set:function(e){t.tracingDepth.value=e,e?this.defines.TRACING_DEPTH=Math.floor(e):delete this.defines.TRACING_DEPTH}},refractionIndex:{get:function(){return t.refractionIndex.value},set:function(e){t.refractionIndex.value=e}},impurityMap:{get:function(){return t.impurityMap.value},set:function(e){t.impurityMap.value=e,e?(this.defines.USE_IMPURITYMAP="",this.defines.USE_UV=""):(delete this.defines.USE_IMPURITYMAP,delete this.defines.USE_UV)}},impurityScale:{get:function(){return t.impurityScale.value},set:function(e){t.impurityScale.value=e}},colorTransferBegin:{get:function(){return t.colorTransferBegin.value},set:function(e){t.colorTransferBegin.value=e}},colorTransferEnd:{get:function(){return t.colorTransferEnd.value},set:function(e){t.colorTransferEnd.value=e}},center:{get:function(){return t.center.value},set:function(e){t.center.value=e}},radius:{get:function(){return t.radius.value},set:function(e){t.radius.value=e}},sphericalNormalMap:{get:function(){return t.sphericalNormalMap.value},set:function(e){t.sphericalNormalMap.value=e,e?this.defines.USE_UV="":delete this.defines.USE_UV}},gamma:{get:function(){return t.gamma.value},set:function(e){t.gamma.value=e}},contrast:{get:function(){return t.contrast.value},set:function(e){t.contrast.value=e}},brightness:{get:function(){return t.brightness.value},set:function(e){t.brightness.value=e}},dispersion:{get:function(){return t.dispersion.value},set:function(e){t.dispersion.value=e,0!==e?this.defines.DISPERSION="":delete this.defines.DISPERSION}},tracingOpacity:{get:function(){return t.tracingOpacity.value},set:function(e){t.tracingOpacity.value=e}}}),this.refractionIndex=e.refractionIndex||2.4,this.impurityMap=e.impurityMap||null,this.impurityScale=e.impurityScale||1,this.colorTransferBegin.copy(e.colorTransferBegin||new s.Color(16777215)),this.colorTransferEnd.copy(e.colorTransferEnd||new s.Color(16777215)),this.center.copy(e.center||new s.Vector3(0,0,0)),this.tracingDepth=e.tracingDepth||5,this.radius=e.radius||1,this.sphericalNormalMap=e.sphericalNormalMap||null,this.gamma=e.gamma||1,this.contrast=e.contrast||1,this.brightness=e.brightness||0,this.dispersion=e.dispersion||0,this.tracingOpacity=e.tracingOpacity||0,this.setValues(e)}copy(e){return super.copy(e),this.refractionIndex=e.refractionIndex,this.impurityMap=e.impurityMap,this.impurityScale=e.impurityScale,this.colorTransferBegin.copy(e.colorTransferBegin),this.colorTransferEnd.copy(e.colorTransferEnd),this.center.copy(e.center),this.tracingDepth=e.tracingDepth,this.radius=e.radius,this.sphericalNormalMap=e.sphericalNormalMap,this.gamma=e.gamma,this.contrast=e.contrast,this.brightness=e.brightness,this.dispersion=e.dispersion,this.tracingOpacity=e.tracingOpacity,this}}t.GemMaterial=c},1560:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SpecularGlossinessMaterial=void 0;const s=a(i(5232)),o=i(5232);class l extends o.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const t=["#ifdef USE_SPECULARMAP2","\tuniform sampler2D specularMap2;","#endif"].join("\n"),i=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP2","\tvec4 texelSpecular = texture2D( specularMap2, vUv );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),r=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),o={specular:{value:(new s.Color).setHex(16777215)},glossiness:{value:1},specularMap2:{value:null},glossinessMap:{value:null}};this._extraUniforms=o,this.onBeforeCompile=function(e){for(const t in o)e.uniforms[t]=o[t];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",n).replace("#include <metalnessmap_fragment>",r).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return o.specular.value},set:function(e){o.specular.value=e}},specularMap2:{get:function(){return o.specularMap2.value},set:function(e){o.specularMap2.value=e,e?this.defines.USE_SPECULARMAP2="":delete this.defines.USE_SPECULARMAP2}},glossiness:{get:function(){return o.glossiness.value},set:function(e){o.glossiness.value=e}},glossinessMap:{get:function(){return o.glossinessMap.value},set:function(e){o.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap2=e.specularMap2,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}t.SpecularGlossinessMaterial=l},1422:function(e,t,i){"use strict";var n,r,a=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDBone=void 0;const u=o(i(5232)),h=i(5232);class d extends h.Bone{constructor(e,t){super(),n.set(this,void 0),r.set(this,void 0),l(this,n,e,"f"),l(this,r,t,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4((new u.Matrix4).fromArray(e))}get SDid(){return c(this,n,"f")}set SDid(e){l(this,n,e,"f")}get SDversion(){return c(this,r,"f")}set SDversion(e){l(this,r,e,"f")}}t.SDBone=d,n=new WeakMap,r=new WeakMap},514:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SDColor=void 0;const n=i(5232);class r extends n.Color{constructor(e,t){super(e),this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear","number"==typeof t||Array.isArray(t)&&(3==t.length||4==t.length)?(this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear"):(this._colorSpace="srgb",this._originalColorSpace="srgb")}colorCorrection(e){"srgb"===this._colorSpace&&!0===e?(this.convertSRGBToLinear(),this._colorSpace="srgb-linear"):"srgb-linear"===this._colorSpace&&!1===e&&"srgb-linear"!==this._originalColorSpace&&(this.convertLinearToSRGB(),this._colorSpace="srgb")}}t.SDColor=r},1786:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.SDData=t.SD_DATA_TYPE=void 0;const s=i(9277);var o;!function(e){e.GEOMETRY="geometry",e.MATERIAL="material",e.THREEJS="threejs",e.LIGHT="light",e.CAMERA="camera",e.ANIMATION="animation",e.INTERACTION="interaction",e.HTML_ELEMENT_ANCHOR="html_element_anchor",e.CUSTOM="custom"}(o=t.SD_DATA_TYPE||(t.SD_DATA_TYPE={}));class l extends s.SDObject{constructor(e,t){super(e,t),n.set(this,o.CUSTOM)}get SDtype(){return r(this,n,"f")}set SDtype(e){a(this,n,e,"f")}}t.SDData=l,n=new WeakMap},9277:function(e,t,i){"use strict";var n,r,a=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDObject=void 0;const u=o(i(5232)),h=i(5232);class d extends h.Object3D{constructor(e,t){super(),n.set(this,void 0),r.set(this,void 0),l(this,n,e,"f"),l(this,r,t,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4((new u.Matrix4).fromArray(e))}get SDid(){return c(this,n,"f")}set SDid(e){l(this,n,e,"f")}get SDversion(){return c(this,r,"f")}set SDversion(e){l(this,r,e,"f")}cloneObject(){const e=this.clone();return e.SDid=this.SDid,e.SDversion=this.SDversion,e}}t.SDObject=d,n=new WeakMap,r=new WeakMap},7863:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.entry=t.main=void 0,t.main="\n\nuniform float lightSizeUV;\nuniform float blending;\n\n#ifdef SHADOWMAP_TYPE_PCF\n\n#define NEAR_PLANE 0.1\n#define NUM_SAMPLES 20\n#define NUM_RINGS 11\n\nvec2 poissonDisk[NUM_SAMPLES];\n\nvoid initPoissonSamples( const in vec2 randomSeed ) {\n    float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);\n    float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);\n\n    // jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n    float angle = rand(randomSeed) * PI2;\n    float radius = INV_NUM_SAMPLES;\n    float radiusStep = radius;\n\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);\n        radius += radiusStep;\n        angle += ANGLE_STEP;\n    }\n}\n\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n    return (zReceiver - zBlocker) / zBlocker;\n}\n\nfloat findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver ) {\n    // This uses similar triangles to compute what\n    // area of the shadow map we should search\n    float searchRadius = lightSizeUV * (zReceiver - NEAR_PLANE) / zReceiver;\n    float blockerDepthSum = 0.0;\n    int numBlockers = 0;\n\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\n        if (shadowMapDepth < zReceiver) {\n            blockerDepthSum += shadowMapDepth;\n            numBlockers++;\n        }\n    }\n\n    if (numBlockers == 0) return -1.0;\n\n    return blockerDepthSum / float(numBlockers);\n}\n\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {\n    float sum = 0.0;\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * filterRadius));\n        if (zReceiver <= depth) sum += 1.0;\n    }\n    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {\n        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[i].yx * filterRadius));\n        if (zReceiver <= depth) sum += 1.0;\n    }\n    return sum / (2.0 * float(NUM_SAMPLES));\n}\n\nfloat PCSS(sampler2D shadowMap, vec4 coords) {\n    vec2 uv = coords.xy;\n    float zReceiver = coords.z; // Assumed to be eye-space z in this code\n\n    initPoissonSamples(uv);\n    // STEP 1: blocker search\n    float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);\n\n    //There are no occluders so early out (this saves filtering)\n    if (avgBlockerDepth == -1.0) return 1.0;\n\n    // STEP 2: penumbra size\n    float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n    float filterRadius = penumbraRatio * lightSizeUV * NEAR_PLANE / zReceiver;\n\n    // STEP 3: filtering\n    //return avgBlockerDepth;\n    return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);\n}\n#endif\n",t.entry="\n// PCSS implementation\nvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\nfloat dx = texelSize.x;\nfloat dy = texelSize.y;\nvec2 uv = shadowCoord.xy;\nvec2 f = fract( uv * shadowMapSize + 0.5 );\nuv -= f * texelSize;\nfloat shadow1 = (\n    texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n    texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n         f.x ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n         f.x ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n         f.y ) +\n    mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n         texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n         f.y ) +\n    mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n              f.x ),\n         mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n              f.x ),\n         f.y )\n) * ( 1.0 / 9.0 );\nfloat shadow2 = PCSS( shadowMap, shadowCoord );\nshadow = shadow1 * (1.0 - blending) + blending * shadow2;\n            "},4988:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.frag=t.vert=void 0,t.vert="\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// CUSTOM START\nvarying vec3 frag_position;\nvarying vec3 frag_normal;\n// CUSTOM END\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n    #ifdef USE_TRANSMISSION\n        vWorldPosition = worldPosition.xyz;\n    #endif\n\n    // CUSTOM START\n    frag_position = position;\n    frag_normal = objectNormal;\n    // CUSTOM END\n}\n",t.frag="\n#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\n\n// CUSTOM START\n#ifdef USE_IMPURITYMAP\n\tuniform sampler2D impurityMap;\n#endif\n// CUSTOM END\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\n\n\n// CUSTOM START\n\nvarying vec4 initialPosition;\nvarying vec3 initialNormal;\n\nvarying vec3 frag_position;\nvarying vec3 frag_normal;\n\nuniform vec3 center;\nuniform float radius;\nuniform samplerCube sphericalNormalMap;\nuniform mat3 normalMatrix;\nuniform mat4 modelMatrix;\n\nuniform float impurityScale;\nuniform vec3 colorTransferBegin;\nuniform vec3 colorTransferEnd;\nuniform float refractionIndex;\nuniform float gamma;\nuniform float contrast;\nuniform float brightness;\nuniform float dispersion;\nuniform float tracingOpacity;\n\n\nvec3 getIBLRadianceVariation( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\treturn min(envMapColor.rgb * envMapIntensity, vec3(1.0));\n\t#else\n\t\treturn vec3( 0.0 );\n\t#endif\n}\n\nvec3 calculateReflectedLight(vec3 position, vec3 normal, vec3 viewDir, PhysicalMaterial material, int depth) {\n\t\n\tGeometricContext currentGeometry;\n\tcurrentGeometry.position = (modelMatrix * vec4(position, 1.0)).xyz;\n\n\tmat3 normalMatrix;\n\tnormalMatrix[0] = normalize(modelMatrix[0].xyz);\n\tnormalMatrix[1] = normalize(modelMatrix[1].xyz);\n\tnormalMatrix[2] = normalize(modelMatrix[2].xyz);\n\t\n\t// Calculate the normal vector in world space\n\tcurrentGeometry.normal = normalize(normalMatrix * normal);\n\t\n\t// Calculate the view direction vector in world space\n\tcurrentGeometry.viewDir = normalize(normalMatrix * -viewDir);\n\n    #ifdef USE_CLEARCOAT\n        currentGeometry.clearcoatNormal = clearcoatNormal;\n    #endif\n\n\tReflectedLight rLight;\n\tIncidentLight dLight;\n\n\tfloat temp = material.roughness;\n\tmaterial.roughness = 0.5;\n\n\t#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\t\tPointLight pointLight;\n        #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n            PointLightShadow pointLightShadow;\n        #endif\n\n\t    #pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\tpointLight = pointLights[ i ];\n            getPointLightInfo( pointLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n                pointLightShadow = pointLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n            #endif\n\t\t    RE_Direct( dLight, currentGeometry, material, rLight );\n\t\t}\n        #pragma unroll_loop_end\n\t#endif\n\t#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n        SpotLight spotLight;\n        #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n            SpotLightShadow spotLightShadow;\n        #endif\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n            spotLight = spotLights[ i ];\n            getSpotLightInfo( spotLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n                spotLightShadow = spotLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n            #endif\n            RE_Direct( dLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n\t#endif\n\n    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n        DirectionalLight directionalLight;\n        #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n            DirectionalLightShadow directionalLightShadow;\n        #endif\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n            directionalLight = directionalLights[ i ];\n            getDirectionalLightInfo( directionalLight, currentGeometry, dLight );\n            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n                directionalLightShadow = directionalLightShadows[ i ];\n                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n            #endif\n            RE_Direct( dLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n    #endif\n\tmaterial.roughness = temp;\n\t\n    #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n        RectAreaLight rectAreaLight;\n        #pragma unroll_loop_start\n        for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n            rectAreaLight = rectAreaLights[ i ];\n            RE_Direct_RectArea( rectAreaLight, currentGeometry, material, rLight );\n        }\n        #pragma unroll_loop_end\n    #endif\n    #if defined( RE_IndirectDiffuse )\n        vec3 iblIrradiance = vec3( 0.0 );\n        vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n        irradiance += getLightProbeIrradiance( lightProbe, currentGeometry.normal );\n        #if ( NUM_HEMI_LIGHTS > 0 )\n            #pragma unroll_loop_start\n            for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n                irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], currentGeometry.normal );\n            }\n            #pragma unroll_loop_end\n        #endif\n    #endif\n    #if defined( RE_IndirectSpecular )\n        vec3 radiance = vec3( 0.0 );\n        vec3 clearcoatRadiance = vec3( 0.0 );\n    #endif\n\n\n    #if defined( RE_IndirectDiffuse )\n        #ifdef USE_LIGHTMAP\n            vec4 lightMapTexel = texture2D( lightMap, vUv2 );\n            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n            irradiance += lightMapIrradiance;\n        #endif\n        #if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n            iblIrradiance += getIBLIrradiance( currentGeometry.normal );\n        #endif\n    #endif\n    #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n        radiance += getIBLRadianceVariation( currentGeometry.viewDir, currentGeometry.normal, material.roughness );\n        #ifdef USE_CLEARCOAT\n            clearcoatRadiance += getIBLRadianceVariation( currentGeometry.viewDir, currentGeometry.clearcoatNormal, material.clearcoatRoughness );\n        #endif\n    #endif\n\n    #if defined( RE_IndirectDiffuse )\n        RE_IndirectDiffuse( irradiance, currentGeometry, material, rLight );\n    #endif\n    #if defined( RE_IndirectSpecular )\n        RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, currentGeometry, material, rLight );\n    #endif\n\n\tif(depth >= 0) {\n\t\tfloat frac = float(depth) / float(TRACING_DEPTH);\n\t\tvec3 colorTransfer = (1.0-frac) * colorTransferBegin + frac * colorTransferEnd;\n\t\trLight.indirectSpecular *= colorTransfer;\n\t\trLight.directSpecular *= colorTransfer;\n\t}\n\n\tvec3 color = rLight.indirectSpecular + rLight.directSpecular + rLight.indirectDiffuse + rLight.directDiffuse;\n\n\t// gamma\n\tcolor = pow(color, vec3(1.0/gamma)); \n\n\t// contrast\n\tcolor.rgb = ((color.rgb - 0.5) * max(contrast, 0.0)) + 0.5; \n\n\t// brightness\n\tcolor.r = min(max(color.r + brightness, 0.0), 1.0);\n\tcolor.g = min(max(color.g + brightness, 0.0), 1.0);\n\tcolor.b = min(max(color.b + brightness, 0.0), 1.0);\n\n\treturn color;\n}\n\nvec3 normalLookUp(vec3 dir) {\n\tvec4 s = textureCube(sphericalNormalMap, dir);\n\tif(s.a < 1.0/256.0) {\n\t\treturn normalize(vec3(-s.x, -s.y, -s.z));\n\t} else if(s.a < 3.0/256.0) {\n\t\treturn normalize(vec3(-s.x, -s.y, s.z));\n\t} else if(s.a < 5.0/256.0) {\n\t\treturn normalize(vec3(-s.x, s.y, -s.z));\n\t} else if(s.a < 7.0/256.0) {\n\t\treturn normalize(vec3(s.x, -s.y, -s.z));\n\t} else if(s.a < 9.0/256.0) {\n\t\treturn normalize(vec3(-s.x, s.y, s.z));\n\t} else if(s.a < 11.0/256.0) {\n\t\treturn normalize(vec3(s.x, -s.y, s.z));\n\t} else if(s.a < 13.0/256.0) {\n\t\treturn normalize(vec3(s.x, s.y, -s.z));\n\t} else {\n\t\treturn normalize(s.xyz);\n\t}\n}\n\n#ifdef USE_IMPURITYMAP\n\tfloat impurityLookUp(vec3 dir) {\n\t\tvec3 c = textureCube(impurityMap, dir.xy).rgb;\n\t\treturn (c.x + c.y + c.z) / 3.0;\n\t}\n#endif\n\nvec3 raySphereIntersection(vec3 o, vec3 d) {\n\n\tvec3 oc = o - center;\n    float a = dot(d, d);\n    float b = 2.0 * dot(oc, d);\n    float c = dot(oc,oc) - radius*radius;\n    float discriminant = b*b - 4.0*a*c;\n    if(discriminant < 0.0){\n        return vec3(0.0);\n    }\n    else{\n        return o +( (-b + sqrt(discriminant)) / (2.0*a)) * d;\n    }\n}\n\nvec3 hueToSaturatedColor(float hue) {\n    float r,g,b;\n    if (hue < 0.25){\n\t\tfloat t = 1.0 - (hue / 0.25);\n        r = 1.0;\n        g = 1.0;\n        b = t;    \n\t} else if (hue < 0.5){\n    \tfloat t = 1.0 - (hue - 0.25 / 0.25);\n\t\tr = 1.0;\n        g = t;\n        b = 0.0;\n\t} else if (hue < 0.75){\n    \tfloat t = 1.0 - (hue - 0.5 / 0.25);\n\t\tr = t;\n        g = 0.0;\n        b = 1.0 - t;\n    } else {\n    \tfloat t = hue - 0.75 / 0.25;\n        r = t;\n        g = t;\n        b = 1.0;\n    }\n    return vec3(r, g, b) / 0.5 + 0.5;\n}\n// CUSTOM END\n\nvoid main() {    \n    // CUSTOM START\n    vec3 frag_normal_normalized = frag_normal;\n    // CUSTOM END\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\n    // CUSTOM START\n\t\n    // Extract the translation part of the model matrix\n\tvec3 translation = modelMatrix[3].xyz;\n\n\t// Extract the rotation part of the model matrix (3x3 upper-left submatrix)\n\tmat3 rotationMatrix = mat3(modelMatrix);\n\n\t// Calculate the inverse of the rotation matrix (transpose since it's orthogonal)\n\tmat3 inverseRotationMatrix;\n\tinverseRotationMatrix[0] = vec3(rotationMatrix[0].x, rotationMatrix[1].x, rotationMatrix[2].x);\n\tinverseRotationMatrix[1] = vec3(rotationMatrix[0].y, rotationMatrix[1].y, rotationMatrix[2].y);\n\tinverseRotationMatrix[2] = vec3(rotationMatrix[0].z, rotationMatrix[1].z, rotationMatrix[2].z);\n\n\t// Calculate the camera position in model space\n\tvec3 cameraPositionInModelSpace = inverseRotationMatrix * (cameraPosition - translation);\n\n\t// Calculate the initial direction\n\tvec3 initialDirection = normalize(frag_position.xyz - cameraPositionInModelSpace);\n\n\tvec4 outgoingLight2;\n\tfloat r_0 = (1.0-refractionIndex)/(1.0+refractionIndex);\n\tr_0 = r_0*r_0;\n\n\tfloat cos_theta_0 = -dot(initialDirection, frag_normal_normalized);\n\tfloat r_0_outside = (refractionIndex-1.0)/(refractionIndex+1.0);\n\tr_0_outside = r_0_outside*r_0_outside;\n\tfloat initialProbability = r_0_outside + (1.0 - r_0_outside)*pow(1.0 - cos_theta_0, 5.0);\n\n\toutgoingLight2 = vec4(calculateReflectedLight(frag_position, frag_normal_normalized, initialDirection, material, -1), 1.0);\n\t// gl_FragColor = outgoingLight2;\n\t// return;\n\tif(TRACING_DEPTH > 0) \n\t\toutgoingLight2 *= initialProbability;\n\t\t\n\tvec3 tempColor;\n\n\t#ifdef DISPERSION\n\t\tconst int loop = 3;\n\t\tvec3 dispersionColor;\n\t#else\n\t\tconst int loop = 1;\n\t#endif\n\t\t#pragma unroll_loop_start\n\t\tfor(int j = 0; j < loop; j++){\n\t\t\tvec3 refractedDirection = refract(initialDirection, frag_normal_normalized, 1.0/refractionIndex + float(j)*dispersion * 0.025);\n\t\t\tvec3 newPosition = raySphereIntersection(frag_position, refractedDirection);\n\t\t\tvec3 lookUpVector = normalize(newPosition - center);\n\t\t\tvec3 newNormal = normalLookUp(lookUpVector);\n\t\t\tvec3 newDirection = reflect(refractedDirection, newNormal);\n\n\t\t\tfloat currentProbability = 1.0;\n\n\t\t\t#ifdef USE_IMPURITYMAP\n\t\t\t\tfloat impurityProbability = impurityLookUp(lookUpVector);\n\t\t\t\tcurrentProbability -= impurityProbability * impurityScale;\n\t\t\t\t// gl_FragColor = vec4(vec3(impurityProbability), 1.0);\n\t\t\t\t// return;\n\t\t\t#endif\n\t\t\t\n\t\t\t// if(0 == TRACING_DEPTH) {\n\t\t\t// \tgl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);\n\t\t\t// \treturn;\n\t\t\t// }\n\n\t\t\ttempColor = vec3(0.0);\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor(int i = 0; i < TRACING_DEPTH; i++) {\n\t\t\t\t// small position correction to avoid artefacts\n\t\t\t\tnewPosition = newPosition - lookUpVector * 1e-6;\n\t\t\t\tnewPosition = raySphereIntersection(newPosition, newDirection);\n\t\t\t\tlookUpVector = normalize(newPosition - center);\n\t\t\t\tnewNormal = normalLookUp(lookUpVector);\n\t\t\t\n\t\t\t\tfloat cos_theta = dot(newDirection, newNormal);\n\t\t\t\tfloat ratio;\n\t\t\t\tif(cos_theta > 0.0) {\n\t\t\t\t\tratio = refractionIndex;\n\t\t\t\t} else {\n\t\t\t\t\tcos_theta = -cos_theta;\n\t\t\t\t\tratio = 1.0 / refractionIndex;\n\t\t\t\t}\n\t\t\t\tfloat cos_theta_2 = 1.0 - ratio*ratio * (1.0 - cos_theta*cos_theta);\n\t\t\t\tfloat probability = r_0 + (1.0 - r_0)*pow(1.0 - cos_theta, 5.0);\n\t\t\t\tif(cos_theta_2 < 0.0) probability = 0.0;\n\n\t\t\t\tvec3 refracted = refract(newDirection, newNormal*-1.0, 1.0/refractionIndex);\n\t\t\t\ttempColor += probability * currentProbability * calculateReflectedLight(newPosition, newNormal*-1.0, reflect(refracted, newNormal), material, i);\n\t\t\t\tif(i+1 == TRACING_DEPTH)\n\t\t\t\t\ttempColor += (1.0 - probability) * currentProbability * calculateReflectedLight(newPosition, newNormal, newDirection, material, i);\n\n\t\t\t\tnewDirection = reflect(newDirection, newNormal);\n\n\t\t\t\t// if(i+1 == TRACING_DEPTH) {\n\t\t\t\t// \tgl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);\n\t\t\t\t// \treturn;\n\t\t\t\t// }\n\n\t\t\t\tcurrentProbability *= (1.0 - probability);\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\n\t\t\t#ifdef DISPERSION\n\t\t\t\tif(j == 0) {\n\t\t\t\t\tdispersionColor.r = tempColor.r;\t\n\t\t\t\t} else if(j == 1) {\n\t\t\t\t\tdispersionColor.g = tempColor.g;\t\n\t\t\t\t} else if(j == 2) {\n\t\t\t\t\tdispersionColor.b = tempColor.b;\t\n\t\t\t\t}\n\t\t\t\ttempColor = dispersionColor;\n\t\t\t#endif\n\t\t}\t\n\t\t#pragma unroll_loop_end\n\n\tif(TRACING_DEPTH > 0)\n\t\toutgoingLight2.rgb += (1.0 - initialProbability) * tempColor;\n\n\tfloat alpha = (1.0 - initialProbability) + initialProbability*tracingOpacity;\n\tgl_FragColor = vec4(outgoingLight2.rgb, alpha*diffuseColor.a);\n\n    // CUSTOM END\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n\n"},4645:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBELoader=void 0;const n=i(5232);class r extends n.DataTextureLoader{constructor(e){super(e),this.type=n.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:console.error("THREE.RGBELoader Read Error: "+(t||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(t||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(t||""));break;default:console.error("THREE.RGBELoader: Error: "+(t||""))}return-1},i=function(e,t,i){t=t||1024;let n=e.pos,r=-1,a=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));for(;0>(r=o.indexOf("\n"))&&a<t&&n<e.byteLength;)s+=o,a+=o.length,n+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<r&&(!1!==i&&(e.pos+=a+r+1),s+o.slice(0,r))},r=function(e,t,i,n){const r=e[t+3],a=Math.pow(2,r-128)/255;i[n+0]=e[t+0]*a,i[n+1]=e[t+1]*a,i[n+2]=e[t+2]*a,i[n+3]=1},a=function(e,t,i,r){const a=e[t+3],s=Math.pow(2,a-128)/255;i[r+0]=n.DataUtils.toHalfFloat(Math.min(e[t+0]*s,65504)),i[r+1]=n.DataUtils.toHalfFloat(Math.min(e[t+1]*s,65504)),i[r+2]=n.DataUtils.toHalfFloat(Math.min(e[t+2]*s,65504)),i[r+3]=n.DataUtils.toHalfFloat(1)},s=new Uint8Array(e);s.pos=0;const o=function(e){const n=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,r=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,s=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,o={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;if(e.pos>=e.byteLength||!(l=i(e,void 0,void 0)))return t(1,"no header found");if(!(c=l.match(/^#\?(\S+)/)))return t(3,"bad initial token");for(o.valid|=1,o.programtype=c[1],o.string+=l+"\n";l=i(e,void 0,void 0),!1!==l;)if(o.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(n))&&(o.gamma=parseFloat(c[1])),(c=l.match(r))&&(o.exposure=parseFloat(c[1])),(c=l.match(a))&&(o.valid|=2,o.format=c[1]),(c=l.match(s))&&(o.valid|=4,o.height=parseInt(c[1],10),o.width=parseInt(c[2],10)),2&o.valid&&4&o.valid)break}else o.comments+=l+"\n";return 2&o.valid?4&o.valid?o:t(3,"missing image size specifier"):t(3,"missing format specifier")}(s);if(-1!==o){const e=o.width,i=o.height,l=function(e,i,n){const r=i;if(r<8||r>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(r!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");const a=new Uint8Array(4*i*n);if(!a.length)return t(4,"unable to allocate buffer space");let s=0,o=0;const l=4*r,c=new Uint8Array(4),u=new Uint8Array(l);let h=n;for(;h>0&&o<e.byteLength;){if(o+4>e.byteLength)return t(1,void 0);if(c[0]=e[o++],c[1]=e[o++],c[2]=e[o++],c[3]=e[o++],2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=r)return t(3,"bad rgbe scanline format");let i,n=0;for(;n<l&&o<e.byteLength;){i=e[o++];const r=i>128;if(r&&(i-=128),0===i||n+i>l)return t(3,"bad scanline data");if(r){const t=e[o++];for(let e=0;e<i;e++)u[n++]=t}else u.set(e.subarray(o,o+i),n),n+=i,o+=i}const d=r;for(let e=0;e<d;e++){let t=0;a[s]=u[e+t],t+=r,a[s+1]=u[e+t],t+=r,a[s+2]=u[e+t],t+=r,a[s+3]=u[e+t],s+=4}h--}return a}(s.subarray(s.pos),e,i);if(-1!==l){let t,s,c,u;switch(this.type){case n.FloatType:u=l.length/4;const e=new Float32Array(4*u);for(let t=0;t<u;t++)r(l,4*t,e,4*t);t=e,c=n.FloatType;break;case n.HalfFloatType:u=l.length/4;const i=new Uint16Array(4*u);for(let e=0;e<u;e++)a(l,4*e,i,4*e);t=i,c=n.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:e,height:i,data:t,header:o.string,gamma:o.gamma,exposure:o.exposure,format:s,type:c}}}return null}setDataType(e){return this.type=e,this}load(e,t,i,r){return super.load(e,(function(e,i){switch(e.type){case n.FloatType:case n.HalfFloatType:e.colorSpace=n.LinearSRGBColorSpace,e.minFilter=n.LinearFilter,e.magFilter=n.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,i)}),i,r)}}t.RGBELoader=r},3757:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ThreejsData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t){super(t),n.set(this,void 0),r(this,n,e,"f")}get obj(){return a(this,n,"f")}set obj(e){r(this,n,e,"f")}clone(){return new o(this.obj,this.id)}}t.ThreejsData=o,n=new WeakMap},1778:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEngine=void 0;const n=i(887),r=i(3858),a=i(7038);t.AnimationEngine=class{constructor(){this._tree=r.Tree.instance,this._animations={}}static get instance(){return this._instance||(this._instance=new this)}get animations(){return this._animations}init(){}update(e){const t=Object.values(this._animations);let i=!1;for(let r=0;r<t.length;r++){const s=t[r];if(-1===s.animationTime&&(i=!0,s.animationTime=0),!s.animate)continue;i=!0,s.animationTime+=e,s.animationTime/1e3>s.duration&&(s.repeat?s.startAnimation():s.stopAnimation());const o=s.duration,l=s.animationTime/1e3%o;for(let e=0;e<s.tracks.length;e++){const t=s.tracks[e],i=s.id+"_"+e;if(!(l<t.times[0]||l>t.times[t.times.length-1]))for(let e=1;e<t.times.length;e++)if(l<t.times[e]&&l>t.times[e-1]){const r=t.node.transformations.filter((e=>e.id===i));t.node.transformations=t.node.transformations.filter((e=>!r.includes(e)));const s=(l-t.times[e-1])/(t.times[e]-t.times[e-1]);let o=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));o||(o={id:"gltf_matrix_translation",matrix:n.mat4.create()},t.node.transformations.push(o));let c=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));c||(c={id:"gltf_matrix_rotation",matrix:n.mat4.create()},t.node.transformations.push(c));let u=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(u||(u={id:"gltf_matrix_scale",matrix:n.mat4.create()},t.node.transformations.push(u)),"rotation"===t.path){let i,r,a;t.pivot&&(i=n.mat4.fromTranslation(n.mat4.create(),n.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),r=n.mat4.fromTranslation(n.mat4.create(),n.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2]))),a="step"===t.interpolation?n.quat.fromValues(t.values[4*(e-1)+0],t.values[4*(e-1)+1],t.values[4*(e-1)+2],t.values[4*(e-1)+3]):n.quat.slerp(n.vec4.create(),n.vec4.fromValues(t.values[4*(e-1)+0],t.values[4*(e-1)+1],t.values[4*(e-1)+2],t.values[4*(e-1)+3]),n.vec4.fromValues(t.values[4*e+0],t.values[4*e+1],t.values[4*e+2],t.values[4*e+3]),s);const o=n.mat4.fromQuat(n.mat4.create(),a);c.matrix=i&&r?n.mat4.multiply(n.mat4.create(),n.mat4.multiply(n.mat4.create(),i,o),r):o}else if("translation"===t.path){let i;i="step"===t.interpolation?n.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]):n.vec3.lerp(n.vec3.create(),n.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]),n.vec3.fromValues(t.values[3*e+0],t.values[3*e+1],t.values[3*e+2]),s),o.matrix=n.mat4.fromTranslation(n.mat4.create(),i)}else if("scale"===t.path){let i,r,a;t.pivot&&(i=n.mat4.fromTranslation(n.mat4.create(),n.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),r=n.mat4.fromTranslation(n.mat4.create(),n.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2]))),a="step"===t.interpolation?n.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]):n.vec3.lerp(n.vec3.create(),n.vec3.fromValues(t.values[3*(e-1)+0],t.values[3*(e-1)+1],t.values[3*(e-1)+2]),n.vec3.fromValues(t.values[3*e+0],t.values[3*e+1],t.values[3*e+2]),s);const o=n.mat4.fromScaling(n.mat4.create(),a);u.matrix=i&&r?n.mat4.multiply(n.mat4.create(),n.mat4.multiply(n.mat4.create(),i,o),r):o}else if("weights"===t.path){let i=[];const n=t.values.length/t.times.length;if("step"===t.interpolation)for(let r=0;r<n;r++)i.push(t.values[(e-1)*n+r]);else for(let r=0;r<n;r++)i.push(t.values[(e-1)*n+r]*(1-s)+s*t.values[(e-1)*n+r]);const r=e=>{for(let t=0;t<e.data.length;t++)e.data[t]instanceof a.GeometryData&&e.data[t].morphWeights.length===n&&(e.data[t].morphWeights=i);for(let t=0;t<e.children.length;t++)r(e.children[t])};r(t.node)}break}}}return i}updateAnimationData(){this._animations={};const e=this.gatherAnimations(),t=e.map((e=>e.name));for(let i=0;i<e.length;i++){const n=e[i].name,r=[];for(let e=0;e<t.length;e++)n===t[e]&&r.push(e);let a=n;if(r.length>1)for(a=n+"_"+r.indexOf(i);t.includes(a);)a+="_0";this._animations[a]=e[i]}}gatherAnimations(e=this._tree.root){let t=[];for(let i=0,n=e.data.length;i<n;i++)e.data[i]instanceof a.AnimationData&&t.push(e.data[i]);for(let i=0,n=e.children.length;i<n;i++)t=t.concat(this.gatherAnimations(e.children[i]));return t}}},3289:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEngine=void 0;const n=i(1778);Object.defineProperty(t,"AnimationEngine",{enumerable:!0,get:function(){return n.AnimationEngine}})},1314:function(e,t,i){"use strict";var n,r,a=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&a(t,e,i);return s(t,e),t},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameEngine=void 0;const c=o(i(6194)),u=i(8877),h=i(3289);t.AnimationFrameEngine=class{constructor(){n.set(this,h.AnimationEngine.instance),r.set(this,u.UuidGenerator.instance),this._animationFrameCallbacks={},this._lastTime=0,this.animate(0)}static get instance(){return this._instance||(this._instance=new this)}addAnimationFrameCallback(e){const t=l(this,r,"f").create();return this._animationFrameCallbacks[t]=e,t}removeAnimationFrameCallback(e){return!!this._animationFrameCallbacks[e]&&(delete this._animationFrameCallbacks[e],this._animationFrameCallbacks[e]=void 0,!0)}animate(e){requestAnimationFrame((e=>this.animate(e))),c.update(e);const t=e-this._lastTime<0?0:e-this._lastTime;this._lastTime=e;const i=l(this,n,"f").update(t);for(let n in this._animationFrameCallbacks)this._animationFrameCallbacks[n](e,t,i)}},n=new WeakMap,r=new WeakMap},8715:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameEngine=void 0;const n=i(1314);Object.defineProperty(t,"AnimationFrameEngine",{enumerable:!0,get:function(){return n.AnimationFrameEngine}})},8551:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraEngine=void 0;const n=i(8877),r=i(5174),a=i(887),s=i(3858),o=i(4976),l=i(3164),c=i(8926),u=i(8065),h=i(5904);t.CameraEngine=class{constructor(e,t){this._renderingEngine=e,this._canvas=t,this._cameras={},this._camerasDomEventListenerToken={},this._cameraNode=new s.TreeNode("cameras"),this._eventEngine=n.EventEngine.instance,this._logger=n.Logger.instance,this._stateEngine=n.StateEngine.instance,this._tree=s.Tree.instance,this._uuidGenerator=n.UuidGenerator.instance,this._camera=null,this._settingsApplied=!1,this._boundingBox=new r.Box,this._tree.root.addChild(this._cameraNode),this._cameraNode.restrictViewports=[this._renderingEngine.id],this._eventEngine.addListener(n.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,(e=>{const t=e;if(t.viewportId===this._renderingEngine.id){this._boundingBox=new r.Box(t.boundingBox.min,t.boundingBox.max);const e=this.cameras;for(let t in e)e[t].boundingBox=this._boundingBox.clone()}})),this._eventEngine.addListener(n.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(e=>{e.viewportId===this._renderingEngine.id&&this.searchForNewCameras()}))}get camera(){return this._camera}get cameras(){return this._cameras}get update(){return this._update}set update(e){this._update=e}activateCameraEvents(){const e=this.cameras;for(let t in e)e[t].controls.cameraControlsEventDistribution.activateCameraEvents()}applySettings(e){const t=this.cameras;for(let e in t)this.removeCamera(e);for(let t in e.settings.camera.cameras){const i=e.settings.camera.cameras[t];"perspective"===i.type?this.createCamera(o.CAMERA_TYPE.PERSPECTIVE,t):this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,t).direction=i.type}if(!this._settingsApplied)for(let i in t)t[i].applySettings(e);const i=Object.keys(e.settings.camera.cameras);i.length>0?e.settings.camera.cameraId?this.assignCamera(e.settings.camera.cameraId):this.assignCamera(i[0]):(this.createDefaultCameras(),this.camera.applySettings(e)),this._settingsApplied=!0,this._update&&this._update()}assignCamera(e){const t=this.cameras[e];if(!t)return!1;for(let e in this.cameras)this.cameras[e].active=!1;return this._camera=t,this._camera.active=!0,!0}createCamera(e,t){const i=this.cameras,r=t||this._uuidGenerator.create();if(i[r])throw new n.ShapeDiverViewerCameraError(`CameraEngine.createCamera: Camera (${e}) with this id (${r}) already exists.`);const a=this._renderingEngine.canvas.parentNode.clientWidth/this._renderingEngine.canvas.parentNode.clientHeight,s=o.CAMERA_TYPE.PERSPECTIVE===e?new c.PerspectiveCamera(r,void 0,a):new u.OrthographicCamera(r);return s.assignViewer(this._renderingEngine),i[r]=s,this._settingsApplied&&this._renderingEngine.settingsEngine?s.applySettings(this._renderingEngine.settingsEngine):s.zoomTo(void 0,{duration:0}),this._cameraNode.addData(s),this._update&&this._update(),s}createDefaultCameras(){this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"top").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"bottom").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"left").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"right").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"front").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT,this.createCamera(o.CAMERA_TYPE.ORTHOGRAPHIC,"back").direction=h.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK;const e=this.createCamera(o.CAMERA_TYPE.PERSPECTIVE,"perspective");this.assignCamera(e.id)}deactivateCameraEvents(){const e=this.cameras;for(let t in e)e[t].controls.cameraControlsEventDistribution.deactivateCameraEvents()}removeCamera(e){const t=this.cameras,i=t[e];return!!i&&(this._renderingEngine.domEventEngine.removeDomEventListener(this._camerasDomEventListenerToken[e]),this._camera&&this._camera.id===e&&(this._camera=null),delete t[e],delete this._camerasDomEventListenerToken[e],this._cameraNode.removeData(i),this._update&&this._update(),!0)}saveSettings(e){e.settings.camera.cameraId=this._camera?this._camera.id:"perspective",e.settings.camera.cameras={};for(let t in this.cameras){const i=this.cameras[t];if(i.type===o.CAMERA_TYPE.PERSPECTIVE){const t=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.type,fov:i.fov,controls:{autoRotationSpeed:t.autoRotationSpeed,damping:t.damping,enableAutoRotation:t.enableAutoRotation,enableKeyPan:t.enableKeyPan,enablePan:t.enablePan,enableRotation:t.enableRotation,enableZoom:t.enableZoom,input:t.input,keyPanSpeed:t.keyPanSpeed,movementSmoothness:t.movementSmoothness,rotationSpeed:t.rotationSpeed,panSpeed:t.panSpeed,zoomSpeed:t.zoomSpeed,restrictions:{position:{cube:{min:{x:t.cubePositionRestriction.min[0],y:t.cubePositionRestriction.min[1],z:t.cubePositionRestriction.min[2]},max:{x:t.cubePositionRestriction.max[0],y:t.cubePositionRestriction.max[1],z:t.cubePositionRestriction.max[2]}},sphere:{center:{x:t.spherePositionRestriction.center[0],y:t.spherePositionRestriction.center[1],z:t.spherePositionRestriction.center[2]},radius:t.spherePositionRestriction.radius}},target:{cube:{min:{x:t.cubeTargetRestriction.min[0],y:t.cubeTargetRestriction.min[1],z:t.cubeTargetRestriction.min[2]},max:{x:t.cubeTargetRestriction.max[0],y:t.cubeTargetRestriction.max[1],z:t.cubeTargetRestriction.max[2]}},sphere:{center:{x:t.sphereTargetRestriction.center[0],y:t.sphereTargetRestriction.center[1],z:t.sphereTargetRestriction.center[2]},radius:t.sphereTargetRestriction.radius}},rotation:t.rotationRestriction,zoom:t.zoomRestriction}}}}else{e.camera.cameras[i.id]&&e.camera.cameras[i.id].type!==i.type&&e.camera.cameras[i.id].position.x===i.defaultPosition[0]&&e.camera.cameras[i.id].position.y===i.defaultPosition[1]&&e.camera.cameras[i.id].position.z===i.defaultPosition[2]&&e.camera.cameras[i.id].target.x===i.defaultTarget[0]&&e.camera.cameras[i.id].target.y===i.defaultTarget[1]&&e.camera.cameras[i.id].target.z===i.defaultTarget[2]&&(i.defaultPosition=a.vec3.clone(i.position),i.defaultTarget=a.vec3.clone(i.target));const t=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.direction,controls:{damping:t.damping,enableKeyPan:t.enableKeyPan,enablePan:t.enablePan,enableZoom:t.enableZoom,input:t.input,keyPanSpeed:t.keyPanSpeed,movementSmoothness:t.movementSmoothness,panSpeed:t.panSpeed,zoomSpeed:t.zoomSpeed}}}}}searchForNewCameras(){const e=t=>{for(let e=0;e<t.data.length;e++)if(t.data[e]instanceof l.AbstractCamera&&!this._cameras[t.data[e].id]){const i=t.data[e];i.viewportId===this._renderingEngine.id&&(this._cameras[i.id]=i)}for(let i=0;i<t.children.length;i++)e(t.children[i])};e(this._tree.root),this._update&&this._update()}}},3164:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),y=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),A=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&_(t,e,i);return y(t,e),t},E=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},w=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},S=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCamera=void 0;const T=A(i(665)),x=i(887),M=i(8877),R=i(5174),P=i(3858);class C extends P.AbstractTreeNodeData{constructor(e,t,i){super(e,i),this._id=e,this._type=t,n.set(this,!1),r.set(this,!1),a.set(this,800),s.set(this,x.vec3.create()),o.set(this,x.vec3.create()),l.set(this,!0),c.set(this,1e3),u.set(this,void 0),h.set(this,1),d.set(this,void 0),f.set(this,void 0),p.set(this,!1),m.set(this,800),g.set(this,x.vec2.create()),v.set(this,!1),b.set(this,1),this._eventEngine=M.EventEngine.instance,this._stateEngine=M.StateEngine.instance,this._boundingBox=new R.Box,this._position=x.vec3.create(),this._target=x.vec3.create()}get active(){return w(this,n,"f")}set active(e){S(this,n,e,"f")}get autoAdjust(){return w(this,r,"f")}set autoAdjust(e){S(this,r,e,"f")}set boundingBox(e){this._boundingBox=e}get cameraMovementDuration(){return w(this,a,"f")}set cameraMovementDuration(e){S(this,a,e,"f")}get controls(){return this._controls}get defaultPosition(){return w(this,s,"f")}set defaultPosition(e){S(this,s,e,"f")}get defaultTarget(){return w(this,o,"f")}set defaultTarget(e){S(this,o,e,"f")}get enableCameraControls(){return w(this,l,"f")}set enableCameraControls(e){S(this,l,e,"f")}get far(){return w(this,c,"f")}set far(e){S(this,c,e,"f")}get id(){return this._id}get name(){return w(this,u,"f")}set name(e){S(this,u,e,"f")}get near(){return w(this,h,"f")}set near(e){S(this,h,e,"f")}get node(){return w(this,d,"f")}set node(e){S(this,d,e,"f")}get order(){return w(this,f,"f")}set order(e){S(this,f,e,"f")}get position(){return this._position}set position(e){this._position=e,this._controls.position=e}get revertAtMouseUp(){return w(this,p,"f")}set revertAtMouseUp(e){S(this,p,e,"f")}get revertAtMouseUpDuration(){return w(this,m,"f")}set revertAtMouseUpDuration(e){S(this,m,e,"f")}get sceneRotation(){return w(this,g,"f")}set sceneRotation(e){S(this,g,e,"f")}get target(){return this._target}set target(e){this._target=e,this._controls.target=e}get type(){return this._type}get useNodeData(){return w(this,v,"f")}set useNodeData(e){S(this,v,e,"f")}get viewportId(){return this._viewportId}get zoomExtentsFactor(){return w(this,b,"f")}set zoomExtentsFactor(e){S(this,b,e,"f")}animate(e,t){return E(this,void 0,void 0,(function*(){if(0===e.length)return Promise.resolve(!1);t||(t={}),t.duration=t.duration>=0?t.duration:this.cameraMovementDuration;const i=yield this._controls.animate(e,t);return i&&(this._position=this._controls.position,this._target=this._controls.target),i}))}reset(e){return 0===this.defaultPosition[0]&&0===this.defaultPosition[1]&&0===this.defaultPosition[2]&&0===this.defaultTarget[0]&&0===this.defaultTarget[1]&&0===this.defaultTarget[2]?this.zoomTo(void 0,e):this.set(x.vec3.clone(this.defaultPosition),x.vec3.clone(this.defaultTarget),e)}set(e,t,i){return E(this,void 0,void 0,(function*(){i||(i={}),i.duration=i.duration>=0?i.duration:this.cameraMovementDuration;const n=yield this._controls.animate([{position:x.vec3.clone(this.position),target:x.vec3.clone(this.target)},{position:e,target:t}],i);return n&&(this._position=this._controls.position,this._target=this._controls.target),n}))}update(e){if(this.useNodeData&&this.node&&this._viewportId)return!0;{const{position:t,target:i,sceneRotation:n}=this._controls.update(e);let r=!0;return x.vec3.equals(t,this.position)&&x.vec3.equals(i,this.target)&&(r=!1),this.position=x.vec3.clone(t),this.target=x.vec3.clone(i),this.sceneRotation=x.vec2.clone(n),r}}zoomTo(e,t){const{position:i,target:n}=this.calculateZoomTo(e);return this.set(i,n,t)}assignViewerInternal(e,t){this._viewportId=e,this._eventEngine.addListener(M.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,(()=>E(this,void 0,void 0,(function*(){if(!0===w(this,r,"f")){const e=this._eventEngine.addListener(M.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(()=>E(this,void 0,void 0,(function*(){this.zoomTo(),this._eventEngine.removeListener(e)}))))}}))));const i=()=>{!0===w(this,p,"f")&&this.reset({duration:w(this,m,"f")})};let n;t.addEventListener("mouseup",(()=>i()),!!T.supportsPassiveEvents&&{capture:!1,passive:!0}),t.addEventListener("mouseout",(()=>i()),!!T.supportsPassiveEvents&&{capture:!1,passive:!0}),t.addEventListener("touchend",(()=>i()),!!T.supportsPassiveEvents&&{capture:!1,passive:!0});const a=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";t.addEventListener(a,(()=>{clearTimeout(n),n=setTimeout(i,300)}),!!T.supportsPassiveEvents&&{capture:!1,passive:!0})}}t.AbstractCamera=C,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap},8065:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},g=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},v=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCamera=void 0;const b=i(8877),_=i(887),y=i(3858),A=i(4976),E=i(3164),w=i(8210),S=i(5904);class T extends E.AbstractCamera{constructor(e,t){super(e,A.CAMERA_TYPE.ORTHOGRAPHIC,t),n.set(this,b.Converter.instance),r.set(this,b.Logger.instance),a.set(this,y.Tree.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,-100),c.set(this,S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP),u.set(this,-100),h.set(this,100),d.set(this,100),f.set(this,{}),p.set(this,_.vec3.fromValues(0,1,0)),this._controls=new w.OrthographicCameraControls(this,!0)}get bottom(){return g(this,l,"f")}set bottom(e){v(this,l,e,"f")}get controls(){return this._controls}set controls(e){this._controls=e}get direction(){return g(this,c,"f")}set direction(e){const t=g(this,c,"f")!==e;switch(v(this,c,e,"f"),g(this,c,"f")){case S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:this.up=_.vec3.fromValues(0,1,0);break;case S.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:case S.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:this.up=_.vec3.fromValues(0,0,1);break;default:this.up=_.vec3.fromValues(0,-1,0)}if(t){const{position:e,target:t}=this.calculateZoomTo(void 0);this.defaultPosition=_.vec3.clone(e),this.defaultTarget=_.vec3.clone(t),this.position=_.vec3.clone(e),this.target=_.vec3.clone(t)}}get left(){return g(this,u,"f")}set left(e){v(this,u,e,"f")}get right(){return g(this,h,"f")}set right(e){v(this,h,e,"f")}get top(){return g(this,d,"f")}set top(e){v(this,d,e,"f")}get up(){return g(this,p,"f")}set up(e){v(this,p,e,"f")}get threeJsObject(){return g(this,f,"f")}applySettings(e){const t=e.camera.cameras[this.id];if(t){this.name=t.name,this.autoAdjust=t.autoAdjust,this.cameraMovementDuration=t.cameraMovementDuration,this.enableCameraControls=t.enableCameraControls,this.revertAtMouseUp=t.revertAtMouseUp,this.revertAtMouseUpDuration=t.revertAtMouseUpDuration,this.zoomExtentsFactor=t.zoomExtentsFactor;let e=g(this,n,"f").toVec3(t.position),i=g(this,n,"f").toVec3(t.target);this.defaultPosition=_.vec3.clone(e),this.defaultTarget=_.vec3.clone(i),this.position=e,this.target=i}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.renderingEngines[this._viewportId].boundingBoxCreated.then((()=>m(this,void 0,void 0,(function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=_.vec3.clone(this._controls.position),this.defaultTarget=_.vec3.clone(this._controls.target)})))),this._controls.applySettings(e)}assignViewer(e){if(e.closed)throw new b.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${e.id} not found.`);this.assignViewerInternal(e.id,e.canvas),this._controls.assignViewer(e.id,e.canvas),g(this,s,"f")&&g(this,o,"f")&&g(this,o,"f").removeDomEventListener(g(this,s,"f")),v(this,o,e.domEventEngine,"f"),v(this,s,g(this,o,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),"f"),this.boundingBox=g(this,a,"f").root.boundingBox.clone(),this._stateEngine.renderingEngines[e.id].boundingBoxCreated.then((()=>m(this,void 0,void 0,(function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))))}clone(){return new T(this.id,this.version)}calculateZoomTo(e,t=this.position,i=this.target){let n;if(n=e?e.clone():this._boundingBox.clone(),n.isEmpty())return{position:_.vec3.create(),target:_.vec3.create()};const r=2*n.boundingSphere.radius*this.zoomExtentsFactor,a=_.vec3.clone(n.boundingSphere.center);switch(g(this,c,"f")){case S.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:return{position:_.vec3.fromValues(a[0],a[1],a[2]+r),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:return{position:_.vec3.fromValues(a[0],a[1],a[2]-r),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:return{position:_.vec3.fromValues(a[0]+r,a[1],a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:return{position:_.vec3.fromValues(a[0]-r,a[1],a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:return{position:_.vec3.fromValues(a[0],a[1]+r,a[2]),target:_.vec3.clone(a)};case S.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:return{position:_.vec3.fromValues(a[0],a[1]-r,a[2]),target:_.vec3.clone(a)};default:return{position:_.vec3.fromValues(a[0],a[1],a[2]+r),target:_.vec3.clone(a)}}}project(e){const t=_.mat4.targetTo(_.mat4.create(),this.position,this.target,this.up),i=_.mat4.ortho(_.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return _.vec3.transformMat4(e,e,_.mat4.invert(t,t)),_.vec3.transformMat4(e,e,i),_.vec2.fromValues(e[0],e[1])}unproject(e,t=this.position,i=this.target){const n=_.mat4.targetTo(_.mat4.create(),this.position,this.target,this.up),r=_.mat4.ortho(_.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return _.vec3.transformMat4(e,e,_.mat4.invert(r,r)),_.vec3.transformMat4(e,e,n),_.vec3.clone(e)}}t.OrthographicCamera=T,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap},8926:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},f=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCamera=void 0;const p=i(8877),m=i(887),g=i(5174),v=i(3858),b=i(4976),_=i(3164),y=i(9599);class A extends _.AbstractCamera{constructor(e,t,i){super(e,b.CAMERA_TYPE.PERSPECTIVE,t),n.set(this,p.Converter.instance),r.set(this,p.Logger.instance),a.set(this,v.Tree.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,60),u.set(this,{}),d(this,l,i,"f"),this._controls=new y.PerspectiveCameraControls(this,!0)}get aspect(){return f(this,l,"f")}set aspect(e){d(this,l,e,"f")}get controls(){return this._controls}set controls(e){this._controls=e}get fov(){return f(this,c,"f")}set fov(e){d(this,c,e,"f")}get threeJsObject(){return f(this,u,"f")}applySettings(e){const t=e.camera.cameras[this.id];if(t){this.name=t.name,this.autoAdjust=t.autoAdjust,this.cameraMovementDuration=t.cameraMovementDuration,this.enableCameraControls=t.enableCameraControls,this.revertAtMouseUp=t.revertAtMouseUp,this.revertAtMouseUpDuration=t.revertAtMouseUpDuration,this.zoomExtentsFactor=t.zoomExtentsFactor;let e=f(this,n,"f").toVec3(t.position),i=f(this,n,"f").toVec3(t.target);this.defaultPosition=m.vec3.clone(e),this.defaultTarget=m.vec3.clone(i),this.position=e,this.target=i,this.fov=t.fov}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.renderingEngines[this._viewportId].boundingBoxCreated.then((()=>h(this,void 0,void 0,(function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=m.vec3.clone(this._controls.position),this.defaultTarget=m.vec3.clone(this._controls.target)})))),this._controls.applySettings(e)}assignViewer(e){if(e.closed)throw new p.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${e.id} not found.`);this.assignViewerInternal(e.id,e.canvas),this._controls.assignViewer(e.id,e.canvas),f(this,s,"f")&&f(this,o,"f")&&f(this,o,"f").removeDomEventListener(f(this,s,"f")),d(this,o,e.domEventEngine,"f"),d(this,s,f(this,o,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),"f"),this.boundingBox=f(this,a,"f").root.boundingBox.clone(),this._stateEngine.renderingEngines[e.id].boundingBoxCreated.then((()=>h(this,void 0,void 0,(function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))))}clone(){return new A(this.id,this.version,this.aspect)}calculateZoomTo(e,t=this.position,i=this.target){let n;if(n=e?e.clone():this._boundingBox.clone(),n.isEmpty())return{position:m.vec3.create(),target:m.vec3.create()};const r=t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2];let a=m.vec3.fromValues((n.max[0]+n.min[0])/2,(n.max[1]+n.min[1])/2,(n.max[2]+n.min[2])/2);t[0]===i[0]&&t[1]===i[1]&&t[2]===i[2]&&(t=m.vec3.fromValues(a[0],a[1]-7.5,a[2]+5));const s=m.vec3.subtract(m.vec3.create(),n.max,a);m.vec3.multiply(s,s,r?m.vec3.fromValues(2,2,2):m.vec3.fromValues(this.zoomExtentsFactor,this.zoomExtentsFactor,this.zoomExtentsFactor)),n=new g.Box(m.vec3.subtract(m.vec3.create(),a,s),m.vec3.add(m.vec3.create(),a,s));const o=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),a,t));let l=m.vec3.normalize(m.vec3.create(),m.vec3.cross(m.vec3.create(),m.vec3.fromValues(0,0,1),o)),c=m.vec3.normalize(m.vec3.create(),m.vec3.cross(m.vec3.create(),l,o)),u=m.vec3.add(m.vec3.create(),a,m.vec3.multiply(m.vec3.create(),o,m.vec3.fromValues(-1e-8,-1e-8,-1e-8))),h=[];h.push(m.vec3.fromValues(n.min[0],n.min[1],n.min[2])),h.push(m.vec3.fromValues(n.min[0],n.min[1],n.max[2])),h.push(m.vec3.fromValues(n.min[0],n.max[1],n.min[2])),h.push(m.vec3.fromValues(n.min[0],n.max[1],n.max[2])),h.push(m.vec3.fromValues(n.max[0],n.min[1],n.min[2])),h.push(m.vec3.fromValues(n.max[0],n.min[1],n.max[2])),h.push(m.vec3.fromValues(n.max[0],n.max[1],n.min[2])),h.push(m.vec3.fromValues(n.max[0],n.max[1],n.max[2]));let d=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),l,this.fov/2*(Math.PI/180)))),f=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),l,-this.fov/2*(Math.PI/180))));const p=r?1.5:this.aspect||1.5;let v=2*Math.atan(Math.tan(this.fov*Math.PI/180/2)*p),b=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),c,v/2))),_=m.vec3.normalize(m.vec3.create(),m.vec3.transformQuat(m.vec3.create(),o,m.quat.setAxisAngle(m.quat.create(),c,-v/2))),y=new g.Plane(m.vec3.clone(l),0);y.setFromNormalAndCoplanarPoint(m.vec3.clone(l),m.vec3.clone(a));let A=new g.Plane(m.vec3.fromValues(0,0,1),0);A.setFromNormalAndCoplanarPoint(m.vec3.clone(c),m.vec3.clone(a));let E=0;for(let e=0;e<h.length;e++){let t=y.clampPoint(h[e]),i=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),t,u));if(m.vec3.dot(o,d)>m.vec3.dot(o,i)){const e=m.vec3.multiply(m.vec3.create(),m.vec3.dot(d,i)>m.vec3.dot(f,i)?d:f,m.vec3.fromValues(-1,-1,-1)),n=A.intersect(t,e);if(n){const i=m.vec3.add(m.vec3.create(),m.vec3.multiply(m.vec3.create(),e,m.vec3.fromValues(n,n,n)),t);E=Math.max(E,m.vec3.distance(a,i))}}if(t=A.clampPoint(h[e]),i=m.vec3.normalize(m.vec3.create(),m.vec3.subtract(m.vec3.create(),t,u)),m.vec3.dot(o,b)>m.vec3.dot(o,i)){const e=m.vec3.multiply(m.vec3.create(),m.vec3.dot(b,i)>m.vec3.dot(_,i)?b:_,m.vec3.fromValues(-1,-1,-1)),n=y.intersect(t,e);if(n){const i=m.vec3.add(m.vec3.create(),m.vec3.multiply(m.vec3.create(),e,m.vec3.fromValues(n,n,n)),t);E=Math.max(E,m.vec3.distance(a,i))}}}return u=m.vec3.add(m.vec3.create(),a,m.vec3.multiply(m.vec3.create(),o,m.vec3.fromValues(-E,-E,-E))),{position:u,target:a}}project(e,t=this.position,i=this.target){const n=m.mat4.targetTo(m.mat4.create(),t,i,m.vec3.fromValues(0,0,1)),r=this.aspect||1.5,a=m.mat4.perspective(m.mat4.create(),this.fov/(180/Math.PI),r,this.near,this.far);return m.vec3.transformMat4(e,e,m.mat4.invert(n,n)),m.vec3.transformMat4(e,e,a),m.vec2.fromValues(e[0],e[1])}unproject(e,t=this.position,i=this.target){const n=m.mat4.targetTo(m.mat4.create(),t,i,m.vec3.fromValues(0,0,1)),r=this.aspect||1.5,a=m.mat4.perspective(m.mat4.create(),this.fov/(180/Math.PI),r,this.near,this.far);return m.vec3.transformMat4(e,e,m.mat4.invert(a,a)),m.vec3.transformMat4(e,e,n),m.vec3.clone(e)}}t.PerspectiveCamera=A,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap},7938:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCameraControls=void 0;const n=i(887),r=i(8877),a=i(1179);t.AbstractCameraControls=class{constructor(e,t,i){this._camera=e,this._enabled=t,this._eventEngine=r.EventEngine.instance,this._manualInteraction=!1,this._moving=!1,this._movingDuration=0,this._nonmanualInteraction=!1,this._position=n.vec3.create(),this._sceneRotation=n.vec2.create(),this._target=n.vec3.create(),this._cameraInterpolationManager=new a.CameraInterpolationManager(this._camera,this),this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]}}get camera(){return this._camera}set camera(e){this._camera=e}get cameraControlsEventDistribution(){return this._cameraControlsEventDistribution}get canvas(){return this._canvas}set canvas(e){this._canvas=e}get enabled(){return this._enabled}set enabled(e){e||(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteraction=!1,this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()),this._enabled=e}get position(){return this._position}set position(e){this._position=e}get sceneRotation(){return this._sceneRotation}set sceneRotation(e){this._sceneRotation=e}get target(){return this._target}set target(e){this._target=e}animate(e,t){return t&&0===t.duration?(this._position=e[e.length-1].position,this._target=e[e.length-1].target,new Promise((e=>e(!0)))):(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraInterpolationManager.interpolate(e,t))}applyPositionMatrix(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({matrix:e}))}applyPositionVector(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({vector:e}))}applyRotation(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.sceneRotation.push({theta:e[0],phi:e[1]})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.sceneRotation.push({theta:e[0],phi:e[1]}))}applyTargetMatrix(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({matrix:e}))}applyTargetVector(e,t){this._manualInteraction||t?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({vector:e}))}applyUpMatrix(e,t){throw new Error("Method not implemented.")}assignViewer(e,t){this._canvas=t,this._viewportId=e}getPositionWithManualUpdates(){let e=n.vec3.clone(this._position);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.position.length-1;t>=0;t--)e=this._manualInteractionTransformations.position[t].matrix?n.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[t].matrix):n.vec3.add(e,e,this._manualInteractionTransformations.position[t].vector);return e}getPositionWithUpdates(){return this.getPosition()}getTargetWithManualUpdates(){let e=n.vec3.clone(this._target);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.target.length-1;t>=0;t--)e=this._manualInteractionTransformations.target[t].matrix?n.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[t].matrix):n.vec3.add(e,e,this._manualInteractionTransformations.target[t].vector);return e}getTargetWithUpdates(){return this.getTarget()}isMoving(){return this._manualInteraction||this._nonmanualInteraction}isWithinRestrictions(e,t){return this._cameraLogic.isWithinRestrictions(e,t)}reset(){this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()}update(e){if(!this._enabled)return{position:n.vec3.clone(this._position),target:n.vec3.clone(this._target),sceneRotation:n.vec2.clone(this._sceneRotation)};!0===this._manualInteraction&&this._cameraInterpolationManager.active()&&this._cameraInterpolationManager.stop();const{position:t,target:i,sceneRotation:a}=this._cameraLogic.restrict(this.getPosition(),this.getTarget(),this.getSceneRotation());this._position=n.vec3.clone(t),this._target=n.vec3.clone(i),this._sceneRotation=a?n.vec2.clone(a):n.vec2.create(),this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteraction=this._cameraInterpolationManager.active(),this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraLogic.update(e,this._nonmanualInteraction);const s=this._moving,o={position:n.vec3.clone(this._position),target:n.vec3.clone(this._target),sceneRotation:n.vec2.clone(this._sceneRotation)};switch(this._movingDuration+=e,this._moving=this._manualInteraction||this._nonmanualInteraction,!0){case s!==this._moving&&!0===this._moving:this._eventEngine.emitEvent(r.EVENTTYPE.CAMERA.CAMERA_START,{viewportId:this._viewportId,cameraId:this.camera.id});break;case s!==this._moving&&!1===this._moving:this._eventEngine.emitEvent(r.EVENTTYPE.CAMERA.CAMERA_END,{viewportId:this._viewportId,cameraId:this.camera.id});break;default:this._eventEngine.emitEvent(r.EVENTTYPE.CAMERA.CAMERA_MOVE,{viewportId:this._viewportId,cameraId:this.camera.id})}return this._moving||(this._movingDuration=0),o}getPosition(){let e=n.vec3.clone(this._position);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.position.length-1;t>=0;t--)e=this._manualInteractionTransformations.position[t].matrix?n.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[t].matrix):n.vec3.add(e,e,this._manualInteractionTransformations.position[t].vector);else if(this._nonmanualInteraction)for(let t=this._nonmanualInteractionTransformations.position.length-1;t>=0;t--)e=this._nonmanualInteractionTransformations.position[t].matrix?n.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.position[t].matrix):n.vec3.add(e,e,this._nonmanualInteractionTransformations.position[t].vector);return e}getSceneRotation(){let e=n.vec2.clone(this._sceneRotation);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.sceneRotation.length-1;t>=0;t--)e=n.vec2.add(e,e,n.vec2.fromValues(this._manualInteractionTransformations.sceneRotation[t].theta,this._manualInteractionTransformations.sceneRotation[t].phi));else if(this._nonmanualInteraction)for(let t=this._nonmanualInteractionTransformations.sceneRotation.length-1;t>=0;t--)e=n.vec2.add(e,e,n.vec2.fromValues(this._nonmanualInteractionTransformations.sceneRotation[t].theta,this._nonmanualInteractionTransformations.sceneRotation[t].phi));return e}getTarget(){let e=n.vec3.clone(this._target);if(this._manualInteraction)for(let t=this._manualInteractionTransformations.target.length-1;t>=0;t--)e=this._manualInteractionTransformations.target[t].matrix?n.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[t].matrix):n.vec3.add(e,e,this._manualInteractionTransformations.target[t].vector);else if(this._nonmanualInteraction)for(let t=this._nonmanualInteractionTransformations.target.length-1;t>=0;t--)e=this._nonmanualInteractionTransformations.target[t].matrix?n.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.target[t].matrix):n.vec3.add(e,e,this._nonmanualInteractionTransformations.target[t].vector);return e}}},8210:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraControls=void 0;const n=i(8877),r=i(1990),a=i(7938),s=i(704),o=i(3726);class l extends a.AbstractCameraControls{constructor(e,t){super(e,t,r.CAMERA_TYPE.ORTHOGRAPHIC),this._damping=.1,this._enableKeyPan=!1,this._enablePan=!0,this._enableZoom=!0,this._input={keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:2}},this._keyPanSpeed=.5,this._movementSmoothness=.5,this._panSpeed=.5,this._zoomSpeed=.5,this._stateEngine=n.StateEngine.instance,this._cameraLogic=new o.CameraControlsLogic(this),this._cameraControlsEventDistribution=new s.CameraControlsEventDistribution(this,this._cameraLogic)}applySettings(e){const t=e.camera.cameras[this.camera.id];if(!t)return;this.reset();const i=t.controls;this.damping=i.damping,this.enableKeyPan=i.enableKeyPan,this.enablePan=i.enablePan,this.enableZoom=i.enableZoom,this.keyPanSpeed=i.keyPanSpeed,this.movementSmoothness=i.movementSmoothness,this.panSpeed=i.panSpeed,this.zoomSpeed=i.zoomSpeed}get damping(){return this._damping}set damping(e){this._damping=e}get enableKeyPan(){return this._enableKeyPan}set enableKeyPan(e){this._enableKeyPan=e}get enablePan(){return this._enablePan}set enablePan(e){this._enablePan=e}get enableZoom(){return this._enableZoom}set enableZoom(e){this._enableZoom=e}get input(){return this._input}set input(e){this._input=e}get keyPanSpeed(){return this._keyPanSpeed}set keyPanSpeed(e){this._keyPanSpeed=e}get movementSmoothness(){return this._movementSmoothness}set movementSmoothness(e){this._movementSmoothness=e}get panSpeed(){return this._panSpeed}set panSpeed(e){this._panSpeed=e}get zoomSpeed(){return this._zoomSpeed}set zoomSpeed(e){this._zoomSpeed=e}}t.OrthographicCameraControls=l},9599:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCameraControls=void 0;const n=i(8877),r=i(887),a=i(1990),s=i(7938),o=i(5173),l=i(3118);class c extends s.AbstractCameraControls{constructor(e,t){super(e,t,a.CAMERA_TYPE.PERSPECTIVE),this._converter=n.Converter.instance,this._stateEngine=n.StateEngine.instance,this._autoRotationSpeed=0,this._cubePositionRestriction={min:r.vec3.fromValues(-1/0,-1/0,-1/0),max:r.vec3.fromValues(1/0,1/0,1/0)},this._cubeTargetRestriction={min:r.vec3.fromValues(-1/0,-1/0,-1/0),max:r.vec3.fromValues(1/0,1/0,1/0)},this._damping=.1,this._enableAutoRotation=!1,this._enableAzimuthRotation=!0,this._enableKeyPan=!1,this._enablePan=!0,this._enablePolarRotation=!0,this._enableRotation=!0,this._enableTurntableControls=!1,this._enableZoom=!0,this._input={keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:2}},this._keyPanSpeed=.5,this._movementSmoothness=.5,this._panSpeed=.5,this._rotationRestriction={minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},this._rotationSpeed=.5,this._spherePositionRestriction={center:r.vec3.create(),radius:1/0},this._sphereTargetRestriction={center:r.vec3.create(),radius:1/0},this._turntableCenter=r.vec3.create(),this._zoomRestriction={minDistance:0,maxDistance:1/0},this._zoomSpeed=.5,this._cameraLogic=new l.CameraControlsLogic(this),this._cameraControlsEventDistribution=new o.CameraControlsEventDistribution(this,this._cameraLogic)}get autoRotationSpeed(){return this._autoRotationSpeed}set autoRotationSpeed(e){this._autoRotationSpeed=e}get cubePositionRestriction(){return this._cubePositionRestriction}set cubePositionRestriction(e){this._cubePositionRestriction=e}get cubeTargetRestriction(){return this._cubeTargetRestriction}set cubeTargetRestriction(e){this._cubeTargetRestriction=e}get damping(){return this._damping}set damping(e){this._damping=e}get enableAutoRotation(){return this._enableAutoRotation}set enableAutoRotation(e){this._enableAutoRotation=e}get enableAzimuthRotation(){return this._enableAzimuthRotation}set enableAzimuthRotation(e){this._enableAzimuthRotation=e}get enableKeyPan(){return this._enableKeyPan}set enableKeyPan(e){this._enableKeyPan=e}get enablePan(){return this._enablePan}set enablePan(e){this._enablePan=e}get enablePolarRotation(){return this._enablePolarRotation}set enablePolarRotation(e){this._enablePolarRotation=e}get enableRotation(){return this._enableRotation}set enableRotation(e){this._enableRotation=e}get enableTurntableControls(){return this._enableTurntableControls}set enableTurntableControls(e){this._enableTurntableControls=e}get enableZoom(){return this._enableZoom}set enableZoom(e){this._enableZoom=e}get input(){return this._input}set input(e){this._input=e}get keyPanSpeed(){return this._keyPanSpeed}set keyPanSpeed(e){this._keyPanSpeed=e}get movementSmoothness(){return this._movementSmoothness}set movementSmoothness(e){this._movementSmoothness=e}get panSpeed(){return this._panSpeed}set panSpeed(e){this._panSpeed=e}get rotationRestriction(){return this._rotationRestriction}set rotationRestriction(e){this._rotationRestriction=e}get rotationSpeed(){return this._rotationSpeed}set rotationSpeed(e){this._rotationSpeed=e}get spherePositionRestriction(){return this._spherePositionRestriction}set spherePositionRestriction(e){this._spherePositionRestriction=e}get sphereTargetRestriction(){return this._sphereTargetRestriction}set sphereTargetRestriction(e){this._sphereTargetRestriction=e}get turntableCenter(){return this._turntableCenter}set turntableCenter(e){this._turntableCenter=e}get zoomRestriction(){return this._zoomRestriction}set zoomRestriction(e){this._zoomRestriction=e}get zoomSpeed(){return this._zoomSpeed}set zoomSpeed(e){this._zoomSpeed=e}applySettings(e){const t=e.camera.cameras[this.camera.id];if(!t)return;this.reset();const i=t.controls;this.autoRotationSpeed=i.autoRotationSpeed,this.damping=i.damping,this.enableAutoRotation=i.enableAutoRotation,this.enableKeyPan=i.enableKeyPan,this.enablePan=i.enablePan,this.enableRotation=i.enableRotation,this.enableZoom=i.enableZoom,this.keyPanSpeed=i.keyPanSpeed,this.movementSmoothness=i.movementSmoothness,this.rotationSpeed=i.rotationSpeed,this.panSpeed=i.panSpeed,this.zoomSpeed=i.zoomSpeed,null===i.restrictions.position.cube.min.x&&(i.restrictions.position.cube.min.x=-1/0),null===i.restrictions.position.cube.min.y&&(i.restrictions.position.cube.min.y=-1/0),null===i.restrictions.position.cube.min.z&&(i.restrictions.position.cube.min.z=-1/0),null===i.restrictions.position.cube.max.x&&(i.restrictions.position.cube.max.x=1/0),null===i.restrictions.position.cube.max.y&&(i.restrictions.position.cube.max.y=1/0),null===i.restrictions.position.cube.max.z&&(i.restrictions.position.cube.max.z=1/0),null===i.restrictions.position.sphere.radius&&(i.restrictions.position.sphere.radius=1/0),null===i.restrictions.target.cube.min.x&&(i.restrictions.target.cube.min.x=-1/0),null===i.restrictions.target.cube.min.y&&(i.restrictions.target.cube.min.y=-1/0),null===i.restrictions.target.cube.min.z&&(i.restrictions.target.cube.min.z=-1/0),null===i.restrictions.target.cube.max.x&&(i.restrictions.target.cube.max.x=1/0),null===i.restrictions.target.cube.max.y&&(i.restrictions.target.cube.max.y=1/0),null===i.restrictions.target.cube.max.z&&(i.restrictions.target.cube.max.z=1/0),null===i.restrictions.target.sphere.radius&&(i.restrictions.target.sphere.radius=1/0),null===i.restrictions.rotation.minAzimuthAngle&&(i.restrictions.rotation.minAzimuthAngle=-1/0),null===i.restrictions.rotation.maxAzimuthAngle&&(i.restrictions.rotation.maxAzimuthAngle=1/0),null===i.restrictions.zoom.maxDistance&&(i.restrictions.zoom.maxDistance=1/0),this.cubePositionRestriction={min:this._converter.toVec3(i.restrictions.position.cube.min),max:this._converter.toVec3(i.restrictions.position.cube.max)},this.spherePositionRestriction={center:this._converter.toVec3(i.restrictions.position.sphere.center),radius:i.restrictions.position.sphere.radius},this.cubeTargetRestriction={min:this._converter.toVec3(i.restrictions.target.cube.min),max:this._converter.toVec3(i.restrictions.target.cube.max)},this.sphereTargetRestriction={center:this._converter.toVec3(i.restrictions.target.sphere.center),radius:i.restrictions.target.sphere.radius},this.rotationRestriction=i.restrictions.rotation,this.zoomRestriction=i.restrictions.zoom}}t.PerspectiveCameraControls=c},704:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsEventDistribution=void 0,t.CameraControlsEventDistribution=class{constructor(e,t){this._controls=e,this._cameraLogic=t,this._active={zoom:!1,pan:!1},this._activeEvents=!0}activateCameraEvents(){this._activeEvents=!0}deactivateCameraEvents(){this._activeEvents=!1}onDown(e){if(!1===this._controls.camera.active)return;const{x:t,y:i}=this.convertInput(e),n=window.TouchEvent&&e instanceof TouchEvent?e.touches.length:e.button,r=window.TouchEvent&&e instanceof TouchEvent?this._controls.input.touch:this._controls.input.mouse;if(n===r.pan&&this._controls.enablePan?(this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._active.pan=!0):this._active.pan=!1,n===r.zoom&&this._controls.enableZoom){let n=t,r=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&e.touches.length>=2&&(n=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),r=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(n,r,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent),this._active.zoom=!0}else this._active.zoom=!1}onKey(e){if(!1!==this._controls.camera.active&&this._controls.enableKeyPan)switch(e.keyCode){case this._controls.input.keys.up:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.down:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*-this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.left:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.right:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*-this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation()}}onKeyDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onKey(e)}onMouseDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onMouseEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onMouseMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onMouseOut(e){this._controls.camera.active}onMouseUp(e){this._controls.camera.active}onMouseWheel(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onWheel(e)}onMove(e){if(!1===this._controls.camera.active)return;const{x:t,y:i}=this.convertInput(e);if(this._controls.enablePan&&this._active.pan&&this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._controls.enableZoom&&this._active.zoom){let n=t,r=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&e.touches.length>=2&&(n=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),r=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(n,r,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent)}}onTouchCancel(e){this._controls.camera.active}onTouchEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onTouchMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onTouchStart(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onTouchUp(e){this._controls.camera.active}onUp(e){!1!==this._controls.camera.active&&(this._active.zoom=!1,this._active.pan=!1)}onWheel(e){if(!1===this._controls.camera.active)return;if(!this._controls.enableZoom)return;let t=0;void 0!==e.deltaY?t=-e.deltaY:void 0!==e.detail&&(t=-e.detail),Math.sign(t)>0?(this._cameraLogic.zoom(0,0,!1,!1),this._cameraLogic.zoom(1,0,!0,!1)):(this._cameraLogic.zoom(1,0,!1,!1),this._cameraLogic.zoom(0,0,!0,!1))}reset(){this._active={zoom:!1,pan:!1}}convertInput(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:e.touches.length<1?{x:0,y:0}:1===e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:(e.touches[0].pageX+e.touches[1].pageX)/2,y:(e.touches[0].pageY+e.touches[1].pageY)/2}}}},3726:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsLogic=void 0;const n=i(887);t.CameraControlsLogic=class{constructor(e){this._controls=e,this._adjustedSettings={damping:()=>this._controls.damping*this._settingsAdjustments.damping,movementSmoothness:()=>this._controls.movementSmoothness*this._settingsAdjustments.movementSmoothness,panSpeed:()=>this._controls.panSpeed*this._settingsAdjustments.panSpeed,zoomSpeed:()=>this._controls.zoomSpeed*this._settingsAdjustments.zoomSpeed},this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:n.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=n.vec2.create(),this._panEnd=n.vec2.create(),this._panStart=n.vec2.create(),this._settingsAdjustments={damping:1,movementSmoothness:1,panSpeed:1.75,zoomSpeed:.025},this._touchAdjustments={damping:1,movementSmoothness:1,panSpeed:4/1.75,zoomSpeed:100}}isWithinRestrictions(e,t){return!0}pan(e,t,i,r){if(i){if(this._panEnd=n.vec2.fromValues(e,t),n.vec2.sub(this._panDelta,this._panEnd,this._panStart),0===this._panDelta[0]&&0===this._panDelta[1])return;n.vec2.copy(this._panStart,this._panEnd);const i=this._adjustedSettings.panSpeed()*(r?this._touchAdjustments.panSpeed:1),a=this.panDeltaToOffset(n.vec2.mul(n.vec2.create(),this._panDelta,n.vec2.fromValues(i,i)));this._damping.pan.duration>0&&(a[0]<0?a[0]=Math.min(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]):a[0]=Math.max(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]),a[1]<0?a[1]=Math.min(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]):a[1]=Math.max(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]),a[2]<0?a[2]=Math.min(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]):a[2]=Math.max(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]));const s=1-Math.max(.01,Math.min(.99,this._adjustedSettings.damping())),o=(Math.log(1/Math.abs(a[0]))-5*Math.log(10))/Math.log(s),l=(Math.log(1/Math.abs(a[1]))-5*Math.log(10))/Math.log(s),c=(Math.log(1/Math.abs(a[2]))-5*Math.log(10))/Math.log(s);this._damping.pan.time=0,this._damping.pan.duration=16.6666*Math.max(o,Math.max(l,c)),this._damping.pan.offset=n.vec3.clone(a),this._damping.rotation.duration=0,this._damping.zoom.duration=0,this._controls.applyTargetVector(a,!0),this._controls.applyPositionVector(a,!0)}else this._panStart=n.vec2.fromValues(e,t)}reset(){this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:n.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=n.vec2.create(),this._panEnd=n.vec2.create(),this._panStart=n.vec2.create()}restrict(e,t){return{position:e,target:t}}update(e,t){!0===t&&(this._damping.zoom.duration=0,this._damping.pan.duration=0);const i=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping()));if(this._damping.pan.duration>0)if(this._damping.pan.time+e>this._damping.pan.duration)this._damping.pan.time=this._damping.pan.duration,this._damping.pan.duration=0;else{this._damping.pan.time+=e;const t=this._damping.pan.time/16.6666,r=Math.pow(i,t),a=n.vec3.multiply(n.vec3.create(),this._damping.pan.offset,n.vec3.fromValues(r,r,r));this._controls.applyTargetVector(a),this._controls.applyPositionVector(a)}else this._damping.pan.time=0;if(this._damping.zoom.duration>0)if(this._damping.zoom.time+e>this._damping.zoom.duration)this._damping.zoom.time=this._damping.zoom.duration,this._damping.zoom.duration=0;else{this._damping.zoom.time+=e;const t=this._damping.zoom.time/16.6666,r=this._damping.zoom.delta*Math.pow(i,t),a=n.vec3.distance(this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())*(1-r),s=n.vec3.create(),o=n.vec3.create();n.vec3.normalize(s,n.vec3.subtract(s,this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())),n.vec3.add(o,this._controls.getPositionWithManualUpdates(),n.vec3.multiply(o,s,n.vec3.fromValues(a,a,a))),n.vec3.subtract(o,o,this._controls.getTargetWithManualUpdates()),this._controls.applyTargetVector(o,!0)}else this._damping.zoom.time=0}zoom(e,t,i,r){const a=Math.sqrt(e*e+t*t);if(i){this._dollyEnd=a,this._dollyDelta=this._dollyEnd-this._dollyStart,this._dollyStart=this._dollyEnd,this._damping.zoom.duration>0&&(this._dollyDelta<0?this._dollyDelta=Math.min(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta):this._dollyDelta=Math.max(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta));const e=this._dollyDelta*this._adjustedSettings.zoomSpeed()*(r?this._touchAdjustments.zoomSpeed:1),t=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),i=(Math.log(1/Math.abs(this._dollyDelta))-5*Math.log(10))/Math.log(t);this._damping.zoom.time=0,this._damping.zoom.duration=16.6666*i,this._damping.zoom.delta=e,this._damping.pan.duration=0;const s=n.vec3.distance(this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())*(1-e),o=n.vec3.create(),l=n.vec3.create();n.vec3.normalize(o,n.vec3.subtract(o,this._controls.getTargetWithManualUpdates(),this._controls.getPositionWithManualUpdates())),n.vec3.add(l,this._controls.getPositionWithManualUpdates(),n.vec3.multiply(l,o,n.vec3.fromValues(s,s,s))),n.vec3.subtract(l,l,this._controls.getTargetWithManualUpdates()),this._controls.applyTargetVector(l,!0)}else this._dollyStart=a}panDeltaToOffset(e){var t,i;const r=n.vec3.create(),a=n.vec3.create();if(!this._controls.canvas)return r;if(0==this._controls.canvas.clientWidth||0==this._controls.canvas.clientHeight)return r;n.vec3.subtract(r,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates());const s=this._controls.camera,o=n.mat4.targetTo(n.mat4.create(),s.position,s.target,s.up),l=n.vec3.fromValues(o[0],o[1],o[2]),c=-e[0]*(s.right-s.left)*.5/(null===(t=this._controls.canvas)||void 0===t?void 0:t.clientHeight);n.vec3.multiply(l,l,n.vec3.fromValues(c,c,c)),n.vec3.add(a,a,l);const u=n.vec3.fromValues(o[4],o[5],o[6]),h=e[1]*(s.right-s.left)*.5/(null===(i=this._controls.canvas)||void 0===i?void 0:i.clientHeight);return n.vec3.multiply(u,u,n.vec3.fromValues(h,h,h)),n.vec3.add(a,a,u),n.vec3.clone(a)}}},5173:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsEventDistribution=void 0,t.CameraControlsEventDistribution=class{constructor(e,t){this._controls=e,this._cameraLogic=t,this._active={rotation:!1,zoom:!1,pan:!1},this._activeEvents=!0}activateCameraEvents(){this._activeEvents=!0}deactivateCameraEvents(){this._activeEvents=!1,this.reset()}onDown(e){if(!1===this._controls.camera.active)return;const{x:t,y:i}=this.convertInput(e),n=window.TouchEvent&&e instanceof TouchEvent?e.touches.length:e.button,r=window.TouchEvent&&e instanceof TouchEvent?this._controls.input.touch:this._controls.input.mouse;if(n===r.rotate&&this._controls.enableRotation?(this._cameraLogic.rotate(t,i,this._active.rotation,window.TouchEvent&&e instanceof TouchEvent),this._active.rotation=!0):this._active.rotation=!1,n===r.pan&&this._controls.enablePan?(this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._active.pan=!0):this._active.pan=!1,n===r.zoom&&this._controls.enableZoom){let n=t,r=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&e.touches.length>=2&&(n=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),r=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(n,r,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent),this._active.zoom=!0}else this._active.zoom=!1}onKey(e){if(!1!==this._controls.camera.active&&this._controls.enableKeyPan)switch(e.keyCode){case this._controls.input.keys.up:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.down:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,.05*-this._controls.keyPanSpeed,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.left:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.right:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(.05*-this._controls.keyPanSpeed,0,!0,!1),e.preventDefault(),e.stopPropagation()}}onKeyDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onKey(e)}onMouseDown(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onMouseEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onMouseMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onMouseOut(e){this._controls.camera.active}onMouseUp(e){this._controls.camera.active}onMouseWheel(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onWheel(e)}onMove(e){if(!1===this._controls.camera.active)return;const{x:t,y:i}=this.convertInput(e);if(this._controls.enableRotation&&this._active.rotation&&this._cameraLogic.rotate(t,i,this._active.rotation,window.TouchEvent&&e instanceof TouchEvent),this._controls.enablePan&&this._active.pan&&this._cameraLogic.pan(t,i,this._active.pan,window.TouchEvent&&e instanceof TouchEvent),this._controls.enableZoom&&this._active.zoom){let n=t,r=i;window.TouchEvent&&e instanceof TouchEvent&&2===this._controls.input.touch.zoom&&e.touches.length>=2&&(n=(e.touches[0].pageX-e.touches[1].pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),r=(e.touches[0].pageY-e.touches[1].pageY)/window.innerHeight),this._cameraLogic.zoom(n,r,this._active.zoom,window.TouchEvent&&e instanceof TouchEvent)}}onTouchCancel(e){this._controls.camera.active}onTouchEnd(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onUp(e)}onTouchMove(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onMove(e)}onTouchStart(e){!1!==this._controls.camera.active&&this._activeEvents&&this.onDown(e)}onTouchUp(e){this._controls.camera.active}onUp(e){!1!==this._controls.camera.active&&(this._active.rotation=!1,this._active.zoom=!1,this._active.pan=!1)}onWheel(e){if(!1===this._controls.camera.active)return;if(!this._activeEvents)return;if(!this._controls.enableZoom)return;let t=0;void 0!==e.deltaY?t=-e.deltaY:void 0!==e.detail&&(t=-e.detail),Math.sign(t)>0?(this._cameraLogic.zoom(0,0,!1,!1),this._cameraLogic.zoom(1,0,!0,!1)):(this._cameraLogic.zoom(1,0,!1,!1),this._cameraLogic.zoom(0,0,!0,!1))}reset(){this._active={rotation:!1,zoom:!1,pan:!1}}convertInput(e){return e instanceof MouseEvent?{x:e.clientX,y:e.clientY}:e.touches.length<1?{x:0,y:0}:1===e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:{x:(e.touches[0].pageX+e.touches[1].pageX)/2,y:(e.touches[0].pageY+e.touches[1].pageY)/2}}}},3118:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraControlsLogic=void 0;const n=i(887),r=i(5174);t.CameraControlsLogic=class{constructor(e){this._controls=e,this._adjustedSettings={autoRotationSpeed:()=>this._controls.autoRotationSpeed*this._settingsAdjustments.autoRotationSpeed,damping:()=>this._controls.damping*this._settingsAdjustments.damping,movementSmoothness:()=>this._controls.movementSmoothness*this._settingsAdjustments.movementSmoothness,panSpeed:()=>this._controls.panSpeed*this._settingsAdjustments.panSpeed,rotationSpeed:()=>this._controls.rotationSpeed*this._settingsAdjustments.rotationSpeed,zoomSpeed:()=>this._controls.zoomSpeed*this._settingsAdjustments.zoomSpeed},this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:n.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=n.vec2.create(),this._panEnd=n.vec2.create(),this._panStart=n.vec2.create(),this._rotateDelta=n.vec2.create(),this._rotateEnd=n.vec2.create(),this._rotateStart=n.vec2.create(),this._settingsAdjustments={autoRotationSpeed:2*Math.PI/60/60,damping:1,movementSmoothness:1,panSpeed:1.75,rotationSpeed:Math.PI,zoomSpeed:.025},this._touchAdjustments={autoRotationSpeed:1,damping:1,movementSmoothness:1,panSpeed:1/1.75,rotationSpeed:1.5,zoomSpeed:100},this._quat=n.quat.fromValues(-Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4)),this._quatInverse=n.quat.fromValues(Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4))}isWithinRestrictions(e,t){const i=new r.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),a=new r.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),s=new r.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),o=new r.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);if(!i.containsPoint(e)||!a.containsPoint(e))return!1;if(!s.containsPoint(t)||!o.containsPoint(t))return!1;const l=n.vec3.distance(e,t);if(l>this._controls.zoomRestriction.maxDistance||l<this._controls.zoomRestriction.minDistance)return!1;const c=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),u=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),h=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),d=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(h!==-1/0||d!==1/0||0!==c||180!==u){const i=n.vec3.sub(n.vec3.create(),e,t);n.vec3.transformQuat(i,i,this._quat);const a=(new r.Spherical).fromVec3(i);if(a.theta<h||a.theta>d||a.phi<c||a.phi>u)return!1}return!0}pan(e,t,i,r){if(i){if(this._panEnd=n.vec2.fromValues(e,t),n.vec2.sub(this._panDelta,this._panEnd,this._panStart),0===this._panDelta[0]&&0===this._panDelta[1])return;n.vec2.copy(this._panStart,this._panEnd);const i=this._adjustedSettings.panSpeed()*(r?this._touchAdjustments.panSpeed:1),a=this.panDeltaToOffset(n.vec2.mul(n.vec2.create(),this._panDelta,n.vec2.fromValues(i,i)));this._damping.pan.duration>0&&(a[0]<0?a[0]=Math.min(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]):a[0]=Math.max(a[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]),a[1]<0?a[1]=Math.min(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]):a[1]=Math.max(a[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]),a[2]<0?a[2]=Math.min(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]):a[2]=Math.max(a[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]));const s=1-Math.max(.01,Math.min(.99,this._adjustedSettings.damping())),o=(Math.log(1/Math.abs(a[0]))-5*Math.log(10))/Math.log(s),l=(Math.log(1/Math.abs(a[1]))-5*Math.log(10))/Math.log(s),c=(Math.log(1/Math.abs(a[2]))-5*Math.log(10))/Math.log(s);this._damping.pan.time=0,this._damping.pan.duration=16.6666*Math.max(o,Math.max(l,c)),this._damping.pan.offset=n.vec3.clone(a),this._damping.rotation.duration=0,this._damping.zoom.duration=0,this._controls.applyTargetVector(a,!0),this._controls.applyPositionVector(a,!0)}else this._panStart=n.vec2.fromValues(e,t)}reset(){this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:n.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=n.vec2.create(),this._panEnd=n.vec2.create(),this._panStart=n.vec2.create(),this._rotateDelta=n.vec2.create(),this._rotateEnd=n.vec2.create(),this._rotateStart=n.vec2.create()}restrict(e,t,i){const a=new r.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),s=new r.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),o=new r.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),l=new r.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);a.containsPoint(e)||(e=a.clampPoint(e)),s.containsPoint(e)||(e=s.clampPoint(e)),o.containsPoint(t)||(t=o.clampPoint(t)),l.containsPoint(t)||(t=l.clampPoint(t));const c=n.vec3.distance(e,t);if(c>this._controls.zoomRestriction.maxDistance||c<this._controls.zoomRestriction.minDistance){const i=n.vec3.normalize(n.vec3.create(),n.vec3.subtract(n.vec3.create(),e,t)),r=Math.max(this._controls.zoomRestriction.minDistance,Math.min(this._controls.zoomRestriction.maxDistance,c));n.vec3.add(e,n.vec3.multiply(e,i,n.vec3.fromValues(r,r,r)),t)}const u=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),h=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),d=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),f=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(d!==-1/0||f!==1/0||0!==u||180!==h||!1===this._controls.enableAzimuthRotation||!1===this._controls.enablePolarRotation){let a=n.vec3.subtract(n.vec3.create(),e,t);n.vec3.transformQuat(a,a,this._quat);const s=(new r.Spherical).fromVec3(a);if(s.theta<d||s.theta>f||s.phi<u||s.phi>h||!1===this._controls.enableAzimuthRotation||!1===this._controls.enablePolarRotation){if(s.theta=Math.max(d,Math.min(f,s.theta)),s.phi=Math.max(u,Math.min(h,s.phi)),!1===this._controls.enableAzimuthRotation||!1===this._controls.enablePolarRotation){const e=n.vec3.subtract(n.vec3.create(),this._controls.camera.defaultPosition,this._controls.camera.defaultTarget);n.vec3.transformQuat(e,e,this._quat);const t=(new r.Spherical).fromVec3(e);!1===this._controls.enableAzimuthRotation&&(s.theta=t.theta),!1===this._controls.enablePolarRotation&&(s.phi=t.phi)}s.makeSafe(),a=s.toVec3(),n.vec3.transformQuat(a,a,this._quatInverse),n.vec3.add(e,a,t)}(i[1]<d||i[1]>f||i[0]<u||i[0]>h||!1===this._controls.enableAzimuthRotation||!1===this._controls.enablePolarRotation)&&(i[1]=!1===this._controls.enableAzimuthRotation?0:Math.max(d,Math.min(f,i[1])),i[0]=!1===this._controls.enablePolarRotation?0:Math.max(u,Math.min(h,i[0])))}return{position:e,target:t,sceneRotation:i}}rotate(e,t,i,a){if(i){if(this._rotateEnd=n.vec2.fromValues(e,t),n.vec2.subtract(this._rotateDelta,this._rotateEnd,this._rotateStart),n.vec2.copy(this._rotateStart,this._rotateEnd),!this._controls.canvas)return;if(0==this._controls.canvas.clientWidth||0==this._controls.canvas.clientHeight)return;const i=new r.Spherical,s=this._adjustedSettings.rotationSpeed()*(a?this._touchAdjustments.rotationSpeed:1);if(i.theta-=s*this._rotateDelta[0]/this._controls.canvas.clientHeight,i.phi-=s*this._rotateDelta[1]/this._controls.canvas.clientHeight,this._damping.rotation.duration>0){const e=this._damping.rotation.theta-i.theta;i.theta+=e*this._adjustedSettings.movementSmoothness();const t=this._damping.rotation.phi-i.phi;i.phi+=t*this._adjustedSettings.movementSmoothness()}const o=this.rotationSphericalToOffset(this._controls.enableTurntableControls?new r.Spherical(1,i.phi,0):i),l=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),c=(Math.log(1/Math.abs(i.theta))-5*Math.log(10))/Math.log(l),u=(Math.log(1/Math.abs(i.phi))-5*Math.log(10))/Math.log(l);this._damping.rotation.time=0,this._damping.rotation.duration=16.6666*Math.max(c,u),this._damping.rotation.theta=i.theta,this._damping.rotation.phi=i.phi,this._damping.pan.duration=0,this._damping.zoom.duration=0,this._controls.applyPositionVector(o,!0),this._controls.enableTurntableControls&&this._controls.applyRotation([0,i.theta],!0)}else this._rotateStart=n.vec2.fromValues(e,t)}update(e,t){!0===t&&(this._damping.zoom.duration=0,this._damping.pan.duration=0,this._damping.rotation.duration=0);const i=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping()));if(this._damping.pan.duration>0)if(this._damping.pan.time+e>this._damping.pan.duration)this._damping.pan.time=this._damping.pan.duration,this._damping.pan.duration=0;else{this._damping.pan.time+=e;const t=this._damping.pan.time/16.6666,r=Math.pow(i,t),a=n.vec3.multiply(n.vec3.create(),this._damping.pan.offset,n.vec3.fromValues(r,r,r));this._controls.applyTargetVector(a),this._controls.applyPositionVector(a)}else this._damping.pan.time=0;if(this._damping.rotation.duration>0)if(this._damping.rotation.time+e>this._damping.rotation.duration)this._damping.rotation.time=this._damping.rotation.duration,this._damping.rotation.duration=0;else{this._damping.rotation.time+=e;const t=this._damping.rotation.time/16.6666,n=new r.Spherical;n.theta=this._damping.rotation.theta*Math.pow(i,t),n.phi=this._damping.rotation.phi*Math.pow(i,t);const a=this.rotationSphericalToOffset(this._controls.enableTurntableControls?new r.Spherical(1,n.phi,0):n);this._controls.applyPositionVector(a),this._controls.enableTurntableControls&&this._controls.applyRotation([0,n.theta])}else this._damping.rotation.time=0;if(this._damping.zoom.duration>0)if(this._damping.zoom.time+e>this._damping.zoom.duration)this._damping.zoom.time=this._damping.zoom.duration,this._damping.zoom.duration=0;else{this._damping.zoom.time+=e;const t=this._damping.zoom.time/16.6666,n=this._damping.zoom.delta*Math.pow(i,t),r=this.zoomDistanceToOffset(n);this._controls.applyPositionVector(r)}else this._damping.zoom.time=0;if(this._controls.enableAutoRotation){const e=new r.Spherical(1,0,-this._adjustedSettings.autoRotationSpeed()),t=this.rotationSphericalToOffset(this._controls.enableTurntableControls?new r.Spherical(1,e.phi,0):e);this._controls.applyPositionVector(t),this._controls.enableTurntableControls&&this._controls.applyRotation([0,e.theta])}}zoom(e,t,i,n){const r=Math.sqrt(e*e+t*t);if(i){this._dollyEnd=r,this._dollyDelta=this._dollyEnd-this._dollyStart,this._dollyStart=this._dollyEnd,this._damping.zoom.duration>0&&(this._dollyDelta<0?this._dollyDelta=Math.min(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta):this._dollyDelta=Math.max(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta));const e=-this._dollyDelta*this._adjustedSettings.zoomSpeed()*(n?this._touchAdjustments.zoomSpeed:1),t=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),i=(Math.log(1/Math.abs(this._dollyDelta))-5*Math.log(10))/Math.log(t);this._damping.zoom.time=0,this._damping.zoom.duration=16.6666*i,this._damping.zoom.delta=e,this._damping.rotation.duration=0,this._damping.pan.duration=0;const a=this.zoomDistanceToOffset(e);this._controls.applyPositionVector(a,!0)}else this._dollyStart=r}panDeltaToOffset(e){var t,i;const r=n.vec3.create(),a=n.vec3.create();if(!this._controls.canvas)return r;if(0==this._controls.canvas.clientWidth||0==this._controls.canvas.clientHeight)return r;n.vec3.subtract(r,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates());let s=n.vec3.length(r);s*=Math.tan(this._controls.camera.fov/2*Math.PI/180);const o=n.mat4.targetTo(n.mat4.create(),this._controls.camera.position,this._controls.camera.target,n.vec3.fromValues(0,0,1)),l=n.vec3.fromValues(o[0],o[1],o[2]),c=-2*e[0]*s/(null===(t=this._controls.canvas)||void 0===t?void 0:t.clientHeight);n.vec3.multiply(l,l,n.vec3.fromValues(c,c,c)),n.vec3.add(a,a,l);const u=n.vec3.fromValues(o[4],o[5],o[6]),h=2*e[1]*s/(null===(i=this._controls.canvas)||void 0===i?void 0:i.clientHeight);return n.vec3.multiply(u,u,n.vec3.fromValues(h,h,h)),n.vec3.add(a,a,u),n.vec3.clone(a)}rotationSphericalToOffset(e){let t=n.vec3.create();n.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),n.vec3.transformQuat(t,t,this._quat);const i=(new r.Spherical).fromVec3(t);i.theta+=e.theta,i.phi+=e.phi;const a=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),s=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);return i.theta>Math.PI?(i.theta-=2*Math.PI,a>i.theta&&(i.theta+=2*Math.PI)):i.theta<-Math.PI&&(i.theta+=2*Math.PI,s<i.theta&&(i.theta-=2*Math.PI)),i.makeSafe(),t=i.toVec3(),t=n.vec3.transformQuat(n.vec3.create(),t,this._quatInverse),t=n.vec3.add(n.vec3.create(),t,this._controls.getTargetWithManualUpdates()),t=n.vec3.subtract(n.vec3.create(),t,this._controls.getPositionWithManualUpdates()),n.vec3.clone(t)}zoomDistanceToOffset(e){const t=n.vec3.create();return n.vec3.subtract(t,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),n.vec3.multiply(n.vec3.create(),t,n.vec3.fromValues(e,e,e))}}},1179:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.CameraInterpolationManager=void 0;const s=a(i(6194)),o=i(7198),l=i(6861),c=i(3042),u=i(365);t.CameraInterpolationManager=class{constructor(e,t){this._camera=e,this._cameraControls=t,this.TweenWrapper=class{constructor(e,t,i){this._properties={delta:0},this._tween=new s.Tween(this._properties),this._tween.easing(e.easing),this._tween.to({delta:1},e.duration),this._tween.onUpdate((e=>{t.onUpdate(e)})),this._tween.onStop((e=>{t.onStop&&t.onStop(e),this._resolve(!0)})),this._tween.onComplete((e=>{t.onComplete&&t.onComplete(e),i(),this._resolve(!0)}))}start(){return new Promise((e=>{this._resolve=e,this._tween.start()}))}stop(){this._tween.stop()}}}active(){return!!this._tween}interpolate(e,t={}){const i=[];for(let t=0;t<e.length;t++)i.push({position:e[t].position,target:e[t].target});this._tween&&(this._tween.stop(),this._tween=null);let n=this.optionsParser(t);return this._tween=new this.TweenWrapper(n,2===i.length?this.getCameraInterpolation(i[0],i[1],n.coordinates):new o.CameraMultipleInterpolation(this._camera,this._cameraControls,i,n.interpolation),(()=>{this._tween=null})),this._tween.start()}stop(){this._tween&&this._tween.stop(),this._tween=null}getCameraInterpolation(e,t,i){switch(i){case"linear":return new c.CameraLinearInterpolation(this._camera,this._cameraControls,e,t);case"spherical":return new l.CameraSphericalInterpolation(this._camera,this._cameraControls,e,t);case"cylindrical":return new u.CameraCylindricalInterpolation(this._camera,this._cameraControls,e,t);default:return new o.CameraMultipleInterpolation(this._camera,this._cameraControls,[e,t],s.Interpolation.CatmullRom)}}optionsParser(e){let t=s.Easing.Quartic.InOut;if("string"==typeof e.easing){const i=e.easing.split("."),n=s.Easing[i[0]];if(n){const e=n[i[1]];e&&(t=e)}}else"function"==typeof e.easing&&(t=e.easing);let i=s.Interpolation.CatmullRom;if("string"==typeof e.interpolation){const t=s.Interpolation[e.interpolation];t&&t!==s.Interpolation.Utils&&(i=t)}else"function"==typeof e.interpolation&&(i=e.interpolation);return{duration:e.duration&&e.duration>=0?e.duration:0,easing:t,coordinates:"spherical"!==e.coordinates&&"linear"!==e.coordinates&&"cylindrical"!==e.coordinates?"cylindrical":e.coordinates,interpolation:i}}}},365:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraCylindricalInterpolation=void 0;const n=i(887);t.CameraCylindricalInterpolation=class{constructor(e,t,i,r){this._camera=e,this._cameraControls=t,this._from=i,this._to=r,this._h_from=this._from.position[2]-this._from.target[2],this._from_position_heightAdjusted=n.vec3.fromValues(this._from.position[0],this._from.position[1],this._from.target[2]),this._r_from=n.vec3.distance(this._from_position_heightAdjusted,this._from.target),this._dir_from=n.vec3.normalize(n.vec3.create(),n.vec3.subtract(n.vec3.create(),this._from_position_heightAdjusted,this._from.target)),this._h_to=this._to.position[2]-this._to.target[2],this._to_position_heightAdjusted=n.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.target[2]),this._r_to=n.vec3.distance(this._to_position_heightAdjusted,this._to.target),this._dir_to=n.vec3.normalize(n.vec3.create(),n.vec3.subtract(n.vec3.create(),this._to_position_heightAdjusted,this._to.target)),0===this._dir_from[0]&&0===this._dir_from[1]&&0===this._dir_from[2]&&(this._dir_from=n.vec3.fromValues(1,0,0)),0===this._dir_to[0]&&0===this._dir_to[1]&&0===this._dir_to[2]&&(this._dir_to=n.vec3.fromValues(1,0,0)),this._lorr=n.vec3.cross(n.vec3.create(),this._dir_to,this._dir_from);let a=Math.min(1,Math.max(-1,n.vec3.dot(this._dir_to,this._dir_from))),s=Math.min(1,Math.max(-1,n.vec3.dot(this._lorr,n.vec3.fromValues(0,0,1))));this._shortest_angle=s>0?-Math.acos(a):Math.acos(a)}onComplete(e){let t=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),this._from.target,n.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),n.vec3.multiply(n.vec3.create(),this._to.target,n.vec3.fromValues(e.delta,e.delta,e.delta))),i=n.vec3.subtract(n.vec3.create(),t,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);let r=this._shortest_angle*e.delta,a=n.vec3.transformQuat(n.vec3.create(),this._dir_from,n.quat.setAxisAngle(n.quat.create(),n.vec3.fromValues(0,0,1),r)),s=this._r_from*(1-e.delta)+this._r_to*e.delta,o=n.vec3.add(n.vec3.create(),t,n.vec3.multiply(n.vec3.create(),a,n.vec3.fromValues(s,s,s)));n.vec3.add(o,o,n.vec3.fromValues(0,0,this._h_from*(1-e.delta)+this._h_to*e.delta));let l=n.vec3.subtract(n.vec3.create(),o,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(l)}}},3042:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraLinearInterpolation=void 0;const n=i(887);t.CameraLinearInterpolation=class{constructor(e,t,i,n){this._camera=e,this._cameraControls=t,this._from=i,this._to=n}onComplete(e){let t=n.vec3.subtract(n.vec3.create(),this._to.position,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=n.vec3.subtract(n.vec3.create(),this._to.target,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),this._from.position,n.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),n.vec3.multiply(n.vec3.create(),this._to.position,n.vec3.fromValues(e.delta,e.delta,e.delta))),i=n.vec3.subtract(n.vec3.create(),t,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);let r=n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),this._from.target,n.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),n.vec3.multiply(n.vec3.create(),this._to.target,n.vec3.fromValues(e.delta,e.delta,e.delta))),a=n.vec3.subtract(n.vec3.create(),r,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(a)}}},7198:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraMultipleInterpolation=void 0;const n=i(887);t.CameraMultipleInterpolation=class{constructor(e,t,i,n){this._camera=e,this._cameraControls=t,this._path=i,this._interpolationFunction=n,this.end={position:{x:[],y:[],z:[]},target:{x:[],y:[],z:[]}};for(let e=0;e<this._path.length;e++)this.end.position.x.push(this._path[e].position[0]),this.end.position.y.push(this._path[e].position[1]),this.end.position.z.push(this._path[e].position[2]),this.end.target.x.push(this._path[e].target[0]),this.end.target.y.push(this._path[e].target[1]),this.end.target.z.push(this._path[e].target[2])}onComplete(e){let t=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._path[this._path.length-1].position[0],this._path[this._path.length-1].position[1],this._path[this._path.length-1].position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._path[this._path.length-1].target[0],this._path[this._path.length-1].target[1],this._path[this._path.length-1].target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=n.vec3.fromValues(this._interpolationFunction(this.end.position.x,e.delta),this._interpolationFunction(this.end.position.y,e.delta),this._interpolationFunction(this.end.position.z,e.delta)),i=n.vec3.subtract(n.vec3.create(),t,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);let r=n.vec3.fromValues(this._interpolationFunction(this.end.target.x,e.delta),this._interpolationFunction(this.end.target.y,e.delta),this._interpolationFunction(this.end.target.z,e.delta)),a=n.vec3.subtract(n.vec3.create(),r,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(a)}}},6861:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CameraSphericalInterpolation=void 0;const n=i(887);t.CameraSphericalInterpolation=class{constructor(e,t,i,r){this._camera=e,this._cameraControls=t,this._from=i,this._to=r,this._radius_from=n.vec3.distance(this._from.position,this._from.target),this._direction_from=n.vec3.normalize(n.vec3.create(),n.vec3.subtract(n.vec3.create(),this._from.position,this._from.target)),this._radius_to=n.vec3.distance(this._to.position,this._to.target),this._direction_to=n.vec3.normalize(n.vec3.create(),n.vec3.subtract(n.vec3.create(),this._to.position,this._to.target)),this._axis=n.vec3.normalize(n.vec3.create(),n.vec3.cross(n.vec3.create(),this._direction_to,this._direction_from)),this._c_angle=-Math.acos(Math.min(1,Math.max(-1,n.vec3.dot(this._direction_to,this._direction_from))))}onComplete(e){let t=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(t);let i=n.vec3.subtract(n.vec3.create(),n.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){let t=n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),this._from.target,n.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),n.vec3.multiply(n.vec3.create(),this._to.target,n.vec3.fromValues(e.delta,e.delta,e.delta))),i=n.vec3.subtract(n.vec3.create(),t,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);let r=this._c_angle*e.delta,a=n.vec3.normalize(n.vec3.create(),n.vec3.transformQuat(n.vec3.create(),this._direction_from,n.quat.setAxisAngle(n.quat.create(),this._axis,r))),s=this._radius_from*(1-e.delta)+this._radius_to*e.delta,o=n.vec3.add(n.vec3.create(),t,n.vec3.multiply(n.vec3.create(),a,n.vec3.fromValues(s,s,s))),l=n.vec3.subtract(n.vec3.create(),o,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(l)}}},1990:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraControls=t.PerspectiveCameraControls=t.OrthographicCamera=t.PerspectiveCamera=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.CAMERA_TYPE=t.AbstractCamera=t.CameraEngine=void 0;const n=i(3164);Object.defineProperty(t,"AbstractCamera",{enumerable:!0,get:function(){return n.AbstractCamera}});const r=i(8551);Object.defineProperty(t,"CameraEngine",{enumerable:!0,get:function(){return r.CameraEngine}});const a=i(4976);Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return a.CAMERA_TYPE}});const s=i(8065);Object.defineProperty(t,"OrthographicCamera",{enumerable:!0,get:function(){return s.OrthographicCamera}});const o=i(8926);Object.defineProperty(t,"PerspectiveCamera",{enumerable:!0,get:function(){return o.PerspectiveCamera}});const l=i(8210);Object.defineProperty(t,"OrthographicCameraControls",{enumerable:!0,get:function(){return l.OrthographicCameraControls}});const c=i(9599);Object.defineProperty(t,"PerspectiveCameraControls",{enumerable:!0,get:function(){return c.PerspectiveCameraControls}});const u=i(5904);Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return u.ORTHOGRAPHIC_CAMERA_DIRECTION}})},4976:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.CAMERA_TYPE=void 0,(i=t.CAMERA_TYPE||(t.CAMERA_TYPE={})).PERSPECTIVE="perspective",i.ORTHOGRAPHIC="orthographic"},5904:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ORTHOGRAPHIC_CAMERA_DIRECTION=void 0,(i=t.ORTHOGRAPHIC_CAMERA_DIRECTION||(t.ORTHOGRAPHIC_CAMERA_DIRECTION={})).TOP="top",i.BOTTOM="bottom",i.LEFT="left",i.RIGHT="right",i.FRONT="front",i.BACK="back"},8953:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=void 0,t.Canvas=class{constructor(e,t,i){this._id=e,this._originalDefinition=t,this._canvasElement=i,this._originalDefinition&&this._originalDefinition instanceof HTMLCanvasElement&&(this._originalDefinition=this._originalDefinition.cloneNode(!0)),i?this._canvasElement=i:(this._canvasElement=document.createElement("canvas"),this._canvasElement.id=this._id),this._canvasElement.style.touchAction="none"}get canvasElement(){return this._canvasElement}get id(){return this._id}reset(){var e;const t=null===(e=this._canvasElement)||void 0===e?void 0:e.parentElement;null==t||t.removeChild(this._canvasElement),this._originalDefinition instanceof HTMLCanvasElement&&(null==t||t.appendChild(this._canvasElement))}}},1382:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasEngine=void 0;const n=i(8877),r=i(8953);t.CanvasEngine=class{constructor(){this._canvasDictionary={},this._uuidGenerator=n.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}createCanvasObject(e,t){if(t=void 0!==t&&this._uuidGenerator.validate(t)?t:this._uuidGenerator.create(),e instanceof HTMLCanvasElement){const i=e;return i.id||(i.id=this._uuidGenerator.create()),this._canvasDictionary[t]=new r.Canvas(i.id,e,i),t}if(e){const i=e,n=document.getElementById(i);for(let e in this._canvasDictionary)if(this._canvasDictionary[e].id===i)return e;if(n instanceof HTMLCanvasElement)return this._canvasDictionary[t]=new r.Canvas(i,e,n),t;if(!n)return this._canvasDictionary[t]=new r.Canvas(i,e),t}return this._canvasDictionary[t]=new r.Canvas(t,e),t}getCanvas(e){return this._canvasDictionary[e]}}},420:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=t.CanvasEngine=void 0;const n=i(8953);Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return n.Canvas}});const r=i(1382);Object.defineProperty(t,"CanvasEngine",{enumerable:!0,get:function(){return r.CanvasEngine}})},9407:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionEngine=void 0;const n=i(7038),r=i(887),a=i(5174),s=i(3858),o=i(2248),l=i(8877);t.IntersectionEngine=class{constructor(){this._eventEngine=l.EventEngine.instance,this._tree=s.Tree.instance,this._intersectNodes=[],this.gatherNodes(),this._eventEngine.addListener(l.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,(()=>{this.gatherNodes()}))}static get instance(){return this._instance||(this._instance=new this)}intersect(e,t,i,n=this._tree.root,r){let a=[];const s=(n,o,l,c)=>{if(!1!==o){if(void 0!==r){if(l.includes(r))return;if(c.length>0&&!c.includes(r))return}if(t){for(let r=0;r<t.length;r++)if(t[r](n)){const t=this.intersectNode(n,e,i);t&&(t.forEach((e=>e.node=n)),a=a.concat(t));break}}else{const t=this.intersectNode(n,e);t&&(t.forEach((e=>e.node=n)),a=a.concat(t))}for(let e=0;e<n.children.length;e++)s(n.children[e],o&&n.children[e].visible,l.concat(n.children[e].excludeViewports),c.concat(n.children[e].restrictViewports))}};for(let e=0;e<this._intersectNodes.length;e++)s(this._intersectNodes[e].node,this._intersectNodes[e].visible,this._intersectNodes[e].excludeViewports,this._intersectNodes[e].restrictViewports);return a.sort(((e,t)=>e.distance-t.distance)),a}intersectNode(e,t,i){if(!1===e.visible)return;const a=r.mat4.invert(r.mat4.create(),e.worldMatrix),s={origin:r.vec3.transformMat4(r.vec3.create(),t.origin,a),direction:r.vec3.normalize(r.vec3.create(),r.vec3.fromValues(a[0]*t.direction[0]+a[4]*t.direction[1]+a[8]*t.direction[2],a[1]*t.direction[0]+a[5]*t.direction[1]+a[9]*t.direction[2],a[2]*t.direction[0]+a[6]*t.direction[1]+a[10]*t.direction[2]))};let l;for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof n.GeometryData){l=e.data[t];break}if(l&&i){let e=null;if(e=l.effectMaterials.length>0?l.effectMaterials[l.effectMaterials.length-1].material:i.rendererType===o.RENDERER_TYPE.ATTRIBUTES?l.attributeMaterial:l.material,e&&e.opacity<=i.opacity)return}if(l){if(l.mode===n.PRIMITIVE_MODE.LINES){if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const i=l.primitive.indices,n=l.primitive.attributes.POSITION,a=.1;let o=[];if(null!==i)for(let t=0,c=+i.count;t<c;t+=2){const c=i.array[t*i.itemSize],u=i.array[(t+1)*i.itemSize];let h=this.checkLineIntersection(e,s,a,r.vec3.fromValues(n.array[c*n.itemSize],n.array[c*n.itemSize+1],n.array[c*n.itemSize+2]),r.vec3.fromValues(n.array[u*n.itemSize],n.array[u*n.itemSize+1],n.array[u*n.itemSize+2]));h&&o.push(Object.assign(h,{geometryData:l}))}else if(void 0!==n)for(let t=0,i=+n.count;t<i;t+=2){const i=t,c=t+1;let u=this.checkLineIntersection(e,s,a,r.vec3.fromValues(n.array[i*n.itemSize],n.array[i*n.itemSize+1],n.array[i*n.itemSize+2]),r.vec3.fromValues(n.array[c*n.itemSize],n.array[c*n.itemSize+1],n.array[c*n.itemSize+2]));u&&o.push(Object.assign(u,{geometryData:l}))}return o.sort(((e,t)=>e.distance-t.distance)),o.forEach((t=>t.point=r.vec3.transformMat4(t.point,t.point,e.worldMatrix))),o}if(l.mode===n.PRIMITIVE_MODE.LINE_LOOP||l.mode===n.PRIMITIVE_MODE.LINE_STRIP){if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const i=l.primitive.indices,n=l.primitive.attributes.POSITION,a=.1;let o=[];if(null!==i)for(let t=0,c=+i.count-1;t<c;t++){const c=i.array[t*i.itemSize],u=i.array[(t+1)*i.itemSize];let h=this.checkLineIntersection(e,s,a,r.vec3.fromValues(n.array[c*n.itemSize],n.array[c*n.itemSize+1],n.array[c*n.itemSize+2]),r.vec3.fromValues(n.array[u*n.itemSize],n.array[u*n.itemSize+1],n.array[u*n.itemSize+2]));h&&o.push(Object.assign(h,{geometryData:l}))}else if(void 0!==n)for(let t=0,i=+n.count;t<i;t+=2){const i=t,c=t+1;let u=this.checkLineIntersection(e,s,a,r.vec3.fromValues(n.array[i*n.itemSize],n.array[i*n.itemSize+1],n.array[i*n.itemSize+2]),r.vec3.fromValues(n.array[c*n.itemSize],n.array[c*n.itemSize+1],n.array[c*n.itemSize+2]));u&&o.push(Object.assign(u,{geometryData:l}))}return o.sort(((e,t)=>e.distance-t.distance)),o.forEach((t=>t.point=r.vec3.transformMat4(t.point,t.point,e.worldMatrix))),o}if(l.mode===n.PRIMITIVE_MODE.POINTS){const t=l.primitive.attributes.POSITION,i=.1;let n=[];if(void 0!==t)for(let a=0,o=+t.count;a<o;a++){let o=this.checkPointIntersection(e,s,i,r.vec3.fromValues(t.array[a*t.itemSize],t.array[a*t.itemSize+1],t.array[a*t.itemSize+2]));o&&n.push(Object.assign(o,{geometryData:l}))}return n.sort(((e,t)=>e.distance-t.distance)),n.forEach((t=>t.point=r.vec3.transformMat4(t.point,t.point,e.worldMatrix))),n}{let i=r.vec3.sub(r.vec3.create(),e.boundingBox.boundingSphere.center,t.origin),n=r.vec3.dot(i,t.direction);n=Math.max(n,0);let a=r.vec3.add(r.vec3.create(),t.origin,r.vec3.scale(r.vec3.create(),t.direction,n));if(r.vec3.squaredDistance(a,e.boundingBox.boundingSphere.center)>e.boundingBox.boundingSphere.radius*e.boundingBox.boundingSphere.radius)return;if(!1===e.boundingBox.intersects(t.origin,t.direction))return;const o=l.material,c=l.primitive.indices,u=l.primitive.attributes.POSITION;let h=[];if(null!==c)for(let t=0,i=+c.count;t<i;t+=3){const i=c.array[t*c.itemSize],n=c.array[(t+1)*c.itemSize],a=c.array[(t+2)*c.itemSize];let d=this.checkIntersection(e,o,s,r.vec3.fromValues(u.array[i*u.itemSize],u.array[i*u.itemSize+1],u.array[i*u.itemSize+2]),r.vec3.fromValues(u.array[n*u.itemSize],u.array[n*u.itemSize+1],u.array[n*u.itemSize+2]),r.vec3.fromValues(u.array[a*u.itemSize],u.array[a*u.itemSize+1],u.array[a*u.itemSize+2]));d&&h.push(Object.assign(d,{geometryData:l}))}else if(void 0!==u)for(let t=0,i=+u.count;t<i;t+=3){const i=t,n=t+1,a=t+2;let c=this.checkIntersection(e,o,s,r.vec3.fromValues(u.array[i*u.itemSize],u.array[i*u.itemSize+1],u.array[i*u.itemSize+2]),r.vec3.fromValues(u.array[n*u.itemSize],u.array[n*u.itemSize+1],u.array[n*u.itemSize+2]),r.vec3.fromValues(u.array[a*u.itemSize],u.array[a*u.itemSize+1],u.array[a*u.itemSize+2]));c&&h.push(Object.assign(c,{geometryData:l}))}return h.sort(((e,t)=>e.distance-t.distance)),h.forEach((t=>t.point=r.vec3.transformMat4(t.point,t.point,e.worldMatrix))),h}}{let n=[];for(let r=0;r<e.children.length;r++){let a=this.intersectNode(e.children[r],t,i);a&&(n=n.concat(a))}return n.length>0?(n.sort(((e,t)=>e.distance-t.distance)),n):void 0}}checkIntersection(e,t,i,s,o,l){let c;if(c=t&&t.side===n.MATERIAL_SIDE.BACK?new a.Triangle(l,o,s).intersect(i.origin,i.direction):new a.Triangle(s,o,l).intersect(i.origin,i.direction),null!==c)return{distance:r.vec3.distance(i.origin,c),point:r.vec3.clone(c),node:e}}checkLineIntersection(e,t,i,n,a){const s=r.vec3.sub(r.vec3.create(),a,n),o=r.vec3.length(s),l={origin:n,direction:r.vec3.divide(r.vec3.create(),s,r.vec3.fromValues(o,o,o))},c=r.vec3.cross(r.vec3.create(),t.direction,l.direction),u=r.vec3.normalize(r.vec3.create(),r.vec3.cross(r.vec3.create(),t.direction,c)),h=r.vec3.normalize(r.vec3.create(),r.vec3.cross(r.vec3.create(),l.direction,c)),d=r.vec3.dot(r.vec3.sub(r.vec3.create(),n,t.origin),h)/r.vec3.dot(t.direction,h),f=r.vec3.dot(r.vec3.sub(r.vec3.create(),t.origin,n),u)/r.vec3.dot(l.direction,u);let p=r.vec3.create();d<0?r.vec3.copy(p,t.origin):p=r.vec3.add(r.vec3.create(),t.origin,r.vec3.mul(r.vec3.create(),t.direction,r.vec3.fromValues(d,d,d)));let m=r.vec3.create();f<0?r.vec3.copy(m,n):f<o?m=r.vec3.add(r.vec3.create(),n,r.vec3.mul(r.vec3.create(),l.direction,r.vec3.fromValues(f,f,f))):r.vec3.copy(m,a);const g=r.vec3.distance(p,m);return g<i?{distance:g,point:r.vec3.clone(m),node:e}:void 0}checkPointIntersection(e,t,i,n){const a=r.vec3.sub(r.vec3.create(),n,t.origin),s=r.vec3.dot(a,t.direction);s<0?r.vec3.copy(a,t.origin):(r.vec3.multiply(a,r.vec3.copy(a,t.direction),r.vec3.fromValues(s,s,s)),r.vec3.add(a,a,t.origin));const o=r.vec3.distance(a,n);return o<i?{distance:o,point:r.vec3.clone(a),node:e}:void 0}gatherNodes(){this._intersectNodes=[],this._tree.root.traverse((e=>{if(!1!==e.visible)for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof n.GeometryData){let t=e,i=!0,n=[],r=[];for(;t.parent;)i=t.visible&&i,n=n.concat(t.restrictViewports),r=r.concat(t.excludeViewports),t=t.parent;this._intersectNodes.push({node:e,visible:i,restrictViewports:[...new Set(n)],excludeViewports:[...new Set(r)]})}}))}}},2850:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionEngine=void 0;const n=i(9407);Object.defineProperty(t,"IntersectionEngine",{enumerable:!0,get:function(){return n.IntersectionEngine}})},3995:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractLight=void 0;const d=i(8877),f=i(3858);class p extends f.AbstractTreeNodeData{constructor(e){super(e.id,e.version),n.set(this,void 0),r.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,!1),c.set(this,void 0),this._uuidGenerator=d.UuidGenerator.instance,u(this,r,e.color,"f"),u(this,a,e.intensity,"f"),u(this,n,e.type,"f"),u(this,s,e.name,"f"),u(this,o,e.order,"f")}get color(){return h(this,r,"f")}set color(e){u(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get intensity(){return h(this,a,"f")}set intensity(e){u(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get name(){return h(this,s,"f")}set name(e){u(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get order(){return h(this,o,"f")}set order(e){u(this,o,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}set parentNode(e){u(this,c,e,"f")}get parentNode(){return h(this,c,"f")}get type(){return h(this,n,"f")}set useNodeData(e){u(this,l,e,"f")}get useNodeData(){return h(this,l,"f")}}t.AbstractLight=p,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap},4739:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightEngine=void 0;const n=i(887),r=i(8877),a=i(3955),s=i(3520),o=i(3447),l=i(4163),c=i(4410),u=i(4771),h=i(169),d=i(3858);t.LightEngine=class{constructor(e){this._renderingEngine=e,this._converter=r.Converter.instance,this._lightNode=new d.TreeNode("lights"),this._tree=d.Tree.instance,this._uuidGenerator=r.UuidGenerator.instance,this._lightScenes={},this._tree.root.addChild(this._lightNode),this._lightNode.restrictViewports=[this._renderingEngine.id]}get lightScene(){return this._lightScene}get lightScenes(){return this._lightScenes}get update(){return this._update}set update(e){this._update=e}applySettings(e){this._lightScenes={};for(let t in e.light.lightScenes){const i=this._uuidGenerator.validate(t)?t:this._uuidGenerator.create(),n=e.light.lightScenes[t].name?e.light.lightScenes[t].name:t,r=new u.LightScene(this._renderingEngine,{id:i,name:n});for(let i in e.light.lightScenes[t].lights){const n=this._uuidGenerator.validate(i)?i:this._uuidGenerator.create(),u=e.light.lightScenes[t].lights[i];let d;switch(u.type){case h.LIGHT_TYPE.DIRECTIONAL:d=new s.DirectionalLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,direction:this._converter.toVec3(u.properties.direction),castShadow:u.properties.castShadow,name:u.name?u.name:i,order:u.order,id:n});break;case h.LIGHT_TYPE.HEMISPHERE:d=new o.HemisphereLight({color:this._converter.toHexColor(u.properties.skyColor),intensity:u.properties.intensity,groundColor:this._converter.toHexColor(u.properties.groundColor),name:u.name?u.name:i,order:u.order,id:n});break;case h.LIGHT_TYPE.POINT:d=new l.PointLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,position:this._converter.toVec3(u.properties.position),distance:u.properties.distance,decay:u.properties.decay,name:u.name?u.name:i,order:u.order,id:n});break;case h.LIGHT_TYPE.SPOT:d=new c.SpotLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,position:this._converter.toVec3(u.properties.position),target:this._converter.toVec3(u.properties.target),distance:u.properties.distance,decay:u.properties.decay,angle:u.properties.angle,penumbra:u.properties.penumbra,name:u.name?u.name:i,order:u.order,id:n});break;case h.LIGHT_TYPE.AMBIENT:default:d=new a.AmbientLight({color:this._converter.toHexColor(u.properties.color),intensity:u.properties.intensity,name:u.name?u.name:i,order:u.order,id:n})}r.addLight(d)}this._lightScenes[r.id]=r}if(void 0===e.light.lightSceneId&&Object.values(e.light.lightScenes).length>0){if(!1===this.assignLightScene(Object.keys(e.light.lightScenes)[0])){const t=this.createLightScene({name:"default"===e.light.lightSceneId?"default":"standard"});t.addLight(new a.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.75,direction:n.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.35,direction:n.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[t.id]=t}}else if(e.light.lightSceneId){if(!1===this.assignLightScene(e.light.lightSceneId)){const t=this.createLightScene({name:"default"===e.light.lightSceneId?"default":"standard"});t.addLight(new a.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.75,direction:n.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),t.addLight(new s.DirectionalLight({color:"#ffffff",intensity:.35,direction:n.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[t.id]=t}}else if(JSON.stringify(e.settingsJson)==JSON.stringify({})){const e=this.createLightScene({name:"standard",standard:!0});this._lightScenes[e.id]=e}this._update&&this._update()}assignLightScene(e){if(!this._lightScenes[e]){for(let t in this._lightScenes)if((this._lightScenes[t].name||t)===e)return this.assignLightScene(t);return!1}for(this._lightScene=this._lightScenes[e];this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),!0}close(){this._tree.root.removeChild(this._lightNode)}createLightScene(e){const t=this._uuidGenerator.create(),i=new u.LightScene(this._renderingEngine,{id:t,name:e.name});for(!0===e.standard&&(i.addLight(new s.DirectionalLight({color:"#ffffff",intensity:2.5,direction:n.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),i.addLight(new a.AmbientLight({color:"#ffffff",intensity:.3,name:"ambient0"}))),this._lightScenes[t]=i,this._lightScene=i;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),this._update&&this._update(),i}removeLightScene(e){if(!this._lightScenes[e]){for(let t in this._lightScenes)if((this._lightScenes[t].name||t)===e)return this.removeLightScene(t);return!1}if(this._lightScene&&this._lightScene.id===e){for(this._lightScene=void 0;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);this._lightNode.updateVersion()}return delete this._lightScenes[e],this._update&&this._update(),!0}saveSettings(e){e.light.lightSceneId=this.lightScene?this.lightScene.id:void 0;const t={};for(let e in this._lightScenes){const i=this._lightScenes[e],n=i.name||e;t[e]={name:n,lights:{}};for(let n in i.lights){const r=i.lights[n];let a;switch(r.type){case h.LIGHT_TYPE.DIRECTIONAL:a={color:this._converter.toHexColor(r.color),intensity:r.intensity,direction:{x:r.direction[0],y:r.direction[1],z:r.direction[2]},castShadow:r.castShadow,shadowMapResolution:r.shadowMapResolution,shadowMapBias:r.shadowMapBias};break;case h.LIGHT_TYPE.HEMISPHERE:a={skyColor:this._converter.toHexColor(r.color),intensity:r.intensity,groundColor:this._converter.toHexColor(r.groundColor)};break;case h.LIGHT_TYPE.POINT:a={color:this._converter.toHexColor(r.color),intensity:r.intensity,position:{x:r.position[0],y:r.position[1],z:r.position[2]},distance:r.distance,decay:r.decay};break;case h.LIGHT_TYPE.SPOT:a={color:this._converter.toHexColor(r.color),intensity:r.intensity,position:{x:r.position[0],y:r.position[1],z:r.position[2]},target:{x:r.target[0],y:r.target[1],z:r.target[2]},distance:r.distance,decay:r.decay,angle:r.angle,penumbra:r.penumbra};break;case h.LIGHT_TYPE.AMBIENT:default:a={color:this._converter.toHexColor(r.color),intensity:r.intensity}}t[e].lights[n]={name:r.name,type:r.type,properties:a},void 0!==r.order&&(t[e].lights[n].order=r.order)}}e.light.lightScenes=t}}},4771:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LightScene=void 0;const n=i(3858),r=i(3955),a=i(3520),s=i(3447),o=i(4163),l=i(4410);t.LightScene=class{constructor(e,t){this._renderingEngine=e,this._lights={},this._id=t.id,this._name=t.name,this._node=new n.TreeNode(t.name||t.id)}get id(){return this._id}get lights(){return this._lights}get name(){return this._name}set name(e){this._name=e}get node(){return this._node}get update(){return this._update}set update(e){this._update=e}addAmbientLight(e){const t=new r.AmbientLight(e);return this.addLight(t),t}addDirectionalLight(e){const t=new a.DirectionalLight(e);return this.addLight(t),t}addHemisphereLight(e){const t=new s.HemisphereLight(e);return this.addLight(t),t}addLight(e){const t=new n.TreeNode(e.id);e.parentNode=t,t.data.push(e),this._node.addChild(t),this._lights[e.id]=e,this._node.updateVersion(),this._update&&this._update()}addPointLight(e){const t=new o.PointLight(e);return this.addLight(t),t}addSpotLight(e){const t=new l.SpotLight(e);return this.addLight(t),t}removeLight(e){if(!this._lights[e])return!1;for(let t=0;t<this._node.children.length;t++){const i=this._node.children[t];if(i&&i.name===e){this._node.removeChild(i);break}}return delete this._lights[e],this._node.updateVersion(),this._update&&this._update(),!0}}},3955:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLight=void 0;const a=i(169),s=i(3995);class o extends s.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:a.LIGHT_TYPE.AMBIENT,name:e.name,order:e.order,id:e.id,version:e.version}),n.set(this,{})}get threeJsObject(){return r(this,n,"f")}clone(){return new o({color:this.color||"#ffffff",intensity:this.intensity||.5,name:this.name,order:this.order,id:this.id,version:this.version})}}t.AmbientLight=o,n=new WeakMap},3520:function(e,t,i){"use strict";var n,r,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLight=void 0;const u=i(887),h=i(169),d=i(3995);class f extends d.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:h.LIGHT_TYPE.DIRECTIONAL,name:e.name,order:e.order,id:e.id,version:e.version}),n.set(this,!0),r.set(this,u.vec3.fromValues(-1,0,1)),a.set(this,-.003),s.set(this,1024),o.set(this,{}),e.direction&&l(this,r,e.direction,"f"),void 0!==e.castShadow&&l(this,n,e.castShadow,"f"),e.shadowMapResolution&&l(this,s,e.shadowMapResolution,"f"),e.shadowMapBias&&l(this,a,e.shadowMapBias,"f")}get castShadow(){return c(this,n,"f")}set castShadow(e){l(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get direction(){return c(this,r,"f")}set direction(e){l(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapBias(){return c(this,a,"f")}set shadowMapBias(e){l(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapResolution(){return c(this,s,"f")}set shadowMapResolution(e){l(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return c(this,o,"f")}clone(){return new f({color:this.color,intensity:this.intensity,direction:this.direction,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution,shadowMapBias:this.shadowMapBias,name:this.name,order:this.order,id:this.id,version:this.version})}}t.DirectionalLight=f,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},3447:function(e,t,i){"use strict";var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},s=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLight=void 0;const o=i(169),l=i(3995);class c extends l.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:o.LIGHT_TYPE.HEMISPHERE,name:e.name,order:e.order,id:e.id,version:e.version}),n.set(this,"#000000"),r.set(this,{}),e.groundColor&&a(this,n,e.groundColor,"f")}get groundColor(){return s(this,n,"f")}set groundColor(e){a(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return s(this,r,"f")}clone(){return new c({color:this.color,groundColor:this.groundColor,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.HemisphereLight=c,n=new WeakMap,r=new WeakMap},4163:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PointLight=void 0;const c=i(887),u=i(169),h=i(3995);class d extends h.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:u.LIGHT_TYPE.POINT,name:e.name,order:e.order,id:e.id,version:e.version}),n.set(this,0),r.set(this,0),a.set(this,c.vec3.fromValues(0,0,0)),s.set(this,{}),e.position&&o(this,a,e.position,"f"),e.distance&&o(this,r,e.distance,"f"),e.decay&&o(this,n,e.decay,"f")}get decay(){return l(this,n,"f")}set decay(e){o(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return l(this,r,"f")}set distance(e){o(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return l(this,a,"f")}set position(e){o(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return l(this,s,"f")}clone(){return new d({color:this.color,position:this.position,distance:this.distance,decay:this.decay,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.PointLight=d,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},4410:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=void 0;const d=i(887),f=i(169),p=i(3995);class m extends p.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:void 0!==e.intensity?e.intensity:1,type:f.LIGHT_TYPE.SPOT,name:e.name,order:e.order,id:e.id,version:e.version}),n.set(this,Math.PI/4),r.set(this,0),a.set(this,0),s.set(this,.5),o.set(this,d.vec3.fromValues(-1,0,1)),l.set(this,d.vec3.fromValues(0,0,0)),c.set(this,{}),e.position&&u(this,o,e.position,"f"),e.target&&u(this,l,e.target,"f"),e.distance&&u(this,a,e.distance,"f"),e.decay&&u(this,r,e.decay,"f"),e.angle&&u(this,n,e.angle,"f"),e.penumbra&&u(this,s,e.penumbra,"f")}get angle(){return h(this,n,"f")}set angle(e){u(this,n,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get decay(){return h(this,r,"f")}set decay(e){u(this,r,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return h(this,a,"f")}set distance(e){u(this,a,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get penumbra(){return h(this,s,"f")}set penumbra(e){u(this,s,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return h(this,o,"f")}set position(e){u(this,o,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get target(){return h(this,l,"f")}set target(e){u(this,l,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get threeJsObject(){return h(this,c,"f")}clone(){return new m({color:this.color,position:this.position,target:this.target,distance:this.distance,decay:this.decay,angle:this.angle,penumbra:this.penumbra,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}}t.SpotLight=m,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap},3490:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=t.PointLight=t.HemisphereLight=t.DirectionalLight=t.AmbientLight=t.AbstractLight=t.LightScene=t.LIGHT_TYPE=t.LightEngine=void 0;const n=i(3995);Object.defineProperty(t,"AbstractLight",{enumerable:!0,get:function(){return n.AbstractLight}});const r=i(4739);Object.defineProperty(t,"LightEngine",{enumerable:!0,get:function(){return r.LightEngine}});const a=i(4771);Object.defineProperty(t,"LightScene",{enumerable:!0,get:function(){return a.LightScene}});const s=i(3955);Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return s.AmbientLight}});const o=i(3520);Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return o.DirectionalLight}});const l=i(3447);Object.defineProperty(t,"HemisphereLight",{enumerable:!0,get:function(){return l.HemisphereLight}});const c=i(4163);Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return c.PointLight}});const u=i(4410);Object.defineProperty(t,"SpotLight",{enumerable:!0,get:function(){return u.SpotLight}});const h=i(169);Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return h.LIGHT_TYPE}})},169:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LIGHT_TYPE=void 0,(i=t.LIGHT_TYPE||(t.LIGHT_TYPE={})).AMBIENT="ambient",i.DIRECTIONAL="directional",i.HEMISPHERE="hemisphere",i.POINT="point",i.RECTANGLE="rectangle",i.SPOT="spot"},3673:(e,t)=>{"use strict";var i,n,r,a,s,o,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.SPINNER_POSITIONING=t.FLAG_TYPE=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.VISIBILITY_MODE=t.RENDERER_TYPE=void 0,(c=t.RENDERER_TYPE||(t.RENDERER_TYPE={})).STANDARD="standard",c.ATTRIBUTES="attributes",(l=t.VISIBILITY_MODE||(t.VISIBILITY_MODE={})).INSTANT="instant",l.SESSION="session",l.MANUAL="manual",(o=t.TEXTURE_ENCODING||(t.TEXTURE_ENCODING={})).LINEAR="linear",o.SRGB="srgb",o.RGBE="rgbe",o.RGBM7="rgbm7",o.RGBM16="rgbm16",o.RGBD="rgbd",o.GAMMA="gamma",(s=t.TONE_MAPPING||(t.TONE_MAPPING={})).NONE="none",s.LINEAR="linear",s.REINHARD="reinhard",s.CINEON="cineon",s.ACES_FILMIC="aces_filmic",(a=t.BUSY_MODE_DISPLAY||(t.BUSY_MODE_DISPLAY={})).BLUR="blur",a.SPINNER="spinner",a.NONE="none",(r=t.SESSION_SETTINGS_MODE||(t.SESSION_SETTINGS_MODE={})).NONE="none",r.FIRST="first",r.MANUAL="manual",(n=t.FLAG_TYPE||(t.FLAG_TYPE={})).BUSY_MODE="busy_mode",n.CAMERA_FREEZE="camera_freeze",n.CONTINUOUS_RENDERING="continuous_rendering",n.CONTINUOUS_SHADOW_MAP_UPDATE="continuous_shadow_map_update",(i=t.SPINNER_POSITIONING||(t.SPINNER_POSITIONING={})).CENTER="center",i.TOP_LEFT="top_left",i.TOP_RIGHT="top_right",i.BOTTOM_LEFT="bottom_left",i.BOTTOM_RIGHT="bottom_right"},2248:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SPINNER_POSITIONING=t.FLAG_TYPE=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.VISIBILITY_MODE=t.RENDERER_TYPE=void 0;const n=i(3673);Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return n.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return n.FLAG_TYPE}}),Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return n.RENDERER_TYPE}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return n.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return n.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return n.TONE_MAPPING}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return n.VISIBILITY_MODE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return n.SPINNER_POSITIONING}})},5934:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutputDelayException=void 0;class i extends Error{constructor(e){super(),this._delay=e}get delay(){return this._delay}}t.OutputDelayException=i},4919:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputLoader=void 0;const r=i(7038),a=i(5254),s=i(3858),o=i(5934),l=i(3574),c=i(5414),u=i(8877);t.OutputLoader=class{constructor(e){this._sessionEngine=e,this._dataEngine=a.DataEngine.instance,this._eventEngine=u.EventEngine.instance,this._loadedOutputNodes={},this._lastOutputNodes={},this._performanceEvaluator=u.PerformanceEvaluator.instance}loadOutputs(e,t,i,r,a=!0){return n(this,void 0,void 0,(function*(){this._performanceEvaluator.startSection("outputLoading");const n=new l.SessionTreeNode(e);let s={},h={},d=[],f=[],p=0,m={};const g=Object.keys(t),v=e=>{const t=e;if(g.find((e=>t.id.startsWith(e)))){m[t.id]=t.progress;let e=0;Object.values(m).forEach((t=>{e+=t}));const i=(r.progressRange.max-r.progressRange.min)*(e/g.length)+r.progressRange.min,n={type:r.type,id:r.eventId,progress:i,data:r.data,status:"Output content loading progress."};this._eventEngine.emitEvent(u.EVENTTYPE.TASK.TASK_PROCESS,n)}};let b=[];b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_START,v)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_PROCESS,v)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_CANCEL,v)),b.push(this._eventEngine.addListener(u.EVENTTYPE.TASK.TASK_END,v));for(let e in t)if(h[e]={version:t[e].version,contentFormat:t[e].content?t[e].content.map((e=>e.format)):[]},s[e]={},this._loadedOutputNodes[e]||(this._loadedOutputNodes[e]={}),i[e])s[e][h[e].version]=this._lastOutputNodes[e][h[e].version],m[e]=1;else if(t[e].delay)p=Math.max(p,t[e].delay);else if(this._loadedOutputNodes[e][h[e].version])s[e][h[e].version]=this._loadedOutputNodes[e][h[e].version],m[e]=1;else if(s[e][h[e].version]=new l.SessionTreeNode(e),s[e][h[e].version].data.push(new c.SessionOutputData(t[e])),t[e].content)for(let i=0,n=t[e].content.length;i<n;i++)d.push(this._dataEngine.loadContent(t[e].content[i],this._sessionEngine.jwtToken,e+"_"+h[e].version+"_"+i)),f.push(s[e][h[e].version]);if(p&&a)throw new o.OutputDelayException(p);yield Promise.all(d),b.forEach((e=>this._eventEngine.removeListener(e)));for(let e=0;e<d.length;e++)f[e].addChild(yield d[e]);for(let e in h)s[e][h[e].version]&&n.addChild(s[e][h[e].version]);for(let e in h)s[e][h[e].version]&&(this._loadedOutputNodes[e]={},this._loadedOutputNodes[e][h[e].version]=s[e][h[e].version],this._lastOutputNodes[e]={},this._lastOutputNodes[e][h[e].version]=s[e][h[e].version]);for(let e in h)if(s[e][h[e].version]&&s[e][h[e].version].children.length>1)for(let t=0,i=h[e].contentFormat.length;t<i;t++)if("sdtf"===h[e].contentFormat[t]){this.mergeContentNodes(s[e][h[e].version]);break}return this.assignMaterials(n),this._performanceEvaluator.endSection("outputLoading"),n}))}getCurrentOutputVersions(){const e={};for(const t in this._lastOutputNodes)e[t]=Object.keys(this._lastOutputNodes[t])[0];return e}assignMaterials(e){const t=(e,i)=>{for(let t=0;t<e.data.length;t++)if(e.data[t]instanceof r.GeometryData){const n=e.data[t],r=n.material;null!==r&&!0!==r.materialOutput||(n.material=i)}for(let n=0;n<e.children.length;n++){const r=e.children[n];r&&t(r,i)}},i=(e,t=[])=>{for(let i=0;i<e.data.length;i++)if(e.data[i]instanceof r.AbstractMaterialData){const n=e.data[i];n.materialOutput=!0,t.push(n)}for(let n=0;n<e.children.length;n++){const r=e.children[n];r&&t.push(...i(r))}return t};for(let n=0;n<e.children.length;n++){const r=e.children[n];if(r)for(let n=0;n<r.data.length;n++){if(!(r.data[n]instanceof c.SessionOutputData))continue;const a=r.data[n];if(a.responseOutput.material){let n=[];for(let t=0;t<e.children.length;t++){const i=e.children[t];i&&i.name===a.responseOutput.material&&(n=i.children)}const s=r.children;if(n.length>=s.length)for(let e=0;e<s.length;e++)t(s[e],i(n[e])[0]);else if(n.length>=1)for(let e=0;e<s.length;e++)t(s[e],i(n[0])[0])}else{const e=a.responseOutput.content;if(void 0===e)continue;const n=[],s=[];for(let t=0;t<e.length;t++)"material"===e[t].format?n.push(r.children[t]):s.push(r.children[t]);if(n.length>=s.length)for(let e=0;e<s.length;e++)t(s[e],i(n[e])[0]);else if(n.length>=1)for(let e=0;e<s.length;e++)t(s[e],i(n[0])[0])}}}}mergeContentNodes(e){if(!(e.children.length>1))return;const t=[];for(;e.children.length>0;)t.push(...e.children[0].children),e.removeChild(e.children[0]);const i=(e,t)=>{for(let i=0;i<e.data.length;i++)t.data.push(e.data[i]);for(let n=0;n<e.children.length;n++){let r;for(let i=0;i<t.children.length;i++)if(e.children[n].name===t.children[i].name){r=t.children[i];break}r||(r=new s.TreeNode(e.children[n].name),t.addChild(r)),i(e.children[n],r)}},n=new s.TreeNode("content_array");e.addChild(n);for(let e=0;e<t.length;e++)i(t[e],n)}}},6042:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,void 0),r(this,n,e,"f")}get responseDto(){return a(this,n,"f")}set responseDto(e){r(this,n,e,"f")}clone(){return new o(this.responseDto,this.id,this.version)}}t.SessionData=o,n=new WeakMap},5446:function(e,t,i){"use strict";var n,r,a,s,o,l=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionEngine=void 0;const h=i(148),d=i(7849),f=i(8877),p=i(1602),m=i(4615),g=i(4513),v=i(7038),b=i(3858),_=i(3529),y=i(5934),A=i(4919),E=i(3616),w=i(6042),S=i(3574);t.SessionEngine=class{constructor(e){this._eventEngine=f.EventEngine.instance,this._exports={},this._httpClient=f.HttpClient.instance,this._logger=f.Logger.instance,this._outputs={},this._outputsFreeze={},this._parameterValues={},this._parameters={},this._performanceEvaluator=f.PerformanceEvaluator.instance,this._sceneTree=b.Tree.instance,this._sessionEngineId=f.UuidGenerator.instance.create(),this._settingsEngine=new f.SettingsEngine,this._stateEngine=f.StateEngine.instance,this._uuidGenerator=f.UuidGenerator.instance,n.set(this,[]),r.set(this,void 0),a.set(this,[]),s.set(this,!1),o.set(this,[]),this._automaticSceneUpdate=!0,this._closeOnFailure=()=>l(this,void 0,void 0,(function*(){})),this._closed=!1,this._customizeOnParameterChange=!1,this._dataCache={},this._excludeViewports=[],this._headers={"X-ShapeDiver-Origin":f.SystemInfo.instance.origin,"X-ShapeDiver-SessionEngineId":this._sessionEngineId,"X-ShapeDiver-BuildVersion":"","X-ShapeDiver-BuildDate":""},this._initialized=!1,this._retryCounter=0,this._updateCallback=null,this._viewerSettingsVersion=h.latestVersion,this._viewerSettingsVersionBackend=h.latestVersion,this._id=e.id,this._node=new b.TreeNode(e.id),this._guid=e.guid,this._ticket=e.ticket,this._modelViewUrl=e.modelViewUrl,this._excludeViewports=e.excludeViewports||[],this._jwtToken=e.jwtToken,this._headers["X-ShapeDiver-BuildDate"]=e.buildDate,this._headers["X-ShapeDiver-BuildVersion"]=e.buildVersion,this._outputLoader=new A.OutputLoader(this);try{this._sdk=(0,d.create)(this._modelViewUrl,this._jwtToken),this._sdk.setConfigurationValue(d.ShapeDiverSdkConfigType.REQUEST_HEADERS,this._headers)}catch(e){throw this._httpClient.convertError(e)}}get automaticSceneUpdate(){return this._automaticSceneUpdate}set automaticSceneUpdate(e){this._automaticSceneUpdate=e,e&&!1===this._closed?this.addToSceneTree(this._node):this.removeFromSceneTree(this._node)}get canUploadGLTF(){try{return this.checkAvailability("gltf-upload"),!0}catch(e){return!1}}get customizeOnParameterChange(){return this._customizeOnParameterChange}set customizeOnParameterChange(e){this._customizeOnParameterChange=e}get excludeViewports(){return this._excludeViewports}set excludeViewports(e){this._excludeViewports=JSON.parse(JSON.stringify(e)),this._node.excludeViewports=JSON.parse(JSON.stringify(e))}get exports(){return this._exports}get guid(){return this._guid}get id(){return this._id}get initialized(){return this._initialized}get jwtToken(){return this._jwtToken}get modelViewUrl(){return this._modelViewUrl}get node(){return this._node}get outputs(){return this._outputs}get outputsFreeze(){return this._outputsFreeze}get parameterValues(){return this._parameterValues}get parameters(){return this._parameters}get refreshJwtToken(){return this._refreshJwtToken}set refreshJwtToken(e){this._refreshJwtToken=e}get settingsEngine(){return this._settingsEngine}get ticket(){return this._ticket}get updateCallback(){return this._updateCallback}set updateCallback(e){this._updateCallback=e}get viewerSettings(){return this._viewerSettings}applySettings(e,t){let i;if(void 0===(t=t||{}).session&&(t.session={parameter:{displayname:!1,order:!1,hidden:!1},export:{displayname:!1,order:!1,hidden:!1}}),void 0===t.session.parameter&&(t.session.parameter={displayname:!1,order:!1,hidden:!1,value:!1}),void 0===t.session.export&&(t.session.export={displayname:!1,order:!1,hidden:!1}),void 0===t.viewport&&(t.viewport={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1,postprocessing:!1}),void 0===e.viewer)throw new f.ShapeDiverViewerSettingsError("Session.applySettings: No config object available.");i=e.viewer.config;try{(0,h.validate)(i)}catch(e){throw new f.ShapeDiverViewerSettingsError("Session.applySettings: Was not able to validate config object.")}const n=(0,h.convert)(i,h.latestVersion),r={};if((t.session.export.displayname||t.session.export.order||t.session.export.hidden)&&e.exports)for(const t in e.exports)void 0!==e.exports[t].uid&&(r[e.exports[t].uid]=t);const a=this._settingsEngine.settings;if(t.session.parameter.displayname||t.session.parameter.order||t.session.parameter.hidden||t.session.parameter.value)for(const i in this.parameters)n.session[i]&&(t.session.parameter.displayname&&(this.parameters[i].displayname=n.session[i].displayname),t.session.parameter.order&&(this.parameters[i].order=n.session[i].order),t.session.parameter.hidden&&(this.parameters[i].hidden=n.session[i].hidden||!1)),e.parameters&&e.parameters[i]&&!(this.parameters[i]instanceof m.FileParameter||this.parameters[i].type.startsWith("s"))&&t.session.parameter.value&&(this.parameters[i].value=void 0!==e.parameters[i].defval?e.parameters[i].defval:this.parameters[i].value);if(t.session.export.displayname||t.session.export.order||t.session.export.hidden)for(const e in this.exports){let i="";if(n.session[e])i=e;else{const t=this.exports[e].uid;if(!t)continue;if(!r[t])continue;i=r[t]}n.session[i]&&(t.session.export.displayname&&(this.exports[e].displayname=n.session[i].displayname),t.session.export.order&&(this.exports[e].order=n.session[i].order),t.session.export.hidden&&(this.exports[e].hidden=n.session[i].hidden||!1))}t.viewport.ar&&(a.ar=n.ar,a.general.transformation=n.general.transformation),t.viewport.camera&&(a.camera=n.camera),t.viewport.light&&(a.light=n.light),t.viewport.scene&&(a.environmentGeometry.gridColor=n.environmentGeometry.gridColor,a.environmentGeometry.gridVisibility=n.environmentGeometry.gridVisibility,a.environmentGeometry.groundPlaneColor=n.environmentGeometry.groundPlaneColor,a.environmentGeometry.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,a.environmentGeometry.groundPlaneShadowColor=n.environmentGeometry.groundPlaneShadowColor,a.environmentGeometry.groundPlaneShadowVisibility=n.environmentGeometry.groundPlaneShadowVisibility,a.rendering.shadows=n.rendering.shadows,a.rendering.softShadows=n.rendering.softShadows,a.rendering.automaticColorAdjustment=n.rendering.automaticColorAdjustment,a.rendering.textureEncoding=n.rendering.textureEncoding,a.rendering.outputEncoding=n.rendering.outputEncoding,a.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,a.rendering.toneMapping=n.rendering.toneMapping,a.rendering.toneMappingExposure=n.rendering.toneMappingExposure),t.viewport.general&&(a.general.defaultMaterialColor=n.general.defaultMaterialColor,a.general.commitParameters=n.general.commitParameters,a.general.pointSize=n.general.pointSize),t.viewport.postprocessing&&(a.postprocessing=n.postprocessing),t.viewport.environment&&(a.environment.clearAlpha=n.environment.clearAlpha,a.environment.clearColor=n.environment.clearColor,a.environment.map=n.environment.map,a.environment.mapAsBackground=n.environment.mapAsBackground,a.environment.rotation=n.environment.rotation,a.environment.blurriness=n.environment.blurriness,a.environment.intensity=n.environment.intensity)}canGoBack(){return c(this,a,"f").length>1}canGoForward(){return c(this,o,"f").length>0}cancelCustomization(){c(this,r,"f")&&this.removeBusyMode(c(this,r,"f"));for(const e of c(this,n,"f"))for(const t in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[t].busy.includes(e)&&this._stateEngine.renderingEngines[t].busy.splice(this._stateEngine.renderingEngines[t].busy.indexOf(e),1);u(this,n,[],"f"),u(this,r,void 0,"f")}close(e=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("close");try{this._httpClient.removeDataLoading(this._sessionId),yield this._sdk.session.close(this._sessionId),this._automaticSceneUpdate&&this.removeFromSceneTree(this._node),this._closed=!0}catch(t){return yield this.handleError(t,e),yield this.close(!0)}}))}customize(e=!1,t=!1){return l(this,void 0,void 0,(function*(){const i=this._uuidGenerator.create(),n=this._uuidGenerator.create();try{if(!1===e){let e=!1;for(const t in this.parameters)this.parameters[t].sessionValue!==this.parameters[t].value&&(e=!0);if(!1===e)return this.node}const l={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_START,l);const h=this.node.cloneInstance();u(this,r,n,"f"),this._logger.debugLow(`Session(${this.id}).customize: Customizing session.`),this.addBusyMode(n);const d={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.1,data:{sessionId:this.id},status:"Uploading file parameters"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_PROCESS,d);const p={};for(const e in this.parameters)if(this.parameters[e]instanceof m.FileParameter){p[e]=yield this.parameters[e].upload();const t=this.cancelProcess(n,i,v.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(t)return t}const g=this.cancelProcess(n,i,v.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(g)return g;for(const e in p)this.parameters[e].value=p[e];const b={};for(const e in this.parameters)b[e]={value:this.parameters[e].value,valueString:this.parameters[e].stringify()};for(const e in this.parameters)this.parameterValues[e]=b[e].valueString;this._logger.info(`Session(${this.id}).customize: Customizing session with parameters ${JSON.stringify(this.parameterValues)}.`);const _={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.1,data:{sessionId:this.id},status:"Sending customization request"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_PROCESS,_);const y=this._outputLoader.getCurrentOutputVersions(),A=yield this.customizeInternal((()=>c(this,r,"f")!==n),{eventId:i,type:v.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:.1,max:.9},data:{sessionId:this.id}}),E=this.cancelProcess(n,i,v.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(E)return E;const w=this._outputLoader.getCurrentOutputVersions(),S={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.9,data:{sessionId:this.id},status:"Updating scene"};if(this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_PROCESS,S),!1===t){for(const e in this.outputs)y[e]!==w[e]&&this._eventEngine.emitEvent(f.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:e,outputVersion:w[e],newNode:A.children.find((t=>t.name===e)),oldNode:h.children.find((t=>t.name===e))});yield this.waitForUpdateCallbacks(w,y,A,h);const e=this.cancelProcess(n,i,v.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(e)return e}c(this,s,"f")||(c(this,a,"f").push(b),u(this,o,[],"f")),this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=A,this.automaticSceneUpdate&&!1===this._closed&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).customize: Customization request finished, updating geometry.`);for(const e in this.parameters)this.parameters[e].sessionValue=b[e].value;for(const e in this.outputs)this.outputs[e].updateOutput(A.children.find((t=>t.name===e)),h.children.find((t=>t.name===e)));for(const e in this.exports)this.exports[e].updateExport();this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)),this.removeBusyMode(n),this._logger.debug(`Session(${this.id}).customize: Session customized.`),this._eventEngine.emitEvent(f.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,{sessionId:this.id});const T={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customized"};if(this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_END,T),t){for(const e in this._stateEngine.renderingEngines)this.excludeViewports.includes(this._stateEngine.renderingEngines[e].id)||this._stateEngine.renderingEngines[e].update(`SessionEngine(${this.id}).customize`);for(const e in this.outputs)y[e]!==w[e]&&this._eventEngine.emitEvent(f.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:e,outputVersion:w[e],newNode:A.children.find((t=>t.name===e)),oldNode:h.children.find((t=>t.name===e))});yield this.waitForUpdateCallbacks(w,y,A,h);const e=this.cancelProcess(n,i,v.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(e)return e}return t||setTimeout((()=>{for(const e in this._stateEngine.renderingEngines)this.excludeViewports.includes(this._stateEngine.renderingEngines[e].id)||this._stateEngine.renderingEngines[e].update(`SessionEngine(${this.id}).customize`)}),0),this.node}catch(e){const t={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customization failed"};throw this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_CANCEL,t),this.removeBusyMode(n),this._httpClient.convertError(e)}}))}customizeParallel(e,t=!0){return l(this,void 0,void 0,(function*(){const i=this._uuidGenerator.create(),n={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_START,n);const r={};for(const t in this.parameters)r[t]=void 0!==e[t]?(" "+e[t]).slice(1):this.parameters[t].stringify();const a=yield this.customizeSession(r,(()=>!1),{eventId:i,type:v.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:0,max:1},data:{sessionId:this.id}},!0,t);a instanceof S.SessionTreeNode&&(a.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)));const s={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customized"};return this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_END,s),a}))}goBack(){return l(this,void 0,void 0,(function*(){if(!this.canGoBack())return this._logger.debug(`Session(${this.id}).goBack: Cannot go further back.`),new b.TreeNode;const e=c(this,a,"f").pop(),t=c(this,a,"f")[c(this,a,"f").length-1];for(const e in t)this.parameters[e].value=t[e].value;u(this,s,!0,"f");const i=yield this.customize();return u(this,s,!1,"f"),c(this,o,"f").push(e),i}))}goForward(){return l(this,void 0,void 0,(function*(){if(!this.canGoForward())return this._logger.debug(`Session(${this.id}).goForward: Cannot go further forward.`),new b.TreeNode;const e=c(this,o,"f").pop();for(const t in e)this.parameters[t].value=e[t].value;u(this,s,!0,"f");const t=yield this.customize();return u(this,s,!1,"f"),c(this,a,"f").push(e),t}))}init(e,t=!1){var i,n;return l(this,void 0,void 0,(function*(){if(!0===this._initialized)throw new f.ShapeDiverViewerSessionError("Session.init: Session already initialized.");try{this._performanceEvaluator.startSection("sessionResponse");const t={};for(const i in e)t[i]=(" "+e[i]).slice(1);if(this._ticket)this._responseDto=yield this._sdk.session.init(this._ticket,t);else{if(!this._guid)throw new f.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. Neither a ticket nor a guid are available.");this._responseDto=yield this._sdk.session.initForModel(this._guid,t)}if(this._performanceEvaluator.endSection("sessionResponse"),this._viewerSettings=null===(i=this._responseDto.viewer)||void 0===i?void 0:i.config,this._viewerSettingsVersionBackend=this._responseDto.viewerSettingsVersion||h.latestVersion,this._sessionId=this._responseDto.sessionId,this._modelId=null===(n=this._responseDto.model)||void 0===n?void 0:n.id,this._httpClient.addDataLoading(this._sessionId,{getAsset:this._sdk.asset.getAsset.bind(this._sdk.asset),downloadTexture:this._sdk.asset.downloadImage.bind(this._sdk.asset)}),this._settingsEngine.loadSettings(this._viewerSettings),!this._sessionId)throw new f.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a sessionId.");if(!this._modelId)throw new f.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a model.id.");this.updateResponseDto(this._responseDto,t),this._initialized=!0}catch(i){return yield this.handleError(i,t),yield this.init(e,!0)}}))}loadCachedOutputsParallel(e,t,i=!1){var n;return l(this,void 0,void 0,(function*(){this.checkAvailability();const r=t?t.eventId:this._uuidGenerator.create(),a=t?t.type:v.TASK_TYPE.SESSION_OUTPUTS_LOADING,s=t?t.data:{sessionId:this.id};t=t||{eventId:r,type:a,progressRange:{min:0,max:1},data:s};try{if(!t){const e={type:a,id:r,progress:0,data:s,status:"Loading cached outputs"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_START,e)}const i=yield this._sdk.output.getCache(this._sessionId,e),o={};for(const e in i.outputs)i.outputs[e].id=e,o[e]=new _.Output(i.outputs[e],this);const l=yield this._outputLoader.loadOutputs((null===(n=this._responseDto.model)||void 0===n?void 0:n.name)||"model",o,{},t,!1),c={type:a,id:r,progress:1,data:s,status:"Loaded cached outputs"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_END,c);const u={};for(const t in e)u[t]=l.children.find((e=>e.name===t));return u}catch(n){return yield this.handleError(n,i),yield this.loadCachedOutputsParallel(e,t,!0)}}))}loadOutputs(e=(()=>!1),t,i=!1){var n;return l(this,void 0,void 0,(function*(){this.checkAvailability();const r=Object.assign({},this._outputs),a=Object.assign({},this._outputsFreeze);try{const i=yield this._outputLoader.loadOutputs((null===(n=this._responseDto.model)||void 0===n?void 0:n.name)||"model",r,a,t);return i.data.push(new w.SessionData(this._responseDto)),e()||(i.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports))),i}catch(n){if(!(n instanceof y.OutputDelayException))return yield this.handleError(n,i),e()?new S.SessionTreeNode:yield this.loadOutputs(e,t,!0);if(yield this.timeout(n.delay),e())return new S.SessionTreeNode;const a={};for(const e in r)a[e]=r[e].version;try{const i=yield this._sdk.output.getCache(this._sessionId,a);return e()?new S.SessionTreeNode:(this.updateResponseDto(i),yield this.loadOutputs(e,t))}catch(n){return yield this.handleError(n,i),e()?new S.SessionTreeNode:yield this.loadOutputs(e,t,!0)}}}))}loadOutputsParallel(e,t=(()=>!1),i,n=!1){var r;return l(this,void 0,void 0,(function*(){this.checkAvailability();const a={},s={};for(const t in e.outputs)e.outputs[t].id=t,void 0===this.outputsFreeze[t]&&(s[t]=!1),a[t]=new _.Output(e.outputs[t],this);try{const t=yield this._outputLoader.loadOutputs((null===(r=this._responseDto.model)||void 0===r?void 0:r.name)||"model",a,s,i);return t.data.push(new w.SessionData(e)),t}catch(r){if(!(r instanceof y.OutputDelayException))return yield this.handleError(r,n),t()?new S.SessionTreeNode:yield this.loadOutputsParallel(e,t,i,!0);if(yield this.timeout(r.delay),t())return new S.SessionTreeNode;const s={};for(const e in a)s[e]=a[e].version;try{const e=yield this._sdk.output.getCache(this._sessionId,s);return t()?new S.SessionTreeNode:(this.updateResponseDto(e),yield this.loadOutputsParallel(e,t,i))}catch(r){return yield this.handleError(r,n),t()?new S.SessionTreeNode:yield this.loadOutputsParallel(e,t,i,!0)}}}))}requestExport(e,t,i,n=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("export");try{const n=this.cleanExportParameters(t),r=yield this._sdk.utils.submitAndWaitForExport(this._sdk,this._sessionId,{exports:{id:e},parameters:n},i);return this.updateResponseDto(r),this.exports[e]}catch(r){return yield this.handleError(r,n),yield this.requestExport(e,t,i,!0)}}))}requestExports(e,t,i=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("export");try{const i=this.cleanExportParameters(e.parameters),n=yield this._sdk.utils.submitAndWaitForExport(this._sdk,this._sessionId,{exports:e.exports,parameters:i,outputs:e.outputs,max_wait_time:e.max_wait_time},t);return this.updateResponseDto(n),n}catch(n){return yield this.handleError(n,i),yield this.requestExports(e,t,!0)}}))}resetSettings(e){if(!this._responseDto)throw new f.ShapeDiverViewerSessionError("Session.resetSettings: responseDto not available.");return void 0===(e=e||{}).session&&(e.session={parameter:{displayname:!0,order:!0,hidden:!0},export:{displayname:!0,order:!0,hidden:!0}}),void 0===e.session.parameter&&(e.session.parameter={displayname:!0,order:!0,hidden:!0,value:!0}),void 0===e.session.export&&(e.session.export={displayname:!0,order:!0,hidden:!0}),void 0===e.viewport&&(e.viewport={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0}),this.applySettings(this._responseDto,e)}saveDefaultParameterValues(){return l(this,void 0,void 0,(function*(){this._logger.debugLow(`Session(${this.id}).saveDefaultParameters: Saving default parameters.`);const e=yield this.saveDefaultParameters();if(!e)throw new f.ShapeDiverViewerSessionError(`Session(${this.id}).saveDefaultParameters: Could not save default parameters.`);return this._logger.debug(`Session(${this.id}).saveDefaultParameters: Saved default parameters.`),e}))}saveDefaultParameters(e=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("defaultparam",!0);try{return yield this._sdk.model.setDefaultParams(this._modelId,this._parameterValues),!0}catch(t){return yield this.handleError(t,e),yield this.saveDefaultParameters(!0)}}))}saveExportProperties(e,t=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("export-definition",!0);try{return yield this._sdk.export.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveExportProperties(e,!0)}}))}saveOutputProperties(e,t=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("output-definition",!0);try{return yield this._sdk.output.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveOutputProperties(e,!0)}}))}saveParameterProperties(e,t=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("parameter-definition",!0);try{return yield this._sdk.model.updateParameterDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveParameterProperties(e,!0)}}))}saveSettings(e,t=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("configure",!0);try{(0,h.validate)(e,this._viewerSettingsVersion),+this._viewerSettingsVersion>+this._viewerSettingsVersionBackend&&(e=(0,h.convert)(e,this._viewerSettingsVersionBackend))}catch(e){throw new f.ShapeDiverViewerSettingsError("Session.saveSettings: Settings could not be validated. "+e.message,e)}try{return yield this._sdk.model.updateConfig(this._modelId,e),!0}catch(i){return yield this.handleError(i,t),yield this.saveSettings(e,!0)}}))}saveUiProperties(e=!0){return l(this,void 0,void 0,(function*(){this._logger.debugLow(`Session(${this.id}).saveSessionProperties: Saving session properties.`),this._saveSessionSettings();let t={};for(const e in this.parameters)t[e]={displayname:void 0!==this.parameters[e].displayname?this.parameters[e].displayname:"",hidden:void 0!==this.parameters[e].hidden&&this.parameters[e].hidden,order:void 0!==this.parameters[e].order?this.parameters[e].order:0,tooltip:void 0!==this.parameters[e].tooltip?this.parameters[e].tooltip:""};const i=0===Object.values(t).length||(yield this.saveParameterProperties(t));t={};for(const e in this.exports)t[e]={displayname:void 0!==this.exports[e].displayname?this.exports[e].displayname:"",hidden:void 0!==this.exports[e].hidden&&this.exports[e].hidden,order:void 0!==this.exports[e].order?this.exports[e].order:0,tooltip:void 0!==this.exports[e].tooltip?this.exports[e].tooltip:""};const n=0===Object.values(t).length||(yield this.saveExportProperties(t));t={};for(const e in this.outputs)t[e]={displayname:void 0!==this.outputs[e].displayname?this.outputs[e].displayname:"",hidden:void 0!==this.outputs[e].hidden&&this.outputs[e].hidden,order:void 0!==this.outputs[e].order?this.outputs[e].order:0,tooltip:void 0!==this.outputs[e].tooltip?this.outputs[e].tooltip:""};const r=0===Object.values(t).length||(yield this.saveOutputProperties(t)),a=!e||(yield this.saveSettings(this._settingsEngine.settings));return a&&i&&r&&n?this._logger.debug(`Session(${this.id}).saveSessionProperties: Saved session properties.`):this._logger.warn(`Session(${this.id}).saveSessionProperties: Could not save session properties.`),a&&i&&r&&n}))}setJwtToken(e){return l(this,void 0,void 0,(function*(){this.checkAvailability(),this._jwtToken=e;try{this._sdk.setConfigurationValue(d.ShapeDiverSdkConfigType.JWT_TOKEN,e);const t=yield this._sdk.session.default(this._sessionId);this._responseDto&&(this._responseDto.actions=t.actions)}catch(e){throw this._httpClient.convertError(e)}}))}updateOutputs(e,t=!1){return l(this,void 0,void 0,(function*(){const i=e?e.eventId:this._uuidGenerator.create(),n=e?e.type:v.TASK_TYPE.SESSION_OUTPUTS_UPDATE,a=e?e.data:{sessionId:this.id};if(!e){const e={type:n,id:i,progress:0,data:a,status:"Updating outputs"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_START,e)}const s=this._uuidGenerator.create(),o=this.node.cloneInstance();u(this,r,s,"f"),this._logger.debugLow(`Session(${this.id}).updateOutputs: Updating Outputs.`),this.addBusyMode(s);const l={type:n,id:i,progress:e?.1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.1,data:a,status:"Loading outputs"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_PROCESS,l);const h=this._outputLoader.getCurrentOutputVersions(),d=yield this.loadOutputs((()=>c(this,r,"f")!==s),{eventId:i,type:n,progressRange:{min:e?.1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.1,max:e?.9*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.9},data:a}),p=this._outputLoader.getCurrentOutputVersions(),m={type:n,id:i,progress:e?.9*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:.9,data:a,status:"Updating scene"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_PROCESS,m);const g=this.cancelProcess(s,i,n,e?1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:1,a,d);if(g)return g;if(!1===t){for(const e in this.outputs)h[e]!==p[e]&&this._eventEngine.emitEvent(f.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:e,outputVersion:p[e],newNode:d.children.find((t=>t.name===e)),oldNode:o.children.find((t=>t.name===e))});yield this.waitForUpdateCallbacks(p,h,d,o);const t=this.cancelProcess(s,i,n,e?1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:1,a,d);if(t)return t}this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=d,this.automaticSceneUpdate&&!1===this._closed&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).updateOutputs: Updating outputs finished, updating geometry.`);for(const e in this.outputs)this.outputs[e].updateOutput(d.children.find((t=>t.name===e)),o.children.find((t=>t.name===e)));for(const e in this.exports)this.exports[e].updateExport();if(this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)),this.removeBusyMode(s),this._logger.debug(`Session(${this.id}).updateOutputs: Updated outputs.`),!e){const e={type:n,id:i,progress:1,data:a,status:"Outputs updated"};this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_END,e)}if(t){for(const e in this._stateEngine.renderingEngines)this.excludeViewports.includes(this._stateEngine.renderingEngines[e].id)||this._stateEngine.renderingEngines[e].update(`SessionEngine(${this.id}).updateOutputs`);for(const e in this.outputs)h[e]!==p[e]&&this._eventEngine.emitEvent(f.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:e,outputVersion:p[e],newNode:d.children.find((t=>t.name===e)),oldNode:o.children.find((t=>t.name===e))});yield this.waitForUpdateCallbacks(p,h,d,o);const t=this.cancelProcess(s,i,n,e?1*(e.progressRange.max-e.progressRange.min)+e.progressRange.min:1,a,d);if(t)return t}return this.node}))}uploadFile(e,t,i,n=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("file-upload");try{const n=yield this._sdk.file.requestUpload(this._sessionId,{[e]:{size:t.size,format:i}});if(n&&n.asset&&n.asset.file&&n.asset.file[e]){const r=n.asset.file[e];return yield this._sdk.utils.upload(r.href,yield t.arrayBuffer(),i),r.id}throw new f.ShapeDiverViewerSessionError("Session.uploadFile: Upload reply has not the required format.")}catch(r){return yield this.handleError(r,n),yield this.uploadFile(e,t,i,!0)}}))}uploadGLTF(e,t=d.ShapeDiverRequestGltfUploadQueryConversion.NONE,i=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("gltf-upload");try{const i=yield this._sdk.gltf.upload(this._sessionId,yield e.arrayBuffer(),"model/gltf-binary",t);if(!i||!i.gltf||!i.gltf.href)throw new f.ShapeDiverViewerSessionError("Session.uploadGLTF: Upload reply has not the required format.");return i}catch(n){return yield this.handleError(n,i),yield this.uploadGLTF(e,t,!0)}}))}_saveSessionSettings(){const e=this.parameters,t=this.exports,i={};for(const t in e)i[t]={order:e[t].order||0,displayname:e[t].displayname||"",hidden:e[t].hidden};for(const e in t)i[e]={order:t[e].order||0,displayname:t[e].displayname||"",hidden:t[e].hidden};this._settingsEngine.session=i;let n=[];for(const e in this.outputs)n.push(this.outputs[e]);n.sort(((e,t)=>(e.order||1/0)-(t.order||1/0)));const r=n.filter((e=>0===e.order));n=n.filter((e=>!r.includes(e))),n=r.concat(n);const a=n.map((e=>e.id));for(let e=0;e<a.length;e++)this.outputs[a[e]]&&this.outputs[a[e]].order!==e&&(this.outputs[a[e]].order=e)}_warningCreator(){for(const e in this.outputs){let t="";this.outputs[e].msg&&(t+=`\n\t- ${this.outputs[e].msg}`),this.outputs[e].status_collect&&this.outputs[e].status_collect!==d.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_collect is ${this.outputs[e].status_collect}`),this.outputs[e].status_computation&&this.outputs[e].status_computation!==d.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_computation is ${this.outputs[e].status_computation}`),t&&this._logger.warn(`\nOutput(${e}):${t}`)}for(const e in this.exports){let t="";this.exports[e].msg&&(t+=`\n\t- ${this.exports[e].msg}`),this.exports[e].status_collect&&this.exports[e].status_collect!==d.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_collect is ${this.exports[e].status_collect}`),this.exports[e].status_computation&&this.exports[e].status_computation!==d.ShapeDiverResponseModelComputationStatus.SUCCESS&&(t+=`\n\t- status_computation is ${this.exports[e].status_computation}`),t&&this._logger.warn(`\nExport(${e}):${t}`)}}addBusyMode(e){for(const t in this._stateEngine.renderingEngines)this.excludeViewports.includes(t)||(this._stateEngine.renderingEngines[t].busy.push(e),c(this,n,"f").push(e))}addToSceneTree(e){this._sceneTree.addNode(e),this._sceneTree.root.updateVersion()}cancelProcess(e,t,i,n,a,s=new S.SessionTreeNode){if(c(this,r,"f")!==e){this.removeBusyMode(e);const r={type:i,id:t,progress:n,data:a,status:"The request was exceeded by another customization request"};return this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_CANCEL,r),this._logger.debug(`Session(${this.id}).cancelProcess: The request was was exceeded by another request.`),s}if(!0===this._closed){this.removeBusyMode(e),this._logger.debug(`Session(${this.id}).cancelProcess: The session was closed during the request.`);const i={type:v.TASK_TYPE.SESSION_CUSTOMIZATION,id:t,progress:1,data:{sessionId:this.id},status:"The session was closed during the request."};return this._eventEngine.emitEvent(f.EVENTTYPE.TASK.TASK_CANCEL,i),new S.SessionTreeNode}}checkAvailability(e,t=!1){var i;if(!this._responseDto)throw new f.ShapeDiverViewerSessionError("Session.checkAvailability: responseDto not available.");if(!this._sessionId)throw new f.ShapeDiverViewerSessionError("Session.checkAvailability: sessionId not available.");if(t&&!this._modelId)throw new f.ShapeDiverViewerSessionError("Session.checkAvailability: modelId not available.");if(e&&!this._responseDto.actions)throw new f.ShapeDiverViewerSessionError("Session.checkAvailability: actions not available.");const n=null===(i=this._responseDto.actions)||void 0===i?void 0:i.find((t=>t.name===e));if(e&&!n)throw new f.ShapeDiverViewerSessionError(`Session.checkAvailability: action ${e} not available.`)}cleanExportParameters(e){const t={};for(const i in e){const n=Object.values(this._parameters).find((e=>e.id===i||e.name===i||e.displayname===i));n&&(t[n.id]=e[i])}const i=this.parameterValues;for(const e in i)void 0===t[e]&&(t[e]=(" "+i[e]).slice(1));return t}customizeInternal(e,t){return l(this,void 0,void 0,(function*(){return this.customizeSession(this._parameterValues,e,t)}))}customizeSession(e,t,i,n=!1,r=!0,a=!1){return l(this,void 0,void 0,(function*(){this.checkAvailability("customize");try{this._performanceEvaluator.startSection("sessionResponse");const a=yield this._sdk.utils.submitAndWaitForCustomization(this._sdk,this._sessionId,e);return this._performanceEvaluator.endSection("sessionResponse"),!0===r?t()?new S.SessionTreeNode:!0===n?this.loadOutputsParallel(a,t,i):(this.updateResponseDto(a),this.loadOutputs(t,i)):a}catch(s){return yield this.handleError(s,a),t()?new S.SessionTreeNode:yield this.customizeSession(e,t,i,n,r,!0)}}))}handleError(e,t=!1){return l(this,void 0,void 0,(function*(){if(!(0,d.isGBResponseError)(e))throw this._httpClient.convertError(e);if(e.error===d.ShapeDiverResponseErrorType.SESSION_GONE_ERROR){if(this._logger.warn("The session has been closed, trying to re-initialize."),this._sessionId&&this._httpClient.removeDataLoading(this._sessionId),!(this._retryCounter<3)){this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}this._retryCounter=t?this._retryCounter+1:1,this._initialized=!1,yield this.init(this.parameterValues,!0)}else{if(e.error!==d.ShapeDiverResponseErrorType.JWT_VALIDATION_ERROR)throw this._httpClient.convertError(e);if(!(this._retryCounter<3)){this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}if(!this._refreshJwtToken){this._logger.warn("No retry possible, no new bearer token was supplied. Closing Session.");try{yield this._closeOnFailure()}catch(e){}throw this._httpClient.convertError(e)}yield this.setJwtToken(yield this._refreshJwtToken()),this._retryCounter=t?this._retryCounter+1:1,this._logger.warn("Re-trying with new bearer token.")}}))}removeBusyMode(e){for(const t in this._stateEngine.renderingEngines)this._stateEngine.renderingEngines[t].busy.includes(e)&&this._stateEngine.renderingEngines[t].busy.splice(this._stateEngine.renderingEngines[t].busy.indexOf(e),1),c(this,n,"f").includes(e)&&c(this,n,"f").splice(c(this,n,"f").indexOf(e),1)}removeFromSceneTree(e){this._sceneTree.removeNode(e),this._sceneTree.root.updateVersion()}timeout(e){return l(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))}updateResponseDto(e,t){if(!this._responseDto)return void(this._responseDto=e);if(e.parameters)for(const t in e.parameters)this._responseDto.parameters=this._responseDto.parameters||{},this._responseDto.parameters[t]=this._responseDto.parameters[t]||e.parameters[t];if(e.outputs)for(const t in e.outputs)this._responseDto.outputs=this._responseDto.outputs||{},!("version"in e.outputs[t])&&this._responseDto.outputs[t]&&"version"in this._responseDto.outputs[t]||(this._responseDto.outputs[t]=e.outputs[t]);if(e.exports)for(const t in e.exports)this._responseDto.exports=this._responseDto.exports||{},!("version"in e.exports[t])&&this._responseDto.exports[t]&&"version"in this._responseDto.exports[t]||(this._responseDto.exports[t]=e.exports[t]);const i={};for(const e in this._responseDto.parameters)if(!this.parameters[e]){switch(this._responseDto.parameters[e].id=e,!0){case this._responseDto.parameters[e].type===g.PARAMETER_TYPE.BOOL:case this._responseDto.parameters[e].type===g.PARAMETER_TYPE.COLOR:this.parameters[e]=new E.Parameter(this._responseDto.parameters[e],this);break;case this._responseDto.parameters[e].type===g.PARAMETER_TYPE.FILE:this.parameters[e]=new m.FileParameter(this._responseDto.parameters[e],this);break;case this._responseDto.parameters[e].type===g.PARAMETER_TYPE.EVEN||this._responseDto.parameters[e].type===g.PARAMETER_TYPE.FLOAT||this._responseDto.parameters[e].type===g.PARAMETER_TYPE.INT||this._responseDto.parameters[e].type===g.PARAMETER_TYPE.ODD:default:this.parameters[e]=new E.Parameter(this._responseDto.parameters[e],this)}t&&(void 0!==t[e]?this.parameters[e].value=t[e]:void 0!==t[this.parameters[e].name]&&(this.parameters[e].value=t[this.parameters[e].name])),i[e]={value:this.parameters[e].value,valueString:this.parameters[e].stringify()},this.initialized||(this.parameterValues[e]=i[e].valueString)}this.initialized||c(this,a,"f").push(i);for(const e in this._responseDto.exports)this._responseDto.exports[e].type!==d.ShapeDiverResponseExportDefinitionType.EMAIL&&this._responseDto.exports[e].type!==d.ShapeDiverResponseExportDefinitionType.DOWNLOAD||(this.exports[e]?this.exports[e].updateExportDefinition(this._responseDto.exports[e]):(this._responseDto.exports[e].id=e,this.exports[e]=new p.Export(this._responseDto.exports[e],this)));for(const e in this._responseDto.outputs)this.outputs[e]?this.outputs[e].updateOutputDefinition(this._responseDto.outputs[e]):(this._responseDto.outputs[e].id=e,void 0===this.outputsFreeze[e]&&(this.outputsFreeze[e]=!1),this.outputs[e]=new _.Output(this._responseDto.outputs[e],this))}waitForUpdateCallbacks(e,t,i,n){return l(this,void 0,void 0,(function*(){this._updateCallback&&(yield Promise.resolve(this._updateCallback(i,n)));const r=[];for(const a in this.outputs)t[a]!==e[a]&&r.push(this.outputs[a].triggerUpdateCallback(i.children.find((e=>e.name===a)),n.children.find((e=>e.name===a))));yield Promise.all(r)}))}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},5414:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionOutputData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,void 0),r(this,n,e,"f")}get responseOutput(){return a(this,n,"f")}set responseOutput(e){r(this,n,e,"f")}clone(){return new o(this.responseOutput,this.id,this.version)}}t.SessionOutputData=o,n=new WeakMap},3574:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionTreeNode=void 0;const a=i(3858);class s extends a.TreeNode{constructor(e,t,i,r){super(e,t,i,r),n.set(this,!0)}get sessionNode(){return r(this,n,"f")}}t.SessionTreeNode=s,n=new WeakMap},1602:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E,w,S,T,x,M=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},R=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},P=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Export=void 0;const C=i(8877),D=i(7038);t.Export=class{constructor(e,t){n.set(this,C.EventEngine.instance),r.set(this,void 0),a.set(this,C.InputValidator.instance),s.set(this,C.Logger.instance),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,C.UuidGenerator.instance),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),v.set(this,!1),b.set(this,3e5),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,void 0),w.set(this,void 0),S.set(this,void 0),T.set(this,void 0),x.set(this,void 0),R(this,l,t,"f"),R(this,r,e.id,"f"),R(this,o,e.name,"f"),R(this,c,e.type,"f"),this.updateExportDefinition(e)}get content(){return P(this,h,"f")}get delay(){return P(this,d,"f")}get dependency(){return P(this,f,"f")}get displayname(){return P(this,p,"f")}set displayname(e){R(this,p,e,"f")}get filename(){return P(this,m,"f")}get group(){return P(this,g,"f")}get hidden(){return P(this,v,"f")}set hidden(e){R(this,v,e,"f")}get id(){return P(this,r,"f")}get maxWaitTime(){return P(this,b,"f")}set maxWaitTime(e){R(this,b,e,"f")}get msg(){return P(this,_,"f")}get name(){return P(this,o,"f")}get order(){return P(this,y,"f")}set order(e){R(this,y,e,"f")}get result(){return P(this,A,"f")}get status_collect(){return P(this,E,"f")}get status_computation(){return P(this,w,"f")}get tooltip(){return P(this,S,"f")}set tooltip(e){R(this,S,e,"f")}get type(){return P(this,c,"f")}get uid(){return P(this,T,"f")}get version(){return P(this,x,"f")}request(e={}){return M(this,void 0,void 0,(function*(){const t=P(this,u,"f").create();try{const i={type:D.TASK_TYPE.EXPORT_REQUEST,id:t,progress:0,status:"Requesting export"};P(this,n,"f").emitEvent(C.EVENTTYPE.TASK.TASK_START,i),0===Object.keys(e).length?P(this,s,"f").info(`Export(${P(this,r,"f")}).request: Sending export request with parameters ${JSON.stringify(e)}.`):P(this,s,"f").debugLow(`Export(${P(this,r,"f")}).request: Sending export request.`);const a=yield P(this,l,"f").requestExport(this.id,e,P(this,b,"f"));this.updateExportDefinition(a);const o={type:D.TASK_TYPE.EXPORT_REQUEST,id:t,progress:1,status:"Returning export"};return P(this,n,"f").emitEvent(C.EVENTTYPE.TASK.TASK_END,o),a}catch(e){const i={type:D.TASK_TYPE.EXPORT_REQUEST,id:t,progress:1,status:"Export request failed"};throw P(this,n,"f").emitEvent(C.EVENTTYPE.TASK.TASK_CANCEL,i),e}}))}updateExport(){const e=P(this,l,"f").exports[this.id];R(this,f,e.dependency,"f"),R(this,T,e.uid,"f"),R(this,p,e.displayname,"f"),R(this,y,e.order,"f"),R(this,v,e.hidden,"f"),R(this,S,e.tooltip,"f"),R(this,x,e.version,"f"),R(this,d,e.delay,"f"),R(this,h,e.content,"f"),R(this,_,e.msg,"f"),R(this,m,e.filename,"f"),R(this,A,e.result,"f"),R(this,w,e.status_computation,"f"),R(this,E,e.status_collect,"f"),R(this,g,e.group,"f")}updateExportDefinition(e){R(this,f,e.dependency,"f"),R(this,T,e.uid,"f"),R(this,p,e.displayname,"f"),R(this,y,e.order,"f"),R(this,v,e.hidden,"f"),R(this,S,e.tooltip,"f"),R(this,x,e.version,"f"),R(this,d,e.delay,"f"),R(this,h,e.content,"f"),R(this,_,e.msg,"f"),R(this,m,e.filename,"f"),R(this,A,e.result,"f"),R(this,w,e.status_computation,"f"),R(this,E,e.status_collect,"f"),R(this,g,e.group,"f")}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap},4615:function(e,t,i){"use strict";var n,r,a,s=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&s(t,e,i);return o(t,e),t},c=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},u=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},h=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileParameter=void 0;const d=i(8877),f=i(3616),p=l(i(16));class m extends f.Parameter{constructor(e,t){super(e,t),n.set(this,d.Logger.instance),r.set(this,void 0),a.set(this,d.UuidGenerator.instance),u(this,r,t,"f")}upload(){var e;return c(this,void 0,void 0,(function*(){if(void 0===this.value)return this.defval;if("string"==typeof this.value&&(36===this.value.length&&h(this,a,"f").validate(this.value)||""===this.value))return this.value;const t=new File(["string"==typeof this.value?new Blob([this.value],{type:"text/plain"}):this.value],"upload",{type:this.value.type});let i,s=[t.type];p.mapMimeTypeToFileEndings(s).forEach((e=>s=s.concat(p.guessMimeTypeFromFilename(e))));let o=!1;for(let t=0;t<s.length;t++)if(null===(e=this.format)||void 0===e?void 0:e.includes(s[t])){o=!0,i=s[t];break}if(!o)throw new d.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${t.type}) is not a valid type. Has to be ${this.format}.`);return h(this,n,"f").debug(`Parameter(${this.id}).upload: Uploading FileParameter.`),yield h(this,r,"f").uploadFile(this.id,t,i)}))}}t.FileParameter=m,n=new WeakMap,r=new WeakMap,a=new WeakMap},3529:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E,w,S,T,x=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},M=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},R=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Output=void 0;const P=i(8877);t.Output=class{constructor(e,t){n.set(this,void 0),r.set(this,P.InputValidator.instance),a.set(this,P.Logger.instance),s.set(this,void 0),o.set(this,void 0),l.set(this,P.UuidGenerator.instance),c.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,void 0),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,!1),v.set(this,void 0),b.set(this,void 0),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,void 0),w.set(this,void 0),S.set(this,null),T.set(this,void 0),M(this,o,t,"f"),M(this,n,e.id,"f"),M(this,s,e.name,"f"),M(this,T,e.version,"f"),this.updateOutputDefinition(e)}get bbmax(){return R(this,c,"f")}get bbmin(){return R(this,u,"f")}get chunks(){return R(this,h,"f")}get content(){return R(this,d,"f")}set content(e){M(this,d,e,"f")}get delay(){return R(this,f,"f")}get dependency(){return R(this,p,"f")}get displayname(){return R(this,m,"f")}set displayname(e){M(this,m,e,"f")}get format(){return R(this,d,"f")?R(this,d,"f").map((e=>e.format)):[]}get freeze(){return R(this,o,"f").outputsFreeze[R(this,n,"f")]}set freeze(e){R(this,o,"f").outputsFreeze[R(this,n,"f")]=e}get hidden(){return R(this,g,"f")}set hidden(e){M(this,g,e,"f")}get id(){return R(this,n,"f")}get material(){return R(this,v,"f")}get msg(){return R(this,b,"f")}get name(){return R(this,s,"f")}get node(){return R(this,o,"f").node.children.find((e=>e.name===this.id))}get order(){return R(this,_,"f")}set order(e){M(this,_,e,"f")}get status_collect(){return R(this,y,"f")}get status_computation(){return R(this,A,"f")}get tooltip(){return R(this,E,"f")}set tooltip(e){M(this,E,e,"f")}get uid(){return R(this,w,"f")}get updateCallback(){return R(this,S,"f")}set updateCallback(e){M(this,S,e,"f")}get version(){return R(this,T,"f")}set version(e){M(this,T,e,"f")}triggerUpdateCallback(e,t){return x(this,void 0,void 0,(function*(){R(this,S,"f")&&(yield Promise.resolve(R(this,S,"f").call(this,e,t)))}))}updateOutput(e,t){const i=R(this,o,"f").outputs[this.id];if(this.updateOutputDefinition(i),this.chunks&&e)for(let t=0;t<e.children.length;t++)for(let i=0;i<this.chunks.length;i++)this.chunks[i].node=e.children[t].children.find((e=>e.name===this.chunks[i].id))}updateOutputContent(e,t=!1,i=!1){return x(this,void 0,void 0,(function*(){return R(this,o,"f").outputs[this.id].content=e,R(this,o,"f").outputs[this.id].version=R(this,l,"f").create(),t||(yield R(this,o,"f").updateOutputs(void 0,i)),this.node}))}updateOutputDefinition(e){M(this,p,e.dependency,"f"),M(this,w,e.uid,"f"),M(this,v,e.material,"f"),M(this,h,e.chunks,"f"),M(this,b,e.msg,"f"),void 0!==R(this,b,"f")&&R(this,a,"f").warn(`Output(${this.id}): ${R(this,b,"f")}`),M(this,u,e.bbmin,"f"),M(this,c,e.bbmax,"f"),M(this,A,e.status_computation,"f"),M(this,y,e.status_collect,"f"),M(this,d,e.content,"f"),M(this,f,e.delay,"f"),M(this,T,e.version,"f"),M(this,m,e.displayname,"f"),M(this,_,e.order,"f"),M(this,g,e.hidden,"f")}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap},3616:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E,w,S,T,x,M,R=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),P=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),C=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&R(t,e,i);return P(t,e),t},D=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},O=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.Parameter=void 0;const k=i(8877),I=i(4513),N=C(i(16));t.Parameter=class{constructor(e,t){n.set(this,void 0),r.set(this,k.Converter.instance),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,void 0),h.set(this,void 0),d.set(this,k.InputValidator.instance),f.set(this,k.Logger.instance),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),v.set(this,void 0),b.set(this,void 0),_.set(this,void 0),y.set(this,void 0),A.set(this,void 0),E.set(this,!1),w.set(this,void 0),S.set(this,void 0),T.set(this,void 0),x.set(this,void 0),M.set(this,void 0),D(this,v,t,"f"),D(this,h,e.id,"f"),D(this,o,e.defval,"f"),D(this,g,e.name,"f"),D(this,_,e.type,"f"),void 0!==e.choices&&D(this,n,e.choices,"f"),void 0!==e.decimalplaces&&D(this,a,+e.decimalplaces,"f"),void 0!==e.expression&&D(this,l,e.expression,"f"),void 0!==e.format&&D(this,c,N.extendMimeTypes(e.format),"f"),void 0!==e.min&&D(this,m,+e.min,"f"),void 0!==e.max&&D(this,p,+e.max,"f"),void 0!==e.visualization&&D(this,y,e.visualization,"f"),void 0!==e.structure&&D(this,b,e.structure,"f"),void 0!==e.group&&D(this,u,e.group,"f"),void 0!==e.tooltip&&D(this,x,e.tooltip,"f"),void 0!==e.displayname&&D(this,A,e.displayname,"f"),void 0!==e.order&&D(this,S,e.order,"f"),void 0!==e.hidden&&D(this,E,e.hidden,"f"),O(this,_,"f")===I.PARAMETER_TYPE.BOOL?D(this,s,"true"===O(this,o,"f"),"f"):O(this,_,"f")===I.PARAMETER_TYPE.EVEN||O(this,_,"f")===I.PARAMETER_TYPE.FLOAT||O(this,_,"f")===I.PARAMETER_TYPE.INT||O(this,_,"f")===I.PARAMETER_TYPE.ODD?D(this,s,+O(this,o,"f"),"f"):D(this,s,O(this,o,"f"),"f"),O(this,_,"f")===I.PARAMETER_TYPE.COLOR&&(this.convertColor=e=>O(this,r,"f").toHexColor(e)),D(this,M,O(this,s,"f"),"f"),D(this,T,O(this,M,"f"),"f"),D(this,w,O(this,M,"f"),"f")}get choices(){return O(this,n,"f")}get decimalplaces(){return O(this,a,"f")}get defval(){return O(this,o,"f")}get displayname(){return O(this,A,"f")}set displayname(e){D(this,A,e,"f")}get expression(){return O(this,l,"f")}get format(){return O(this,c,"f")}get group(){return O(this,u,"f")}get hidden(){return O(this,E,"f")}set hidden(e){D(this,E,e,"f")}get id(){return O(this,h,"f")}get lastValidatedValue(){return O(this,w,"f")}get max(){return O(this,p,"f")}get min(){return O(this,m,"f")}get name(){return O(this,g,"f")}get order(){return O(this,S,"f")}set order(e){D(this,S,e,"f")}get sessionValue(){return O(this,T,"f")}set sessionValue(e){D(this,T,e,"f")}get structure(){return O(this,b,"f")}get tooltip(){return O(this,x,"f")}set tooltip(e){D(this,x,e,"f")}get type(){return O(this,_,"f")}get value(){return O(this,M,"f")}set value(e){D(this,M,e,"f"),O(this,v,"f").customizeOnParameterChange&&O(this,v,"f").customize()}get visualization(){return O(this,y,"f")}isValid(e){switch(!0){case this.type===I.PARAMETER_TYPE.BOOL:if("string"==typeof e){if("true"!==e&&"false"!==e)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is a string that is neither true or false.`)}else O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"boolean");break;case this.type===I.PARAMETER_TYPE.COLOR:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"color");break;case this.type===I.PARAMETER_TYPE.FILE:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"file");break;case this.type===I.PARAMETER_TYPE.EVEN||this.type===I.PARAMETER_TYPE.FLOAT||this.type===I.PARAMETER_TYPE.INT||this.type===I.PARAMETER_TYPE.ODD:let t=e;if("string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),this.type===I.PARAMETER_TYPE.EVEN){if(t%2!=0)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not even.`)}else if(this.type===I.PARAMETER_TYPE.ODD){if(t%2==0)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not odd.`)}else if(this.type===I.PARAMETER_TYPE.INT&&!Number.isInteger(t))throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not an integer.`);if((this.min||0===this.min)&&t<this.min)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is smaller than the minimum ${this.min}.`);if((this.max||0===this.max)&&t>this.max)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is larger than the maximum ${this.max}.`);if(this.decimalplaces||0===this.decimalplaces){const i=t+"";let n=0;if(i.includes(".")&&(n=i.split(".")[1].length),this.decimalplaces<n)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} has not the correct number of decimalplaces (${this.decimalplaces}).`)}break;case this.type===I.PARAMETER_TYPE.STRINGLIST:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"string");const i=e=>{const t=+e;if(O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),t<0||t>this.choices.length-1)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${e} is not within the range of the defined number choices.`)};if(this.visualization===I.PARAMETER_VISUALIZATION.CHECKLIST)if(e.includes(",")){const t=e.split(",");for(let e=0;e<t.length;e++){if(1!==t.filter((i=>i===t[e])).length)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).isValid: The value ${t[e]} exists multiple times, but should only exist once.`);i(t[e])}}else{let t=e;"string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),i(e)}else{let t=e;"string"==typeof e&&(t=+e),O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,t,"number"),i(e)}break;default:O(this,d,"f").validateAndError(`Parameter(${O(this,h,"f")}).isValid`,e,"string")}return!0}resetToDefaultValue(){D(this,M,O(this,s,"f"),"f")}resetToSessionValue(){D(this,M,this.sessionValue,"f")}stringify(){switch(!0){case this.type===I.PARAMETER_TYPE.BOOL:return"string"==typeof this.value?this.value:this.value+"";case this.type===I.PARAMETER_TYPE.COLOR:return O(this,r,"f").toHex8Color(this.value);case this.type===I.PARAMETER_TYPE.FILE:if("string"!=typeof this.value)throw new k.ShapeDiverViewerSessionError(`Parameter(${O(this,h,"f")}).stringify: Error in stringify. Cannot stringify FileParameter that has not been uploaded yet.`);return this.value;case this.type===I.PARAMETER_TYPE.EVEN||this.type===I.PARAMETER_TYPE.FLOAT||this.type===I.PARAMETER_TYPE.INT||this.type===I.PARAMETER_TYPE.ODD:return"string"==typeof this.value?this.decimalplaces||0===this.decimalplaces?(+this.value).toFixed(O(this,a,"f")):this.value:this.decimalplaces||0===this.decimalplaces?this.value.toFixed(O(this,a,"f")):this.value+"";default:return this.value}}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap},9878:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=t.Export=t.FileParameter=t.Parameter=t.Output=t.SessionEngine=t.SessionOutputData=t.SessionData=void 0;const n=i(5446);Object.defineProperty(t,"SessionEngine",{enumerable:!0,get:function(){return n.SessionEngine}});const r=i(4513);Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return r.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return r.PARAMETER_VISUALIZATION}});const a=i(5414);Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return a.SessionOutputData}});const s=i(6042);Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return s.SessionData}});const o=i(1602);Object.defineProperty(t,"Export",{enumerable:!0,get:function(){return o.Export}});const l=i(4615);Object.defineProperty(t,"FileParameter",{enumerable:!0,get:function(){return l.FileParameter}});const c=i(3529);Object.defineProperty(t,"Output",{enumerable:!0,get:function(){return c.Output}});const u=i(3616);Object.defineProperty(t,"Parameter",{enumerable:!0,get:function(){return u.Parameter}})},4513:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=void 0,(n=t.PARAMETER_TYPE||(t.PARAMETER_TYPE={})).FLOAT="Float",n.INT="Int",n.EVEN="Even",n.ODD="Odd",n.STRING="String",n.COLOR="Color",n.STRINGLIST="StringList",n.BOOL="Bool",n.TIME="Time",n.FILE="File",n.SNUMBER="sNumber",n.SINTEGER="sInteger",n.SSTRING="sString",n.SCOLOR="sColor",n.SBOOL="sBool",n.STIME="sTime",n.SBITMAP="sBitmap",n.SDOMAIN="sDomain",n.SDOMAIN2D="sDomain2D",n.SPOINT="sPoint",n.SLINE="sLine",n.SVECTOR="sVector",n.SBOX="sBox",n.SPLANE="sPlane",n.SRECTANGLE="sRectangle",n.SCURVE="sCurve",n.SCIRCLE="sCircle",n.SMESH="sMesh",n.SSURFACE="sSurface",n.SBREP="sBrep",n.SSUBDIV="sSubdiv",(i=t.PARAMETER_VISUALIZATION||(t.PARAMETER_VISUALIZATION={})).SLIDER="slider",i.SEQUENCE="sequence",i.CYCLE="cycle",i.DROPDOWN="dropdown",i.CHECKLIST="checklist",i.CLOCK="color",i.CALENDAR="calendar",i.TOGGLE="toggle",i.SWATCH="swatch",i.BUTTON="button",i.DIAL="dial",i.TEXT="text"},148:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.latestVersion=t.evaluateSettingsVersion=t.validate=t.convert=t.Defaults=t.DefaultsV4_1=t.DefaultsV4_0=t.DefaultsV3_4=t.DefaultsV3_3=t.DefaultsV3_2=t.DefaultsV3_1=t.DefaultsV3=t.DefaultsV2=t.DefaultsV1=void 0;const n=i(7317);Object.defineProperty(t,"DefaultsV1",{enumerable:!0,get:function(){return n.Defaults}});const r=i(865),a=i(1693);Object.defineProperty(t,"DefaultsV2",{enumerable:!0,get:function(){return a.Defaults}});const s=i(6024),o=i(4808),l=i(8719);Object.defineProperty(t,"DefaultsV3",{enumerable:!0,get:function(){return l.Defaults}});const c=i(3181),u=i(4307),h=i(3160);Object.defineProperty(t,"DefaultsV3_1",{enumerable:!0,get:function(){return h.Defaults}});const d=i(4612),f=i(2315),p=i(8897);Object.defineProperty(t,"DefaultsV3_2",{enumerable:!0,get:function(){return p.Defaults}});const m=i(9927),g=i(1079),v=i(4522);Object.defineProperty(t,"DefaultsV3_3",{enumerable:!0,get:function(){return v.Defaults}});const b=i(2025),_=i(767),y=i(9579);Object.defineProperty(t,"DefaultsV3_4",{enumerable:!0,get:function(){return y.Defaults}});const A=i(6835),E=i(3506),w=i(8892);Object.defineProperty(t,"DefaultsV4_0",{enumerable:!0,get:function(){return w.Defaults}});const S=i(940),T=i(31),x=i(7349);Object.defineProperty(t,"DefaultsV4_1",{enumerable:!0,get:function(){return x.Defaults}}),Object.defineProperty(t,"Defaults",{enumerable:!0,get:function(){return x.Defaults}});const M=i(889),R=i(6337);let P=[];P.push({version:"1.0",defaults:n.Defaults,convertToPrevious:e=>e,convertFromPrevious:e=>e,validate:r.validate}),P.push({version:"2.0",defaults:a.Defaults,convertToPrevious:o.convertToPrevious,convertFromPrevious:o.convertFromPrevious,validate:s.validate}),P.push({version:"3.0",defaults:l.Defaults,convertToPrevious:u.convertToPrevious,convertFromPrevious:u.convertFromPrevious,validate:c.validate}),P.push({version:"3.1",defaults:h.Defaults,convertToPrevious:f.convertToPrevious,convertFromPrevious:f.convertFromPrevious,validate:d.validate}),P.push({version:"3.2",defaults:p.Defaults,convertToPrevious:g.convertToPrevious,convertFromPrevious:g.convertFromPrevious,validate:m.validate}),P.push({version:"3.3",defaults:v.Defaults,convertToPrevious:_.convertToPrevious,convertFromPrevious:_.convertFromPrevious,validate:b.validate}),P.push({version:"3.4",defaults:y.Defaults,convertToPrevious:E.convertToPrevious,convertFromPrevious:E.convertFromPrevious,validate:A.validate}),P.push({version:"4.0",defaults:w.Defaults,convertToPrevious:T.convertToPrevious,convertFromPrevious:T.convertFromPrevious,validate:S.validate}),P.push({version:"4.1",defaults:x.Defaults,convertToPrevious:R.convertToPrevious,convertFromPrevious:R.convertFromPrevious,validate:M.validate}),t.convert=(e,t)=>{const i=e.settings_version||"1.0";if(i===t)return e;const n=P.findIndex((e=>e.version===t)),r=P.findIndex((e=>e.version===i));if(-1===n)throw new Error("ViewerSettings.convert: Target version not available");if(-1===r)throw new Error("ViewerSettings.convert: Settings version not available");let a=e;if(n<r)for(let e=r;n<e;e--)a=P[e].convertToPrevious(a,i);else for(let e=r+1;e<=n;e++)a=P[e].convertFromPrevious(a,i);return a},t.validate=(e,t)=>{const i=e.settings_version||"1.0";if(void 0!==t){const n=P.findIndex((e=>e.version===t));if(-1===n)throw new Error("ViewerSettings.validate: Target version was not found.");if(void 0!==i&&i!==t)throw new Error("ViewerSettings.validate: The settings do have a different version than the target version.");P[n].validate(e)}else{if(!i)throw new Error("ViewerSettings.validate: Settings do not have a version specified.");const t=P.findIndex((e=>e.version===i));P[t].validate(e)}},t.evaluateSettingsVersion=e=>{if(!e||e.startsWith("1"))return"1.0";if(e.startsWith("2"))return e.split(".").map((e=>{var t;return null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0]})).filter(Boolean).map((e=>parseInt(e)))[1]>=18?"2.0":"1.0";if(e.startsWith("3")){const t=e.split(".").map((e=>{var t;return null===(t=e.match(/^\d+/))||void 0===t?void 0:t[0]})).filter(Boolean).map((e=>parseInt(e)));return 2===t[1]&&t[2]>=10&&t[3]>=1||t[1]>2?"4.1":2===t[1]&&t[2]>=10||t[1]>2?"4.0":2===t[1]&&t[2]>=9||t[1]>2?"3.4":2===t[1]&&t[2]>=7||t[1]>2?"3.3":2===t[1]&&t[2]>=6||t[1]>2?"3.2":1===t[1]&&t[2]>=12||t[1]>1?"3.1":"3.0"}return"1.0"},t.latestVersion="4.1"},7317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"1.0",ambientOcclusion:!0,autoRotateSpeed:0,backgroundColor:"#ffffff",bumpAmplitude:1,camera:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraAutoAdjust:!1,cameraMovementDuration:0,cameraOrtho:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraRevertAtMouseUp:!1,clearAlpha:1,clearColor:"#ffffff",commitParameters:!1,controlDamping:.1,controlNames:{},controlOrder:[],defaultMaterialColor:"#d3d3d3",disablePan:!1,disableZoom:!1,enableAutoRotation:!1,enableRotation:!0,environmentMap:"none",environmentMapResolution:"1024",fov:45,lightScene:"default",lightScenes:null,panSpeed:.5,parametersHidden:[],pointSize:1,revertAtMouseUpDuration:800,rotateSpeed:.25,showEnvironmentMap:!1,showGrid:!1,showGroundPlane:!1,showShadows:!0,topView:!1,zoomExtentFactor:1,zoomSpeed:1})},865:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({id:r.default.string().optional(),name:r.default.string().optional(),type:r.default.string().optional(),properties:r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),direction:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),position:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),target:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),castShadow:r.default.boolean().optional(),skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),intensity:r.default.number().unsafe().optional(),distance:r.default.number().unsafe().optional(),angle:r.default.number().unsafe().optional(),penumbra:r.default.number().unsafe().optional(),decay:r.default.number().unsafe().optional(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()})}).optional(),s=r.default.object().pattern(/^/,[a]),o=r.default.object().pattern(/^/,[r.default.object({id:r.default.string(),name:r.default.string().optional(),lights:s.schema()})]),l=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string().optional(),ambientOcclusion:r.default.boolean().optional(),autoRotateSpeed:r.default.number().unsafe().optional(),backgroundColor:r.default.string().optional(),bumpAmplitude:r.default.number().unsafe().optional(),camera:r.default.object({position:r.default.object({x:r.default.number().unsafe().optional(),y:r.default.number().unsafe().optional(),z:r.default.number().unsafe().optional()}).optional(),target:r.default.object({x:r.default.number().unsafe().optional(),y:r.default.number().unsafe().optional(),z:r.default.number().unsafe().optional()}).optional()}).optional(),cameraAutoAdjust:r.default.boolean().optional(),cameraMovementDuration:r.default.number().unsafe().optional(),cameraOrtho:r.default.object({position:r.default.object({x:r.default.number().unsafe().optional(),y:r.default.number().unsafe().optional(),z:r.default.number().unsafe().optional()}).optional(),target:r.default.object({x:r.default.number().unsafe().optional(),y:r.default.number().unsafe().optional(),z:r.default.number().unsafe().optional()}).optional()}).optional(),cameraRevertAtMouseUp:r.default.boolean().optional(),clearAlpha:r.default.number().unsafe().optional(),clearColor:r.default.string().optional(),commitParameters:r.default.boolean().optional(),controlDamping:r.default.number().unsafe().optional(),controlNames:r.default.object().pattern(/.*/,[r.default.string()]).optional(),controlOrder:r.default.array().items(r.default.string()).optional(),defaultMaterialColor:r.default.alternatives([r.default.string(),r.default.array().items(r.default.number().unsafe())]).optional(),disablePan:r.default.boolean().optional(),disableZoom:r.default.boolean().optional(),enableAutoRotation:r.default.boolean().optional(),enableRotation:r.default.boolean().optional(),environmentMap:r.default.alternatives([r.default.string(),r.default.array().items(r.default.string())]).optional(),environmentMapResolution:r.default.string().optional(),fov:r.default.number().unsafe().positive().optional(),lightScene:r.default.string().optional(),lightScenes:o.allow(null).optional(),panSpeed:r.default.number().unsafe().optional(),parametersHidden:r.default.array().items(r.default.string()).optional(),pointSize:r.default.number().unsafe().optional(),revertAtMouseUpDuration:r.default.number().unsafe().optional(),rotateSpeed:r.default.number().unsafe().optional(),showEnvironmentMap:r.default.boolean().optional(),showGrid:r.default.boolean().optional(),showGroundPlane:r.default.boolean().optional(),showShadows:r.default.boolean().optional(),topView:r.default.boolean().optional(),zoomExtentFactor:r.default.number().unsafe().optional(),zoomSpeed:r.default.number().unsafe().optional()}).options({allowUnknown:!0});t.validate=e=>{e=r.default.attempt(e,l).value}},4808:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(7317),r=i(1693);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return void 0!==n.clearAlpha&&(i.viewer.scene.render.clearAlpha=n.clearAlpha),void 0!==n.clearColor&&(i.viewer.scene.render.clearColor=n.clearColor),void 0===n.clearAlpha&&void 0===n.clearColor&&void 0!==n.backgroundColor&&(i.viewer.scene.render.clearColor=n.backgroundColor),void 0!==n.defaultMaterialColor&&(i.defaultMaterial.color=n.defaultMaterialColor),i.build_date=n.build_date,i.build_version=n.build_version,void 0!==n.camera&&void 0!==n.camera.position&&void 0!==n.camera.target&&void 0!==n.camera.position.x&&void 0!==n.camera.position.y&&void 0!==n.camera.position.z&&void 0!==n.camera.target.x&&void 0!==n.camera.target.y&&void 0!==n.camera.target.z&&(5===n.camera.position.x&&5===n.camera.position.y&&5===n.camera.position.z&&0===n.camera.target.x&&0===n.camera.target.y&&0===n.camera.target.z||0===n.camera.position.x&&0===n.camera.position.y&&0===n.camera.position.z&&0===n.camera.target.x&&0===n.camera.target.y&&0===n.camera.target.z||(i.viewer.scene.camera.cameraTypes.perspective.default.position=n.camera.position,i.viewer.scene.camera.cameraTypes.perspective.default.target=n.camera.target)),void 0!==n.cameraOrtho&&void 0!==n.cameraOrtho.position&&void 0!==n.cameraOrtho.target&&void 0!==n.cameraOrtho.position.x&&void 0!==n.cameraOrtho.position.y&&void 0!==n.cameraOrtho.position.z&&void 0!==n.cameraOrtho.target.x&&void 0!==n.cameraOrtho.target.y&&void 0!==n.cameraOrtho.target.z&&(5===n.cameraOrtho.position.x&&5===n.cameraOrtho.position.y&&5===n.cameraOrtho.position.z&&0===n.cameraOrtho.target.x&&0===n.cameraOrtho.target.y&&0===n.cameraOrtho.target.z||0===n.cameraOrtho.position.x&&0===n.cameraOrtho.position.y&&0===n.cameraOrtho.position.z&&0===n.cameraOrtho.target.x&&0===n.cameraOrtho.target.y&&0===n.cameraOrtho.target.z?!n.topView||5===n.cameraOrtho.position.x&&5===n.cameraOrtho.position.y&&5===n.cameraOrtho.position.z&&0===n.cameraOrtho.target.x&&0===n.cameraOrtho.target.y&&0===n.cameraOrtho.target.z||0===n.cameraOrtho.position.x&&0===n.cameraOrtho.position.y&&0===n.cameraOrtho.position.z&&0===n.cameraOrtho.target.x&&0===n.cameraOrtho.target.y&&0===n.cameraOrtho.target.z||void 0!==n.camera&&void 0!==n.camera.position&&void 0!==n.camera.target&&void 0!==n.camera.position.x&&void 0!==n.camera.position.y&&void 0!==n.camera.position.z&&void 0!==n.camera.target.x&&void 0!==n.camera.target.y&&void 0!==n.camera.target.z&&(i.viewer.scene.camera.cameraTypes.orthographic.default.position=n.camera.position,i.viewer.scene.camera.cameraTypes.orthographic.default.target=n.camera.target):(i.viewer.scene.camera.cameraTypes.orthographic.default.position=n.cameraOrtho.position,i.viewer.scene.camera.cameraTypes.orthographic.default.target=n.cameraOrtho.target)),void 0!==n.ambientOcclusion&&(i.viewer.scene.render.ambientOcclusion=n.ambientOcclusion),void 0!==n.autoRotateSpeed&&(i.viewer.scene.camera.controls.orbit.autoRotationSpeed=n.autoRotateSpeed),void 0!==n.bumpAmplitude&&(i.defaultMaterial.bumpAmplitude=n.bumpAmplitude),void 0!==n.cameraAutoAdjust&&(i.viewer.scene.camera.autoAdjust=n.cameraAutoAdjust),void 0!==n.cameraMovementDuration&&(i.viewer.scene.camera.cameraMovementDuration=n.cameraMovementDuration),void 0!==n.cameraRevertAtMouseUp&&(i.viewer.scene.camera.revertAtMouseUp=n.cameraRevertAtMouseUp),void 0!==n.commitParameters&&(i.viewer.commitParameters=n.commitParameters),void 0!==n.controlDamping&&(i.viewer.scene.camera.controls.orbit.damping=n.controlDamping),void 0!==n.controlDamping&&(i.viewer.scene.camera.controls.orthographic.damping=n.controlDamping),void 0!==n.controlNames&&(i.parameters.controlNames=n.controlNames),void 0!==n.controlOrder&&(i.parameters.controlOrder=n.controlOrder),void 0!==n.disablePan&&(i.viewer.scene.camera.controls.orbit.enablePan=!n.disablePan),void 0!==n.disablePan&&(i.viewer.scene.camera.controls.orthographic.enablePan=!n.disablePan),void 0!==n.disableZoom&&(i.viewer.scene.camera.controls.orbit.enableZoom=!n.disableZoom),void 0!==n.disableZoom&&(i.viewer.scene.camera.controls.orthographic.enableZoom=!n.disableZoom),void 0!==n.enableAutoRotation&&(i.viewer.scene.camera.controls.orbit.enableAutoRotation=n.enableAutoRotation),void 0!==n.enableRotation&&(i.viewer.scene.camera.controls.orbit.enableRotation=n.enableRotation),void 0!==n.environmentMap&&(i.viewer.scene.material.environmentMap=n.environmentMap),void 0!==n.environmentMapResolution&&(i.viewer.scene.material.environmentMapResolution=n.environmentMapResolution),void 0!==n.fov&&(i.viewer.scene.camera.cameraTypes.perspective.fov=n.fov),void 0!==n.lightScene&&(i.viewer.scene.lights.lightScene=n.lightScene),void 0!==n.lightScenes&&(i.viewer.scene.lights.lightScenes=n.lightScenes),void 0!==n.panSpeed&&(i.viewer.scene.camera.controls.orbit.panSpeed=n.panSpeed),void 0!==n.parametersHidden&&(i.parameters.parametersHidden=n.parametersHidden),void 0!==n.pointSize&&(i.viewer.scene.render.pointSize=n.pointSize),void 0!==n.revertAtMouseUpDuration&&(i.viewer.scene.camera.revertAtMouseUpDuration=n.revertAtMouseUpDuration),void 0!==n.rotateSpeed&&(i.viewer.scene.camera.controls.orbit.rotationSpeed=n.rotateSpeed),void 0!==n.showEnvironmentMap&&(i.viewer.scene.material.environmentMapAsBackground=n.showEnvironmentMap),void 0!==n.showGrid&&(i.viewer.scene.gridVisibility=n.showGrid),void 0!==n.showGroundPlane&&(i.viewer.scene.groundPlaneVisibility=n.showGroundPlane),void 0!==n.showShadows&&(i.viewer.scene.render.shadows=n.showShadows),n.topView&&(i.viewer.scene.camera.cameraTypes.active=1),void 0!==n.zoomExtentFactor&&(i.viewer.scene.camera.zoomExtentsFactor=n.zoomExtentFactor),void 0!==n.zoomSpeed&&(i.viewer.scene.camera.controls.orbit.zoomSpeed=n.zoomSpeed),void 0!==n.zoomSpeed&&(i.viewer.scene.camera.controls.orthographic.zoomSpeed=n.zoomSpeed),i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.build_date=r.build_date,i.build_version=r.build_version,i.ambientOcclusion=r.viewer.scene.render.ambientOcclusion,i.autoRotateSpeed=r.viewer.scene.camera.controls.orbit.autoRotationSpeed,i.bumpAmplitude=r.defaultMaterial.bumpAmplitude,i.camera={position:r.viewer.scene.camera.cameraTypes.perspective.default.position,target:r.viewer.scene.camera.cameraTypes.perspective.default.target},i.cameraAutoAdjust=r.viewer.scene.camera.autoAdjust,i.cameraMovementDuration=r.viewer.scene.camera.cameraMovementDuration,i.cameraOrtho={position:r.viewer.scene.camera.cameraTypes.orthographic.default.position,target:r.viewer.scene.camera.cameraTypes.orthographic.default.target},i.cameraRevertAtMouseUp=r.viewer.scene.camera.revertAtMouseUp,i.clearAlpha=r.viewer.scene.render.clearAlpha,i.clearColor=r.viewer.scene.render.clearColor,i.commitParameters=r.viewer.commitParameters,i.controlDamping=r.viewer.scene.camera.controls.orbit.damping,r.parameters&&r.parameters.controlNames&&(i.controlNames=r.parameters.controlNames),r.parameters&&r.parameters.controlOrder&&(i.controlOrder=r.parameters.controlOrder),i.defaultMaterialColor=r.defaultMaterial.color,i.disablePan=!r.viewer.scene.camera.controls.orbit.enablePan,i.disableZoom=!r.viewer.scene.camera.controls.orbit.enableZoom,i.enableAutoRotation=r.viewer.scene.camera.controls.orbit.enableAutoRotation,i.enableRotation=r.viewer.scene.camera.controls.orbit.enableRotation,i.environmentMap=r.viewer.scene.material.environmentMap,i.environmentMapResolution=r.viewer.scene.material.environmentMapResolution,i.fov=r.viewer.scene.camera.cameraTypes.perspective.fov,i.lightScene=r.viewer.scene.lights.lightScene,i.lightScenes=r.viewer.scene.lights.lightScenes,i.panSpeed=r.viewer.scene.camera.controls.orbit.panSpeed,r.parameters&&r.parameters.parametersHidden&&(i.parametersHidden=r.parameters.parametersHidden),i.pointSize=r.viewer.scene.render.pointSize,i.revertAtMouseUpDuration=r.viewer.scene.camera.revertAtMouseUpDuration,i.rotateSpeed=r.viewer.scene.camera.controls.orbit.rotationSpeed,i.showEnvironmentMap=r.viewer.scene.material.environmentMapAsBackground,i.showGrid=r.viewer.scene.gridVisibility,i.showGroundPlane=r.viewer.scene.groundPlaneVisibility,i.showShadows=r.viewer.scene.render.shadows,i.topView=1===r.viewer.scene.camera.cameraTypes.active,i.zoomExtentFactor=r.viewer.scene.camera.zoomExtentsFactor,i.zoomSpeed=r.viewer.scene.camera.controls.orbit.zoomSpeed,i.backgroundColor=r.viewer.scene.render.clearColor,i}},1693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"2.0",ar:{enableCameraSync:!1,enableCameraSyncInitial:!1,enableLightingEstimation:!0,enableTouchControls:!0,enableTouchControlRotation:!0,enableAutomaticPlacement:!0,defaultHitTestType:"existingPlaneUsingGeometry"},defaultMaterial:{bumpAmplitude:1,color:"#d3d3d3",metalness:0,roughness:1},parameters:{controlOrder:[],controlNames:{},parametersHidden:[]},viewer:{blurSceneWhenBusy:!0,ignoreSuperseded:!0,loggingLevel:-1,messageLoggingLevel:-1,showMessages:!0,hasRestoredSettings:!1,useModelSettings:!1,commitParameters:!1,commitSettings:!1,viewerRuntimeId:"",scene:{show:!1,showSceneTransition:"1s",camera:{autoAdjust:!1,cameraMovementDuration:800,cameraTypes:{perspective:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},fov:45,controls:0},orthographic:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}}},active:0},controls:{orbit:{autoRotationSpeed:0,damping:.1,enableAutoRotation:!1,enableKeyPan:!1,enablePan:!0,enableRotation:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,restrictions:{position:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},target:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},rotation:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},zoom:{minDistance:0,maxDistance:1/0}},rotationSpeed:.5,panSpeed:.5,zoomSpeed:.5},fps:{},orthographic:{damping:.1,enableKeyPan:!1,enablePan:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,panSpeed:.5,zoomSpeed:.5}},enableCameraControls:!0,revertAtMouseUp:!1,revertAtMouseUpDuration:800,zoomExtentsFactor:1},duration:0,fullscreen:!1,gridVisibility:!0,groundPlaneReflectionThreshold:.01,groundPlaneReflectionVisibility:!1,groundPlaneVisibility:!0,lights:{helper:!1,lightScene:"default",lightScenes:{}},material:{environmentMap:"none",environmentMapAsBackground:!1,environmentMapResolution:"1024"},render:{ambientOcclusion:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,clearColor:"#ffffff",clearAlpha:1,pointSize:1,shadows:!0,sao:{samples:8,intensity:.1,kernelRadius:8,standardDev:25}}}}})},6024:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({id:r.default.string(),name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:{color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),direction:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),position:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),target:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}).optional(),castShadow:r.default.boolean().optional(),skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]).optional(),intensity:r.default.number().unsafe().optional(),distance:r.default.number().unsafe().optional(),angle:r.default.number().unsafe().optional(),penumbra:r.default.number().unsafe().optional(),decay:r.default.number().unsafe().optional(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}}),s=r.default.object().pattern(/^/,[r.default.object({id:r.default.string(),name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[a])})]),o=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enableCameraSync:r.default.boolean().optional(),enableCameraSyncInitial:r.default.boolean().optional(),enableLightingEstimation:r.default.boolean().optional(),enableTouchControls:r.default.boolean().optional(),enableTouchControlRotation:r.default.boolean().optional(),enableAutomaticPlacement:r.default.boolean().optional(),defaultHitTestType:r.default.string().optional()}).optional(),defaultMaterial:{bumpAmplitude:r.default.number().unsafe().optional(),color:r.default.alternatives([r.default.string(),r.default.array().items(r.default.number().unsafe())]).optional(),metalness:r.default.number().unsafe().optional(),roughness:r.default.number().unsafe().optional()},parameters:r.default.object({controlOrder:r.default.array().items(r.default.string()).optional(),controlNames:r.default.object().pattern(/.*/,[r.default.string()]).optional(),parametersHidden:r.default.array().items(r.default.string()).optional()}).optional(),viewer:{blurSceneWhenBusy:r.default.boolean(),ignoreSuperseded:r.default.boolean().optional(),loggingLevel:r.default.number().unsafe().optional(),messageLoggingLevel:r.default.number().unsafe().optional(),viewerRuntimeId:r.default.string().allow("").optional(),hasRestoredSettings:r.default.boolean().optional(),useModelSettings:r.default.boolean().optional(),showMessages:r.default.boolean().optional(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),scene:{show:r.default.boolean().optional(),showSceneTransition:r.default.string().optional(),duration:r.default.number().unsafe().optional(),fullscreen:r.default.boolean().optional(),gridVisibility:r.default.boolean(),groundPlaneReflectionThreshold:r.default.number().unsafe().optional(),groundPlaneReflectionVisibility:r.default.boolean().optional(),groundPlaneVisibility:r.default.boolean(),camera:{autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),cameraTypes:{perspective:{default:{position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},fov:r.default.number().unsafe(),controls:r.default.number().unsafe().optional()},orthographic:{default:{position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}}},active:r.default.number().unsafe()},controls:{orbit:{autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:{position:r.default.object({cube:r.default.object({min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}}).optional(),sphere:r.default.object({center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}).optional()}).optional(),target:r.default.object({cube:r.default.object({min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}}).optional(),sphere:r.default.object({center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}).optional()}).optional(),rotation:r.default.object({minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)}).optional(),zoom:r.default.object({minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}).optional()},rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()},fps:{},orthographic:{damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}},enableCameraControls:r.default.boolean(),revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),zoomExtentsFactor:r.default.number().unsafe().positive()},lights:{helper:r.default.boolean().optional(),lightScene:r.default.string().allow(""),lightScenes:s.allow(null)},material:{environmentMap:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),environmentMapAsBackground:r.default.boolean(),environmentMapResolution:r.default.string().valid("256","512","1024","2048")},render:{ambientOcclusion:r.default.boolean(),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe().optional(),clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),pointSize:r.default.number().unsafe(),shadows:r.default.boolean(),sao:{samples:r.default.number().unsafe().positive().optional(),kernelRadius:r.default.number().unsafe().positive().optional(),intensity:r.default.number().unsafe().positive().optional(),standardDev:r.default.number().unsafe().optional()}}}}}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,o).value}},4307:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(1693),r=i(8719),a=i(1614);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;if(i.build_date=n.build_date,i.build_version=n.build_version,n.parameters&&n.parameters.controlNames)for(let e in n.parameters.controlNames)i.session[e]={order:0,displayname:n.parameters.controlNames[e],hidden:!1};if(n.parameters&&n.parameters.controlOrder)for(let e=0;e<n.parameters.controlOrder.length;e++){const t=n.parameters.controlOrder[e];i.session[t]?i.session[t].order=e:i.session[t]={order:e,displayname:"",hidden:!1}}if(n.parameters&&n.parameters.parametersHidden)for(let e=0;e<n.parameters.parametersHidden.length;e++){const t=n.parameters.parametersHidden[e];i.session[t]?i.session[t].hidden=!0:i.session[t]={order:0,displayname:"",hidden:!0}}i.general.blurWhenBusy=n.viewer.blurSceneWhenBusy,i.general.commitParameters=n.viewer.commitParameters,i.general.commitSettings=n.viewer.commitSettings,n.viewer.showMessages&&(i.general.showMessages=n.viewer.showMessages),i.environmentGeometry.gridVisibility=n.viewer.scene.gridVisibility,i.environmentGeometry.groundPlaneVisibility=n.viewer.scene.groundPlaneVisibility;const s=a.v4();if(i.camera.cameraId=s,0===n.viewer.scene.camera.cameraTypes.active){const e=n.viewer.scene.camera.controls.orbit.restrictions,t=e.position&&e.position.cube?{min:{x:e.position.cube.min.x,y:e.position.cube.min.y,z:e.position.cube.min.z},max:{x:e.position.cube.max.x,y:e.position.cube.max.y,z:e.position.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},r=e.target&&e.target.cube?{min:{x:e.target.cube.min.x,y:e.target.cube.min.y,z:e.target.cube.min.z},max:{x:e.target.cube.max.x,y:e.target.cube.max.y,z:e.target.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},a={position:{cube:t,sphere:e.position&&e.position.sphere?{center:{x:e.position.sphere.center.x,y:e.position.sphere.center.y,z:e.position.sphere.center.z},radius:e.position.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0}},target:{cube:r,sphere:e.target&&e.target.sphere?{center:{x:e.target.sphere.center.x,y:e.target.sphere.center.y,z:e.target.sphere.center.z},radius:e.target.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0}},rotation:e.rotation?{minPolarAngle:e.rotation.minPolarAngle,maxPolarAngle:e.rotation.maxPolarAngle,minAzimuthAngle:e.rotation.minAzimuthAngle,maxAzimuthAngle:e.rotation.maxAzimuthAngle}:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},zoom:e.zoom?{minDistance:e.zoom.minDistance,maxDistance:e.zoom.maxDistance}:{minDistance:0,maxDistance:1/0}};i.camera.cameras={[s]:{type:"perspective",autoAdjust:n.viewer.scene.camera.autoAdjust,cameraMovementDuration:n.viewer.scene.camera.cameraMovementDuration,controls:{autoRotationSpeed:n.viewer.scene.camera.controls.orbit.autoRotationSpeed,damping:n.viewer.scene.camera.controls.orbit.damping,enableAutoRotation:n.viewer.scene.camera.controls.orbit.enableAutoRotation,enableKeyPan:n.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:n.viewer.scene.camera.controls.orbit.enablePan,enableRotation:n.viewer.scene.camera.controls.orbit.enableRotation,enableZoom:n.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:n.viewer.scene.camera.controls.orbit.input.keys.up,down:n.viewer.scene.camera.controls.orbit.input.keys.down,left:n.viewer.scene.camera.controls.orbit.input.keys.left,right:n.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:n.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:n.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:n.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:n.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:n.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:n.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:n.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:n.viewer.scene.camera.controls.orbit.movementSmoothness,restrictions:a,rotationSpeed:n.viewer.scene.camera.controls.orbit.rotationSpeed,panSpeed:n.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:n.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:n.viewer.scene.camera.enableCameraControls,fov:n.viewer.scene.camera.cameraTypes.perspective.fov,position:{x:n.viewer.scene.camera.cameraTypes.perspective.default.position.x,y:n.viewer.scene.camera.cameraTypes.perspective.default.position.y,z:n.viewer.scene.camera.cameraTypes.perspective.default.position.z},revertAtMouseUp:n.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:n.viewer.scene.camera.revertAtMouseUpDuration,target:{x:n.viewer.scene.camera.cameraTypes.perspective.default.target.x,y:n.viewer.scene.camera.cameraTypes.perspective.default.target.y,z:n.viewer.scene.camera.cameraTypes.perspective.default.target.z},zoomExtentsFactor:n.viewer.scene.camera.zoomExtentsFactor}}}else{let e="top";switch(n.viewer.scene.camera.cameraTypes.active){case 2:e="bottom";break;case 3:e="right";break;case 4:e="left";break;case 5:e="back";break;case 6:e="front";break;default:e="top"}i.camera.cameras={[s]:{type:e,autoAdjust:n.viewer.scene.camera.autoAdjust,cameraMovementDuration:n.viewer.scene.camera.cameraMovementDuration,controls:{damping:n.viewer.scene.camera.controls.orbit.damping,enableKeyPan:n.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:n.viewer.scene.camera.controls.orbit.enablePan,enableZoom:n.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:n.viewer.scene.camera.controls.orbit.input.keys.up,down:n.viewer.scene.camera.controls.orbit.input.keys.down,left:n.viewer.scene.camera.controls.orbit.input.keys.left,right:n.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:n.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:n.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:n.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:n.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:n.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:n.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:n.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:n.viewer.scene.camera.controls.orbit.movementSmoothness,panSpeed:n.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:n.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:n.viewer.scene.camera.enableCameraControls,position:{x:n.viewer.scene.camera.cameraTypes.orthographic.default.position.x,y:n.viewer.scene.camera.cameraTypes.orthographic.default.position.y,z:n.viewer.scene.camera.cameraTypes.orthographic.default.position.z},revertAtMouseUp:n.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:n.viewer.scene.camera.revertAtMouseUpDuration,target:{x:n.viewer.scene.camera.cameraTypes.orthographic.default.target.x,y:n.viewer.scene.camera.cameraTypes.orthographic.default.target.y,z:n.viewer.scene.camera.cameraTypes.orthographic.default.target.z},zoomExtentsFactor:n.viewer.scene.camera.zoomExtentsFactor}}}if(i.environment.map=n.viewer.scene.material.environmentMap,i.environment.mapAsBackground=n.viewer.scene.material.environmentMapAsBackground,i.environment.mapResolution=n.viewer.scene.material.environmentMapResolution,n.viewer.scene.lights,i.light.lightSceneId=n.viewer.scene.lights.lightScene,n.viewer.scene.lights.lightScenes)for(let e in n.viewer.scene.lights.lightScenes){const t=n.viewer.scene.lights.lightScenes[e],r={};for(let i in t.lights){const t=n.viewer.scene.lights.lightScenes[e].lights[i];switch(t.type){case"ambient":r[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity}};break;case"directional":r[i]={name:t.name,type:t.type,properties:{direction:{x:t.properties.direction.x,y:t.properties.direction.y,z:t.properties.direction.z},color:t.properties.color,intensity:t.properties.intensity,castShadow:t.properties.castShadow,shadowMapResolution:t.properties.shadowMapResolution,shadowMapBias:t.properties.shadowMapBias}};break;case"hemisphere":r[i]={name:t.name,type:t.type,properties:{skyColor:t.properties.skyColor,intensity:t.properties.intensity,groundColor:t.properties.groundColor}};break;case"point":r[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity,position:{x:t.properties.position.x,y:t.properties.position.y,z:t.properties.position.z},distance:t.properties.distance,decay:t.properties.decay}};break;case"spot":r[i]={name:t.name,type:t.type,properties:{color:t.properties.color,intensity:t.properties.intensity,position:{x:t.properties.position.x,y:t.properties.position.y,z:t.properties.position.z},target:{x:t.properties.target.x,y:t.properties.target.y,z:t.properties.target.z},distance:t.properties.distance,decay:t.properties.decay,angle:t.properties.angle,penumbra:t.properties.penumbra}}}t.order&&(r[i].order=t.order)}i.light.lightScenes[e]={name:t.name,lights:r}}return i.rendering.ambientOcclusion=n.viewer.scene.render.ambientOcclusion,void 0!==n.viewer.scene.render.beautyRenderBlendingDuration&&(i.rendering.beautyRenderBlendingDuration=n.viewer.scene.render.beautyRenderBlendingDuration),i.rendering.beautyRenderDelay=n.viewer.scene.render.beautyRenderDelay,i.environment.clearAlpha=n.viewer.scene.render.clearAlpha,i.environment.clearColor=n.viewer.scene.render.clearColor,i.general.pointSize=n.viewer.scene.render.pointSize,i.rendering.shadows=n.viewer.scene.render.shadows,i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;if(i.build_date=r.build_date,i.build_version=r.build_version,r.camera.cameras[r.camera.cameraId]){const e=r.camera.cameras[r.camera.cameraId];switch(e.type){case"top":i.viewer.scene.camera.cameraTypes.active=1;break;case"bottom":i.viewer.scene.camera.cameraTypes.active=2;break;case"right":i.viewer.scene.camera.cameraTypes.active=3;break;case"left":i.viewer.scene.camera.cameraTypes.active=4;break;case"back":i.viewer.scene.camera.cameraTypes.active=5;break;case"front":i.viewer.scene.camera.cameraTypes.active=6;break;default:i.viewer.scene.camera.cameraTypes.active=0}if(i.viewer.scene.camera.autoAdjust=e.autoAdjust,i.viewer.scene.camera.cameraMovementDuration=e.cameraMovementDuration,i.viewer.scene.camera.enableCameraControls=e.enableCameraControls,i.viewer.scene.camera.revertAtMouseUp=e.revertAtMouseUp,i.viewer.scene.camera.revertAtMouseUpDuration=e.revertAtMouseUpDuration,i.viewer.scene.camera.zoomExtentsFactor=e.zoomExtentsFactor,"perspective"===e.type){const t=e;i.viewer.scene.camera.cameraTypes.perspective.default.position={x:e.position.x,y:e.position.y,z:e.position.z},i.viewer.scene.camera.cameraTypes.perspective.default.target={x:e.target.x,y:e.target.y,z:e.target.z},i.viewer.scene.camera.cameraTypes.perspective.fov=t.fov,i.viewer.scene.camera.controls.orbit={autoRotationSpeed:t.controls.autoRotationSpeed,damping:t.controls.damping,enableAutoRotation:t.controls.enableAutoRotation,enableKeyPan:t.controls.enableKeyPan,enablePan:t.controls.enablePan,enableRotation:t.controls.enableRotation,enableZoom:t.controls.enableZoom,input:{keys:{up:t.controls.input.keys.up,down:t.controls.input.keys.down,left:t.controls.input.keys.left,right:t.controls.input.keys.right},mouse:{rotate:t.controls.input.mouse.rotate,zoom:t.controls.input.mouse.zoom,pan:t.controls.input.mouse.pan},touch:{rotate:t.controls.input.touch.rotate,zoom:t.controls.input.touch.zoom,pan:t.controls.input.touch.pan}},keyPanSpeed:t.controls.keyPanSpeed,movementSmoothness:t.controls.movementSmoothness,restrictions:{position:{cube:{min:{x:t.controls.restrictions.position.cube.min.x,y:t.controls.restrictions.position.cube.min.y,z:t.controls.restrictions.position.cube.min.z},max:{x:t.controls.restrictions.position.cube.max.x,y:t.controls.restrictions.position.cube.max.y,z:t.controls.restrictions.position.cube.max.z}},sphere:{center:{x:t.controls.restrictions.position.sphere.center.x,y:t.controls.restrictions.position.sphere.center.y,z:t.controls.restrictions.position.sphere.center.z},radius:t.controls.restrictions.position.sphere.radius}},target:{cube:{min:{x:t.controls.restrictions.target.cube.min.x,y:t.controls.restrictions.target.cube.min.y,z:t.controls.restrictions.target.cube.min.z},max:{x:t.controls.restrictions.target.cube.max.x,y:t.controls.restrictions.target.cube.max.y,z:t.controls.restrictions.target.cube.max.z}},sphere:{center:{x:t.controls.restrictions.target.sphere.center.x,y:t.controls.restrictions.target.sphere.center.y,z:t.controls.restrictions.target.sphere.center.z},radius:t.controls.restrictions.target.sphere.radius}},rotation:{minPolarAngle:t.controls.restrictions.rotation.minPolarAngle,maxPolarAngle:t.controls.restrictions.rotation.maxPolarAngle,minAzimuthAngle:t.controls.restrictions.rotation.minAzimuthAngle,maxAzimuthAngle:t.controls.restrictions.rotation.maxAzimuthAngle},zoom:{minDistance:t.controls.restrictions.zoom.minDistance,maxDistance:t.controls.restrictions.zoom.maxDistance}},rotationSpeed:t.controls.rotationSpeed,panSpeed:t.controls.panSpeed,zoomSpeed:t.controls.zoomSpeed}}else{const t=e;i.viewer.scene.camera.cameraTypes.orthographic.default.position={x:e.position.x,y:e.position.y,z:e.position.z},i.viewer.scene.camera.cameraTypes.orthographic.default.target={x:e.target.x,y:e.target.y,z:e.target.z},i.viewer.scene.camera.controls.orthographic={damping:t.controls.damping,enableKeyPan:t.controls.enableKeyPan,enablePan:t.controls.enablePan,enableZoom:t.controls.enableZoom,input:{keys:{up:t.controls.input.keys.up,down:t.controls.input.keys.down,left:t.controls.input.keys.left,right:t.controls.input.keys.right},mouse:{rotate:t.controls.input.mouse.rotate,zoom:t.controls.input.mouse.zoom,pan:t.controls.input.mouse.pan},touch:{rotate:t.controls.input.touch.rotate,zoom:t.controls.input.touch.zoom,pan:t.controls.input.touch.pan}},keyPanSpeed:t.controls.keyPanSpeed,movementSmoothness:t.controls.movementSmoothness,panSpeed:t.controls.panSpeed,zoomSpeed:t.controls.zoomSpeed}}}i.viewer.scene.render.clearAlpha=r.environment.clearAlpha,i.viewer.scene.render.clearColor=r.environment.clearColor,i.viewer.scene.material.environmentMap=r.environment.map,i.viewer.scene.material.environmentMapAsBackground=r.environment.mapAsBackground,i.viewer.scene.material.environmentMapResolution=r.environment.mapResolution,i.viewer.scene.gridVisibility=r.environmentGeometry.gridVisibility,i.viewer.scene.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,i.viewer.blurSceneWhenBusy=r.general.blurWhenBusy,i.viewer.commitParameters=r.general.commitParameters,i.viewer.commitSettings=r.general.commitSettings,i.viewer.scene.render.pointSize=r.general.pointSize,i.viewer.showMessages=r.general.showMessages,i.viewer.scene.lights.lightScene=r.light.lightSceneId||"default";for(let e in r.light.lightScenes){const t=r.light.lightScenes[e],n={};for(let e in t.lights){const i=t.lights[e];switch(i.type){case"ambient":n[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity}};break;case"directional":n[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{direction:{x:i.properties.direction.x,y:i.properties.direction.y,z:i.properties.direction.z},color:i.properties.color,intensity:i.properties.intensity,castShadow:i.properties.castShadow,shadowMapResolution:i.properties.shadowMapResolution,shadowMapBias:i.properties.shadowMapBias}};break;case"hemisphere":n[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{skyColor:i.properties.skyColor,intensity:i.properties.intensity,groundColor:i.properties.groundColor}};break;case"point":n[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity,position:{x:i.properties.position.x,y:i.properties.position.y,z:i.properties.position.z},distance:i.properties.distance,decay:i.properties.decay}};break;case"spot":n[e]={id:e,name:i.name,type:i.type,order:i.order,properties:{color:i.properties.color,intensity:i.properties.intensity,position:{x:i.properties.position.x,y:i.properties.position.y,z:i.properties.position.z},target:{x:i.properties.target.x,y:i.properties.target.y,z:i.properties.target.z},distance:i.properties.distance,decay:i.properties.decay,angle:i.properties.angle,penumbra:i.properties.penumbra}}}}i.viewer.scene.lights.lightScenes[e]={id:e,name:t.name,lights:n}}i.viewer.scene.render.ambientOcclusion=r.rendering.ambientOcclusion,i.viewer.scene.render.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.viewer.scene.render.beautyRenderDelay=r.rendering.beautyRenderDelay,i.viewer.scene.render.shadows=r.rendering.shadows;let a=[];for(let e in r.session)r.session[e].displayname&&(i.parameters.controlNames[e]=r.session[e].displayname),r.session[e].hidden&&i.parameters.parametersHidden.push(e),a.push({id:e,order:r.session[e].order||0});a.sort(((e,t)=>(e.order||1/0)-(t.order||1/0)));let s=a.filter((e=>0===e.order));return a=a.filter((e=>!s.includes(e))),a=s.concat(a),i.parameters.controlOrder=a.map((e=>e.id)),i}},8719:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.0",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"none",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridVisibility:!0,groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!0,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,shadows:!0},session:{}})},3181:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string()},environmentGeometry:{gridVisibility:r.default.boolean(),groundPlaneVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:r.default.boolean(),ambientOcclusionIntensity:r.default.number().unsafe().min(0),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),shadows:r.default.boolean()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,g).value}},2315:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(8719),r=i(3160);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.environment=n.environment,i.general=n.general,i.light=n.light,i.environmentGeometry.gridVisibility=n.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.shadows=n.rendering.shadows,i.session=n.session,"3.0"===t?(i.environmentGeometry.gridColor="#ffffff",i.environmentGeometry.groundPlaneColor="#d3d3d3",i.rendering.outputEncoding="linear",i.rendering.physicallyCorrectLights=!1,i.rendering.textureEncoding="linear",i.rendering.toneMapping="none",i.rendering.toneMappingExposure=1):(i.environmentGeometry.gridColor="#ffffff",i.environmentGeometry.groundPlaneColor="#d3d3d3",i.rendering.outputEncoding="srgb",i.rendering.physicallyCorrectLights=!1,i.rendering.textureEncoding="srgb",i.rendering.toneMapping="none",i.rendering.toneMappingExposure=1),i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.environment=r.environment,i.environmentGeometry.gridVisibility=r.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,i.general=r.general,i.light=r.light,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.shadows=r.rendering.shadows,i.session=r.session,i}},3160:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},4612:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string()},environmentGeometry:{gridColor:r.default.string(),gridVisibility:r.default.boolean(),groundPlaneColor:r.default.string(),groundPlaneVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:r.default.boolean(),ambientOcclusionIntensity:r.default.number().unsafe().min(0),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),outputEncoding:r.default.string(),physicallyCorrectLights:r.default.boolean(),shadows:r.default.boolean(),textureEncoding:r.default.string(),toneMapping:r.default.string(),toneMappingExposure:r.default.number().unsafe()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,g).value}},1079:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(3160),r=i(8897);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment.clearAlpha=n.environment.clearAlpha,i.environment.clearColor=n.environment.clearColor,i.environment.map=n.environment.map,i.environment.mapAsBackground=n.environment.mapAsBackground,i.environment.mapResolution=n.environment.mapResolution,i.environmentGeometry.gridColor=n.environmentGeometry.gridColor,i.environmentGeometry.gridVisibility=n.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneColor=n.environmentGeometry.groundPlaneColor,i.environmentGeometry.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.outputEncoding=n.rendering.outputEncoding,i.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,i.rendering.shadows=n.rendering.shadows,i.rendering.textureEncoding=n.rendering.textureEncoding,i.rendering.toneMapping=n.rendering.toneMapping,i.rendering.toneMappingExposure=n.rendering.toneMappingExposure,i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.session=r.session,i.environment.clearAlpha=r.environment.clearAlpha,i.environment.clearColor=r.environment.clearColor,i.environment.map=r.environment.map,i.environment.mapAsBackground=r.environment.mapAsBackground,i.environment.mapResolution=r.environment.mapResolution,i.environmentGeometry.gridColor=r.environmentGeometry.gridColor,i.environmentGeometry.gridVisibility=r.environmentGeometry.gridVisibility,i.environmentGeometry.groundPlaneColor=r.environmentGeometry.groundPlaneColor,i.environmentGeometry.groundPlaneVisibility=r.environmentGeometry.groundPlaneVisibility,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.outputEncoding=r.rendering.outputEncoding,i.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,i.rendering.shadows=r.rendering.shadows,i.rendering.textureEncoding=r.rendering.textureEncoding,i.rendering.toneMapping=r.rendering.toneMapping,i.rendering.toneMappingExposure=r.rendering.toneMappingExposure,i}},8897:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.2",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},9927:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string()},environmentGeometry:{gridColor:r.default.string(),gridVisibility:r.default.boolean(),groundPlaneColor:r.default.string(),groundPlaneVisibility:r.default.boolean(),groundPlaneShadowColor:r.default.string(),groundPlaneShadowVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:r.default.boolean(),ambientOcclusionIntensity:r.default.number().unsafe().min(0),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),lights:r.default.boolean(),outputEncoding:r.default.string(),physicallyCorrectLights:r.default.boolean(),shadows:r.default.boolean(),textureEncoding:r.default.string(),toneMapping:r.default.string(),toneMappingExposure:r.default.number().unsafe()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,g).value}},767:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(8897),r=i(4522);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment=n.environment,i.environmentGeometry=n.environmentGeometry,i.rendering.ambientOcclusion=n.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=n.rendering.ambientOcclusionIntensity,i.rendering.automaticColorAdjustment=!1,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.outputEncoding=n.rendering.outputEncoding,i.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,i.rendering.shadows=n.rendering.shadows,i.rendering.textureEncoding=n.rendering.textureEncoding,i.rendering.toneMapping=n.rendering.toneMapping,i.rendering.toneMappingExposure=n.rendering.toneMappingExposure,i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.session=r.session,i.environment=r.environment,i.environmentGeometry=r.environmentGeometry,i.rendering.ambientOcclusion=r.rendering.ambientOcclusion,i.rendering.ambientOcclusionIntensity=r.rendering.ambientOcclusionIntensity,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.outputEncoding=r.rendering.outputEncoding,i.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,i.rendering.shadows=r.rendering.shadows,i.rendering.textureEncoding=r.rendering.textureEncoding,i.rendering.toneMapping=r.rendering.toneMapping,i.rendering.toneMappingExposure=r.rendering.toneMappingExposure,i}},4522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.3",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},2025:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string()},environmentGeometry:{gridColor:r.default.string(),gridVisibility:r.default.boolean(),groundPlaneColor:r.default.string(),groundPlaneVisibility:r.default.boolean(),groundPlaneShadowColor:r.default.string(),groundPlaneShadowVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:r.default.boolean(),ambientOcclusionIntensity:r.default.number().unsafe().min(0),automaticColorAdjustment:r.default.boolean(),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),lights:r.default.boolean(),outputEncoding:r.default.string(),physicallyCorrectLights:r.default.boolean(),shadows:r.default.boolean(),textureEncoding:r.default.string(),toneMapping:r.default.string(),toneMappingExposure:r.default.number().unsafe()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,g).value}},3506:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(4522),r=i(9579);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.light=n.light,i.session=n.session,i.environmentGeometry=n.environmentGeometry,i.rendering=n.rendering,i.general.transformation=n.general.transformation,i.general.blurWhenBusy=n.general.blurWhenBusy,i.general.commitSettings=n.general.commitSettings,i.general.commitParameters=n.general.commitParameters,i.general.pointSize=n.general.pointSize,i.general.showMessages=n.general.showMessages,i.general.defaultMaterialColor="#199b9bff",i.environment.clearAlpha=n.environment.clearAlpha,i.environment.clearColor=n.environment.clearColor,i.environment.map=n.environment.map,i.environment.mapAsBackground=n.environment.mapAsBackground,i.environment.mapResolution=n.environment.mapResolution,i.environment.rotation={x:0,y:0,z:0,w:1},i.environment.blurriness=0,i.environment.intensity=1,i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.light=r.light,i.session=r.session,i.environmentGeometry=r.environmentGeometry,i.rendering=r.rendering,i.general.transformation=r.general.transformation,i.general.blurWhenBusy=r.general.blurWhenBusy,i.general.commitSettings=r.general.commitSettings,i.general.commitParameters=r.general.commitParameters,i.general.pointSize=r.general.pointSize,i.general.showMessages=r.general.showMessages,i.environment.clearAlpha=r.environment.clearAlpha,i.environment.clearColor=r.environment.clearColor,i.environment.map=r.environment.map,i.environment.mapAsBackground=r.environment.mapAsBackground,i.environment.mapResolution=r.environment.mapResolution,i}},9579:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"3.4",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},6835:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string(),rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe(),w:r.default.number().unsafe()},blurriness:r.default.number().unsafe(),intensity:r.default.number().unsafe()},environmentGeometry:{gridColor:r.default.string(),gridVisibility:r.default.boolean(),groundPlaneColor:r.default.string(),groundPlaneVisibility:r.default.boolean(),groundPlaneShadowColor:r.default.string(),groundPlaneShadowVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean(),defaultMaterialColor:r.default.string()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},rendering:{ambientOcclusion:r.default.boolean(),ambientOcclusionIntensity:r.default.number().unsafe().min(0),automaticColorAdjustment:r.default.boolean(),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),lights:r.default.boolean(),outputEncoding:r.default.string(),physicallyCorrectLights:r.default.boolean(),shadows:r.default.boolean(),textureEncoding:r.default.string(),toneMapping:r.default.string(),toneMappingExposure:r.default.number().unsafe()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,g).value}},31:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(9579),r=i(8892);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment=n.environment,i.environmentGeometry=n.environmentGeometry,i.rendering.automaticColorAdjustment=n.rendering.automaticColorAdjustment,i.rendering.beautyRenderDelay=n.rendering.beautyRenderDelay,i.rendering.beautyRenderBlendingDuration=n.rendering.beautyRenderBlendingDuration,i.rendering.lights=n.rendering.lights,i.rendering.outputEncoding=n.rendering.outputEncoding,i.rendering.physicallyCorrectLights=n.rendering.physicallyCorrectLights,i.rendering.shadows=n.rendering.shadows,i.rendering.textureEncoding=n.rendering.textureEncoding,i.rendering.toneMapping=n.rendering.toneMapping,i.rendering.toneMappingExposure=n.rendering.toneMappingExposure,i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.session=r.session,i.environment=r.environment,i.environmentGeometry=r.environmentGeometry,i.rendering.ambientOcclusion=!1,i.rendering.ambientOcclusionIntensity=.1,i.rendering.automaticColorAdjustment=r.rendering.automaticColorAdjustment,i.rendering.beautyRenderDelay=r.rendering.beautyRenderDelay,i.rendering.beautyRenderBlendingDuration=r.rendering.beautyRenderBlendingDuration,i.rendering.lights=r.rendering.lights,i.rendering.outputEncoding=r.rendering.outputEncoding,i.rendering.physicallyCorrectLights=r.rendering.physicallyCorrectLights,i.rendering.shadows=r.rendering.shadows,i.rendering.textureEncoding=r.rendering.textureEncoding,i.rendering.toneMapping=r.rendering.toneMapping,i.rendering.toneMappingExposure=r.rendering.toneMappingExposure,i}},8892:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"4.0",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},postprocessing:{antiAliasingTechnique:"smaa",antiAliasingTechniqueMobile:"fxaa",enablePostProcessingOnMobile:!0,ssaaSampleLevel:2,effects:[]},rendering:{automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,softShadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},940:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const r=n(i(2705)),a=r.default.object({autoRotationSpeed:r.default.number().unsafe(),damping:r.default.number().unsafe(),enableAutoRotation:r.default.boolean(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableRotation:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),restrictions:r.default.object({position:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},target:{cube:{min:{x:r.default.number().unsafe().allow(-1/0).allow(null),y:r.default.number().unsafe().allow(-1/0).allow(null),z:r.default.number().unsafe().allow(-1/0).allow(null)},max:{x:r.default.number().unsafe().allow(1/0).allow(null),y:r.default.number().unsafe().allow(1/0).allow(null),z:r.default.number().unsafe().allow(1/0).allow(null)}},sphere:{center:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},radius:r.default.number().unsafe().allow(1/0).allow(null)}},rotation:{minPolarAngle:r.default.number().unsafe(),maxPolarAngle:r.default.number().unsafe(),minAzimuthAngle:r.default.number().unsafe().allow(-1/0).allow(null),maxAzimuthAngle:r.default.number().unsafe().allow(1/0).allow(null)},zoom:{minDistance:r.default.number().unsafe(),maxDistance:r.default.number().unsafe().allow(1/0).allow(null)}}),rotationSpeed:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),s=r.default.object({damping:r.default.number().unsafe(),enableKeyPan:r.default.boolean(),enablePan:r.default.boolean(),enableZoom:r.default.boolean(),input:{keys:{up:r.default.number().unsafe(),down:r.default.number().unsafe(),left:r.default.number().unsafe(),right:r.default.number().unsafe()},mouse:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()},touch:{rotate:r.default.number().unsafe(),zoom:r.default.number().unsafe(),pan:r.default.number().unsafe()}},keyPanSpeed:r.default.number().unsafe(),movementSmoothness:r.default.number().unsafe(),panSpeed:r.default.number().unsafe(),zoomSpeed:r.default.number().unsafe()}),o=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:s,enableCameraControls:r.default.boolean(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),l=r.default.object({name:r.default.string().optional(),type:r.default.string(),autoAdjust:r.default.boolean(),cameraMovementDuration:r.default.number().unsafe(),controls:a,enableCameraControls:r.default.boolean(),fov:r.default.number().unsafe().positive(),position:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},revertAtMouseUp:r.default.boolean(),revertAtMouseUpDuration:r.default.number().unsafe(),target:{x:r.default.number().unsafe().allow(null),y:r.default.number().unsafe().allow(null),z:r.default.number().unsafe().allow(null)},zoomExtentsFactor:r.default.number().unsafe().positive()}),c=r.default.object().pattern(/^/,[l,o]),u=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe()}),h=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),direction:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},castShadow:r.default.boolean(),shadowMapResolution:r.default.number().unsafe().optional(),shadowMapBias:r.default.number().unsafe().optional()}),d=r.default.object({skyColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),groundColor:r.default.alternatives([r.default.number().unsafe(),r.default.string()])}),f=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe()}),p=r.default.object({color:r.default.alternatives([r.default.number().unsafe(),r.default.string()]),intensity:r.default.number().unsafe(),position:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},target:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},distance:r.default.number().unsafe(),decay:r.default.number().unsafe(),angle:r.default.number().unsafe(),penumbra:r.default.number().unsafe()}),m=r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),lights:r.default.object().pattern(/^/,[r.default.object({name:r.default.string().optional(),type:r.default.string(),order:r.default.number().unsafe().optional(),properties:r.default.alternatives([u,h,d,f,p])})])})]),g=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),intensity:r.default.number().unsafe().optional(),kernelSize:r.default.number().unsafe().optional(),luminanceSmoothing:r.default.number().unsafe().optional(),luminanceThreshold:r.default.number().unsafe().optional(),mipmapBlur:r.default.boolean()}).optional(),type:r.default.string()}),v=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),modulationOffset:r.default.number().unsafe().optional(),offset:r.default.object({x:r.default.number().unsafe(),y:r.default.number().unsafe()}).optional(),radialModulation:r.default.boolean().optional()}).optional(),type:r.default.string()}),b=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),bokehScale:r.default.number().unsafe().optional(),focusDistance:r.default.number().unsafe().optional(),focusRange:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),_=r.default.object({properties:r.default.object({angle:r.default.number().unsafe().optional(),blendFunction:r.default.number().unsafe().optional(),scale:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),y=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),scale:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),A=r.default.object({properties:r.default.object({resolutionScale:r.default.number().unsafe().optional(),spp:r.default.number().unsafe().optional(),distance:r.default.number().unsafe().optional(),distanceIntensity:r.default.number().unsafe().optional(),intensity:r.default.number().unsafe().optional(),color:r.default.string().optional(),bias:r.default.number().unsafe().optional(),thickness:r.default.number().unsafe().optional(),iterations:r.default.number().unsafe().optional(),radius:r.default.number().unsafe().optional(),rings:r.default.number().unsafe().optional(),lumaPhi:r.default.number().unsafe().optional(),depthPhi:r.default.number().unsafe().optional(),normalPhi:r.default.number().unsafe().optional(),samples:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),E=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),hue:r.default.number().unsafe().optional(),saturation:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),w=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),premultiply:r.default.boolean().optional()}).optional(),type:r.default.string()}),S=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),granularity:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),T=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),density:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),x=r.default.object({properties:r.default.object({resolutionScale:r.default.number().unsafe().optional(),spp:r.default.number().unsafe().optional(),distance:r.default.number().unsafe().optional(),distanceIntensity:r.default.number().unsafe().optional(),intensity:r.default.number().unsafe().optional(),color:r.default.string().optional(),iterations:r.default.number().unsafe().optional(),radius:r.default.number().unsafe().optional(),rings:r.default.number().unsafe().optional(),lumaPhi:r.default.number().unsafe().optional(),depthPhi:r.default.number().unsafe().optional(),normalPhi:r.default.number().unsafe().optional(),samples:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),M=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),feather:r.default.number().unsafe().optional(),focusArea:r.default.number().unsafe().optional(),kernelSize:r.default.number().unsafe().optional(),offset:r.default.number().unsafe().optional(),rotation:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),R=r.default.object({properties:r.default.object({blendFunction:r.default.number().unsafe().optional(),darkness:r.default.number().unsafe().optional(),offset:r.default.number().unsafe().optional(),technique:r.default.number().unsafe().optional()}).optional(),type:r.default.string()}),P=r.default.array().items(g,v,b,_,y,A,E,w,S,T,x,M,R),C=r.default.object({build_date:r.default.string().allow("").optional(),build_version:r.default.string().allow("").optional(),settings_version:r.default.string(),ar:r.default.object({enable:r.default.boolean(),autoScaling:r.default.boolean()}).optional(),camera:{cameraId:r.default.string().allow(""),cameras:c},environment:{clearAlpha:r.default.number().unsafe(),clearColor:r.default.string(),map:r.default.alternatives([r.default.string().allow(""),r.default.array().items(r.default.string())]),mapAsBackground:r.default.boolean(),mapResolution:r.default.string(),rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe(),w:r.default.number().unsafe()},blurriness:r.default.number().unsafe(),intensity:r.default.number().unsafe()},environmentGeometry:{gridColor:r.default.string(),gridVisibility:r.default.boolean(),groundPlaneColor:r.default.string(),groundPlaneVisibility:r.default.boolean(),groundPlaneShadowColor:r.default.string(),groundPlaneShadowVisibility:r.default.boolean()},general:{transformation:{scale:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},translation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()},rotation:{x:r.default.number().unsafe(),y:r.default.number().unsafe(),z:r.default.number().unsafe()}},blurWhenBusy:r.default.boolean(),commitSettings:r.default.boolean(),commitParameters:r.default.boolean(),pointSize:r.default.number().unsafe(),showMessages:r.default.boolean(),defaultMaterialColor:r.default.string()},light:{lightSceneId:r.default.string().allow("").optional(),lightScenes:m},postprocessing:{antiAliasingTechnique:r.default.string(),antiAliasingTechniqueMobile:r.default.string(),enablePostProcessingOnMobile:r.default.boolean(),ssaaSampleLevel:r.default.number().unsafe(),effects:P},rendering:{automaticColorAdjustment:r.default.boolean(),beautyRenderDelay:r.default.number().unsafe(),beautyRenderBlendingDuration:r.default.number().unsafe(),lights:r.default.boolean(),outputEncoding:r.default.string(),physicallyCorrectLights:r.default.boolean(),shadows:r.default.boolean(),softShadows:r.default.boolean(),textureEncoding:r.default.string(),toneMapping:r.default.string(),toneMappingExposure:r.default.number().unsafe()},session:r.default.object().pattern(/^/,[r.default.object({order:r.default.number().unsafe().optional(),displayname:r.default.string().allow("").optional(),hidden:r.default.boolean().optional()})])}).options({presence:"required"});t.validate=e=>{e=r.default.attempt(e,C).value}},6337:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertToPrevious=t.convertFromPrevious=void 0;const n=i(8892),r=i(7349);t.convertFromPrevious=(e,t)=>{const i=r.Defaults(),n=e;return i.ar=n.ar,i.build_date=n.build_date,i.build_version=n.build_version,i.camera=n.camera,i.general=n.general,i.light=n.light,i.session=n.session,i.environment=n.environment,i.environmentGeometry=n.environmentGeometry,i.rendering=n.rendering,i.postprocessing.antiAliasingTechnique=n.postprocessing.antiAliasingTechnique,i.postprocessing.antiAliasingTechniqueMobile=n.postprocessing.antiAliasingTechniqueMobile,i.postprocessing.enablePostProcessingOnMobile=n.postprocessing.enablePostProcessingOnMobile,i.postprocessing.ssaaSampleLevel=n.postprocessing.ssaaSampleLevel,i.postprocessing.effects=n.postprocessing.effects,i.postprocessing.effects.find((e=>"ssao"===e.type))||i.postprocessing.effects.push(r.Defaults().postprocessing.effects.find((e=>"ssao"===e.type))),i},t.convertToPrevious=(e,t)=>{const i=n.Defaults(),r=e;return i.ar=r.ar,i.build_date=r.build_date,i.build_version=r.build_version,i.camera=r.camera,i.general=r.general,i.light=r.light,i.rendering=r.rendering,i.session=r.session,i.environment=r.environment,i.environmentGeometry=r.environmentGeometry,i.postprocessing=r.postprocessing,i}},7349:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Defaults=void 0,t.Defaults=()=>({build_date:"",build_version:"",settings_version:"4.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!1,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},postprocessing:{antiAliasingTechnique:"smaa",antiAliasingTechniqueMobile:"fxaa",enablePostProcessingOnMobile:!0,ssaaSampleLevel:2,effects:[{properties:{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16},type:"ssao"}]},rendering:{automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,softShadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}})},889:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const n=i(940);Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return n.validate}})},5139:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.build_data=void 0,t.build_data={build_version:"3.2.12.1",build_date:"2023-12-04T16:52:34.685Z",build_branch:"development",build_commit:"fc4a5d2c6c6be503148830cecc740a0b480e208f"}},3441:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.build_data=void 0;const n=i(5139);Object.defineProperty(t,"build_data",{enumerable:!0,get:function(){return n.build_data}})},996:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Box=void 0;const n=i(887),r=i(5174);class a{constructor(e=n.vec3.fromValues(1/0,1/0,1/0),t=n.vec3.fromValues(-1/0,-1/0,-1/0)){this._min=e,this._max=t,this._boundingSphere=new r.Sphere,this._boundingSphereState={min:n.vec3.create(),max:n.vec3.create()}}intersect(e,t){let i,n,r,a,s,o,l,c;const u=1/t[0],h=1/t[1],d=1/t[2];return r=u>=0?(this.min[0]-e[0])*u:(this.max[0]-e[0])*u,a=u>=0?(this.max[0]-e[0])*u:(this.min[0]-e[0])*u,i=r,n=a,s=h>=0?(this.min[1]-e[1])*h:(this.max[1]-e[1])*h,o=h>=0?(this.max[1]-e[1])*h:(this.min[1]-e[1])*h,i>o||s>n?null:((s>i||i!=i)&&(i=s),(o<n||n!=n)&&(n=o),l=d>=0?(this.min[2]-e[2])*d:(this.max[2]-e[2])*d,c=d>=0?(this.max[2]-e[2])*d:(this.min[2]-e[2])*d,i>c||l>n?null:((l>i||i!=i)&&(i=l),(c<n||n!=n)&&(n=c),n<0?null:i>=0?i:n))}intersects(e,t){return null!==this.intersect(e,t)}get boundingSphere(){return this._boundingSphereState.min[0]===this.min[0]&&this._boundingSphereState.min[1]===this.min[1]&&this._boundingSphereState.min[2]===this.min[2]&&this._boundingSphereState.max[0]===this.max[0]&&this._boundingSphereState.max[1]===this.max[1]&&this._boundingSphereState.max[2]===this.max[2]||(this._boundingSphere.setFromBox(this),this._boundingSphereState={min:n.vec3.clone(this.min),max:n.vec3.clone(this.max)}),this._boundingSphere}get max(){return this._max}set max(e){this._max=e}get min(){return this._min}set min(e){this._min=e}applyMatrix(e){const t=[];t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.min[0],this.min[1],this.min[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.min[0],this.min[1],this.max[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.min[0],this.max[1],this.min[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.min[0],this.max[1],this.max[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.max[0],this.min[1],this.min[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.max[0],this.min[1],this.max[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.max[0],this.max[1],this.min[2]),e)),t.push(n.vec3.transformMat4(n.vec3.create(),n.vec3.fromValues(this.max[0],this.max[1],this.max[2]),e)),this.min=n.vec3.fromValues(1/0,1/0,1/0),this.max=n.vec3.fromValues(-1/0,-1/0,-1/0);for(let e=0,i=t.length;e<i;e++)this.min=n.vec3.fromValues(Math.min(this.min[0],t[e][0]),Math.min(this.min[1],t[e][1]),Math.min(this.min[2],t[e][2])),this.max=n.vec3.fromValues(Math.max(this.max[0],t[e][0]),Math.max(this.max[1],t[e][1]),Math.max(this.max[2],t[e][2]));return this}clone(){return new a(n.vec3.clone(this.min),n.vec3.clone(this.max))}containsPoint(e){return!(e[0]<this.min[0]||e[0]>this.max[0]||e[1]<this.min[1]||e[1]>this.max[1]||e[2]<this.min[2]||e[2]>this.max[2])}clampPoint(e){return e[0]=Math.max(this.min[0],Math.min(this.max[0],e[0])),e[1]=Math.max(this.min[1],Math.min(this.max[1],e[1])),e[2]=Math.max(this.min[2],Math.min(this.max[2],e[2])),e}setFromAttributeArray(e,t,i,r){const a=3*Math.floor(e.length/3),s=t&&t!==i?+t:3,o=[1/0,1/0,1/0],l=[-1/0,-1/0,-1/0];let c,u,h;const d=n.vec4.create();for(let t=0;t<a;t+=s)r?(n.vec4.transformMat4(d,[e[t],e[t+1],e[t+2],1],r),c=d[0]/d[3],u=d[1]/d[3],h=d[2]/d[3]):(c=e[t],u=e[t+1],h=e[t+2]),o[0]=Math.min(o[0],c),o[1]=Math.min(o[1],u),o[2]=Math.min(o[2],h),l[0]=Math.max(l[0],c),l[1]=Math.max(l[1],u),l[2]=Math.max(l[2],h);return this.min=n.vec3.fromValues(o[0],o[1],o[2]),this.max=n.vec3.fromValues(l[0],l[1],l[2]),this}union(e){return e.min[0]<this.min[0]&&(this.min[0]=e.min[0]),e.min[1]<this.min[1]&&(this.min[1]=e.min[1]),e.min[2]<this.min[2]&&(this.min[2]=e.min[2]),e.max[0]>this.max[0]&&(this.max[0]=e.max[0]),e.max[1]>this.max[1]&&(this.max[1]=e.max[1]),e.max[2]>this.max[2]&&(this.max[2]=e.max[2]),this}isEmpty(){return this.min[0]===1/0&&this.min[1]===1/0&&this.min[2]===1/0&&this.max[0]===-1/0&&this.max[1]===-1/0&&this.max[2]===-1/0}reset(){n.vec3.zero(this._boundingSphere.center),this._boundingSphere.radius=0,n.vec3.zero(this._boundingSphereState.min),n.vec3.zero(this._boundingSphereState.max),n.vec3.set(this._min,1/0,1/0,1/0),n.vec3.set(this._max,-1/0,-1/0,-1/0)}}t.Box=a},118:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;const n=i(887);class r{constructor(e=n.vec3.fromValues(1,0,0),t=0){this._normal=e,this._constant=t}get constant(){return this._constant}set constant(e){this._constant=e}get normal(){return this._normal}set normal(e){this._normal=e}applyMatrix(e){const t=n.mat3.transpose(n.mat3.create(),n.mat3.invert(n.mat3.create(),n.mat3.fromMat4(n.mat3.create(),e))),i=n.vec3.transformMat4(n.vec3.create(),n.vec3.multiply(n.vec3.create(),n.vec3.clone(this.normal),n.vec3.fromValues(this._constant,this._constant,this._constant)),e);return this._normal=n.vec3.normalize(n.vec3.create(),n.vec3.transformMat3(n.vec3.create(),this._normal,t)),this.constant=-n.vec3.dot(i,this._normal),this}clampPoint(e){const t=-this.distanceToPoint(e);return n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),this.normal,n.vec3.fromValues(t,t,t)),e)}clone(){return new r(this._normal,this._constant)}containsPoint(e){return 0===this.distanceToPoint(e)}distanceToPoint(e){return n.vec3.dot(this.normal,e)+this.constant}intersect(e,t){const i=n.vec3.dot(this.normal,t);if(0===i)return 0===this.distanceToPoint(e)?0:null;const r=-(n.vec3.dot(e,this.normal)+this.constant)/i;return r<0?null:r}setFromNormalAndCoplanarPoint(e,t){return n.vec3.copy(this.normal,e),this.constant=-n.vec3.dot(t,this.normal),this}reset(){this._normal=n.vec3.fromValues(1,0,0),this._constant=0}}t.Plane=r},1594:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=void 0;const n=i(887);class r{constructor(e=n.vec3.create(),t=0){this._center=e,this._radius=t}get center(){return this._center}set center(e){this._center=e}get radius(){return this._radius}set radius(e){this._radius=e}applyMatrix(e){this._center=n.vec3.transformMat4(n.vec3.create(),this._center,e);const t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10],a=Math.sqrt(Math.max(t,i,r));return this.radius=this.radius*a,this}clone(){return new r(n.vec3.clone(this._center),this._radius)}containsPoint(e){return n.vec3.squaredDistance(e,this.center)<=this.radius*this.radius}clampPoint(e){return e}intersect(e,t){const i=n.vec3.sub(n.vec3.create(),this.center,e),r=n.vec3.dot(i,t),a=n.vec3.squaredDistance(i,n.vec3.multiply(n.vec3.create(),t,n.vec3.fromValues(r,r,r)));return a<=this.radius*this.radius?r-Math.sqrt(this.radius*this.radius-a):null}intersects(e,t){const i=n.vec3.sub(n.vec3.create(),this.center,e),r=n.vec3.dot(i,t);return n.vec3.squaredDistance(i,n.vec3.multiply(n.vec3.create(),t,n.vec3.fromValues(r,r,r)))<=this.radius*this.radius}setFromBox(e){return n.vec3.add(this.center,e.min,e.max),n.vec3.scale(this.center,this.center,.5),this.radius=.5*n.vec3.dist(e.min,e.max),this}reset(){this._center=n.vec3.create(),this._radius=0}}t.Sphere=r},212:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spherical=void 0;const n=i(887);t.Spherical=class{constructor(e=1,t=0,i=0){this._radius=e,this._phi=t,this._theta=i}get radius(){return this._radius}set radius(e){this._radius=e}get phi(){return this._phi}set phi(e){this._phi=e}get theta(){return this._theta}set theta(e){this._theta=e}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}fromVec3(e){return this.radius=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[2]),this.phi=Math.acos(Math.max(-1,Math.min(1,e[1]/this.radius)))),this}toVec3(){const e=Math.sin(this.phi)*this.radius;return n.vec3.fromValues(e*Math.sin(this.theta),Math.cos(this.phi)*this.radius,e*Math.cos(this.theta))}}},7065:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;const n=i(887);class r{constructor(e=n.vec3.create(),t=n.vec3.create(),i=n.vec3.create()){this._v0=e,this._v1=t,this._v2=i}applyMatrix(e){return n.vec3.transformMat4(this._v0,this._v0,e),n.vec3.transformMat4(this._v1,this._v1,e),n.vec3.transformMat4(this._v2,this._v2,e),this}clone(){return new r(n.vec3.clone(this._v0),n.vec3.clone(this._v1),n.vec3.clone(this._v2))}intersect(e,t){const i=n.vec3.sub(n.vec3.create(),this._v1,this._v0),r=n.vec3.sub(n.vec3.create(),this._v2,this._v0),a=n.vec3.cross(n.vec3.create(),t,r),s=n.vec3.dot(i,a);if(s>-1e-7&&s<1e-7)return null;const o=1/s,l=n.vec3.sub(n.vec3.create(),e,this._v0),c=o*n.vec3.dot(l,a);if(c<0||c>1)return null;const u=n.vec3.cross(n.vec3.create(),l,i),h=o*n.vec3.dot(t,u);if(h<0||c+h>1)return null;const d=o*n.vec3.dot(r,u);return d>1e-7?n.vec3.add(n.vec3.create(),n.vec3.multiply(n.vec3.create(),t,n.vec3.fromValues(d,d,d)),e):null}reset(){this._v0=n.vec3.create(),this._v1=n.vec3.create(),this._v2=n.vec3.create()}}t.Triangle=r},5174:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=t.Plane=t.Spherical=t.Sphere=t.Box=void 0;const n=i(996);Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return n.Box}});const r=i(118);Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return r.Plane}});const a=i(1594);Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return a.Sphere}});const s=i(212);Object.defineProperty(t,"Spherical",{enumerable:!0,get:function(){return s.Spherical}});const o=i(7065);Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return o.Triangle}})},5752:function(e,t){"use strict";var i,n=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},r=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTree=void 0,t.AbstractTree=class{constructor(e){i.set(this,void 0),n(this,i,e,"f")}get root(){return r(this,i,"f")}addNode(e,t=r(this,i,"f"),n=r(this,i,"f")){if(n===t)return n.addChild(e),!0;for(let i=0;i<n.children.length;i++){const r=n.children[i];if(r&&this.addNode(e,t,r))return!0}return!1}addNodeAtPath(e,t=this.root.getPath(),n=r(this,i,"f")){if(n.name===t)return n.addChild(e),!0;const a=t.substr(0,t.indexOf("."));if(n.name===a){const i=t.substr(a.length+1,t.length);for(let t=0;t<n.children.length;t++){const r=n.children[t];if(r&&this.addNodeAtPath(e,i,r))return!0}}return!1}getNodeAtPath(e=this.root.getPath(),t=r(this,i,"f")){if(t.name===e)return t;const n=e.substr(0,e.indexOf("."));if(t.name===n){const i=e.substr(n.length+1,e.length);for(let e=0;e<t.children.length;e++){const n=t.children[e],r=this.getNodeAtPath(i,n);if(r)return r}}return null}removeNode(e,t=r(this,i,"f")){if(t.hasChild(e))return t.removeChild(e),!0;for(let i=0;i<t.children.length;i++){const n=t.children[i];if(n&&this.removeNode(e,n))return!0}return!1}removeNodeAtPath(e,t=r(this,i,"f")){var n;if(t.name===e)return null===(n=t.parent)||void 0===n||n.removeChild(t),!0;const a=e.substr(0,e.indexOf("."));if(t.name===a){const i=e.substr(a.length+1,e.length);for(let e=0;e<t.children.length;e++){const n=t.children[e];if(n&&this.removeNodeAtPath(i,n))return!0}}return!1}},i=new WeakMap},678:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},A=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNode=void 0;const E=i(887),w=i(8877),S=i(5174);t.AbstractTreeNode=class{constructor(e="node",t,i=[],E=[]){var T;n.set(this,w.UuidGenerator.instance),r.set(this,[]),a.set(this,[]),s.set(this,[]),o.set(this,void 0),l.set(this,""),c.set(this,void 0),u.set(this,void 0),h.set(this,new S.Box),d.set(this,{}),f.set(this,[]),p.set(this,[]),m.set(this,!0),g.set(this,!1),v.set(this,[]),b.set(this,[]),_.set(this,void 0),y(this,l,e.replace(/\./g,"_"),"f"),y(this,u,t,"f"),y(this,a,i,"f"),y(this,s,E,"f"),y(this,o,A(this,n,"f").create(),"f"),y(this,_,A(this,o,"f"),"f"),y(this,c,A(this,n,"f").create(),"f"),null===(T=A(this,u,"f"))||void 0===T||T.addChild(this)}get bones(){return A(this,v,"f")}set bones(e){y(this,v,e,"f")}get boneInverses(){return A(this,b,"f")}set boneInverses(e){y(this,b,e,"f")}get boundingBox(){return A(this,h,"f")}get boundingBoxViewport(){return A(this,d,"f")}get children(){return A(this,r,"f")}get originalId(){return A(this,_,"f")}set originalId(e){y(this,_,e,"f")}get data(){return A(this,a,"f")}get excludeViewports(){return A(this,f,"f")}set excludeViewports(e){y(this,f,e,"f")}get id(){return A(this,o,"f")}get name(){return A(this,l,"f")}set name(e){y(this,l,e,"f")}get nodeMatrix(){const e=E.mat4.create();for(let t of A(this,s,"f"))"sdtf"!==t.id&&E.mat4.multiply(e,e,t.matrix);return e}get parent(){return A(this,u,"f")}set parent(e){A(this,u,"f")&&A(this,u,"f").removeChild(this),e&&e.addChild(this),y(this,u,e,"f")}get restrictViewports(){return A(this,p,"f")}set restrictViewports(e){y(this,p,e,"f")}get skinNode(){return A(this,g,"f")}set skinNode(e){y(this,g,e,"f")}get transformations(){return A(this,s,"f")}set transformations(e){y(this,s,e,"f")}get version(){return A(this,c,"f")}set version(e){y(this,c,e,"f")}get visible(){return A(this,m,"f")}set visible(e){y(this,m,e,"f")}get worldMatrix(){const e=E.mat4.create();for(let t of A(this,s,"f"))E.mat4.multiply(e,e,t.matrix);let t=this;for(;t.parent;)E.mat4.multiply(e,t.parent.nodeMatrix,e),t=t.parent;return e}addChild(e){return!this.hasChild(e)&&(A(this,r,"f").push(e),e.parent&&e.parent.removeChild(e),e.parent=this,!0)}addData(e){return A(this,a,"f").push(e),!0}addTransformation(e){return A(this,s,"f").push(e),!0}clone(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(let t of A(this,r,"f"))e.addChild(t.clone());for(let t of A(this,a,"f"))e.data.push(t.clone());for(let t of A(this,s,"f"))e.addTransformation({id:t.id,matrix:E.mat4.clone(t.matrix)});return e}cloneInstance(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(let t of A(this,r,"f"))e.addChild(t.cloneInstance());for(let t of A(this,a,"f"))e.data.push(t);for(let t of A(this,s,"f"))e.addTransformation({id:t.id,matrix:E.mat4.clone(t.matrix)});return e}getChild(e){for(let t=0;t<A(this,r,"f").length;t++)if(A(this,r,"f")[t].id===e)return A(this,r,"f")[t]}getData(e){for(let t=0;t<A(this,a,"f").length;t++)if(A(this,a,"f")[t].id===e)return A(this,a,"f")[t]}getNodesByName(e){let t=[];return e===this.name&&t.push(this),this.traverse((i=>{e===i.name&&t.push(i)})),t}getNodesByNameWithRegex(e){let t=[];return e.test(this.name)&&t.push(this),this.traverse((i=>{e.test(i.name)&&t.push(i)})),t}getPath(){let e=this.name,t=this.parent;for(;t;)e=t.name+"."+e,t=t.parent;return e}getTransformation(e){for(let t=0;t<A(this,s,"f").length;t++)if(A(this,s,"f")[t].id===e)return A(this,s,"f")[t]}hasChild(e){return A(this,r,"f").includes(e)}hasData(e){return A(this,a,"f").includes(e)}hasTransformation(e){return A(this,s,"f").includes(e)}removeChild(e){const t=A(this,r,"f").indexOf(e);return-1!==t&&(A(this,r,"f").splice(t,1),e.parent=void 0,!0)}removeData(e){const t=A(this,a,"f").indexOf(e);return-1!==t&&(A(this,a,"f").splice(t,1),!0)}removeTransformation(e){const t=A(this,s,"f").indexOf(e);return-1!==t&&(A(this,s,"f").splice(t,1),!0)}traverse(e){e(this);for(let t=0;t<this.children.length;t++)this.children[t].traverse(e)}traverseData(e){for(let t=0;t<this.data.length;t++)e(this.data[t]);for(let t=0;t<this.children.length;t++)this.children[t].traverseData(e)}updateVersion(){let e=this;for(;e.parent;)e=e.parent,e.version=A(this,n,"f").create();for(let e=0;e<A(this,r,"f").length;e++)A(this,r,"f")[e].updateVersion();y(this,c,A(this,n,"f").create(),"f")}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap},6574:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeData=void 0;const c=i(8877);t.AbstractTreeNodeData=class{constructor(e,t){n.set(this,void 0),r.set(this,void 0),a.set(this,c.UuidGenerator.instance),s.set(this,c.EventEngine.instance),l(this,r,e||o(this,a,"f").create(),"f"),l(this,n,t||o(this,a,"f").create(),"f")}get id(){return o(this,r,"f")}get version(){return o(this,n,"f")}updateVersion(){l(this,n,o(this,a,"f").create(),"f")}clone(){return new this.constructor}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},5027:function(e,t,i){"use strict";var n,r,a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeDataThreeJs=void 0;const s=i(6574);class o extends s.AbstractTreeNodeData{constructor(){super(...arguments),n.set(this,{}),r.set(this,null)}get threeJsObject(){return a(this,n,"f")}}t.AbstractTreeNodeDataThreeJs=o,n=new WeakMap,r=new WeakMap},3523:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=void 0;const n=i(5752),r=i(317);class a extends n.AbstractTree{constructor(){super(new r.TreeNodeThreeJs("root"))}static get instance(){return this._instance||(this._instance=new this)}}t.Tree=a},317:function(e,t,i){"use strict";var n,r,a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},s=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeNodeThreeJs=void 0;const o=i(678);class l extends o.AbstractTreeNode{constructor(){super(...arguments),n.set(this,{}),r.set(this,null)}get threeJsObject(){return a(this,n,"f")}get updateCallbackThreeJsObject(){return a(this,r,"f")}set updateCallbackThreeJsObject(e){s(this,r,e,"f")}}t.TreeNodeThreeJs=l,n=new WeakMap,r=new WeakMap},3858:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeData=t.TreeNode=t.Tree=void 0;const n=i(317);Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return n.TreeNodeThreeJs}});const r=i(3523);Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return r.Tree}});const a=i(5027);Object.defineProperty(t,"AbstractTreeNodeData",{enumerable:!0,get:function(){return a.AbstractTreeNodeDataThreeJs}})},4411:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;const r=i(887),a=i(9521),s=i(4442);t.Converter=class{constructor(){this._httpClient=s.HttpClient.instance}static get instance(){return this._instance||(this._instance=new this)}processSVG(e){return n(this,void 0,void 0,(function*(){let t=yield new Promise(((t,i)=>{const n=new FileReader;n.onloadend=()=>t(n.result),n.onerror=i,n.readAsDataURL(e)}));t=t.replace("data:image/svg+xml;base64,",""),t=atob(t);const i=document.createElement("DIV");i.id="svgc",i.innerHTML=t;const r=i.getElementsByTagName("svg"),a=[];let s=[];for(let e=0;e<r.length;++e){for(let t=0;t<2;++t){const i=r[e].getElementsByTagName(["image","img"][t]);for(let e=0;e<i.length;++e)"data:"!=i[e].href.baseVal.substring(0,5)&&a.push(i[e].href.baseVal)}const t=r[e].getElementsByTagName("style");for(let e=0;e<t.length;++e){const i=/@import\x20url\(\s*(.*?)\s*\);/g;let n;for(;null!==(n=i.exec(t[e].innerHTML));)s.push(n[1]);s=s.filter((function(e,t,i){return i.indexOf(e)===t}))}}const o=[],l=e=>n(this,void 0,void 0,(function*(){if(e.length>0){const i=yield this._httpClient.get(e,void 0,!0),n=new Uint8Array(i.data);let r=n.length;const a=[];for(;r--;)a[r]=String.fromCharCode(n[r]);const s=window.btoa(a.join("")),o="data:"+i.headers["content-type"]+";base64,"+s;t=t.replace(e,o)}}));for(let e=0;e<a.length;++e)o.push(l(a[e]));const c=e=>n(this,void 0,void 0,(function*(){let i=(yield this._httpClient.get(e,{responseType:"text"})).data;const r=[],a=/url\(\s*(.*?)\s*\)/g;let s;for(;null!==(s=a.exec(i));)r.push(s[1]);const o=[],l=e=>n(this,void 0,void 0,(function*(){const t=yield this._httpClient.get(e,{responseType:"arraybuffer"}),n=new Uint8Array(t.data);let r=n.length;const a=[];for(;r--;)a[r]=String.fromCharCode(n[r]);const s=window.btoa(a.join("")),o="data:"+t.headers["content-type"]+";base64,"+s;e.length>0&&(i=i.replace(e,o))}));for(let e=0;e<r.length;++e)o.push(l(r[e]));yield Promise.all(o),t=t.replace("@import url("+e+");",i)}));for(let e=0;e<s.length;++e)o.push(c(s[e]));yield Promise.all(o);const u="data:image/svg+xml,"+encodeURIComponent(t),h=new Image;h.crossOrigin="Anonymous";const d=new Promise(((e,t)=>{h.onload=()=>e(),h.onerror=t}));return h.src=u,yield d,h}))}responseToImage(e,t){return n(this,void 0,void 0,(function*(){if(e.data instanceof HTMLImageElement)return e.data;if("image/svg+xml"===e.headers["content-type"])return yield this.processSVG(t);{const e=new Image,i=new Promise(((t,i)=>{e.onload=()=>t(),e.onerror=i}));return e.crossOrigin="anonymous",e.src=URL.createObjectURL(t),yield i,URL.revokeObjectURL(e.src),e}}))}toAlpha(e){const t=this.toHexColor(e);return t.length<=8?1:parseInt(t.slice(t.length-2,t.length),16)/255}toColorArray(e){"string"==typeof e&&e.startsWith("#")||(e=this.toHexColor(e));const t=new a.TinyColor(e).toRgb();return[t.r/255,t.g/255,t.b/255]}toHex8Color(e,t="#000"){const i=this.toHexColor(e,t);return new a.TinyColor(i).toHex8String().replace("#","0x")}toHexColor(e,t="#000"){if(!e||"default"===e)return t;e.constructor===Float32Array&&(e=Array.from(e));const i=new a.TinyColor(e);if(e instanceof a.TinyColor)return this.tinyColorToString(i);if("number"==typeof e){let i=e.toString(16);const n=i.length;n<3?i=i.padStart(3,"0"):n<6?i=i.padStart(6,"0"):n<8&&(i=i.padEnd(8,"0"));const r=new a.TinyColor(i);return r.isValid?this.tinyColorToString(r):t}if(e.isColor&&"function"==typeof e.getHexString){const i=new a.TinyColor(e.getHexString());return i.isValid?this.tinyColorToString(i):t}if(Array.isArray(e)&&(3==e.length||4==e.length)){let i=!0;for(let t=0;t<3;++t)e[t]=parseFloat(e[t]),isNaN(e[t])&&(i=!1);if(!i)return t;const n=new a.TinyColor({r:Math.max(0,Math.min(e[0],255)),g:Math.max(0,Math.min(e[1],255)),b:Math.max(0,Math.min(e[2],255))});if(4==e.length){const t=parseFloat(e[3]);isNaN(t)||n.setAlpha(Math.max(0,Math.min(t,255))/255)}return n.isValid?this.tinyColorToString(n):t}if("string"!=typeof e){const i=new a.TinyColor(e);return i.isValid?this.tinyColorToString(i):t}const n=e.replace("0x","#");if(null!==n.match(/^#[a-f0-9]{6}$/i)){const e=new a.TinyColor(n+"ff");return e.isValid?this.tinyColorToString(e):t}if(null!==n.match(/^#[a-f0-9]{8}$/i)){const e=new a.TinyColor(n);return e.isValid?this.tinyColorToString(e):t}if(null!==n.match(/^#[a-f0-9]{7}$/i)){const e=new a.TinyColor(n.slice(0,7)+"0"+n.slice(-1));return e.isValid?this.tinyColorToString(e):t}const r=new a.TinyColor(n);return r.isValid?this.tinyColorToString(r):t}toThreeJsColorInput(e){const t=this.toHexColor(e);return t.slice(0,t.length-2)}toVec3(e){if(Array.isArray(e)&&e.length>=3&&"number"==typeof e[0]&&"number"==typeof e[1]&&"number"==typeof e[2])return r.vec3.fromValues(e[0],e[1],e[2]);const t=e;if((t.x||0===t.x)&&"number"==typeof t.x&&(t.y||0===t.y)&&"number"==typeof t.y&&(t.z||0===t.z)&&"number"==typeof t.z)return r.vec3.fromValues(t.x,t.y,t.z);const i=e;return!i.X&&0!==i.X||"number"!=typeof i.X||!i.Y&&0!==i.Y||"number"!=typeof i.Y||!i.Z&&0!==i.Z||"number"!=typeof i.Z?r.vec3.create():r.vec3.fromValues(i.X,i.Y,i.Z)}tinyColorToString(e){return e.toHex8String()}}},4529:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DomEventEngine=void 0;const n=i(6629),r=i(5383);t.DomEventEngine=class{constructor(e){this._domEventListeners={},this._uuidGenerator=r.UuidGenerator.instance,this._systemInfo=n.SystemInfo.instance,this._allowListeners={mousewheel:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseout:!0,touchstart:!0,touchmove:!0,touchend:!0,touchcancel:!0,keydown:!0,contextmenu:!0},this._currentMousePosition={x:0,y:0},this._canvas=e,this._onMouseWheel=this.onMouseWheel.bind(this),this._onMouseDown=this.onMouseDown.bind(this),this._onMouseMove=this.onMouseMove.bind(this),this._onKeyDownMousePositionHelper=this.onKeyDownMousePositionHelper.bind(this),this._onMouseUp=this.onMouseUp.bind(this),this._onMouseOut=this.onMouseOut.bind(this),this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchUp=this.onTouchUp.bind(this),this._onTouchCancel=this.onTouchCancel.bind(this),this._onKeyDown=this.onKeyDown.bind(this),this._onContextMenu=this.onContextMenu.bind(this),this.addEventListeners()}addDomEventListener(e){const t=this._uuidGenerator.create();return this._domEventListeners[t]=e,t}allowEventListeners(e){void 0!==e.mousewheel&&this._allowListeners.mousewheel!==e.mousewheel&&(e.mousewheel?(this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel)):(this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel)),this._allowListeners.mousewheel=e.mousewheel),void 0!==e.mousedown&&this._allowListeners.mousedown!==e.mousedown&&(e.mousedown?this._canvas.addEventListener("mousedown",this._onMouseDown):this._canvas.removeEventListener("mousedown",this._onMouseDown),this._allowListeners.mousedown=e.mousedown),void 0!==e.mousemove&&this._allowListeners.mousemove!==e.mousemove&&(e.mousemove?(this._canvas.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mousemove",this._onKeyDownMousePositionHelper)):(this._canvas.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mousemove",this._onKeyDownMousePositionHelper)),this._allowListeners.mousemove=e.mousemove),void 0!==e.mouseup&&this._allowListeners.mouseup!==e.mouseup&&(e.mouseup?this._canvas.addEventListener("mouseup",this._onMouseUp):this._canvas.removeEventListener("mouseup",this._onMouseUp),this._allowListeners.mouseup=e.mouseup),void 0!==e.mouseout&&this._allowListeners.mouseout!==e.mouseout&&(e.mouseout?this._canvas.addEventListener("mouseout",this._onMouseOut):this._canvas.removeEventListener("mouseout",this._onMouseOut),this._allowListeners.mouseout=e.mouseout),void 0!==e.touchstart&&this._allowListeners.touchstart!==e.touchstart&&(e.touchstart?window.addEventListener("touchstart",this._onTouchStart,{passive:!1}):window.removeEventListener("touchstart",this._onTouchStart),this._allowListeners.touchstart=e.touchstart),void 0!==e.touchmove&&this._allowListeners.touchmove!==e.touchmove&&(e.touchmove?window.addEventListener("touchmove",this._onTouchMove,{passive:!1}):window.removeEventListener("touchmove",this._onTouchMove),this._allowListeners.touchmove=e.touchmove),void 0!==e.touchend&&this._allowListeners.touchend!==e.touchend&&(e.touchend?window.addEventListener("touchend",this._onTouchUp,{passive:!1}):window.removeEventListener("touchend",this._onTouchUp),this._allowListeners.touchend=e.touchend),void 0!==e.touchcancel&&this._allowListeners.touchcancel!==e.touchcancel&&(e.touchcancel?window.addEventListener("touchcancel",this._onTouchCancel,{passive:!1}):window.removeEventListener("touchcancel",this._onTouchCancel),this._allowListeners.touchcancel=e.touchcancel),void 0!==e.keydown&&this._allowListeners.keydown!==e.keydown&&(e.keydown?window.addEventListener("keydown",this._onKeyDown):window.removeEventListener("keydown",this._onKeyDown),this._allowListeners.keydown=e.keydown),void 0!==e.contextmenu&&this._allowListeners.contextmenu!==e.contextmenu&&(e.contextmenu?this._canvas.addEventListener("contextmenu",this._onContextMenu):this._canvas.removeEventListener("contextmenu",this._onContextMenu),this._allowListeners.contextmenu=e.contextmenu)}dispose(){this.removeEventListeners()}removeAllDomEventListener(){for(let e in this._domEventListeners)delete this._domEventListeners[e]}removeDomEventListener(e){return!!this._domEventListeners[e]&&(delete this._domEventListeners[e],!0)}addEventListeners(){this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.addEventListener("mousedown",this._onMouseDown),this._canvas.addEventListener("mousemove",this._onMouseMove),this._canvas.addEventListener("mouseup",this._onMouseUp),this._canvas.addEventListener("mouseout",this._onMouseOut),window.addEventListener("touchstart",this._onTouchStart,{passive:!1}),window.addEventListener("touchmove",this._onTouchMove,{passive:!1}),window.addEventListener("touchend",this._onTouchUp,{passive:!1}),window.addEventListener("touchcancel",this._onTouchCancel,{passive:!1}),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("mousemove",this._onKeyDownMousePositionHelper),this._canvas.addEventListener("contextmenu",this._onContextMenu)}onContextMenu(e){!0!==this._systemInfo.isMobile&&e.preventDefault()}onKeyDown(e){this._canvas===document.elementFromPoint(this._currentMousePosition.x,this._currentMousePosition.y)&&Object.values(this._domEventListeners).forEach((t=>t.onKeyDown(e)))}onKeyDownMousePositionHelper(e){!0!==this._systemInfo.isMobile&&(this._currentMousePosition={x:e.pageX,y:e.pageY})}onMouseDown(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseDown(e))))}onMouseMove(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseMove(e))))}onMouseUp(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseUp(e))),Object.values(this._domEventListeners).forEach((t=>t.onMouseEnd(e))))}onMouseOut(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),Object.values(this._domEventListeners).forEach((t=>t.onMouseOut(e))),Object.values(this._domEventListeners).forEach((t=>t.onMouseEnd(e))))}onMouseWheel(e){!0!==this._systemInfo.isMobile&&(e.preventDefault(),e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onMouseWheel(e))))}onTouchUp(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchUp(e))),Object.values(this._domEventListeners).forEach((t=>t.onTouchEnd(e))))}onTouchCancel(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchCancel(e))),Object.values(this._domEventListeners).forEach((t=>t.onTouchEnd(e))))}onTouchMove(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchMove(e))))}onTouchStart(e){!1!==this._systemInfo.isMobile&&e.composedPath().includes(this._canvas.parentElement)&&(e.stopPropagation(),Object.values(this._domEventListeners).forEach((t=>t.onTouchStart(e))))}removeEventListeners(){this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.removeEventListener("mousedown",this._onMouseDown),this._canvas.removeEventListener("mousemove",this._onMouseMove),this._canvas.removeEventListener("mouseup",this._onMouseUp),this._canvas.removeEventListener("mouseout",this._onMouseOut),window.removeEventListener("touchstart",this._onTouchStart),window.removeEventListener("touchmove",this._onTouchMove),window.removeEventListener("touchend",this._onTouchUp),window.removeEventListener("touchcancel",this._onTouchCancel),window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("mousemove",this._onKeyDownMousePositionHelper),this._canvas.removeEventListener("contextmenu",this._onContextMenu)}}},4345:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventEngine=void 0;const n=i(5488),r=i(5383),a=i(1525);t.EventEngine=class{constructor(){this._logger=a.Logger.instance,this._uuidGenerator=r.UuidGenerator.instance,this._eventListeners={};for(const e in n.EVENTTYPE){const t=n.EVENTTYPE[e];this._eventListeners[e.toLowerCase()]=[];for(const e in t)this._eventListeners[t[e]]=[]}}static get instance(){return this._instance||(this._instance=new this)}addListener(e,t){var i;const n=this.convertTypeToString(e);if(!n)return"";const r=this._uuidGenerator.create();return null===(i=this._eventListeners[n])||void 0===i||i.push({token:r,cb:t}),r}emitEvent(e,t){const i=this.convertTypeToString(e);if(this._eventListeners[i]&&0!==this._eventListeners[i].length){const e=this._eventListeners[i].map((e=>e.cb));for(let i=0;i<e.length;i++)e[i](t)}i.includes(".")&&this.emitEvent(i.substr(0,i.indexOf(".")),t)}removeListener(e){for(const t in n.EVENTTYPE){const i=n.EVENTTYPE[t],r=t.toLowerCase();for(let t=0;t<this._eventListeners[r].length;t++)if(this._eventListeners[r][t].token===e)return this._eventListeners[r].splice(t,1),!0;for(const t in i)for(let n=0;n<this._eventListeners[i[t]].length;n++)if(this._eventListeners[i[t]][n].token===e)return this._eventListeners[i[t]].splice(n,1),!0}return!1}convertTypeToString(e){let t="";"string"==typeof e&&(t=e);for(const i in n.EVENTTYPE)e===n.EVENTTYPE[i]&&(t=i.toLowerCase());return t&&this._eventListeners[t]?t:(this._logger.warn("EventEngine.convertTypeToString: No valid type provided."),"")}}},5488:(e,t)=>{"use strict";var i,n,r,a,s,o,l,c;Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTTYPE=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_TASK=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_SESSION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_CAMERA=void 0,function(e){e.CAMERA_START="camera.start",e.CAMERA_MOVE="camera.move",e.CAMERA_END="camera.end"}(i=t.EVENTTYPE_CAMERA||(t.EVENTTYPE_CAMERA={})),function(e){e.BEAUTY_RENDERING_FINISHED="rendering.beautyRenderingFinished"}(n=t.EVENTTYPE_RENDERING||(t.EVENTTYPE_RENDERING={})),function(e){e.SCENE_BOUNDING_BOX_CHANGE="scene.boundingBoxChange",e.SCENE_BOUNDING_BOX_EMPTY="scene.boundingBoxEmpty"}(r=t.EVENTTYPE_SCENE||(t.EVENTTYPE_SCENE={})),function(e){e.BUSY_MODE_ON="viewport.busy.on",e.BUSY_MODE_OFF="viewport.busy.off",e.VIEWPORT_CREATED="viewport.created",e.VIEWPORT_UPDATED="viewport.updated",e.VIEWPORT_CLOSED="viewport.closed",e.VIEWPORT_SETTINGS_LOADED="viewport.settingsLoaded",e.VIEWPORT_VISIBLE="viewport.visible",e.VIEWPORT_HIDDEN="viewport.hidden"}(a=t.EVENTTYPE_VIEWPORT||(t.EVENTTYPE_VIEWPORT={})),function(e){e.SESSION_CREATED="session.created",e.SESSION_CUSTOMIZED="session.customized",e.SESSION_CLOSED="session.closed",e.SESSION_INITIAL_OUTPUTS_LOADED="session.initialOutputsLoaded"}(s=t.EVENTTYPE_SESSION||(t.EVENTTYPE_SESSION={})),function(e){e.OUTPUT_UPDATED="output.updated"}(o=t.EVENTTYPE_OUTPUT||(t.EVENTTYPE_OUTPUT={})),function(e){e.TASK_START="task.start",e.TASK_PROCESS="task.process",e.TASK_END="task.end",e.TASK_CANCEL="task.cancel"}(l=t.EVENTTYPE_TASK||(t.EVENTTYPE_TASK={})),function(e){e.DRAG_START="interaction.drag.start",e.DRAG_MOVE="interaction.drag.move",e.DRAG_END="interaction.drag.end",e.HOVER_ON="interaction.hover.on",e.HOVER_OFF="interaction.hover.off",e.SELECT_ON="interaction.select.on",e.SELECT_OFF="interaction.select.off"}(c=t.EVENTTYPE_INTERACTION||(t.EVENTTYPE_INTERACTION={})),t.EVENTTYPE={CAMERA:i,OUTPUT:o,RENDERING:n,SCENE:r,SESSION:s,VIEWPORT:a,INTERACTION:c,TASK:l}},4442:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.HttpClient=void 0;const a=r(i(7218)),s=i(7849),o=i(9481),l=i(4411);t.HttpClient=class{constructor(){this._dataCache=new Map,this._enableCaching=!0,this._excludedQueryParameters=["Expires","Signature","Key-Pair-Id"],this._maxCacheSize=33554432,this._sessionLoading={}}static get instance(){return this._instance||(this._instance=new this)}get enableCaching(){return this._enableCaching}set enableCaching(e){this._enableCaching=e,!1===this._enableCaching&&this._dataCache.clear()}get excludedQueryParameters(){return this._excludedQueryParameters}set excludedQueryParameters(e){this._excludedQueryParameters=e}get maxCacheSize(){return this._maxCacheSize}set maxCacheSize(e){this._maxCacheSize=e}addDataLoading(e,t){this._sessionLoading[e]=t}convertError(e){if((0,s.isGBResponseError)(e))throw new o.ShapeDiverGeometryBackendResponseError(e.message,e.status,e.error,e.desc);if((0,s.isGBRequestError)(e))throw new o.ShapeDiverGeometryBackendRequestError(e.message,e.desc);if((0,s.isGBError)(e))throw new o.ShapeDiverGeometryBackendError(e.message)}get(e,t={responseType:"arraybuffer"},i=!1){return n(this,void 0,void 0,(function*(){const r=this.hrefToDataKey(e);if(this._dataCache.has(r))return this.getFromCache(r);let s,o,l=this.getSessionId(e);return!l&&Object.keys(this._sessionLoading).length>0&&(l=Object.keys(this._sessionLoading)[0]),l&&(s=this._sessionLoading[l]),o=i?void 0===s||void 0===l||e.startsWith("blob:")||e.startsWith("data:")?(0,a.default)(e,Object.assign({method:"get"},t)).then((e=>n(this,void 0,void 0,(function*(){return e})))).catch((e=>{throw this.convertError(e)})):new Promise(((t,i)=>{s.downloadTexture(l,e).then((e=>n(this,void 0,void 0,(function*(){t({data:e[0],headers:{"content-type":e[1]}})})))).catch((e=>i(e)))})).catch((e=>{throw this.convertError(e)})):s?new Promise(((i,n)=>{s.getAsset(e).then((e=>{i({data:e[0],headers:{"content-type":e[1]}})})).catch((()=>{const r=(0,a.default)(e,Object.assign({method:"get"},t));r.catch((e=>n(e))),i(r)}))})).catch((e=>{throw this.convertError(e)})):(0,a.default)(e,Object.assign({method:"get"},t)).catch((e=>{throw this.convertError(e)})),this.enableCaching&&this.addToCache(r,o),o}))}loadTexture(e){return n(this,void 0,void 0,(function*(){const t=yield this.get(e,void 0,!0),i=new Uint8Array(t.data),n=new Blob([i],{type:t.headers["content-type"]});return{data:{image:yield l.Converter.instance.responseToImage(t,n),blob:n},size:t.data.byteLength,headers:t.headers}}))}removeDataLoading(e){delete this._sessionLoading[e]}addToCache(e,t){for(;this.calculateCacheSize()>=this._maxCacheSize;){const e=this._dataCache.keys().next().value;this._dataCache.delete(e)}const i=Date.now();this._dataCache.set(e,{value:t,timestamp:i,resolved:!1}),t.then((n=>{const r=n.size?n.size:n.data.byteLength;this._dataCache.set(e,{value:t,timestamp:i,resolved:!0,size:r})})).catch((e=>{throw this.convertError(e)}))}calculateCacheSize(){let e=0;return this._dataCache.forEach((t=>{!0===t.resolved&&(e+=t.size)})),e}getFromCache(e){const t=this._dataCache.get(e);return this._dataCache.set(e,{value:t.value,timestamp:Date.now(),resolved:t.resolved,size:t.size}),t.value}getSessionId(e){const t=e.split("/"),i=t.indexOf("session");if(-1!==i&&t.length===i+4){const e=t[i+1];if(!this._sessionLoading[e])return;return e}}hrefToDataKey(e){const t=new URL(e),i=new URLSearchParams(t.search);for(let e=0;e<this._excludedQueryParameters.length;e++)i.delete(this._excludedQueryParameters[e]);t.search=i.toString();const n=t.toString();return window.btoa(n)}}},8877:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverGeometryBackendError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.LOGGING_LEVEL=t.Logger=t.InputValidator=t.TypeChecker=t.Converter=t.UuidGenerator=t.HttpClient=t.DomEventEngine=t.SystemInfo=t.StatePromise=t.StateEngine=t.SettingsEngine=t.EVENTTYPE_TASK=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.EventEngine=void 0,t.PerformanceEvaluator=t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=void 0;const n=i(4345);Object.defineProperty(t,"EventEngine",{enumerable:!0,get:function(){return n.EventEngine}});const r=i(5488);Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return r.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return r.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return r.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_OUTPUT",{enumerable:!0,get:function(){return r.EVENTTYPE_OUTPUT}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return r.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return r.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return r.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return r.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return r.EVENTTYPE_VIEWPORT}});const a=i(8979);Object.defineProperty(t,"SettingsEngine",{enumerable:!0,get:function(){return a.SettingsEngine}});const s=i(2100);Object.defineProperty(t,"StateEngine",{enumerable:!0,get:function(){return s.StateEngine}});const o=i(6629);Object.defineProperty(t,"SystemInfo",{enumerable:!0,get:function(){return o.SystemInfo}});const l=i(4529);Object.defineProperty(t,"DomEventEngine",{enumerable:!0,get:function(){return l.DomEventEngine}});const c=i(4411);Object.defineProperty(t,"Converter",{enumerable:!0,get:function(){return c.Converter}});const u=i(4442);Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return u.HttpClient}});const h=i(633);Object.defineProperty(t,"InputValidator",{enumerable:!0,get:function(){return h.InputValidator}});const d=i(1227);Object.defineProperty(t,"TypeChecker",{enumerable:!0,get:function(){return d.TypeChecker}});const f=i(5383);Object.defineProperty(t,"UuidGenerator",{enumerable:!0,get:function(){return f.UuidGenerator}});const p=i(5436);Object.defineProperty(t,"PerformanceEvaluator",{enumerable:!0,get:function(){return p.PerformanceEvaluator}});const m=i(1525);Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return m.Logger}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return m.LOGGING_LEVEL}});const g=i(3262);Object.defineProperty(t,"StatePromise",{enumerable:!0,get:function(){return g.StatePromise}});const v=i(2707);Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return v.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return v.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return v.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return v.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return v.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return v.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return v.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return v.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return v.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return v.ShapeDiverViewerWebGLError}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return v.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return v.ShapeDiverViewerViewportError}});const b=i(7878);Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return b.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return b.ShapeDiverViewerErrorType}});const _=i(9481);Object.defineProperty(t,"ShapeDiverGeometryBackendError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendResponseError}});const y=i(7849);Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return y.ShapeDiverResponseErrorType}});const A=i(6485);Object.defineProperty(t,"isViewerError",{enumerable:!0,get:function(){return A.isViewerError}}),Object.defineProperty(t,"isViewerUnknownError",{enumerable:!0,get:function(){return A.isViewerUnknownError}}),Object.defineProperty(t,"isViewerDataProcessingError",{enumerable:!0,get:function(){return A.isViewerDataProcessingError}}),Object.defineProperty(t,"isViewerEnvironmentMapError",{enumerable:!0,get:function(){return A.isViewerEnvironmentMapError}}),Object.defineProperty(t,"isViewerWebGLError",{enumerable:!0,get:function(){return A.isViewerWebGLError}}),Object.defineProperty(t,"isViewerSettingsError",{enumerable:!0,get:function(){return A.isViewerSettingsError}}),Object.defineProperty(t,"isViewerSessionError",{enumerable:!0,get:function(){return A.isViewerSessionError}}),Object.defineProperty(t,"isViewerViewportError",{enumerable:!0,get:function(){return A.isViewerViewportError}}),Object.defineProperty(t,"isViewerLightError",{enumerable:!0,get:function(){return A.isViewerLightError}}),Object.defineProperty(t,"isViewerCameraError",{enumerable:!0,get:function(){return A.isViewerCameraError}}),Object.defineProperty(t,"isARError",{enumerable:!0,get:function(){return A.isARError}}),Object.defineProperty(t,"isViewerValidationError",{enumerable:!0,get:function(){return A.isViewerValidationError}}),Object.defineProperty(t,"isViewerInteractionError",{enumerable:!0,get:function(){return A.isViewerInteractionError}}),Object.defineProperty(t,"isViewerGeometryBackendError",{enumerable:!0,get:function(){return A.isViewerGeometryBackendError}}),Object.defineProperty(t,"isViewerGeometryBackendGenericError",{enumerable:!0,get:function(){return A.isViewerGeometryBackendGenericError}}),Object.defineProperty(t,"isViewerGeometryBackendRequestError",{enumerable:!0,get:function(){return A.isViewerGeometryBackendRequestError}}),Object.defineProperty(t,"isViewerGeometryBackendResponseError",{enumerable:!0,get:function(){return A.isViewerGeometryBackendResponseError}})},633:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InputValidator=void 0;const r=n(i(7856)),a=i(1525),s=i(2707),o=i(1227);t.InputValidator=class{constructor(){this._logger=a.Logger.instance,this._typeChecker=o.TypeChecker.instance}static get instance(){return this._instance||(this._instance=new this)}sanitize(e){return r.default.sanitize(e)}validateAndError(e,t,i,n=!0,r=[]){if(!this.validate(t,i,n,r))throw new s.ShapeDiverViewerValidationError(`${e}: Input could not be validated. ${t} is not of type ${i}.${!1===n?" (Can also be undefined)":""}`,t,i)}validate(e,t,i=!0,n=[]){if(!1===i&&void 0===e)return!0;switch(t){case"array":if(Array.isArray(e))return!0;break;case"string":if(this._typeChecker.isTypeOf(e,"string"))return!0;break;case"boolean":if(this._typeChecker.isTypeOf(e,"boolean"))return!0;break;case"function":if(this._typeChecker.isTypeOf(e,"function"))return!0;break;case"number":if(this._typeChecker.isTypeOf(e,"number")&&!isNaN(e))return!0;break;case"factor":if(this._typeChecker.isTypeOf(e,"number")&&e>=0&&e<=1)return!0;break;case"positive":if(this._typeChecker.isTypeOf(e,"number")&&e>=0)return!0;break;case"HTMLCanvasElement":if(this._typeChecker.isHTMLCanvasElement(e))return!0;break;case"enum":if(this._typeChecker.isTypeOf(e,"string")&&n.includes(e))return!0;break;case"vec3":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number"))return!0;break;case"quat":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number"))return!0;break;case"cubeMap":if(Array.isArray(e)&&6===e.length&&this._typeChecker.isTypeOf(e[0],"string")&&this._typeChecker.isTypeOf(e[1],"string")&&this._typeChecker.isTypeOf(e[2],"string")&&this._typeChecker.isTypeOf(e[3],"string")&&this._typeChecker.isTypeOf(e[4],"string")&&this._typeChecker.isTypeOf(e[5],"string"))return!0;if(this._typeChecker.isTypeOf(e,"string"))return!0;break;case"stringArray":if(Array.isArray(e)){let t=!0;for(let i=0;i<e.length;i++)"string"!=typeof e[i]&&(t=!1);if(!0===t)return!0}break;case"object":if(this._typeChecker.isTypeOf(e,"object"))return!0;break;case"file":if(this._typeChecker.isTypeOf(e,"string")||e instanceof File||e instanceof Blob)return!0;break;case"color":if(this._typeChecker.isTypeOf(e,"string")||Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")||this._typeChecker.isTypeOf(e,"number"))return!0;break;case"mat4":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number")&&this._typeChecker.isTypeOf(e[4],"number")&&this._typeChecker.isTypeOf(e[5],"number")&&this._typeChecker.isTypeOf(e[6],"number")&&this._typeChecker.isTypeOf(e[7],"number")&&this._typeChecker.isTypeOf(e[8],"number")&&this._typeChecker.isTypeOf(e[9],"number")&&this._typeChecker.isTypeOf(e[10],"number")&&this._typeChecker.isTypeOf(e[11],"number")&&this._typeChecker.isTypeOf(e[12],"number")&&this._typeChecker.isTypeOf(e[13],"number")&&this._typeChecker.isTypeOf(e[14],"number")&&this._typeChecker.isTypeOf(e[15],"number"))return!0;break;default:return!1}return!1}}},6485:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=void 0;const n=i(7878);t.isViewerError=function(e){return e instanceof Error&&"errorType"in e&&Object.values(n.ShapeDiverViewerErrorType).includes(e.errorType)},t.isViewerUnknownError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.UNKNOWN},t.isViewerDataProcessingError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.DATA_PROCESSING_ERROR},t.isViewerEnvironmentMapError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.ENVIRONMENT_MAP_ERROR},t.isViewerWebGLError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.WEBGL_ERROR},t.isViewerSettingsError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.SETTINGS_ERROR},t.isViewerSessionError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.SESSION_ERROR},t.isViewerViewportError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.VIEWPORT_ERROR},t.isViewerLightError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.LIGHT_ERROR},t.isViewerCameraError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.CAMERA_ERROR},t.isARError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.AR_ERROR},t.isViewerValidationError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.VALIDATION_ERROR},t.isViewerInteractionError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.INTERACTION_ERROR},t.isViewerGeometryBackendError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR||e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR||e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR},t.isViewerGeometryBackendGenericError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR},t.isViewerGeometryBackendRequestError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR},t.isViewerGeometryBackendResponseError=function(e){return e instanceof Error&&"errorType"in e&&e.errorType===n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_RESPONSE_ERROR}},1525:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LOGGING_LEVEL=void 0,function(e){e.NONE="none",e.ERROR="error",e.FATAL="fatal",e.WARN="warn",e.INFO="info",e.DEBUG="debug",e.DEBUG_HIGH="debug_high",e.DEBUG_MEDIUM="debug_medium",e.DEBUG_LOW="debug_low"}(i=t.LOGGING_LEVEL||(t.LOGGING_LEVEL={})),t.Logger=class{constructor(){this._loggingLevel=i.WARN,this._showMessages=!0}static get instance(){return this._instance||(this._instance=new this)}get loggingLevel(){return this._loggingLevel}set loggingLevel(e){this._loggingLevel=e}get showMessages(){return this._showMessages}set showMessages(e){this._showMessages=e}debug(e){this.canLog(i.DEBUG)&&!0===this.showMessages&&console.debug("(DEBUG) "+this.messageConstruction(e))}debugHigh(e){this.canLog(i.DEBUG_HIGH)&&!0===this.showMessages&&console.debug("(DEBUG_HIGH) "+this.messageConstruction(e))}debugLow(e){this.canLog(i.DEBUG_LOW)&&!0===this.showMessages&&console.debug("(DEBUG_LOW) "+this.messageConstruction(e))}debugMedium(e){this.canLog(i.DEBUG_MEDIUM)&&!0===this.showMessages&&console.debug("(DEBUG_MEDIUM) "+this.messageConstruction(e))}error(e){this.canLog(i.ERROR)&&!0===this.showMessages&&console.error("(ERROR) "+this.messageConstruction(e))}fatal(e){this.canLog(i.FATAL)&&!0===this.showMessages&&console.error("(FATAL) "+this.messageConstruction(e))}info(e){this.canLog(i.INFO)&&!0===this.showMessages&&console.info("(INFO) "+this.messageConstruction(e))}warn(e){this.canLog(i.WARN)&&!0===this.showMessages&&console.warn("(WARN) "+this.messageConstruction(e))}canLog(e){switch(this.loggingLevel){case i.ERROR:if(e===i.FATAL)return!1;if(e===i.WARN)return!1;if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.FATAL:if(e===i.WARN)return!1;if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.WARN:if(e===i.INFO)return!1;if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.INFO:if(e===i.DEBUG)return!1;if(e===i.DEBUG_HIGH)return!1;if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.DEBUG_HIGH:if(e===i.DEBUG_MEDIUM)return!1;if(e===i.DEBUG_LOW)return!1;case i.DEBUG_MEDIUM:if(e===i.DEBUG_LOW)return!1;case i.DEBUG_LOW:case i.DEBUG:default:return!0}}messageConstruction(e){return(new Date).toISOString()+": "+e}}},9481:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverGeometryBackendError=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=void 0;const n=i(7878);class r extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR,t,e),this.desc=t}}t.ShapeDiverGeometryBackendRequestError=r;class a extends n.ShapeDiverViewerError{constructor(e,t,i,r){super(n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_RESPONSE_ERROR,r,e),this.status=t,this.geometryBackendErrorType=i,this.desc=r}}t.ShapeDiverGeometryBackendResponseError=a;class s extends n.ShapeDiverViewerError{constructor(e){super(n.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR,"A generic geometry backend error occurred.",e)}}t.ShapeDiverGeometryBackendError=s},7878:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverViewerError=t.ShapeDiverError=t.ShapeDiverViewerErrorType=void 0,function(e){e.AR_ERROR="SdARError",e.GEOMETRY_BACKEND_ERROR="SdGeometryBackendError",e.GEOMETRY_BACKEND_REQUEST_ERROR="SdGeometryBackendRequestError",e.GEOMETRY_BACKEND_RESPONSE_ERROR="SdGeometryBackendResponseError",e.CAMERA_ERROR="SdCameraError",e.CONNECTION_ERROR="SdConnectionError",e.DATA_PROCESSING_ERROR="SdDataProcessingError",e.ENVIRONMENT_MAP_ERROR="SdEnvironmentMapError",e.INTERACTION_ERROR="SdInteractionError",e.LIGHT_ERROR="SdLightError",e.SESSION_ERROR="SdSessionError",e.SETTINGS_ERROR="SdSettingsError",e.VALIDATION_ERROR="SdValidationError",e.VIEWPORT_ERROR="SdViewerError",e.WEBGL_ERROR="SdWebGLError",e.UNKNOWN=""}(i=t.ShapeDiverViewerErrorType||(t.ShapeDiverViewerErrorType={}));class n extends Error{constructor(e){super(e)}}t.ShapeDiverError=n,t.ShapeDiverViewerError=class extends n{constructor(e,t,n){super(n),this.desc=t,this.errorType=i.UNKNOWN,this.errorType=Object.values(i).includes(e)?e:i.UNKNOWN}}},2707:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerArError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerUnknownError=void 0;const n=i(7878);class r extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.UNKNOWN,"An unknown error occurred.",e),this.message=e,this.errorObject=t,void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,r)}}t.ShapeDiverViewerUnknownError=r;class a extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.DATA_PROCESSING_ERROR,"An error occurred while processing data.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerDataProcessingError=a;class s extends n.ShapeDiverViewerError{constructor(e,t,i){super(n.ShapeDiverViewerErrorType.ENVIRONMENT_MAP_ERROR,"An error occurred while loading the environment map.",e),this.message=e,this.url=t,this.errorObject=i}}t.ShapeDiverViewerEnvironmentMapError=s;class o extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.WEBGL_ERROR,"An error occurred regarding to the WebGL context.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerWebGLError=o;class l extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.SETTINGS_ERROR,"An error occurred while loading the settings.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerSettingsError=l;class c extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.SESSION_ERROR,"An error occurred while working with the session.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerSessionError=c;class u extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.VIEWPORT_ERROR,"An error occurred while working with the viewport.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerViewportError=u;class h extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.LIGHT_ERROR,"An error occurred while working with the lights.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerLightError=h;class d extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.CAMERA_ERROR,"An error occurred while working with the cameras.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerCameraError=d;class f extends n.ShapeDiverViewerError{constructor(e,t){super(n.ShapeDiverViewerErrorType.AR_ERROR,"An error occurred while working with AR.",e),this.message=e,this.errorObject=t}}t.ShapeDiverViewerArError=f;class p extends n.ShapeDiverViewerError{constructor(e,t,i,r){super(n.ShapeDiverViewerErrorType.VALIDATION_ERROR,"An error occurred while validating the value.",e),this.message=e,this.value=t,this.requestedType=i,this.errorObject=r}}t.ShapeDiverViewerValidationError=p;class m extends n.ShapeDiverViewerError{constructor(e){super(n.ShapeDiverViewerErrorType.INTERACTION_ERROR,"An error occurred with interactions.",e),this.message=e}}t.ShapeDiverViewerInteractionError=m},5436:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceEvaluator=void 0,t.PerformanceEvaluator=class{static get instance(){return this._instance||(this._instance=new this)}continueSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].continued=performance.now())))}end(){this._eval&&(this._eval.end||(this._eval.end=performance.now(),this._eval.duration=this._eval.end-this._eval.start))}endSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].end=performance.now(),this._eval.section[e].duration=(this._eval.section[e].duration||0)+(this._eval.section[e].end-(this._eval.section[e].continued||this._eval.section[e].start)))))}getEvaluation(){return this._eval}getEvaluationToString(){return`Performance Evaluation: ${this._eval.duration}ms\n`}pauseSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].duration=(this._eval.section[e].duration||0)+performance.now()-(this._eval.section[e].continued||this._eval.section[e].start))))}start(e){this._eval={start:e||performance.now(),section:{}}}startSection(e,t){this._eval&&(this._eval.end||(this._eval.section[e]={start:t||performance.now()}))}}},8979:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsEngine=void 0;const n=i(148),r=i(4345),a=i(1525),s=i(2707);t.SettingsEngine=class{constructor(){this._eventEngine=r.EventEngine.instance,this._logger=a.Logger.instance,this._settings=(0,n.Defaults)()}get ar(){return this._settings.ar}get camera(){return this._settings.camera}get environment(){return this._settings.environment}get environmentGeometry(){return this._settings.environmentGeometry}get general(){return this._settings.general}get light(){return this._settings.light}get rendering(){return this._settings.rendering}get session(){return this._settings.session}set session(e){this._settings.session=e}get settings(){return this._settings}get settingsJson(){return this._settingsJson}flatten(){const e=t=>{const i={};for(let r in t)if(t.hasOwnProperty(r))if("object"==typeof t[r]){const a=e(t[r]);for(var n in a)a.hasOwnProperty(n)&&(i[r+"."+n]=a[n])}else i[r]=t[r];return i};return e(this.settings)}loadSettings(e){if(this._settingsJson=e,JSON.stringify(e)!==JSON.stringify({})){const t=["1.0","2.0","3.0","3.1","3.2","3.3","3.4","4.0"];for(let i=0;i<t.length;i++){const r=t[i];try{return(0,n.validate)(e,r),this._settings=(0,n.convert)(e,n.latestVersion),void this.cleanSettings(this._settings)}catch(e){}}try{return(0,n.validate)(e,n.latestVersion),this._settings=(0,n.convert)(e,n.latestVersion),void this.cleanSettings(this._settings)}catch(e){throw new s.ShapeDiverViewerSettingsError("SettingsEngine.loadSettings: Settings could not be validated. "+e.message,e)}}else this._settings=(0,n.Defaults)()}reset(){this._settings=(0,n.Defaults)()}cleanSettings(e){for(let t in e.camera.cameras){const i=e.camera.cameras[t];if("perspective"===i.type){const e=i.controls.restrictions;null===e.position.cube.min.x&&(e.position.cube.min.x=-1/0),null===e.position.cube.min.y&&(e.position.cube.min.y=-1/0),null===e.position.cube.min.z&&(e.position.cube.min.z=-1/0),null===e.position.cube.max.x&&(e.position.cube.max.x=1/0),null===e.position.cube.max.y&&(e.position.cube.max.y=1/0),null===e.position.cube.max.z&&(e.position.cube.max.z=1/0),null===e.position.sphere.radius&&(e.position.sphere.radius=1/0),null===e.target.cube.min.x&&(e.target.cube.min.x=-1/0),null===e.target.cube.min.y&&(e.target.cube.min.y=-1/0),null===e.target.cube.min.z&&(e.target.cube.min.z=-1/0),null===e.target.cube.max.x&&(e.target.cube.max.x=1/0),null===e.target.cube.max.y&&(e.target.cube.max.y=1/0),null===e.target.cube.max.z&&(e.target.cube.max.z=1/0),null===e.target.sphere.radius&&(e.target.sphere.radius=1/0),null===e.rotation.minAzimuthAngle&&(e.rotation.minAzimuthAngle=-1/0),null===e.rotation.maxAzimuthAngle&&(e.rotation.maxAzimuthAngle=1/0),null===e.zoom.maxDistance&&(e.zoom.maxDistance=1/0)}}}}},2100:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateEngine=void 0;const n=i(3262);t.StateEngine=class{constructor(){this._fontLoaded=new n.StatePromise,this._renderingEngines={},this._sessionEngines={},this._fontLoaded=new n.StatePromise}static get instance(){return this._instance||(this._instance=new this)}get fontLoaded(){return this._fontLoaded}get renderingEngines(){return this._renderingEngines}get sessionEngines(){return this._sessionEngines}}},3262:function(e,t){"use strict";var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StatePromise=void 0,t.StatePromise=class{constructor(){this._resolved=!1,this._callbacks=[],this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._promise.finally((()=>{this._resolved=!0}))}get resolved(){return this._resolved}get resolve(){return this._resolve}get reject(){return this._reject}then(e){return i(this,void 0,void 0,(function*(){this._callbacks.push(e),!0===this.resolved?e():this._promise.then(e)}))}reset(){this._resolved=!1,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t})),this._promise.finally((()=>{this._resolved=!0}));const e=[...this._callbacks];this._callbacks=[];for(let t=0;t<e.length;t++)this.then(e[t])}}},6629:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemInfo=void 0;const r=n(i(2238));t.SystemInfo=class{constructor(){this._parser=new r.default;const e="undefined"!=typeof window&&window.navigator&&window.navigator.userAgent.indexOf("Trident")>-1;this._isBrowser=e||"undefined"!=typeof document&&"function"==typeof document.getElementById&&window&&"function"==typeof window.Event,this._isIframe=!1,this._isBrowser?(this._isIframe=parent!==window,this._origin=this._isIframe?document.referrer:window.location.origin):this._origin="direct"}static get instance(){return this._instance||(this._instance=new this)}get isAndroid(){return"Android"===this._parser.getOS().name}get isBrowser(){return this._isBrowser}get isChrome(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Chrome"))}get isFirefox(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Firefox"))}get isIE(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("IE"))}get isIOS(){return"iOS"===this._parser.getOS().name||window.navigator&&5===window.navigator.maxTouchPoints&&"MacIntel"===window.navigator.platform}get isIframe(){return this._isIframe}get isInstagram(){return"Instagram"===this._parser.getBrowser().name}get isMacOS(){return"Mac OS"===this._parser.getOS().name}get isMobile(){const e=this._parser.getDevice().type;return"mobile"===e||"tablet"===e}get isSafari(){const e=this._parser.getBrowser().name;return!(!e||!e.includes("Safari"))}get origin(){return this._origin+""}}},1227:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeChecker=void 0,t.TypeChecker=class{static get instance(){return this._instance||(this._instance=new this)}isHTMLCanvasElement(e){return e instanceof HTMLCanvasElement}isTypeOf(e,t){return typeof e===t}}},5383:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UuidGenerator=void 0;const n=i(3536);t.UuidGenerator=class{static get instance(){return this._instance||(this._instance=new this)}create(){return(0,n.v4)()}parse(e){return(0,n.parse)(e)}stringify(e){return(0,n.stringify)(e)}validate(e){return(0,n.validate)(e)}}},3536:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return l.default}});var n=d(i(2141)),r=d(i(7478)),a=d(i(8093)),s=d(i(2997)),o=d(i(3838)),l=d(i(2465)),c=d(i(8636)),u=d(i(3621)),h=d(i(2423));function d(e){return e&&e.__esModule?e:{default:e}}},6932:(e,t)=>{"use strict";function i(e){return 14+(e+64>>>9<<4)+1}function n(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function r(e,t,i,r,a,s){return n((o=n(n(t,e),n(r,s)))<<(l=a)|o>>>32-l,i);var o,l}function a(e,t,i,n,a,s,o){return r(t&i|~t&n,e,t,a,s,o)}function s(e,t,i,n,a,s,o){return r(t&n|i&~n,e,t,a,s,o)}function o(e,t,i,n,a,s,o){return r(t^i^n,e,t,a,s,o)}function l(e,t,i,n,a,s,o){return r(i^(t|~n),e,t,a,s,o)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(let i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){const t=[],i=32*e.length,n="0123456789abcdef";for(let r=0;r<i;r+=8){const i=e[r>>5]>>>r%32&255,a=parseInt(n.charAt(i>>>4&15)+n.charAt(15&i),16);t.push(a)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[i(t)-1]=t;let r=1732584193,c=-271733879,u=-1732584194,h=271733878;for(let t=0;t<e.length;t+=16){const i=r,d=c,f=u,p=h;r=a(r,c,u,h,e[t],7,-680876936),h=a(h,r,c,u,e[t+1],12,-389564586),u=a(u,h,r,c,e[t+2],17,606105819),c=a(c,u,h,r,e[t+3],22,-1044525330),r=a(r,c,u,h,e[t+4],7,-176418897),h=a(h,r,c,u,e[t+5],12,1200080426),u=a(u,h,r,c,e[t+6],17,-1473231341),c=a(c,u,h,r,e[t+7],22,-45705983),r=a(r,c,u,h,e[t+8],7,1770035416),h=a(h,r,c,u,e[t+9],12,-1958414417),u=a(u,h,r,c,e[t+10],17,-42063),c=a(c,u,h,r,e[t+11],22,-1990404162),r=a(r,c,u,h,e[t+12],7,1804603682),h=a(h,r,c,u,e[t+13],12,-40341101),u=a(u,h,r,c,e[t+14],17,-1502002290),c=a(c,u,h,r,e[t+15],22,1236535329),r=s(r,c,u,h,e[t+1],5,-165796510),h=s(h,r,c,u,e[t+6],9,-1069501632),u=s(u,h,r,c,e[t+11],14,643717713),c=s(c,u,h,r,e[t],20,-373897302),r=s(r,c,u,h,e[t+5],5,-701558691),h=s(h,r,c,u,e[t+10],9,38016083),u=s(u,h,r,c,e[t+15],14,-660478335),c=s(c,u,h,r,e[t+4],20,-405537848),r=s(r,c,u,h,e[t+9],5,568446438),h=s(h,r,c,u,e[t+14],9,-1019803690),u=s(u,h,r,c,e[t+3],14,-187363961),c=s(c,u,h,r,e[t+8],20,1163531501),r=s(r,c,u,h,e[t+13],5,-1444681467),h=s(h,r,c,u,e[t+2],9,-51403784),u=s(u,h,r,c,e[t+7],14,1735328473),c=s(c,u,h,r,e[t+12],20,-1926607734),r=o(r,c,u,h,e[t+5],4,-378558),h=o(h,r,c,u,e[t+8],11,-2022574463),u=o(u,h,r,c,e[t+11],16,1839030562),c=o(c,u,h,r,e[t+14],23,-35309556),r=o(r,c,u,h,e[t+1],4,-1530992060),h=o(h,r,c,u,e[t+4],11,1272893353),u=o(u,h,r,c,e[t+7],16,-155497632),c=o(c,u,h,r,e[t+10],23,-1094730640),r=o(r,c,u,h,e[t+13],4,681279174),h=o(h,r,c,u,e[t],11,-358537222),u=o(u,h,r,c,e[t+3],16,-722521979),c=o(c,u,h,r,e[t+6],23,76029189),r=o(r,c,u,h,e[t+9],4,-640364487),h=o(h,r,c,u,e[t+12],11,-421815835),u=o(u,h,r,c,e[t+15],16,530742520),c=o(c,u,h,r,e[t+2],23,-995338651),r=l(r,c,u,h,e[t],6,-198630844),h=l(h,r,c,u,e[t+7],10,1126891415),u=l(u,h,r,c,e[t+14],15,-1416354905),c=l(c,u,h,r,e[t+5],21,-57434055),r=l(r,c,u,h,e[t+12],6,1700485571),h=l(h,r,c,u,e[t+3],10,-1894986606),u=l(u,h,r,c,e[t+10],15,-1051523),c=l(c,u,h,r,e[t+1],21,-2054922799),r=l(r,c,u,h,e[t+8],6,1873313359),h=l(h,r,c,u,e[t+15],10,-30611744),u=l(u,h,r,c,e[t+6],15,-1560198380),c=l(c,u,h,r,e[t+13],21,1309151649),r=l(r,c,u,h,e[t+4],6,-145523070),h=l(h,r,c,u,e[t+11],10,-1120210379),u=l(u,h,r,c,e[t+2],15,718787259),c=l(c,u,h,r,e[t+9],21,-343485551),r=n(r,i),c=n(c,d),u=n(u,f),h=n(h,p)}return[r,c,u,h]}(function(e){if(0===e.length)return[];const t=8*e.length,n=new Uint32Array(i(t));for(let i=0;i<t;i+=8)n[i>>5]|=(255&e[i/8])<<i%32;return n}(e),8*e.length))}},7410:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};t.default=i},3838:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default="00000000-0000-0000-0000-000000000000"},2423:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(8636))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");let t;const i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i}},7041:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},7571:(e,t)=>{"use strict";let i;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){if(!i&&(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(n)};const n=new Uint8Array(16)},2815:(e,t)=>{"use strict";function i(e,t,i,n){switch(e){case 0:return t&i^~t&n;case 1:case 3:return t^i^n;case 2:return t&i^t&n^i&n}}function n(e,t){return e<<t|e>>>32-t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=function(e){const t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){const t=unescape(encodeURIComponent(e));e=[];for(let i=0;i<t.length;++i)e.push(t.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s);for(let t=0;t<s;++t){const i=new Uint32Array(16);for(let n=0;n<16;++n)i[n]=e[64*t+4*n]<<24|e[64*t+4*n+1]<<16|e[64*t+4*n+2]<<8|e[64*t+4*n+3];o[t]=i}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(let e=0;e<s;++e){const a=new Uint32Array(80);for(let t=0;t<16;++t)a[t]=o[e][t];for(let e=16;e<80;++e)a[e]=n(a[e-3]^a[e-8]^a[e-14]^a[e-16],1);let s=r[0],l=r[1],c=r[2],u=r[3],h=r[4];for(let e=0;e<80;++e){const r=Math.floor(e/20),o=n(s,5)+i(r,l,c,u)+h+t[r]+a[e]>>>0;h=u,u=c,c=n(l,30)>>>0,l=s,s=o}r[0]=r[0]+s>>>0,r[1]=r[1]+l>>>0,r[2]=r[2]+c>>>0,r[3]=r[3]+u>>>0,r[4]=r[4]+h>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}},3621:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.unsafeStringify=s;var n,r=(n=i(8636))&&n.__esModule?n:{default:n};const a=[];for(let e=0;e<256;++e)a.push((e+256).toString(16).slice(1));function s(e,t=0){return a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]}t.default=function(e,t=0){const i=s(e,t);if(!(0,r.default)(i))throw TypeError("Stringified UUID is invalid");return i}},2141:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(7571))&&n.__esModule?n:{default:n},a=i(3621);let s,o,l=0,c=0;t.default=function(e,t,i){let n=t&&i||0;const u=t||new Array(16);let h=(e=e||{}).node||s,d=void 0!==e.clockseq?e.clockseq:o;if(null==h||null==d){const t=e.random||(e.rng||r.default)();null==h&&(h=s=[1|t[0],t[1],t[2],t[3],t[4],t[5]]),null==d&&(d=o=16383&(t[6]<<8|t[7]))}let f=void 0!==e.msecs?e.msecs:Date.now(),p=void 0!==e.nsecs?e.nsecs:c+1;const m=f-l+(p-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||f>l)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");l=f,c=p,o=d,f+=122192928e5;const g=(1e4*(268435455&f)+p)%4294967296;u[n++]=g>>>24&255,u[n++]=g>>>16&255,u[n++]=g>>>8&255,u[n++]=255&g;const v=f/4294967296*1e4&268435455;u[n++]=v>>>8&255,u[n++]=255&v,u[n++]=v>>>24&15|16,u[n++]=v>>>16&255,u[n++]=d>>>8|128,u[n++]=255&d;for(let e=0;e<6;++e)u[n+e]=h[e];return t||(0,a.unsafeStringify)(u)}},7478:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(6811)),r=a(i(6932));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v3",48,r.default);t.default=s},6811:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.DNS=void 0,t.default=function(e,t,i){function n(e,n,s,o){var l;if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));const t=[];for(let i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof n&&(n=(0,a.default)(n)),16!==(null===(l=n)||void 0===l?void 0:l.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+e.length);if(c.set(n),c.set(e,n.length),c=i(c),c[6]=15&c[6]|t,c[8]=63&c[8]|128,s){o=o||0;for(let e=0;e<16;++e)s[o+e]=c[e];return s}return(0,r.unsafeStringify)(c)}try{n.name=e}catch(e){}return n.DNS=s,n.URL=o,n};var n,r=i(3621),a=(n=i(2423))&&n.__esModule?n:{default:n};const s="6ba7b810-9dad-11d1-80b4-00c04fd430c8";t.DNS=s;const o="6ba7b811-9dad-11d1-80b4-00c04fd430c8";t.URL=o},8093:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(7410)),r=s(i(7571)),a=i(3621);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,i){if(n.default.randomUUID&&!t&&!e)return n.default.randomUUID();const s=(e=e||{}).random||(e.rng||r.default)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=s[e];return t}return(0,a.unsafeStringify)(s)}},2997:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(i(6811)),r=a(i(2815));function a(e){return e&&e.__esModule?e:{default:e}}var s=(0,n.default)("v5",80,r.default);t.default=s},8636:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(7041))&&n.__esModule?n:{default:n};t.default=function(e){return"string"==typeof e&&r.default.test(e)}},2465:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=(n=i(8636))&&n.__esModule?n:{default:n};t.default=function(e){if(!(0,r.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}},2747:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.combineTextures=void 0;const o=a(i(5232));let l,c,u,h,d;t.combineTextures=(e,t,i)=>s(void 0,void 0,void 0,(function*(){if(!e&&!t&&!i)throw new Error("No maps supplied.");d||(l=new o.ShaderMaterial({uniforms:{tRed:{value:null},activeRed:{value:!1},defaultRed:{value:1},tGreen:{value:null},activeGreen:{value:!1},defaultGreen:{value:1},tBlue:{value:null},activeBlue:{value:!1},defaultBlue:{value:1}},vertexShader:"// @author Michael Oppitz \n    \n        uniform sampler2D tRed;\n        uniform bool activeRed;\n        uniform float defaultRed;\n        \n        uniform sampler2D tGreen;\t\t\n        uniform bool activeGreen;\n        uniform float defaultGreen;\n        \n        uniform sampler2D tBlue;\t\t\n        uniform bool activeBlue;\n        uniform float defaultBlue;\n    \n        varying vec2 vUv;\n        \n        void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"// @author Michael Oppitz \n    \n        uniform sampler2D tRed;\n        uniform bool activeRed;\n        uniform float defaultRed;\n        \n        uniform sampler2D tGreen;\t\t\n        uniform bool activeGreen;\n        uniform float defaultGreen;\n        \n        uniform sampler2D tBlue;\t\t\n        uniform bool activeBlue;\n        uniform float defaultBlue;\n        \n        varying vec2 vUv;\n        \n        void main() {\n            vec4 outColor = vec4(0.0, 0.0, 0.0, 1.0);\n    \n            if(activeRed == true) {\n                outColor.r = texture2D(tRed, vUv).r;\n            } else {\n                outColor.r = defaultRed;\n            }\n        \n            if(activeGreen == true) {\n                outColor.g = texture2D(tGreen, vUv).g;\n            } else {\n                outColor.g = defaultGreen;\n            }\n        \n            if(activeBlue == true) {\n                outColor.b = texture2D(tBlue, vUv).b;\n            } else {\n                outColor.b = defaultBlue;\n            }\n        \n            gl_FragColor = outColor;\n        }"}),c=new o.OrthographicCamera(-1,1,1,-1,0,1),u=new o.Scene,h=new o.Mesh(new o.PlaneGeometry(2,2),l),u.add(h),d=new o.WebGLRenderer);let n=0,r=0;const a=[e,t,i];for(const e of a)if(e)if(0===n&&0===r)n=e.width,r=e.height;else if(e.width!==n&&e.height!==r)throw new Error("Maps have different sizes. Combining not supported.");if(e){const t=new o.Texture(e);t.needsUpdate=!0,l.uniforms.tRed.value=t,l.uniforms.activeRed.value=!0}else l.uniforms.activeRed.value=!1;if(t){const e=new o.Texture(t);e.needsUpdate=!0,l.uniforms.tGreen.value=e,l.uniforms.activeGreen.value=!0}else l.uniforms.activeGreen.value=!1;if(i){const e=new o.Texture(i);e.needsUpdate=!0,l.uniforms.tBlue.value=e,l.uniforms.activeBlue.value=!0}else l.uniforms.activeBlue.value=!1;const s=new o.WebGLRenderTarget(n,r,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat});s.texture.name="target.rt",d.setRenderTarget(s),d.render(u,c);const f=new Uint8ClampedArray(4*n*r);d.readRenderTargetPixels(s,0,0,n,r,f);const p=new ImageData(f,n,r),m=document.createElement("canvas"),g=m.getContext("2d");m.width=p.width,m.height=p.height,g.putImageData(p,0,0);const v=new Image,b=new Promise(((e,t)=>{v.onload=()=>e(),v.onerror=t}));return v.crossOrigin="anonymous",v.src=m.toDataURL("image/jpeg",1),yield b,{image:v,blob:new Blob([f])}}))},7484:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},p=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationData=void 0;const m=i(3858),g=i(887),v=i(5108);class b extends m.AbstractTreeNodeData{constructor(e,t,i,p,m,g){super(m,g),n.set(this,!1),r.set(this,0),a.set(this,void 0),s.set(this,void 0),o.set(this,!1),l.set(this,void 0),c.set(this,!1),u.set(this,void 0),h.set(this,!0),d.set(this,[]),f(this,s,e,"f"),f(this,u,t,"f"),f(this,l,i,"f"),f(this,a,p,"f")}get animate(){return p(this,n,"f")}get animationTime(){return p(this,r,"f")}set animationTime(e){f(this,r,e,"f")}get duration(){return p(this,a,"f")}get name(){return p(this,s,"f")}get repeat(){return p(this,o,"f")}set repeat(e){f(this,o,e,"f")}get reset(){return p(this,h,"f")}set reset(e){f(this,h,e,"f")}get start(){return p(this,l,"f")}get tracks(){return p(this,u,"f")}set tracks(e){f(this,u,e,"f")}clone(){return new b(this.name,p(this,u,"f"),this.start,this.duration,this.id,this.version)}continueAnimation(){p(this,c,"f")&&f(this,n,!0,"f")}pauseAnimation(){p(this,c,"f")&&f(this,n,!1,"f")}startAnimation(){f(this,r,0,"f"),f(this,n,!0,"f"),f(this,c,!0,"f"),f(this,d,[],"f");for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e];if(p(this,d,"f").includes(t.node.id))continue;p(this,d,"f").push(t.node.id);const i=t.node.transformations.find((e=>"gltf_matrix"===e.id));if(i)t.previousMatrix={id:i.id,matrix:g.mat4.clone(i.matrix)},i.matrix=g.mat4.create();else switch(t.path){case"scale":const e=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(e){t.previousMatrix={id:e.id,matrix:g.mat4.clone(e.matrix)};continue}break;case"rotation":const i=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));if(i){t.previousMatrix={id:i.id,matrix:g.mat4.clone(i.matrix)};continue}break;case"translation":const n=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));if(n){t.previousMatrix={id:n.id,matrix:g.mat4.clone(n.matrix)};continue}}}}stopAnimation(){if(this.reset)for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e],i=this.id+"_"+e,n=t.node.transformations.filter((e=>e.id===i));if(t.node.transformations=t.node.transformations.filter((e=>!n.includes(e))),t.previousMatrix){if("gltf_matrix"===t.previousMatrix.id){t.node.transformations.find((e=>"gltf_matrix"===e.id)).matrix=t.previousMatrix.matrix,t.node.transformations.find((e=>"gltf_matrix_translation"===e.id)).matrix=g.mat4.create(),t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id)).matrix=g.mat4.create(),t.node.transformations.find((e=>"gltf_matrix_scale"===e.id)).matrix=g.mat4.create();continue}switch(t.path){case"scale":t.node.transformations.find((e=>"gltf_matrix_scale"===e.id)).matrix=t.previousMatrix.matrix;continue;case"rotation":t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id)).matrix=t.previousMatrix.matrix;continue;case"translation":t.node.transformations.find((e=>"gltf_matrix_translation"===e.id)).matrix=t.previousMatrix.matrix;continue}}else if(!p(this,d,"f").includes(t.node.id)){const e=t.node.transformations.find((e=>"gltf_matrix"===e.id));if(e)e.matrix=g.mat4.create();else{const e=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));e&&(e.matrix=g.mat4.create());const i=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));i&&(i.matrix=g.mat4.create());const n=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));n&&(n.matrix=g.mat4.create())}}}else for(let e=0;e<p(this,u,"f").length;e++){const t=p(this,u,"f")[e],i=this.id+"_"+e,n=t.node.transformations.filter((e=>e.id===i));t.node.transformations=t.node.transformations.filter((e=>!n.includes(e)));const r=t.times.length-1;let a=t.node.transformations.find((e=>"gltf_matrix_translation"===e.id));a||(a={id:"gltf_matrix_translation",matrix:g.mat4.create()},t.node.transformations.push(a));let s=t.node.transformations.find((e=>"gltf_matrix_rotation"===e.id));s||(s={id:"gltf_matrix_rotation",matrix:g.mat4.create()},t.node.transformations.push(s));let o=t.node.transformations.find((e=>"gltf_matrix_scale"===e.id));if(o||(o={id:"gltf_matrix_scale",matrix:g.mat4.create()},t.node.transformations.push(o)),"rotation"===t.path){let e,i;t.pivot&&(e=g.mat4.fromTranslation(g.mat4.create(),g.vec3.fromValues(t.pivot[0],t.pivot[1],t.pivot[2])),i=g.mat4.fromTranslation(g.mat4.create(),g.vec3.fromValues(-t.pivot[0],-t.pivot[1],-t.pivot[2])));let n=g.quat.fromValues(t.values[4*r+0],t.values[4*r+1],t.values[4*r+2],t.values[4*r+3]);const a=g.mat4.fromQuat(g.mat4.create(),n);s.matrix=e&&i?g.mat4.multiply(g.mat4.create(),g.mat4.multiply(g.mat4.create(),e,a),i):a}else if("translation"===t.path){let e=g.vec3.fromValues(t.values[3*r+0],t.values[3*r+1],t.values[3*r+2]);a.matrix=g.mat4.fromTranslation(g.mat4.create(),e)}else if("scale"===t.path){let e=g.vec3.fromValues(t.values[3*r+0],t.values[3*r+1],t.values[3*r+2]);o.matrix=g.mat4.fromScaling(g.mat4.create(),e)}else if("weights"===t.path){let e=[];const i=t.values.length/t.times.length;for(let n=0;n<i;n++)e.push(t.values[r*i+n]);const n=t=>{for(let n=0;n<t.data.length;n++)t.data[n]instanceof v.GeometryData&&t.data[n].morphWeights.length===i&&(t.data[n].morphWeights=e);for(let e=0;e<t.children.length;e++)n(t.children[e])};n(t.node)}}f(this,r,-1,"f"),f(this,c,!1,"f"),f(this,n,!1,"f")}}t.AnimationData=b,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap},1676:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoneData=void 0;const n=i(3858);class r extends n.AbstractTreeNodeData{constructor(e,t){super(e,t)}clone(){return new r(this.id,this.version)}}t.BoneData=r},4725:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.CustomData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,void 0),r(this,n,e,"f")}get data(){return a(this,n,"f")}set data(e){r(this,n,e,"f")}clone(){return new o(Object.assign({},this.data),this.id,this.version)}}t.CustomData=o,n=new WeakMap},5108:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E,w,S,T,x,M,R,P,C,D,O,k=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},I=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryData=t.PrimitiveData=t.AttributeData=void 0;const N=i(887),L=i(3858),U=i(5174),B=i(339);class F extends L.AbstractTreeNodeData{constructor(e,t,i,b,_,y,A,E=[],w=[],S,T,x,M,R,P=[],C,D){super(C,D),n.set(this,void 0),r.set(this,void 0),a.set(this,void 0),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),c.set(this,void 0),u.set(this,[]),h.set(this,[]),d.set(this,[]),f.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),v.set(this,void 0),k(this,n,e,"f"),k(this,c,t,"f"),k(this,l,i,"f"),k(this,r,b,"f"),k(this,o,_,"f"),k(this,f,y,"f"),k(this,s,A,"f"),k(this,h,E,"f"),k(this,u,w,"f"),k(this,a,S,"f"),k(this,v,T,"f"),k(this,p,x,"f"),k(this,m,M,"f"),k(this,g,R,"f"),k(this,d,P,"f")}get array(){return I(this,n,"f")}get byteOffset(){return I(this,r,"f")}get byteStride(){return I(this,a,"f")}get count(){return I(this,s,"f")}get elementBytes(){return I(this,o,"f")}get itemBytes(){return I(this,l,"f")}get itemSize(){return I(this,c,"f")}get max(){return I(this,u,"f")}get min(){return I(this,h,"f")}get morphAttributeData(){return I(this,d,"f")}get normalized(){return I(this,f,"f")}get sparse(){return I(this,p,"f")}get sparseIndices(){return I(this,m,"f")}get sparseValues(){return I(this,g,"f")}get target(){return I(this,v,"f")}clone(){return new F(I(this,n,"f"),I(this,c,"f"),I(this,l,"f"),I(this,r,"f"),I(this,o,"f"),I(this,f,"f"),I(this,s,"f"),I(this,h,"f"),I(this,u,"f"),I(this,a,"f"),I(this,v,"f"),I(this,p,"f"),I(this,m,"f"),I(this,g,"f"),I(this,d,"f"),this.id,this.version)}}t.AttributeData=F,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap;class G extends L.AbstractTreeNodeData{constructor(e={},t=null,i,n){super(i,n),b.set(this,{}),_.set(this,[]),y.set(this,null),A.set(this,{}),k(this,b,e,"f"),k(this,y,t,"f")}get attributes(){return I(this,b,"f")}get boundingBox(){return this.computeBoundingBox(N.mat4.create())}get indices(){return I(this,y,"f")}set indices(e){k(this,y,e,"f")}get threeJsObject(){return I(this,A,"f")}clone(){let e={};for(let t in I(this,b,"f"))e[t]=I(this,b,"f")[t].clone();return new G(e,I(this,y,"f"),this.id,this.version)}computeBoundingBox(e){const t=I(this,_,"f").find((t=>N.mat4.equals(e,t.matrix)));if(t)return t.boundingBox;if(I(this,b,"f").POSITION){if(3===I(this,b,"f").POSITION.min.length&&3===I(this,b,"f").POSITION.max.length&&N.mat4.equals(e,N.mat4.create())){const t=new U.Box(N.vec3.fromValues(I(this,b,"f").POSITION.min[0],I(this,b,"f").POSITION.min[1],I(this,b,"f").POSITION.min[2]),N.vec3.fromValues(I(this,b,"f").POSITION.max[0],I(this,b,"f").POSITION.max[1],I(this,b,"f").POSITION.max[2]));return I(this,_,"f").push({boundingBox:t,matrix:N.mat4.clone(e)}),t}if(!N.mat4.equals(e,N.mat4.create())){if(N.quat.equals(N.mat4.getRotation(N.quat.create(),e),N.quat.create())){const t=this.computeBoundingBox(N.mat4.create()).clone().applyMatrix(e);return I(this,_,"f").push({boundingBox:t,matrix:N.mat4.clone(e)}),t}{const t=new U.Box;return t.setFromAttributeArray(I(this,b,"f").POSITION.array,I(this,b,"f").POSITION.byteStride,I(this,b,"f").POSITION.itemBytes,e),I(this,_,"f").push({boundingBox:t,matrix:N.mat4.clone(e)}),t}}{const t=new U.Box;t.setFromAttributeArray(I(this,b,"f").POSITION.array,I(this,b,"f").POSITION.byteStride,I(this,b,"f").POSITION.itemBytes),I(this,_,"f").push({boundingBox:t,matrix:N.mat4.clone(e)})}}return new U.Box}}t.PrimitiveData=G,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap;class V extends L.AbstractTreeNodeData{constructor(e,t=B.PRIMITIVE_MODE.TRIANGLES,i=null,n=[],r=null,a,s){super(a,s),E.set(this,B.PRIMITIVE_MODE.TRIANGLES),w.set(this,void 0),S.set(this,null),T.set(this,new U.Box),x.set(this,[]),M.set(this,null),R.set(this,[]),P.set(this,[]),C.set(this,0),D.set(this,null),O.set(this,{}),k(this,w,e,"f"),k(this,T,this.primitive.boundingBox.clone(),"f"),k(this,P,n,"f"),k(this,E,t,"f"),k(this,M,i,"f"),k(this,D,i,"f"),k(this,S,r,"f")}get attributeMaterial(){return I(this,S,"f")}set attributeMaterial(e){k(this,S,e,"f")}get boundingBox(){return I(this,T,"f")}get effectMaterials(){return I(this,x,"f")}get material(){return I(this,M,"f")}set material(e){k(this,M,e,"f")}get materialVariants(){return I(this,R,"f")}get mode(){return I(this,E,"f")}get morphWeights(){return I(this,P,"f")}set morphWeights(e){k(this,P,e,"f")}get primitive(){return I(this,w,"f")}get renderOrder(){return I(this,C,"f")}set renderOrder(e){k(this,C,e,"f")}get standardMaterial(){return I(this,D,"f")}set standardMaterial(e){k(this,D,e,"f")}get threeJsObject(){return I(this,O,"f")}clone(){return new V(I(this,w,"f"),I(this,E,"f"),I(this,M,"f"),I(this,P,"f"),I(this,S,"f"))}intersect(e,t){return this.mode!==B.PRIMITIVE_MODE.TRIANGLES?null:this.boundingBox.intersect(e,t)}}t.GeometryData=V,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap,R=new WeakMap,P=new WeakMap,C=new WeakMap,D=new WeakMap,O=new WeakMap},5005:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},f=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorCustomData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorData=void 0;const p=i(3858);class m extends p.AbstractTreeNodeData{constructor(e){super(e.id,e.version),n.set(this,{}),r.set(this,void 0),a.set(this,void 0),s.set(this,!0),o.set(this,void 0),l.set(this,void 0),c.set(this,[]),d(this,l,e.location,"f"),d(this,r,e.data,"f"),d(this,a,e.format,"f"),d(this,s,void 0===e.hideable||e.hideable,"f"),d(this,c,e.viewports||[],"f"),d(this,o,e.intersectionTarget,"f"),this.internalHtmlElement=document.createElement("div"),this.internalHtmlElement.style.position="absolute",this.internalHtmlElement.style.whiteSpace="nowrap",this.internalHtmlElement.style.textOverflow="clip",this.internalHtmlElement.style.fontFamily='"Helvetica Neue", Helvetica, Arial, sans-serif'}get data(){return f(this,r,"f")}set data(e){d(this,r,e,"f")}get format(){return f(this,a,"f")}set format(e){d(this,a,e,"f")}get hideable(){return f(this,s,"f")}set hideable(e){d(this,s,e,"f")}get intersectionTarget(){return f(this,o,"f")}set intersectionTarget(e){d(this,o,e,"f")}get location(){return f(this,l,"f")}set location(e){d(this,l,e,"f")}get viewports(){return f(this,c,"f")}set viewports(e){d(this,c,e,"f")}createViewerHtmlElement(e){return f(this,n,"f")[e]?f(this,n,"f")[e]:this.viewports.includes(e)||0===this.viewports.length?(f(this,n,"f")[e]=this.internalHtmlElement.cloneNode(!0),this.create({anchor:this,parent:f(this,n,"f")[e]}),f(this,n,"f")[e]):null}getViewerHtmlElement(e){return f(this,n,"f")[e]?f(this,n,"f")[e]:null}update(e){let t,i;e.htmlElement.style.display="",(this.hideable&&e.hidden||!1===e.visible)&&(e.htmlElement.style.display="none"),t=this.data.position&&"right"===this.data.position.horizontal?e.container[0]-e.htmlElement.offsetWidth:this.data.position&&"left"===this.data.position.horizontal?e.container[0]:e.container[0]-e.htmlElement.offsetWidth/2,i=this.data.position&&"bottom"===this.data.position.vertical?e.container[1]-e.htmlElement.offsetHeight:this.data.position&&"top"===this.data.position.vertical?e.container[1]:e.container[1]-e.htmlElement.offsetHeight/2,t/=e.scale[0],i/=e.scale[1],e.htmlElement.style.left=t+"px",e.htmlElement.style.top=i+"px"}}t.HTMLElementAnchorData=m,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap;class g extends m{constructor(e){super({location:e.location,data:e.data,format:"text",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new g({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){var t;const i=document.createElement("span");i.style.display="none",i.style.userSelect="none",i.style.cursor="default",i.style.pointerEvents="none",i.style.color=null===(t=e.anchor.data.color)||void 0===t?void 0:t.toString(),i.innerHTML=e.anchor.data.text,i.style.display="block",i.style.textOverflow="clip",i.style.overflow="hidden",e.parent.appendChild(i),!e.anchor.data.textAlign||"right"!==e.anchor.data.textAlign&&"center"!==e.anchor.data.textAlign?i.style.textAlign="left":i.style.textAlign=e.anchor.data.textAlign}}t.HTMLElementAnchorTextData=g;class v extends m{constructor(e){super({location:e.location,data:e.data,format:"image",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new v({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){const t=document.createElement("img");t.style.userSelect="none",t.style.cursor="default",t.style.pointerEvents="none",e.parent.appendChild(t),t.src=e.anchor.data.src,e.anchor.data.height&&(t.height=e.anchor.data.height),e.anchor.data.width&&(t.width=e.anchor.data.width),e.anchor.data.alt&&(t.alt=e.anchor.data.alt)}}t.HTMLElementAnchorImageData=v;class b extends m{constructor(e){super({location:e.location,data:e.data,format:"custom",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version}),u.set(this,void 0),h.set(this,void 0),d(this,u,e.create,"f"),d(this,h,e.update,"f")}create(e){f(this,u,"f").call(this,e)}update(e){f(this,h,"f").call(this,e)}clone(){return new b({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version,create:f(this,u,"f"),update:f(this,h,"f")})}}t.HTMLElementAnchorCustomData=b,u=new WeakMap,h=new WeakMap},5329:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},w=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractMaterialData=void 0;const S=i(3858),T=i(7030);class x extends S.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,0),r.set(this,void 0),a.set(this,T.MATERIAL_ALPHA.OPAQUE),s.set(this,void 0),o.set(this,1),l.set(this,void 0),c.set(this,1),u.set(this,"#ffffff"),h.set(this,void 0),d.set(this,"#000000"),f.set(this,!1),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),v.set(this,1),b.set(this,1),_.set(this,T.MATERIAL_SHADING.SMOOTH),y.set(this,T.MATERIAL_SIDE.DOUBLE),A.set(this,{}),e&&(void 0!==e.alphaMap&&(this.alphaMap=e.alphaMap),void 0!==e.alphaCutoff&&(this.alphaCutoff=e.alphaCutoff),void 0!==e.alphaMode&&(this.alphaMode=e.alphaMode),void 0!==e.aoMap&&(this.aoMap=e.aoMap),void 0!==e.aoMapIntensity&&(this.aoMapIntensity=e.aoMapIntensity),void 0!==e.bumpMap&&(this.bumpMap=e.bumpMap),void 0!==e.bumpScale&&(this.bumpScale=e.bumpScale),void 0!==e.color&&(this.color=e.color),void 0!==e.emissiveMap&&(this.emissiveMap=e.emissiveMap),void 0!==e.emissiveness&&(this.emissiveness=e.emissiveness),void 0!==e.shading&&(this.shading=e.shading),void 0!==e.map&&(this.map=e.map),void 0!==e.name&&(this.name=e.name),void 0!==e.normalMap&&(this.normalMap=e.normalMap),void 0!==e.normalScale&&(this.normalScale=e.normalScale),void 0!==e.opacity&&(this.opacity=e.opacity),void 0!==e.side&&(this.side=e.side))}get alphaCutoff(){return E(this,n,"f")}set alphaCutoff(e){w(this,n,e,"f")}get alphaMap(){return E(this,r,"f")}set alphaMap(e){w(this,r,e,"f")}get alphaMode(){return E(this,a,"f")}set alphaMode(e){w(this,a,e,"f")}get aoMap(){return E(this,s,"f")}set aoMap(e){w(this,s,e,"f")}get aoMapIntensity(){return E(this,o,"f")}set aoMapIntensity(e){w(this,o,e,"f")}get bumpMap(){return E(this,l,"f")}set bumpMap(e){w(this,l,e,"f")}get bumpScale(){return E(this,c,"f")}set bumpScale(e){w(this,c,e,"f")}get color(){return E(this,u,"f")}set color(e){w(this,u,e,"f")}get emissiveMap(){return E(this,h,"f")}set emissiveMap(e){w(this,h,e,"f")}get emissiveness(){return E(this,d,"f")}set emissiveness(e){w(this,d,e,"f")}get map(){return E(this,p,"f")}set map(e){w(this,p,e,"f")}get materialOutput(){return E(this,f,"f")}set materialOutput(e){w(this,f,e,"f")}get name(){return E(this,m,"f")}set name(e){w(this,m,e,"f")}get normalMap(){return E(this,g,"f")}set normalMap(e){w(this,g,e,"f")}get normalScale(){return E(this,v,"f")}set normalScale(e){w(this,v,e,"f")}get opacity(){return E(this,b,"f")}set opacity(e){w(this,b,e,"f")}get shading(){return E(this,_,"f")}set shading(e){w(this,_,e,"f")}get side(){return E(this,y,"f")}set side(e){w(this,y,e,"f")}get threeJsObject(){return E(this,A,"f")}}t.AbstractMaterialData=x,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap},8218:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},v=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.MapData=void 0;const b=i(887),_=i(3858),y=i(6814);class A extends _.AbstractTreeNodeData{constructor(e,t,i,v){super(i,v),n.set(this,void 0),r.set(this,b.vec2.fromValues(0,0)),a.set(this,void 0),s.set(this,!0),o.set(this,void 0),l.set(this,y.TEXTURE_FILTERING.NONE),c.set(this,y.TEXTURE_FILTERING.NONE),u.set(this,b.vec2.fromValues(0,0)),h.set(this,b.vec2.fromValues(1,1)),d.set(this,0),f.set(this,void 0),p.set(this,y.TEXTURE_WRAPPING.REPEAT),m.set(this,y.TEXTURE_WRAPPING.REPEAT),g(this,o,e,"f"),g(this,n,t?t.blob:void 0,"f"),g(this,p,t&&void 0!==t.wrapS?t.wrapS:y.TEXTURE_WRAPPING.REPEAT,"f"),g(this,m,t&&void 0!==t.wrapT?t.wrapT:y.TEXTURE_WRAPPING.REPEAT,"f"),g(this,c,t&&void 0!==t.minFilter?t.minFilter:y.TEXTURE_FILTERING.NONE,"f"),g(this,l,t&&void 0!==t.magFilter?t.magFilter:y.TEXTURE_FILTERING.NONE,"f"),g(this,r,t&&void 0!==t.center?t.center:b.vec2.fromValues(0,0),"f"),g(this,a,t?t.color:void 0,"f"),g(this,u,t&&void 0!==t.offset?t.offset:b.vec2.fromValues(0,0),"f"),g(this,h,t&&void 0!==t.repeat?t.repeat:b.vec2.fromValues(1,1),"f"),g(this,d,t&&void 0!==t.rotation?t.rotation:0,"f"),g(this,f,t?t.texCoord:void 0,"f"),g(this,s,!t||void 0===t.flipY||t.flipY,"f")}get blob(){return v(this,n,"f")}set blob(e){g(this,n,e,"f")}get center(){return v(this,r,"f")}set center(e){g(this,r,e,"f")}get color(){return v(this,a,"f")}set color(e){g(this,a,e,"f")}get flipY(){return v(this,s,"f")}set flipY(e){g(this,s,e,"f")}get image(){return v(this,o,"f")}set image(e){g(this,o,e,"f")}get magFilter(){return v(this,l,"f")}set magFilter(e){g(this,l,e,"f")}get minFilter(){return v(this,c,"f")}set minFilter(e){g(this,c,e,"f")}get offset(){return v(this,u,"f")}set offset(e){g(this,u,e,"f")}get repeat(){return v(this,h,"f")}set repeat(e){g(this,h,e,"f")}get rotation(){return v(this,d,"f")}set rotation(e){g(this,d,e,"f")}get texCoord(){return v(this,f,"f")}set texCoord(e){g(this,f,e,"f")}get wrapS(){return v(this,p,"f")}set wrapS(e){g(this,p,e,"f")}get wrapT(){return v(this,m,"f")}set wrapT(e){g(this,m,e,"f")}clone(){return new A(this.image,{blob:this.blob,wrapS:this.wrapS,wrapT:this.wrapT,minFilter:this.minFilter,magFilter:this.magFilter,center:this.center,color:this.color,offset:this.offset,repeat:this.repeat,rotation:this.rotation,texCoord:this.texCoord,flipY:this.flipY},this.id,this.version)}}t.MapData=A,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap},7493:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},_=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialGemData=void 0;const y=i(5329),A=i(7030),E=i(887);class w extends y.AbstractMaterialData{constructor(e,t,i){super(e,t,i),n.set(this,2.4),r.set(this,void 0),a.set(this,1),s.set(this,"#ffffff"),o.set(this,"#ffffff"),l.set(this,E.vec3.create()),c.set(this,1),u.set(this,void 0),h.set(this,1),d.set(this,1),f.set(this,0),p.set(this,0),m.set(this,5),g.set(this,0),v.set(this,void 0),e&&(void 0!==e.refractionIndex&&(this.refractionIndex=e.refractionIndex),void 0!==e.impurityMap&&(this.impurityMap=e.impurityMap),void 0!==e.impurityScale&&(this.impurityScale=e.impurityScale),void 0!==e.colorTransferBegin&&(this.colorTransferBegin=e.colorTransferBegin),void 0!==e.colorTransferEnd&&(this.colorTransferEnd=e.colorTransferEnd),void 0!==e.center&&(this.center=e.center),void 0!==e.tracingDepth&&(this.tracingDepth=e.tracingDepth),void 0!==e.radius&&(this.radius=e.radius),void 0!==e.sphericalNormalMap&&(this.sphericalNormalMap=e.sphericalNormalMap),void 0!==e.gamma&&(this.gamma=e.gamma),void 0!==e.contrast&&(this.contrast=e.contrast),void 0!==e.brightness&&(this.brightness=e.brightness),void 0!==e.dispersion&&(this.dispersion=e.dispersion),void 0!==e.tracingOpacity&&(this.tracingOpacity=e.tracingOpacity),void 0!==e.envMap&&(this.envMap=e.envMap))}get refractionIndex(){return b(this,n,"f")}set refractionIndex(e){_(this,n,e,"f")}get impurityMap(){return b(this,r,"f")}set impurityMap(e){_(this,r,e,"f")}get impurityScale(){return b(this,a,"f")}set impurityScale(e){_(this,a,e,"f")}get colorTransferBegin(){return b(this,s,"f")}set colorTransferBegin(e){_(this,s,e,"f")}get colorTransferEnd(){return b(this,o,"f")}set colorTransferEnd(e){_(this,o,e,"f")}get center(){return b(this,l,"f")}set center(e){_(this,l,e,"f")}get tracingDepth(){return b(this,m,"f")}set tracingDepth(e){_(this,m,e,"f")}get radius(){return b(this,c,"f")}set radius(e){_(this,c,e,"f")}get sphericalNormalMap(){return b(this,u,"f")}set sphericalNormalMap(e){_(this,u,e,"f")}get gamma(){return b(this,h,"f")}set gamma(e){_(this,h,e,"f")}get contrast(){return b(this,d,"f")}set contrast(e){_(this,d,e,"f")}get brightness(){return b(this,f,"f")}set brightness(e){_(this,f,e,"f")}get dispersion(){return b(this,p,"f")}set dispersion(e){_(this,p,e,"f")}get tracingOpacity(){return b(this,g,"f")}set tracingOpacity(e){_(this,g,e,"f")}get envMap(){return b(this,v,"f")}set envMap(e){_(this,v,e,"f")}clone(){return new w({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,refractionIndex:this.refractionIndex,impurityMap:this.impurityMap,impurityScale:this.impurityScale,colorTransferBegin:this.colorTransferBegin,colorTransferEnd:this.colorTransferEnd,center:this.center,tracingDepth:this.tracingDepth,radius:this.radius,sphericalNormalMap:this.sphericalNormalMap,gamma:this.gamma,contrast:this.contrast,brightness:this.brightness,dispersion:this.dispersion,tracingOpacity:this.tracingOpacity,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.refractionIndex=this.refractionIndex,this.impurityMap=this.impurityMap,this.impurityScale=this.impurityScale,this.colorTransferBegin=this.colorTransferBegin,this.colorTransferEnd=this.colorTransferEnd,this.center=this.center,this.tracingDepth=this.tracingDepth,this.radius=this.radius,this.sphericalNormalMap=this.sphericalNormalMap,this.gamma=this.gamma,this.contrast=this.contrast,this.brightness=this.brightness,this.dispersion=this.dispersion,this.tracingOpacity=this.tracingOpacity,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=A.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=A.MATERIAL_SHADING.SMOOTH,this.side=A.MATERIAL_SIDE.DOUBLE,this.refractionIndex=2.4,this.impurityMap=void 0,this.impurityScale=1,this.colorTransferBegin="#ffffff",this.colorTransferEnd="#ffffff",this.center=E.vec3.create(),this.radius=1,this.sphericalNormalMap=void 0,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingDepth=5,this.tracingOpacity=0,this.envMap=void 0}}t.MaterialGemData=w,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap},3923:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialShadowData=void 0;const n=i(5329);class r extends n.AbstractMaterialData{constructor(e,t,i){super(e,t,i)}reset(){this.color="#000000",this.opacity=1}clone(){return new r({color:this.color,opacity:this.opacity},this.id,this.version)}copy(e){this.color=e.color,this.opacity=e.opacity}}t.MaterialShadowData=r},4015:function(e,t,i){"use strict";var n,r,a,s,o,l,c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},u=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialSpecularGlossinessData=void 0;const h=i(5329),d=i(7030);class f extends h.AbstractMaterialData{constructor(e,t,i){super(e,t,i),n.set(this,1),r.set(this,void 0),a.set(this,"#ffffff"),s.set(this,void 0),o.set(this,void 0),l.set(this,void 0),e&&(void 0!==e.glossiness&&(this.glossiness=e.glossiness),void 0!==e.specular&&(this.specular=e.specular),void 0!==e.specularGlossinessMap&&(this.specularGlossinessMap=e.specularGlossinessMap),void 0!==e.specularMap&&(this.specularMap=e.specularMap),void 0!==e.glossinessMap&&(this.glossinessMap=e.glossinessMap),void 0!==e.envMap&&(this.envMap=e.envMap))}get envMap(){return c(this,l,"f")}set envMap(e){u(this,l,e,"f")}get glossiness(){return c(this,n,"f")}set glossiness(e){u(this,n,e,"f")}get glossinessMap(){return c(this,r,"f")}set glossinessMap(e){u(this,r,e,"f")}get specular(){return c(this,a,"f")}set specular(e){u(this,a,e,"f")}get specularGlossinessMap(){return c(this,s,"f")}set specularGlossinessMap(e){u(this,s,e,"f")}get specularMap(){return c(this,o,"f")}set specularMap(e){u(this,o,e,"f")}clone(){return new f({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,specular:this.specular,specularMap:this.specularMap,specularGlossinessMap:this.specularGlossinessMap,glossiness:this.glossiness,glossinessMap:this.glossinessMap,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.glossiness=e.glossiness,this.specular=e.specular,this.specularGlossinessMap=e.specularGlossinessMap,this.specularMap=e.specularMap,this.glossinessMap=e.glossinessMap,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=d.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=d.MATERIAL_SHADING.SMOOTH,this.side=d.MATERIAL_SIDE.DOUBLE,this.glossiness=1,this.specular="#ffffff",this.specularGlossinessMap=void 0,this.specularMap=void 0,this.glossinessMap=void 0,this.envMap=void 0}}t.MaterialSpecularGlossinessData=f,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap},4439:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p,m,g,v,b,_,y,A,E,w,S,T,x,M,R,P,C,D,O,k=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},I=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialStandardData=void 0;const N=i(5329),L=i(7030);class U extends N.AbstractMaterialData{constructor(e,t,i){super(e,t,i),n.set(this,"#ffffff"),r.set(this,1/0),a.set(this,0),s.set(this,void 0),o.set(this,void 0),l.set(this,0),c.set(this,void 0),u.set(this,void 0),h.set(this,1),d.set(this,0),f.set(this,void 0),p.set(this,1.5),m.set(this,1),g.set(this,void 0),v.set(this,void 0),b.set(this,1),_.set(this,void 0),y.set(this,0),A.set(this,"#ffffff"),E.set(this,void 0),w.set(this,1),S.set(this,void 0),T.set(this,"#ffffff"),x.set(this,void 0),M.set(this,1),R.set(this,void 0),P.set(this,0),C.set(this,void 0),D.set(this,0),O.set(this,void 0),e&&(void 0!==e.metalness&&(this.metalness=e.metalness),void 0!==e.metalnessMap&&(this.metalnessMap=e.metalnessMap),void 0!==e.metalnessRoughnessMap&&(this.metalnessRoughnessMap=e.metalnessRoughnessMap),void 0!==e.roughness&&(this.roughness=e.roughness),void 0!==e.roughnessMap&&(this.roughnessMap=e.roughnessMap),void 0!==e.clearcoat&&(this.clearcoat=e.clearcoat),void 0!==e.clearcoatMap&&(this.clearcoatMap=e.clearcoatMap),void 0!==e.clearcoatNormalMap&&(this.clearcoatNormalMap=e.clearcoatNormalMap),void 0!==e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.clearcoatRoughnessMap&&(this.clearcoatRoughnessMap=e.clearcoatRoughnessMap),void 0!==e.displacementMap&&(this.displacementMap=e.displacementMap),void 0!==e.displacementScale&&(this.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(this.displacementBias=e.displacementBias),void 0!==e.ior&&(this.ior=e.ior),void 0!==e.transmission&&(this.transmission=e.transmission),void 0!==e.transmissionMap&&(this.transmissionMap=e.transmissionMap),void 0!==e.thickness&&(this.thickness=e.thickness),void 0!==e.thicknessMap&&(this.thicknessMap=e.thicknessMap),void 0!==e.attenuationDistance&&(this.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&(this.attenuationColor=e.attenuationColor),void 0!==e.sheen&&(this.sheen=e.sheen),void 0!==e.sheenColor&&(this.sheenColor=e.sheenColor),void 0!==e.sheenRoughness&&(this.sheenRoughness=e.sheenRoughness),void 0!==e.sheenColorMap&&(this.sheenColorMap=e.sheenColorMap),void 0!==e.sheenRoughnessMap&&(this.sheenRoughnessMap=e.sheenRoughnessMap),void 0!==e.specularColor&&(this.specularColor=e.specularColor),void 0!==e.specularColorMap&&(this.specularColorMap=e.specularColorMap),void 0!==e.specularIntensity&&(this.specularIntensity=e.specularIntensity),void 0!==e.specularIntensityMap&&(this.specularIntensityMap=e.specularIntensityMap),void 0!==e.envMap&&(this.envMap=e.envMap))}get attenuationColor(){return k(this,n,"f")}set attenuationColor(e){I(this,n,e,"f")}get attenuationDistance(){return k(this,r,"f")}set attenuationDistance(e){I(this,r,e,"f")}get clearcoat(){return k(this,a,"f")}set clearcoat(e){I(this,a,e,"f")}get clearcoatMap(){return k(this,s,"f")}set clearcoatMap(e){I(this,s,e,"f")}get clearcoatNormalMap(){return k(this,o,"f")}set clearcoatNormalMap(e){I(this,o,e,"f")}get clearcoatRoughness(){return k(this,l,"f")}set clearcoatRoughness(e){I(this,l,e,"f")}get clearcoatRoughnessMap(){return k(this,c,"f")}set clearcoatRoughnessMap(e){I(this,c,e,"f")}get displacementMap(){return k(this,u,"f")}set displacementMap(e){I(this,u,e,"f")}get displacementScale(){return k(this,h,"f")}set displacementScale(e){I(this,h,e,"f")}get displacementBias(){return k(this,d,"f")}set displacementBias(e){I(this,d,e,"f")}get envMap(){return k(this,f,"f")}set envMap(e){I(this,f,e,"f")}get ior(){return k(this,p,"f")}set ior(e){I(this,p,e,"f")}get metalness(){return k(this,m,"f")}set metalness(e){I(this,m,e,"f")}get metalnessMap(){return k(this,g,"f")}set metalnessMap(e){I(this,g,e,"f")}get metalnessRoughnessMap(){return k(this,v,"f")}set metalnessRoughnessMap(e){I(this,v,e,"f")}get roughness(){return k(this,b,"f")}set roughness(e){I(this,b,e,"f")}get roughnessMap(){return k(this,_,"f")}set roughnessMap(e){I(this,_,e,"f")}get sheen(){return k(this,y,"f")}set sheen(e){I(this,y,e,"f")}get sheenColor(){return k(this,A,"f")}set sheenColor(e){I(this,A,e,"f")}get sheenColorMap(){return k(this,E,"f")}set sheenColorMap(e){I(this,E,e,"f")}get sheenRoughness(){return k(this,w,"f")}set sheenRoughness(e){I(this,w,e,"f")}get sheenRoughnessMap(){return k(this,S,"f")}set sheenRoughnessMap(e){I(this,S,e,"f")}get specularColor(){return k(this,T,"f")}set specularColor(e){I(this,T,e,"f")}get specularColorMap(){return k(this,x,"f")}set specularColorMap(e){I(this,x,e,"f")}get specularIntensity(){return k(this,M,"f")}set specularIntensity(e){I(this,M,e,"f")}get specularIntensityMap(){return k(this,R,"f")}set specularIntensityMap(e){I(this,R,e,"f")}get thickness(){return k(this,P,"f")}set thickness(e){I(this,P,e,"f")}get thicknessMap(){return k(this,C,"f")}set thicknessMap(e){I(this,C,e,"f")}get transmission(){return k(this,D,"f")}set transmission(e){I(this,D,e,"f")}get transmissionMap(){return k(this,O,"f")}set transmissionMap(e){I(this,O,e,"f")}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=L.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=L.MATERIAL_SHADING.SMOOTH,this.side=L.MATERIAL_SIDE.DOUBLE,this.attenuationColor="#ffffff",this.attenuationDistance=1/0,this.clearcoat=0,this.clearcoatMap=void 0,this.clearcoatNormalMap=void 0,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=void 0,this.displacementMap=void 0,this.displacementScale=1,this.displacementBias=0,this.envMap=void 0,this.ior=1,this.metalness=0,this.metalnessMap=void 0,this.metalnessRoughnessMap=void 0,this.roughness=.5,this.roughnessMap=void 0,this.sheen=0,this.sheenColor="#ffffff",this.sheenColorMap=void 0,this.sheenRoughness=0,this.sheenRoughnessMap=void 0,this.specularColor="#ffffff",this.specularColorMap=void 0,this.specularIntensity=1,this.specularIntensityMap=void 0,this.thickness=.1,this.thicknessMap=void 0,this.transmission=0,this.transmissionMap=void 0}clone(){return new U({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,metalness:this.metalness,metalnessMap:this.metalnessMap,metalnessRoughnessMap:this.metalnessRoughnessMap,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,roughness:this.roughness,roughnessMap:this.roughnessMap,side:this.side,clearcoat:this.clearcoat,clearcoatMap:this.clearcoatMap,clearcoatNormalMap:this.clearcoatNormalMap,clearcoatRoughness:this.clearcoatRoughness,clearcoatRoughnessMap:this.clearcoatRoughnessMap,displacementMap:this.displacementMap,displacementScale:this.displacementScale,displacementBias:this.displacementBias,envMap:this.envMap,ior:this.ior,transmission:this.transmission,transmissionMap:this.transmissionMap,thickness:this.thickness,thicknessMap:this.thicknessMap,attenuationDistance:this.attenuationDistance,attenuationColor:this.attenuationColor,sheen:this.sheen,sheenColor:this.sheenColor,sheenColorMap:this.sheenColorMap,sheenRoughness:this.sheenRoughness,sheenRoughnessMap:this.sheenRoughnessMap,specularColor:this.specularColor,specularColorMap:this.specularColorMap,specularIntensity:this.specularIntensity,specularIntensityMap:this.specularIntensityMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.attenuationColor=e.attenuationColor,this.attenuationDistance=e.attenuationDistance,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.envMap=e.envMap,this.ior=e.ior,this.metalness=e.metalness,this.metalnessMap=e.metalnessMap,this.metalnessRoughnessMap=e.metalnessRoughnessMap,this.roughness=e.roughness,this.roughnessMap=e.roughnessMap,this.sheen=e.sheen,this.sheenColor=e.sheenColor,this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.specularColor=e.specularColor,this.specularColorMap=e.specularColorMap,this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap}}t.MaterialStandardData=U,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,v=new WeakMap,b=new WeakMap,_=new WeakMap,y=new WeakMap,A=new WeakMap,E=new WeakMap,w=new WeakMap,S=new WeakMap,T=new WeakMap,x=new WeakMap,M=new WeakMap,R=new WeakMap,P=new WeakMap,C=new WeakMap,D=new WeakMap,O=new WeakMap},4586:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialUnlitData=void 0;const s=i(7030),o=i(5329);class l extends o.AbstractMaterialData{constructor(e,t,i){super(e,t,i),n.set(this,void 0),e&&void 0!==e.envMap&&(this.envMap=e.envMap)}get envMap(){return r(this,n,"f")}set envMap(e){a(this,n,e,"f")}clone(){return new l({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=s.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=s.MATERIAL_SHADING.SMOOTH,this.side=s.MATERIAL_SIDE.DOUBLE,this.envMap=void 0}}t.MaterialUnlitData=l,n=new WeakMap},6006:function(e,t,i){"use strict";var n,r,a,s=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialVariantsData=void 0;const l=i(3858);class c extends l.AbstractTreeNodeData{constructor(e,t){super(e,t),n.set(this,[]),r.set(this,[]),a.set(this,void 0)}get geometryData(){return s(this,r,"f")}get variants(){return s(this,n,"f")}get variantIndex(){return s(this,a,"f")}set variantIndex(e){o(this,a,e,"f");for(let e=0;e<this.geometryData.length;e++){const t=this.geometryData[e].materialVariants.find((e=>e.variant===s(this,a,"f")));this.geometryData[e].material=t?t.material:this.geometryData[e].standardMaterial}}clone(){return new c(this.id,this.version)}}t.MaterialVariantsData=c,n=new WeakMap,r=new WeakMap,a=new WeakMap},8516:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFAttributesData=t.SDTFAttributeData=void 0;const c=i(3858);t.SDTFAttributeData=class{constructor(e,t){n.set(this,void 0),r.set(this,void 0),a.set(this,void 0),o(this,n,e,"f"),o(this,r,t,"f")}get typeHint(){return l(this,n,"f")}get value(){return l(this,r,"f")instanceof Function&&!l(this,a,"f")?(o(this,a,l(this,r,"f").call(this),"f"),l(this,a,"f")):l(this,r,"f")instanceof Function?l(this,a,"f"):l(this,r,"f")}},n=new WeakMap,r=new WeakMap,a=new WeakMap;class u extends c.AbstractTreeNodeData{constructor(e={},t,i){super(t,i),s.set(this,{}),o(this,s,e,"f")}get attributes(){return l(this,s,"f")}clone(){return new u(this.attributes,this.id,this.version)}}t.SDTFAttributesData=u,s=new WeakMap},2904:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFItemData=void 0;const c=i(3858);class u extends c.AbstractTreeNodeData{constructor(e,t,i,l,c){super(l,c),n.set(this,void 0),r.set(this,void 0),a.set(this,{}),s.set(this,void 0),o(this,a,i,"f"),o(this,n,e,"f"),o(this,r,t,"f")}get attributes(){return l(this,a,"f")}get typeHint(){return l(this,n,"f")}get value(){return l(this,r,"f")instanceof Function&&!l(this,s,"f")?(o(this,s,l(this,r,"f").call(this),"f"),l(this,s,"f")):l(this,r,"f")instanceof Function?l(this,s,"f"):l(this,r,"f")}clone(){return new u(this.typeHint,this.value,this.attributes,this.id,this.version)}}t.SDTFItemData=u,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},1763:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFOverviewData=void 0;const s=i(3858),o=i(9116);class l extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,{}),r(this,n,e,"f")}get overview(){return a(this,n,"f")}clone(){return new l(a(this,n,"f"),this.id,this.version)}merge(e){var t;for(let i in e.overview)for(let n=0;n<e.overview[i].length;n++){const r=e.overview[i][n],a=this.overview[i]?this.overview[i].filter((e=>e.typeHint===r.typeHint)):[];if(this.overview[i]&&a.length>0){const e=a[0];e.count++,o.SdtfPrimitiveTypeGuard.isStringType(r.typeHint)&&(e.values=null===(t=e.values)||void 0===t?void 0:t.concat(r.values.filter((t=>e.values.indexOf(t)<0)))),o.SdtfPrimitiveTypeGuard.isNumberType(r.typeHint)&&(e.min=Math.min(r.min,e.min),e.max=Math.max(r.max,e.max))}else this.overview[i]?this.overview[i].push({typeHint:r.typeHint,count:r.count,values:r.values,min:r.min,max:r.max}):this.overview[i]=[{typeHint:r.typeHint,count:r.count,values:r.values,min:r.min,max:r.max}]}}}t.SDTFOverviewData=l,n=new WeakMap},7038:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfPrimitiveTypeGuard=t.SDTF_TYPEHINT=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.TASK_TYPE=t.BoneData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.PRIMITIVE_MODE=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialShadowData=t.MaterialUnlitData=t.AbstractMaterialData=t.MaterialStandardData=void 0;const n=i(4725);Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return n.CustomData}});const r=i(5108);Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return r.AttributeData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return r.GeometryData}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return r.PrimitiveData}});const a=i(4439);Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return a.MaterialStandardData}});const s=i(5005);Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return s.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return s.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return s.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return s.HTMLElementAnchorTextData}});const o=i(2904);Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return o.SDTFItemData}});const l=i(7484);Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return l.AnimationData}});const c=i(9329);Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return c.TASK_TYPE}});const u=i(6006);Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return u.MaterialVariantsData}});const h=i(8218);Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return h.MapData}});const d=i(4015);Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return d.MaterialSpecularGlossinessData}});const f=i(4586);Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return f.MaterialUnlitData}});const p=i(7030);Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return p.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return p.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return p.MATERIAL_SIDE}});const m=i(339);Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return m.PRIMITIVE_MODE}});const g=i(6814);Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return g.TEXTURE_WRAPPING}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return g.TEXTURE_FILTERING}});const v=i(5329);Object.defineProperty(t,"AbstractMaterialData",{enumerable:!0,get:function(){return v.AbstractMaterialData}});const b=i(8516);Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return b.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return b.SDTFAttributesData}});const _=i(1763);Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return _.SDTFOverviewData}});const y=i(1676);Object.defineProperty(t,"BoneData",{enumerable:!0,get:function(){return y.BoneData}});const A=i(4767);Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return A.SdtfTypeHintName}});const E=i(9116);Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return E.SdtfPrimitiveTypeGuard}});const w=i(7493);Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return w.MaterialGemData}});const S=i(3923);Object.defineProperty(t,"MaterialShadowData",{enumerable:!0,get:function(){return S.MaterialShadowData}})},339:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMITIVE_MODE=void 0,(i=t.PRIMITIVE_MODE||(t.PRIMITIVE_MODE={}))[i.POINTS=0]="POINTS",i[i.LINES=1]="LINES",i[i.LINE_LOOP=2]="LINE_LOOP",i[i.LINE_STRIP=3]="LINE_STRIP",i[i.TRIANGLES=4]="TRIANGLES",i[i.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",i[i.TRIANGLE_FAN=6]="TRIANGLE_FAN"},6814:(e,t)=>{"use strict";var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=void 0,(n=t.TEXTURE_WRAPPING||(t.TEXTURE_WRAPPING={}))[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",(i=t.TEXTURE_FILTERING||(t.TEXTURE_FILTERING={}))[i.NONE=0]="NONE",i[i.NEAREST=9728]="NEAREST",i[i.LINEAR=9729]="LINEAR",i[i.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",i[i.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",i[i.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",i[i.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"},7030:(e,t)=>{"use strict";var i,n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=void 0,(r=t.MATERIAL_SIDE||(t.MATERIAL_SIDE={})).DOUBLE="double",r.FRONT="front",r.BACK="back",(n=t.MATERIAL_ALPHA||(t.MATERIAL_ALPHA={})).OPAQUE="opaque",n.MASK="mask",n.BLEND="blend",(i=t.MATERIAL_SHADING||(t.MATERIAL_SHADING={})).FLAT="flat",i.SMOOTH="smooth"},9329:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TASK_TYPE=void 0,(i=t.TASK_TYPE||(t.TASK_TYPE={})).AR_LOADING="ar_loading",i.ENVIRONMENT_MAP_LOADING="environment_map_loading",i.CUSTOM_CONTENT_LOADING="custom_content_loading",i.GLTF_CREATION="gltf_creation",i.GLTF_CONTENT_LOADING="gltf_content_loading",i.MATERIAL_CONTENT_LOADING="material_content_loading",i.TAG_CONTENT_LOADING="tag_content_loading",i.SDTF_CONTENT_LOADING="sdtf_content_loading",i.SESSION_CUSTOMIZATION="session_customization",i.SESSION_CREATION="session_creation",i.SESSION_OUTPUTS_UPDATE="session_outputs_update",i.SESSION_OUTPUTS_LOADING="session_outputs_loading",i.VIEWPORT_CREATION="viewer_creation",i.EXPORT_REQUEST="export_request"},16:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendMimeTypes=t.mapMimeTypeToFileEndings=t.guessMimeTypeFromFilename=t.extensionToMimeTypeMapping=void 0,t.extensionToMimeTypeMapping={svg:["image/svg+xml"],svgz:["image/svg+xml"],jpg:["image/jpeg"],jpeg:["image/jpeg"],png:["image/png"],gif:["image/gif"],bmp:["image/bmp"],tif:["image/tif"],tiff:["image/tiff"],gltf:["gltf+json","model/gltf-binary"],glb:["application/octet-stream","model/gltf-binary"],bin:["application/octet-stream","application/gltf-buffer"],"3dm":["model/vnd.3dm","application/3dm","x-world/x-3dmf"],"3ds":["application/x-3ds","image/x-3ds","application/3ds"],fbx:["application/fbx"],dxf:["application/dxf","application/x-autocad","application/x-dxf","drawing/x-dxf","image/vnd.dxf","image/x-autocad","image/x-dxf","zz-application/zz-winassoc-dxf"],dwg:["application/dwg"],pdf:["application/pdf"],"3mf":["model/3mf"],stl:["model/stl","application/sla"],amf:["application/amf"],ai:["application/ai"],dgn:["application/dgn"],ply:["application/ply"],ps:["application/postscript"],eps:["application/postscript"],skp:["application/skp"],slc:["application/slc"],sldprt:["application/sldprt"],sldasm:["application/sldasm"],stp:["application/step"],step:["application/step"],vda:["application/vda"],gdf:["application/gdf"],vrml:["model/vrml","model/x3d-vrml"],wrl:["model/vrml","model/x3d-vrml"],vi:["model/vrml","model/x3d-vrml"],igs:["model/iges","application/iges"],iges:["model/iges","application/iges"],obj:["model/obj","application/wavefront-obj"],off:["application/off"],txt:["text/plain"],mtl:["text/plain"],g:["text/plain"],gcode:["text/plain"],glsl:["text/plain"],csv:["text/csv","application/vnd.ms-excel"],xls:["application/vnd.ms-excel"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],xml:["application/xml","text/xml"],json:["application/json"],ifc:["application/x-step"],ifcxml:["application/xml"],ifczip:["application/zip"],sdtf:["model/vnd.sdtf"],sddtf:["model/vnd.sdtf"],hdr:["image/vnd.radiance"]},t.guessMimeTypeFromFilename=e=>{const i=e.split(".");if(!(i.length>0))return[];const n=i[i.length-1];return Object.keys(t.extensionToMimeTypeMapping).includes(n)?t.extensionToMimeTypeMapping[n]:[]},t.mapMimeTypeToFileEndings=e=>{const i=[];for(let n=0;n<e.length;n++){const r=Object.keys(t.extensionToMimeTypeMapping).find((i=>t.extensionToMimeTypeMapping[i].includes(e[n])));r&&i.push("."+r)}return i},t.extendMimeTypes=e=>{let i=e;return(0,t.mapMimeTypeToFileEndings)(i).forEach((e=>i=i.concat((0,t.guessMimeTypeFromFilename)(e)))),i=i.filter((function(e,t){return i.indexOf(e)==t})),i}},3253:function(e,t,i){"use strict";var n,r,a,s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ExportApi=void 0;const c=i(8877);t.ExportApi=class{constructor(e){n.set(this,c.InputValidator.instance),r.set(this,c.Logger.instance),a.set(this,void 0),o(this,a,e,"f")}get content(){return l(this,a,"f").content}get delay(){return l(this,a,"f").delay}get dependency(){return l(this,a,"f").dependency}get displayname(){return l(this,a,"f").displayname}set displayname(e){const t="displayname";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"string",!1),l(this,a,"f").displayname=e,l(this,r,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").displayname}.`)}get filename(){return l(this,a,"f").filename}get group(){return l(this,a,"f").group}get hidden(){return l(this,a,"f").hidden}set hidden(e){const t="hidden";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"boolean"),l(this,a,"f").hidden=e,l(this,r,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").hidden}.`)}get id(){return l(this,a,"f").id}get maxWaitTime(){return l(this,a,"f").maxWaitTime}set maxWaitTime(e){const t="maxWaitTime";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"number"),l(this,a,"f").maxWaitTime=e,l(this,r,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").maxWaitTime}.`)}get msg(){return l(this,a,"f").msg}get name(){return l(this,a,"f").name}get order(){return l(this,a,"f").order}set order(e){const t="order";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"number",!1),l(this,a,"f").order=e,l(this,r,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").order}.`)}get result(){return l(this,a,"f").result}get status_collect(){return l(this,a,"f").status_collect}get status_computation(){return l(this,a,"f").status_computation}get tooltip(){return l(this,a,"f").tooltip}set tooltip(e){const t="tooltip";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"string",!1),l(this,a,"f").tooltip=e,l(this,r,"f").debug(`ExportApi.${t}: ${t} was updated to ${l(this,a,"f").tooltip}.`)}get type(){return l(this,a,"f").type}get uid(){return l(this,a,"f").uid}get version(){return l(this,a,"f").version}request(e={}){return s(this,void 0,void 0,(function*(){const t="request";l(this,n,"f").validateAndError(`ExportApi.${t}`,e,"object");for(let i in e)l(this,n,"f").validateAndError(`ExportApi.${t}`,e[i],"string");return l(this,a,"f").request(e)}))}updateExport(){l(this,a,"f").updateExport()}},n=new WeakMap,r=new WeakMap,a=new WeakMap},9949:function(e,t,i){"use strict";var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},s=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.FileParameterApi=void 0;const o=i(2147),l=i(8877);class c extends o.ParameterApi{constructor(e){super(e),n.set(this,void 0),r.set(this,l.Logger.instance),a(this,n,e,"f")}upload(){return s(this,n,"f").upload()}}t.FileParameterApi=c,n=new WeakMap,r=new WeakMap},3740:function(e,t,i){"use strict";var n,r,a,s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputApi=void 0;const c=i(8877),u=i(9252);t.OutputApi=class{constructor(e){n.set(this,c.InputValidator.instance),r.set(this,c.Logger.instance),a.set(this,void 0),o(this,a,e,"f"),l(this,a,"f").updateCallback=(e,t)=>{e&&-1===e.data.findIndex((e=>e instanceof u.OutputApiData))&&e.addData(new u.OutputApiData(this))},l(this,a,"f").updateCallback(this.node)}get bbmax(){return l(this,a,"f").bbmax}get bbmin(){return l(this,a,"f").bbmin}get chunks(){return l(this,a,"f").chunks}get content(){return l(this,a,"f").content}get delay(){return l(this,a,"f").delay}get dependency(){return l(this,a,"f").dependency}get displayname(){return l(this,a,"f").displayname}set displayname(e){const t="displayname";l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"string",!1),l(this,a,"f").displayname=e,l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").displayname}.`)}get format(){return l(this,a,"f").format}get freeze(){return l(this,a,"f").freeze}set freeze(e){const t="freeze";l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"boolean"),l(this,a,"f").freeze=e,l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").freeze}.`)}get hidden(){return l(this,a,"f").hidden}set hidden(e){const t="hidden";l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"boolean"),l(this,a,"f").hidden=e,l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").hidden}.`)}get id(){return l(this,a,"f").id}get material(){return l(this,a,"f").material}get msg(){return l(this,a,"f").msg}get name(){return l(this,a,"f").name}get node(){return l(this,a,"f").node}get order(){return l(this,a,"f").order}set order(e){const t="order";l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"number",!1),l(this,a,"f").order=e,l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").order}.`)}get status_collect(){return l(this,a,"f").status_collect}get status_computation(){return l(this,a,"f").status_computation}get tooltip(){return l(this,a,"f").tooltip}set tooltip(e){const t="tooltip";l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"string",!1),l(this,a,"f").tooltip=e,l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${l(this,a,"f").tooltip}.`)}get uid(){return l(this,a,"f").uid}get updateCallback(){return l(this,a,"f").updateCallback}set updateCallback(e){const t="updateCallback";e&&l(this,n,"f").validateAndError(`OutputApi.${t}`,e,"function",!1),l(this,a,"f").updateCallback=(t,i)=>s(this,void 0,void 0,(function*(){t&&-1===t.data.findIndex((e=>e instanceof u.OutputApiData))&&t.addData(new u.OutputApiData(this)),e&&(yield Promise.resolve(e(t,i)))})),l(this,r,"f").debug(`OutputApi.${t}: ${t} was updated to ${e}.`)}get version(){return l(this,a,"f").version}updateOutputContent(e,t=!1){return s(this,void 0,void 0,(function*(){const i="updateOutputContent";return l(this,n,"f").validateAndError(`OutputApi.${i}`,e,"array"),l(this,n,"f").validateAndError(`OutputApi.${i}`,t,"boolean"),l(this,a,"f").updateOutputContent(e,t)}))}},n=new WeakMap,r=new WeakMap,a=new WeakMap},2147:function(e,t,i){"use strict";var n,r,a,s=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},o=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ParameterApi=void 0;const l=i(8877);t.ParameterApi=class{constructor(e){n.set(this,l.InputValidator.instance),r.set(this,l.Logger.instance),a.set(this,void 0),s(this,a,e,"f")}get choices(){return o(this,a,"f").choices}get decimalplaces(){return o(this,a,"f").decimalplaces}get defval(){return o(this,a,"f").defval}get displayname(){return o(this,a,"f").displayname}set displayname(e){const t="displayname";o(this,n,"f").validateAndError(`ParameterApi.${t}`,e,"string",!1),o(this,a,"f").displayname=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").displayname}.`)}get expression(){return o(this,a,"f").expression}get format(){return o(this,a,"f").format}get group(){return o(this,a,"f").group}get hidden(){return o(this,a,"f").hidden}set hidden(e){const t="hidden";o(this,n,"f").validateAndError(`ParameterApi.${t}`,e,"boolean"),o(this,a,"f").hidden=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").hidden}.`)}get id(){return o(this,a,"f").id}get max(){return o(this,a,"f").max}get min(){return o(this,a,"f").min}get name(){return o(this,a,"f").name}get order(){return o(this,a,"f").order}set order(e){const t="order";o(this,n,"f").validateAndError(`ParameterApi.${t}`,e,"number",!1),o(this,a,"f").order=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").order}.`)}get sessionValue(){return o(this,a,"f").sessionValue}set sessionValue(e){const t="sessionValue";o(this,a,"f").sessionValue=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").value}.`)}get structure(){return o(this,a,"f").structure}get tooltip(){return o(this,a,"f").tooltip}set tooltip(e){const t="tooltip";o(this,n,"f").validateAndError(`ParameterApi.${t}`,e,"string",!1),o(this,a,"f").tooltip=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").tooltip}.`)}get type(){return o(this,a,"f").type}get value(){return o(this,a,"f").value}set value(e){const t="value";this.isValid(e,!0),o(this,a,"f").value=e,o(this,r,"f").debug(`ParameterApi.${t}: ${t} was set to ${o(this,a,"f").value}.`)}get visualization(){return o(this,a,"f").visualization}isValid(e,t){if(o(this,n,"f").validateAndError("ParameterApi.isValid",t,"boolean",!1),!1===t){try{o(this,a,"f").isValid(e)}catch(e){return!1}return!0}return o(this,a,"f").isValid(e)}resetToDefaultValue(){return o(this,a,"f").resetToDefaultValue()}resetToSessionValue(){return o(this,a,"f").resetToSessionValue()}stringify(){return o(this,a,"f").stringify()}},n=new WeakMap,r=new WeakMap,a=new WeakMap},2387:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},d=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},f=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionApi=void 0;const p=i(7163),m=i(5094),g=i(9878),v=i(8877),b=i(3253),_=i(9949),y=i(3740),A=i(2147),E=i(8729);t.SessionApi=class{constructor(e){if(n.set(this,m.CreationControlCenter.instance),r.set(this,{}),a.set(this,p.GLTFConverter.instance),s.set(this,v.InputValidator.instance),o.set(this,v.Logger.instance),l.set(this,{}),c.set(this,{}),u.set(this,void 0),d(this,u,e,"f"),!f(this,u,"f").initialized)throw new v.ShapeDiverViewerSessionError("Session could not be initialized.");f(this,u,"f").updateCallback=e=>{-1===e.data.findIndex((e=>e instanceof E.SessionApiData))&&e.addData(new E.SessionApiData(this))},f(this,u,"f").updateCallback(this.node,this.node);for(const e in f(this,u,"f").outputs)f(this,l,"f")[e]=new y.OutputApi(f(this,u,"f").outputs[e]);for(const e in f(this,u,"f").exports)f(this,r,"f")[e]=new b.ExportApi(f(this,u,"f").exports[e]);for(const e in f(this,u,"f").parameters)f(this,u,"f").parameters[e]instanceof g.FileParameter?f(this,c,"f")[e]=new _.FileParameterApi(f(this,u,"f").parameters[e]):f(this,c,"f")[e]=new A.ParameterApi(f(this,u,"f").parameters[e])}get automaticSceneUpdate(){return f(this,u,"f").automaticSceneUpdate}set automaticSceneUpdate(e){const t="automaticSceneUpdate";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,u,"f").automaticSceneUpdate=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get commitParameters(){return f(this,u,"f").settingsEngine.general.commitParameters}set commitParameters(e){const t="commitParameters";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,u,"f").settingsEngine.general.commitParameters=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get commitSettings(){return f(this,u,"f").settingsEngine.general.commitSettings}set commitSettings(e){const t="commitSettings";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,u,"f").settingsEngine.general.commitSettings=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get customizeOnParameterChange(){return f(this,u,"f").customizeOnParameterChange}set customizeOnParameterChange(e){const t="customizeOnParameterChange";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"boolean"),f(this,u,"f").customizeOnParameterChange=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get excludeViewports(){return f(this,u,"f").excludeViewports}set excludeViewports(e){const t="excludeViewports";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"stringArray"),f(this,u,"f").excludeViewports=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get exports(){return f(this,r,"f")}get guid(){return f(this,u,"f").guid}get id(){return f(this,u,"f").id}get initialized(){return f(this,u,"f").initialized}get jwtToken(){return f(this,u,"f").jwtToken}get modelViewUrl(){return f(this,u,"f").modelViewUrl}get node(){return f(this,u,"f").node}get outputs(){return f(this,l,"f")}get parameters(){return f(this,c,"f")}get parameterDefaultValues(){const e={};for(const t in this.parameters)e[t]=this.parameters[t].defval;return e}get parameterSessionValues(){const e={};for(const t in this.parameters)e[t]=this.parameters[t].sessionValue;return e}get parameterValues(){const e={};for(const t in this.parameters)e[t]=this.parameters[t].value;return e}get refreshJwtToken(){return f(this,u,"f").refreshJwtToken}set refreshJwtToken(e){const t="refreshJwtToken";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"function",!1),f(this,u,"f").refreshJwtToken=e,f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}get ticket(){return f(this,u,"f").ticket}get updateCallback(){return f(this,u,"f").updateCallback}set updateCallback(e){const t="updateCallback";e&&f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"function",!1),f(this,u,"f").updateCallback=(t,i)=>h(this,void 0,void 0,(function*(){-1===t.data.findIndex((e=>e instanceof E.SessionApiData))&&t.addData(new E.SessionApiData(this)),e&&(yield Promise.resolve(e(t,i)))})),f(this,o,"f").debug(`SessionApi.${t}: ${t} was updated to ${e}.`)}applySettings(e,t){const i="applySettings";return f(this,s,"f").validateAndError(`SessionApi.${i}`,e,"object"),f(this,s,"f").validateAndError(`SessionApi.${i}`,t,"object",!1),f(this,n,"f").applySettings(this.id,e,t)}cancelCustomization(){f(this,u,"f").cancelCustomization()}canGoBack(){return f(this,u,"f").canGoBack()}canGoForward(){return f(this,u,"f").canGoForward()}close(){return h(this,void 0,void 0,(function*(){return yield f(this,n,"f").closeSessionEngine(this.id)}))}convertToGlTF(){return h(this,void 0,void 0,(function*(){for(const e in f(this,n,"f").renderingEngines)f(this,n,"f").renderingEngines[e].update("SessionApi.convertToGlTF");const e=yield f(this,a,"f").convert(this.node,!1);return new Blob([e],{type:"application/octet-stream"})}))}customize(e,t=!1,i=!1){const n="customize";if(f(this,s,"f").validateAndError(`SessionApi.${n}`,e,"object",!1),e)for(const t in e)this.parameters[t].value=e[t];return f(this,s,"f").validateAndError(`SessionApi.${n}`,t,"boolean",!1),f(this,s,"f").validateAndError(`SessionApi.${n}`,i,"boolean",!1),f(this,u,"f").customize(t,i)}customizeParallel(e){const t="customizeParallel";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"object");for(const i in e)f(this,s,"f").validateAndError(`SessionApi.${t}`,e[i],"string");return f(this,u,"f").customizeParallel(e)}customizeResult(e){const t="customizeResult";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"object");for(const i in e)f(this,s,"f").validateAndError(`SessionApi.${t}`,e[i],"string");return f(this,u,"f").customizeParallel(e,!1)}getExportById(e){return f(this,s,"f").validateAndError("SessionApi.getExportById",e,"string"),f(this,r,"f")[e]}getExportByName(e){return f(this,s,"f").validateAndError("SessionApi.getExportByName",e,"string"),Object.values(f(this,r,"f")).filter((t=>t.name===e))}getExportByType(e){return f(this,s,"f").validateAndError("SessionApi.getExportByType",e,"string"),Object.values(f(this,r,"f")).filter((t=>t.type===e))}getOutputByFormat(e){return f(this,s,"f").validateAndError("SessionApi.getOutputByFormat",e,"string"),Object.values(f(this,l,"f")).filter((t=>t.format.includes(e)))}getOutputById(e){return f(this,s,"f").validateAndError("SessionApi.getOutputById",e,"string"),f(this,l,"f")[e]}getOutputByName(e){return f(this,s,"f").validateAndError("SessionApi.getOutputByName",e,"string"),Object.values(f(this,l,"f")).filter((t=>t.name===e))}getParameterById(e){return f(this,s,"f").validateAndError("SessionApi.getParameterById",e,"string"),f(this,c,"f")[e]}getParameterByName(e){return f(this,s,"f").validateAndError("SessionApi.getParameterByName",e,"string"),Object.values(f(this,c,"f")).filter((t=>t.name===e))}getParameterByType(e){return f(this,s,"f").validateAndError("SessionApi.getParameterByType",e,"string"),Object.values(f(this,c,"f")).filter((t=>t.type===e))}goBack(){return f(this,u,"f").goBack()}goForward(){return f(this,u,"f").goForward()}loadCachedOutputs(e){return h(this,void 0,void 0,(function*(){return yield f(this,u,"f").loadCachedOutputsParallel(e)}))}requestExports(e,t){return h(this,void 0,void 0,(function*(){const i="requestExports";return f(this,s,"f").validateAndError(`SessionApi.${i}`,e,"object"),f(this,s,"f").validateAndError(`SessionApi.${i}`,t,"number",!1),f(this,u,"f").requestExports(e,t)}))}resetParameterValues(e=!1,t=!1){for(const e in this.parameters)this.parameters[e].value=this.parameters[e].defval;return f(this,s,"f").validateAndError("SessionApi.resetParameterValues",e,"boolean",!1),f(this,u,"f").customize(e,t)}resetSettings(e){return f(this,s,"f").validateAndError("SessionApi.applySettings",e,"object",!1),f(this,n,"f").resetSettings(this.id,e)}saveDefaultParameterValues(){return f(this,u,"f").saveDefaultParameterValues()}saveSettings(e){return f(this,s,"f").validateAndError("SessionApi.saveDefaultParameterValues",e,"string",!1),f(this,n,"f").saveSettings(this.id,e)}saveUiProperties(){return f(this,u,"f").saveUiProperties()}setJwtToken(e){return h(this,void 0,void 0,(function*(){const t="setJwtToken";f(this,s,"f").validateAndError(`SessionApi.${t}`,e,"string",!1),yield f(this,u,"f").setJwtToken(e),f(this,o,"f").debug(`SessionApi.${t}: ${t} was set to ${e}`)}))}updateOutputs(e=!1){return f(this,u,"f").updateOutputs(void 0,e)}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap},9252:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OutputApiData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,void 0),r(this,n,e,"f")}get api(){return a(this,n,"f")}set api(e){r(this,n,e,"f")}clone(){return new o(this.api,this.id,this.version)}}t.OutputApiData=o,n=new WeakMap},8729:function(e,t,i){"use strict";var n,r=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},a=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SessionApiData=void 0;const s=i(3858);class o extends s.AbstractTreeNodeData{constructor(e,t,i){super(t,i),n.set(this,void 0),r(this,n,e,"f")}get api(){return a(this,n,"f")}set api(e){r(this,n,e,"f")}clone(){return new o(this.api,this.id,this.version)}}t.SessionApiData=o,n=new WeakMap},1691:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PostProcessingApi=void 0;const c=i(8877),u=i(6041);t.PostProcessingApi=class{constructor(e,t){n.set(this,c.InputValidator.instance),r.set(this,c.Logger.instance),a.set(this,void 0),s.set(this,void 0),o(this,s,e,"f"),o(this,a,t,"f")}get antiAliasingTechnique(){return l(this,a,"f").postProcessingManager.antiAliasingTechnique}set antiAliasingTechnique(e){const t="antiAliasingTechnique";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"enum",!0,Object.values(u.ANTI_ALIASING_TECHNIQUE)),l(this,a,"f").postProcessingManager.antiAliasingTechnique=e,l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get antiAliasingTechniqueMobile(){return l(this,a,"f").postProcessingManager.antiAliasingTechniqueMobile}set antiAliasingTechniqueMobile(e){const t="antiAliasingTechniqueMobile";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"enum",!0,Object.values(u.ANTI_ALIASING_TECHNIQUE)),l(this,a,"f").postProcessingManager.antiAliasingTechniqueMobile=e,l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get effectComposer(){return l(this,a,"f").postProcessingManager.effectComposer}get enablePostProcessingOnMobile(){return l(this,a,"f").postProcessingManager.enablePostProcessingOnMobile}set enablePostProcessingOnMobile(e){const t="enablePostProcessingOnMobile";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"boolean"),l(this,a,"f").postProcessingManager.enablePostProcessingOnMobile=e,l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get godRaysEffects(){return l(this,a,"f").postProcessingManager.godRaysManagers}get manualPostProcessing(){return l(this,a,"f").postProcessingManager.manualPostProcessing}set manualPostProcessing(e){const t="manualPostProcessing";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"boolean"),l(this,a,"f").postProcessingManager.manualPostProcessing=e,l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get outlineEffects(){return l(this,a,"f").postProcessingManager.outlineManagers}get selectiveBloomEffects(){return l(this,a,"f").postProcessingManager.selectiveBloomManagers}get ssaaSampleLevel(){return l(this,a,"f").postProcessingManager.ssaaSampleLevel}set ssaaSampleLevel(e){const t="ssaaSampleLevel";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"number"),l(this,a,"f").postProcessingManager.ssaaSampleLevel=e,l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}addEffect(e){const t="addEffect";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"object",!1);const i=l(this,a,"f").postProcessingManager.addEffect(e);return l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was called with definition ${e}.`),l(this,s,"f").update(),i}getDefaultEffectProperties(e){const t="getDefaultEffectProperties";return l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"enum",!0,Object.values(u.POST_PROCESSING_EFFECT_TYPE)),l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was called with type ${e}.`),l(this,a,"f").postProcessingManager.getDefaultEffectProperties(e)}getEffect(e){const t="getEffect";return l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"string"),l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was called with token ${e}.`),l(this,a,"f").postProcessingManager.getEffect(e)}getEffectTokens(){return l(this,a,"f").postProcessingManager.getEffectTokens()}getPostProcessingEffectsArray(){const e="getPostProcessingEffectsArray";return l(this,r,"f").debug(`PostProcessingApi.${e}: ${e} was called.`),l(this,a,"f").postProcessingManager.getPostProcessingEffectsArray()}removeEffect(e){const t="removeEffect";l(this,n,"f").validateAndError(`PostProcessingApi.${t}`,e,"string");const i=l(this,a,"f").postProcessingManager.removeEffect(e);return l(this,r,"f").debug(`PostProcessingApi.${t}: ${t} was called with token ${e}.`),l(this,s,"f").update(),i}updateEffect(e,t){const i="updateEffect";l(this,n,"f").validateAndError(`PostProcessingApi.${i}`,e,"string"),l(this,a,"f").postProcessingManager.updateEffect(e,t),l(this,r,"f").debug(`PostProcessingApi.${i}: ${i} was called with token ${e} and definition ${t}.`),l(this,s,"f").update()}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},9766:function(e,t,i){"use strict";var n,r,a,s,o,l,c,u,h,d,f,p=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),m=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&p(t,e,i);return m(t,e),t},v=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))},b=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},_=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewportApi=void 0;const y=i(887),A=i(5094),E=i(8877),w=i(2248),S=i(1990),T=i(3612),x=i(2380),M=i(2183),R=i(7163),P=i(7849),C=i(3858),D=i(7977),O=i(3441),k=g(i(2592)),I=i(3289),N=i(1691);t.ViewportApi=class{constructor(e){n.set(this,I.AnimationEngine.instance),r.set(this,void 0),a.set(this,A.CreationControlCenter.instance),s.set(this,E.Converter.instance),o.set(this,R.GLTFConverter.instance),l.set(this,E.InputValidator.instance),c.set(this,E.Logger.instance),u.set(this,void 0),h.set(this,E.SystemInfo.instance),d.set(this,{}),f.set(this,{}),b(this,r,e,"f"),_(this,r,"f").cameraEngine.update=()=>{for(let e in _(this,r,"f").cameraEngine.cameras)_(this,d,"f")[e]||(_(this,r,"f").cameraEngine.cameras[e].type===S.CAMERA_TYPE.PERSPECTIVE?_(this,d,"f")[e]=new T.PerspectiveCameraApi(this,_(this,r,"f").cameraEngine.cameras[e]):_(this,d,"f")[e]=new x.OrthographicCameraApi(this,_(this,r,"f").cameraEngine.cameras[e]));for(let e in _(this,d,"f"))_(this,r,"f").cameraEngine.cameras[e]||delete _(this,d,"f")[e]},_(this,r,"f").cameraEngine.update(),_(this,r,"f").lightEngine.update=()=>{for(let e in _(this,r,"f").lightEngine.lightScenes)_(this,f,"f")[e]||(_(this,f,"f")[e]=new M.LightSceneApi(this,_(this,r,"f").lightEngine.lightScenes[e]));for(let e in _(this,f,"f"))_(this,r,"f").lightEngine.lightScenes[e]||delete _(this,f,"f")[e]},_(this,r,"f").lightEngine.update(),b(this,u,new N.PostProcessingApi(this,_(this,r,"f")),"f")}get animations(){return _(this,n,"f").animations}get arRotation(){return _(this,r,"f").arRotation}set arRotation(e){const t="arRotation";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),_(this,r,"f").arRotation=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arRotation")}get arScale(){return _(this,r,"f").arScale}set arScale(e){const t="arScale";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),_(this,r,"f").arScale=y.vec3.max(y.vec3.create(),e,y.vec3.fromValues(.001,.001,.001)),_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arScale")}get arTranslation(){return _(this,r,"f").arTranslation}set arTranslation(e){const t="arTranslation";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"vec3"),_(this,r,"f").arTranslation=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("arTranslation")}get automaticColorAdjustment(){return _(this,r,"f").automaticColorAdjustment}set automaticColorAdjustment(e){const t="automaticColorAdjustment";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").automaticColorAdjustment=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("automaticColorAdjustment")}get automaticResizing(){return _(this,r,"f").automaticResizing}set automaticResizing(e){const t="automaticResizing";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").automaticResizing=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("automaticResizing")}get beautyRenderBlendingDuration(){return _(this,r,"f").beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){const t="beautyRenderBlendingDuration";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").beautyRenderBlendingDuration=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("beautyRenderBlendingDuration")}get beautyRenderDelay(){return _(this,r,"f").beautyRenderDelay}set beautyRenderDelay(e){const t="beautyRenderDelay";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").beautyRenderDelay=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("beautyRenderDelay")}get camera(){return _(this,r,"f").cameraEngine.camera?_(this,d,"f")[_(this,r,"f").cameraEngine.camera.id]:null}get cameras(){return _(this,d,"f")}get canvas(){return _(this,r,"f").canvas}get clearAlpha(){return _(this,r,"f").clearAlpha}set clearAlpha(e){const t="clearAlpha";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").clearAlpha=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("clearAlpha")}get clearColor(){return _(this,r,"f").clearColor}set clearColor(e){const t="clearColor";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),_(this,r,"f").clearColor=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("clearColor")}get defaultMaterialColor(){return _(this,r,"f").defaultMaterialColor}set defaultMaterialColor(e){const t="defaultMaterialColor";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),_(this,r,"f").defaultMaterialColor=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("defaultMaterialColor")}get enableAR(){return _(this,r,"f").enableAR}set enableAR(e){const t="enableAR";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").enableAR=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("enableAR")}get environmentMap(){return _(this,r,"f").environmentMap}set environmentMap(e){const t="environmentMap";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"cubeMap"),_(this,r,"f").environmentMap=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMap")}get environmentMapAsBackground(){return _(this,r,"f").environmentMapAsBackground}set environmentMapAsBackground(e){const t="environmentMapAsBackground";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").environmentMapAsBackground=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapAsBackground")}get environmentMapBlurriness(){return _(this,r,"f").environmentMapBlurriness}set environmentMapBlurriness(e){const t="environmentMapBlurriness";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").environmentMapBlurriness=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapBlurriness")}get environmentMapIntensity(){return _(this,r,"f").environmentMapIntensity}set environmentMapIntensity(e){const t="environmentMapIntensity";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").environmentMapIntensity=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapIntensity")}get environmentMapResolution(){return _(this,r,"f").environmentMapResolution}set environmentMapResolution(e){const t="environmentMapResolution";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"string"),_(this,r,"f").environmentMapResolution=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapResolution")}get environmentMapForUnlitMaterials(){return _(this,r,"f").environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){const t="environmentMapForUnlitMaterials";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").environmentMapForUnlitMaterials=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapForUnlitMaterials")}get environmentMapRotation(){return _(this,r,"f").environmentMapRotation}set environmentMapRotation(e){const t="environmentMapRotation";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"quat"),_(this,r,"f").environmentMapRotation=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("environmentMapRotation")}get gridColor(){return _(this,r,"f").gridColor}set gridColor(e){const t="gridColor";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),_(this,r,"f").gridColor=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("gridColor")}get gridVisibility(){return _(this,r,"f").gridVisibility}set gridVisibility(e){const t="gridVisibility";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").gridVisibility=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("gridVisibility")}get groundPlaneColor(){return _(this,r,"f").groundPlaneColor}set groundPlaneColor(e){const t="groundPlaneColor";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),_(this,r,"f").groundPlaneColor=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneColor")}get groundPlaneVisibility(){return _(this,r,"f").groundPlaneVisibility}set groundPlaneVisibility(e){const t="groundPlaneVisibility";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").groundPlaneVisibility=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneVisibility")}get groundPlaneShadowColor(){return _(this,r,"f").groundPlaneShadowColor}set groundPlaneShadowColor(e){const t="groundPlaneShadowColor";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"color"),_(this,r,"f").groundPlaneShadowColor=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneShadowColor")}get groundPlaneShadowVisibility(){return _(this,r,"f").groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){const t="groundPlaneShadowVisibility";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").groundPlaneShadowVisibility=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("groundPlaneShadowVisibility")}get id(){return _(this,r,"f").id}get lights(){return _(this,r,"f").lights}set lights(e){const t="lights";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").lights=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("lights")}get lightScene(){return _(this,r,"f").lightEngine.lightScene?_(this,f,"f")[_(this,r,"f").lightEngine.lightScene.id]:null}get lightScenes(){return _(this,f,"f")}get maximumRenderingSize(){return _(this,r,"f").maximumRenderingSize}set maximumRenderingSize(e){const t="maximumRenderingSize";_(this,l,"f").validateAndError(`SessionApi.${t}`,e,"object"),_(this,l,"f").validateAndError(`SessionApi.${t}`,e.width,"number"),_(this,l,"f").validateAndError(`SessionApi.${t}`,e.height,"number"),_(this,r,"f").maximumRenderingSize=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("maximumRenderingSize")}get outputEncoding(){return _(this,r,"f").outputEncoding}set outputEncoding(e){const t="outputEncoding";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(w.TEXTURE_ENCODING)),_(this,r,"f").outputEncoding=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("outputEncoding")}get physicallyCorrectLights(){return _(this,r,"f").physicallyCorrectLights}set physicallyCorrectLights(e){const t="physicallyCorrectLights";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").physicallyCorrectLights=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("physicallyCorrectLights")}get pointSize(){return _(this,r,"f").pointSize}set pointSize(e){const t="pointSize";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").pointSize=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("pointSize")}get postProcessing(){return _(this,u,"f")}get sessionSettingsId(){return _(this,r,"f").sessionSettingsId}get sessionSettingsMode(){return _(this,r,"f").sessionSettingsMode}get shadows(){return _(this,r,"f").shadows}set shadows(e){const t="shadows";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").shadows=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("shadows")}get show(){return _(this,r,"f").show}set show(e){const t="show";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").show=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("show")}get showStatistics(){return _(this,r,"f").showStatistics}set showStatistics(e){const t="showStatistics";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").showStatistics=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("showStatistics")}get softShadows(){return _(this,r,"f").softShadows}set softShadows(e){const t="softShadows";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"boolean"),_(this,r,"f").softShadows=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("softShadows")}get textureEncoding(){return _(this,r,"f").textureEncoding}set textureEncoding(e){const t="textureEncoding";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(w.TEXTURE_ENCODING)),_(this,r,"f").textureEncoding=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("textureEncoding")}get threeJsCoreObjects(){return{scene:_(this,r,"f").sceneTreeManager.scene,renderer:_(this,r,"f").renderer,camera:_(this,r,"f").cameraManager.camera}}get toneMapping(){return _(this,r,"f").toneMapping}set toneMapping(e){const t="toneMapping";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(w.TONE_MAPPING)),_(this,r,"f").toneMapping=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("toneMapping")}get toneMappingExposure(){return _(this,r,"f").toneMappingExposure}set toneMappingExposure(e){const t="toneMappingExposure";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"number"),_(this,r,"f").toneMappingExposure=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("toneMappingExposure")}get type(){return _(this,r,"f").type}set type(e){const t="type";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"enum",!0,Object.values(w.RENDERER_TYPE)),_(this,r,"f").type=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("type")}get visualizeAttributes(){return _(this,r,"f").visualizeAttributes}set visualizeAttributes(e){const t="visualizeAttributes";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"function",!1),_(this,r,"f").visualizeAttributes=e,_(this,c,"f").debug(`ViewportApi.${t}: ${t} was set to: ${e}`),this.update("visualizeAttributes")}addCanvasEventListener(e){return _(this,l,"f").validateAndError("ViewportApi.addCanvasEventListener",e,"object"),_(this,r,"f").domEventEngine.addDomEventListener(e)}addFlag(e){return _(this,l,"f").validateAndError("ViewportApi.addFlag",e,"enum",!0,Object.values(w.FLAG_TYPE)),_(this,r,"f").addFlag(e)}restrictEventListeners(e){_(this,r,"f").domEventEngine.allowEventListeners(e)}assignCamera(e){_(this,l,"f").validateAndError("ViewportApi.assignCamera",e,"string");const t=_(this,r,"f").cameraEngine.assignCamera(e);return this.update("assignCamera"),t}assignLightScene(e){_(this,l,"f").validateAndError("ViewportApi.assignLightScene",e,"string");const t=_(this,r,"f").lightEngine.assignLightScene(e);return this.update("assignLightScene"),t}applyViewportSettings(e,t){const i="applyViewportSettings";return _(this,l,"f").validateAndError(`SessionApi.${i}`,e,"object"),_(this,l,"f").validateAndError(`SessionApi.${i}`,t,"object",!1),_(this,a,"f").applyViewportSettings(this.id,e,t)}close(){return v(this,void 0,void 0,(function*(){return yield _(this,a,"f").closeRenderingEngine(this.id)}))}continueRendering(){_(this,r,"f").continueRendering()}convert3Dto2D(e){return _(this,l,"f").validateAndError("ViewportApi.convert3Dto2D",e,"vec3"),_(this,r,"f").convert3Dto2D(e)}convertToGlTF(e=D.sceneTree.root){return v(this,void 0,void 0,(function*(){if(!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`convertToGlTF: Input could not be validated. ${e} is not of type node.`,e,"node");this.update("convertToGlTF.start");const t=yield _(this,o,"f").convert(e,!1,this.id);return this.update("convertToGlTF.end"),new Blob([t],{type:"application/octet-stream"})}))}createLightScene(e){const t="createLightScene";_(this,l,"f").validateAndError(`ViewportApi.${t}`,e,"object",!1);const i=Object.assign({},e);_(this,l,"f").validateAndError(`ViewportApi.${t}`,i.name,"string",!1),_(this,l,"f").validateAndError(`ViewportApi.${t}`,i.standard,"boolean",!1);const n=_(this,r,"f").lightEngine.createLightScene(e||{});return this.update("createLightScene"),_(this,f,"f")[n.id]}createOrthographicCamera(e){_(this,l,"f").validateAndError("ViewportApi.createOrthographicCamera",e,"string",!1);const t=_(this,r,"f").cameraEngine.createCamera(S.CAMERA_TYPE.ORTHOGRAPHIC,e);return this.update("createOrthographicCamera"),_(this,d,"f")[t.id]}createPerspectiveCamera(e){_(this,l,"f").validateAndError("ViewportApi.createPerspectiveCamera",e,"string",!1);const t=_(this,r,"f").cameraEngine.createCamera(S.CAMERA_TYPE.PERSPECTIVE,e);return this.update("createPerspectiveCamera"),_(this,d,"f")[t.id]}createSDTFOverview(e){if(!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`createSDTFOverview: Input could not be validated. ${e} is not of type node.`,e,"node");return this.update("createSDTFOverview"),_(this,r,"f").createSDTFOverview(e)}displayErrorMessage(e){_(this,l,"f").validateAndError("ViewportApi.displayErrorMessage",e,"string"),_(this,r,"f").displayErrorMessage(e),this.update("displayErrorMessage")}getEnvironmentMapImageUrl(){return _(this,r,"f").getEnvironmentMapImageUrl()}getScreenshot(e,t){const i="getScreenshot";return _(this,l,"f").validateAndError(`ViewportApi.${i}`,e,"string",!1),_(this,l,"f").validateAndError(`ViewportApi.${i}`,t,"number",!1),this.update("getScreenshot"),_(this,r,"f").getScreenshot(e,t)}getViewportSettings(){return _(this,a,"f").getViewportSettings(this.id)}isMobileDeviceWithoutBrowserARSupport(){return _(this,r,"f").isMobileDeviceWithoutBrowserARSupport()}mouseEventToRay(e){return _(this,r,"f").mouseEventToRay(e)}pauseRendering(){_(this,r,"f").pauseRendering()}raytraceScene(e,t,i){const n="raytraceScene";return _(this,l,"f").validateAndError(`ViewportApi.${n}`,e,"vec3"),_(this,l,"f").validateAndError(`ViewportApi.${n}`,t,"vec3"),_(this,r,"f").raytraceScene(e,t,i)}removeCamera(e){_(this,l,"f").validateAndError("ViewportApi.removeCamera",e,"string");const t=_(this,r,"f").cameraEngine.removeCamera(e);return this.update("removeCamera"),t}removeCanvasEventListener(e){return _(this,l,"f").validateAndError("ViewportApi.removeCanvasEventListener",e,"string"),_(this,r,"f").domEventEngine.removeDomEventListener(e)}removeFlag(e){return _(this,l,"f").validateAndError("ViewportApi.removeFlag",e,"string"),_(this,r,"f").removeFlag(e)}removeLightScene(e){_(this,l,"f").validateAndError("ViewportApi.removeLightScene",e,"string");const t=_(this,r,"f").lightEngine.removeLightScene(e);return this.update("removeLightScene"),t}render(){_(this,r,"f").renderingManager.render()}resetToDefaultCameras(){for(let e in this.cameras)_(this,r,"f").cameraEngine.removeCamera(e);_(this,r,"f").cameraEngine.createDefaultCameras(),this.update("resetToDefaultCameras")}resize(e,t){const i="resize";_(this,l,"f").validateAndError(`ViewportApi.${i}`,e,"number"),_(this,l,"f").validateAndError(`ViewportApi.${i}`,t,"number"),_(this,r,"f").resize(e,t),this.update("resize")}touchToRay(e){return _(this,r,"f").touchToRay(e)}touchEventToRay(e){return _(this,r,"f").touchEventToRay(e)}update(e){_(this,r,"f").update(e||"ViewportApi")}updateNode(e){if(!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`updateNode: Input could not be validated. ${e} is not of type node.`,e,"node");_(this,r,"f").sceneTreeManager.updateNode(e,e.threeJsObject[this.id])}updateNodeTransformation(e){if(!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`updateNodeTransformation: Input could not be validated. ${e} is not of type node.`,e,"node");_(this,r,"f").sceneTreeManager.updateNode(e,e.threeJsObject[this.id],{transformationOnly:!0})}updateEnvironmentGeometry(){_(this,r,"f").updateEnvironmentGeometry()}createArSessionLink(e,t=!0,i){return v(this,void 0,void 0,(function*(){if(e&&!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`createArSessionLink: Input could not be validated. ${e} is not of type node.`,e,"node");const n=_(this,a,"f").getARSessionEngine();if(!n)throw new E.ShapeDiverViewerArError("ViewportApi.createArSessionLink: None of the sessions that are registered are capable of using the AR feature.");const r=e||D.sceneTree.root;let s=y.mat4.fromScaling(y.mat4.create(),this.arScale);r.transformations.push({id:"ar_scaling",matrix:s}),this.update("createArSessionLink.start");const l=yield _(this,o,"f").convert(r,!0,this.id);for(let e=0;e<r.transformations.length;e++)"ar_scaling"===r.transformations[e].id&&r.transformations.splice(e,1);this.update("createArSessionLink.end");const c=yield n.uploadGLTF(new Blob([l],{type:"application/octet-stream"}),P.ShapeDiverRequestGltfUploadQueryConversion.SCENE),u={sddev3:"https://sddev3.eu-central-1.shapediver.com",sddev2:"https://sddev2.eu-central-1.shapediver.com",sddev:"https://sddev.eu-central-1.shapediver.com",sdtest:"https://sdtest.us-east-1.shapediver.com",sdeuc1:"https://sdeuc1.eu-central-1.shapediver.com",sdr7euc1:"https://sdr7euc1.eu-central-1.shapediver.com",sduse1:"https://model-view.shapediver.com"};let h=Object.keys(u).find((e=>u[e]===n.modelViewUrl));h||(h=n.modelViewUrl.replace("https://","").replace(".shapediver.com",""));let d=i?`fb=${encodeURIComponent(i)}&`:"";if(!c.gltf||!c.gltf.sceneId)throw new E.ShapeDiverViewerArError("ViewportApi.createArSessionLink: There was an unexpected error with the ar scene response. Please contact us if this happens again.");let f=c.gltf.sceneId;const p=`https://viewer.shapediver.com/v3/${O.build_data.build_version.replace("3.","")}/ar.html?${d}b=${encodeURIComponent(h)}&id=${encodeURIComponent(f)}`;return!1===t?p:yield new Promise(((e,t)=>{k.toDataURL(p,((i,n)=>{i?t(i):e(n)}))}))}))}viewInAR(e){return v(this,void 0,void 0,(function*(){if(e&&!(e instanceof C.TreeNode))throw new E.ShapeDiverViewerValidationError(`viewInAR: Input could not be validated. ${e} is not of type node.`,e,"node");const t=_(this,a,"f").getARSessionEngine();if(!t)throw new E.ShapeDiverViewerArError("Api.viewInAR: None of the sessions that are registered are capable of using the AR feature.");const i=e||D.sceneTree.root;let n=y.mat4.fromScaling(y.mat4.create(),this.arScale);i.transformations.push({id:"ar_scaling",matrix:n}),this.update("viewInAR.start");const s=yield _(this,o,"f").convert(i,!0,this.id);for(let e=0;e<i.transformations.length;e++)"ar_scaling"===i.transformations[e].id&&i.transformations.splice(e,1);this.update("viewInAR.end");const l=yield t.uploadGLTF(new Blob([s],{type:"application/octet-stream"}),_(this,h,"f").isIOS?P.ShapeDiverRequestGltfUploadQueryConversion.USDZ:P.ShapeDiverRequestGltfUploadQueryConversion.NONE);return _(this,r,"f").viewInAR(l.gltf.href)}))}viewableInAR(){return _(this,r,"f").viewableInAR()}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap,d=new WeakMap,f=new WeakMap},3778:function(e,t,i){"use strict";var n,r,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractCameraApi=void 0;const u=i(8877),h=i(5174);t.AbstractCameraApi=class{constructor(e,t){n.set(this,void 0),r.set(this,void 0),a.set(this,u.InputValidator.instance),s.set(this,u.Logger.instance),o.set(this,((e,t)=>{c(this,a,"f").validateAndError(`${this.scope}.${e}`,t,"object",!1);const i=Object.assign({},t);c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.easing,"string",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.duration,"number",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.coordinates,"string",!1),c(this,a,"f").validateAndError(`${this.scope}.${e}`,i.interpolation,"string",!1)})),this.scope="AbstractCameraApi",l(this,r,e,"f"),l(this,n,t,"f")}get autoAdjust(){return c(this,n,"f").autoAdjust}set autoAdjust(e){const t="autoAdjust";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,n,"f").autoAdjust=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get cameraMovementDuration(){return c(this,n,"f").cameraMovementDuration}set cameraMovementDuration(e){const t="cameraMovementDuration";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,n,"f").cameraMovementDuration=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get defaultPosition(){return c(this,n,"f").defaultPosition}set defaultPosition(e){const t="defaultPosition";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,n,"f").defaultPosition=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get defaultTarget(){return c(this,n,"f").defaultTarget}set defaultTarget(e){const t="defaultTarget";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,n,"f").defaultTarget=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get enabled(){return c(this,n,"f").controls.enabled}set enabled(e){const t="enabled";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,n,"f").controls.enabled=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get id(){return c(this,n,"f").id}get name(){return c(this,n,"f").name}set name(e){const t="name";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"string",!1),c(this,n,"f").name=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get order(){return c(this,n,"f").order}set order(e){const t="order";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number",!1),c(this,n,"f").order=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get position(){return c(this,n,"f").position}set position(e){const t="position";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,n,"f").position=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get revertAtMouseUp(){return c(this,n,"f").revertAtMouseUp}set revertAtMouseUp(e){const t="revertAtMouseUp";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),c(this,n,"f").revertAtMouseUp=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get revertAtMouseUpDuration(){return c(this,n,"f").revertAtMouseUpDuration}set revertAtMouseUpDuration(e){const t="revertAtMouseUpDuration";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,n,"f").revertAtMouseUpDuration=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get target(){return c(this,n,"f").target}set target(e){const t="target";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),c(this,n,"f").target=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}get type(){return c(this,n,"f").type}get zoomToFactor(){return c(this,n,"f").zoomExtentsFactor}set zoomToFactor(e){const t="zoomToFactor";c(this,a,"f").validateAndError(`${this.scope}.${t}`,e,"number"),c(this,n,"f").zoomExtentsFactor=e,c(this,s,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),c(this,r,"f").update()}animate(e,t){const i="animate";c(this,a,"f").validateAndError(`${this.scope}.${i}`,e,"array");for(let t=0;t<e.length;t++)c(this,a,"f").validateAndError(`${this.scope}.${i}`,e[t].position,"vec3"),c(this,a,"f").validateAndError(`${this.scope}.${i}`,e[t].target,"vec3");return c(this,o,"f").call(this,i,t),c(this,n,"f").animate(e,t)}calculateZoomTo(e,t,i){const r="calculateZoomTo";if(void 0!==e&&!(e instanceof h.Box))throw new u.ShapeDiverViewerValidationError(`${r}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return c(this,a,"f").validateAndError(`${this.scope}.${r}`,t,"vec3",!1),c(this,a,"f").validateAndError(`${this.scope}.${r}`,i,"vec3",!1),c(this,n,"f").calculateZoomTo(e,t,i)}project(e){return c(this,a,"f").validateAndError(`${this.scope}.project`,e,"vec3"),c(this,n,"f").project(e)}reset(e){return c(this,o,"f").call(this,"reset",e),c(this,n,"f").reset(e)}set(e,t,i){const r="set";return c(this,a,"f").validateAndError(`${this.scope}.${r}`,e,"vec3",!1),c(this,a,"f").validateAndError(`${this.scope}.${r}`,t,"vec3",!1),c(this,o,"f").call(this,r,i),c(this,n,"f").set(e,t,i)}unproject(e){return c(this,a,"f").validateAndError(`${this.scope}.unproject`,e,"vec3",!1),c(this,n,"f").unproject(e)}zoomTo(e,t){const i="zoomTo";if(void 0!==e&&!(e instanceof h.Box))throw new u.ShapeDiverViewerValidationError(`${i}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return c(this,o,"f").call(this,i,t),c(this,n,"f").zoomTo(e,t)}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},2380:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraApi=void 0;const c=i(1990),u=i(3778),h=i(8877);class d extends u.AbstractCameraApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,h.InputValidator.instance),a.set(this,h.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="OrthographicCameraApi"}get damping(){return l(this,n,"f").controls.damping}set damping(e){const t="damping";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.damping=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get direction(){return l(this,n,"f").direction}set direction(e){const t="direction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"enum",!0,Object.values(c.ORTHOGRAPHIC_CAMERA_DIRECTION)),l(this,n,"f").direction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableKeyPan(){return l(this,n,"f").controls.enableKeyPan}set enableKeyPan(e){const t="enableKeyPan";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableKeyPan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enablePan(){return l(this,n,"f").controls.enablePan}set enablePan(e){const t="enablePan";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enablePan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableZoom(){return l(this,n,"f").controls.enableZoom}set enableZoom(e){const t="enableZoom";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableZoom=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get keyPanSpeed(){return l(this,n,"f").controls.keyPanSpeed}set keyPanSpeed(e){const t="keyPanSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.keyPanSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get movementSmoothness(){return l(this,n,"f").controls.movementSmoothness}set movementSmoothness(e){const t="movementSmoothness";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.movementSmoothness=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get panSpeed(){return l(this,n,"f").controls.panSpeed}set panSpeed(e){const t="panSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.panSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomSpeed(){return l(this,n,"f").controls.zoomSpeed}set zoomSpeed(e){const t="zoomSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.zoomSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.OrthographicCameraApi=d,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},3612:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PerspectiveCameraApi=void 0;const c=i(3778),u=i(8877);class h extends c.AbstractCameraApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="PerspectiveCameraApi"}get autoRotationSpeed(){return l(this,n,"f").controls.autoRotationSpeed}set autoRotationSpeed(e){const t="autoRotationSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.autoRotationSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get cubePositionRestriction(){return l(this,n,"f").controls.cubePositionRestriction}set cubePositionRestriction(e){const t="cubePositionRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.min,"vec3"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.max,"vec3"),l(this,n,"f").controls.cubePositionRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get cubeTargetRestriction(){return l(this,n,"f").controls.cubeTargetRestriction}set cubeTargetRestriction(e){const t="cubeTargetRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.min,"vec3"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.max,"vec3"),l(this,n,"f").controls.cubeTargetRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get damping(){return l(this,n,"f").controls.damping}set damping(e){const t="damping";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.damping=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableAutoRotation(){return l(this,n,"f").controls.enableAutoRotation}set enableAutoRotation(e){const t="enableAutoRotation";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableAutoRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableAzimuthRotation(){return l(this,n,"f").controls.enableAzimuthRotation}set enableAzimuthRotation(e){const t="enableAzimuthRotation";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableAzimuthRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableKeyPan(){return l(this,n,"f").controls.enableKeyPan}set enableKeyPan(e){const t="enableKeyPan";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableKeyPan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enablePan(){return l(this,n,"f").controls.enablePan}set enablePan(e){const t="enablePan";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enablePan=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enablePolarRotation(){return l(this,n,"f").controls.enablePolarRotation}set enablePolarRotation(e){const t="enablePolarRotation";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enablePolarRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableRotation(){return l(this,n,"f").controls.enableRotation}set enableRotation(e){const t="enableRotation";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableRotation=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableTurntableControls(){return l(this,n,"f").controls.enableTurntableControls}set enableTurntableControls(e){const t="enableTurntableControls";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableTurntableControls=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get enableZoom(){return l(this,n,"f").controls.enableZoom}set enableZoom(e){const t="enableZoom";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,n,"f").controls.enableZoom=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get fov(){return l(this,n,"f").fov}set fov(e){const t="fov";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").fov=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get keyPanSpeed(){return l(this,n,"f").controls.keyPanSpeed}set keyPanSpeed(e){const t="keyPanSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.keyPanSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get movementSmoothness(){return l(this,n,"f").controls.movementSmoothness}set movementSmoothness(e){const t="movementSmoothness";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.movementSmoothness=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get panSpeed(){return l(this,n,"f").controls.panSpeed}set panSpeed(e){const t="panSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.panSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get rotationRestriction(){return l(this,n,"f").controls.rotationRestriction}set rotationRestriction(e){const t="rotationRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.minAzimuthAngle,"number"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.maxAzimuthAngle,"number"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.minPolarAngle,"number"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.maxPolarAngle,"number"),l(this,n,"f").controls.rotationRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get rotationSpeed(){return l(this,n,"f").controls.rotationSpeed}set rotationSpeed(e){const t="rotationSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.rotationSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get spherePositionRestriction(){return l(this,n,"f").controls.spherePositionRestriction}set spherePositionRestriction(e){const t="spherePositionRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.center,"vec3"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.radius,"number"),l(this,n,"f").controls.spherePositionRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get sphereTargetRestriction(){return l(this,n,"f").controls.sphereTargetRestriction}set sphereTargetRestriction(e){const t="sphereTargetRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.center,"vec3"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.radius,"number"),l(this,n,"f").controls.sphereTargetRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get turntableCenter(){return l(this,n,"f").controls.turntableCenter}set turntableCenter(e){const t="turntableCenter";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,n,"f").controls.turntableCenter=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomRestriction(){return l(this,n,"f").controls.zoomRestriction}set zoomRestriction(e){const t="zoomRestriction";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"object"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.minDistance,"number"),l(this,r,"f").validateAndError(`${this.scope}.${t}`,e.maxDistance,"number"),l(this,n,"f").controls.zoomRestriction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get zoomSpeed(){return l(this,n,"f").controls.zoomSpeed}set zoomSpeed(e){const t="zoomSpeed";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").controls.zoomSpeed=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.PerspectiveCameraApi=h,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},2192:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractLightApi=void 0;const c=i(8877);t.AbstractLightApi=class{constructor(e,t){n.set(this,void 0),r.set(this,c.InputValidator.instance),a.set(this,c.Logger.instance),s.set(this,void 0),this.scope="AbstractLightApi",o(this,s,e,"f"),o(this,n,t,"f")}get color(){return l(this,n,"f").color}set color(e){const t="color";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"color"),l(this,n,"f").color=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get id(){return l(this,n,"f").id}get intensity(){return l(this,n,"f").intensity}set intensity(e){const t="intensity";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").intensity=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get name(){return l(this,n,"f").name}set name(e){const t="name";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"string",!1),l(this,n,"f").name=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get order(){return l(this,n,"f").order}set order(e){const t="order";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number",!1),l(this,n,"f").order=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get type(){return l(this,n,"f").type}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},2183:function(e,t,i){"use strict";var n,r,a,s,o,l=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},c=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.LightSceneApi=void 0;const u=i(3490),h=i(7200),d=i(5707),f=i(273),p=i(3658),m=i(5942),g=i(8877);t.LightSceneApi=class{constructor(e,t){n.set(this,void 0),r.set(this,{}),a.set(this,g.InputValidator.instance),s.set(this,g.Logger.instance),o.set(this,void 0),l(this,o,e,"f"),l(this,n,t,"f"),c(this,n,"f").update=()=>{for(let e in c(this,n,"f").lights)if(!c(this,r,"f")[e])switch(c(this,n,"f").lights[e].type){case u.LIGHT_TYPE.AMBIENT:c(this,r,"f")[e]=new h.AmbientLightApi(c(this,o,"f"),c(this,n,"f").lights[e]);break;case u.LIGHT_TYPE.DIRECTIONAL:c(this,r,"f")[e]=new d.DirectionalLightApi(c(this,o,"f"),c(this,n,"f").lights[e]);break;case u.LIGHT_TYPE.HEMISPHERE:c(this,r,"f")[e]=new f.HemisphereLightApi(c(this,o,"f"),c(this,n,"f").lights[e]);break;case u.LIGHT_TYPE.POINT:c(this,r,"f")[e]=new p.PointLightApi(c(this,o,"f"),c(this,n,"f").lights[e]);break;case u.LIGHT_TYPE.SPOT:c(this,r,"f")[e]=new m.SpotLightApi(c(this,o,"f"),c(this,n,"f").lights[e])}for(let e in c(this,r,"f"))c(this,n,"f").lights[e]||delete c(this,r,"f")[e]},c(this,n,"f").update()}get id(){return c(this,n,"f").id}get lights(){return c(this,r,"f")}get name(){return c(this,n,"f").name}set name(e){const t="name";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"string",!1),c(this,n,"f").name=e,c(this,s,"f").debug(`LightSceneApi.${t}: ${t} was set to: ${e}`)}get node(){return c(this,n,"f").node}addAmbientLight(e){const t="addAmbientLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,n,"f").addAmbientLight(e);return c(this,o,"f").update(),c(this,r,"f")[s.id]}addDirectionalLight(e){const t="addDirectionalLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.direction,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.castShadow,"boolean",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.shadowMapResolution,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.shadowMapBias,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,n,"f").addDirectionalLight(e);return c(this,o,"f").update(),c(this,r,"f")[s.id]}addHemisphereLight(e){const t="addHemisphereLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.groundColor,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,n,"f").addHemisphereLight(e);return c(this,o,"f").update(),c(this,r,"f")[s.id]}addPointLight(e){const t="addPointLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.position,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.distance,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.decay,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,n,"f").addPointLight(e);return c(this,o,"f").update(),c(this,r,"f")[s.id]}addSpotLight(e){const t="addSpotLight";c(this,a,"f").validateAndError(`LightSceneApi.${t}`,e,"object",!1);const i=Object.assign({},e);c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.color,"color",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.intensity,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.position,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.target,"vec3",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.distance,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.decay,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.angle,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.penumbra,"number",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.id,"string",!1),c(this,a,"f").validateAndError(`LightSceneApi.${t}`,i.name,"string",!1);const s=c(this,n,"f").addSpotLight(e);return c(this,o,"f").update(),c(this,r,"f")[s.id]}removeLight(e){const t=c(this,n,"f").removeLight(e);return c(this,o,"f").update(),t}},n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap,o=new WeakMap},7200:function(e,t,i){"use strict";var n,r,a=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i};Object.defineProperty(t,"__esModule",{value:!0}),t.AmbientLightApi=void 0;const s=i(2192);class o extends s.AbstractLightApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,void 0),a(this,r,e,"f"),a(this,n,t,"f"),this.scope="AmbientLightApi"}}t.AmbientLightApi=o,n=new WeakMap,r=new WeakMap},5707:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.DirectionalLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),n.set(this,u.InputValidator.instance),r.set(this,void 0),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,r,t,"f"),this.scope="DirectionalLightApi"}get castShadow(){return l(this,r,"f").castShadow}set castShadow(e){const t="castShadow";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"boolean"),l(this,r,"f").castShadow=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get direction(){return l(this,r,"f").direction}set direction(e){const t="direction";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,r,"f").direction=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get shadowMapBias(){return l(this,r,"f").shadowMapBias}set shadowMapBias(e){const t="shadowMapBias";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").shadowMapBias=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get shadowMapResolution(){return l(this,r,"f").shadowMapResolution}set shadowMapResolution(e){const t="shadowMapResolution";l(this,n,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,r,"f").shadowMapResolution=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.DirectionalLightApi=h,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},273:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.HemisphereLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="HemisphereLightApi"}get groundColor(){return l(this,n,"f").groundColor}set groundColor(e){const t="groundColor";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"color"),l(this,n,"f").groundColor=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.HemisphereLightApi=h,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},3658:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.PointLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="PointLightApi"}get decay(){return l(this,n,"f").decay}set decay(e){const t="decay";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").decay=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get distance(){return l(this,n,"f").distance}set distance(e){const t="distance";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").distance=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get position(){return l(this,n,"f").position}set position(e){const t="position";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,n,"f").position=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.PointLightApi=h,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},5942:function(e,t,i){"use strict";var n,r,a,s,o=this&&this.__classPrivateFieldSet||function(e,t,i,n,r){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?r.call(e,i):r?r.value=i:t.set(e,i),i},l=this&&this.__classPrivateFieldGet||function(e,t,i,n){if("a"===i&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?n:"a"===i?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLightApi=void 0;const c=i(2192),u=i(8877);class h extends c.AbstractLightApi{constructor(e,t){super(e,t),n.set(this,void 0),r.set(this,u.InputValidator.instance),a.set(this,u.Logger.instance),s.set(this,void 0),o(this,s,e,"f"),o(this,n,t,"f"),this.scope="SpotLightApi"}get angle(){return l(this,n,"f").angle}set angle(e){const t="angle";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").angle=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get decay(){return l(this,n,"f").decay}set decay(e){const t="decay";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").decay=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get distance(){return l(this,n,"f").distance}set distance(e){const t="distance";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").distance=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get penumbra(){return l(this,n,"f").penumbra}set penumbra(e){const t="penumbra";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"number"),l(this,n,"f").penumbra=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get position(){return l(this,n,"f").position}set position(e){const t="position";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,n,"f").position=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}get target(){return l(this,n,"f").target}set target(e){const t="target";l(this,r,"f").validateAndError(`${this.scope}.${t}`,e,"vec3"),l(this,n,"f").target=e,l(this,a,"f").debug(`${this.scope}.${t}: ${t} was set to: ${e}`),l(this,s,"f").update()}}t.SpotLightApi=h,n=new WeakMap,r=new WeakMap,a=new WeakMap,s=new WeakMap},3256:(e,t,i)=>{"use strict";t.ed=t.d1=void 0;const n=i(7977);Object.defineProperty(t,"ed",{enumerable:!0,get:function(){return n.createSession}}),Object.defineProperty(t,"d1",{enumerable:!0,get:function(){return n.createViewport}});i(7038),i(5851),i(6041),i(5174),i(2248),i(1990),i(5254),i(8877),i(6538),i(4465),i(9878),i(3858),i(3490),i(4320),i(9252),i(8729),i(7849),i(7849)},7977:function(e,t,i){"use strict";var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,a){function s(e){try{l(n.next(e))}catch(e){a(e)}}function o(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,o)}l((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createViewport=t.createSession=t.generalOptions=t.version=t.sessions=t.viewports=t.sceneTree=t.removeListener=t.addListener=void 0;const r=i(3441),a=i(2248),s=i(5094),o=i(8877),l=i(6538),c=i(8877),u=i(3858),h=i(8877),d=i(2387),f=i(9766),p=s.CreationControlCenter.instance,m=o.HttpClient.instance,g=c.InputValidator.instance,v=h.Logger.instance,b=o.EventEngine.instance,_=l.GeometryEngine.instance;let y=!1,A=!0;t.addListener=(e,t)=>(g.validateAndError("addListener",e,"string"),g.validateAndError("addListener",t,"function"),v.debug(`addListener: Event Listener was registered for ${e}.`),b.addListener(e,t)),t.removeListener=e=>(g.validateAndError("removeListener",e,"string"),v.debug(`removeListener: Removing event listener with id ${e}.`),b.removeListener(e)),t.sceneTree=u.Tree.instance,t.viewports={},t.sessions={},t.version=r.build_data.build_version.replace("3.",""),p.update=(e,i)=>{for(const i in e)t.sessions[i]||(t.sessions[i]=new d.SessionApi(e[i]));for(const i in t.sessions)e[i]||delete t.sessions[i];for(const e in i)t.viewports[e]||(t.viewports[e]=new f.ViewportApi(i[e]));for(const e in t.viewports)i[e]||delete t.viewports[e]};const E=()=>{y=!0,!0===A?console.log(`Powered by:\n   _____  __                         ____   _                   \n  / ___/ / /_   ____ _ ____   ___   / __ \\ (_)_   __ ___   _____\n  \\__ \\ / __ \\ / __ '// __ \\ / _ \\ / / / // /| | / // _ \\ / ___/\n ___/ // / / // /_/ // /_/ //  __// /_/ // / | |/ //  __// /    \n/____//_/ /_/ \\__,_// .___/ \\___//_____//_/  |___/ \\___//_/     \n                   /_/                                          \nShapeDiver Viewer 3, Version ${r.build_data.build_version.replace("3.","")}\nVisit us at https://shapediver.com/ and find out more!\n`):console.log(`ShapeDiver Viewer 3, Version ${r.build_data.build_version.replace("3.","")}`)};t.generalOptions=new class{get caching(){return{enable:m.enableCaching,excludedQueryParameters:m.excludedQueryParameters,maxCacheSize:m.maxCacheSize}}set caching(e){g.validateAndError("caching",e,"object",!0),g.validateAndError("caching",e.enable,"boolean"),g.validateAndError("caching",e.excludedQueryParameters,"stringArray"),g.validateAndError("caching",e.maxCacheSize,"number"),void 0!==e.enable&&(m.enableCaching=e.enable),void 0!==e.excludedQueryParameters&&(m.excludedQueryParameters=e.excludedQueryParameters),void 0!==e.maxCacheSize&&(m.maxCacheSize=e.maxCacheSize),v.debug(`caching: CoggingLevel was set to: ${e}`)}get consoleBranding(){return A}set consoleBranding(e){g.validateAndError("consoleBranding",e,"boolean"),A=e,v.debug(`consoleBranding: ConsoleBranding was set to: ${e}`)}get loggingLevel(){return v.loggingLevel}set loggingLevel(e){g.validateAndError("loggingLevel",e,"enum",!0,Object.values(o.LOGGING_LEVEL)),v.loggingLevel=e,v.debug(`loggingLevel: LoggingLevel was set to: ${e}`)}get parallelGlTFProcessing(){return _.parallelGlTFProcessing}set parallelGlTFProcessing(e){g.validateAndError("parallelGlTFProcessing",e,"number"),_.parallelGlTFProcessing=e,v.debug(`parallelGlTFProcessing: ParallelGlTFProcessing was set to: ${e}`)}get showMessages(){return v.showMessages}set showMessages(e){g.validateAndError("showMessages",e,"boolean"),v.showMessages=e,v.debug(`showMessages: ShowMessages was set to: ${e}`)}},t.createSession=e=>n(void 0,void 0,void 0,(function*(){if(!1===y&&E(),v.info(`createSession: Creating and initializing session with properties ${JSON.stringify(e)}.`),g.validateAndError("createSession",e,"object"),g.validateAndError("createSession",e.ticket,"string",!1),g.validateAndError("createSession",e.guid,"string",!1),g.validateAndError("createSession",e.modelViewUrl,"string"),g.validateAndError("createSession",e.jwtToken,"string",!1),g.validateAndError("createSession",e.id,"string",!1),g.validateAndError("createSession",e.waitForOutputs,"boolean",!1),g.validateAndError("createSession",e.loadOutputs,"boolean",!1),g.validateAndError("createSession",e.excludeViewports,"stringArray",!1),g.validateAndError("createSession",e.initialParameterValues,"object",!1),e.initialParameterValues)for(const t in e.initialParameterValues)g.validateAndError("createSession",e.initialParameterValues[t],"string");if(void 0!==e.ticket&&void 0!==e.guid)throw new o.ShapeDiverViewerSessionError("createSession: A ticket and a guid were provided for the session creation. Please only provide one or the other. The session was not created.");if(void 0===e.ticket&&void 0===e.guid)throw new o.ShapeDiverViewerSessionError("createSession: Neither a ticket nor a guid were provided for the session creation. Please provide one or the other. The session was not created.");if(void 0!==e.guid&&void 0===e.jwtToken)throw new o.ShapeDiverViewerSessionError("createSession: When creating a session with a guid, a jwtToken is required, please provide one. The session was not created.");void 0===e.waitForOutputs&&(e.waitForOutputs=!0),void 0===e.loadOutputs&&(e.loadOutputs=!0);const i=yield p.createSessionEngine(e);return t.sessions[i.id]=new d.SessionApi(i),t.sessions[i.id]})),t.createViewport=e=>n(void 0,void 0,void 0,(function*(){!1===y&&E(),g.validateAndError("createViewport",e,"object",!1);const i=Object.assign({},e);g.validateAndError("createViewport",i.canvas,"HTMLCanvasElement",!1),g.validateAndError("createViewport",i.id,"string",!1),g.validateAndError("createViewport",i.sessionSettingsId,"string",!1),g.validateAndError("createViewport",i.sessionSettingsMode,"enum",!1,Object.values(a.SESSION_SETTINGS_MODE)),g.validateAndError("createViewport",i.visibility,"enum",!1,Object.values(a.VISIBILITY_MODE)),g.validateAndError("createViewport",i.branding,"object",!1);const n=Object.assign({},i.branding);if(null!==n.logo&&g.validateAndError("createViewport",n.logo,"string",!1),g.validateAndError("createViewport",n.backgroundColor,"string",!1),g.validateAndError("createViewport",n.busyModeSpinner,"string",!1),g.validateAndError("createViewport",n.busyModeDisplay,"enum",!1,Object.values(a.BUSY_MODE_DISPLAY)),g.validateAndError("createViewport",n.spinnerPositioning,"enum",!1,Object.values(a.SPINNER_POSITIONING)),i.sessionSettingsMode=void 0!==i.sessionSettingsMode?i.sessionSettingsMode:a.SESSION_SETTINGS_MODE.FIRST,i.sessionSettingsMode===a.SESSION_SETTINGS_MODE.MANUAL&&!i.sessionSettingsId)throw new o.ShapeDiverViewerValidationError("createViewport: Input could not be validated. sessionSettingsId has to point to a valid and created session when using SESSION_SETTINGS_MODE.MANUAL",i.sessionSettingsId,"string");const r=yield p.createRenderingEngineThreeJs(i);return t.viewports[r.id]=new f.ViewportApi(r),t.viewports[r.id]}))},6194:(e,t,i)=>{"use strict";i.r(t),i.d(t,{Easing:()=>r,Group:()=>s,Interpolation:()=>o,Sequence:()=>l,Tween:()=>u,VERSION:()=>h,add:()=>g,default:()=>_,getAll:()=>p,nextId:()=>d,now:()=>a,remove:()=>v,removeAll:()=>m,update:()=>b});var n,r={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){var t=1.70158;return e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},Bounce:{In:function(e){return 1-r.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Bounce.In(2*e):.5*r.Bounce.Out(2*e-1)+.5}}},a="undefined"==typeof self&&"undefined"!=typeof process&&process.hrtime?function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?self.performance.now.bind(self.performance):void 0!==Date.now?Date.now:function(){return(new Date).getTime()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=a()),void 0===t&&(t=!1);var i=Object.keys(this._tweens);if(0===i.length)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<i.length;n++){var r=this._tweens[i[n]],s=!t;r&&!1===r.update(e,s)&&!t&&delete this._tweens[i[n]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),a=o.Utils.Linear;return t<0?a(e[0],e[1],n):t>1?a(e[i],e[i-1],i-n):a(e[r],e[r+1>i?i:r+1],n-r)},Bezier:function(e,t){for(var i=0,n=e.length-1,r=Math.pow,a=o.Utils.Bernstein,s=0;s<=n;s++)i+=r(1-t,n-s)*r(t,s)*e[s]*a(n,s);return i},CatmullRom:function(e,t){var i=e.length-1,n=i*t,r=Math.floor(n),a=o.Utils.CatmullRom;return e[0]===e[i]?(t<0&&(r=Math.floor(n=i*(1+t))),a(e[(r-1+i)%i],e[r],e[(r+1)%i],e[(r+2)%i],n-r)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-n)-e[0]):t>1?e[i]-(a(e[i],e[i],e[i-1],e[i-1],n-i)-e[i]):a(e[r?r-1:0],e[r],e[i<r+1?i:r+1],e[i<r+2?i:r+2],n-r)},Utils:{Linear:function(e,t,i){return(t-e)*i+e},Bernstein:function(e,t){var i=o.Utils.Factorial;return i(e)/i(t)/i(e-t)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var i=e;i>1;i--)t*=i;return n[e]=t,t}),CatmullRom:function(e,t,i,n,r){var a=.5*(i-e),s=.5*(n-t),o=r*r;return(2*t-2*i+a+s)*(r*o)+(-3*t+3*i-2*a-s)*o+a*r+t}}},l=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new s,u=function(){function e(e,t){void 0===t&&(t=c),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=r.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=l.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},e.prototype.duration=function(e){return this._duration=e,this},e.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var t in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(t),this._valuesStart[t]=this._valuesStartRepeat[t];return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=void 0!==e?"string"==typeof e?a()+parseFloat(e):e:a(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},e.prototype._setupProperties=function(e,t,i,n){for(var r in i){var a=e[r],s=Array.isArray(a),o=s?"array":typeof a,l=!s&&Array.isArray(i[r]);if("undefined"!==o&&"function"!==o){if(l){var c=i[r];if(0===c.length)continue;c=c.map(this._handleRelativeValue.bind(this,a)),i[r]=[a].concat(c)}if("object"!==o&&!s||!a||l)void 0===t[r]&&(t[r]=a),s||(t[r]*=1),n[r]=l?i[r].slice().reverse():t[r]||0;else{for(var u in t[r]=s?[]:{},a)t[r][u]=a[u];n[r]=s?[]:{},this._setupProperties(a,t[r],i[r],n[r])}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=a()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=a()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return this._group=e,this},e.prototype.delay=function(e){return this._delayTime=e,this},e.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return this._yoyo=e,this},e.prototype.easing=function(e){return this._easingFunction=e,this},e.prototype.interpolation=function(e){return this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){if(void 0===e&&(e=a()),void 0===t&&(t=!0),this._isPaused)return!0;var i,n,r=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>r)return!1;t&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||n>1?1:n;var s=this._easingFunction(n);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,s),this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[i]||(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,l=this._chainedTweens.length;o<l;o++)this._chainedTweens[o].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,i,n){for(var r in i)if(void 0!==t[r]){var a=t[r]||0,s=i[r],o=Array.isArray(e[r]),l=Array.isArray(s);!o&&l?e[r]=this._interpolationFunction(s,n):"object"==typeof s&&s?this._updateProperties(e[r],a,s,n):"number"==typeof(s=this._handleRelativeValue(a,s))&&(e[r]=a+(s-a)*n)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],i=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof i?this._valuesStartRepeat[e]+parseFloat(i):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),h="18.6.4",d=l.nextId,f=c,p=f.getAll.bind(f),m=f.removeAll.bind(f),g=f.add.bind(f),v=f.remove.bind(f),b=f.update.bind(f);const _={Easing:r,Group:s,Interpolation:o,now:a,Sequence:l,nextId:d,Tween:u,VERSION:h,getAll:p,removeAll:m,add:g,remove:v,update:b}},3818:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n="undefined"!=typeof window&&void 0!==window.document,r="undefined"!=typeof process&&null!=process.versions&&null!=process.versions.node,a="object"===("undefined"==typeof self?"undefined":i(self))&&self.constructor&&"DedicatedWorkerGlobalScope"===self.constructor.name,s="undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),o="undefined"!=typeof Deno&&void 0!==Deno.version&&void 0!==Deno.version.deno;t.isBrowser=n,t.isWebWorker=a,t.isNode=r,t.isJsDom=s,t.isDeno=o},3776:function(e,t,i){var n;!function(r){"use strict";var a,s,o,l=9e15,c=1e9,u="0123456789abcdef",h="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",f={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},p=!0,m="[DecimalError] ",g=m+"Invalid argument: ",v=m+"Precision limit exceeded",b=m+"crypto unavailable",_="[object Decimal]",y=Math.floor,A=Math.pow,E=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,S=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,T=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,x=1e7,M=7,R=h.length-1,P=d.length-1,C={toStringTag:_};function D(e){var t,i,n,r=e.length-1,a="",s=e[0];if(r>0){for(a+=s,t=1;t<r;t++)n=e[t]+"",(i=M-n.length)&&(a+=z(i)),a+=n;s=e[t],(i=M-(n=s+"").length)&&(a+=z(i))}else if(0===s)return"0";for(;s%10==0;)s/=10;return a+s}function O(e,t,i){if(e!==~~e||e<t||e>i)throw Error(g+e)}function k(e,t,i,n){var r,a,s,o;for(a=e[0];a>=10;a/=10)--t;return--t<0?(t+=M,r=0):(r=Math.ceil((t+1)/M),t%=M),a=A(10,M-t),o=e[r]%a|0,null==n?t<3?(0==t?o=o/100|0:1==t&&(o=o/10|0),s=i<4&&99999==o||i>3&&49999==o||5e4==o||0==o):s=(i<4&&o+1==a||i>3&&o+1==a/2)&&(e[r+1]/a/100|0)==A(10,t-2)-1||(o==a/2||0==o)&&0==(e[r+1]/a/100|0):t<4?(0==t?o=o/1e3|0:1==t?o=o/100|0:2==t&&(o=o/10|0),s=(n||i<4)&&9999==o||!n&&i>3&&4999==o):s=((n||i<4)&&o+1==a||!n&&i>3&&o+1==a/2)&&(e[r+1]/a/1e3|0)==A(10,t-3)-1,s}function I(e,t,i){for(var n,r,a=[0],s=0,o=e.length;s<o;){for(r=a.length;r--;)a[r]*=t;for(a[0]+=u.indexOf(e.charAt(s++)),n=0;n<a.length;n++)a[n]>i-1&&(void 0===a[n+1]&&(a[n+1]=0),a[n+1]+=a[n]/i|0,a[n]%=i)}return a.reverse()}C.absoluteValue=C.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),L(e)},C.ceil=function(){return L(new this.constructor(this),this.e+1,2)},C.clampedTo=C.clamp=function(e,t){var i=this,n=i.constructor;if(e=new n(e),t=new n(t),!e.s||!t.s)return new n(NaN);if(e.gt(t))throw Error(g+t);return i.cmp(e)<0?e:i.cmp(t)>0?t:new n(i)},C.comparedTo=C.cmp=function(e){var t,i,n,r,a=this,s=a.d,o=(e=new a.constructor(e)).d,l=a.s,c=e.s;if(!s||!o)return l&&c?l!==c?l:s===o?0:!s^l<0?1:-1:NaN;if(!s[0]||!o[0])return s[0]?l:o[0]?-c:0;if(l!==c)return l;if(a.e!==e.e)return a.e>e.e^l<0?1:-1;for(t=0,i=(n=s.length)<(r=o.length)?n:r;t<i;++t)if(s[t]!==o[t])return s[t]>o[t]^l<0?1:-1;return n===r?0:n>r^l<0?1:-1},C.cosine=C.cos=function(){var e,t,i=this,n=i.constructor;return i.d?i.d[0]?(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+M,n.rounding=1,i=function(e,t){var i,n,r;if(t.isZero())return t;(n=t.d.length)<32?r=(1/J(4,i=Math.ceil(n/3))).toString():(i=16,r="2.3283064365386962890625e-10"),e.precision+=i,t=K(e,1,t.times(r),new e(1));for(var a=i;a--;){var s=t.times(t);t=s.times(s).minus(s).times(8).plus(1)}return e.precision-=i,t}(n,$(n,i)),n.precision=e,n.rounding=t,L(2==o||3==o?i.neg():i,e,t,!0)):new n(1):new n(NaN)},C.cubeRoot=C.cbrt=function(){var e,t,i,n,r,a,s,o,l,c,u=this,h=u.constructor;if(!u.isFinite()||u.isZero())return new h(u);for(p=!1,(a=u.s*A(u.s*u,1/3))&&Math.abs(a)!=1/0?n=new h(a.toString()):(i=D(u.d),(a=((e=u.e)-i.length+1)%3)&&(i+=1==a||-2==a?"0":"00"),a=A(i,1/3),e=y((e+1)/3)-(e%3==(e<0?-1:2)),(n=new h(i=a==1/0?"5e"+e:(i=a.toExponential()).slice(0,i.indexOf("e")+1)+e)).s=u.s),s=(e=h.precision)+3;;)if(c=(l=(o=n).times(o).times(o)).plus(u),n=N(c.plus(u).times(o),c.plus(l),s+2,1),D(o.d).slice(0,s)===(i=D(n.d)).slice(0,s)){if("9999"!=(i=i.slice(s-3,s+1))&&(r||"4999"!=i)){+i&&(+i.slice(1)||"5"!=i.charAt(0))||(L(n,e+1,1),t=!n.times(n).times(n).eq(u));break}if(!r&&(L(o,e+1,0),o.times(o).times(o).eq(u))){n=o;break}s+=4,r=1}return p=!0,L(n,e,h.rounding,t)},C.decimalPlaces=C.dp=function(){var e,t=this.d,i=NaN;if(t){if(i=((e=t.length-1)-y(this.e/M))*M,e=t[e])for(;e%10==0;e/=10)i--;i<0&&(i=0)}return i},C.dividedBy=C.div=function(e){return N(this,new this.constructor(e))},C.dividedToIntegerBy=C.divToInt=function(e){var t=this.constructor;return L(N(this,new t(e),0,1,1),t.precision,t.rounding)},C.equals=C.eq=function(e){return 0===this.cmp(e)},C.floor=function(){return L(new this.constructor(this),this.e+1,3)},C.greaterThan=C.gt=function(e){return this.cmp(e)>0},C.greaterThanOrEqualTo=C.gte=function(e){var t=this.cmp(e);return 1==t||0===t},C.hyperbolicCosine=C.cosh=function(){var e,t,i,n,r,a=this,s=a.constructor,o=new s(1);if(!a.isFinite())return new s(a.s?1/0:NaN);if(a.isZero())return o;i=s.precision,n=s.rounding,s.precision=i+Math.max(a.e,a.sd())+4,s.rounding=1,(r=a.d.length)<32?t=(1/J(4,e=Math.ceil(r/3))).toString():(e=16,t="2.3283064365386962890625e-10"),a=K(s,1,a.times(t),new s(1),!0);for(var l,c=e,u=new s(8);c--;)l=a.times(a),a=o.minus(l.times(u.minus(l.times(u))));return L(a,s.precision=i,s.rounding=n,!0)},C.hyperbolicSine=C.sinh=function(){var e,t,i,n,r=this,a=r.constructor;if(!r.isFinite()||r.isZero())return new a(r);if(t=a.precision,i=a.rounding,a.precision=t+Math.max(r.e,r.sd())+4,a.rounding=1,(n=r.d.length)<3)r=K(a,2,r,r,!0);else{e=(e=1.4*Math.sqrt(n))>16?16:0|e,r=K(a,2,r=r.times(1/J(5,e)),r,!0);for(var s,o=new a(5),l=new a(16),c=new a(20);e--;)s=r.times(r),r=r.times(o.plus(s.times(l.times(s).plus(c))))}return a.precision=t,a.rounding=i,L(r,t,i,!0)},C.hyperbolicTangent=C.tanh=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+7,n.rounding=1,N(i.sinh(),i.cosh(),n.precision=e,n.rounding=t)):new n(i.s)},C.inverseCosine=C.acos=function(){var e,t=this,i=t.constructor,n=t.abs().cmp(1),r=i.precision,a=i.rounding;return-1!==n?0===n?t.isNeg()?G(i,r,a):new i(0):new i(NaN):t.isZero()?G(i,r+4,a).times(.5):(i.precision=r+6,i.rounding=1,t=t.asin(),e=G(i,r+4,a).times(.5),i.precision=r,i.rounding=a,e.minus(t))},C.inverseHyperbolicCosine=C.acosh=function(){var e,t,i=this,n=i.constructor;return i.lte(1)?new n(i.eq(1)?0:NaN):i.isFinite()?(e=n.precision,t=n.rounding,n.precision=e+Math.max(Math.abs(i.e),i.sd())+4,n.rounding=1,p=!1,i=i.times(i).minus(1).sqrt().plus(i),p=!0,n.precision=e,n.rounding=t,i.ln()):new n(i)},C.inverseHyperbolicSine=C.asinh=function(){var e,t,i=this,n=i.constructor;return!i.isFinite()||i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+2*Math.max(Math.abs(i.e),i.sd())+6,n.rounding=1,p=!1,i=i.times(i).plus(1).sqrt().plus(i),p=!0,n.precision=e,n.rounding=t,i.ln())},C.inverseHyperbolicTangent=C.atanh=function(){var e,t,i,n,r=this,a=r.constructor;return r.isFinite()?r.e>=0?new a(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(e=a.precision,t=a.rounding,n=r.sd(),Math.max(n,e)<2*-r.e-1?L(new a(r),e,t,!0):(a.precision=i=n-r.e,r=N(r.plus(1),new a(1).minus(r),i+e,1),a.precision=e+4,a.rounding=1,r=r.ln(),a.precision=e,a.rounding=t,r.times(.5))):new a(NaN)},C.inverseSine=C.asin=function(){var e,t,i,n,r=this,a=r.constructor;return r.isZero()?new a(r):(t=r.abs().cmp(1),i=a.precision,n=a.rounding,-1!==t?0===t?((e=G(a,i+4,n).times(.5)).s=r.s,e):new a(NaN):(a.precision=i+6,a.rounding=1,r=r.div(new a(1).minus(r.times(r)).sqrt().plus(1)).atan(),a.precision=i,a.rounding=n,r.times(2)))},C.inverseTangent=C.atan=function(){var e,t,i,n,r,a,s,o,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(c.isFinite()){if(c.isZero())return new u(c);if(c.abs().eq(1)&&h+4<=P)return(s=G(u,h+4,d).times(.25)).s=c.s,s}else{if(!c.s)return new u(NaN);if(h+4<=P)return(s=G(u,h+4,d).times(.5)).s=c.s,s}for(u.precision=o=h+10,u.rounding=1,e=i=Math.min(28,o/M+2|0);e;--e)c=c.div(c.times(c).plus(1).sqrt().plus(1));for(p=!1,t=Math.ceil(o/M),n=1,l=c.times(c),s=new u(c),r=c;-1!==e;)if(r=r.times(l),a=s.minus(r.div(n+=2)),r=r.times(l),void 0!==(s=a.plus(r.div(n+=2))).d[t])for(e=t;s.d[e]===a.d[e]&&e--;);return i&&(s=s.times(2<<i-1)),p=!0,L(s,u.precision=h,u.rounding=d,!0)},C.isFinite=function(){return!!this.d},C.isInteger=C.isInt=function(){return!!this.d&&y(this.e/M)>this.d.length-2},C.isNaN=function(){return!this.s},C.isNegative=C.isNeg=function(){return this.s<0},C.isPositive=C.isPos=function(){return this.s>0},C.isZero=function(){return!!this.d&&0===this.d[0]},C.lessThan=C.lt=function(e){return this.cmp(e)<0},C.lessThanOrEqualTo=C.lte=function(e){return this.cmp(e)<1},C.logarithm=C.log=function(e){var t,i,n,r,a,s,o,l,c=this,u=c.constructor,h=u.precision,d=u.rounding;if(null==e)e=new u(10),t=!0;else{if(i=(e=new u(e)).d,e.s<0||!i||!i[0]||e.eq(1))return new u(NaN);t=e.eq(10)}if(i=c.d,c.s<0||!i||!i[0]||c.eq(1))return new u(i&&!i[0]?-1/0:1!=c.s?NaN:i?0:1/0);if(t)if(i.length>1)a=!0;else{for(r=i[0];r%10==0;)r/=10;a=1!==r}if(p=!1,s=X(c,o=h+5),n=t?F(u,o+10):X(e,o),k((l=N(s,n,o,1)).d,r=h,d))do{if(s=X(c,o+=10),n=t?F(u,o+10):X(e,o),l=N(s,n,o,1),!a){+D(l.d).slice(r+1,r+15)+1==1e14&&(l=L(l,h+1,0));break}}while(k(l.d,r+=10,d));return p=!0,L(l,h,d)},C.minus=C.sub=function(e){var t,i,n,r,a,s,o,l,c,u,h,d,f=this,m=f.constructor;if(e=new m(e),!f.d||!e.d)return f.s&&e.s?f.d?e.s=-e.s:e=new m(e.d||f.s!==e.s?f:NaN):e=new m(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.plus(e);if(c=f.d,d=e.d,o=m.precision,l=m.rounding,!c[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!c[0])return new m(3===l?-0:0);e=new m(f)}return p?L(e,o,l):e}if(i=y(e.e/M),u=y(f.e/M),c=c.slice(),a=u-i){for((h=a<0)?(t=c,a=-a,s=d.length):(t=d,i=u,s=c.length),a>(n=Math.max(Math.ceil(o/M),s)+2)&&(a=n,t.length=1),t.reverse(),n=a;n--;)t.push(0);t.reverse()}else{for((h=(n=c.length)<(s=d.length))&&(s=n),n=0;n<s;n++)if(c[n]!=d[n]){h=c[n]<d[n];break}a=0}for(h&&(t=c,c=d,d=t,e.s=-e.s),s=c.length,n=d.length-s;n>0;--n)c[s++]=0;for(n=d.length;n>a;){if(c[--n]<d[n]){for(r=n;r&&0===c[--r];)c[r]=x-1;--c[r],c[n]+=x}c[n]-=d[n]}for(;0===c[--s];)c.pop();for(;0===c[0];c.shift())--i;return c[0]?(e.d=c,e.e=B(c,i),p?L(e,o,l):e):new m(3===l?-0:0)},C.modulo=C.mod=function(e){var t,i=this,n=i.constructor;return e=new n(e),!i.d||!e.s||e.d&&!e.d[0]?new n(NaN):!e.d||i.d&&!i.d[0]?L(new n(i),n.precision,n.rounding):(p=!1,9==n.modulo?(t=N(i,e.abs(),0,3,1)).s*=e.s:t=N(i,e,0,n.modulo,1),t=t.times(e),p=!0,i.minus(t))},C.naturalExponential=C.exp=function(){return Y(this)},C.naturalLogarithm=C.ln=function(){return X(this)},C.negated=C.neg=function(){var e=new this.constructor(this);return e.s=-e.s,L(e)},C.plus=C.add=function(e){var t,i,n,r,a,s,o,l,c,u,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d||(e=new d(e.d||h.s===e.s?h:NaN)):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.minus(e);if(c=h.d,u=e.d,o=d.precision,l=d.rounding,!c[0]||!u[0])return u[0]||(e=new d(h)),p?L(e,o,l):e;if(a=y(h.e/M),n=y(e.e/M),c=c.slice(),r=a-n){for(r<0?(i=c,r=-r,s=u.length):(i=u,n=a,s=c.length),r>(s=(a=Math.ceil(o/M))>s?a+1:s+1)&&(r=s,i.length=1),i.reverse();r--;)i.push(0);i.reverse()}for((s=c.length)-(r=u.length)<0&&(r=s,i=u,u=c,c=i),t=0;r;)t=(c[--r]=c[r]+u[r]+t)/x|0,c[r]%=x;for(t&&(c.unshift(t),++n),s=c.length;0==c[--s];)c.pop();return e.d=c,e.e=B(c,n),p?L(e,o,l):e},C.precision=C.sd=function(e){var t,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(g+e);return i.d?(t=V(i.d),e&&i.e+1>t&&(t=i.e+1)):t=NaN,t},C.round=function(){var e=this,t=e.constructor;return L(new t(e),e.e+1,t.rounding)},C.sine=C.sin=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+Math.max(i.e,i.sd())+M,n.rounding=1,i=function(e,t){var i,n=t.d.length;if(n<3)return t.isZero()?t:K(e,2,t,t);i=(i=1.4*Math.sqrt(n))>16?16:0|i,t=K(e,2,t=t.times(1/J(5,i)),t);for(var r,a=new e(5),s=new e(16),o=new e(20);i--;)r=t.times(t),t=t.times(a.plus(r.times(s.times(r).minus(o))));return t}(n,$(n,i)),n.precision=e,n.rounding=t,L(o>2?i.neg():i,e,t,!0)):new n(NaN)},C.squareRoot=C.sqrt=function(){var e,t,i,n,r,a,s=this,o=s.d,l=s.e,c=s.s,u=s.constructor;if(1!==c||!o||!o[0])return new u(!c||c<0&&(!o||o[0])?NaN:o?s:1/0);for(p=!1,0==(c=Math.sqrt(+s))||c==1/0?(((t=D(o)).length+l)%2==0&&(t+="0"),c=Math.sqrt(t),l=y((l+1)/2)-(l<0||l%2),n=new u(t=c==1/0?"5e"+l:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new u(c.toString()),i=(l=u.precision)+3;;)if(n=(a=n).plus(N(s,a,i+2,1)).times(.5),D(a.d).slice(0,i)===(t=D(n.d)).slice(0,i)){if("9999"!=(t=t.slice(i-3,i+1))&&(r||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(L(n,l+1,1),e=!n.times(n).eq(s));break}if(!r&&(L(a,l+1,0),a.times(a).eq(s))){n=a;break}i+=4,r=1}return p=!0,L(n,l,u.rounding,e)},C.tangent=C.tan=function(){var e,t,i=this,n=i.constructor;return i.isFinite()?i.isZero()?new n(i):(e=n.precision,t=n.rounding,n.precision=e+10,n.rounding=1,(i=i.sin()).s=1,i=N(i,new n(1).minus(i.times(i)).sqrt(),e+10,0),n.precision=e,n.rounding=t,L(2==o||4==o?i.neg():i,e,t,!0)):new n(NaN)},C.times=C.mul=function(e){var t,i,n,r,a,s,o,l,c,u=this,h=u.constructor,d=u.d,f=(e=new h(e)).d;if(e.s*=u.s,!(d&&d[0]&&f&&f[0]))return new h(!e.s||d&&!d[0]&&!f||f&&!f[0]&&!d?NaN:d&&f?0*e.s:e.s/0);for(i=y(u.e/M)+y(e.e/M),(l=d.length)<(c=f.length)&&(a=d,d=f,f=a,s=l,l=c,c=s),a=[],n=s=l+c;n--;)a.push(0);for(n=c;--n>=0;){for(t=0,r=l+n;r>n;)o=a[r]+f[n]*d[r-n-1]+t,a[r--]=o%x|0,t=o/x|0;a[r]=(a[r]+t)%x|0}for(;!a[--s];)a.pop();return t?++i:a.shift(),e.d=a,e.e=B(a,i),p?L(e,h.precision,h.rounding):e},C.toBinary=function(e,t){return ee(this,2,e,t)},C.toDecimalPlaces=C.toDP=function(e,t){var i=this,n=i.constructor;return i=new n(i),void 0===e?i:(O(e,0,c),void 0===t?t=n.rounding:O(t,0,8),L(i,e+i.e+1,t))},C.toExponential=function(e,t){var i,n=this,r=n.constructor;return void 0===e?i=U(n,!0):(O(e,0,c),void 0===t?t=r.rounding:O(t,0,8),i=U(n=L(new r(n),e+1,t),!0,e+1)),n.isNeg()&&!n.isZero()?"-"+i:i},C.toFixed=function(e,t){var i,n,r=this,a=r.constructor;return void 0===e?i=U(r):(O(e,0,c),void 0===t?t=a.rounding:O(t,0,8),i=U(n=L(new a(r),e+r.e+1,t),!1,e+n.e+1)),r.isNeg()&&!r.isZero()?"-"+i:i},C.toFraction=function(e){var t,i,n,r,a,s,o,l,c,u,h,d,f=this,m=f.d,v=f.constructor;if(!m)return new v(f);if(c=i=new v(1),n=l=new v(0),s=(a=(t=new v(n)).e=V(m)-f.e-1)%M,t.d[0]=A(10,s<0?M+s:s),null==e)e=a>0?t:c;else{if(!(o=new v(e)).isInt()||o.lt(c))throw Error(g+o);e=o.gt(t)?a>0?t:c:o}for(p=!1,o=new v(D(m)),u=v.precision,v.precision=a=m.length*M*2;h=N(o,t,0,1,1),1!=(r=i.plus(h.times(n))).cmp(e);)i=n,n=r,r=c,c=l.plus(h.times(r)),l=r,r=t,t=o.minus(h.times(r)),o=r;return r=N(e.minus(i),n,0,1,1),l=l.plus(r.times(c)),i=i.plus(r.times(n)),l.s=c.s=f.s,d=N(c,n,a,1).minus(f).abs().cmp(N(l,i,a,1).minus(f).abs())<1?[c,n]:[l,i],v.precision=u,p=!0,d},C.toHexadecimal=C.toHex=function(e,t){return ee(this,16,e,t)},C.toNearest=function(e,t){var i=this,n=i.constructor;if(i=new n(i),null==e){if(!i.d)return i;e=new n(1),t=n.rounding}else{if(e=new n(e),void 0===t?t=n.rounding:O(t,0,8),!i.d)return e.s?i:e;if(!e.d)return e.s&&(e.s=i.s),e}return e.d[0]?(p=!1,i=N(i,e,0,t,1).times(e),p=!0,L(i)):(e.s=i.s,i=e),i},C.toNumber=function(){return+this},C.toOctal=function(e,t){return ee(this,8,e,t)},C.toPower=C.pow=function(e){var t,i,n,r,a,s,o=this,l=o.constructor,c=+(e=new l(e));if(!(o.d&&e.d&&o.d[0]&&e.d[0]))return new l(A(+o,c));if((o=new l(o)).eq(1))return o;if(n=l.precision,a=l.rounding,e.eq(1))return L(o,n,a);if((t=y(e.e/M))>=e.d.length-1&&(i=c<0?-c:c)<=9007199254740991)return r=H(l,o,i,n),e.s<0?new l(1).div(r):L(r,n,a);if((s=o.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(s=1),0==o.e&&1==o.d[0]&&1==o.d.length)return o.s=s,o}return(t=0!=(i=A(+o,c))&&isFinite(i)?new l(i+"").e:y(c*(Math.log("0."+D(o.d))/Math.LN10+o.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?s/0:0):(p=!1,l.rounding=o.s=1,i=Math.min(12,(t+"").length),(r=Y(e.times(X(o,n+i)),n)).d&&k((r=L(r,n+5,1)).d,n,a)&&(t=n+10,+D((r=L(Y(e.times(X(o,t+i)),t),t+5,1)).d).slice(n+1,n+15)+1==1e14&&(r=L(r,n+1,0))),r.s=s,p=!0,l.rounding=a,L(r,n,a))},C.toPrecision=function(e,t){var i,n=this,r=n.constructor;return void 0===e?i=U(n,n.e<=r.toExpNeg||n.e>=r.toExpPos):(O(e,1,c),void 0===t?t=r.rounding:O(t,0,8),i=U(n=L(new r(n),e,t),e<=n.e||n.e<=r.toExpNeg,e)),n.isNeg()&&!n.isZero()?"-"+i:i},C.toSignificantDigits=C.toSD=function(e,t){var i=this.constructor;return void 0===e?(e=i.precision,t=i.rounding):(O(e,1,c),void 0===t?t=i.rounding:O(t,0,8)),L(new i(this),e,t)},C.toString=function(){var e=this,t=e.constructor,i=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+i:i},C.truncated=C.trunc=function(){return L(new this.constructor(this),this.e+1,1)},C.valueOf=C.toJSON=function(){var e=this,t=e.constructor,i=U(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+i:i};var N=function(){function e(e,t,i){var n,r=0,a=e.length;for(e=e.slice();a--;)n=e[a]*t+r,e[a]=n%i|0,r=n/i|0;return r&&e.unshift(r),e}function t(e,t,i,n){var r,a;if(i!=n)a=i>n?1:-1;else for(r=a=0;r<i;r++)if(e[r]!=t[r]){a=e[r]>t[r]?1:-1;break}return a}function i(e,t,i,n){for(var r=0;i--;)e[i]-=r,r=e[i]<t[i]?1:0,e[i]=r*n+e[i]-t[i];for(;!e[0]&&e.length>1;)e.shift()}return function(n,r,a,o,l,c){var u,h,d,f,p,m,g,v,b,_,A,E,w,S,T,R,P,C,D,O,k=n.constructor,I=n.s==r.s?1:-1,N=n.d,U=r.d;if(!(N&&N[0]&&U&&U[0]))return new k(n.s&&r.s&&(N?!U||N[0]!=U[0]:U)?N&&0==N[0]||!U?0*I:I/0:NaN);for(c?(p=1,h=n.e-r.e):(c=x,p=M,h=y(n.e/p)-y(r.e/p)),D=U.length,P=N.length,_=(b=new k(I)).d=[],d=0;U[d]==(N[d]||0);d++);if(U[d]>(N[d]||0)&&h--,null==a?(S=a=k.precision,o=k.rounding):S=l?a+(n.e-r.e)+1:a,S<0)_.push(1),m=!0;else{if(S=S/p+2|0,d=0,1==D){for(f=0,U=U[0],S++;(d<P||f)&&S--;d++)T=f*c+(N[d]||0),_[d]=T/U|0,f=T%U|0;m=f||d<P}else{for((f=c/(U[0]+1)|0)>1&&(U=e(U,f,c),N=e(N,f,c),D=U.length,P=N.length),R=D,E=(A=N.slice(0,D)).length;E<D;)A[E++]=0;(O=U.slice()).unshift(0),C=U[0],U[1]>=c/2&&++C;do{f=0,(u=t(U,A,D,E))<0?(w=A[0],D!=E&&(w=w*c+(A[1]||0)),(f=w/C|0)>1?(f>=c&&(f=c-1),1==(u=t(g=e(U,f,c),A,v=g.length,E=A.length))&&(f--,i(g,D<v?O:U,v,c))):(0==f&&(u=f=1),g=U.slice()),(v=g.length)<E&&g.unshift(0),i(A,g,E,c),-1==u&&(u=t(U,A,D,E=A.length))<1&&(f++,i(A,D<E?O:U,E,c)),E=A.length):0===u&&(f++,A=[0]),_[d++]=f,u&&A[0]?A[E++]=N[R]||0:(A=[N[R]],E=1)}while((R++<P||void 0!==A[0])&&S--);m=void 0!==A[0]}_[0]||_.shift()}if(1==p)b.e=h,s=m;else{for(d=1,f=_[0];f>=10;f/=10)d++;b.e=d+h*p-1,L(b,l?a+b.e+1:a,o,m)}return b}}();function L(e,t,i,n){var r,a,s,o,l,c,u,h,d,f=e.constructor;e:if(null!=t){if(!(h=e.d))return e;for(r=1,o=h[0];o>=10;o/=10)r++;if((a=t-r)<0)a+=M,s=t,l=(u=h[d=0])/A(10,r-s-1)%10|0;else if((d=Math.ceil((a+1)/M))>=(o=h.length)){if(!n)break e;for(;o++<=d;)h.push(0);u=l=0,r=1,s=(a%=M)-M+1}else{for(u=o=h[d],r=1;o>=10;o/=10)r++;l=(s=(a%=M)-M+r)<0?0:u/A(10,r-s-1)%10|0}if(n=n||t<0||void 0!==h[d+1]||(s<0?u:u%A(10,r-s-1)),c=i<4?(l||n)&&(0==i||i==(e.s<0?3:2)):l>5||5==l&&(4==i||n||6==i&&(a>0?s>0?u/A(10,r-s):0:h[d-1])%10&1||i==(e.s<0?8:7)),t<1||!h[0])return h.length=0,c?(t-=e.e+1,h[0]=A(10,(M-t%M)%M),e.e=-t||0):h[0]=e.e=0,e;if(0==a?(h.length=d,o=1,d--):(h.length=d+1,o=A(10,M-a),h[d]=s>0?(u/A(10,r-s)%A(10,s)|0)*o:0),c)for(;;){if(0==d){for(a=1,s=h[0];s>=10;s/=10)a++;for(s=h[0]+=o,o=1;s>=10;s/=10)o++;a!=o&&(e.e++,h[0]==x&&(h[0]=1));break}if(h[d]+=o,h[d]!=x)break;h[d--]=0,o=1}for(a=h.length;0===h[--a];)h.pop()}return p&&(e.e>f.maxE?(e.d=null,e.e=NaN):e.e<f.minE&&(e.e=0,e.d=[0])),e}function U(e,t,i){if(!e.isFinite())return Z(e);var n,r=e.e,a=D(e.d),s=a.length;return t?(i&&(n=i-s)>0?a=a.charAt(0)+"."+a.slice(1)+z(n):s>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(e.e<0?"e":"e+")+e.e):r<0?(a="0."+z(-r-1)+a,i&&(n=i-s)>0&&(a+=z(n))):r>=s?(a+=z(r+1-s),i&&(n=i-r-1)>0&&(a=a+"."+z(n))):((n=r+1)<s&&(a=a.slice(0,n)+"."+a.slice(n)),i&&(n=i-s)>0&&(r+1===s&&(a+="."),a+=z(n))),a}function B(e,t){var i=e[0];for(t*=M;i>=10;i/=10)t++;return t}function F(e,t,i){if(t>R)throw p=!0,i&&(e.precision=i),Error(v);return L(new e(h),t,1,!0)}function G(e,t,i){if(t>P)throw Error(v);return L(new e(d),t,i,!0)}function V(e){var t=e.length-1,i=t*M+1;if(t=e[t]){for(;t%10==0;t/=10)i--;for(t=e[0];t>=10;t/=10)i++}return i}function z(e){for(var t="";e--;)t+="0";return t}function H(e,t,i,n){var r,a=new e(1),s=Math.ceil(n/M+4);for(p=!1;;){if(i%2&&te((a=a.times(t)).d,s)&&(r=!0),0===(i=y(i/2))){i=a.d.length-1,r&&0===a.d[i]&&++a.d[i];break}te((t=t.times(t)).d,s)}return p=!0,a}function j(e){return 1&e.d[e.d.length-1]}function W(e,t,i){for(var n,r=new e(t[0]),a=0;++a<t.length;){if(!(n=new e(t[a])).s){r=n;break}r[i](n)&&(r=n)}return r}function Y(e,t){var i,n,r,a,s,o,l,c=0,u=0,h=0,d=e.constructor,f=d.rounding,m=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(p=!1,l=m):l=t,o=new d(.03125);e.e>-2;)e=e.times(o),h+=5;for(l+=n=Math.log(A(2,h))/Math.LN10*2+5|0,i=a=s=new d(1),d.precision=l;;){if(a=L(a.times(e),l,1),i=i.times(++u),D((o=s.plus(N(a,i,l,1))).d).slice(0,l)===D(s.d).slice(0,l)){for(r=h;r--;)s=L(s.times(s),l,1);if(null!=t)return d.precision=m,s;if(!(c<3&&k(s.d,l-n,f,c)))return L(s,d.precision=m,f,p=!0);d.precision=l+=10,i=a=o=new d(1),u=0,c++}s=o}}function X(e,t){var i,n,r,a,s,o,l,c,u,h,d,f=1,m=e,g=m.d,v=m.constructor,b=v.rounding,_=v.precision;if(m.s<0||!g||!g[0]||!m.e&&1==g[0]&&1==g.length)return new v(g&&!g[0]?-1/0:1!=m.s?NaN:g?0:m);if(null==t?(p=!1,u=_):u=t,v.precision=u+=10,n=(i=D(g)).charAt(0),!(Math.abs(a=m.e)<15e14))return c=F(v,u+2,_).times(a+""),m=X(new v(n+"."+i.slice(1)),u-10).plus(c),v.precision=_,null==t?L(m,_,b,p=!0):m;for(;n<7&&1!=n||1==n&&i.charAt(1)>3;)n=(i=D((m=m.times(e)).d)).charAt(0),f++;for(a=m.e,n>1?(m=new v("0."+i),a++):m=new v(n+"."+i.slice(1)),h=m,l=s=m=N(m.minus(1),m.plus(1),u,1),d=L(m.times(m),u,1),r=3;;){if(s=L(s.times(d),u,1),D((c=l.plus(N(s,new v(r),u,1))).d).slice(0,u)===D(l.d).slice(0,u)){if(l=l.times(2),0!==a&&(l=l.plus(F(v,u+2,_).times(a+""))),l=N(l,new v(f),u,1),null!=t)return v.precision=_,l;if(!k(l.d,u-10,b,o))return L(l,v.precision=_,b,p=!0);v.precision=u+=10,c=s=m=N(h.minus(1),h.plus(1),u,1),d=L(m.times(m),u,1),r=o=1}l=c,r+=2}}function Z(e){return String(e.s*e.s/0)}function q(e,t){var i,n,r;for((i=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(i<0&&(i=n),i+=+t.slice(n+1),t=t.substring(0,n)):i<0&&(i=t.length),n=0;48===t.charCodeAt(n);n++);for(r=t.length;48===t.charCodeAt(r-1);--r);if(t=t.slice(n,r)){if(r-=n,e.e=i=i-n-1,e.d=[],n=(i+1)%M,i<0&&(n+=M),n<r){for(n&&e.d.push(+t.slice(0,n)),r-=M;n<r;)e.d.push(+t.slice(n,n+=M));t=t.slice(n),n=M-t.length}else n-=r;for(;n--;)t+="0";e.d.push(+t),p&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Q(e,t){var i,n,r,s,o,l,c,u,h;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),T.test(t))return q(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(t))i=16,t=t.toLowerCase();else if(E.test(t))i=2;else{if(!S.test(t))throw Error(g+t);i=8}for((s=t.search(/p/i))>0?(c=+t.slice(s+1),t=t.substring(2,s)):t=t.slice(2),o=(s=t.indexOf("."))>=0,n=e.constructor,o&&(s=(l=(t=t.replace(".","")).length)-s,r=H(n,new n(i),s,2*s)),s=h=(u=I(t,i,x)).length-1;0===u[s];--s)u.pop();return s<0?new n(0*e.s):(e.e=B(u,h),e.d=u,p=!1,o&&(e=N(e,r,4*l)),c&&(e=e.times(Math.abs(c)<54?A(2,c):a.pow(2,c))),p=!0,e)}function K(e,t,i,n,r){var a,s,o,l,c=e.precision,u=Math.ceil(c/M);for(p=!1,l=i.times(i),o=new e(n);;){if(s=N(o.times(l),new e(t++*t++),c,1),o=r?n.plus(s):n.minus(s),n=N(s.times(l),new e(t++*t++),c,1),void 0!==(s=o.plus(n)).d[u]){for(a=u;s.d[a]===o.d[a]&&a--;);if(-1==a)break}a=o,o=n,n=s,s=a}return p=!0,s.d.length=u+1,s}function J(e,t){for(var i=e;--t;)i*=e;return i}function $(e,t){var i,n=t.s<0,r=G(e,e.precision,1),a=r.times(.5);if((t=t.abs()).lte(a))return o=n?4:1,t;if((i=t.divToInt(r)).isZero())o=n?3:2;else{if((t=t.minus(i.times(r))).lte(a))return o=j(i)?n?2:3:n?4:1,t;o=j(i)?n?1:4:n?3:2}return t.minus(r).abs()}function ee(e,t,i,n){var r,a,o,l,h,d,f,p,m,g=e.constructor,v=void 0!==i;if(v?(O(i,1,c),void 0===n?n=g.rounding:O(n,0,8)):(i=g.precision,n=g.rounding),e.isFinite()){for(v?(r=2,16==t?i=4*i-3:8==t&&(i=3*i-2)):r=t,(o=(f=U(e)).indexOf("."))>=0&&(f=f.replace(".",""),(m=new g(1)).e=f.length-o,m.d=I(U(m),10,r),m.e=m.d.length),a=h=(p=I(f,10,r)).length;0==p[--h];)p.pop();if(p[0]){if(o<0?a--:((e=new g(e)).d=p,e.e=a,p=(e=N(e,m,i,n,0,r)).d,a=e.e,d=s),o=p[i],l=r/2,d=d||void 0!==p[i+1],d=n<4?(void 0!==o||d)&&(0===n||n===(e.s<0?3:2)):o>l||o===l&&(4===n||d||6===n&&1&p[i-1]||n===(e.s<0?8:7)),p.length=i,d)for(;++p[--i]>r-1;)p[i]=0,i||(++a,p.unshift(1));for(h=p.length;!p[h-1];--h);for(o=0,f="";o<h;o++)f+=u.charAt(p[o]);if(v){if(h>1)if(16==t||8==t){for(o=16==t?4:3,--h;h%o;h++)f+="0";for(h=(p=I(f,r,t)).length;!p[h-1];--h);for(o=1,f="1.";o<h;o++)f+=u.charAt(p[o])}else f=f.charAt(0)+"."+f.slice(1);f=f+(a<0?"p":"p+")+a}else if(a<0){for(;++a;)f="0"+f;f="0."+f}else if(++a>h)for(a-=h;a--;)f+="0";else a<h&&(f=f.slice(0,a)+"."+f.slice(a))}else f=v?"0p+0":"0";f=(16==t?"0x":2==t?"0b":8==t?"0o":"")+f}else f=Z(e);return e.s<0?"-"+f:f}function te(e,t){if(e.length>t)return e.length=t,!0}function ie(e){return new this(e).abs()}function ne(e){return new this(e).acos()}function re(e){return new this(e).acosh()}function ae(e,t){return new this(e).plus(t)}function se(e){return new this(e).asin()}function oe(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ce(e){return new this(e).atanh()}function ue(e,t){e=new this(e),t=new this(t);var i,n=this.precision,r=this.rounding,a=n+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(i=t.s<0?G(this,n,r):new this(0)).s=e.s:!e.d||t.isZero()?(i=G(this,a,1).times(.5)).s=e.s:t.s<0?(this.precision=a,this.rounding=1,i=this.atan(N(e,t,a,1)),t=G(this,a,1),this.precision=n,this.rounding=r,i=e.s<0?i.minus(t):i.plus(t)):i=this.atan(N(e,t,a,1)):(i=G(this,a,1).times(t.s>0?.25:.75)).s=e.s:i=new this(NaN),i}function he(e){return new this(e).cbrt()}function de(e){return L(e=new this(e),e.e+1,2)}function fe(e,t,i){return new this(e).clamp(t,i)}function pe(e){if(!e||"object"!=typeof e)throw Error(m+"Object expected");var t,i,n,r=!0===e.defaults,a=["precision",1,c,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<a.length;t+=3)if(i=a[t],r&&(this[i]=f[i]),void 0!==(n=e[i])){if(!(y(n)===n&&n>=a[t+1]&&n<=a[t+2]))throw Error(g+i+": "+n);this[i]=n}if(i="crypto",r&&(this[i]=f[i]),void 0!==(n=e[i])){if(!0!==n&&!1!==n&&0!==n&&1!==n)throw Error(g+i+": "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(b);this[i]=!0}else this[i]=!1}return this}function me(e){return new this(e).cos()}function ge(e){return new this(e).cosh()}function ve(e,t){return new this(e).div(t)}function be(e){return new this(e).exp()}function _e(e){return L(e=new this(e),e.e+1,3)}function ye(){var e,t,i=new this(0);for(p=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)i.d&&(i=i.plus(t.times(t)));else{if(t.s)return p=!0,new this(1/0);i=t}return p=!0,i.sqrt()}function Ae(e){return e instanceof a||e&&e.toStringTag===_||!1}function Ee(e){return new this(e).ln()}function we(e,t){return new this(e).log(t)}function Se(e){return new this(e).log(2)}function Te(e){return new this(e).log(10)}function xe(){return W(this,arguments,"lt")}function Me(){return W(this,arguments,"gt")}function Re(e,t){return new this(e).mod(t)}function Pe(e,t){return new this(e).mul(t)}function Ce(e,t){return new this(e).pow(t)}function De(e){var t,i,n,r,a=0,s=new this(1),o=[];if(void 0===e?e=this.precision:O(e,1,c),n=Math.ceil(e/M),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(n));a<n;)(r=t[a])>=429e7?t[a]=crypto.getRandomValues(new Uint32Array(1))[0]:o[a++]=r%1e7;else{if(!crypto.randomBytes)throw Error(b);for(t=crypto.randomBytes(n*=4);a<n;)(r=t[a]+(t[a+1]<<8)+(t[a+2]<<16)+((127&t[a+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,a):(o.push(r%1e7),a+=4);a=n/4}else for(;a<n;)o[a++]=1e7*Math.random()|0;for(n=o[--a],e%=M,n&&e&&(r=A(10,M-e),o[a]=(n/r|0)*r);0===o[a];a--)o.pop();if(a<0)i=0,o=[0];else{for(i=-1;0===o[0];i-=M)o.shift();for(n=1,r=o[0];r>=10;r/=10)n++;n<M&&(i-=M-n)}return s.e=i,s.d=o,s}function Oe(e){return L(e=new this(e),e.e+1,this.rounding)}function ke(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Ie(e){return new this(e).sin()}function Ne(e){return new this(e).sinh()}function Le(e){return new this(e).sqrt()}function Ue(e,t){return new this(e).sub(t)}function Be(){var e=0,t=arguments,i=new this(t[e]);for(p=!1;i.s&&++e<t.length;)i=i.plus(t[e]);return p=!0,L(i,this.precision,this.rounding)}function Fe(e){return new this(e).tan()}function Ge(e){return new this(e).tanh()}function Ve(e){return L(e=new this(e),e.e+1,1)}(a=function e(t){var i,n,r;function a(e){var t,i,n,r=this;if(!(r instanceof a))return new a(e);if(r.constructor=a,Ae(e))return r.s=e.s,void(p?!e.d||e.e>a.maxE?(r.e=NaN,r.d=null):e.e<a.minE?(r.e=0,r.d=[0]):(r.e=e.e,r.d=e.d.slice()):(r.e=e.e,r.d=e.d?e.d.slice():e.d));if("number"==(n=typeof e)){if(0===e)return r.s=1/e<0?-1:1,r.e=0,void(r.d=[0]);if(e<0?(e=-e,r.s=-1):r.s=1,e===~~e&&e<1e7){for(t=0,i=e;i>=10;i/=10)t++;return void(p?t>a.maxE?(r.e=NaN,r.d=null):t<a.minE?(r.e=0,r.d=[0]):(r.e=t,r.d=[e]):(r.e=t,r.d=[e]))}return 0*e!=0?(e||(r.s=NaN),r.e=NaN,void(r.d=null)):q(r,e.toString())}if("string"!==n)throw Error(g+e);return 45===(i=e.charCodeAt(0))?(e=e.slice(1),r.s=-1):(43===i&&(e=e.slice(1)),r.s=1),T.test(e)?q(r,e):Q(r,e)}if(a.prototype=C,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.EUCLID=9,a.config=a.set=pe,a.clone=e,a.isDecimal=Ae,a.abs=ie,a.acos=ne,a.acosh=re,a.add=ae,a.asin=se,a.asinh=oe,a.atan=le,a.atanh=ce,a.atan2=ue,a.cbrt=he,a.ceil=de,a.clamp=fe,a.cos=me,a.cosh=ge,a.div=ve,a.exp=be,a.floor=_e,a.hypot=ye,a.ln=Ee,a.log=we,a.log10=Te,a.log2=Se,a.max=xe,a.min=Me,a.mod=Re,a.mul=Pe,a.pow=Ce,a.random=De,a.round=Oe,a.sign=ke,a.sin=Ie,a.sinh=Ne,a.sqrt=Le,a.sub=Ue,a.sum=Be,a.tan=Fe,a.tanh=Ge,a.trunc=Ve,void 0===t&&(t={}),t&&!0!==t.defaults)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],i=0;i<r.length;)t.hasOwnProperty(n=r[i++])||(t[n]=this[n]);return a.config(t),a}(f)).prototype.constructor=a,a.default=a.Decimal=a,h=new a(h),d=new a(d),void 0===(n=function(){return a}.call(t,i,t,e))||(e.exports=n)}()},665:(e,t,i)=>{"use strict";i.r(t),i.d(t,{deviceType:()=>v,primaryInput:()=>b,supportsPassiveEvents:()=>l,supportsPointerEvents:()=>c,supportsTouchEvents:()=>h});var n="undefined"!=typeof window?window:{screen:{},navigator:{}},r=(n.matchMedia||function(){return{matches:!1}}).bind(n),a=!1,s={get passive(){return a=!0}},o=function(){};n.addEventListener&&n.addEventListener("p",o,s),n.removeEventListener&&n.removeEventListener("p",o,!1);var l=a,c="PointerEvent"in n,u="ontouchstart"in n,h=u||"TouchEvent"in n&&r("(any-pointer: coarse)").matches,d=(n.navigator.maxTouchPoints||0)>0||h,f=n.navigator.userAgent||"",p=r("(pointer: coarse)").matches&&/iPad|Macintosh/.test(f)&&Math.min(n.screen.width||0,n.screen.height||0)>=768,m=(r("(pointer: coarse)").matches||!r("(pointer: fine)").matches&&u)&&!/Windows.*Firefox/.test(f),g=r("(any-pointer: fine)").matches||r("(any-hover: hover)").matches||p||!u,v=!d||!g&&m?d?"touchOnly":"mouseOnly":"hybrid",b="mouseOnly"===v?"mouse":"touchOnly"===v||m?"touch":"mouse"},5987:e=>{"use strict";var t={single_source_shortest_paths:function(e,i,n){var r={},a={};a[i]=0;var s,o,l,c,u,h,d,f=t.PriorityQueue.make();for(f.push(i,0);!f.empty();)for(l in o=(s=f.pop()).value,c=s.cost,u=e[o]||{})u.hasOwnProperty(l)&&(h=c+u[l],d=a[l],(void 0===a[l]||d>h)&&(a[l]=h,f.push(l,h),r[l]=o));if(void 0!==n&&void 0===a[n]){var p=["Could not find a path from ",i," to ",n,"."].join("");throw new Error(p)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var i=[],n=t;n;)i.push(n),e[n],n=e[n];return i.reverse(),i},find_path:function(e,i,n){var r=t.single_source_shortest_paths(e,i,n);return t.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(e){var i,n=t.PriorityQueue,r={};for(i in e=e||{},n)n.hasOwnProperty(i)&&(r[i]=n[i]);return r.queue=[],r.sorter=e.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var i={value:e,cost:t};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},7856:function(e){e.exports=function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,i){return t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(e,i)}function i(e,n,r){return i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,i,n){var r=[null];r.push.apply(r,i);var a=new(Function.bind.apply(e,r));return n&&t(a,n.prototype),a},i.apply(null,arguments)}function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var a=Object.hasOwnProperty,s=Object.setPrototypeOf,o=Object.isFrozen,l=Object.getPrototypeOf,c=Object.getOwnPropertyDescriptor,u=Object.freeze,h=Object.seal,d=Object.create,f="undefined"!=typeof Reflect&&Reflect,p=f.apply,m=f.construct;p||(p=function(e,t,i){return e.apply(t,i)}),u||(u=function(e){return e}),h||(h=function(e){return e}),m||(m=function(e,t){return i(e,n(t))});var g,v=R(Array.prototype.forEach),b=R(Array.prototype.pop),_=R(Array.prototype.push),y=R(String.prototype.toLowerCase),A=R(String.prototype.toString),E=R(String.prototype.match),w=R(String.prototype.replace),S=R(String.prototype.indexOf),T=R(String.prototype.trim),x=R(RegExp.prototype.test),M=(g=TypeError,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m(g,t)});function R(e){return function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return p(e,t,n)}}function P(e,t,i){var n;i=null!==(n=i)&&void 0!==n?n:y,s&&s(e,null);for(var r=t.length;r--;){var a=t[r];if("string"==typeof a){var l=i(a);l!==a&&(o(t)||(t[r]=l),a=l)}e[a]=!0}return e}function C(e){var t,i=d(null);for(t in e)!0===p(a,e,[t])&&(i[t]=e[t]);return i}function D(e,t){for(;null!==e;){var i=c(e,t);if(i){if(i.get)return R(i.get);if("function"==typeof i.value)return R(i.value)}e=l(e)}return function(e){return console.warn("fallback value for",e),null}}var O=u(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),k=u(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),I=u(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N=u(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),L=u(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),U=u(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),B=u(["#text"]),F=u(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),G=u(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V=u(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),z=u(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),H=h(/\{\{[\w\W]*|[\w\W]*\}\}/gm),j=h(/<%[\w\W]*|[\w\W]*%>/gm),W=h(/\${[\w\W]*}/gm),Y=h(/^data-[\-\w.\u00B7-\uFFFF]/),X=h(/^aria-[\-\w]+$/),Z=h(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q=h(/^(?:\w+script|data):/i),Q=h(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),K=h(/^html$/i),J=function(){return"undefined"==typeof window?null:window};return function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J(),r=function(e){return t(e)};if(r.version="2.4.7",r.removed=[],!i||!i.document||9!==i.document.nodeType)return r.isSupported=!1,r;var a=i.document,s=i.document,o=i.DocumentFragment,l=i.HTMLTemplateElement,c=i.Node,h=i.Element,d=i.NodeFilter,f=i.NamedNodeMap,p=void 0===f?i.NamedNodeMap||i.MozNamedAttrMap:f,m=i.HTMLFormElement,g=i.DOMParser,R=i.trustedTypes,$=h.prototype,ee=D($,"cloneNode"),te=D($,"nextSibling"),ie=D($,"childNodes"),ne=D($,"parentNode");if("function"==typeof l){var re=s.createElement("template");re.content&&re.content.ownerDocument&&(s=re.content.ownerDocument)}var ae=function(t,i){if("object"!==e(t)||"function"!=typeof t.createPolicy)return null;var n=null,r="data-tt-policy-suffix";i.currentScript&&i.currentScript.hasAttribute(r)&&(n=i.currentScript.getAttribute(r));var a="dompurify"+(n?"#"+n:"");try{return t.createPolicy(a,{createHTML:function(e){return e},createScriptURL:function(e){return e}})}catch(e){return console.warn("TrustedTypes policy "+a+" could not be created."),null}}(R,a),se=ae?ae.createHTML(""):"",oe=s,le=oe.implementation,ce=oe.createNodeIterator,ue=oe.createDocumentFragment,he=oe.getElementsByTagName,de=a.importNode,fe={};try{fe=C(s).documentMode?s.documentMode:{}}catch(e){}var pe={};r.isSupported="function"==typeof ne&&le&&void 0!==le.createHTMLDocument&&9!==fe;var me,ge,ve=H,be=j,_e=W,ye=Y,Ae=X,Ee=q,we=Q,Se=Z,Te=null,xe=P({},[].concat(n(O),n(k),n(I),n(L),n(B))),Me=null,Re=P({},[].concat(n(F),n(G),n(V),n(z))),Pe=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ce=null,De=null,Oe=!0,ke=!0,Ie=!1,Ne=!0,Le=!1,Ue=!1,Be=!1,Fe=!1,Ge=!1,Ve=!1,ze=!1,He=!0,je=!1,We=!0,Ye=!1,Xe={},Ze=null,qe=P({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Qe=null,Ke=P({},["audio","video","img","source","image","track"]),Je=null,$e=P({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),et="http://www.w3.org/1998/Math/MathML",tt="http://www.w3.org/2000/svg",it="http://www.w3.org/1999/xhtml",nt=it,rt=!1,at=null,st=P({},[et,tt,it],A),ot=["application/xhtml+xml","text/html"],lt=null,ct=s.createElement("form"),ut=function(e){return e instanceof RegExp||e instanceof Function},ht=function(t){lt&&lt===t||(t&&"object"===e(t)||(t={}),t=C(t),me=me=-1===ot.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,ge="application/xhtml+xml"===me?A:y,Te="ALLOWED_TAGS"in t?P({},t.ALLOWED_TAGS,ge):xe,Me="ALLOWED_ATTR"in t?P({},t.ALLOWED_ATTR,ge):Re,at="ALLOWED_NAMESPACES"in t?P({},t.ALLOWED_NAMESPACES,A):st,Je="ADD_URI_SAFE_ATTR"in t?P(C($e),t.ADD_URI_SAFE_ATTR,ge):$e,Qe="ADD_DATA_URI_TAGS"in t?P(C(Ke),t.ADD_DATA_URI_TAGS,ge):Ke,Ze="FORBID_CONTENTS"in t?P({},t.FORBID_CONTENTS,ge):qe,Ce="FORBID_TAGS"in t?P({},t.FORBID_TAGS,ge):{},De="FORBID_ATTR"in t?P({},t.FORBID_ATTR,ge):{},Xe="USE_PROFILES"in t&&t.USE_PROFILES,Oe=!1!==t.ALLOW_ARIA_ATTR,ke=!1!==t.ALLOW_DATA_ATTR,Ie=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Le=t.SAFE_FOR_TEMPLATES||!1,Ue=t.WHOLE_DOCUMENT||!1,Ge=t.RETURN_DOM||!1,Ve=t.RETURN_DOM_FRAGMENT||!1,ze=t.RETURN_TRUSTED_TYPE||!1,Fe=t.FORCE_BODY||!1,He=!1!==t.SANITIZE_DOM,je=t.SANITIZE_NAMED_PROPS||!1,We=!1!==t.KEEP_CONTENT,Ye=t.IN_PLACE||!1,Se=t.ALLOWED_URI_REGEXP||Se,nt=t.NAMESPACE||it,Pe=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ut(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Pe.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ut(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Pe.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Pe.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Le&&(ke=!1),Ve&&(Ge=!0),Xe&&(Te=P({},n(B)),Me=[],!0===Xe.html&&(P(Te,O),P(Me,F)),!0===Xe.svg&&(P(Te,k),P(Me,G),P(Me,z)),!0===Xe.svgFilters&&(P(Te,I),P(Me,G),P(Me,z)),!0===Xe.mathMl&&(P(Te,L),P(Me,V),P(Me,z))),t.ADD_TAGS&&(Te===xe&&(Te=C(Te)),P(Te,t.ADD_TAGS,ge)),t.ADD_ATTR&&(Me===Re&&(Me=C(Me)),P(Me,t.ADD_ATTR,ge)),t.ADD_URI_SAFE_ATTR&&P(Je,t.ADD_URI_SAFE_ATTR,ge),t.FORBID_CONTENTS&&(Ze===qe&&(Ze=C(Ze)),P(Ze,t.FORBID_CONTENTS,ge)),We&&(Te["#text"]=!0),Ue&&P(Te,["html","head","body"]),Te.table&&(P(Te,["tbody"]),delete Ce.tbody),u&&u(t),lt=t)},dt=P({},["mi","mo","mn","ms","mtext"]),ft=P({},["foreignobject","desc","title","annotation-xml"]),pt=P({},["title","style","font","a","script"]),mt=P({},k);P(mt,I),P(mt,N);var gt=P({},L);P(gt,U);var vt=function(e){_(r.removed,{element:e});try{e.parentNode.removeChild(e)}catch(t){try{e.outerHTML=se}catch(t){e.remove()}}},bt=function(e,t){try{_(r.removed,{attribute:t.getAttributeNode(e),from:t})}catch(e){_(r.removed,{attribute:null,from:t})}if(t.removeAttribute(e),"is"===e&&!Me[e])if(Ge||Ve)try{vt(t)}catch(e){}else try{t.setAttribute(e,"")}catch(e){}},_t=function(e){var t,i;if(Fe)e="<remove></remove>"+e;else{var n=E(e,/^[\r\n\t ]+/);i=n&&n[0]}"application/xhtml+xml"===me&&nt===it&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var r=ae?ae.createHTML(e):e;if(nt===it)try{t=(new g).parseFromString(r,me)}catch(e){}if(!t||!t.documentElement){t=le.createDocument(nt,"template",null);try{t.documentElement.innerHTML=rt?se:r}catch(e){}}var a=t.body||t.documentElement;return e&&i&&a.insertBefore(s.createTextNode(i),a.childNodes[0]||null),nt===it?he.call(t,Ue?"html":"body")[0]:Ue?t.documentElement:a},yt=function(e){return ce.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},At=function(t){return"object"===e(c)?t instanceof c:t&&"object"===e(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Et=function(e,t,i){pe[e]&&v(pe[e],(function(e){e.call(r,t,i,lt)}))},wt=function(e){var t,i;if(Et("beforeSanitizeElements",e,null),(i=e)instanceof m&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof p)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return vt(e),!0;if(x(/[\u0080-\uFFFF]/,e.nodeName))return vt(e),!0;var n=ge(e.nodeName);if(Et("uponSanitizeElement",e,{tagName:n,allowedTags:Te}),e.hasChildNodes()&&!At(e.firstElementChild)&&(!At(e.content)||!At(e.content.firstElementChild))&&x(/<[/\w]/g,e.innerHTML)&&x(/<[/\w]/g,e.textContent))return vt(e),!0;if("select"===n&&x(/<template/i,e.innerHTML))return vt(e),!0;if(!Te[n]||Ce[n]){if(!Ce[n]&&Tt(n)){if(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,n))return!1;if(Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(n))return!1}if(We&&!Ze[n]){var a=ne(e)||e.parentNode,s=ie(e)||e.childNodes;if(s&&a)for(var o=s.length-1;o>=0;--o)a.insertBefore(ee(s[o],!0),te(e))}return vt(e),!0}return e instanceof h&&!function(e){var t=ne(e);t&&t.tagName||(t={namespaceURI:nt,tagName:"template"});var i=y(e.tagName),n=y(t.tagName);return!!at[e.namespaceURI]&&(e.namespaceURI===tt?t.namespaceURI===it?"svg"===i:t.namespaceURI===et?"svg"===i&&("annotation-xml"===n||dt[n]):Boolean(mt[i]):e.namespaceURI===et?t.namespaceURI===it?"math"===i:t.namespaceURI===tt?"math"===i&&ft[n]:Boolean(gt[i]):e.namespaceURI===it?!(t.namespaceURI===tt&&!ft[n])&&!(t.namespaceURI===et&&!dt[n])&&!gt[i]&&(pt[i]||!mt[i]):!("application/xhtml+xml"!==me||!at[e.namespaceURI]))}(e)?(vt(e),!0):"noscript"!==n&&"noembed"!==n&&"noframes"!==n||!x(/<\/no(script|embed|frames)/i,e.innerHTML)?(Le&&3===e.nodeType&&(t=e.textContent,t=w(t,ve," "),t=w(t,be," "),t=w(t,_e," "),e.textContent!==t&&(_(r.removed,{element:e.cloneNode()}),e.textContent=t)),Et("afterSanitizeElements",e,null),!1):(vt(e),!0)},St=function(e,t,i){if(He&&("id"===t||"name"===t)&&(i in s||i in ct))return!1;if(ke&&!De[t]&&x(ye,t));else if(Oe&&x(Ae,t));else if(!Me[t]||De[t]){if(!(Tt(e)&&(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,e)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(e))&&(Pe.attributeNameCheck instanceof RegExp&&x(Pe.attributeNameCheck,t)||Pe.attributeNameCheck instanceof Function&&Pe.attributeNameCheck(t))||"is"===t&&Pe.allowCustomizedBuiltInElements&&(Pe.tagNameCheck instanceof RegExp&&x(Pe.tagNameCheck,i)||Pe.tagNameCheck instanceof Function&&Pe.tagNameCheck(i))))return!1}else if(Je[t]);else if(x(Se,w(i,we,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==S(i,"data:")||!Qe[e])if(Ie&&!x(Ee,w(i,we,"")));else if(i)return!1;return!0},Tt=function(e){return e.indexOf("-")>0},xt=function(t){var i,n,a,s;Et("beforeSanitizeAttributes",t,null);var o=t.attributes;if(o){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Me};for(s=o.length;s--;){var c=i=o[s],u=c.name,h=c.namespaceURI;if(n="value"===u?i.value:T(i.value),a=ge(u),l.attrName=a,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,Et("uponSanitizeAttribute",t,l),n=l.attrValue,!l.forceKeepAttr&&(bt(u,t),l.keepAttr))if(Ne||!x(/\/>/i,n)){Le&&(n=w(n,ve," "),n=w(n,be," "),n=w(n,_e," "));var d=ge(t.nodeName);if(St(d,a,n)){if(!je||"id"!==a&&"name"!==a||(bt(u,t),n="user-content-"+n),ae&&"object"===e(R)&&"function"==typeof R.getAttributeType)if(h);else switch(R.getAttributeType(d,a)){case"TrustedHTML":n=ae.createHTML(n);break;case"TrustedScriptURL":n=ae.createScriptURL(n)}try{h?t.setAttributeNS(h,u,n):t.setAttribute(u,n),b(r.removed)}catch(e){}}}else bt(u,t)}Et("afterSanitizeAttributes",t,null)}},Mt=function e(t){var i,n=yt(t);for(Et("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)Et("uponSanitizeShadowNode",i,null),wt(i)||(i.content instanceof o&&e(i.content),xt(i));Et("afterSanitizeShadowDOM",t,null)};return r.sanitize=function(t){var n,s,l,u,h,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((rt=!t)&&(t="\x3c!--\x3e"),"string"!=typeof t&&!At(t)){if("function"!=typeof t.toString)throw M("toString is not a function");if("string"!=typeof(t=t.toString()))throw M("dirty is not a string, aborting")}if(!r.isSupported){if("object"===e(i.toStaticHTML)||"function"==typeof i.toStaticHTML){if("string"==typeof t)return i.toStaticHTML(t);if(At(t))return i.toStaticHTML(t.outerHTML)}return t}if(Be||ht(d),r.removed=[],"string"==typeof t&&(Ye=!1),Ye){if(t.nodeName){var f=ge(t.nodeName);if(!Te[f]||Ce[f])throw M("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof c)1===(s=(n=_t("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===s.nodeName||"HTML"===s.nodeName?n=s:n.appendChild(s);else{if(!Ge&&!Le&&!Ue&&-1===t.indexOf("<"))return ae&&ze?ae.createHTML(t):t;if(!(n=_t(t)))return Ge?null:ze?se:""}n&&Fe&&vt(n.firstChild);for(var p=yt(Ye?t:n);l=p.nextNode();)3===l.nodeType&&l===u||wt(l)||(l.content instanceof o&&Mt(l.content),xt(l),u=l);if(u=null,Ye)return t;if(Ge){if(Ve)for(h=ue.call(n.ownerDocument);n.firstChild;)h.appendChild(n.firstChild);else h=n;return(Me.shadowroot||Me.shadowrootmod)&&(h=de.call(a,h,!0)),h}var m=Ue?n.outerHTML:n.innerHTML;return Ue&&Te["!doctype"]&&n.ownerDocument&&n.ownerDocument.doctype&&n.ownerDocument.doctype.name&&x(K,n.ownerDocument.doctype.name)&&(m="<!DOCTYPE "+n.ownerDocument.doctype.name+">\n"+m),Le&&(m=w(m,ve," "),m=w(m,be," "),m=w(m,_e," ")),ae&&ze?ae.createHTML(m):m},r.setConfig=function(e){ht(e),Be=!0},r.clearConfig=function(){lt=null,Be=!1},r.isValidAttribute=function(e,t,i){lt||ht({});var n=ge(e),r=ge(t);return St(n,r,i)},r.addHook=function(e,t){"function"==typeof t&&(pe[e]=pe[e]||[],_(pe[e],t))},r.removeHook=function(e){if(pe[e])return b(pe[e])},r.removeHooks=function(e){pe[e]&&(pe[e]=[])},r.removeAllHooks=function(){pe={}},r}()}()},2378:e=>{"use strict";e.exports=function(e){for(var t=[],i=e.length,n=0;n<i;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&i>n+1){var a=e.charCodeAt(n+1);a>=56320&&a<=57343&&(r=1024*(r-55296)+a-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},887:(e,t,i)=>{"use strict";i.r(t),i.d(t,{glMatrix:()=>n,mat2:()=>r,mat2d:()=>a,mat3:()=>s,mat4:()=>o,quat:()=>u,quat2:()=>h,vec2:()=>d,vec3:()=>l,vec4:()=>c});var n={};i.r(n),i.d(n,{ARRAY_TYPE:()=>p,EPSILON:()=>f,RANDOM:()=>m,equals:()=>_,setMatrixArrayType:()=>g,toRadian:()=>b});var r={};i.r(r),i.d(r,{LDU:()=>U,add:()=>B,adjoint:()=>R,clone:()=>A,copy:()=>E,create:()=>y,determinant:()=>P,equals:()=>V,exactEquals:()=>G,frob:()=>L,fromRotation:()=>k,fromScaling:()=>I,fromValues:()=>S,identity:()=>w,invert:()=>M,mul:()=>j,multiply:()=>C,multiplyScalar:()=>z,multiplyScalarAndAdd:()=>H,rotate:()=>D,scale:()=>O,set:()=>T,str:()=>N,sub:()=>W,subtract:()=>F,transpose:()=>x});var a={};i.r(a),i.d(a,{add:()=>ce,clone:()=>X,copy:()=>Z,create:()=>Y,determinant:()=>$,equals:()=>pe,exactEquals:()=>fe,frob:()=>le,fromRotation:()=>re,fromScaling:()=>ae,fromTranslation:()=>se,fromValues:()=>Q,identity:()=>q,invert:()=>J,mul:()=>me,multiply:()=>ee,multiplyScalar:()=>he,multiplyScalarAndAdd:()=>de,rotate:()=>te,scale:()=>ie,set:()=>K,str:()=>oe,sub:()=>ge,subtract:()=>ue,translate:()=>ne});var s={};i.r(s),i.d(s,{add:()=>Ve,adjoint:()=>xe,clone:()=>_e,copy:()=>ye,create:()=>ve,determinant:()=>Me,equals:()=>Ye,exactEquals:()=>We,frob:()=>Ge,fromMat2d:()=>Ne,fromMat4:()=>be,fromQuat:()=>Le,fromRotation:()=>ke,fromScaling:()=>Ie,fromTranslation:()=>Oe,fromValues:()=>Ae,identity:()=>we,invert:()=>Te,mul:()=>Xe,multiply:()=>Re,multiplyScalar:()=>He,multiplyScalarAndAdd:()=>je,normalFromMat4:()=>Ue,projection:()=>Be,rotate:()=>Ce,scale:()=>De,set:()=>Ee,str:()=>Fe,sub:()=>Ze,subtract:()=>ze,translate:()=>Pe,transpose:()=>Se});var o={};i.r(o),i.d(o,{add:()=>It,adjoint:()=>nt,clone:()=>Qe,copy:()=>Ke,create:()=>qe,determinant:()=>rt,equals:()=>Ft,exactEquals:()=>Bt,frob:()=>kt,fromQuat:()=>Tt,fromQuat2:()=>_t,fromRotation:()=>pt,fromRotationTranslation:()=>bt,fromRotationTranslationScale:()=>wt,fromRotationTranslationScaleOrigin:()=>St,fromScaling:()=>ft,fromTranslation:()=>dt,fromValues:()=>Je,fromXRotation:()=>mt,fromYRotation:()=>gt,fromZRotation:()=>vt,frustum:()=>xt,getRotation:()=>Et,getScaling:()=>At,getTranslation:()=>yt,identity:()=>et,invert:()=>it,lookAt:()=>Ct,mul:()=>Gt,multiply:()=>at,multiplyScalar:()=>Lt,multiplyScalarAndAdd:()=>Ut,ortho:()=>Pt,perspective:()=>Mt,perspectiveFromFieldOfView:()=>Rt,rotate:()=>lt,rotateX:()=>ct,rotateY:()=>ut,rotateZ:()=>ht,scale:()=>ot,set:()=>$e,str:()=>Ot,sub:()=>Vt,subtract:()=>Nt,targetTo:()=>Dt,translate:()=>st,transpose:()=>tt});var l={};i.r(l),i.d(l,{add:()=>Zt,angle:()=>wi,bezier:()=>mi,ceil:()=>Jt,clone:()=>Ht,copy:()=>Yt,create:()=>zt,cross:()=>di,dist:()=>Oi,distance:()=>ai,div:()=>Di,divide:()=>Kt,dot:()=>hi,equals:()=>Mi,exactEquals:()=>xi,floor:()=>$t,forEach:()=>Li,fromValues:()=>Wt,hermite:()=>pi,inverse:()=>ci,len:()=>Ii,length:()=>jt,lerp:()=>fi,max:()=>ti,min:()=>ei,mul:()=>Ci,multiply:()=>Qt,negate:()=>li,normalize:()=>ui,random:()=>gi,rotateX:()=>yi,rotateY:()=>Ai,rotateZ:()=>Ei,round:()=>ii,scale:()=>ni,scaleAndAdd:()=>ri,set:()=>Xt,sqrDist:()=>ki,sqrLen:()=>Ni,squaredDistance:()=>si,squaredLength:()=>oi,str:()=>Ti,sub:()=>Pi,subtract:()=>qt,transformMat3:()=>bi,transformMat4:()=>vi,transformQuat:()=>_i,zero:()=>Si});var c={};i.r(c),i.d(c,{add:()=>zi,ceil:()=>Yi,clone:()=>Bi,copy:()=>Gi,create:()=>Ui,cross:()=>ln,dist:()=>yn,distance:()=>$i,div:()=>_n,divide:()=>Wi,dot:()=>on,equals:()=>gn,exactEquals:()=>mn,floor:()=>Xi,forEach:()=>Sn,fromValues:()=>Fi,inverse:()=>an,len:()=>En,length:()=>tn,lerp:()=>cn,max:()=>qi,min:()=>Zi,mul:()=>bn,multiply:()=>ji,negate:()=>rn,normalize:()=>sn,random:()=>un,round:()=>Qi,scale:()=>Ki,scaleAndAdd:()=>Ji,set:()=>Vi,sqrDist:()=>An,sqrLen:()=>wn,squaredDistance:()=>en,squaredLength:()=>nn,str:()=>pn,sub:()=>vn,subtract:()=>Hi,transformMat4:()=>hn,transformQuat:()=>dn,zero:()=>fn});var u={};i.r(u),i.d(u,{add:()=>tr,calculateW:()=>In,clone:()=>Kn,conjugate:()=>Vn,copy:()=>$n,create:()=>Tn,dot:()=>rr,equals:()=>dr,exactEquals:()=>hr,exp:()=>Nn,fromEuler:()=>Hn,fromMat3:()=>zn,fromValues:()=>Jn,getAngle:()=>Pn,getAxisAngle:()=>Rn,identity:()=>xn,invert:()=>Gn,len:()=>or,length:()=>sr,lerp:()=>ar,ln:()=>Ln,mul:()=>ir,multiply:()=>Cn,normalize:()=>ur,pow:()=>Un,random:()=>Fn,rotateX:()=>Dn,rotateY:()=>On,rotateZ:()=>kn,rotationTo:()=>fr,scale:()=>nr,set:()=>er,setAxes:()=>mr,setAxisAngle:()=>Mn,slerp:()=>Bn,sqlerp:()=>pr,sqrLen:()=>cr,squaredLength:()=>lr,str:()=>jn});var h={};i.r(h),i.d(h,{add:()=>Fr,clone:()=>vr,conjugate:()=>Yr,copy:()=>Sr,create:()=>gr,dot:()=>Hr,equals:()=>ea,exactEquals:()=>$r,fromMat4:()=>wr,fromRotation:()=>Er,fromRotationTranslation:()=>yr,fromRotationTranslationValues:()=>_r,fromTranslation:()=>Ar,fromValues:()=>br,getDual:()=>Rr,getReal:()=>Mr,getTranslation:()=>Dr,identity:()=>Tr,invert:()=>Wr,len:()=>Zr,length:()=>Xr,lerp:()=>jr,mul:()=>Vr,multiply:()=>Gr,normalize:()=>Kr,rotateAroundAxis:()=>Br,rotateByQuatAppend:()=>Lr,rotateByQuatPrepend:()=>Ur,rotateX:()=>kr,rotateY:()=>Ir,rotateZ:()=>Nr,scale:()=>zr,set:()=>xr,setDual:()=>Cr,setReal:()=>Pr,sqrLen:()=>Qr,squaredLength:()=>qr,str:()=>Jr,translate:()=>Or});var d={};i.r(d),i.d(d,{add:()=>sa,angle:()=>ka,ceil:()=>ua,clone:()=>ia,copy:()=>ra,create:()=>ta,cross:()=>Ta,dist:()=>za,distance:()=>va,div:()=>Va,divide:()=>ca,dot:()=>Sa,equals:()=>Ua,exactEquals:()=>La,floor:()=>ha,forEach:()=>Wa,fromValues:()=>na,inverse:()=>Ea,len:()=>Ba,length:()=>_a,lerp:()=>xa,max:()=>fa,min:()=>da,mul:()=>Ga,multiply:()=>la,negate:()=>Aa,normalize:()=>wa,random:()=>Ma,rotate:()=>Oa,round:()=>pa,scale:()=>ma,scaleAndAdd:()=>ga,set:()=>aa,sqrDist:()=>Ha,sqrLen:()=>ja,squaredDistance:()=>ba,squaredLength:()=>ya,str:()=>Na,sub:()=>Fa,subtract:()=>oa,transformMat2:()=>Ra,transformMat2d:()=>Pa,transformMat3:()=>Ca,transformMat4:()=>Da,zero:()=>Ia});var f=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,m=Math.random;function g(e){p=e}var v=Math.PI/180;function b(e){return e*v}function _(e,t){return Math.abs(e-t)<=f*Math.max(1,Math.abs(e),Math.abs(t))}function y(){var e=new p(4);return p!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function A(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function E(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function w(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function S(e,t,i,n){var r=new p(4);return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}function T(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}function x(e,t){if(e===t){var i=t[1];e[1]=t[2],e[2]=i}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function M(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=i*a-r*n;return s?(s=1/s,e[0]=a*s,e[1]=-n*s,e[2]=-r*s,e[3]=i*s,e):null}function R(e,t){var i=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=i,e}function P(e){return e[0]*e[3]-e[2]*e[1]}function C(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=n*o+a*l,e[1]=r*o+s*l,e[2]=n*c+a*u,e[3]=r*c+s*u,e}function D(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=n*l+a*o,e[1]=r*l+s*o,e[2]=n*-o+a*l,e[3]=r*-o+s*l,e}function O(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=i[0],l=i[1];return e[0]=n*o,e[1]=r*o,e[2]=a*l,e[3]=s*l,e}function k(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=-i,e[3]=n,e}function I(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function N(e){return"mat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function L(e){return Math.hypot(e[0],e[1],e[2],e[3])}function U(e,t,i,n){return e[2]=n[2]/n[0],i[0]=n[0],i[1]=n[1],i[3]=n[3]-e[2]*i[1],[e,t,i]}function B(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function F(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function G(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function V(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=t[0],o=t[1],l=t[2],c=t[3];return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))}function z(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function H(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var j=C,W=F;function Y(){var e=new p(6);return p!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function X(e){var t=new p(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function Z(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function q(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Q(e,t,i,n,r,a){var s=new p(6);return s[0]=e,s[1]=t,s[2]=i,s[3]=n,s[4]=r,s[5]=a,s}function K(e,t,i,n,r,a,s){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e}function J(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=i*a-n*r;return l?(l=1/l,e[0]=a*l,e[1]=-n*l,e[2]=-r*l,e[3]=i*l,e[4]=(r*o-a*s)*l,e[5]=(n*s-i*o)*l,e):null}function $(e){return e[0]*e[3]-e[1]*e[2]}function ee(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1],h=i[2],d=i[3],f=i[4],p=i[5];return e[0]=n*c+a*u,e[1]=r*c+s*u,e[2]=n*h+a*d,e[3]=r*h+s*d,e[4]=n*f+a*p+o,e[5]=r*f+s*p+l,e}function te(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=Math.sin(i),u=Math.cos(i);return e[0]=n*u+a*c,e[1]=r*u+s*c,e[2]=n*-c+a*u,e[3]=r*-c+s*u,e[4]=o,e[5]=l,e}function ie(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1];return e[0]=n*c,e[1]=r*c,e[2]=a*u,e[3]=s*u,e[4]=o,e[5]=l,e}function ne(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=i[0],u=i[1];return e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=n*c+a*u+o,e[5]=r*c+s*u+l,e}function re(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=-i,e[3]=n,e[4]=0,e[5]=0,e}function ae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function se(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function oe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function le(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],1)}function ce(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e}function ue(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e}function he(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e}function de(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e}function fe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function pe(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=t[0],c=t[1],u=t[2],h=t[3],d=t[4],p=t[5];return Math.abs(i-l)<=f*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(n-c)<=f*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-u)<=f*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-h)<=f*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(s-d)<=f*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-p)<=f*Math.max(1,Math.abs(o),Math.abs(p))}var me=ee,ge=ue;function ve(){var e=new p(9);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function be(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function _e(e){var t=new p(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function ye(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Ae(e,t,i,n,r,a,s,o,l){var c=new p(9);return c[0]=e,c[1]=t,c[2]=i,c[3]=n,c[4]=r,c[5]=a,c[6]=s,c[7]=o,c[8]=l,c}function Ee(e,t,i,n,r,a,s,o,l,c){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e}function we(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Se(e,t){if(e===t){var i=t[1],n=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=i,e[5]=t[7],e[6]=n,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Te(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=u*s-o*c,d=-u*a+o*l,f=c*a-s*l,p=i*h+n*d+r*f;return p?(p=1/p,e[0]=h*p,e[1]=(-u*n+r*c)*p,e[2]=(o*n-r*s)*p,e[3]=d*p,e[4]=(u*i-r*l)*p,e[5]=(-o*i+r*a)*p,e[6]=f*p,e[7]=(-c*i+n*l)*p,e[8]=(s*i-n*a)*p,e):null}function xe(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8];return e[0]=s*u-o*c,e[1]=r*c-n*u,e[2]=n*o-r*s,e[3]=o*l-a*u,e[4]=i*u-r*l,e[5]=r*a-i*o,e[6]=a*c-s*l,e[7]=n*l-i*c,e[8]=i*s-n*a,e}function Me(e){var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*(c*a-s*l)+i*(-c*r+s*o)+n*(l*r-a*o)}function Re(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],f=i[1],p=i[2],m=i[3],g=i[4],v=i[5],b=i[6],_=i[7],y=i[8];return e[0]=d*n+f*s+p*c,e[1]=d*r+f*o+p*u,e[2]=d*a+f*l+p*h,e[3]=m*n+g*s+v*c,e[4]=m*r+g*o+v*u,e[5]=m*a+g*l+v*h,e[6]=b*n+_*s+y*c,e[7]=b*r+_*o+y*u,e[8]=b*a+_*l+y*h,e}function Pe(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],f=i[1];return e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=d*n+f*s+c,e[7]=d*r+f*o+u,e[8]=d*a+f*l+h,e}function Ce(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(i),f=Math.cos(i);return e[0]=f*n+d*s,e[1]=f*r+d*o,e[2]=f*a+d*l,e[3]=f*s-d*n,e[4]=f*o-d*r,e[5]=f*l-d*a,e[6]=c,e[7]=u,e[8]=h,e}function De(e,t,i){var n=i[0],r=i[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=r*t[3],e[4]=r*t[4],e[5]=r*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Oe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function ke(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=-i,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ie(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Ne(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function Le(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=i+i,o=n+n,l=r+r,c=i*s,u=n*s,h=n*o,d=r*s,f=r*o,p=r*l,m=a*s,g=a*o,v=a*l;return e[0]=1-h-p,e[3]=u-v,e[6]=d+g,e[1]=u+v,e[4]=1-c-p,e[7]=f-m,e[2]=d-g,e[5]=f+m,e[8]=1-c-h,e}function Ue(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],b=i*o-n*s,_=i*l-r*s,y=i*c-a*s,A=n*l-r*o,E=n*c-a*o,w=r*c-a*l,S=u*m-h*p,T=u*g-d*p,x=u*v-f*p,M=h*g-d*m,R=h*v-f*m,P=d*v-f*g,C=b*P-_*R+y*M+A*x-E*T+w*S;return C?(C=1/C,e[0]=(o*P-l*R+c*M)*C,e[1]=(l*x-s*P-c*T)*C,e[2]=(s*R-o*x+c*S)*C,e[3]=(r*R-n*P-a*M)*C,e[4]=(i*P-r*x+a*T)*C,e[5]=(n*x-i*R-a*S)*C,e[6]=(m*w-g*E+v*A)*C,e[7]=(g*y-p*w-v*_)*C,e[8]=(p*E-m*y+v*b)*C,e):null}function Be(e,t,i){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/i,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Fe(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Ge(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])}function Ve(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e}function ze(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e}function He(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e}function je(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e[6]=t[6]+i[6]*n,e[7]=t[7]+i[7]*n,e[8]=t[8]+i[8]*n,e}function We(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Ye(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=t[0],d=t[1],p=t[2],m=t[3],g=t[4],v=t[5],b=t[6],_=t[7],y=t[8];return Math.abs(i-h)<=f*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(n-d)<=f*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=f*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(a-m)<=f*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(s-g)<=f*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-v)<=f*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(l-b)<=f*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(c-_)<=f*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(u-y)<=f*Math.max(1,Math.abs(u),Math.abs(y))}var Xe=Re,Ze=ze;function qe(){var e=new p(16);return p!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Qe(e){var t=new p(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Je(e,t,i,n,r,a,s,o,l,c,u,h,d,f,m,g){var v=new p(16);return v[0]=e,v[1]=t,v[2]=i,v[3]=n,v[4]=r,v[5]=a,v[6]=s,v[7]=o,v[8]=l,v[9]=c,v[10]=u,v[11]=h,v[12]=d,v[13]=f,v[14]=m,v[15]=g,v}function $e(e,t,i,n,r,a,s,o,l,c,u,h,d,f,p,m,g){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e[8]=c,e[9]=u,e[10]=h,e[11]=d,e[12]=f,e[13]=p,e[14]=m,e[15]=g,e}function et(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function tt(e,t){if(e===t){var i=t[1],n=t[2],r=t[3],a=t[6],s=t[7],o=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=a,e[11]=t[14],e[12]=r,e[13]=s,e[14]=o}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function it(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15],b=i*o-n*s,_=i*l-r*s,y=i*c-a*s,A=n*l-r*o,E=n*c-a*o,w=r*c-a*l,S=u*m-h*p,T=u*g-d*p,x=u*v-f*p,M=h*g-d*m,R=h*v-f*m,P=d*v-f*g,C=b*P-_*R+y*M+A*x-E*T+w*S;return C?(C=1/C,e[0]=(o*P-l*R+c*M)*C,e[1]=(r*R-n*P-a*M)*C,e[2]=(m*w-g*E+v*A)*C,e[3]=(d*E-h*w-f*A)*C,e[4]=(l*x-s*P-c*T)*C,e[5]=(i*P-r*x+a*T)*C,e[6]=(g*y-p*w-v*_)*C,e[7]=(u*w-d*y+f*_)*C,e[8]=(s*R-o*x+c*S)*C,e[9]=(n*x-i*R-a*S)*C,e[10]=(p*E-m*y+v*b)*C,e[11]=(h*y-u*E-f*b)*C,e[12]=(o*T-s*M-l*S)*C,e[13]=(i*M-n*T+r*S)*C,e[14]=(m*_-p*A-g*b)*C,e[15]=(u*A-h*_+d*b)*C,e):null}function nt(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=t[4],o=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],f=t[11],p=t[12],m=t[13],g=t[14],v=t[15];return e[0]=o*(d*v-f*g)-h*(l*v-c*g)+m*(l*f-c*d),e[1]=-(n*(d*v-f*g)-h*(r*v-a*g)+m*(r*f-a*d)),e[2]=n*(l*v-c*g)-o*(r*v-a*g)+m*(r*c-a*l),e[3]=-(n*(l*f-c*d)-o*(r*f-a*d)+h*(r*c-a*l)),e[4]=-(s*(d*v-f*g)-u*(l*v-c*g)+p*(l*f-c*d)),e[5]=i*(d*v-f*g)-u*(r*v-a*g)+p*(r*f-a*d),e[6]=-(i*(l*v-c*g)-s*(r*v-a*g)+p*(r*c-a*l)),e[7]=i*(l*f-c*d)-s*(r*f-a*d)+u*(r*c-a*l),e[8]=s*(h*v-f*m)-u*(o*v-c*m)+p*(o*f-c*h),e[9]=-(i*(h*v-f*m)-u*(n*v-a*m)+p*(n*f-a*h)),e[10]=i*(o*v-c*m)-s*(n*v-a*m)+p*(n*c-a*o),e[11]=-(i*(o*f-c*h)-s*(n*f-a*h)+u*(n*c-a*o)),e[12]=-(s*(h*g-d*m)-u*(o*g-l*m)+p*(o*d-l*h)),e[13]=i*(h*g-d*m)-u*(n*g-r*m)+p*(n*d-r*h),e[14]=-(i*(o*g-l*m)-s*(n*g-r*m)+p*(n*l-r*o)),e[15]=i*(o*d-l*h)-s*(n*d-r*h)+u*(n*l-r*o),e}function rt(e){var t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15];return(t*s-i*a)*(h*g-d*m)-(t*o-n*a)*(u*g-d*p)+(t*l-r*a)*(u*m-h*p)+(i*o-n*s)*(c*g-d*f)-(i*l-r*s)*(c*m-h*f)+(n*l-r*o)*(c*p-u*f)}function at(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],m=t[12],g=t[13],v=t[14],b=t[15],_=i[0],y=i[1],A=i[2],E=i[3];return e[0]=_*n+y*o+A*h+E*m,e[1]=_*r+y*l+A*d+E*g,e[2]=_*a+y*c+A*f+E*v,e[3]=_*s+y*u+A*p+E*b,_=i[4],y=i[5],A=i[6],E=i[7],e[4]=_*n+y*o+A*h+E*m,e[5]=_*r+y*l+A*d+E*g,e[6]=_*a+y*c+A*f+E*v,e[7]=_*s+y*u+A*p+E*b,_=i[8],y=i[9],A=i[10],E=i[11],e[8]=_*n+y*o+A*h+E*m,e[9]=_*r+y*l+A*d+E*g,e[10]=_*a+y*c+A*f+E*v,e[11]=_*s+y*u+A*p+E*b,_=i[12],y=i[13],A=i[14],E=i[15],e[12]=_*n+y*o+A*h+E*m,e[13]=_*r+y*l+A*d+E*g,e[14]=_*a+y*c+A*f+E*v,e[15]=_*s+y*u+A*p+E*b,e}function st(e,t,i){var n,r,a,s,o,l,c,u,h,d,f,p,m=i[0],g=i[1],v=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*v+t[12],e[13]=t[1]*m+t[5]*g+t[9]*v+t[13],e[14]=t[2]*m+t[6]*g+t[10]*v+t[14],e[15]=t[3]*m+t[7]*g+t[11]*v+t[15]):(n=t[0],r=t[1],a=t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],f=t[10],p=t[11],e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=o,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=f,e[11]=p,e[12]=n*m+o*g+h*v+t[12],e[13]=r*m+l*g+d*v+t[13],e[14]=a*m+c*g+f*v+t[14],e[15]=s*m+u*g+p*v+t[15]),e}function ot(e,t,i){var n=i[0],r=i[1],a=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function lt(e,t,i,n){var r,a,s,o,l,c,u,h,d,p,m,g,v,b,_,y,A,E,w,S,T,x,M,R,P=n[0],C=n[1],D=n[2],O=Math.hypot(P,C,D);return O<f?null:(P*=O=1/O,C*=O,D*=O,r=Math.sin(i),s=1-(a=Math.cos(i)),o=t[0],l=t[1],c=t[2],u=t[3],h=t[4],d=t[5],p=t[6],m=t[7],g=t[8],v=t[9],b=t[10],_=t[11],y=P*P*s+a,A=C*P*s+D*r,E=D*P*s-C*r,w=P*C*s-D*r,S=C*C*s+a,T=D*C*s+P*r,x=P*D*s+C*r,M=C*D*s-P*r,R=D*D*s+a,e[0]=o*y+h*A+g*E,e[1]=l*y+d*A+v*E,e[2]=c*y+p*A+b*E,e[3]=u*y+m*A+_*E,e[4]=o*w+h*S+g*T,e[5]=l*w+d*S+v*T,e[6]=c*w+p*S+b*T,e[7]=u*w+m*S+_*T,e[8]=o*x+h*M+g*R,e[9]=l*x+d*M+v*R,e[10]=c*x+p*M+b*R,e[11]=u*x+m*M+_*R,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function ct(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[4],s=t[5],o=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+c*n,e[5]=s*r+u*n,e[6]=o*r+h*n,e[7]=l*r+d*n,e[8]=c*r-a*n,e[9]=u*r-s*n,e[10]=h*r-o*n,e[11]=d*r-l*n,e}function ut(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],s=t[1],o=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-c*n,e[1]=s*r-u*n,e[2]=o*r-h*n,e[3]=l*r-d*n,e[8]=a*n+c*r,e[9]=s*n+u*r,e[10]=o*n+h*r,e[11]=l*n+d*r,e}function ht(e,t,i){var n=Math.sin(i),r=Math.cos(i),a=t[0],s=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+c*n,e[1]=s*r+u*n,e[2]=o*r+h*n,e[3]=l*r+d*n,e[4]=c*r-a*n,e[5]=u*r-s*n,e[6]=h*r-o*n,e[7]=d*r-l*n,e}function dt(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function ft(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pt(e,t,i){var n,r,a,s=i[0],o=i[1],l=i[2],c=Math.hypot(s,o,l);return c<f?null:(s*=c=1/c,o*=c,l*=c,n=Math.sin(t),a=1-(r=Math.cos(t)),e[0]=s*s*a+r,e[1]=o*s*a+l*n,e[2]=l*s*a-o*n,e[3]=0,e[4]=s*o*a-l*n,e[5]=o*o*a+r,e[6]=l*o*a+s*n,e[7]=0,e[8]=s*l*a+o*n,e[9]=o*l*a-s*n,e[10]=l*l*a+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function mt(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=i,e[7]=0,e[8]=0,e[9]=-i,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gt(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=0,e[2]=-i,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=i,e[9]=0,e[10]=n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vt(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=0,e[4]=-i,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function bt(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=n+n,l=r+r,c=a+a,u=n*o,h=n*l,d=n*c,f=r*l,p=r*c,m=a*c,g=s*o,v=s*l,b=s*c;return e[0]=1-(f+m),e[1]=h+b,e[2]=d-v,e[3]=0,e[4]=h-b,e[5]=1-(u+m),e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-(u+f),e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function _t(e,t){var i=new p(3),n=-t[0],r=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=n*n+r*r+a*a+s*s;return h>0?(i[0]=2*(o*s+u*n+l*a-c*r)/h,i[1]=2*(l*s+u*r+c*n-o*a)/h,i[2]=2*(c*s+u*a+o*r-l*n)/h):(i[0]=2*(o*s+u*n+l*a-c*r),i[1]=2*(l*s+u*r+c*n-o*a),i[2]=2*(c*s+u*a+o*r-l*n)),bt(e,t,i),e}function yt(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function At(e,t){var i=t[0],n=t[1],r=t[2],a=t[4],s=t[5],o=t[6],l=t[8],c=t[9],u=t[10];return e[0]=Math.hypot(i,n,r),e[1]=Math.hypot(a,s,o),e[2]=Math.hypot(l,c,u),e}function Et(e,t){var i=new p(3);At(i,t);var n=1/i[0],r=1/i[1],a=1/i[2],s=t[0]*n,o=t[1]*r,l=t[2]*a,c=t[4]*n,u=t[5]*r,h=t[6]*a,d=t[8]*n,f=t[9]*r,m=t[10]*a,g=s+u+m,v=0;return g>0?(v=2*Math.sqrt(g+1),e[3]=.25*v,e[0]=(h-f)/v,e[1]=(d-l)/v,e[2]=(o-c)/v):s>u&&s>m?(v=2*Math.sqrt(1+s-u-m),e[3]=(h-f)/v,e[0]=.25*v,e[1]=(o+c)/v,e[2]=(d+l)/v):u>m?(v=2*Math.sqrt(1+u-s-m),e[3]=(d-l)/v,e[0]=(o+c)/v,e[1]=.25*v,e[2]=(h+f)/v):(v=2*Math.sqrt(1+m-s-u),e[3]=(o-c)/v,e[0]=(d+l)/v,e[1]=(h+f)/v,e[2]=.25*v),e}function wt(e,t,i,n){var r=t[0],a=t[1],s=t[2],o=t[3],l=r+r,c=a+a,u=s+s,h=r*l,d=r*c,f=r*u,p=a*c,m=a*u,g=s*u,v=o*l,b=o*c,_=o*u,y=n[0],A=n[1],E=n[2];return e[0]=(1-(p+g))*y,e[1]=(d+_)*y,e[2]=(f-b)*y,e[3]=0,e[4]=(d-_)*A,e[5]=(1-(h+g))*A,e[6]=(m+v)*A,e[7]=0,e[8]=(f+b)*E,e[9]=(m-v)*E,e[10]=(1-(h+p))*E,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}function St(e,t,i,n,r){var a=t[0],s=t[1],o=t[2],l=t[3],c=a+a,u=s+s,h=o+o,d=a*c,f=a*u,p=a*h,m=s*u,g=s*h,v=o*h,b=l*c,_=l*u,y=l*h,A=n[0],E=n[1],w=n[2],S=r[0],T=r[1],x=r[2],M=(1-(m+v))*A,R=(f+y)*A,P=(p-_)*A,C=(f-y)*E,D=(1-(d+v))*E,O=(g+b)*E,k=(p+_)*w,I=(g-b)*w,N=(1-(d+m))*w;return e[0]=M,e[1]=R,e[2]=P,e[3]=0,e[4]=C,e[5]=D,e[6]=O,e[7]=0,e[8]=k,e[9]=I,e[10]=N,e[11]=0,e[12]=i[0]+S-(M*S+C*T+k*x),e[13]=i[1]+T-(R*S+D*T+I*x),e[14]=i[2]+x-(P*S+O*T+N*x),e[15]=1,e}function Tt(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=i+i,o=n+n,l=r+r,c=i*s,u=n*s,h=n*o,d=r*s,f=r*o,p=r*l,m=a*s,g=a*o,v=a*l;return e[0]=1-h-p,e[1]=u+v,e[2]=d-g,e[3]=0,e[4]=u-v,e[5]=1-c-p,e[6]=f+m,e[7]=0,e[8]=d+g,e[9]=f-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function xt(e,t,i,n,r,a,s){var o=1/(i-t),l=1/(r-n),c=1/(a-s);return e[0]=2*a*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*a*l,e[6]=0,e[7]=0,e[8]=(i+t)*o,e[9]=(r+n)*l,e[10]=(s+a)*c,e[11]=-1,e[12]=0,e[13]=0,e[14]=s*a*2*c,e[15]=0,e}function Mt(e,t,i,n,r){var a,s=1/Math.tan(t/2);return e[0]=s/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(a=1/(n-r),e[10]=(r+n)*a,e[14]=2*r*n*a):(e[10]=-1,e[14]=-2*n),e}function Rt(e,t,i,n){var r=Math.tan(t.upDegrees*Math.PI/180),a=Math.tan(t.downDegrees*Math.PI/180),s=Math.tan(t.leftDegrees*Math.PI/180),o=Math.tan(t.rightDegrees*Math.PI/180),l=2/(s+o),c=2/(r+a);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=c,e[6]=0,e[7]=0,e[8]=-(s-o)*l*.5,e[9]=(r-a)*c*.5,e[10]=n/(i-n),e[11]=-1,e[12]=0,e[13]=0,e[14]=n*i/(i-n),e[15]=0,e}function Pt(e,t,i,n,r,a,s){var o=1/(t-i),l=1/(n-r),c=1/(a-s);return e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*o,e[13]=(r+n)*l,e[14]=(s+a)*c,e[15]=1,e}function Ct(e,t,i,n){var r,a,s,o,l,c,u,h,d,p,m=t[0],g=t[1],v=t[2],b=n[0],_=n[1],y=n[2],A=i[0],E=i[1],w=i[2];return Math.abs(m-A)<f&&Math.abs(g-E)<f&&Math.abs(v-w)<f?et(e):(u=m-A,h=g-E,d=v-w,r=_*(d*=p=1/Math.hypot(u,h,d))-y*(h*=p),a=y*(u*=p)-b*d,s=b*h-_*u,(p=Math.hypot(r,a,s))?(r*=p=1/p,a*=p,s*=p):(r=0,a=0,s=0),o=h*s-d*a,l=d*r-u*s,c=u*a-h*r,(p=Math.hypot(o,l,c))?(o*=p=1/p,l*=p,c*=p):(o=0,l=0,c=0),e[0]=r,e[1]=o,e[2]=u,e[3]=0,e[4]=a,e[5]=l,e[6]=h,e[7]=0,e[8]=s,e[9]=c,e[10]=d,e[11]=0,e[12]=-(r*m+a*g+s*v),e[13]=-(o*m+l*g+c*v),e[14]=-(u*m+h*g+d*v),e[15]=1,e)}function Dt(e,t,i,n){var r=t[0],a=t[1],s=t[2],o=n[0],l=n[1],c=n[2],u=r-i[0],h=a-i[1],d=s-i[2],f=u*u+h*h+d*d;f>0&&(u*=f=1/Math.sqrt(f),h*=f,d*=f);var p=l*d-c*h,m=c*u-o*d,g=o*h-l*u;return(f=p*p+m*m+g*g)>0&&(p*=f=1/Math.sqrt(f),m*=f,g*=f),e[0]=p,e[1]=m,e[2]=g,e[3]=0,e[4]=h*g-d*m,e[5]=d*p-u*g,e[6]=u*m-h*p,e[7]=0,e[8]=u,e[9]=h,e[10]=d,e[11]=0,e[12]=r,e[13]=a,e[14]=s,e[15]=1,e}function Ot(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function kt(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function It(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function Nt(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}function Lt(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12]*i,e[13]=t[13]*i,e[14]=t[14]*i,e[15]=t[15]*i,e}function Ut(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e[4]=t[4]+i[4]*n,e[5]=t[5]+i[5]*n,e[6]=t[6]+i[6]*n,e[7]=t[7]+i[7]*n,e[8]=t[8]+i[8]*n,e[9]=t[9]+i[9]*n,e[10]=t[10]+i[10]*n,e[11]=t[11]+i[11]*n,e[12]=t[12]+i[12]*n,e[13]=t[13]+i[13]*n,e[14]=t[14]+i[14]*n,e[15]=t[15]+i[15]*n,e}function Bt(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Ft(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],p=e[11],m=e[12],g=e[13],v=e[14],b=e[15],_=t[0],y=t[1],A=t[2],E=t[3],w=t[4],S=t[5],T=t[6],x=t[7],M=t[8],R=t[9],P=t[10],C=t[11],D=t[12],O=t[13],k=t[14],I=t[15];return Math.abs(i-_)<=f*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(n-y)<=f*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-A)<=f*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(a-E)<=f*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(s-w)<=f*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(o-S)<=f*Math.max(1,Math.abs(o),Math.abs(S))&&Math.abs(l-T)<=f*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(c-x)<=f*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(u-M)<=f*Math.max(1,Math.abs(u),Math.abs(M))&&Math.abs(h-R)<=f*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-P)<=f*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(p-C)<=f*Math.max(1,Math.abs(p),Math.abs(C))&&Math.abs(m-D)<=f*Math.max(1,Math.abs(m),Math.abs(D))&&Math.abs(g-O)<=f*Math.max(1,Math.abs(g),Math.abs(O))&&Math.abs(v-k)<=f*Math.max(1,Math.abs(v),Math.abs(k))&&Math.abs(b-I)<=f*Math.max(1,Math.abs(b),Math.abs(I))}var Gt=at,Vt=Nt;function zt(){var e=new p(3);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Ht(e){var t=new p(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function jt(e){var t=e[0],i=e[1],n=e[2];return Math.hypot(t,i,n)}function Wt(e,t,i){var n=new p(3);return n[0]=e,n[1]=t,n[2]=i,n}function Yt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Xt(e,t,i,n){return e[0]=t,e[1]=i,e[2]=n,e}function Zt(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function qt(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function Qt(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function Kt(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e}function Jt(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function $t(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ei(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function ti(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function ii(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function ni(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function ri(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e}function ai(e,t){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return Math.hypot(i,n,r)}function si(e,t){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2];return i*i+n*n+r*r}function oi(e){var t=e[0],i=e[1],n=e[2];return t*t+i*i+n*n}function li(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ci(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function ui(e,t){var i=t[0],n=t[1],r=t[2],a=i*i+n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function hi(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function di(e,t,i){var n=t[0],r=t[1],a=t[2],s=i[0],o=i[1],l=i[2];return e[0]=r*l-a*o,e[1]=a*s-n*l,e[2]=n*o-r*s,e}function fi(e,t,i,n){var r=t[0],a=t[1],s=t[2];return e[0]=r+n*(i[0]-r),e[1]=a+n*(i[1]-a),e[2]=s+n*(i[2]-s),e}function pi(e,t,i,n,r,a){var s=a*a,o=s*(2*a-3)+1,l=s*(a-2)+a,c=s*(a-1),u=s*(3-2*a);return e[0]=t[0]*o+i[0]*l+n[0]*c+r[0]*u,e[1]=t[1]*o+i[1]*l+n[1]*c+r[1]*u,e[2]=t[2]*o+i[2]*l+n[2]*c+r[2]*u,e}function mi(e,t,i,n,r,a){var s=1-a,o=s*s,l=a*a,c=o*s,u=3*a*o,h=3*l*s,d=l*a;return e[0]=t[0]*c+i[0]*u+n[0]*h+r[0]*d,e[1]=t[1]*c+i[1]*u+n[1]*h+r[1]*d,e[2]=t[2]*c+i[2]*u+n[2]*h+r[2]*d,e}function gi(e,t){t=t||1;var i=2*m()*Math.PI,n=2*m()-1,r=Math.sqrt(1-n*n)*t;return e[0]=Math.cos(i)*r,e[1]=Math.sin(i)*r,e[2]=n*t,e}function vi(e,t,i){var n=t[0],r=t[1],a=t[2],s=i[3]*n+i[7]*r+i[11]*a+i[15];return s=s||1,e[0]=(i[0]*n+i[4]*r+i[8]*a+i[12])/s,e[1]=(i[1]*n+i[5]*r+i[9]*a+i[13])/s,e[2]=(i[2]*n+i[6]*r+i[10]*a+i[14])/s,e}function bi(e,t,i){var n=t[0],r=t[1],a=t[2];return e[0]=n*i[0]+r*i[3]+a*i[6],e[1]=n*i[1]+r*i[4]+a*i[7],e[2]=n*i[2]+r*i[5]+a*i[8],e}function _i(e,t,i){var n=i[0],r=i[1],a=i[2],s=i[3],o=t[0],l=t[1],c=t[2],u=r*c-a*l,h=a*o-n*c,d=n*l-r*o,f=r*d-a*h,p=a*u-n*d,m=n*h-r*u,g=2*s;return u*=g,h*=g,d*=g,f*=2,p*=2,m*=2,e[0]=o+u+f,e[1]=l+h+p,e[2]=c+d+m,e}function yi(e,t,i,n){var r=[],a=[];return r[0]=t[0]-i[0],r[1]=t[1]-i[1],r[2]=t[2]-i[2],a[0]=r[0],a[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),a[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function Ai(e,t,i,n){var r=[],a=[];return r[0]=t[0]-i[0],r[1]=t[1]-i[1],r[2]=t[2]-i[2],a[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),a[1]=r[1],a[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function Ei(e,t,i,n){var r=[],a=[];return r[0]=t[0]-i[0],r[1]=t[1]-i[1],r[2]=t[2]-i[2],a[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),a[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),a[2]=r[2],e[0]=a[0]+i[0],e[1]=a[1]+i[1],e[2]=a[2]+i[2],e}function wi(e,t){var i=e[0],n=e[1],r=e[2],a=t[0],s=t[1],o=t[2],l=Math.sqrt(i*i+n*n+r*r)*Math.sqrt(a*a+s*s+o*o),c=l&&hi(e,t)/l;return Math.acos(Math.min(Math.max(c,-1),1))}function Si(e){return e[0]=0,e[1]=0,e[2]=0,e}function Ti(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function xi(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Mi(e,t){var i=e[0],n=e[1],r=e[2],a=t[0],s=t[1],o=t[2];return Math.abs(i-a)<=f*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-s)<=f*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-o)<=f*Math.max(1,Math.abs(r),Math.abs(o))}var Ri,Pi=qt,Ci=Qt,Di=Kt,Oi=ai,ki=si,Ii=jt,Ni=oi,Li=(Ri=zt(),function(e,t,i,n,r,a){var s,o;for(t||(t=3),i||(i=0),o=n?Math.min(n*t+i,e.length):e.length,s=i;s<o;s+=t)Ri[0]=e[s],Ri[1]=e[s+1],Ri[2]=e[s+2],r(Ri,Ri,a),e[s]=Ri[0],e[s+1]=Ri[1],e[s+2]=Ri[2];return e});function Ui(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Bi(e){var t=new p(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function Fi(e,t,i,n){var r=new p(4);return r[0]=e,r[1]=t,r[2]=i,r[3]=n,r}function Gi(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vi(e,t,i,n,r){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e}function zi(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e}function Hi(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e}function ji(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e[3]=t[3]*i[3],e}function Wi(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e[3]=t[3]/i[3],e}function Yi(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Xi(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function Zi(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e}function qi(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e}function Qi(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function Ki(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function Ji(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e[2]=t[2]+i[2]*n,e[3]=t[3]+i[3]*n,e}function $i(e,t){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],a=t[3]-e[3];return Math.hypot(i,n,r,a)}function en(e,t){var i=t[0]-e[0],n=t[1]-e[1],r=t[2]-e[2],a=t[3]-e[3];return i*i+n*n+r*r+a*a}function tn(e){var t=e[0],i=e[1],n=e[2],r=e[3];return Math.hypot(t,i,n,r)}function nn(e){var t=e[0],i=e[1],n=e[2],r=e[3];return t*t+i*i+n*n+r*r}function rn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function an(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function sn(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=i*i+n*n+r*r+a*a;return s>0&&(s=1/Math.sqrt(s)),e[0]=i*s,e[1]=n*s,e[2]=r*s,e[3]=a*s,e}function on(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function ln(e,t,i,n){var r=i[0]*n[1]-i[1]*n[0],a=i[0]*n[2]-i[2]*n[0],s=i[0]*n[3]-i[3]*n[0],o=i[1]*n[2]-i[2]*n[1],l=i[1]*n[3]-i[3]*n[1],c=i[2]*n[3]-i[3]*n[2],u=t[0],h=t[1],d=t[2],f=t[3];return e[0]=h*c-d*l+f*o,e[1]=-u*c+d*s-f*a,e[2]=u*l-h*s+f*r,e[3]=-u*o+h*a-d*r,e}function cn(e,t,i,n){var r=t[0],a=t[1],s=t[2],o=t[3];return e[0]=r+n*(i[0]-r),e[1]=a+n*(i[1]-a),e[2]=s+n*(i[2]-s),e[3]=o+n*(i[3]-o),e}function un(e,t){var i,n,r,a,s,o;t=t||1;do{s=(i=2*m()-1)*i+(n=2*m()-1)*n}while(s>=1);do{o=(r=2*m()-1)*r+(a=2*m()-1)*a}while(o>=1);var l=Math.sqrt((1-s)/o);return e[0]=t*i,e[1]=t*n,e[2]=t*r*l,e[3]=t*a*l,e}function hn(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3];return e[0]=i[0]*n+i[4]*r+i[8]*a+i[12]*s,e[1]=i[1]*n+i[5]*r+i[9]*a+i[13]*s,e[2]=i[2]*n+i[6]*r+i[10]*a+i[14]*s,e[3]=i[3]*n+i[7]*r+i[11]*a+i[15]*s,e}function dn(e,t,i){var n=t[0],r=t[1],a=t[2],s=i[0],o=i[1],l=i[2],c=i[3],u=c*n+o*a-l*r,h=c*r+l*n-s*a,d=c*a+s*r-o*n,f=-s*n-o*r-l*a;return e[0]=u*c+f*-s+h*-l-d*-o,e[1]=h*c+f*-o+d*-s-u*-l,e[2]=d*c+f*-l+u*-o-h*-s,e[3]=t[3],e}function fn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}function pn(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function mn(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function gn(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=t[0],o=t[1],l=t[2],c=t[3];return Math.abs(i-s)<=f*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-o)<=f*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-l)<=f*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-c)<=f*Math.max(1,Math.abs(a),Math.abs(c))}var vn=Hi,bn=ji,_n=Wi,yn=$i,An=en,En=tn,wn=nn,Sn=function(){var e=Ui();return function(t,i,n,r,a,s){var o,l;for(i||(i=4),n||(n=0),l=r?Math.min(r*i+n,t.length):t.length,o=n;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],e[3]=t[o+3],a(e,e,s),t[o]=e[0],t[o+1]=e[1],t[o+2]=e[2],t[o+3]=e[3];return t}}();function Tn(){var e=new p(4);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function xn(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Mn(e,t,i){i*=.5;var n=Math.sin(i);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(i),e}function Rn(e,t){var i=2*Math.acos(t[3]),n=Math.sin(i/2);return n>f?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),i}function Pn(e,t){var i=rr(e,t);return Math.acos(2*i*i-1)}function Cn(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=n*u+s*o+r*c-a*l,e[1]=r*u+s*l+a*o-n*c,e[2]=a*u+s*c+n*l-r*o,e[3]=s*u-n*o-r*l-a*c,e}function Dn(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=n*l+s*o,e[1]=r*l+a*o,e[2]=a*l-r*o,e[3]=s*l-n*o,e}function On(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=n*l-a*o,e[1]=r*l+s*o,e[2]=a*l+n*o,e[3]=s*l-r*o,e}function kn(e,t,i){i*=.5;var n=t[0],r=t[1],a=t[2],s=t[3],o=Math.sin(i),l=Math.cos(i);return e[0]=n*l+r*o,e[1]=r*l-n*o,e[2]=a*l+s*o,e[3]=s*l-a*o,e}function In(e,t){var i=t[0],n=t[1],r=t[2];return e[0]=i,e[1]=n,e[2]=r,e[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r)),e}function Nn(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=Math.sqrt(i*i+n*n+r*r),o=Math.exp(a),l=s>0?o*Math.sin(s)/s:0;return e[0]=i*l,e[1]=n*l,e[2]=r*l,e[3]=o*Math.cos(s),e}function Ln(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=Math.sqrt(i*i+n*n+r*r),o=s>0?Math.atan2(s,a)/s:0;return e[0]=i*o,e[1]=n*o,e[2]=r*o,e[3]=.5*Math.log(i*i+n*n+r*r+a*a),e}function Un(e,t,i){return Ln(e,t),nr(e,e,i),Nn(e,e),e}function Bn(e,t,i,n){var r,a,s,o,l,c=t[0],u=t[1],h=t[2],d=t[3],p=i[0],m=i[1],g=i[2],v=i[3];return(a=c*p+u*m+h*g+d*v)<0&&(a=-a,p=-p,m=-m,g=-g,v=-v),1-a>f?(r=Math.acos(a),s=Math.sin(r),o=Math.sin((1-n)*r)/s,l=Math.sin(n*r)/s):(o=1-n,l=n),e[0]=o*c+l*p,e[1]=o*u+l*m,e[2]=o*h+l*g,e[3]=o*d+l*v,e}function Fn(e){var t=m(),i=m(),n=m(),r=Math.sqrt(1-t),a=Math.sqrt(t);return e[0]=r*Math.sin(2*Math.PI*i),e[1]=r*Math.cos(2*Math.PI*i),e[2]=a*Math.sin(2*Math.PI*n),e[3]=a*Math.cos(2*Math.PI*n),e}function Gn(e,t){var i=t[0],n=t[1],r=t[2],a=t[3],s=i*i+n*n+r*r+a*a,o=s?1/s:0;return e[0]=-i*o,e[1]=-n*o,e[2]=-r*o,e[3]=a*o,e}function Vn(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function zn(e,t){var i,n=t[0]+t[4]+t[8];if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{var r=0;t[4]>t[0]&&(r=1),t[8]>t[3*r+r]&&(r=2);var a=(r+1)%3,s=(r+2)%3;i=Math.sqrt(t[3*r+r]-t[3*a+a]-t[3*s+s]+1),e[r]=.5*i,i=.5/i,e[3]=(t[3*a+s]-t[3*s+a])*i,e[a]=(t[3*a+r]+t[3*r+a])*i,e[s]=(t[3*s+r]+t[3*r+s])*i}return e}function Hn(e,t,i,n){var r=.5*Math.PI/180;t*=r,i*=r,n*=r;var a=Math.sin(t),s=Math.cos(t),o=Math.sin(i),l=Math.cos(i),c=Math.sin(n),u=Math.cos(n);return e[0]=a*l*u-s*o*c,e[1]=s*o*u+a*l*c,e[2]=s*l*c-a*o*u,e[3]=s*l*u+a*o*c,e}function jn(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}var Wn,Yn,Xn,Zn,qn,Qn,Kn=Bi,Jn=Fi,$n=Gi,er=Vi,tr=zi,ir=Cn,nr=Ki,rr=on,ar=cn,sr=tn,or=sr,lr=nn,cr=lr,ur=sn,hr=mn,dr=gn,fr=(Wn=zt(),Yn=Wt(1,0,0),Xn=Wt(0,1,0),function(e,t,i){var n=hi(t,i);return n<-.999999?(di(Wn,Yn,t),Ii(Wn)<1e-6&&di(Wn,Xn,t),ui(Wn,Wn),Mn(e,Wn,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(di(Wn,t,i),e[0]=Wn[0],e[1]=Wn[1],e[2]=Wn[2],e[3]=1+n,ur(e,e))}),pr=(Zn=Tn(),qn=Tn(),function(e,t,i,n,r,a){return Bn(Zn,t,r,a),Bn(qn,i,n,a),Bn(e,Zn,qn,2*a*(1-a)),e}),mr=(Qn=ve(),function(e,t,i,n){return Qn[0]=i[0],Qn[3]=i[1],Qn[6]=i[2],Qn[1]=n[0],Qn[4]=n[1],Qn[7]=n[2],Qn[2]=-t[0],Qn[5]=-t[1],Qn[8]=-t[2],ur(e,zn(e,Qn))});function gr(){var e=new p(8);return p!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function vr(e){var t=new p(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function br(e,t,i,n,r,a,s,o){var l=new p(8);return l[0]=e,l[1]=t,l[2]=i,l[3]=n,l[4]=r,l[5]=a,l[6]=s,l[7]=o,l}function _r(e,t,i,n,r,a,s){var o=new p(8);o[0]=e,o[1]=t,o[2]=i,o[3]=n;var l=.5*r,c=.5*a,u=.5*s;return o[4]=l*n+c*i-u*t,o[5]=c*n+u*e-l*i,o[6]=u*n+l*t-c*e,o[7]=-l*e-c*t-u*i,o}function yr(e,t,i){var n=.5*i[0],r=.5*i[1],a=.5*i[2],s=t[0],o=t[1],l=t[2],c=t[3];return e[0]=s,e[1]=o,e[2]=l,e[3]=c,e[4]=n*c+r*l-a*o,e[5]=r*c+a*s-n*l,e[6]=a*c+n*o-r*s,e[7]=-n*s-r*o-a*l,e}function Ar(e,t){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*t[0],e[5]=.5*t[1],e[6]=.5*t[2],e[7]=0,e}function Er(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function wr(e,t){var i=Tn();Et(i,t);var n=new p(3);return yt(n,t),yr(e,i,n),e}function Sr(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Tr(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function xr(e,t,i,n,r,a,s,o,l){return e[0]=t,e[1]=i,e[2]=n,e[3]=r,e[4]=a,e[5]=s,e[6]=o,e[7]=l,e}var Mr=$n;function Rr(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}var Pr=$n;function Cr(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function Dr(e,t){var i=t[4],n=t[5],r=t[6],a=t[7],s=-t[0],o=-t[1],l=-t[2],c=t[3];return e[0]=2*(i*c+a*s+n*l-r*o),e[1]=2*(n*c+a*o+r*s-i*l),e[2]=2*(r*c+a*l+i*o-n*s),e}function Or(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=.5*i[0],l=.5*i[1],c=.5*i[2],u=t[4],h=t[5],d=t[6],f=t[7];return e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=s*o+r*c-a*l+u,e[5]=s*l+a*o-n*c+h,e[6]=s*c+n*l-r*o+d,e[7]=-n*o-r*l-a*c+f,e}function kr(e,t,i){var n=-t[0],r=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*n+l*a-c*r,d=l*s+u*r+c*n-o*a,f=c*s+u*a+o*r-l*n,p=u*s-o*n-l*r-c*a;return Dn(e,t,i),n=e[0],r=e[1],a=e[2],s=e[3],e[4]=h*s+p*n+d*a-f*r,e[5]=d*s+p*r+f*n-h*a,e[6]=f*s+p*a+h*r-d*n,e[7]=p*s-h*n-d*r-f*a,e}function Ir(e,t,i){var n=-t[0],r=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*n+l*a-c*r,d=l*s+u*r+c*n-o*a,f=c*s+u*a+o*r-l*n,p=u*s-o*n-l*r-c*a;return On(e,t,i),n=e[0],r=e[1],a=e[2],s=e[3],e[4]=h*s+p*n+d*a-f*r,e[5]=d*s+p*r+f*n-h*a,e[6]=f*s+p*a+h*r-d*n,e[7]=p*s-h*n-d*r-f*a,e}function Nr(e,t,i){var n=-t[0],r=-t[1],a=-t[2],s=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=o*s+u*n+l*a-c*r,d=l*s+u*r+c*n-o*a,f=c*s+u*a+o*r-l*n,p=u*s-o*n-l*r-c*a;return kn(e,t,i),n=e[0],r=e[1],a=e[2],s=e[3],e[4]=h*s+p*n+d*a-f*r,e[5]=d*s+p*r+f*n-h*a,e[6]=f*s+p*a+h*r-d*n,e[7]=p*s-h*n-d*r-f*a,e}function Lr(e,t,i){var n=i[0],r=i[1],a=i[2],s=i[3],o=t[0],l=t[1],c=t[2],u=t[3];return e[0]=o*s+u*n+l*a-c*r,e[1]=l*s+u*r+c*n-o*a,e[2]=c*s+u*a+o*r-l*n,e[3]=u*s-o*n-l*r-c*a,o=t[4],l=t[5],c=t[6],u=t[7],e[4]=o*s+u*n+l*a-c*r,e[5]=l*s+u*r+c*n-o*a,e[6]=c*s+u*a+o*r-l*n,e[7]=u*s-o*n-l*r-c*a,e}function Ur(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=i[0],l=i[1],c=i[2],u=i[3];return e[0]=n*u+s*o+r*c-a*l,e[1]=r*u+s*l+a*o-n*c,e[2]=a*u+s*c+n*l-r*o,e[3]=s*u-n*o-r*l-a*c,o=i[4],l=i[5],c=i[6],u=i[7],e[4]=n*u+s*o+r*c-a*l,e[5]=r*u+s*l+a*o-n*c,e[6]=a*u+s*c+n*l-r*o,e[7]=s*u-n*o-r*l-a*c,e}function Br(e,t,i,n){if(Math.abs(n)<f)return Sr(e,t);var r=Math.hypot(i[0],i[1],i[2]);n*=.5;var a=Math.sin(n),s=a*i[0]/r,o=a*i[1]/r,l=a*i[2]/r,c=Math.cos(n),u=t[0],h=t[1],d=t[2],p=t[3];e[0]=u*c+p*s+h*l-d*o,e[1]=h*c+p*o+d*s-u*l,e[2]=d*c+p*l+u*o-h*s,e[3]=p*c-u*s-h*o-d*l;var m=t[4],g=t[5],v=t[6],b=t[7];return e[4]=m*c+b*s+g*l-v*o,e[5]=g*c+b*o+v*s-m*l,e[6]=v*c+b*l+m*o-g*s,e[7]=b*c-m*s-g*o-v*l,e}function Fr(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e}function Gr(e,t,i){var n=t[0],r=t[1],a=t[2],s=t[3],o=i[4],l=i[5],c=i[6],u=i[7],h=t[4],d=t[5],f=t[6],p=t[7],m=i[0],g=i[1],v=i[2],b=i[3];return e[0]=n*b+s*m+r*v-a*g,e[1]=r*b+s*g+a*m-n*v,e[2]=a*b+s*v+n*g-r*m,e[3]=s*b-n*m-r*g-a*v,e[4]=n*u+s*o+r*c-a*l+h*b+p*m+d*v-f*g,e[5]=r*u+s*l+a*o-n*c+d*b+p*g+f*m-h*v,e[6]=a*u+s*c+n*l-r*o+f*b+p*v+h*g-d*m,e[7]=s*u-n*o-r*l-a*c+p*b-h*m-d*g-f*v,e}var Vr=Gr;function zr(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e}var Hr=rr;function jr(e,t,i,n){var r=1-n;return Hr(t,i)<0&&(n=-n),e[0]=t[0]*r+i[0]*n,e[1]=t[1]*r+i[1]*n,e[2]=t[2]*r+i[2]*n,e[3]=t[3]*r+i[3]*n,e[4]=t[4]*r+i[4]*n,e[5]=t[5]*r+i[5]*n,e[6]=t[6]*r+i[6]*n,e[7]=t[7]*r+i[7]*n,e}function Wr(e,t){var i=qr(t);return e[0]=-t[0]/i,e[1]=-t[1]/i,e[2]=-t[2]/i,e[3]=t[3]/i,e[4]=-t[4]/i,e[5]=-t[5]/i,e[6]=-t[6]/i,e[7]=t[7]/i,e}function Yr(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}var Xr=sr,Zr=Xr,qr=lr,Qr=qr;function Kr(e,t){var i=qr(t);if(i>0){i=Math.sqrt(i);var n=t[0]/i,r=t[1]/i,a=t[2]/i,s=t[3]/i,o=t[4],l=t[5],c=t[6],u=t[7],h=n*o+r*l+a*c+s*u;e[0]=n,e[1]=r,e[2]=a,e[3]=s,e[4]=(o-n*h)/i,e[5]=(l-r*h)/i,e[6]=(c-a*h)/i,e[7]=(u-s*h)/i}return e}function Jr(e){return"quat2("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+")"}function $r(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function ea(e,t){var i=e[0],n=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],c=e[7],u=t[0],h=t[1],d=t[2],p=t[3],m=t[4],g=t[5],v=t[6],b=t[7];return Math.abs(i-u)<=f*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-h)<=f*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=f*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-p)<=f*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(s-m)<=f*Math.max(1,Math.abs(s),Math.abs(m))&&Math.abs(o-g)<=f*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(l-v)<=f*Math.max(1,Math.abs(l),Math.abs(v))&&Math.abs(c-b)<=f*Math.max(1,Math.abs(c),Math.abs(b))}function ta(){var e=new p(2);return p!=Float32Array&&(e[0]=0,e[1]=0),e}function ia(e){var t=new p(2);return t[0]=e[0],t[1]=e[1],t}function na(e,t){var i=new p(2);return i[0]=e,i[1]=t,i}function ra(e,t){return e[0]=t[0],e[1]=t[1],e}function aa(e,t,i){return e[0]=t,e[1]=i,e}function sa(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function oa(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function la(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e}function ca(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e}function ua(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function ha(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function da(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function fa(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}function pa(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function ma(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function ga(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e}function va(e,t){var i=t[0]-e[0],n=t[1]-e[1];return Math.hypot(i,n)}function ba(e,t){var i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function _a(e){var t=e[0],i=e[1];return Math.hypot(t,i)}function ya(e){var t=e[0],i=e[1];return t*t+i*i}function Aa(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Ea(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function wa(e,t){var i=t[0],n=t[1],r=i*i+n*n;return r>0&&(r=1/Math.sqrt(r)),e[0]=t[0]*r,e[1]=t[1]*r,e}function Sa(e,t){return e[0]*t[0]+e[1]*t[1]}function Ta(e,t,i){var n=t[0]*i[1]-t[1]*i[0];return e[0]=e[1]=0,e[2]=n,e}function xa(e,t,i,n){var r=t[0],a=t[1];return e[0]=r+n*(i[0]-r),e[1]=a+n*(i[1]-a),e}function Ma(e,t){t=t||1;var i=2*m()*Math.PI;return e[0]=Math.cos(i)*t,e[1]=Math.sin(i)*t,e}function Ra(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[2]*r,e[1]=i[1]*n+i[3]*r,e}function Pa(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[2]*r+i[4],e[1]=i[1]*n+i[3]*r+i[5],e}function Ca(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[3]*r+i[6],e[1]=i[1]*n+i[4]*r+i[7],e}function Da(e,t,i){var n=t[0],r=t[1];return e[0]=i[0]*n+i[4]*r+i[12],e[1]=i[1]*n+i[5]*r+i[13],e}function Oa(e,t,i,n){var r=t[0]-i[0],a=t[1]-i[1],s=Math.sin(n),o=Math.cos(n);return e[0]=r*o-a*s+i[0],e[1]=r*s+a*o+i[1],e}function ka(e,t){var i=e[0],n=e[1],r=t[0],a=t[1],s=Math.sqrt(i*i+n*n)*Math.sqrt(r*r+a*a),o=s&&(i*r+n*a)/s;return Math.acos(Math.min(Math.max(o,-1),1))}function Ia(e){return e[0]=0,e[1]=0,e}function Na(e){return"vec2("+e[0]+", "+e[1]+")"}function La(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ua(e,t){var i=e[0],n=e[1],r=t[0],a=t[1];return Math.abs(i-r)<=f*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(n-a)<=f*Math.max(1,Math.abs(n),Math.abs(a))}var Ba=_a,Fa=oa,Ga=la,Va=ca,za=va,Ha=ba,ja=ya,Wa=function(){var e=ta();return function(t,i,n,r,a,s){var o,l;for(i||(i=2),n||(n=0),l=r?Math.min(r*i+n,t.length):t.length,o=n;o<l;o+=i)e[0]=t[o],e[1]=t[o+1],a(e,e,s),t[o]=e[0],t[o+1]=e[1];return t}}()},2705:e=>{var t;self,t=()=>{return e={7629:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(9474),s=i(1687),o=i(8652),l=i(8160),c=i(3292),u=i(6354),h=i(8901),d=i(9708),f=i(6914),p=i(2294),m=i(6133),g=i(1152),v=i(8863),b=i(2036),_={Base:class{constructor(e){this.type=e,this.$_root=null,this._definition={},this._reset()}_reset(){this._ids=new p.Ids,this._preferences=null,this._refs=new m.Manager,this._cache=null,this._valids=null,this._invalids=null,this._flags={},this._rules=[],this._singleRules=new Map,this.$_terms={},this.$_temp={ruleset:null,whens:{}}}describe(){return n("function"==typeof d.describe,"Manifest functionality disabled"),d.describe(this)}allow(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"allow"),this._values(t,"_valids")}alter(e){n(e&&"object"==typeof e&&!Array.isArray(e),"Invalid targets argument"),n(!this._inRuleset(),"Cannot set alterations inside a ruleset");const t=this.clone();t.$_terms.alterations=t.$_terms.alterations||[];for(const i in e){const r=e[i];n("function"==typeof r,"Alteration adjuster for",i,"must be a function"),t.$_terms.alterations.push({target:i,adjuster:r})}return t.$_temp.ruleset=!1,t}artifact(e){return n(void 0!==e,"Artifact cannot be undefined"),n(!this._cache,"Cannot set an artifact with a rule cache"),this.$_setFlag("artifact",e)}cast(e){return n(!1===e||"string"==typeof e,"Invalid to value"),n(!1===e||this._definition.cast[e],"Type",this.type,"does not support casting to",e),this.$_setFlag("cast",!1===e?void 0:e)}default(e,t){return this._default("default",e,t)}description(e){return n(e&&"string"==typeof e,"Description must be a non-empty string"),this.$_setFlag("description",e)}empty(e){const t=this.clone();return void 0!==e&&(e=t.$_compile(e,{override:!1})),t.$_setFlag("empty",e,{clone:!1})}error(e){return n(e,"Missing error"),n(e instanceof Error||"function"==typeof e,"Must provide a valid Error object or a function"),this.$_setFlag("error",e)}example(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(void 0!==e,"Missing example"),l.assertOptions(t,["override"]),this._inner("examples",e,{single:!0,override:t.override})}external(e,t){return"object"==typeof e&&(n(!t,"Cannot combine options with description"),t=e.description,e=e.method),n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this._inner("externals",{method:e,description:t},{single:!0})}failover(e,t){return this._default("failover",e,t)}forbidden(){return this.presence("forbidden")}id(e){return e?(n("string"==typeof e,"id must be a non-empty string"),n(/^[^\.]+$/.test(e),"id cannot contain period character"),this.$_setFlag("id",e)):this.$_setFlag("id",void 0)}invalid(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return this._values(t,"_invalids")}label(e){return n(e&&"string"==typeof e,"Label name must be a non-empty string"),this.$_setFlag("label",e)}meta(e){return n(void 0!==e,"Meta cannot be undefined"),this._inner("metas",e,{single:!0})}note(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n(t.length,"Missing notes");for(const e of t)n(e&&"string"==typeof e,"Notes must be non-empty strings");return this._inner("notes",t)}only(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"Invalid mode:",e),this.$_setFlag("only",e)}optional(){return this.presence("optional")}prefs(e){n(e,"Missing preferences"),n(void 0===e.context,"Cannot override context"),n(void 0===e.externals,"Cannot override externals"),n(void 0===e.warnings,"Cannot override warnings"),n(void 0===e.debug,"Cannot override debug"),l.checkPreferences(e);const t=this.clone();return t._preferences=l.preferences(t._preferences,e),t}presence(e){return n(["optional","required","forbidden"].includes(e),"Unknown presence mode",e),this.$_setFlag("presence",e)}raw(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"raw":void 0)}result(e){return n(["raw","strip"].includes(e),"Unknown result mode",e),this.$_setFlag("result",e)}required(){return this.presence("required")}strict(e){const t=this.clone(),i=void 0!==e&&!e;return t._preferences=l.preferences(t._preferences,{convert:i}),t}strip(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("result",e?"strip":void 0)}tag(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n(t.length,"Missing tags");for(const e of t)n(e&&"string"==typeof e,"Tags must be non-empty strings");return this._inner("tags",t)}unit(e){return n(e&&"string"==typeof e,"Unit name must be a non-empty string"),this.$_setFlag("unit",e)}valid(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];l.verifyFlat(t,"valid");const n=this.allow(...t);return n.$_setFlag("only",!!n._valids,{clone:!1}),n}when(e,t){const i=this.clone();i.$_terms.whens||(i.$_terms.whens=[]);const r=c.when(i,e,t);if(!["any","link"].includes(i.type)){const e=r.is?[r]:r.switch;for(const t of e)n(!t.then||"any"===t.then.type||t.then.type===i.type,"Cannot combine",i.type,"with",t.then&&t.then.type),n(!t.otherwise||"any"===t.otherwise.type||t.otherwise.type===i.type,"Cannot combine",i.type,"with",t.otherwise&&t.otherwise.type)}return i.$_terms.whens.push(r),i.$_mutateRebuild()}cache(e){n(!this._inRuleset(),"Cannot set caching inside a ruleset"),n(!this._cache,"Cannot override schema cache"),n(void 0===this._flags.artifact,"Cannot cache a rule with an artifact");const t=this.clone();return t._cache=e||o.provider.provision(),t.$_temp.ruleset=!1,t}clone(){const e=Object.create(Object.getPrototypeOf(this));return this._assign(e)}concat(e){n(l.isSchema(e),"Invalid schema object"),n("any"===this.type||"any"===e.type||e.type===this.type,"Cannot merge type",this.type,"with another type:",e.type),n(!this._inRuleset(),"Cannot concatenate onto a schema with open ruleset"),n(!e._inRuleset(),"Cannot concatenate a schema with open ruleset");let t=this.clone();if("any"===this.type&&"any"!==e.type){const i=e.clone();for(const e of Object.keys(t))"type"!==e&&(i[e]=t[e]);t=i}t._ids.concat(e._ids),t._refs.register(e,m.toSibling),t._preferences=t._preferences?l.preferences(t._preferences,e._preferences):e._preferences,t._valids=b.merge(t._valids,e._valids,e._invalids),t._invalids=b.merge(t._invalids,e._invalids,e._valids);for(const i of e._singleRules.keys())t._singleRules.has(i)&&(t._rules=t._rules.filter((e=>e.keep||e.name!==i)),t._singleRules.delete(i));for(const i of e._rules)e._definition.rules[i.method].multi||t._singleRules.set(i.name,i),t._rules.push(i);if(t._flags.empty&&e._flags.empty){t._flags.empty=t._flags.empty.concat(e._flags.empty);const i=Object.assign({},e._flags);delete i.empty,s(t._flags,i)}else if(e._flags.empty){t._flags.empty=e._flags.empty;const i=Object.assign({},e._flags);delete i.empty,s(t._flags,i)}else s(t._flags,e._flags);for(const i in e.$_terms){const n=e.$_terms[i];n?t.$_terms[i]?t.$_terms[i]=t.$_terms[i].concat(n):t.$_terms[i]=n.slice():t.$_terms[i]||(t.$_terms[i]=n)}return this.$_root._tracer&&this.$_root._tracer._combine(t,[this,e]),t.$_mutateRebuild()}extend(e){return n(!e.base,"Cannot extend type with another base"),h.type(this,e)}extract(e){return e=Array.isArray(e)?e:e.split("."),this._ids.reach(e)}fork(e,t){n(!this._inRuleset(),"Cannot fork inside a ruleset");let i=this;for(let n of[].concat(e))n=Array.isArray(n)?n:n.split("."),i=i._ids.fork(n,t,i);return i.$_temp.ruleset=!1,i}rule(e){const t=this._definition;l.assertOptions(e,Object.keys(t.modifiers)),n(!1!==this.$_temp.ruleset,"Cannot apply rules to empty ruleset or the last rule added does not support rule properties");const i=null===this.$_temp.ruleset?this._rules.length-1:this.$_temp.ruleset;n(i>=0&&i<this._rules.length,"Cannot apply rules to empty ruleset");const a=this.clone();for(let s=i;s<a._rules.length;++s){const i=a._rules[s],o=r(i);for(const r in e)t.modifiers[r](o,e[r]),n(o.name===i.name,"Cannot change rule name");a._rules[s]=o,a._singleRules.get(o.name)===i&&a._singleRules.set(o.name,o)}return a.$_temp.ruleset=!1,a.$_mutateRebuild()}get ruleset(){n(!this._inRuleset(),"Cannot start a new ruleset without closing the previous one");const e=this.clone();return e.$_temp.ruleset=e._rules.length,e}get $(){return this.ruleset}tailor(e){e=[].concat(e),n(!this._inRuleset(),"Cannot tailor inside a ruleset");let t=this;if(this.$_terms.alterations)for(const{target:i,adjuster:r}of this.$_terms.alterations)e.includes(i)&&(t=r(t),n(l.isSchema(t),"Alteration adjuster for",i,"failed to return a schema object"));return t=t.$_modify({each:t=>t.tailor(e),ref:!1}),t.$_temp.ruleset=!1,t.$_mutateRebuild()}tracer(){return g.location?g.location(this):this}validate(e,t){return v.entry(e,this,t)}validateAsync(e,t){return v.entryAsync(e,this,t)}$_addRule(e){"string"==typeof e&&(e={name:e}),n(e&&"object"==typeof e,"Invalid options"),n(e.name&&"string"==typeof e.name,"Invalid rule name");for(const t in e)n("_"!==t[0],"Cannot set private rule properties");const t=Object.assign({},e);t._resolve=[],t.method=t.method||t.name;const i=this._definition.rules[t.method],r=t.args;n(i,"Unknown rule",t.method);const a=this.clone();if(r){n(1===Object.keys(r).length||Object.keys(r).length===this._definition.rules[t.name].args.length,"Invalid rule definition for",this.type,t.name);for(const e in r){let s=r[e];if(i.argsByName){const o=i.argsByName.get(e);if(o.ref&&l.isResolvable(s))t._resolve.push(e),a.$_mutateRegister(s);else if(o.normalize&&(s=o.normalize(s),r[e]=s),o.assert){const t=l.validateArg(s,e,o);n(!t,t,"or reference")}}void 0!==s?r[e]=s:delete r[e]}}return i.multi||(a._ruleRemove(t.name,{clone:!1}),a._singleRules.set(t.name,t)),!1===a.$_temp.ruleset&&(a.$_temp.ruleset=null),i.priority?a._rules.unshift(t):a._rules.push(t),a}$_compile(e,t){return c.schema(this.$_root,e,t)}$_createError(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=!1!==a.flags?this._flags:{},o=a.messages?f.merge(this._definition.messages,a.messages):this._definition.messages;return new u.Report(e,t,i,s,o,n,r)}$_getFlag(e){return this._flags[e]}$_getRule(e){return this._singleRules.get(e)}$_mapLabels(e){return e=Array.isArray(e)?e:e.split("."),this._ids.labels(e)}$_match(e,t,i,n){(i=Object.assign({},i)).abortEarly=!0,i._externals=!1,t.snapshot();const r=!v.validate(e,this,t,i,n).errors;return t.restore(),r}$_modify(e){return l.assertOptions(e,["each","once","ref","schema"]),p.schema(this,e)||this}$_mutateRebuild(){return n(!this._inRuleset(),"Cannot add this rule inside a ruleset"),this._refs.reset(),this._ids.reset(),this.$_modify({each:(e,t)=>{let{source:i,name:n,path:r,key:a}=t;const s=this._definition[i][n]&&this._definition[i][n].register;!1!==s&&this.$_mutateRegister(e,{family:s,key:a})}}),this._definition.rebuild&&this._definition.rebuild(this),this.$_temp.ruleset=!1,this}$_mutateRegister(e){let{family:t,key:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._refs.register(e,t),this._ids.register(e,{key:i})}$_property(e){return this._definition.properties[e]}$_reach(e){return this._ids.reach(e)}$_rootReferences(){return this._refs.roots()}$_setFlag(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n("_"===e[0]||!this._inRuleset(),"Cannot set flag inside a ruleset");const r=this._definition.flags[e]||{};if(a(t,r.default)&&(t=void 0),a(t,this._flags[e]))return this;const s=!1!==i.clone?this.clone():this;return void 0!==t?(s._flags[e]=t,s.$_mutateRegister(t)):delete s._flags[e],"_"!==e[0]&&(s.$_temp.ruleset=!1),s}$_parent(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return this[e][l.symbols.parent].call(this,...i)}$_validate(e,t,i){return v.validate(e,this,t,i)}_assign(e){e.type=this.type,e.$_root=this.$_root,e.$_temp=Object.assign({},this.$_temp),e.$_temp.whens={},e._ids=this._ids.clone(),e._preferences=this._preferences,e._valids=this._valids&&this._valids.clone(),e._invalids=this._invalids&&this._invalids.clone(),e._rules=this._rules.slice(),e._singleRules=r(this._singleRules,{shallow:!0}),e._refs=this._refs.clone(),e._flags=Object.assign({},this._flags),e._cache=null,e.$_terms={};for(const t in this.$_terms)e.$_terms[t]=this.$_terms[t]?this.$_terms[t].slice():null;e.$_super={};for(const t in this.$_super)e.$_super[t]=this._super[t].bind(e);return e}_bare(){const e=this.clone();e._reset();const t=e._definition.terms;for(const i in t){const n=t[i];e.$_terms[i]=n.init}return e.$_mutateRebuild()}_default(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return l.assertOptions(i,"literal"),n(void 0!==t,"Missing",e,"value"),n("function"==typeof t||!i.literal,"Only function value supports literal option"),"function"==typeof t&&i.literal&&(t={[l.symbols.literal]:!0,literal:t}),this.$_setFlag(e,t)}_generate(e,t,i){if(!this.$_terms.whens)return{schema:this};const n=[],r=[];for(let a=0;a<this.$_terms.whens.length;++a){const s=this.$_terms.whens[a];if(s.concat){n.push(s.concat),r.push(`${a}.concat`);continue}const o=s.ref?s.ref.resolve(e,t,i):e,l=s.is?[s]:s.switch,c=r.length;for(let c=0;c<l.length;++c){const{is:u,then:h,otherwise:d}=l[c],f=`${a}${s.switch?"."+c:""}`;if(u.$_match(o,t.nest(u,`${f}.is`),i)){if(h){const a=t.localize([...t.path,`${f}.then`],t.ancestors,t.schemas),{schema:s,id:o}=h._generate(e,a,i);n.push(s),r.push(`${f}.then${o?`(${o})`:""}`);break}}else if(d){const a=t.localize([...t.path,`${f}.otherwise`],t.ancestors,t.schemas),{schema:s,id:o}=d._generate(e,a,i);n.push(s),r.push(`${f}.otherwise${o?`(${o})`:""}`);break}}if(s.break&&r.length>c)break}const a=r.join(", ");if(t.mainstay.tracer.debug(t,"rule","when",a),!a)return{schema:this};if(!t.mainstay.tracer.active&&this.$_temp.whens[a])return{schema:this.$_temp.whens[a],id:a};let s=this;this._definition.generate&&(s=this._definition.generate(this,e,t,i));for(const e of n)s=s.concat(e);return this.$_root._tracer&&this.$_root._tracer._combine(s,[this,...n]),this.$_temp.whens[a]=s,{schema:s,id:a}}_inner(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n(!this._inRuleset(),`Cannot set ${e} inside a ruleset`);const r=this.clone();return r.$_terms[e]&&!i.override||(r.$_terms[e]=[]),i.single?r.$_terms[e].push(t):r.$_terms[e].push(...t),r.$_temp.ruleset=!1,r}_inRuleset(){return null!==this.$_temp.ruleset&&!1!==this.$_temp.ruleset}_ruleRemove(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this._singleRules.has(e))return this;const i=!1!==t.clone?this.clone():this;i._singleRules.delete(e);const n=[];for(let t=0;t<i._rules.length;++t){const r=i._rules[t];r.name!==e||r.keep?n.push(r):i._inRuleset()&&t<i.$_temp.ruleset&&--i.$_temp.ruleset}return i._rules=n,i}_values(e,t){l.verifyFlat(e,t.slice(1,-1));const i=this.clone(),r=e[0]===l.symbols.override;if(r&&(e=e.slice(1)),!i[t]&&e.length?i[t]=new b:r&&(i[t]=e.length?new b:null,i.$_mutateRebuild()),!i[t])return i;r&&i[t].override();for(const r of e){n(void 0!==r,"Cannot call allow/valid/invalid with undefined"),n(r!==l.symbols.override,"Override must be the first value");const e="_invalids"===t?"_valids":"_invalids";i[e]&&(i[e].remove(r),i[e].length||(n("_valids"===t||!i._flags.only,"Setting invalid value",r,"leaves schema rejecting all values due to previous valid rule"),i[e]=null)),i[t].add(r,i._refs)}return i}}};_.Base.prototype[l.symbols.any]={version:l.version,compile:c.compile,root:"$_root"},_.Base.prototype.isImmutable=!0,_.Base.prototype.deny=_.Base.prototype.invalid,_.Base.prototype.disallow=_.Base.prototype.invalid,_.Base.prototype.equal=_.Base.prototype.valid,_.Base.prototype.exist=_.Base.prototype.required,_.Base.prototype.not=_.Base.prototype.invalid,_.Base.prototype.options=_.Base.prototype.prefs,_.Base.prototype.preferences=_.Base.prototype.prefs,e.exports=new _.Base},8652:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(8160),s={max:1e3,supported:new Set(["undefined","boolean","number","string"])};t.provider={provision:e=>new s.Cache(e)},s.Cache=class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a.assertOptions(e,["max"]),n(void 0===e.max||e.max&&e.max>0&&isFinite(e.max),"Invalid max cache size"),this._max=e.max||s.max,this._map=new Map,this._list=new s.List}get length(){return this._map.size}set(e,t){if(null!==e&&!s.supported.has(typeof e))return;let i=this._map.get(e);if(i)return i.value=t,void this._list.first(i);i=this._list.unshift({key:e,value:t}),this._map.set(e,i),this._compact()}get(e){const t=this._map.get(e);if(t)return this._list.first(t),r(t.value)}_compact(){if(this._map.size>this._max){const e=this._list.pop();this._map.delete(e.key)}}},s.List=class{constructor(){this.tail=null,this.head=null}unshift(e){return e.next=null,e.prev=this.head,this.head&&(this.head.next=e),this.head=e,this.tail||(this.tail=e),e}first(e){e!==this.head&&(this._remove(e),this.unshift(e))}pop(){return this._remove(this.tail)}_remove(e){const{next:t,prev:i}=e;return t.prev=i,i&&(i.next=t),e===this.tail&&(this.tail=t),e.prev=null,e.next=null,e}}},8160:(e,t,i)=>{"use strict";const n=i(375),r=i(7916),a=i(5934);let s,o;const l={isoDate:/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24\:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/};t.version=a.version,t.defaults={abortEarly:!0,allowUnknown:!1,artifacts:!1,cache:!0,context:null,convert:!0,dateFormat:"iso",errors:{escapeHtml:!1,label:"path",language:null,render:!0,stack:!1,wrap:{label:'"',array:"[]"}},externals:!0,messages:{},nonEnumerables:!1,noDefaults:!1,presence:"optional",skipFunctions:!1,stripUnknown:!1,warnings:!1},t.symbols={any:Symbol.for("@hapi/joi/schema"),arraySingle:Symbol("arraySingle"),deepDefault:Symbol("deepDefault"),errors:Symbol("errors"),literal:Symbol("literal"),override:Symbol("override"),parent:Symbol("parent"),prefs:Symbol("prefs"),ref:Symbol("ref"),template:Symbol("template"),values:Symbol("values")},t.assertOptions=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Options";n(e&&"object"==typeof e&&!Array.isArray(e),"Options must be of type object");const r=Object.keys(e).filter((e=>!t.includes(e)));n(0===r.length,`${i} contain unknown keys: ${r}`)},t.checkPreferences=function(e){o=o||i(3378);const t=o.preferences.validate(e);if(t.error)throw new r([t.error.details[0].message])},t.compare=function(e,t,i){switch(i){case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}},t.default=function(e,t){return void 0===e?t:e},t.isIsoDate=function(e){return l.isoDate.test(e)},t.isNumber=function(e){return"number"==typeof e&&!isNaN(e)},t.isResolvable=function(e){return!!e&&(e[t.symbols.ref]||e[t.symbols.template])},t.isSchema=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=e&&e[t.symbols.any];return!!r&&(n(i.legacy||r.version===t.version,"Cannot mix different versions of joi schemas"),!0)},t.isValues=function(e){return e[t.symbols.values]},t.limit=function(e){return Number.isSafeInteger(e)&&e>=0},t.preferences=function(e,n){s=s||i(6914),e=e||{},n=n||{};const r=Object.assign({},e,n);return n.errors&&e.errors&&(r.errors=Object.assign({},e.errors,n.errors),r.errors.wrap=Object.assign({},e.errors.wrap,n.errors.wrap)),n.messages&&(r.messages=s.compile(n.messages,e.messages)),delete r[t.symbols.prefs],r},t.tryWithPath=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{return e()}catch(e){throw void 0!==e.path?e.path=t+"."+e.path:e.path=t,i.append&&(e.message=`${e.message} (${e.path})`),e}},t.validateArg=function(e,i,n){let{assert:r,message:a}=n;if(t.isSchema(r)){const t=r.validate(e);if(!t.error)return;return t.error.message}if(!r(e))return i?`${i} ${a}`:a},t.verifyFlat=function(e,t){for(const i of e)n(!Array.isArray(i),"Method no longer accepts array arguments:",t)}},3292:(e,t,i)=>{"use strict";const n=i(375),r=i(8160),a=i(6133),s={};t.schema=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.assertOptions(i,["appendPath","override"]);try{return s.schema(e,t,i)}catch(e){throw i.appendPath&&void 0!==e.path&&(e.message=`${e.message} (${e.path})`),e}},s.schema=function(e,t,i){n(void 0!==t,"Invalid undefined schema"),Array.isArray(t)&&(n(t.length,"Invalid empty array schema"),1===t.length&&(t=t[0]));const a=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return!1!==i.override?t.valid(e.override,...r):t.valid(...r)};if(s.simple(t))return a(e,t);if("function"==typeof t)return e.custom(t);if(n("object"==typeof t,"Invalid schema content:",typeof t),r.isResolvable(t))return a(e,t);if(r.isSchema(t))return t;if(Array.isArray(t)){for(const i of t)if(!s.simple(i))return e.alternatives().try(...t);return a(e,...t)}return t instanceof RegExp?e.string().regex(t):t instanceof Date?a(e.date(),t):(n(Object.getPrototypeOf(t)===Object.getPrototypeOf({}),"Schema can only contain plain objects"),e.object().keys(t))},t.ref=function(e,t){return a.isRef(e)?e:a.create(e,t)},t.compile=function(e,i){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r.assertOptions(a,["legacy"]);const o=i&&i[r.symbols.any];if(o)return n(a.legacy||o.version===r.version,"Cannot mix different versions of joi schemas:",o.version,r.version),i;if("object"!=typeof i||!a.legacy)return t.schema(e,i,{appendPath:!0});const l=s.walk(i);return l?l.compile(l.root,i):t.schema(e,i,{appendPath:!0})},s.walk=function(e){if("object"!=typeof e)return null;if(Array.isArray(e)){for(const t of e){const e=s.walk(t);if(e)return e}return null}const t=e[r.symbols.any];if(t)return{root:e[t.root],compile:t.compile};n(Object.getPrototypeOf(e)===Object.getPrototypeOf({}),"Schema can only contain plain objects");for(const t in e){const i=s.walk(e[t]);if(i)return i}return null},s.simple=function(e){return null===e||["boolean","string","number"].includes(typeof e)},t.when=function(e,i,o){if(void 0===o&&(n(i&&"object"==typeof i,"Missing options"),o=i,i=a.create(".")),Array.isArray(o)&&(o={switch:o}),r.assertOptions(o,["is","not","then","otherwise","switch","break"]),r.isSchema(i))return n(void 0===o.is,'"is" can not be used with a schema condition'),n(void 0===o.not,'"not" can not be used with a schema condition'),n(void 0===o.switch,'"switch" can not be used with a schema condition'),s.condition(e,{is:i,then:o.then,otherwise:o.otherwise,break:o.break});if(n(a.isRef(i)||"string"==typeof i,"Invalid condition:",i),n(void 0===o.not||void 0===o.is,'Cannot combine "is" with "not"'),void 0===o.switch){let l=o;void 0!==o.not&&(l={is:o.not,then:o.otherwise,otherwise:o.then,break:o.break});let c=void 0!==l.is?e.$_compile(l.is):e.$_root.invalid(null,!1,0,"").required();return n(void 0!==l.then||void 0!==l.otherwise,'options must have at least one of "then", "otherwise", or "switch"'),n(void 0===l.break||void 0===l.then||void 0===l.otherwise,"Cannot specify then, otherwise, and break all together"),void 0===o.is||a.isRef(o.is)||r.isSchema(o.is)||(c=c.required()),s.condition(e,{ref:t.ref(i),is:c,then:l.then,otherwise:l.otherwise,break:l.break})}n(Array.isArray(o.switch),'"switch" must be an array'),n(void 0===o.is,'Cannot combine "switch" with "is"'),n(void 0===o.not,'Cannot combine "switch" with "not"'),n(void 0===o.then,'Cannot combine "switch" with "then"');const l={ref:t.ref(i),switch:[],break:o.break};for(let t=0;t<o.switch.length;++t){const i=o.switch[t],s=t===o.switch.length-1;r.assertOptions(i,s?["is","then","otherwise"]:["is","then"]),n(void 0!==i.is,'Switch statement missing "is"'),n(void 0!==i.then,'Switch statement missing "then"');const c={is:e.$_compile(i.is),then:e.$_compile(i.then)};if(a.isRef(i.is)||r.isSchema(i.is)||(c.is=c.is.required()),s){n(void 0===o.otherwise||void 0===i.otherwise,'Cannot specify "otherwise" inside and outside a "switch"');const t=void 0!==o.otherwise?o.otherwise:i.otherwise;void 0!==t&&(n(void 0===l.break,"Cannot specify both otherwise and break"),c.otherwise=e.$_compile(t))}l.switch.push(c)}return l},s.condition=function(e,t){for(const i of["then","otherwise"])void 0===t[i]?delete t[i]:t[i]=e.$_compile(t[i]);return t}},6354:(e,t,i)=>{"use strict";const n=i(5688),r=i(8160),a=i(3328);t.Report=class{constructor(e,i,n,r,a,s,o){if(this.code=e,this.flags=r,this.messages=a,this.path=s.path,this.prefs=o,this.state=s,this.value=i,this.message=null,this.template=null,this.local=n||{},this.local.label=t.label(this.flags,this.state,this.prefs,this.messages),void 0===this.value||this.local.hasOwnProperty("value")||(this.local.value=this.value),this.path.length){const e=this.path[this.path.length-1];"object"!=typeof e&&(this.local.key=e)}}_setTemplate(e){if(this.template=e,!this.flags.label&&0===this.path.length){const e=this._template(this.template,"root");e&&(this.local.label=e)}}toString(){if(this.message)return this.message;const e=this.code;if(!this.prefs.errors.render)return this.code;const t=this._template(this.template)||this._template(this.prefs.messages)||this._template(this.messages);return void 0===t?`Error code "${e}" is not defined, your custom type is missing the correct messages definition`:(this.message=t.render(this.value,this.state,this.prefs,this.local,{errors:this.prefs.errors,messages:[this.prefs.messages,this.messages]}),this.prefs.errors.label||(this.message=this.message.replace(/^"" /,"").trim()),this.message)}_template(e,i){return t.template(this.value,e,i||this.code,this.state,this.prefs)}},t.path=function(e){let t="";for(const i of e)"object"!=typeof i&&("string"==typeof i?(t&&(t+="."),t+=i):t+=`[${i}]`);return t},t.template=function(e,t,i,n,s){if(!t)return;if(a.isTemplate(t))return"root"!==i?t:null;let o=s.errors.language;if(r.isResolvable(o)&&(o=o.resolve(e,n,s)),o&&t[o]){if(void 0!==t[o][i])return t[o][i];if(void 0!==t[o]["*"])return t[o]["*"]}return t[i]?t[i]:t["*"]},t.label=function(e,i,n,r){if(e.label)return e.label;if(!n.errors.label)return"";let a=i.path;return"key"===n.errors.label&&i.path.length>1&&(a=i.path.slice(-1)),t.path(a)||t.template(null,n.messages,"root",i,n)||r&&t.template(null,r,"root",i,n)||"value"},t.process=function(e,i,n){if(!e)return null;const{override:r,message:a,details:s}=t.details(e);if(r)return r;if(n.errors.stack)return new t.ValidationError(a,s,i);const o=Error.stackTraceLimit;Error.stackTraceLimit=0;const l=new t.ValidationError(a,s,i);return Error.stackTraceLimit=o,l},t.details=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=[];const n=[];for(const r of e){if(r instanceof Error){if(!1!==t.override)return{override:r};const e=r.toString();i.push(e),n.push({message:e,type:"override",context:{error:r}});continue}const e=r.toString();i.push(e),n.push({message:e,path:r.path.filter((e=>"object"!=typeof e)),type:r.code,context:r.local})}return i.length>1&&(i=[...new Set(i)]),{message:i.join(". "),details:n}},t.ValidationError=class extends Error{constructor(e,t,i){super(e),this._original=i,this.details=t}static isError(e){return e instanceof t.ValidationError}},t.ValidationError.prototype.isJoi=!0,t.ValidationError.prototype.name="ValidationError",t.ValidationError.prototype.annotate=n.error},8901:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(8160),s=i(6914),o={};t.type=function(e,t){const i=Object.getPrototypeOf(e),l=r(i),c=e._assign(Object.create(l)),u=Object.assign({},t);delete u.base,l._definition=u;const h=i._definition||{};u.messages=s.merge(h.messages,u.messages),u.properties=Object.assign({},h.properties,u.properties),c.type=u.type,u.flags=Object.assign({},h.flags,u.flags);const d=Object.assign({},h.terms);if(u.terms)for(const e in u.terms){const t=u.terms[e];n(void 0===c.$_terms[e],"Invalid term override for",u.type,e),c.$_terms[e]=t.init,d[e]=t}u.terms=d,u.args||(u.args=h.args),u.prepare=o.prepare(u.prepare,h.prepare),u.coerce&&("function"==typeof u.coerce&&(u.coerce={method:u.coerce}),u.coerce.from&&!Array.isArray(u.coerce.from)&&(u.coerce={method:u.coerce.method,from:[].concat(u.coerce.from)})),u.coerce=o.coerce(u.coerce,h.coerce),u.validate=o.validate(u.validate,h.validate);const f=Object.assign({},h.rules);if(u.rules)for(const e in u.rules){const t=u.rules[e];n("object"==typeof t,"Invalid rule definition for",u.type,e);let i=t.method;if(void 0===i&&(i=function(){return this.$_addRule(e)}),i&&(n(!l[e],"Rule conflict in",u.type,e),l[e]=i),n(!f[e],"Rule conflict in",u.type,e),f[e]=t,t.alias){const e=[].concat(t.alias);for(const i of e)l[i]=t.method}t.args&&(t.argsByName=new Map,t.args=t.args.map((e=>("string"==typeof e&&(e={name:e}),n(!t.argsByName.has(e.name),"Duplicated argument name",e.name),a.isSchema(e.assert)&&(e.assert=e.assert.strict().label(e.name)),t.argsByName.set(e.name,e),e))))}u.rules=f;const p=Object.assign({},h.modifiers);if(u.modifiers)for(const e in u.modifiers){n(!l[e],"Rule conflict in",u.type,e);const t=u.modifiers[e];n("function"==typeof t,"Invalid modifier definition for",u.type,e);const i=function(t){return this.rule({[e]:t})};l[e]=i,p[e]=t}if(u.modifiers=p,u.overrides){l._super=i,c.$_super={};for(const e in u.overrides)n(i[e],"Cannot override missing",e),u.overrides[e][a.symbols.parent]=i[e],c.$_super[e]=i[e].bind(c);Object.assign(l,u.overrides)}u.cast=Object.assign({},h.cast,u.cast);const m=Object.assign({},h.manifest,u.manifest);return m.build=o.build(u.manifest&&u.manifest.build,h.manifest&&h.manifest.build),u.manifest=m,u.rebuild=o.rebuild(u.rebuild,h.rebuild),c},o.build=function(e,t){return e&&t?function(i,n){return t(e(i,n),n)}:e||t},o.coerce=function(e,t){return e&&t?{from:e.from&&t.from?[...new Set([...e.from,...t.from])]:null,method(i,n){let r;if((!t.from||t.from.includes(typeof i))&&(r=t.method(i,n),r)){if(r.errors||void 0===r.value)return r;i=r.value}if(!e.from||e.from.includes(typeof i)){const t=e.method(i,n);if(t)return t}return r}}:e||t},o.prepare=function(e,t){return e&&t?function(i,n){const r=e(i,n);if(r){if(r.errors||void 0===r.value)return r;i=r.value}return t(i,n)||r}:e||t},o.rebuild=function(e,t){return e&&t?function(i){t(i),e(i)}:e||t},o.validate=function(e,t){return e&&t?function(i,n){const r=t(i,n);if(r){if(r.errors&&(!Array.isArray(r.errors)||r.errors.length))return r;i=r.value}return e(i,n)||r}:e||t}},5107:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(8652),s=i(8160),o=i(3292),l=i(6354),c=i(8901),u=i(9708),h=i(6133),d=i(3328),f=i(1152);let p;const m={types:{alternatives:i(4946),any:i(8068),array:i(546),boolean:i(4937),date:i(7500),function:i(390),link:i(8785),number:i(3832),object:i(8966),string:i(7417),symbol:i(8826)},aliases:{alt:"alternatives",bool:"boolean",func:"function"},root:function(){const e={_types:new Set(Object.keys(m.types))};for(const t of e._types)e[t]=function(){for(var e=arguments.length,i=new Array(e),r=0;r<e;r++)i[r]=arguments[r];return n(!i.length||["alternatives","link","object"].includes(t),"The",t,"type does not allow arguments"),m.generate(this,m.types[t],i)};for(const t of["allow","custom","disallow","equal","exist","forbidden","invalid","not","only","optional","options","prefs","preferences","required","strip","valid","when"])e[t]=function(){return this.any()[t](...arguments)};Object.assign(e,m.methods);for(const t in m.aliases){const i=m.aliases[t];e[t]=e[i]}return e.x=e.expression,f.setup&&f.setup(e),e}};m.methods={ValidationError:l.ValidationError,version:s.version,cache:a.provider,assert(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];m.assert(e,t,!0,n)},attempt(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return m.assert(e,t,!1,n)},build(e){return n("function"==typeof u.build,"Manifest functionality disabled"),u.build(this,e)},checkPreferences(e){s.checkPreferences(e)},compile(e,t){return o.compile(this,e,t)},defaults(e){n("function"==typeof e,"modifier must be a function");const t=Object.assign({},this);for(const i of t._types){const r=e(t[i]());n(s.isSchema(r),"modifier must return a valid schema object"),t[i]=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return m.generate(this,r,t)}}return t},expression(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new d(...t)},extend(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];s.verifyFlat(t,"extend"),p=p||i(3378),n(t.length,"You need to provide at least one extension"),this.assert(t,p.extensions);const a=Object.assign({},this);a._types=new Set(a._types);for(let e of t){"function"==typeof e&&(e=e(a)),this.assert(e,p.extension);const t=m.expandExtension(e,a);for(const e of t){n(void 0===a[e.type]||a._types.has(e.type),"Cannot override name",e.type);const t=e.base||this.any(),i=c.type(t,e);a._types.add(e.type),a[e.type]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return m.generate(this,i,t)}}}return a},isError:l.ValidationError.isError,isExpression:d.isTemplate,isRef:h.isRef,isSchema:s.isSchema,in(){return h.in(...arguments)},override:s.symbols.override,ref(){return h.create(...arguments)},types(){const e={};for(const t of this._types)e[t]=this[t]();for(const t in m.aliases)e[t]=this[t]();return e}},m.assert=function(e,t,i,n){const a=n[0]instanceof Error||"string"==typeof n[0]?n[0]:null,o=null!==a?n[1]:n[0],c=t.validate(e,s.preferences({errors:{stack:!0}},o||{}));let u=c.error;if(!u)return c.value;if(a instanceof Error)throw a;const h=i&&"function"==typeof u.annotate?u.annotate():u.message;throw u instanceof l.ValidationError==0&&(u=r(u)),u.message=a?`${a} ${h}`:h,u},m.generate=function(e,t,i){return n(e,"Must be invoked on a Joi instance."),t.$_root=e,t._definition.args&&i.length?t._definition.args(t,...i):t},m.expandExtension=function(e,t){if("string"==typeof e.type)return[e];const i=[];for(const n of t._types)if(e.type.test(n)){const r=Object.assign({},e);r.type=n,r.base=t[n](),i.push(r)}return i},e.exports=m.root()},6914:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(3328);t.compile=function(e,t){if("string"==typeof e)return n(!t,"Cannot set single message string"),new a(e);if(a.isTemplate(e))return n(!t,"Cannot set single message template"),e;n("object"==typeof e&&!Array.isArray(e),"Invalid message options"),t=t?r(t):{};for(let i in e){const r=e[i];if("root"===i||a.isTemplate(r)){t[i]=r;continue}if("string"==typeof r){t[i]=new a(r);continue}n("object"==typeof r&&!Array.isArray(r),"Invalid message for",i);const s=i;for(i in t[s]=t[s]||{},r){const e=r[i];"root"===i||a.isTemplate(e)?t[s][i]=e:(n("string"==typeof e,"Invalid message for",i,"in",s),t[s][i]=new a(e))}}return t},t.decompile=function(e){const t={};for(let i in e){const n=e[i];if("root"===i){t.root=n;continue}if(a.isTemplate(n)){t[i]=n.describe({compact:!0});continue}const r=i;for(i in t[r]={},n){const e=n[i];"root"!==i?t[r][i]=e.describe({compact:!0}):t[r].root=e}}return t},t.merge=function(e,i){if(!e)return t.compile(i);if(!i)return e;if("string"==typeof i)return new a(i);if(a.isTemplate(i))return i;const s=r(e);for(let e in i){const t=i[e];if("root"===e||a.isTemplate(t)){s[e]=t;continue}if("string"==typeof t){s[e]=new a(t);continue}n("object"==typeof t&&!Array.isArray(t),"Invalid message for",e);const r=e;for(e in s[r]=s[r]||{},t){const i=t[e];"root"===e||a.isTemplate(i)?s[r][e]=i:(n("string"==typeof i,"Invalid message for",e,"in",r),s[r][e]=new a(i))}}return s}},2294:(e,t,i)=>{"use strict";const n=i(375),r=i(8160),a=i(6133),s={};t.Ids=s.Ids=class{constructor(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}clone(){const e=new s.Ids;return e._byId=new Map(this._byId),e._byKey=new Map(this._byKey),e._schemaChain=this._schemaChain,e}concat(e){e._schemaChain&&(this._schemaChain=!0);for(const[t,i]of e._byId.entries())n(!this._byKey.has(t),"Schema id conflicts with existing key:",t),this._byId.set(t,i);for(const[t,i]of e._byKey.entries())n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,i)}fork(e,t,i){const a=this._collect(e);a.push({schema:i});const o=a.shift();let l={id:o.id,schema:t(o.schema)};n(r.isSchema(l.schema),"adjuster function failed to return a joi schema type");for(const e of a)l={id:e.id,schema:s.fork(e.schema,l.id,l.schema)};return l.schema}labels(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e[0],n=this._get(i);if(!n)return[...t,...e].join(".");const r=e.slice(1);return t=[...t,n.schema._flags.label||i],r.length?n.schema._ids.labels(r,t):t.join(".")}reach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e[0],r=this._get(i);n(r,"Schema does not contain path",[...t,...e].join("."));const a=e.slice(1);return a.length?r.schema._ids.reach(a,[...t,i]):r.schema}register(e){let{key:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!r.isSchema(e))return;(e.$_property("schemaChain")||e._ids._schemaChain)&&(this._schemaChain=!0);const i=e._flags.id;if(i){const t=this._byId.get(i);n(!t||t.schema===e,"Cannot add different schemas with the same id:",i),n(!this._byKey.has(i),"Schema id conflicts with existing key:",i),this._byId.set(i,{schema:e,id:i})}t&&(n(!this._byKey.has(t),"Schema already contains key:",t),n(!this._byId.has(t),"Schema key conflicts with existing id:",t),this._byKey.set(t,{schema:e,id:t}))}reset(){this._byId=new Map,this._byKey=new Map,this._schemaChain=!1}_collect(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const r=e[0],a=this._get(r);n(a,"Schema does not contain path",[...t,...e].join(".")),i=[a,...i];const s=e.slice(1);return s.length?a.schema._ids._collect(s,[...t,r],i):i}_get(e){return this._byId.get(e)||this._byKey.get(e)}},s.fork=function(e,i,n){const r=t.schema(e,{each:(e,t)=>{let{key:r}=t;if(i===(e._flags.id||r))return n},ref:!1});return r?r.$_mutateRebuild():e},t.schema=function(e,t){let i;for(const n in e._flags){if("_"===n[0])continue;const r=s.scan(e._flags[n],{source:"flags",name:n},t);void 0!==r&&(i=i||e.clone(),i._flags[n]=r)}for(let n=0;n<e._rules.length;++n){const r=e._rules[n],a=s.scan(r.args,{source:"rules",name:r.name},t);if(void 0!==a){i=i||e.clone();const t=Object.assign({},r);t.args=a,i._rules[n]=t,i._singleRules.get(r.name)===r&&i._singleRules.set(r.name,t)}}for(const n in e.$_terms){if("_"===n[0])continue;const r=s.scan(e.$_terms[n],{source:"terms",name:n},t);void 0!==r&&(i=i||e.clone(),i.$_terms[n]=r)}return i},s.scan=function(e,t,i,n,o){const l=n||[];if(null===e||"object"!=typeof e)return;let c;if(Array.isArray(e)){for(let n=0;n<e.length;++n){const r="terms"===t.source&&"keys"===t.name&&e[n].key,a=s.scan(e[n],t,i,[n,...l],r);void 0!==a&&(c=c||e.slice(),c[n]=a)}return c}if(!1!==i.schema&&r.isSchema(e)||!1!==i.ref&&a.isRef(e)){const n=i.each(e,{...t,path:l,key:o});if(n===e)return;return n}for(const n in e){if("_"===n[0])continue;const r=s.scan(e[n],t,i,[n,...l],o);void 0!==r&&(c=c||Object.assign({},e),c[n]=r)}return c}},6133:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(9621),s=i(8160);let o;const l={symbol:Symbol("ref"),defaults:{adjust:null,in:!1,iterables:null,map:null,separator:".",type:"value"}};t.create=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n("string"==typeof e,"Invalid reference key:",e),s.assertOptions(t,["adjust","ancestor","in","iterables","map","prefix","render","separator"]),n(!t.prefix||"object"==typeof t.prefix,"options.prefix must be of type object");const i=Object.assign({},l.defaults,t);delete i.prefix;const r=i.separator,a=l.context(e,r,t.prefix);if(i.type=a.type,e=a.key,"value"===i.type)if(a.root&&(n(!r||e[0]!==r,"Cannot specify relative path with root prefix"),i.ancestor="root",e||(e=null)),r&&r===e)e=null,i.ancestor=0;else if(void 0!==i.ancestor)n(!r||!e||e[0]!==r,"Cannot combine prefix with ancestor option");else{const[t,n]=l.ancestor(e,r);n&&""===(e=e.slice(n))&&(e=null),i.ancestor=t}return i.path=r?null===e?[]:e.split(r):[e],new l.Ref(i)},t.in=function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.create(e,{...i,in:!0})},t.isRef=function(e){return!!e&&!!e[s.symbols.ref]},l.Ref=class{constructor(e){n("object"==typeof e,"Invalid reference construction"),s.assertOptions(e,["adjust","ancestor","in","iterables","map","path","render","separator","type","depth","key","root","display"]),n([!1,void 0].includes(e.separator)||"string"==typeof e.separator&&1===e.separator.length,"Invalid separator"),n(!e.adjust||"function"==typeof e.adjust,"options.adjust must be a function"),n(!e.map||Array.isArray(e.map),"options.map must be an array"),n(!e.map||!e.adjust,"Cannot set both map and adjust options"),Object.assign(this,l.defaults,e),n("value"===this.type||void 0===this.ancestor,"Non-value references cannot reference ancestors"),Array.isArray(this.map)&&(this.map=new Map(this.map)),this.depth=this.path.length,this.key=this.path.length?this.path.join(this.separator):null,this.root=this.path[0],this.updateDisplay()}resolve(e,t,i,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return n(!this.in||a.in,"Invalid in() reference usage"),"global"===this.type?this._resolve(i.context,t,a):"local"===this.type?this._resolve(r,t,a):this.ancestor?"root"===this.ancestor?this._resolve(t.ancestors[t.ancestors.length-1],t,a):(n(this.ancestor<=t.ancestors.length,"Invalid reference exceeds the schema root:",this.display),this._resolve(t.ancestors[this.ancestor-1],t,a)):this._resolve(e,t,a)}_resolve(e,t,i){let n;if("value"===this.type&&t.mainstay.shadow&&!1!==i.shadow&&(n=t.mainstay.shadow.get(this.absolute(t))),void 0===n&&(n=a(e,this.path,{iterables:this.iterables,functions:!0})),this.adjust&&(n=this.adjust(n)),this.map){const e=this.map.get(n);void 0!==e&&(n=e)}return t.mainstay&&t.mainstay.tracer.resolve(t,this,n),n}toString(){return this.display}absolute(e){return[...e.path.slice(0,-this.ancestor),...this.path]}clone(){return new l.Ref(this)}describe(){const e={path:this.path};"value"!==this.type&&(e.type=this.type),"."!==this.separator&&(e.separator=this.separator),"value"===this.type&&1!==this.ancestor&&(e.ancestor=this.ancestor),this.map&&(e.map=[...this.map]);for(const t of["adjust","iterables","render"])null!==this[t]&&void 0!==this[t]&&(e[t]=this[t]);return!1!==this.in&&(e.in=!0),{ref:e}}updateDisplay(){const e=null!==this.key?this.key:"";if("value"!==this.type)return void(this.display=`ref:${this.type}:${e}`);if(!this.separator)return void(this.display=`ref:${e}`);if(!this.ancestor)return void(this.display=`ref:${this.separator}${e}`);if("root"===this.ancestor)return void(this.display=`ref:root:${e}`);if(1===this.ancestor)return void(this.display=`ref:${e||".."}`);const t=new Array(this.ancestor+1).fill(this.separator).join("");this.display=`ref:${t}${e||""}`}},l.Ref.prototype[s.symbols.ref]=!0,t.build=function(e){return"value"===(e=Object.assign({},l.defaults,e)).type&&void 0===e.ancestor&&(e.ancestor=1),new l.Ref(e)},l.context=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e=e.trim(),i){const n=void 0===i.global?"$":i.global;if(n!==t&&e.startsWith(n))return{key:e.slice(n.length),type:"global"};const r=void 0===i.local?"#":i.local;if(r!==t&&e.startsWith(r))return{key:e.slice(r.length),type:"local"};const a=void 0===i.root?"/":i.root;if(a!==t&&e.startsWith(a))return{key:e.slice(a.length),type:"value",root:!0}}return{key:e,type:"value"}},l.ancestor=function(e,t){if(!t)return[1,0];if(e[0]!==t)return[1,0];if(e[1]!==t)return[0,1];let i=2;for(;e[i]===t;)++i;return[i-1,i]},t.toSibling=0,t.toParent=1,t.Manager=class{constructor(){this.refs=[]}register(e,n){if(e)if(n=void 0===n?t.toParent:n,Array.isArray(e))for(const t of e)this.register(t,n);else if(s.isSchema(e))for(const t of e._refs.refs)t.ancestor-n>=0&&this.refs.push({ancestor:t.ancestor-n,root:t.root});else t.isRef(e)&&"value"===e.type&&e.ancestor-n>=0&&this.refs.push({ancestor:e.ancestor-n,root:e.root}),o=o||i(3328),o.isTemplate(e)&&this.register(e.refs(),n)}get length(){return this.refs.length}clone(){const e=new t.Manager;return e.refs=r(this.refs),e}reset(){this.refs=[]}roots(){return this.refs.filter((e=>!e.ancestor)).map((e=>e.root))}}},3378:(e,t,i)=>{"use strict";const n=i(5107),r={};r.wrap=n.string().min(1).max(2).allow(!1),t.preferences=n.object({allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),context:n.object(),convert:n.boolean(),dateFormat:n.valid("date","iso","string","time","utc"),debug:n.boolean(),errors:{escapeHtml:n.boolean(),label:n.valid("path","key",!1),language:[n.string(),n.object().ref()],render:n.boolean(),stack:n.boolean(),wrap:{label:r.wrap,array:r.wrap,string:r.wrap}},externals:n.boolean(),messages:n.object(),noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:n.valid("required","optional","forbidden"),skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()}).strict(),r.nameRx=/^[a-zA-Z0-9]\w*$/,r.rule=n.object({alias:n.array().items(n.string().pattern(r.nameRx)).single(),args:n.array().items(n.string(),n.object({name:n.string().pattern(r.nameRx).required(),ref:n.boolean(),assert:n.alternatives([n.function(),n.object().schema()]).conditional("ref",{is:!0,then:n.required()}),normalize:n.function(),message:n.string().when("assert",{is:n.function(),then:n.required()})})),convert:n.boolean(),manifest:n.boolean(),method:n.function().allow(!1),multi:n.boolean(),validate:n.function()}),t.extension=n.object({type:n.alternatives([n.string(),n.object().regex()]).required(),args:n.function(),cast:n.object().pattern(r.nameRx,n.object({from:n.function().maxArity(1).required(),to:n.function().minArity(1).maxArity(2).required()})),base:n.object().schema().when("type",{is:n.object().regex(),then:n.forbidden()}),coerce:[n.function().maxArity(3),n.object({method:n.function().maxArity(3).required(),from:n.array().items(n.string()).single()})],flags:n.object().pattern(r.nameRx,n.object({setter:n.string(),default:n.any()})),manifest:{build:n.function().arity(2)},messages:[n.object(),n.string()],modifiers:n.object().pattern(r.nameRx,n.function().minArity(1).maxArity(2)),overrides:n.object().pattern(r.nameRx,n.function()),prepare:n.function().maxArity(3),rebuild:n.function().arity(1),rules:n.object().pattern(r.nameRx,r.rule),terms:n.object().pattern(r.nameRx,n.object({init:n.array().allow(null).required(),manifest:n.object().pattern(/.+/,[n.valid("schema","single"),n.object({mapped:n.object({from:n.string().required(),to:n.string().required()}).required()})])})),validate:n.function().maxArity(3)}).strict(),t.extensions=n.array().items(n.object(),n.function().arity(1)).strict(),r.desc={buffer:n.object({buffer:n.string()}),func:n.object({function:n.function().required(),options:{literal:!0}}),override:n.object({override:!0}),ref:n.object({ref:n.object({type:n.valid("value","global","local"),path:n.array().required(),separator:n.string().length(1).allow(!1),ancestor:n.number().min(0).integer().allow("root"),map:n.array().items(n.array().length(2)).min(1),adjust:n.function(),iterables:n.boolean(),in:n.boolean(),render:n.boolean()}).required()}),regex:n.object({regex:n.string().min(3)}),special:n.object({special:n.valid("deep").required()}),template:n.object({template:n.string().required(),options:n.object()}),value:n.object({value:n.alternatives([n.object(),n.array()]).required()})},r.desc.entity=n.alternatives([n.array().items(n.link("...")),n.boolean(),n.function(),n.number(),n.string(),r.desc.buffer,r.desc.func,r.desc.ref,r.desc.regex,r.desc.special,r.desc.template,r.desc.value,n.link("/")]),r.desc.values=n.array().items(null,n.boolean(),n.function(),n.number().allow(1/0,-1/0),n.string().allow(""),n.symbol(),r.desc.buffer,r.desc.func,r.desc.override,r.desc.ref,r.desc.regex,r.desc.template,r.desc.value),r.desc.messages=n.object().pattern(/.+/,[n.string(),r.desc.template,n.object().pattern(/.+/,[n.string(),r.desc.template])]),t.description=n.object({type:n.string().required(),flags:n.object({cast:n.string(),default:n.any(),description:n.string(),empty:n.link("/"),failover:r.desc.entity,id:n.string(),label:n.string(),only:!0,presence:["optional","required","forbidden"],result:["raw","strip"],strip:n.boolean(),unit:n.string()}).unknown(),preferences:{allowUnknown:n.boolean(),abortEarly:n.boolean(),artifacts:n.boolean(),cache:n.boolean(),convert:n.boolean(),dateFormat:["date","iso","string","time","utc"],errors:{escapeHtml:n.boolean(),label:["path","key"],language:[n.string(),r.desc.ref],wrap:{label:r.wrap,array:r.wrap}},externals:n.boolean(),messages:r.desc.messages,noDefaults:n.boolean(),nonEnumerables:n.boolean(),presence:["required","optional","forbidden"],skipFunctions:n.boolean(),stripUnknown:n.object({arrays:n.boolean(),objects:n.boolean()}).or("arrays","objects").allow(!0,!1),warnings:n.boolean()},allow:r.desc.values,invalid:r.desc.values,rules:n.array().min(1).items({name:n.string().required(),args:n.object().min(1),keep:n.boolean(),message:[n.string(),r.desc.messages],warn:n.boolean()}),keys:n.object().pattern(/.*/,n.link("/")),link:r.desc.ref}).pattern(/^[a-z]\w*$/,n.any())},493:(e,t,i)=>{"use strict";const n=i(8571),r=i(9621),a=i(8160),s={value:Symbol("value")};e.exports=s.State=class{constructor(e,t,i){this.path=e,this.ancestors=t,this.mainstay=i.mainstay,this.schemas=i.schemas,this.debug=null}localize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=new s.State(e,t,this);return i&&n.schemas&&(n.schemas=[s.schemas(i),...n.schemas]),n}nest(e,t){const i=new s.State(this.path,this.ancestors,this);return i.schemas=i.schemas&&[s.schemas(e),...i.schemas],i.debug=t,i}shadow(e,t){this.mainstay.shadow=this.mainstay.shadow||new s.Shadow,this.mainstay.shadow.set(this.path,e,t)}snapshot(){this.mainstay.shadow&&(this._snapshot=n(this.mainstay.shadow.node(this.path))),this.mainstay.snapshot()}restore(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.restore()}commit(){this.mainstay.shadow&&(this.mainstay.shadow.override(this.path,this._snapshot),this._snapshot=void 0),this.mainstay.commit()}},s.schemas=function(e){return a.isSchema(e)?{schema:e}:e},s.Shadow=class{constructor(){this._values=null}set(e,t,i){if(!e.length)return;if("strip"===i&&"number"==typeof e[e.length-1])return;this._values=this._values||new Map;let n=this._values;for(let t=0;t<e.length;++t){const i=e[t];let r=n.get(i);r||(r=new Map,n.set(i,r)),n=r}n[s.value]=t}get(e){const t=this.node(e);if(t)return t[s.value]}node(e){if(this._values)return r(this._values,e,{iterables:!0})}override(e,t){if(!this._values)return;const i=e.slice(0,-1),n=e[e.length-1],a=r(this._values,i,{iterables:!0});t?a.set(n,t):a&&a.delete(n)}}},3328:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(5277),s=i(1447),o=i(8160),l=i(6354),c=i(6133),u={symbol:Symbol("template"),opens:new Array(1e3).join("\0"),closes:new Array(1e3).join(""),dateFormat:{date:Date.prototype.toDateString,iso:Date.prototype.toISOString,string:Date.prototype.toString,time:Date.prototype.toTimeString,utc:Date.prototype.toUTCString}};e.exports=u.Template=class{constructor(e,t){if(n("string"==typeof e,"Template source must be a string"),n(!e.includes("\0")&&!e.includes(""),"Template source cannot contain reserved control characters"),this.source=e,this.rendered=e,this._template=null,t){const{functions:e,...i}=t;this._settings=Object.keys(i).length?r(i):void 0,this._functions=e,this._functions&&(n(Object.keys(this._functions).every((e=>"string"==typeof e)),"Functions keys must be strings"),n(Object.values(this._functions).every((e=>"function"==typeof e)),"Functions values must be functions"))}else this._settings=void 0,this._functions=void 0;this._parse()}_parse(){if(!this.source.includes("{"))return;const e=u.encode(this.source),t=u.split(e);let i=!1;const n=[],r=t.shift();r&&n.push(r);for(const e of t){const t="{"!==e[0],r=t?"}":"}}",a=e.indexOf(r);if(-1===a||"{"===e[1]){n.push(`{${u.decode(e)}`);continue}let s=e.slice(t?0:1,a);const o=":"===s[0];o&&(s=s.slice(1));const l=this._ref(u.decode(s),{raw:t,wrapped:o});n.push(l),"string"!=typeof l&&(i=!0);const c=e.slice(a+r.length);c&&n.push(u.decode(c))}i?this._template=n:this.rendered=n.join("")}static date(e,t){return u.dateFormat[t.dateFormat].call(e)}describe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._settings&&e.compact)return this.source;const t={template:this.source};return this._settings&&(t.options=this._settings),this._functions&&(t.functions=this._functions),t}static build(e){return new u.Template(e.template,e.options||e.functions?{...e.options,functions:e.functions}:void 0)}isDynamic(){return!!this._template}static isTemplate(e){return!!e&&!!e[o.symbols.template]}refs(){if(!this._template)return;const e=[];for(const t of this._template)"string"!=typeof t&&e.push(...t.refs);return e}resolve(e,t,i,n){return this._template&&1===this._template.length?this._part(this._template[0],e,t,i,n,{}):this.render(e,t,i,n)}_part(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.ref?e.ref.resolve(...i):e.formula.evaluate(i)}render(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(!this.isDynamic())return this.rendered;const s=[];for(const o of this._template)if("string"==typeof o)s.push(o);else{const l=this._part(o,e,t,i,n,r),c=u.stringify(l,e,t,i,n,r);if(void 0!==c){const e=o.raw||!1===(r.errors&&r.errors.escapeHtml)?c:a(c);s.push(u.wrap(e,o.wrapped&&i.errors.wrap.label))}}return s.join("")}_ref(e,t){let{raw:i,wrapped:n}=t;const r=[],a=e=>{const t=c.create(e,this._settings);return r.push(t),e=>{const i=t.resolve(...e);return void 0!==i?i:null}};try{const t=this._functions?{...u.functions,...this._functions}:u.functions;var o=new s.Parser(e,{reference:a,functions:t,constants:u.constants})}catch(t){throw t.message=`Invalid template variable "${e}" fails due to: ${t.message}`,t}if(o.single){if("reference"===o.single.type){const e=r[0];return{ref:e,raw:i,refs:r,wrapped:n||"local"===e.type&&"label"===e.key}}return u.stringify(o.single.value)}return{formula:o,raw:i,refs:r}}toString(){return this.source}},u.Template.prototype[o.symbols.template]=!0,u.Template.prototype.isImmutable=!0,u.encode=function(e){return e.replace(/\\(\{+)/g,((e,t)=>u.opens.slice(0,t.length))).replace(/\\(\}+)/g,((e,t)=>u.closes.slice(0,t.length)))},u.decode=function(e){return e.replace(/\u0000/g,"{").replace(/\u0001/g,"}")},u.split=function(e){const t=[];let i="";for(let n=0;n<e.length;++n){const r=e[n];if("{"===r){let r="";for(;n+1<e.length&&"{"===e[n+1];)r+="{",++n;t.push(i),i=r}else i+=r}return t.push(i),t},u.wrap=function(e,t){return t?1===t.length?`${t}${e}${t}`:`${t[0]}${e}${t[1]}`:e},u.stringify=function(e,t,i,n,r){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=typeof e,o=n&&n.errors&&n.errors.wrap||{};let l=!1;if(c.isRef(e)&&e.render&&(l=e.in,e=e.resolve(t,i,n,r,{in:e.in,...a})),null===e)return"null";if("string"===s)return u.wrap(e,a.arrayItems&&o.string);if("number"===s||"function"===s||"symbol"===s)return e.toString();if("object"!==s)return JSON.stringify(e);if(e instanceof Date)return u.Template.date(e,n);if(e instanceof Map){const t=[];for(const[i,n]of e.entries())t.push(`${i.toString()} -> ${n.toString()}`);e=t}if(!Array.isArray(e))return e.toString();const h=[];for(const s of e)h.push(u.stringify(s,t,i,n,r,{arrayItems:!0,...a}));return u.wrap(h.join(", "),!l&&o.array)},u.constants={true:!0,false:!1,null:null,second:1e3,minute:6e4,hour:36e5,day:864e5},u.functions={if:(e,t,i)=>e?t:i,length:e=>"string"==typeof e?e.length:e&&"object"==typeof e?Array.isArray(e)?e.length:Object.keys(e).length:null,msg(e){const[t,i,n,r,a]=this,s=a.messages;if(!s)return"";const o=l.template(t,s[0],e,i,n)||l.template(t,s[1],e,i,n);return o?o.render(t,i,n,r,a):""},number:e=>"number"==typeof e?e:"string"==typeof e?parseFloat(e):"boolean"==typeof e?e?1:0:e instanceof Date?e.getTime():null}},4946:(e,t,i)=>{"use strict";const n=i(375),r=i(1687),a=i(8068),s=i(8160),o=i(3292),l=i(6354),c=i(6133),u={};e.exports=a.extend({type:"alternatives",flags:{match:{default:"any"}},terms:{matches:{init:[],register:c.toSibling}},args(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return 1===i.length&&Array.isArray(i[0])?e.try(...i[0]):e.try(...i)},validate(e,t){const{schema:i,error:n,state:a,prefs:s}=t;if(i._flags.match){const t=[],o=[];for(let n=0;n<i.$_terms.matches.length;++n){const r=i.$_terms.matches[n],l=a.nest(r.schema,`match.${n}`);l.snapshot();const c=r.schema.$_validate(e,l,s);c.errors?(o.push(c.errors),l.restore()):(t.push(c.value),l.commit())}if(0===t.length)return{errors:n("alternatives.any",{details:o.map((e=>l.details(e,{override:!1})))})};if("one"===i._flags.match)return 1===t.length?{value:t[0]}:{errors:n("alternatives.one")};if(t.length!==i.$_terms.matches.length)return{errors:n("alternatives.all",{details:o.map((e=>l.details(e,{override:!1})))})};const c=e=>e.$_terms.matches.some((e=>"object"===e.schema.type||"alternatives"===e.schema.type&&c(e.schema)));return c(i)?{value:t.reduce(((e,t)=>r(e,t,{mergeArrays:!1})))}:{value:t[t.length-1]}}const o=[];for(let t=0;t<i.$_terms.matches.length;++t){const n=i.$_terms.matches[t];if(n.schema){const i=a.nest(n.schema,`match.${t}`);i.snapshot();const r=n.schema.$_validate(e,i,s);if(!r.errors)return i.commit(),r;i.restore(),o.push({schema:n.schema,reports:r.errors});continue}const r=n.ref?n.ref.resolve(e,a,s):e,l=n.is?[n]:n.switch;for(let i=0;i<l.length;++i){const o=l[i],{is:c,then:u,otherwise:h}=o,d=`match.${t}${n.switch?"."+i:""}`;if(c.$_match(r,a.nest(c,`${d}.is`),s)){if(u)return u.$_validate(e,a.nest(u,`${d}.then`),s)}else if(h)return h.$_validate(e,a.nest(h,`${d}.otherwise`),s)}}return u.errors(o,t)},rules:{conditional:{method(e,t){n(!this._flags._endedSwitch,"Unreachable condition"),n(!this._flags.match,"Cannot combine match mode",this._flags.match,"with conditional rule"),n(void 0===t.break,"Cannot use break option with alternatives conditional");const i=this.clone(),r=o.when(i,e,t),a=r.is?[r]:r.switch;for(const e of a)if(e.then&&e.otherwise){i.$_setFlag("_endedSwitch",!0,{clone:!1});break}return i.$_terms.matches.push(r),i.$_mutateRebuild()}},match:{method(e){if(n(["any","one","all"].includes(e),"Invalid alternatives match mode",e),"any"!==e)for(const t of this.$_terms.matches)n(t.schema,"Cannot combine match mode",e,"with conditional rules");return this.$_setFlag("match",e)}},try:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n(t.length,"Missing alternative schemas"),s.verifyFlat(t,"try"),n(!this._flags._endedSwitch,"Unreachable condition");const r=this.clone();for(const e of t)r.$_terms.matches.push({schema:r.$_compile(e)});return r.$_mutateRebuild()}}},overrides:{label(e){return this.$_parent("label",e).$_modify({each:(t,i)=>"is"!==i.path[0]?t.label(e):void 0,ref:!1})}},rebuild(e){e.$_modify({each:t=>{s.isSchema(t)&&"array"===t.type&&e.$_setFlag("_arrayItems",!0,{clone:!1})}})},manifest:{build(e,t){if(t.matches)for(const i of t.matches){const{schema:t,ref:n,is:r,not:a,then:s,otherwise:o}=i;e=t?e.try(t):n?e.conditional(n,{is:r,then:s,not:a,otherwise:o,switch:i.switch}):e.conditional(r,{then:s,otherwise:o})}return e}},messages:{"alternatives.all":"{{#label}} does not match all of the required types","alternatives.any":"{{#label}} does not match any of the allowed types","alternatives.match":"{{#label}} does not match any of the allowed types","alternatives.one":"{{#label}} matches more than one allowed type","alternatives.types":"{{#label}} must be one of {{#types}}"}}),u.errors=function(e,t){let{error:i,state:n}=t;if(!e.length)return{errors:i("alternatives.any")};if(1===e.length)return{errors:e[0].reports};const r=new Set,a=[];for(const{reports:t,schema:s}of e){if(t.length>1)return u.unmatched(e,i);const o=t[0];if(o instanceof l.Report==0)return u.unmatched(e,i);if(o.state.path.length!==n.path.length){a.push({type:s.type,report:o});continue}if("any.only"===o.code){for(const e of o.local.valids)r.add(e);continue}const[c,h]=o.code.split(".");"base"===h?r.add(c):a.push({type:s.type,report:o})}return a.length?1===a.length?{errors:a[0].report}:u.unmatched(e,i):{errors:i("alternatives.types",{types:[...r]})}},u.unmatched=function(e,t){const i=[];for(const t of e)i.push(...t.reports);return{errors:t("alternatives.match",l.details(i,{override:!1}))}}},8068:(e,t,i)=>{"use strict";const n=i(375),r=i(7629),a=i(8160),s=i(6914);e.exports=r.extend({type:"any",flags:{only:{default:!1}},terms:{alterations:{init:null},examples:{init:null},externals:{init:null},metas:{init:[]},notes:{init:[]},shared:{init:null},tags:{init:[]},whens:{init:null}},rules:{custom:{method(e,t){return n("function"==typeof e,"Method must be a function"),n(void 0===t||t&&"string"==typeof t,"Description must be a non-empty string"),this.$_addRule({name:"custom",args:{method:e,description:t}})},validate(e,t,i){let{method:n}=i;try{return n(e,t)}catch(e){return t.error("any.custom",{error:e})}},args:["method","description"],multi:!0},messages:{method(e){return this.prefs({messages:e})}},shared:{method(e){n(a.isSchema(e)&&e._flags.id,"Schema must be a schema with an id");const t=this.clone();return t.$_terms.shared=t.$_terms.shared||[],t.$_terms.shared.push(e),t.$_mutateRegister(e),t}},warning:{method(e,t){return n(e&&"string"==typeof e,"Invalid warning code"),this.$_addRule({name:"warning",args:{code:e,local:t},warn:!0})},validate(e,t,i){let{code:n,local:r}=i;return t.error(n,r)},args:["code","local"],multi:!0}},modifiers:{keep(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.keep=t},message(e,t){e.message=s.compile(t)},warn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.warn=t}},manifest:{build(e,t){for(const i in t){const n=t[i];if(["examples","externals","metas","notes","tags"].includes(i))for(const t of n)e=e[i.slice(0,-1)](t);else if("alterations"!==i)if("whens"!==i){if("shared"===i)for(const t of n)e=e.shared(t)}else for(const t of n){const{ref:i,is:n,not:r,then:a,otherwise:s,concat:o}=t;e=o?e.concat(o):i?e.when(i,{is:n,not:r,then:a,otherwise:s,switch:t.switch,break:t.break}):e.when(n,{then:a,otherwise:s,break:t.break})}else{const t={};for(const{target:e,adjuster:i}of n)t[e]=i;e=e.alter(t)}}return e}},messages:{"any.custom":"{{#label}} failed custom validation because {{#error.message}}","any.default":"{{#label}} threw an error when running default method","any.failover":"{{#label}} threw an error when running failover method","any.invalid":"{{#label}} contains an invalid value","any.only":'{{#label}} must be {if(#valids.length == 1, "", "one of ")}{{#valids}}',"any.ref":"{{#label}} {{#arg}} references {{:#ref}} which {{#reason}}","any.required":"{{#label}} is required","any.unknown":"{{#label}} is not allowed"}})},546:(e,t,i)=>{"use strict";const n=i(375),r=i(9474),a=i(9621),s=i(8068),o=i(8160),l=i(3292),c={};e.exports=s.extend({type:"array",flags:{single:{default:!1},sparse:{default:!1}},terms:{items:{init:[],manifest:"schema"},ordered:{init:[],manifest:"schema"},_exclusions:{init:[]},_inclusions:{init:[]},_requireds:{init:[]}},coerce:{from:"object",method(e,t){let{schema:i,state:n,prefs:r}=t;if(!Array.isArray(e))return;const a=i.$_getRule("sort");return a?c.sort(i,e,a.args.options,n,r):void 0}},validate(e,t){let{schema:i,error:n}=t;if(!Array.isArray(e)){if(i._flags.single){const t=[e];return t[o.symbols.arraySingle]=!0,{value:t}}return{errors:n("array.base")}}if(i.$_getRule("items")||i.$_terms.externals)return{value:e.slice()}},rules:{has:{method(e){e=this.$_compile(e,{appendPath:!0});const t=this.$_addRule({name:"has",args:{schema:e}});return t.$_mutateRegister(e),t},validate(e,t,i){let{state:n,prefs:r,error:a}=t,{schema:s}=i;const o=[e,...n.ancestors];for(let t=0;t<e.length;++t){const i=n.localize([...n.path,t],o,s);if(s.$_match(e[t],i,r))return e}const l=s._flags.label;return l?a("array.hasKnown",{patternLabel:l}):a("array.hasUnknown",null)},multi:!0},items:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.verifyFlat(t,"items");const n=this.$_addRule("items");for(let e=0;e<t.length;++e){const i=o.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});n.$_terms.items.push(i)}return n.$_mutateRebuild()},validate(e,t){let{schema:i,error:n,state:r,prefs:a,errorsArray:s}=t;const l=i.$_terms._requireds.slice(),u=i.$_terms.ordered.slice(),h=[...i.$_terms._inclusions,...l],d=!e[o.symbols.arraySingle];delete e[o.symbols.arraySingle];const f=s();let p=e.length;for(let t=0;t<p;++t){const s=e[t];let o=!1,m=!1;const g=d?t:new Number(t),v=[...r.path,g];if(!i._flags.sparse&&void 0===s){if(f.push(n("array.sparse",{key:g,path:v,pos:t,value:void 0},r.localize(v))),a.abortEarly)return f;u.shift();continue}const b=[e,...r.ancestors];for(const e of i.$_terms._exclusions)if(e.$_match(s,r.localize(v,b,e),a,{presence:"ignore"})){if(f.push(n("array.excludes",{pos:t,value:s},r.localize(v))),a.abortEarly)return f;o=!0,u.shift();break}if(o)continue;if(i.$_terms.ordered.length){if(u.length){const o=u.shift(),l=o.$_validate(s,r.localize(v,b,o),a);if(l.errors){if(f.push(...l.errors),a.abortEarly)return f}else if("strip"===o._flags.result)c.fastSplice(e,t),--t,--p;else{if(!i._flags.sparse&&void 0===l.value){if(f.push(n("array.sparse",{key:g,path:v,pos:t,value:void 0},r.localize(v))),a.abortEarly)return f;continue}e[t]=l.value}continue}if(!i.$_terms.items.length){if(f.push(n("array.orderedLength",{pos:t,limit:i.$_terms.ordered.length})),a.abortEarly)return f;break}}const _=[];let y=l.length;for(let o=0;o<y;++o){const u=r.localize(v,b,l[o]);u.snapshot();const h=l[o].$_validate(s,u,a);if(_[o]=h,!h.errors){if(u.commit(),e[t]=h.value,m=!0,c.fastSplice(l,o),--o,--y,!i._flags.sparse&&void 0===h.value&&(f.push(n("array.sparse",{key:g,path:v,pos:t,value:void 0},r.localize(v))),a.abortEarly))return f;break}u.restore()}if(m)continue;const A=a.stripUnknown&&!!a.stripUnknown.arrays||!1;y=h.length;for(const u of h){let h;const d=l.indexOf(u);if(-1!==d)h=_[d];else{const l=r.localize(v,b,u);if(l.snapshot(),h=u.$_validate(s,l,a),!h.errors){l.commit(),"strip"===u._flags.result?(c.fastSplice(e,t),--t,--p):i._flags.sparse||void 0!==h.value?e[t]=h.value:(f.push(n("array.sparse",{key:g,path:v,pos:t,value:void 0},r.localize(v))),o=!0),m=!0;break}l.restore()}if(1===y){if(A){c.fastSplice(e,t),--t,--p,m=!0;break}if(f.push(...h.errors),a.abortEarly)return f;o=!0;break}}if(!o&&(i.$_terms._inclusions.length||i.$_terms._requireds.length)&&!m){if(A){c.fastSplice(e,t),--t,--p;continue}if(f.push(n("array.includes",{pos:t,value:s},r.localize(v))),a.abortEarly)return f}}return l.length&&c.fillMissedErrors(i,f,l,e,r,a),u.length&&(c.fillOrderedErrors(i,f,u,e,r,a),f.length||c.fillDefault(u,e,r,a)),f.length?f:e},priority:!0,manifest:!1},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,n){let{limit:r}=i,{name:a,operator:s,args:l}=n;return o.compare(e.length,r,s)?e:t.error("array."+a,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:o.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},ordered:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];o.verifyFlat(t,"ordered");const n=this.$_addRule("items");for(let e=0;e<t.length;++e){const i=o.tryWithPath((()=>this.$_compile(t[e])),e,{append:!0});c.validateSingle(i,n),n.$_mutateRegister(i),n.$_terms.ordered.push(i)}return n.$_mutateRebuild()}},single:{method(e){const t=void 0===e||!!e;return n(!t||!this._flags._arrayItems,"Cannot specify single rule when array has array items"),this.$_setFlag("single",t)}},sort:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.assertOptions(e,["by","order"]);const t={order:e.order||"ascending"};return e.by&&(t.by=l.ref(e.by,{ancestor:0}),n(!t.by.ancestor,"Cannot sort by ancestor")),this.$_addRule({name:"sort",args:{options:t}})},validate(e,t,i){let{error:n,state:r,prefs:a,schema:s}=t,{options:o}=i;const{value:l,errors:u}=c.sort(s,e,o,r,a);if(u)return u;for(let t=0;t<e.length;++t)if(e[t]!==l[t])return n("array.sort",{order:o.order,by:o.by?o.by.key:"value"});return e},convert:!0},sparse:{method(e){const t=void 0===e||!!e;return this._flags.sparse===t?this:(t?this.clone():this.$_addRule("items")).$_setFlag("sparse",t,{clone:!1})}},unique:{method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(!e||"function"==typeof e||"string"==typeof e,"comparator must be a function or a string"),o.assertOptions(t,["ignoreUndefined","separator"]);const i={name:"unique",args:{options:t,comparator:e}};if(e)if("string"==typeof e){const n=o.default(t.separator,".");i.path=n?e.split(n):[e]}else i.comparator=e;return this.$_addRule(i)},validate(e,t,i,s){let{state:o,error:l,schema:c}=t,{comparator:u,options:h}=i,{comparator:d,path:f}=s;const p={string:Object.create(null),number:Object.create(null),undefined:Object.create(null),boolean:Object.create(null),object:new Map,function:new Map,custom:new Map},m=d||r,g=h.ignoreUndefined;for(let t=0;t<e.length;++t){const i=f?a(e[t],f):e[t],r=d?p.custom:p[typeof i];if(n(r,"Failed to find unique map container for type",typeof i),r instanceof Map){const n=r.entries();let a;for(;!(a=n.next()).done;)if(m(a.value[0],i)){const i=o.localize([...o.path,t],[e,...o.ancestors]),n={pos:t,value:e[t],dupePos:a.value[1],dupeValue:e[a.value[1]]};return f&&(n.path=u),l("array.unique",n,i)}r.set(i,t)}else{if((!g||void 0!==i)&&void 0!==r[i]){const n={pos:t,value:e[t],dupePos:r[i],dupeValue:e[r[i]]};return f&&(n.path=u),l("array.unique",n,o.localize([...o.path,t],[e,...o.ancestors]))}r[i]=t}}return e},args:["comparator","options"],multi:!0}},cast:{set:{from:Array.isArray,to:(e,t)=>new Set(e)}},rebuild(e){e.$_terms._inclusions=[],e.$_terms._exclusions=[],e.$_terms._requireds=[];for(const t of e.$_terms.items)c.validateSingle(t,e),"required"===t._flags.presence?e.$_terms._requireds.push(t):"forbidden"===t._flags.presence?e.$_terms._exclusions.push(t):e.$_terms._inclusions.push(t);for(const t of e.$_terms.ordered)c.validateSingle(t,e)},manifest:{build:(e,t)=>(t.items&&(e=e.items(...t.items)),t.ordered&&(e=e.ordered(...t.ordered)),e)},messages:{"array.base":"{{#label}} must be an array","array.excludes":"{{#label}} contains an excluded value","array.hasKnown":"{{#label}} does not contain at least one required match for type {:#patternLabel}","array.hasUnknown":"{{#label}} does not contain at least one required match","array.includes":"{{#label}} does not match any of the allowed types","array.includesRequiredBoth":"{{#label}} does not contain {{#knownMisses}} and {{#unknownMisses}} other required value(s)","array.includesRequiredKnowns":"{{#label}} does not contain {{#knownMisses}}","array.includesRequiredUnknowns":"{{#label}} does not contain {{#unknownMisses}} required value(s)","array.length":"{{#label}} must contain {{#limit}} items","array.max":"{{#label}} must contain less than or equal to {{#limit}} items","array.min":"{{#label}} must contain at least {{#limit}} items","array.orderedLength":"{{#label}} must contain at most {{#limit}} items","array.sort":"{{#label}} must be sorted in {#order} order by {{#by}}","array.sort.mismatching":"{{#label}} cannot be sorted due to mismatching types","array.sort.unsupported":"{{#label}} cannot be sorted due to unsupported type {#type}","array.sparse":"{{#label}} must not be a sparse array item","array.unique":"{{#label}} contains a duplicate value"}}),c.fillMissedErrors=function(e,t,i,n,r,a){const s=[];let o=0;for(const e of i){const t=e._flags.label;t?s.push(t):++o}s.length?o?t.push(e.$_createError("array.includesRequiredBoth",n,{knownMisses:s,unknownMisses:o},r,a)):t.push(e.$_createError("array.includesRequiredKnowns",n,{knownMisses:s},r,a)):t.push(e.$_createError("array.includesRequiredUnknowns",n,{unknownMisses:o},r,a))},c.fillOrderedErrors=function(e,t,i,n,r,a){const s=[];for(const e of i)"required"===e._flags.presence&&s.push(e);s.length&&c.fillMissedErrors(e,t,s,n,r,a)},c.fillDefault=function(e,t,i,n){const r=[];let a=!0;for(let s=e.length-1;s>=0;--s){const o=e[s],l=[t,...i.ancestors],c=o.$_validate(void 0,i.localize(i.path,l,o),n).value;if(a){if(void 0===c)continue;a=!1}r.unshift(c)}r.length&&t.push(...r)},c.fastSplice=function(e,t){let i=t;for(;i<e.length;)e[i++]=e[i];--e.length},c.validateSingle=function(e,t){("array"===e.type||e._flags._arrayItems)&&(n(!t._flags.single,"Cannot specify array item with single rule enabled"),t.$_setFlag("_arrayItems",!0,{clone:!1}))},c.sort=function(e,t,i,n,r){const a="ascending"===i.order?1:-1,s=-1*a,o=a,l=(l,u)=>{let h=c.compare(l,u,s,o);if(null!==h)return h;if(i.by&&(l=i.by.resolve(l,n,r),u=i.by.resolve(u,n,r)),h=c.compare(l,u,s,o),null!==h)return h;const d=typeof l;if(d!==typeof u)throw e.$_createError("array.sort.mismatching",t,null,n,r);if("number"!==d&&"string"!==d)throw e.$_createError("array.sort.unsupported",t,{type:d},n,r);return"number"===d?(l-u)*a:l<u?s:o};try{return{value:t.slice().sort(l)}}catch(e){return{errors:e}}},c.compare=function(e,t,i,n){return e===t?0:void 0===e?1:void 0===t?-1:null===e?n:null===t?i:null}},4937:(e,t,i)=>{"use strict";const n=i(375),r=i(8068),a=i(8160),s=i(2036),o={isBool:function(e){return"boolean"==typeof e}};e.exports=r.extend({type:"boolean",flags:{sensitive:{default:!1}},terms:{falsy:{init:null,manifest:"values"},truthy:{init:null,manifest:"values"}},coerce(e,t){let{schema:i}=t;if("boolean"!=typeof e){if("string"==typeof e){const t=i._flags.sensitive?e:e.toLowerCase();e="true"===t||"false"!==t&&e}return"boolean"!=typeof e&&(e=i.$_terms.truthy&&i.$_terms.truthy.has(e,null,null,!i._flags.sensitive)||(!i.$_terms.falsy||!i.$_terms.falsy.has(e,null,null,!i._flags.sensitive))&&e),{value:e}}},validate(e,t){let{error:i}=t;if("boolean"!=typeof e)return{value:e,errors:i("boolean.base")}},rules:{truthy:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.verifyFlat(t,"truthy");const r=this.clone();r.$_terms.truthy=r.$_terms.truthy||new s;for(let e=0;e<t.length;++e){const i=t[e];n(void 0!==i,"Cannot call truthy with undefined"),r.$_terms.truthy.add(i)}return r}},falsy:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.verifyFlat(t,"falsy");const r=this.clone();r.$_terms.falsy=r.$_terms.falsy||new s;for(let e=0;e<t.length;++e){const i=t[e];n(void 0!==i,"Cannot call falsy with undefined"),r.$_terms.falsy.add(i)}return r}},sensitive:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("sensitive",e)}}},cast:{number:{from:o.isBool,to:(e,t)=>e?1:0},string:{from:o.isBool,to:(e,t)=>e?"true":"false"}},manifest:{build:(e,t)=>(t.truthy&&(e=e.truthy(...t.truthy)),t.falsy&&(e=e.falsy(...t.falsy)),e)},messages:{"boolean.base":"{{#label}} must be a boolean"}})},7500:(e,t,i)=>{"use strict";const n=i(375),r=i(8068),a=i(8160),s=i(3328),o={isDate:function(e){return e instanceof Date}};e.exports=r.extend({type:"date",coerce:{from:["number","string"],method(e,t){let{schema:i}=t;return{value:o.parse(e,i._flags.format)||e}}},validate(e,t){let{schema:i,error:n,prefs:r}=t;if(e instanceof Date&&!isNaN(e.getTime()))return;const a=i._flags.format;return r.convert&&a&&"string"==typeof e?{value:e,errors:n("date.format",{format:a})}:{value:e,errors:n("date.base")}},rules:{compare:{method:!1,validate(e,t,i,n){let{date:r}=i,{name:s,operator:o,args:l}=n;const c="now"===r?Date.now():r.getTime();return a.compare(e.getTime(),c,o)?e:t.error("date."+s,{limit:l.date,value:e})},args:[{name:"date",ref:!0,normalize:e=>"now"===e?e:o.parse(e),assert:e=>null!==e,message:"must have a valid date format"}]},format:{method(e){return n(["iso","javascript","unix"].includes(e),"Unknown date format",e),this.$_setFlag("format",e)}},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{date:e},operator:">"})}},iso:{method(){return this.format("iso")}},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{date:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{date:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{date:e},operator:">="})}},timestamp:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"javascript";return n(["javascript","unix"].includes(e),'"type" must be one of "javascript, unix"'),this.format(e)}}},cast:{number:{from:o.isDate,to:(e,t)=>e.getTime()},string:{from:o.isDate,to(e,t){let{prefs:i}=t;return s.date(e,i)}}},messages:{"date.base":"{{#label}} must be a valid date","date.format":'{{#label}} must be in {msg("date.format." + #format) || #format} format',"date.greater":"{{#label}} must be greater than {{:#limit}}","date.less":"{{#label}} must be less than {{:#limit}}","date.max":"{{#label}} must be less than or equal to {{:#limit}}","date.min":"{{#label}} must be greater than or equal to {{:#limit}}","date.format.iso":"ISO 8601 date","date.format.javascript":"timestamp or number of milliseconds","date.format.unix":"timestamp or number of seconds"}}),o.parse=function(e,t){if(e instanceof Date)return e;if("string"!=typeof e&&(isNaN(e)||!isFinite(e)))return null;if(/^\s*$/.test(e))return null;if("iso"===t)return a.isIsoDate(e)?o.date(e.toString()):null;const i=e;if("string"==typeof e&&/^[+-]?\d+(\.\d+)?$/.test(e)&&(e=parseFloat(e)),t){if("javascript"===t)return o.date(1*e);if("unix"===t)return o.date(1e3*e);if("string"==typeof i)return null}return o.date(e)},o.date=function(e){const t=new Date(e);return isNaN(t.getTime())?null:t}},390:(e,t,i)=>{"use strict";const n=i(375),r=i(7824);e.exports=r.extend({type:"function",properties:{typeof:"function"},rules:{arity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"arity",args:{n:e}})},validate(e,t,i){let{n}=i;return e.length===n?e:t.error("function.arity",{n})}},class:{method(){return this.$_addRule("class")},validate:(e,t)=>/^\s*class\s/.test(e.toString())?e:t.error("function.class",{value:e})},minArity:{method(e){return n(Number.isSafeInteger(e)&&e>0,"n must be a strict positive integer"),this.$_addRule({name:"minArity",args:{n:e}})},validate(e,t,i){let{n}=i;return e.length>=n?e:t.error("function.minArity",{n})}},maxArity:{method(e){return n(Number.isSafeInteger(e)&&e>=0,"n must be a positive integer"),this.$_addRule({name:"maxArity",args:{n:e}})},validate(e,t,i){let{n}=i;return e.length<=n?e:t.error("function.maxArity",{n})}}},messages:{"function.arity":"{{#label}} must have an arity of {{#n}}","function.class":"{{#label}} must be a class","function.maxArity":"{{#label}} must have an arity lesser or equal to {{#n}}","function.minArity":"{{#label}} must have an arity greater or equal to {{#n}}"}})},7824:(e,t,i)=>{"use strict";const n=i(978),r=i(375),a=i(8571),s=i(3652),o=i(8068),l=i(8160),c=i(3292),u=i(6354),h=i(6133),d=i(3328),f={renameDefaults:{alias:!1,multiple:!1,override:!1}};e.exports=o.extend({type:"_keys",properties:{typeof:"object"},flags:{unknown:{default:!1}},terms:{dependencies:{init:null},keys:{init:null,manifest:{mapped:{from:"schema",to:"key"}}},patterns:{init:null},renames:{init:null}},args:(e,t)=>e.keys(t),validate(e,t){let{schema:i,error:n,state:r,prefs:a}=t;if(!e||typeof e!==i.$_property("typeof")||Array.isArray(e))return{value:e,errors:n("object.base",{type:i.$_property("typeof")})};if(!(i.$_terms.renames||i.$_terms.dependencies||i.$_terms.keys||i.$_terms.patterns||i.$_terms.externals))return;e=f.clone(e,a);const s=[];if(i.$_terms.renames&&!f.rename(i,e,r,a,s))return{value:e,errors:s};if(!i.$_terms.keys&&!i.$_terms.patterns&&!i.$_terms.dependencies)return{value:e,errors:s};const o=new Set(Object.keys(e));if(i.$_terms.keys){const t=[e,...r.ancestors];for(const n of i.$_terms.keys){const i=n.key,l=e[i];o.delete(i);const c=r.localize([...r.path,i],t,n),u=n.schema.$_validate(l,c,a);if(u.errors){if(a.abortEarly)return{value:e,errors:u.errors};void 0!==u.value&&(e[i]=u.value),s.push(...u.errors)}else"strip"===n.schema._flags.result||void 0===u.value&&void 0!==l?delete e[i]:void 0!==u.value&&(e[i]=u.value)}}if(o.size||i._flags._hasPatternMatch){const t=f.unknown(i,e,o,s,r,a);if(t)return t}if(i.$_terms.dependencies)for(const t of i.$_terms.dependencies){if(null!==t.key&&!1===f.isPresent(t.options)(t.key.resolve(e,r,a,null,{shadow:!1})))continue;const n=f.dependencies[t.rel](i,t,e,r,a);if(n){const t=i.$_createError(n.code,e,n.context,r,a);if(a.abortEarly)return{value:e,errors:t};s.push(t)}}return{value:e,errors:s}},rules:{and:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"and"),f.dependency(this,"and",null,t)}},append:{method(e){return null==e||0===Object.keys(e).length?this:this.keys(e)}},assert:{method(e,t,i){d.isTemplate(e)||(e=c.ref(e)),r(void 0===i||"string"==typeof i,"Message must be a string"),t=this.$_compile(t,{appendPath:!0});const n=this.$_addRule({name:"assert",args:{subject:e,schema:t,message:i}});return n.$_mutateRegister(e),n.$_mutateRegister(t),n},validate(e,t,i){let{error:n,prefs:r,state:a}=t,{subject:s,schema:o,message:l}=i;const c=s.resolve(e,a,r),u=h.isRef(s)?s.absolute(a):[];return o.$_match(c,a.localize(u,[e,...a.ancestors],o),r)?e:n("object.assert",{subject:s,message:l})},args:["subject","schema","message"],multi:!0},instance:{method(e,t){return r("function"==typeof e,"constructor must be a function"),t=t||e.name,this.$_addRule({name:"instance",args:{constructor:e,name:t}})},validate(e,t,i){let{constructor:n,name:r}=i;return e instanceof n?e:t.error("object.instance",{type:r,value:e})},args:["constructor","name"]},keys:{method(e){r(void 0===e||"object"==typeof e,"Object schema must be a valid object"),r(!l.isSchema(e),"Object schema cannot be a joi schema");const t=this.clone();if(e)if(Object.keys(e).length){t.$_terms.keys=t.$_terms.keys?t.$_terms.keys.filter((t=>!e.hasOwnProperty(t.key))):new f.Keys;for(const i in e)l.tryWithPath((()=>t.$_terms.keys.push({key:i,schema:this.$_compile(e[i])})),i)}else t.$_terms.keys=new f.Keys;else t.$_terms.keys=null;return t.$_mutateRebuild()}},length:{method(e){return this.$_addRule({name:"length",args:{limit:e},operator:"="})},validate(e,t,i,n){let{limit:r}=i,{name:a,operator:s,args:o}=n;return l.compare(Object.keys(e).length,r,s)?e:t.error("object."+a,{limit:o.limit,value:e})},args:[{name:"limit",ref:!0,assert:l.limit,message:"must be a positive integer"}]},max:{method(e){return this.$_addRule({name:"max",method:"length",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"length",args:{limit:e},operator:">="})}},nand:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"nand"),f.dependency(this,"nand",null,t)}},or:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"or"),f.dependency(this,"or",null,t)}},oxor:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return f.dependency(this,"oxor",null,t)}},pattern:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n=e instanceof RegExp;n||(e=this.$_compile(e,{appendPath:!0})),r(void 0!==t,"Invalid rule"),l.assertOptions(i,["fallthrough","matches"]),n&&r(!e.flags.includes("g")&&!e.flags.includes("y"),"pattern should not use global or sticky mode"),t=this.$_compile(t,{appendPath:!0});const a=this.clone();a.$_terms.patterns=a.$_terms.patterns||[];const s={[n?"regex":"schema"]:e,rule:t};return i.matches&&(s.matches=this.$_compile(i.matches),"array"!==s.matches.type&&(s.matches=s.matches.$_root.array().items(s.matches)),a.$_mutateRegister(s.matches),a.$_setFlag("_hasPatternMatch",!0,{clone:!1})),i.fallthrough&&(s.fallthrough=!0),a.$_terms.patterns.push(s),a.$_mutateRegister(t),a}},ref:{method(){return this.$_addRule("ref")},validate:(e,t)=>h.isRef(e)?e:t.error("object.refType",{value:e})},regex:{method(){return this.$_addRule("regex")},validate:(e,t)=>e instanceof RegExp?e:t.error("object.regex",{value:e})},rename:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r("string"==typeof e||e instanceof RegExp,"Rename missing the from argument"),r("string"==typeof t||t instanceof d,"Invalid rename to argument"),r(t!==e,"Cannot rename key to same name:",e),l.assertOptions(i,["alias","ignoreUndefined","override","multiple"]);const a=this.clone();a.$_terms.renames=a.$_terms.renames||[];for(const t of a.$_terms.renames)r(t.from!==e,"Cannot rename the same key multiple times");return t instanceof d&&a.$_mutateRegister(t),a.$_terms.renames.push({from:e,to:t,options:n(f.renameDefaults,i)}),a}},schema:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return this.$_addRule({name:"schema",args:{type:e}})},validate(e,t,i){let{type:n}=i;return!l.isSchema(e)||"any"!==n&&e.type!==n?t.error("object.schema",{type:n}):e}},unknown:{method(e){return this.$_setFlag("unknown",!1!==e)}},with:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"with",e,t,i)}},without:{method(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return f.dependency(this,"without",e,t,i)}},xor:{method(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return l.verifyFlat(t,"xor"),f.dependency(this,"xor",null,t)}}},overrides:{default(e,t){return void 0===e&&(e=l.symbols.deepDefault),this.$_parent("default",e,t)}},rebuild(e){if(e.$_terms.keys){const t=new s.Sorter;for(const i of e.$_terms.keys)l.tryWithPath((()=>t.add(i,{after:i.schema.$_rootReferences(),group:i.key})),i.key);e.$_terms.keys=new f.Keys(...t.nodes)}},manifest:{build(e,t){if(t.keys&&(e=e.keys(t.keys)),t.dependencies)for(const{rel:i,key:n=null,peers:r,options:a}of t.dependencies)e=f.dependency(e,i,n,r,a);if(t.patterns)for(const{regex:i,schema:n,rule:r,fallthrough:a,matches:s}of t.patterns)e=e.pattern(i||n,r,{fallthrough:a,matches:s});if(t.renames)for(const{from:i,to:n,options:r}of t.renames)e=e.rename(i,n,r);return e}},messages:{"object.and":"{{#label}} contains {{#presentWithLabels}} without its required peers {{#missingWithLabels}}","object.assert":'{{#label}} is invalid because {if(#subject.key, `"` + #subject.key + `" failed to ` + (#message || "pass the assertion test"), #message || "the assertion failed")}',"object.base":"{{#label}} must be of type {{#type}}","object.instance":"{{#label}} must be an instance of {{:#type}}","object.length":'{{#label}} must have {{#limit}} key{if(#limit == 1, "", "s")}',"object.max":'{{#label}} must have less than or equal to {{#limit}} key{if(#limit == 1, "", "s")}',"object.min":'{{#label}} must have at least {{#limit}} key{if(#limit == 1, "", "s")}',"object.missing":"{{#label}} must contain at least one of {{#peersWithLabels}}","object.nand":"{{:#mainWithLabel}} must not exist simultaneously with {{#peersWithLabels}}","object.oxor":"{{#label}} contains a conflict between optional exclusive peers {{#peersWithLabels}}","object.pattern.match":"{{#label}} keys failed to match pattern requirements","object.refType":"{{#label}} must be a Joi reference","object.regex":"{{#label}} must be a RegExp object","object.rename.multiple":"{{#label}} cannot rename {{:#from}} because multiple renames are disabled and another key was already renamed to {{:#to}}","object.rename.override":"{{#label}} cannot rename {{:#from}} because override is disabled and target {{:#to}} exists","object.schema":"{{#label}} must be a Joi schema of {{#type}} type","object.unknown":"{{#label}} is not allowed","object.with":"{{:#mainWithLabel}} missing required peer {{:#peerWithLabel}}","object.without":"{{:#mainWithLabel}} conflict with forbidden peer {{:#peerWithLabel}}","object.xor":"{{#label}} contains a conflict between exclusive peers {{#peersWithLabels}}"}}),f.clone=function(e,t){if("object"==typeof e){if(t.nonEnumerables)return a(e,{shallow:!0});const i=Object.create(Object.getPrototypeOf(e));return Object.assign(i,e),i}const i=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.apply(this,i)};return i.prototype=a(e.prototype),Object.defineProperty(i,"name",{value:e.name,writable:!1}),Object.defineProperty(i,"length",{value:e.length,writable:!1}),Object.assign(i,e),i},f.dependency=function(e,t,i,n,a){r(null===i||"string"==typeof i,t,"key must be a strings"),a||(a=n.length>1&&"object"==typeof n[n.length-1]?n.pop():{}),l.assertOptions(a,["separator","isPresent"]),n=[].concat(n);const s=l.default(a.separator,"."),o=[];for(const e of n)r("string"==typeof e,t,"peers must be strings"),o.push(c.ref(e,{separator:s,ancestor:0,prefix:!1}));null!==i&&(i=c.ref(i,{separator:s,ancestor:0,prefix:!1}));const u=e.clone();return u.$_terms.dependencies=u.$_terms.dependencies||[],u.$_terms.dependencies.push(new f.Dependency(t,i,o,n,a)),u},f.dependencies={and(e,t,i,n,r){const a=[],s=[],o=t.peers.length,l=f.isPresent(t.options);for(const e of t.peers)!1===l(e.resolve(i,n,r,null,{shadow:!1}))?a.push(e.key):s.push(e.key);if(a.length!==o&&s.length!==o)return{code:"object.and",context:{present:s,presentWithLabels:f.keysToLabels(e,s),missing:a,missingWithLabels:f.keysToLabels(e,a)}}},nand(e,t,i,n,r){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,n,r,null,{shadow:!1}))&&a.push(e.key);if(a.length!==t.peers.length)return;const o=t.paths[0],l=t.paths.slice(1);return{code:"object.nand",context:{main:o,mainWithLabel:f.keysToLabels(e,o),peers:l,peersWithLabels:f.keysToLabels(e,l)}}},or(e,t,i,n,r){const a=f.isPresent(t.options);for(const e of t.peers)if(a(e.resolve(i,n,r,null,{shadow:!1})))return;return{code:"object.missing",context:{peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)}}},oxor(e,t,i,n,r){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,n,r,null,{shadow:!1}))&&a.push(e.key);if(!a.length||1===a.length)return;const o={peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)};return o.present=a,o.presentWithLabels=f.keysToLabels(e,a),{code:"object.oxor",context:o}},with(e,t,i,n,r){const a=f.isPresent(t.options);for(const s of t.peers)if(!1===a(s.resolve(i,n,r,null,{shadow:!1})))return{code:"object.with",context:{main:t.key.key,mainWithLabel:f.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:f.keysToLabels(e,s.key)}}},without(e,t,i,n,r){const a=f.isPresent(t.options);for(const s of t.peers)if(a(s.resolve(i,n,r,null,{shadow:!1})))return{code:"object.without",context:{main:t.key.key,mainWithLabel:f.keysToLabels(e,t.key.key),peer:s.key,peerWithLabel:f.keysToLabels(e,s.key)}}},xor(e,t,i,n,r){const a=[],s=f.isPresent(t.options);for(const e of t.peers)s(e.resolve(i,n,r,null,{shadow:!1}))&&a.push(e.key);if(1===a.length)return;const o={peers:t.paths,peersWithLabels:f.keysToLabels(e,t.paths)};return 0===a.length?{code:"object.missing",context:o}:(o.present=a,o.presentWithLabels=f.keysToLabels(e,a),{code:"object.xor",context:o})}},f.keysToLabels=function(e,t){return Array.isArray(t)?t.map((t=>e.$_mapLabels(t))):e.$_mapLabels(t)},f.isPresent=function(e){return"function"==typeof e.isPresent?e.isPresent:e=>void 0!==e},f.rename=function(e,t,i,n,r){const a={};for(const s of e.$_terms.renames){const o=[],l="string"!=typeof s.from;if(l)for(const e in t){if(void 0===t[e]&&s.options.ignoreUndefined)continue;if(e===s.to)continue;const i=s.from.exec(e);i&&o.push({from:e,to:s.to,match:i})}else!Object.prototype.hasOwnProperty.call(t,s.from)||void 0===t[s.from]&&s.options.ignoreUndefined||o.push(s);for(const c of o){const o=c.from;let u=c.to;if(u instanceof d&&(u=u.render(t,i,n,c.match)),o!==u){if(!s.options.multiple&&a[u]&&(r.push(e.$_createError("object.rename.multiple",t,{from:o,to:u,pattern:l},i,n)),n.abortEarly))return!1;if(Object.prototype.hasOwnProperty.call(t,u)&&!s.options.override&&!a[u]&&(r.push(e.$_createError("object.rename.override",t,{from:o,to:u,pattern:l},i,n)),n.abortEarly))return!1;void 0===t[o]?delete t[u]:t[u]=t[o],a[u]=!0,s.options.alias||delete t[o]}}}return!0},f.unknown=function(e,t,i,n,r,a){if(e.$_terms.patterns){let s=!1;const o=e.$_terms.patterns.map((e=>{if(e.matches)return s=!0,[]})),l=[t,...r.ancestors];for(const s of i){const c=t[s],u=[...r.path,s];for(let h=0;h<e.$_terms.patterns.length;++h){const d=e.$_terms.patterns[h];if(d.regex){const e=d.regex.test(s);if(r.mainstay.tracer.debug(r,"rule",`pattern.${h}`,e?"pass":"error"),!e)continue}else if(!d.schema.$_match(s,r.nest(d.schema,`pattern.${h}`),a))continue;i.delete(s);const f=r.localize(u,l,{schema:d.rule,key:s}),p=d.rule.$_validate(c,f,a);if(p.errors){if(a.abortEarly)return{value:t,errors:p.errors};n.push(...p.errors)}if(d.matches&&o[h].push(s),t[s]=p.value,!d.fallthrough)break}}if(s)for(let i=0;i<o.length;++i){const s=o[i];if(!s)continue;const c=e.$_terms.patterns[i].matches,h=r.localize(r.path,l,c),d=c.$_validate(s,h,a);if(d.errors){const i=u.details(d.errors,{override:!1});i.matches=s;const o=e.$_createError("object.pattern.match",t,i,r,a);if(a.abortEarly)return{value:t,errors:o};n.push(o)}}}if(i.size&&(e.$_terms.keys||e.$_terms.patterns)){if(a.stripUnknown&&!e._flags.unknown||a.skipFunctions){const e=!(!a.stripUnknown||!0!==a.stripUnknown&&!a.stripUnknown.objects);for(const n of i)e?(delete t[n],i.delete(n)):"function"==typeof t[n]&&i.delete(n)}if(!l.default(e._flags.unknown,a.allowUnknown))for(const s of i){const i=r.localize([...r.path,s],[]),o=e.$_createError("object.unknown",t[s],{child:s},i,a,{flags:!1});if(a.abortEarly)return{value:t,errors:o};n.push(o)}}},f.Dependency=class{constructor(e,t,i,n,r){this.rel=e,this.key=t,this.peers=i,this.paths=n,this.options=r}describe(){const e={rel:this.rel,peers:this.paths};return null!==this.key&&(e.key=this.key.key),"."!==this.peers[0].separator&&(e.options={...e.options,separator:this.peers[0].separator}),this.options.isPresent&&(e.options={...e.options,isPresent:this.options.isPresent}),e}},f.Keys=class extends Array{concat(e){const t=this.slice(),i=new Map;for(let e=0;e<t.length;++e)i.set(t[e].key,e);for(const n of e){const e=n.key,r=i.get(e);void 0!==r?t[r]={key:e,schema:t[r].schema.concat(n.schema)}:t.push(n)}return t}}},8785:(e,t,i)=>{"use strict";const n=i(375),r=i(8068),a=i(8160),s=i(3292),o=i(6354),l={};e.exports=r.extend({type:"link",properties:{schemaChain:!0},terms:{link:{init:null,manifest:"single",register:!1}},args:(e,t)=>e.ref(t),validate(e,t){let{schema:i,state:r,prefs:a}=t;n(i.$_terms.link,"Uninitialized link schema");const s=l.generate(i,e,r,a),o=i.$_terms.link[0].ref;return s.$_validate(e,r.nest(s,`link:${o.display}:${s.type}`),a)},generate:(e,t,i,n)=>l.generate(e,t,i,n),rules:{ref:{method(e){n(!this.$_terms.link,"Cannot reinitialize schema"),e=s.ref(e),n("value"===e.type||"local"===e.type,"Invalid reference type:",e.type),n("local"===e.type||"root"===e.ancestor||e.ancestor>0,"Link cannot reference itself");const t=this.clone();return t.$_terms.link=[{ref:e}],t}},relative:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.$_setFlag("relative",e)}}},overrides:{concat(e){n(this.$_terms.link,"Uninitialized link schema"),n(a.isSchema(e),"Invalid schema object"),n("link"!==e.type,"Cannot merge type link with another link");const t=this.clone();return t.$_terms.whens||(t.$_terms.whens=[]),t.$_terms.whens.push({concat:e}),t.$_mutateRebuild()}},manifest:{build:(e,t)=>(n(t.link,"Invalid link description missing link"),e.ref(t.link))}}),l.generate=function(e,t,i,n){let r=i.mainstay.links.get(e);if(r)return r._generate(t,i,n).schema;const a=e.$_terms.link[0].ref,{perspective:s,path:o}=l.perspective(a,i);l.assert(s,"which is outside of schema boundaries",a,e,i,n);try{r=o.length?s.$_reach(o):s}catch(t){l.assert(!1,"to non-existing schema",a,e,i,n)}return l.assert("link"!==r.type,"which is another link",a,e,i,n),e._flags.relative||i.mainstay.links.set(e,r),r._generate(t,i,n).schema},l.perspective=function(e,t){if("local"===e.type){for(const{schema:i,key:n}of t.schemas){if((i._flags.id||n)===e.path[0])return{perspective:i,path:e.path.slice(1)};if(i.$_terms.shared)for(const t of i.$_terms.shared)if(t._flags.id===e.path[0])return{perspective:t,path:e.path.slice(1)}}return{perspective:null,path:null}}return"root"===e.ancestor?{perspective:t.schemas[t.schemas.length-1].schema,path:e.path}:{perspective:t.schemas[e.ancestor]&&t.schemas[e.ancestor].schema,path:e.path}},l.assert=function(e,t,i,r,a,s){e||n(!1,`"${o.label(r._flags,a,s)}" contains link reference "${i.display}" ${t}`)}},3832:(e,t,i)=>{"use strict";const n=i(375),r=i(8068),a=i(8160),s={numberRx:/^\s*[+-]?(?:(?:\d+(?:\.\d*)?)|(?:\.\d+))(?:e([+-]?\d+))?\s*$/i,precisionRx:/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,exponentialPartRegex:/[eE][+-]?\d+$/,leadingSignAndZerosRegex:/^[+-]?(0*)?/,dotRegex:/\./,trailingZerosRegex:/0+$/};e.exports=r.extend({type:"number",flags:{unsafe:{default:!1}},coerce:{from:"string",method(e,t){let{schema:i,error:n}=t;if(!e.match(s.numberRx))return;e=e.trim();const r={value:parseFloat(e)};if(0===r.value&&(r.value=0),!i._flags.unsafe)if(e.match(/e/i)){if(s.extractSignificantDigits(e)!==s.extractSignificantDigits(String(r.value)))return r.errors=n("number.unsafe"),r}else{const t=r.value.toString();if(t.match(/e/i))return r;if(t!==s.normalizeDecimal(e))return r.errors=n("number.unsafe"),r}return r}},validate(e,t){let{schema:i,error:n,prefs:r}=t;if(e===1/0||e===-1/0)return{value:e,errors:n("number.infinity")};if(!a.isNumber(e))return{value:e,errors:n("number.base")};const s={value:e};if(r.convert){const e=i.$_getRule("precision");if(e){const t=Math.pow(10,e.args.limit);s.value=Math.round(s.value*t)/t}}return 0===s.value&&(s.value=0),!i._flags.unsafe&&(e>Number.MAX_SAFE_INTEGER||e<Number.MIN_SAFE_INTEGER)&&(s.errors=n("number.unsafe")),s},rules:{compare:{method:!1,validate(e,t,i,n){let{limit:r}=i,{name:s,operator:o,args:l}=n;return a.compare(e,r,o)?e:t.error("number."+s,{limit:l.limit,value:e})},args:[{name:"limit",ref:!0,assert:a.isNumber,message:"must be a number"}]},greater:{method(e){return this.$_addRule({name:"greater",method:"compare",args:{limit:e},operator:">"})}},integer:{method(){return this.$_addRule("integer")},validate:(e,t)=>Math.trunc(e)-e==0?e:t.error("number.integer")},less:{method(e){return this.$_addRule({name:"less",method:"compare",args:{limit:e},operator:"<"})}},max:{method(e){return this.$_addRule({name:"max",method:"compare",args:{limit:e},operator:"<="})}},min:{method(e){return this.$_addRule({name:"min",method:"compare",args:{limit:e},operator:">="})}},multiple:{method(e){return this.$_addRule({name:"multiple",args:{base:e}})},validate(e,t,i,n){let{base:r}=i;return e*(1/r)%1==0?e:t.error("number.multiple",{multiple:n.args.base,value:e})},args:[{name:"base",ref:!0,assert:e=>"number"==typeof e&&isFinite(e)&&e>0,message:"must be a positive number"}],multi:!0},negative:{method(){return this.sign("negative")}},port:{method(){return this.$_addRule("port")},validate:(e,t)=>Number.isSafeInteger(e)&&e>=0&&e<=65535?e:t.error("number.port")},positive:{method(){return this.sign("positive")}},precision:{method(e){return n(Number.isSafeInteger(e),"limit must be an integer"),this.$_addRule({name:"precision",args:{limit:e}})},validate(e,t,i){let{limit:n}=i;const r=e.toString().match(s.precisionRx);return Math.max((r[1]?r[1].length:0)-(r[2]?parseInt(r[2],10):0),0)<=n?e:t.error("number.precision",{limit:n,value:e})},convert:!0},sign:{method(e){return n(["negative","positive"].includes(e),"Invalid sign",e),this.$_addRule({name:"sign",args:{sign:e}})},validate(e,t,i){let{sign:n}=i;return"negative"===n&&e<0||"positive"===n&&e>0?e:t.error(`number.${n}`)}},unsafe:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("unsafe",e)}}},cast:{string:{from:e=>"number"==typeof e,to:(e,t)=>e.toString()}},messages:{"number.base":"{{#label}} must be a number","number.greater":"{{#label}} must be greater than {{#limit}}","number.infinity":"{{#label}} cannot be infinity","number.integer":"{{#label}} must be an integer","number.less":"{{#label}} must be less than {{#limit}}","number.max":"{{#label}} must be less than or equal to {{#limit}}","number.min":"{{#label}} must be greater than or equal to {{#limit}}","number.multiple":"{{#label}} must be a multiple of {{#multiple}}","number.negative":"{{#label}} must be a negative number","number.port":"{{#label}} must be a valid port","number.positive":"{{#label}} must be a positive number","number.precision":"{{#label}} must have no more than {{#limit}} decimal places","number.unsafe":"{{#label}} must be a safe number"}}),s.extractSignificantDigits=function(e){return e.replace(s.exponentialPartRegex,"").replace(s.dotRegex,"").replace(s.trailingZerosRegex,"").replace(s.leadingSignAndZerosRegex,"")},s.normalizeDecimal=function(e){return(e=e.replace(/^\+/,"").replace(/\.0*$/,"").replace(/^(-?)\.([^\.]*)$/,"$10.$2").replace(/^(-?)0+([0-9])/,"$1$2")).includes(".")&&e.endsWith("0")&&(e=e.replace(/0+$/,"")),"-0"===e?"0":e}},8966:(e,t,i)=>{"use strict";const n=i(7824);e.exports=n.extend({type:"object",cast:{map:{from:e=>e&&"object"==typeof e,to:(e,t)=>new Map(Object.entries(e))}}})},7417:(e,t,i)=>{"use strict";const n=i(375),r=i(5380),a=i(1745),s=i(9959),o=i(6064),l=i(9926),c=i(5752),u=i(8068),h=i(8160),d={tlds:l instanceof Set&&{tlds:{allow:l,deny:null}},base64Regex:{true:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}==|[\w\-]{3}=)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/},false:{true:/^(?:[\w\-]{2}[\w\-]{2})*(?:[\w\-]{2}(==)?|[\w\-]{3}=?)?$/,false:/^(?:[A-Za-z0-9+\/]{2}[A-Za-z0-9+\/]{2})*(?:[A-Za-z0-9+\/]{2}(==)?|[A-Za-z0-9+\/]{3}=?)?$/}},dataUriRegex:/^data:[\w+.-]+\/[\w+.-]+;((charset=[\w-]+|base64),)?(.*)$/,hexRegex:/^[a-f0-9]+$/i,ipRegex:s.regex({cidr:"forbidden"}).regex,isoDurationRegex:/^P(?!$)(\d+Y)?(\d+M)?(\d+W)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?$/,guidBrackets:{"{":"}","[":"]","(":")","":""},guidVersions:{uuidv1:"1",uuidv2:"2",uuidv3:"3",uuidv4:"4",uuidv5:"5",uuidv6:"6",uuidv7:"7",uuidv8:"8"},guidSeparators:new Set([void 0,!0,!1,"-",":"]),normalizationForms:["NFC","NFD","NFKC","NFKD"]};e.exports=u.extend({type:"string",flags:{insensitive:{default:!1},truncate:{default:!1}},terms:{replacements:{init:null}},coerce:{from:"string",method(e,t){let{schema:i,state:n,prefs:r}=t;const a=i.$_getRule("normalize");a&&(e=e.normalize(a.args.form));const s=i.$_getRule("case");s&&(e="upper"===s.args.direction?e.toLocaleUpperCase():e.toLocaleLowerCase());const o=i.$_getRule("trim");if(o&&o.args.enabled&&(e=e.trim()),i.$_terms.replacements)for(const t of i.$_terms.replacements)e=e.replace(t.pattern,t.replacement);const l=i.$_getRule("hex");if(l&&l.args.options.byteAligned&&e.length%2!=0&&(e=`0${e}`),i.$_getRule("isoDate")){const t=d.isoDate(e);t&&(e=t)}if(i._flags.truncate){const t=i.$_getRule("max");if(t){let a=t.args.limit;if(h.isResolvable(a)&&(a=a.resolve(e,n,r),!h.limit(a)))return{value:e,errors:i.$_createError("any.ref",a,{ref:t.args.limit,arg:"limit",reason:"must be a positive integer"},n,r)};e=e.slice(0,a)}}return{value:e}}},validate(e,t){let{schema:i,error:n}=t;if("string"!=typeof e)return{value:e,errors:n("string.base")};if(""===e){const t=i.$_getRule("min");if(t&&0===t.args.limit)return;return{value:e,errors:n("string.empty")}}},rules:{alphanum:{method(){return this.$_addRule("alphanum")},validate:(e,t)=>/^[a-zA-Z0-9]+$/.test(e)?e:t.error("string.alphanum")},base64:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["paddingRequired","urlSafe"]),e={urlSafe:!1,paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),n("boolean"==typeof e.urlSafe,"urlSafe must be boolean"),this.$_addRule({name:"base64",args:{options:e}})},validate(e,t,i){let{options:n}=i;return d.base64Regex[n.paddingRequired][n.urlSafe].test(e)?e:t.error("string.base64")}},case:{method(e){return n(["lower","upper"].includes(e),"Invalid case:",e),this.$_addRule({name:"case",args:{direction:e}})},validate(e,t,i){let{direction:n}=i;return"lower"===n&&e===e.toLocaleLowerCase()||"upper"===n&&e===e.toLocaleUpperCase()?e:t.error(`string.${n}case`)},convert:!0},creditCard:{method(){return this.$_addRule("creditCard")},validate(e,t){let i=e.length,n=0,r=1;for(;i--;){const t=e.charAt(i)*r;n+=t-9*(t>9),r^=3}return n>0&&n%10==0?e:t.error("string.creditCard")}},dataUri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["paddingRequired"]),e={paddingRequired:!0,...e},n("boolean"==typeof e.paddingRequired,"paddingRequired must be boolean"),this.$_addRule({name:"dataUri",args:{options:e}})},validate(e,t,i){let{options:n}=i;const r=e.match(d.dataUriRegex);if(r){if(!r[2])return e;if("base64"!==r[2])return e;if(d.base64Regex[n.paddingRequired].false.test(r[3]))return e}return t.error("string.dataUri")}},domain:{method(e){e&&h.assertOptions(e,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const t=d.addressOptions(e);return this.$_addRule({name:"domain",args:{options:e},address:t})},validate(e,t,i,n){let{address:a}=n;return r.isValid(e,a)?e:t.error("string.domain")}},email:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["allowFullyQualified","allowUnicode","ignoreLength","maxDomainSegments","minDomainSegments","multiple","separator","tlds"]),n(void 0===e.multiple||"boolean"==typeof e.multiple,"multiple option must be an boolean");const t=d.addressOptions(e),i=new RegExp(`\\s*[${e.separator?o(e.separator):","}]\\s*`);return this.$_addRule({name:"email",args:{options:e},regex:i,address:t})},validate(e,t,i,n){let{options:r}=i,{regex:s,address:o}=n;const l=r.multiple?e.split(s):[e],c=[];for(const e of l)a.isValid(e,o)||c.push(e);return c.length?t.error("string.email",{value:e,invalids:c}):e}},guid:{alias:"uuid",method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["version","separator"]);let t="";if(e.version){const i=[].concat(e.version);n(i.length>=1,"version must have at least 1 valid version specified");const r=new Set;for(let e=0;e<i.length;++e){const a=i[e];n("string"==typeof a,"version at position "+e+" must be a string");const s=d.guidVersions[a.toLowerCase()];n(s,"version at position "+e+" must be one of "+Object.keys(d.guidVersions).join(", ")),n(!r.has(s),"version at position "+e+" must not be a duplicate"),t+=s,r.add(s)}}n(d.guidSeparators.has(e.separator),'separator must be one of true, false, "-", or ":"');const i=void 0===e.separator?"[:-]?":!0===e.separator?"[:-]":!1===e.separator?"[]?":`\\${e.separator}`,r=new RegExp(`^([\\[{\\(]?)[0-9A-F]{8}(${i})[0-9A-F]{4}\\2?[${t||"0-9A-F"}][0-9A-F]{3}\\2?[${t?"89AB":"0-9A-F"}][0-9A-F]{3}\\2?[0-9A-F]{12}([\\]}\\)]?)$`,"i");return this.$_addRule({name:"guid",args:{options:e},regex:r})},validate(e,t,i,n){let{regex:r}=n;const a=r.exec(e);return a?d.guidBrackets[a[1]]!==a[a.length-1]?t.error("string.guid"):e:t.error("string.guid")}},hex:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h.assertOptions(e,["byteAligned"]),e={byteAligned:!1,...e},n("boolean"==typeof e.byteAligned,"byteAligned must be boolean"),this.$_addRule({name:"hex",args:{options:e}})},validate(e,t,i){let{options:n}=i;return d.hexRegex.test(e)?n.byteAligned&&e.length%2!=0?t.error("string.hexAlign"):e:t.error("string.hex")}},hostname:{method(){return this.$_addRule("hostname")},validate:(e,t)=>r.isValid(e,{minDomainSegments:1})||d.ipRegex.test(e)?e:t.error("string.hostname")},insensitive:{method(){return this.$_setFlag("insensitive",!0)}},ip:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["cidr","version"]);const{cidr:t,versions:i,regex:n}=s.regex(e),r=e.version?i:void 0;return this.$_addRule({name:"ip",args:{options:{cidr:t,version:r}},regex:n})},validate(e,t,i,n){let{options:r}=i,{regex:a}=n;return a.test(e)?e:r.version?t.error("string.ipVersion",{value:e,cidr:r.cidr,version:r.version}):t.error("string.ip",{value:e,cidr:r.cidr})}},isoDate:{method(){return this.$_addRule("isoDate")},validate(e,t){let{error:i}=t;return d.isoDate(e)?e:i("string.isoDate")}},isoDuration:{method(){return this.$_addRule("isoDuration")},validate:(e,t)=>d.isoDurationRegex.test(e)?e:t.error("string.isoDuration")},length:{method(e,t){return d.length(this,"length",e,"=",t)},validate(e,t,i,n){let{limit:r,encoding:a}=i,{name:s,operator:o,args:l}=n;const c=!a&&e.length;return h.compare(c,r,o)?e:t.error("string."+s,{limit:l.limit,value:e,encoding:a})},args:[{name:"limit",ref:!0,assert:h.limit,message:"must be a positive integer"},"encoding"]},lowercase:{method(){return this.case("lower")}},max:{method(e,t){return d.length(this,"max",e,"<=",t)},args:["limit","encoding"]},min:{method(e,t){return d.length(this,"min",e,">=",t)},args:["limit","encoding"]},normalize:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"NFC";return n(d.normalizationForms.includes(e),"normalization form must be one of "+d.normalizationForms.join(", ")),this.$_addRule({name:"normalize",args:{form:e}})},validate(e,t,i){let{error:n}=t,{form:r}=i;return e===e.normalize(r)?e:n("string.normalize",{value:e,form:r})},convert:!0},pattern:{alias:"regex",method(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(e instanceof RegExp,"regex must be a RegExp"),n(!e.flags.includes("g")&&!e.flags.includes("y"),"regex should not use global or sticky mode"),"string"==typeof t&&(t={name:t}),h.assertOptions(t,["invert","name"]);const i=["string.pattern",t.invert?".invert":"",t.name?".name":".base"].join("");return this.$_addRule({name:"pattern",args:{regex:e,options:t},errorCode:i})},validate(e,t,i,n){let{regex:r,options:a}=i,{errorCode:s}=n;return r.test(e)^a.invert?e:t.error(s,{name:a.name,regex:r,value:e})},args:["regex","options"],multi:!0},replace:{method(e,t){"string"==typeof e&&(e=new RegExp(o(e),"g")),n(e instanceof RegExp,"pattern must be a RegExp"),n("string"==typeof t,"replacement must be a String");const i=this.clone();return i.$_terms.replacements||(i.$_terms.replacements=[]),i.$_terms.replacements.push({pattern:e,replacement:t}),i}},token:{method(){return this.$_addRule("token")},validate:(e,t)=>/^\w+$/.test(e)?e:t.error("string.token")},trim:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_addRule({name:"trim",args:{enabled:e}})},validate(e,t,i){let{enabled:n}=i;return n&&e!==e.trim()?t.error("string.trim"):e},convert:!0},truncate:{method(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return n("boolean"==typeof e,"enabled must be a boolean"),this.$_setFlag("truncate",e)}},uppercase:{method(){return this.case("upper")}},uri:{method(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.assertOptions(e,["allowRelative","allowQuerySquareBrackets","domain","relativeOnly","scheme"]),e.domain&&h.assertOptions(e.domain,["allowFullyQualified","allowUnicode","maxDomainSegments","minDomainSegments","tlds"]);const{regex:t,scheme:i}=c.regex(e),n=e.domain?d.addressOptions(e.domain):null;return this.$_addRule({name:"uri",args:{options:e},regex:t,domain:n,scheme:i})},validate(e,t,i,n){let{options:a}=i,{regex:s,domain:o,scheme:l}=n;if(["http:/","https:/"].includes(e))return t.error("string.uri");const c=s.exec(e);if(c){const i=c[1]||c[2];return!o||a.allowRelative&&!i||r.isValid(i,o)?e:t.error("string.domain",{value:i})}return a.relativeOnly?t.error("string.uriRelativeOnly"):a.scheme?t.error("string.uriCustomScheme",{scheme:l,value:e}):t.error("string.uri")}}},manifest:{build(e,t){if(t.replacements)for(const{pattern:i,replacement:n}of t.replacements)e=e.replace(i,n);return e}},messages:{"string.alphanum":"{{#label}} must only contain alpha-numeric characters","string.base":"{{#label}} must be a string","string.base64":"{{#label}} must be a valid base64 string","string.creditCard":"{{#label}} must be a credit card","string.dataUri":"{{#label}} must be a valid dataUri string","string.domain":"{{#label}} must contain a valid domain name","string.email":"{{#label}} must be a valid email","string.empty":"{{#label}} is not allowed to be empty","string.guid":"{{#label}} must be a valid GUID","string.hex":"{{#label}} must only contain hexadecimal characters","string.hexAlign":"{{#label}} hex decoded representation must be byte aligned","string.hostname":"{{#label}} must be a valid hostname","string.ip":"{{#label}} must be a valid ip address with a {{#cidr}} CIDR","string.ipVersion":"{{#label}} must be a valid ip address of one of the following versions {{#version}} with a {{#cidr}} CIDR","string.isoDate":"{{#label}} must be in iso format","string.isoDuration":"{{#label}} must be a valid ISO 8601 duration","string.length":"{{#label}} length must be {{#limit}} characters long","string.lowercase":"{{#label}} must only contain lowercase characters","string.max":"{{#label}} length must be less than or equal to {{#limit}} characters long","string.min":"{{#label}} length must be at least {{#limit}} characters long","string.normalize":"{{#label}} must be unicode normalized in the {{#form}} form","string.token":"{{#label}} must only contain alpha-numeric and underscore characters","string.pattern.base":"{{#label}} with value {:[.]} fails to match the required pattern: {{#regex}}","string.pattern.name":"{{#label}} with value {:[.]} fails to match the {{#name}} pattern","string.pattern.invert.base":"{{#label}} with value {:[.]} matches the inverted pattern: {{#regex}}","string.pattern.invert.name":"{{#label}} with value {:[.]} matches the inverted {{#name}} pattern","string.trim":"{{#label}} must not have leading or trailing whitespace","string.uri":"{{#label}} must be a valid uri","string.uriCustomScheme":"{{#label}} must be a valid uri with a scheme matching the {{#scheme}} pattern","string.uriRelativeOnly":"{{#label}} must be a valid relative uri","string.uppercase":"{{#label}} must only contain uppercase characters"}}),d.addressOptions=function(e){if(!e)return e;if(n(void 0===e.minDomainSegments||Number.isSafeInteger(e.minDomainSegments)&&e.minDomainSegments>0,"minDomainSegments must be a positive integer"),n(void 0===e.maxDomainSegments||Number.isSafeInteger(e.maxDomainSegments)&&e.maxDomainSegments>0,"maxDomainSegments must be a positive integer"),!1===e.tlds)return e;if(!0===e.tlds||void 0===e.tlds)return n(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds);n("object"==typeof e.tlds,"tlds must be true, false, or an object");const t=e.tlds.deny;if(t)return Array.isArray(t)&&(e=Object.assign({},e,{tlds:{deny:new Set(t)}})),n(e.tlds.deny instanceof Set,"tlds.deny must be an array, Set, or boolean"),n(!e.tlds.allow,"Cannot specify both tlds.allow and tlds.deny lists"),d.validateTlds(e.tlds.deny,"tlds.deny"),e;const i=e.tlds.allow;return i?!0===i?(n(d.tlds,"Built-in TLD list disabled"),Object.assign({},e,d.tlds)):(Array.isArray(i)&&(e=Object.assign({},e,{tlds:{allow:new Set(i)}})),n(e.tlds.allow instanceof Set,"tlds.allow must be an array, Set, or boolean"),d.validateTlds(e.tlds.allow,"tlds.allow"),e):e},d.validateTlds=function(e,t){for(const i of e)n(r.isValid(i,{minDomainSegments:1,maxDomainSegments:1}),`${t} must contain valid top level domain names`)},d.isoDate=function(e){if(!h.isIsoDate(e))return null;/.*T.*[+-]\d\d$/.test(e)&&(e+="00");const t=new Date(e);return isNaN(t.getTime())?null:t.toISOString()},d.length=function(e,t,i,r,a){return n(!a||!1,"Invalid encoding:",a),e.$_addRule({name:t,method:"length",args:{limit:i,encoding:a},operator:r})}},8826:(e,t,i)=>{"use strict";const n=i(375),r=i(8068),a={};a.Map=class extends Map{slice(){return new a.Map(this)}},e.exports=r.extend({type:"symbol",terms:{map:{init:new a.Map}},coerce:{method(e,t){let{schema:i,error:n}=t;const r=i.$_terms.map.get(e);return r&&(e=r),i._flags.only&&"symbol"!=typeof e?{value:e,errors:n("symbol.map",{map:i.$_terms.map})}:{value:e}}},validate(e,t){let{error:i}=t;if("symbol"!=typeof e)return{value:e,errors:i("symbol.base")}},rules:{map:{method(e){e&&!e[Symbol.iterator]&&"object"==typeof e&&(e=Object.entries(e)),n(e&&e[Symbol.iterator],"Iterable must be an iterable or object");const t=this.clone(),i=[];for(const r of e){n(r&&r[Symbol.iterator],"Entry must be an iterable");const[e,a]=r;n("object"!=typeof e&&"function"!=typeof e&&"symbol"!=typeof e,"Key must not be of type object, function, or Symbol"),n("symbol"==typeof a,"Value must be a Symbol"),t.$_terms.map.set(e,a),i.push(a)}return t.valid(...i)}}},manifest:{build:(e,t)=>(t.map&&(e=e.map(t.map)),e)},messages:{"symbol.base":"{{#label}} must be a symbol","symbol.map":"{{#label}} must be one of {{#map}}"}})},8863:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(738),s=i(9621),o=i(8160),l=i(6354),c=i(493),u={result:Symbol("result")};t.entry=function(e,t,i){let r=o.defaults;i&&(n(void 0===i.warnings,"Cannot override warnings preference in synchronous validation"),n(void 0===i.artifacts,"Cannot override artifacts preference in synchronous validation"),r=o.preferences(o.defaults,i));const a=u.entry(e,t,r);n(!a.mainstay.externals.length,"Schema with external rules must use validateAsync()");const s={value:a.value};return a.error&&(s.error=a.error),a.mainstay.warnings.length&&(s.warning=l.details(a.mainstay.warnings)),a.mainstay.debug&&(s.debug=a.mainstay.debug),a.mainstay.artifacts&&(s.artifacts=a.mainstay.artifacts),s},t.entryAsync=async function(e,t,i){let n=o.defaults;i&&(n=o.preferences(o.defaults,i));const r=u.entry(e,t,n),a=r.mainstay;if(r.error)throw a.debug&&(r.error.debug=a.debug),r.error;if(a.externals.length){let t=r.value;const c=[];for(const r of a.externals){const h=r.state.path,d="link"===r.schema.type?a.links.get(r.schema):null;let f,p,m=t;const g=h.length?[t]:[],v=h.length?s(e,h):e;if(h.length){f=h[h.length-1];let e=t;for(const t of h.slice(0,-1))e=e[t],g.unshift(e);p=g[0],m=p[f]}try{const e=(e,t)=>(d||r.schema).$_createError(e,m,t,r.state,n),s=await r.method(m,{schema:r.schema,linked:d,state:r.state,prefs:i,original:v,error:e,errorsArray:u.errorsArray,warn:(e,t)=>a.warnings.push((d||r.schema).$_createError(e,m,t,r.state,n)),message:(e,t)=>(d||r.schema).$_createError("external",m,t,r.state,n,{messages:e})});if(void 0===s||s===m)continue;if(s instanceof l.Report){if(a.tracer.log(r.schema,r.state,"rule","external","error"),c.push(s),n.abortEarly)break;continue}if(Array.isArray(s)&&s[o.symbols.errors]){if(a.tracer.log(r.schema,r.state,"rule","external","error"),c.push(...s),n.abortEarly)break;continue}p?(a.tracer.value(r.state,"rule",m,s,"external"),p[f]=s):(a.tracer.value(r.state,"rule",t,s,"external"),t=s)}catch(e){throw n.errors.label&&(e.message+=` (${r.label})`),e}}if(r.value=t,c.length)throw r.error=l.process(c,e,n),a.debug&&(r.error.debug=a.debug),r.error}if(!n.warnings&&!n.debug&&!n.artifacts)return r.value;const c={value:r.value};return a.warnings.length&&(c.warning=l.details(a.warnings)),a.debug&&(c.debug=a.debug),a.artifacts&&(c.artifacts=a.artifacts),c},u.Mainstay=class{constructor(e,t,i){this.externals=[],this.warnings=[],this.tracer=e,this.debug=t,this.links=i,this.shadow=null,this.artifacts=null,this._snapshots=[]}snapshot(){this._snapshots.push({externals:this.externals.slice(),warnings:this.warnings.slice()})}restore(){const e=this._snapshots.pop();this.externals=e.externals,this.warnings=e.warnings}commit(){this._snapshots.pop()}},u.entry=function(e,i,n){const{tracer:r,cleanup:a}=u.tracer(i,n),s=n.debug?[]:null,o=i._ids._schemaChain?new Map:null,h=new u.Mainstay(r,s,o),d=i._ids._schemaChain?[{schema:i}]:null,f=new c([],[],{mainstay:h,schemas:d}),p=t.validate(e,i,f,n);a&&i.$_root.untrace();const m=l.process(p.errors,e,n);return{value:p.value,error:m,mainstay:h}},u.tracer=function(e,t){return e.$_root._tracer?{tracer:e.$_root._tracer._register(e)}:t.debug?(n(e.$_root.trace,"Debug mode not supported"),{tracer:e.$_root.trace()._register(e),cleanup:!0}):{tracer:u.ignore}},t.validate=function(e,t,i,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(t.$_terms.whens&&(t=t._generate(e,i,n).schema),t._preferences&&(n=u.prefs(t,n)),t._cache&&n.cache){const n=t._cache.get(e);if(i.mainstay.tracer.debug(i,"validate","cached",!!n),n)return n}const a=(r,a,s)=>t.$_createError(r,e,a,s||i,n),s={original:e,prefs:n,schema:t,state:i,error:a,errorsArray:u.errorsArray,warn:(e,t,n)=>i.mainstay.warnings.push(a(e,t,n)),message:(r,a)=>t.$_createError("custom",e,a,i,n,{messages:r})};i.mainstay.tracer.entry(t,i);const l=t._definition;if(l.prepare&&void 0!==e&&n.convert){const t=l.prepare(e,s);if(t){if(i.mainstay.tracer.value(i,"prepare",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}if(l.coerce&&void 0!==e&&n.convert&&(!l.coerce.from||l.coerce.from.includes(typeof e))){const t=l.coerce.method(e,s);if(t){if(i.mainstay.tracer.value(i,"coerced",e,t.value),t.errors)return u.finalize(t.value,[].concat(t.errors),s);e=t.value}}const c=t._flags.empty;c&&c.$_match(u.trim(e,t),i.nest(c),o.defaults)&&(i.mainstay.tracer.value(i,"empty",e,void 0),e=void 0);const h=r.presence||t._flags.presence||(t._flags._endedSwitch?null:n.presence);if(void 0===e){if("forbidden"===h)return u.finalize(e,null,s);if("required"===h)return u.finalize(e,[t.$_createError("any.required",e,null,i,n)],s);if("optional"===h){if(t._flags.default!==o.symbols.deepDefault)return u.finalize(e,null,s);i.mainstay.tracer.value(i,"default",e,{}),e={}}}else if("forbidden"===h)return u.finalize(e,[t.$_createError("any.unknown",e,null,i,n)],s);const d=[];if(t._valids){const r=t._valids.get(e,i,n,t._flags.insensitive);if(r)return n.convert&&(i.mainstay.tracer.value(i,"valids",e,r.value),e=r.value),i.mainstay.tracer.filter(t,i,"valid",r),u.finalize(e,null,s);if(t._flags.only){const r=t.$_createError("any.only",e,{valids:t._valids.values({display:!0})},i,n);if(n.abortEarly)return u.finalize(e,[r],s);d.push(r)}}if(t._invalids){const r=t._invalids.get(e,i,n,t._flags.insensitive);if(r){i.mainstay.tracer.filter(t,i,"invalid",r);const a=t.$_createError("any.invalid",e,{invalids:t._invalids.values({display:!0})},i,n);if(n.abortEarly)return u.finalize(e,[a],s);d.push(a)}}if(l.validate){const t=l.validate(e,s);if(t&&(i.mainstay.tracer.value(i,"base",e,t.value),e=t.value,t.errors)){if(!Array.isArray(t.errors))return d.push(t.errors),u.finalize(e,d,s);if(t.errors.length)return d.push(...t.errors),u.finalize(e,d,s)}}return t._rules.length?u.rules(e,d,s):u.finalize(e,d,s)},u.rules=function(e,t,i){const{schema:n,state:r,prefs:a}=i;for(const s of n._rules){const l=n._definition.rules[s.method];if(l.convert&&a.convert){r.mainstay.tracer.log(n,r,"rule",s.name,"full");continue}let c,h=s.args;if(s._resolve.length){h=Object.assign({},h);for(const t of s._resolve){const i=l.argsByName.get(t),s=h[t].resolve(e,r,a),u=i.normalize?i.normalize(s):s,d=o.validateArg(u,null,i);if(d){c=n.$_createError("any.ref",s,{arg:t,ref:h[t],reason:d},r,a);break}h[t]=u}}c=c||l.validate(e,i,h,s);const d=u.rule(c,s);if(d.errors){if(r.mainstay.tracer.log(n,r,"rule",s.name,"error"),s.warn){r.mainstay.warnings.push(...d.errors);continue}if(a.abortEarly)return u.finalize(e,d.errors,i);t.push(...d.errors)}else r.mainstay.tracer.log(n,r,"rule",s.name,"pass"),r.mainstay.tracer.value(r,"rule",e,d.value,s.name),e=d.value}return u.finalize(e,t,i)},u.rule=function(e,t){return e instanceof l.Report?(u.error(e,t),{errors:[e],value:null}):Array.isArray(e)&&e[o.symbols.errors]?(e.forEach((e=>u.error(e,t))),{errors:e,value:null}):{errors:null,value:e}},u.error=function(e,t){return t.message&&e._setTemplate(t.message),e},u.finalize=function(e,t,i){t=t||[];const{schema:r,state:a,prefs:s}=i;if(t.length){const n=u.default("failover",void 0,t,i);void 0!==n&&(a.mainstay.tracer.value(a,"failover",e,n),e=n,t=[])}if(t.length&&r._flags.error)if("function"==typeof r._flags.error){t=r._flags.error(t),Array.isArray(t)||(t=[t]);for(const e of t)n(e instanceof Error||e instanceof l.Report,"error() must return an Error object")}else t=[r._flags.error];if(void 0===e){const n=u.default("default",e,t,i);a.mainstay.tracer.value(a,"default",e,n),e=n}if(r._flags.cast&&void 0!==e){const t=r._definition.cast[r._flags.cast];if(t.from(e)){const n=t.to(e,i);a.mainstay.tracer.value(a,"cast",e,n,r._flags.cast),e=n}}if(r.$_terms.externals&&s.externals&&!1!==s._externals)for(const{method:e}of r.$_terms.externals)a.mainstay.externals.push({method:e,schema:r,state:a,label:l.label(r._flags,a,s)});const o={value:e,errors:t.length?t:null};return r._flags.result&&(o.value="strip"===r._flags.result?void 0:i.original,a.mainstay.tracer.value(a,r._flags.result,e,o.value),a.shadow(e,r._flags.result)),r._cache&&!1!==s.cache&&!r._refs.length&&r._cache.set(i.original,o),void 0===e||o.errors||void 0===r._flags.artifact||(a.mainstay.artifacts=a.mainstay.artifacts||new Map,a.mainstay.artifacts.has(r._flags.artifact)||a.mainstay.artifacts.set(r._flags.artifact,[]),a.mainstay.artifacts.get(r._flags.artifact).push(a.path)),o},u.prefs=function(e,t){const i=t===o.defaults;return i&&e._preferences[o.symbols.prefs]?e._preferences[o.symbols.prefs]:(t=o.preferences(t,e._preferences),i&&(e._preferences[o.symbols.prefs]=t),t)},u.default=function(e,t,i,n){const{schema:a,state:s,prefs:l}=n,c=a._flags[e];if(l.noDefaults||void 0===c)return t;if(s.mainstay.tracer.log(a,s,"rule",e,"full"),!c)return c;if("function"==typeof c){const o=c.length?[r(s.ancestors[0]),n]:[];try{return c(...o)}catch(t){return void i.push(a.$_createError(`any.${e}`,null,{error:t},s,l))}}return"object"!=typeof c?c:c[o.symbols.literal]?c.literal:o.isResolvable(c)?c.resolve(t,s,l):r(c)},u.trim=function(e,t){if("string"!=typeof e)return e;const i=t.$_getRule("trim");return i&&i.args.enabled?e.trim():e},u.ignore={active:!1,debug:a,entry:a,filter:a,log:a,resolve:a,value:a},u.errorsArray=function(){const e=[];return e[o.symbols.errors]=!0,e}},2036:(e,t,i)=>{"use strict";const n=i(375),r=i(9474),a=i(8160),s={};e.exports=s.Values=class{constructor(e,t){this._values=new Set(e),this._refs=new Set(t),this._lowercase=s.lowercases(e),this._override=!1}get length(){return this._values.size+this._refs.size}add(e,t){a.isResolvable(e)?this._refs.has(e)||(this._refs.add(e),t&&t.register(e)):this.has(e,null,null,!1)||(this._values.add(e),"string"==typeof e&&this._lowercase.set(e.toLowerCase(),e))}static merge(e,t,i){if(e=e||new s.Values,t){if(t._override)return t.clone();for(const i of[...t._values,...t._refs])e.add(i)}if(i)for(const t of[...i._values,...i._refs])e.remove(t);return e.length?e:null}remove(e){a.isResolvable(e)?this._refs.delete(e):(this._values.delete(e),"string"==typeof e&&this._lowercase.delete(e.toLowerCase()))}has(e,t,i,n){return!!this.get(e,t,i,n)}get(e,t,i,n){if(!this.length)return!1;if(this._values.has(e))return{value:e};if("string"==typeof e&&e&&n){const t=this._lowercase.get(e.toLowerCase());if(t)return{value:t}}if(!this._refs.size&&"object"!=typeof e)return!1;if("object"==typeof e)for(const t of this._values)if(r(t,e))return{value:t};if(t)for(const a of this._refs){const s=a.resolve(e,t,i,null,{in:!0});if(void 0===s)continue;const o=a.in&&"object"==typeof s?Array.isArray(s)?s:Object.keys(s):[s];for(const t of o)if(typeof t==typeof e)if(n&&e&&"string"==typeof e){if(t.toLowerCase()===e.toLowerCase())return{value:t,ref:a}}else if(r(t,e))return{value:t,ref:a}}return!1}override(){this._override=!0}values(e){if(e&&e.display){const e=[];for(const t of[...this._values,...this._refs])void 0!==t&&e.push(t);return e}return Array.from([...this._values,...this._refs])}clone(){const e=new s.Values(this._values,this._refs);return e._override=this._override,e}concat(e){n(!e._override,"Cannot concat override set of values");const t=new s.Values([...this._values,...e._values],[...this._refs,...e._refs]);return t._override=this._override,t}describe(){const e=[];this._override&&e.push({override:!0});for(const t of this._values.values())e.push(t&&"object"==typeof t?{value:t}:t);for(const t of this._refs.values())e.push(t.describe());return e}},s.Values.prototype[a.symbols.values]=!0,s.Values.prototype.slice=s.Values.prototype.clone,s.lowercases=function(e){const t=new Map;if(e)for(const i of e)"string"==typeof i&&t.set(i.toLowerCase(),i);return t}},978:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(1687),s=i(9621),o={};e.exports=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n(e&&"object"==typeof e,"Invalid defaults value: must be an object"),n(!t||!0===t||"object"==typeof t,"Invalid source value: must be true, falsy or an object"),n("object"==typeof i,"Invalid options: must be an object"),!t)return null;if(i.shallow)return o.applyToDefaultsWithShallow(e,t,i);const s=r(e);if(!0===t)return s;const l=void 0!==i.nullOverride&&i.nullOverride;return a(s,t,{nullOverride:l,mergeArrays:!1})},o.applyToDefaultsWithShallow=function(e,t,i){const l=i.shallow;n(Array.isArray(l),"Invalid keys");const c=new Map,u=!0===t?null:new Set;for(let i of l){i=Array.isArray(i)?i:i.split(".");const n=s(e,i);n&&"object"==typeof n?c.set(n,u&&s(t,i)||n):u&&u.add(i)}const h=r(e,{},c);if(!u)return h;for(const e of u)o.reachCopy(h,t,e);const d=void 0!==i.nullOverride&&i.nullOverride;return a(h,t,{nullOverride:d,mergeArrays:!1})},o.reachCopy=function(e,t,i){for(const e of i){if(!(e in t))return;const i=t[e];if("object"!=typeof i||null===i)return;t=i}const n=t;let r=e;for(let e=0;e<i.length-1;++e){const t=i[e];"object"!=typeof r[t]&&(r[t]={}),r=r[t]}r[i[i.length-1]]=n}},375:(e,t,i)=>{"use strict";const n=i(7916);e.exports=function(e){if(!e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];if(1===i.length&&i[0]instanceof Error)throw i[0];throw new n(i)}}},8571:(e,t,i)=>{"use strict";const n=i(9621),r=i(4277),a=i(7043),s={needsProtoHack:new Set([r.set,r.map,r.weakSet,r.weakMap])};e.exports=s.clone=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if("object"!=typeof e||null===e)return e;let n=s.clone,o=i;if(t.shallow){if(!0!==t.shallow)return s.cloneWithShallow(e,t);n=e=>e}else if(o){const t=o.get(e);if(t)return t}else o=new Map;const l=r.getInternalProto(e);if(l===r.buffer)return!1;if(l===r.date)return new Date(e.getTime());if(l===r.regex)return new RegExp(e);const c=s.base(e,l,t);if(c===e)return e;if(o&&o.set(e,c),l===r.set)for(const i of e)c.add(n(i,t,o));else if(l===r.map)for(const[i,r]of e)c.set(i,n(r,t,o));const u=a.keys(e,t);for(const i of u){if("__proto__"===i)continue;if(l===r.array&&"length"===i){c.length=e.length;continue}const a=Object.getOwnPropertyDescriptor(e,i);a?a.get||a.set?Object.defineProperty(c,i,a):a.enumerable?c[i]=n(e[i],t,o):Object.defineProperty(c,i,{enumerable:!1,writable:!0,configurable:!0,value:n(e[i],t,o)}):Object.defineProperty(c,i,{enumerable:!0,writable:!0,configurable:!0,value:n(e[i],t,o)})}return c},s.cloneWithShallow=function(e,t){const i=t.shallow;(t=Object.assign({},t)).shallow=!1;const r=new Map;for(const t of i){const i=n(e,t);"object"!=typeof i&&"function"!=typeof i||r.set(i,i)}return s.clone(e,t,r)},s.base=function(e,t,i){if(!1===i.prototype)return s.needsProtoHack.has(t)?new t.constructor:t===r.array?[]:{};const n=Object.getPrototypeOf(e);if(n&&n.isImmutable)return e;if(t===r.array){const e=[];return n!==t&&Object.setPrototypeOf(e,n),e}if(s.needsProtoHack.has(t)){const e=new n.constructor;return n!==t&&Object.setPrototypeOf(e,n),e}return Object.create(n)}},9474:(e,t,i)=>{"use strict";const n=i(4277),r={mismatched:null};e.exports=function(e,t,i){return i=Object.assign({prototype:!0},i),!!r.isDeepEqual(e,t,i,[])},r.isDeepEqual=function(e,t,i,a){if(e===t)return 0!==e||1/e==1/t;const s=typeof e;if(s!==typeof t)return!1;if(null===e||null===t)return!1;if("function"===s){if(!i.deepFunction||e.toString()!==t.toString())return!1}else if("object"!==s)return e!=e&&t!=t;const o=r.getSharedType(e,t,!!i.prototype);switch(o){case n.buffer:return!1;case n.promise:return e===t;case n.regex:return e.toString()===t.toString();case r.mismatched:return!1}for(let i=a.length-1;i>=0;--i)if(a[i].isSame(e,t))return!0;a.push(new r.SeenEntry(e,t));try{return!!r.isDeepEqualObj(o,e,t,i,a)}finally{a.pop()}},r.getSharedType=function(e,t,i){if(i)return Object.getPrototypeOf(e)!==Object.getPrototypeOf(t)?r.mismatched:n.getInternalProto(e);const a=n.getInternalProto(e);return a!==n.getInternalProto(t)?r.mismatched:a},r.valueOf=function(e){const t=e.valueOf;if(void 0===t)return e;try{return t.call(e)}catch(e){return e}},r.hasOwnEnumerableProperty=function(e,t){return Object.prototype.propertyIsEnumerable.call(e,t)},r.isSetSimpleEqual=function(e,t){for(const i of Set.prototype.values.call(e))if(!Set.prototype.has.call(t,i))return!1;return!0},r.isDeepEqualObj=function(e,t,i,a,s){const{isDeepEqual:o,valueOf:l,hasOwnEnumerableProperty:c}=r,{keys:u,getOwnPropertySymbols:h}=Object;if(e===n.array){if(!a.part){if(t.length!==i.length)return!1;for(let e=0;e<t.length;++e)if(!o(t[e],i[e],a,s))return!1;return!0}for(const e of t)for(const t of i)if(o(e,t,a,s))return!0}else if(e===n.set){if(t.size!==i.size)return!1;if(!r.isSetSimpleEqual(t,i)){const e=new Set(Set.prototype.values.call(i));for(const i of Set.prototype.values.call(t)){if(e.delete(i))continue;let t=!1;for(const n of e)if(o(i,n,a,s)){e.delete(n),t=!0;break}if(!t)return!1}}}else if(e===n.map){if(t.size!==i.size)return!1;for(const[e,n]of Map.prototype.entries.call(t)){if(void 0===n&&!Map.prototype.has.call(i,e))return!1;if(!o(n,Map.prototype.get.call(i,e),a,s))return!1}}else if(e===n.error&&(t.name!==i.name||t.message!==i.message))return!1;const d=l(t),f=l(i);if((t!==d||i!==f)&&!o(d,f,a,s))return!1;const p=u(t);if(!a.part&&p.length!==u(i).length&&!a.skip)return!1;let m=0;for(const e of p)if(a.skip&&a.skip.includes(e))void 0===i[e]&&++m;else{if(!c(i,e))return!1;if(!o(t[e],i[e],a,s))return!1}if(!a.part&&p.length-m!==u(i).length)return!1;if(!1!==a.symbols){const e=h(t),n=new Set(h(i));for(const r of e){if(!a.skip||!a.skip.includes(r))if(c(t,r)){if(!c(i,r))return!1;if(!o(t[r],i[r],a,s))return!1}else if(c(i,r))return!1;n.delete(r)}for(const e of n)if(c(i,e))return!1}return!0},r.SeenEntry=class{constructor(e,t){this.obj=e,this.ref=t}isSame(e,t){return this.obj===e&&this.ref===t}}},7916:(e,t,i)=>{"use strict";const n=i(8761);e.exports=class extends Error{constructor(e){super(e.filter((e=>""!==e)).map((e=>"string"==typeof e?e:e instanceof Error?e.message:n(e))).join(" ")||"Unknown error"),"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,t.assert)}}},5277:e=>{"use strict";const t={};e.exports=function(e){if(!e)return"";let i="";for(let n=0;n<e.length;++n){const r=e.charCodeAt(n);t.isSafe(r)?i+=e[n]:i+=t.escapeHtmlChar(r)}return i},t.escapeHtmlChar=function(e){return t.namedHtml.get(e)||(e>=256?"&#"+e+";":`&#x${e.toString(16).padStart(2,"0")};`)},t.isSafe=function(e){return t.safeCharCodes.has(e)},t.namedHtml=new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[34,"&quot;"],[160,"&nbsp;"],[162,"&cent;"],[163,"&pound;"],[164,"&curren;"],[169,"&copy;"],[174,"&reg;"]]),t.safeCharCodes=function(){const e=new Set;for(let t=32;t<123;++t)(t>=97||t>=65&&t<=90||t>=48&&t<=57||32===t||46===t||44===t||45===t||58===t||95===t)&&e.add(t);return e}()},6064:e=>{"use strict";e.exports=function(e){return e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}},738:e=>{"use strict";e.exports=function(){}},1687:(e,t,i)=>{"use strict";const n=i(375),r=i(8571),a=i(7043),s={};e.exports=s.merge=function(e,t,i){if(n(e&&"object"==typeof e,"Invalid target value: must be an object"),n(null==t||"object"==typeof t,"Invalid source value: must be null, undefined, or an object"),!t)return e;if(i=Object.assign({nullOverride:!0,mergeArrays:!0},i),Array.isArray(t)){n(Array.isArray(e),"Cannot merge array onto an object"),i.mergeArrays||(e.length=0);for(let n=0;n<t.length;++n)e.push(r(t[n],{symbols:i.symbols}));return e}const o=a.keys(t,i);for(let n=0;n<o.length;++n){const a=o[n];if("__proto__"===a||!Object.prototype.propertyIsEnumerable.call(t,a))continue;const l=t[a];if(l&&"object"==typeof l){if(e[a]===l)continue;!e[a]||"object"!=typeof e[a]||Array.isArray(e[a])!==Array.isArray(l)||l instanceof Date||l instanceof RegExp?e[a]=r(l,{symbols:i.symbols}):s.merge(e[a],l,i)}else(null!=l||i.nullOverride)&&(e[a]=l)}return e}},9621:(e,t,i)=>{"use strict";const n=i(375),r={};e.exports=function(e,t,i){if(!1===t||null==t)return e;"string"==typeof(i=i||{})&&(i={separator:i});const a=Array.isArray(t);n(!a||!i.separator,"Separator option is not valid for array-based chain");const s=a?t:t.split(i.separator||".");let o=e;for(let e=0;e<s.length;++e){let a=s[e];const l=i.iterables&&r.iterables(o);if(Array.isArray(o)||"set"===l){const e=Number(a);Number.isInteger(e)&&(a=e<0?o.length+e:e)}if(!o||"function"==typeof o&&!1===i.functions||!l&&void 0===o[a]){n(!i.strict||e+1===s.length,"Missing segment",a,"in reach path ",t),n("object"==typeof o||!0===i.functions||"function"!=typeof o,"Invalid segment",a,"in reach path ",t),o=i.default;break}o=l?"set"===l?[...o][a]:o.get(a):o[a]}return o},r.iterables=function(e){return e instanceof Set?"set":e instanceof Map?"map":void 0}},8761:e=>{"use strict";e.exports=function(){try{return JSON.stringify(...arguments)}catch(e){return"[Cannot display object: "+e.message+"]"}}},4277:(e,t)=>{"use strict";const i={};t=e.exports={array:Array.prototype,buffer:!1,date:Date.prototype,error:Error.prototype,generic:Object.prototype,map:Map.prototype,promise:Promise.prototype,regex:RegExp.prototype,set:Set.prototype,weakMap:WeakMap.prototype,weakSet:WeakSet.prototype},i.typeMap=new Map([["[object Error]",t.error],["[object Map]",t.map],["[object Promise]",t.promise],["[object Set]",t.set],["[object WeakMap]",t.weakMap],["[object WeakSet]",t.weakSet]]),t.getInternalProto=function(e){if(Array.isArray(e))return t.array;if(e instanceof Date)return t.date;if(e instanceof RegExp)return t.regex;if(e instanceof Error)return t.error;const n=Object.prototype.toString.call(e);return i.typeMap.get(n)||t.generic}},7043:(e,t)=>{"use strict";t.keys=function(e){return!1!==(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).symbols?Reflect.ownKeys(e):Object.getOwnPropertyNames(e)}},3652:(e,t,i)=>{"use strict";const n=i(375),r={};t.Sorter=class{constructor(){this._items=[],this.nodes=[]}add(e,t){const i=[].concat((t=t||{}).before||[]),r=[].concat(t.after||[]),a=t.group||"?",s=t.sort||0;n(!i.includes(a),`Item cannot come before itself: ${a}`),n(!i.includes("?"),"Item cannot come before unassociated items"),n(!r.includes(a),`Item cannot come after itself: ${a}`),n(!r.includes("?"),"Item cannot come after unassociated items"),Array.isArray(e)||(e=[e]);for(const t of e){const e={seq:this._items.length,sort:s,before:i,after:r,group:a,node:t};this._items.push(e)}if(!t.manual){const e=this._sort();n(e,"item","?"!==a?`added into group ${a}`:"","created a dependencies error")}return this.nodes}merge(e){Array.isArray(e)||(e=[e]);for(const t of e)if(t)for(const e of t._items)this._items.push(Object.assign({},e));this._items.sort(r.mergeSort);for(let e=0;e<this._items.length;++e)this._items[e].seq=e;const t=this._sort();return n(t,"merge created a dependencies error"),this.nodes}sort(){const e=this._sort();return n(e,"sort created a dependencies error"),this.nodes}_sort(){const e={},t=Object.create(null),i=Object.create(null);for(const n of this._items){const r=n.seq,a=n.group;i[a]=i[a]||[],i[a].push(r),e[r]=n.before;for(const e of n.after)t[e]=t[e]||[],t[e].push(r)}for(const t in e){const n=[];for(const r in e[t]){const a=e[t][r];i[a]=i[a]||[],n.push(...i[a])}e[t]=n}for(const n in t)if(i[n])for(const r of i[n])e[r].push(...t[n]);const n={};for(const t in e){const i=e[t];for(const e of i)n[e]=n[e]||[],n[e].push(t)}const r={},a=[];for(let e=0;e<this._items.length;++e){let t=e;if(n[e]){t=null;for(let e=0;e<this._items.length;++e){if(!0===r[e])continue;n[e]||(n[e]=[]);const i=n[e].length;let a=0;for(let t=0;t<i;++t)r[n[e][t]]&&++a;if(a===i){t=e;break}}}null!==t&&(r[t]=!0,a.push(t))}if(a.length!==this._items.length)return!1;const s={};for(const e of this._items)s[e.seq]=e;this._items=[],this.nodes=[];for(const e of a){const t=s[e];this.nodes.push(t.node),this._items.push(t)}return!0}},r.mergeSort=(e,t)=>e.sort===t.sort?0:e.sort<t.sort?-1:1},5380:(e,t,i)=>{"use strict";const n=i(443),r=i(2178),a={minDomainSegments:2,nonAsciiRx:/[^\x00-\x7f]/,domainControlRx:/[\x00-\x20@\:\/\\#!\$&\'\(\)\*\+,;=\?]/,tldSegmentRx:/^[a-zA-Z](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,domainSegmentRx:/^[a-zA-Z0-9](?:[a-zA-Z0-9\-]*[a-zA-Z0-9])?$/,URL:n.URL||URL};t.analyze=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return r.code("DOMAIN_NON_EMPTY_STRING");if("string"!=typeof e)throw new Error("Invalid input: domain must be a string");if(e.length>256)return r.code("DOMAIN_TOO_LONG");if(a.nonAsciiRx.test(e)){if(!1===t.allowUnicode)return r.code("DOMAIN_INVALID_UNICODE_CHARS");e=e.normalize("NFC")}if(a.domainControlRx.test(e))return r.code("DOMAIN_INVALID_CHARS");e=a.punycode(e),t.allowFullyQualified&&"."===e[e.length-1]&&(e=e.slice(0,-1));const i=t.minDomainSegments||a.minDomainSegments,n=e.split(".");if(n.length<i)return r.code("DOMAIN_SEGMENTS_COUNT");if(t.maxDomainSegments&&n.length>t.maxDomainSegments)return r.code("DOMAIN_SEGMENTS_COUNT_MAX");const s=t.tlds;if(s){const e=n[n.length-1].toLowerCase();if(s.deny&&s.deny.has(e)||s.allow&&!s.allow.has(e))return r.code("DOMAIN_FORBIDDEN_TLDS")}for(let e=0;e<n.length;++e){const t=n[e];if(!t.length)return r.code("DOMAIN_EMPTY_SEGMENT");if(t.length>63)return r.code("DOMAIN_LONG_SEGMENT");if(e<n.length-1){if(!a.domainSegmentRx.test(t))return r.code("DOMAIN_INVALID_CHARS")}else if(!a.tldSegmentRx.test(t))return r.code("DOMAIN_INVALID_TLDS_CHARS")}return null},t.isValid=function(e,i){return!t.analyze(e,i)},a.punycode=function(e){e.includes("%")&&(e=e.replace(/%/g,"%25"));try{return new a.URL(`http://${e}`).host}catch(t){return e}}},1745:(e,t,i)=>{"use strict";const n=i(9848),r=i(5380),a=i(2178),s={nonAsciiRx:/[^\x00-\x7f]/,encoder:new(n.TextEncoder||TextEncoder)};t.analyze=function(e,t){return s.email(e,t)},t.isValid=function(e,t){return!s.email(e,t)},s.email=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"!=typeof e)throw new Error("Invalid input: email must be a string");if(!e)return a.code("EMPTY_STRING");const i=!s.nonAsciiRx.test(e);if(!i){if(!1===t.allowUnicode)return a.code("FORBIDDEN_UNICODE");e=e.normalize("NFC")}const n=e.split("@");if(2!==n.length)return n.length>2?a.code("MULTIPLE_AT_CHAR"):a.code("MISSING_AT_CHAR");const[o,l]=n;if(!o)return a.code("EMPTY_LOCAL");if(!t.ignoreLength){if(e.length>254)return a.code("ADDRESS_TOO_LONG");if(s.encoder.encode(o).length>64)return a.code("LOCAL_TOO_LONG")}return s.local(o,i)||r.analyze(l,t)},s.local=function(e,t){const i=e.split(".");for(const e of i){if(!e.length)return a.code("EMPTY_LOCAL_SEGMENT");if(t){if(!s.atextRx.test(e))return a.code("INVALID_LOCAL_CHARS")}else for(const t of e){if(s.atextRx.test(t))continue;const e=s.binary(t);if(!s.atomRx.test(e))return a.code("INVALID_LOCAL_CHARS")}}},s.binary=function(e){return Array.from(s.encoder.encode(e)).map((e=>String.fromCharCode(e))).join("")},s.atextRx=/^[\w!#\$%&'\*\+\-/=\?\^`\{\|\}~]+$/,s.atomRx=new RegExp(["(?:[\\xc2-\\xdf][\\x80-\\xbf])","(?:\\xe0[\\xa0-\\xbf][\\x80-\\xbf])|(?:[\\xe1-\\xec][\\x80-\\xbf]{2})|(?:\\xed[\\x80-\\x9f][\\x80-\\xbf])|(?:[\\xee-\\xef][\\x80-\\xbf]{2})","(?:\\xf0[\\x90-\\xbf][\\x80-\\xbf]{2})|(?:[\\xf1-\\xf3][\\x80-\\xbf]{3})|(?:\\xf4[\\x80-\\x8f][\\x80-\\xbf]{2})"].join("|"))},2178:(e,t)=>{"use strict";t.codes={EMPTY_STRING:"Address must be a non-empty string",FORBIDDEN_UNICODE:"Address contains forbidden Unicode characters",MULTIPLE_AT_CHAR:"Address cannot contain more than one @ character",MISSING_AT_CHAR:"Address must contain one @ character",EMPTY_LOCAL:"Address local part cannot be empty",ADDRESS_TOO_LONG:"Address too long",LOCAL_TOO_LONG:"Address local part too long",EMPTY_LOCAL_SEGMENT:"Address local part contains empty dot-separated segment",INVALID_LOCAL_CHARS:"Address local part contains invalid character",DOMAIN_NON_EMPTY_STRING:"Domain must be a non-empty string",DOMAIN_TOO_LONG:"Domain too long",DOMAIN_INVALID_UNICODE_CHARS:"Domain contains forbidden Unicode characters",DOMAIN_INVALID_CHARS:"Domain contains invalid character",DOMAIN_INVALID_TLDS_CHARS:"Domain contains invalid tld character",DOMAIN_SEGMENTS_COUNT:"Domain lacks the minimum required number of segments",DOMAIN_SEGMENTS_COUNT_MAX:"Domain contains too many segments",DOMAIN_FORBIDDEN_TLDS:"Domain uses forbidden TLD",DOMAIN_EMPTY_SEGMENT:"Domain contains empty dot-separated segment",DOMAIN_LONG_SEGMENT:"Domain contains dot-separated segment that is too long"},t.code=function(e){return{code:e,error:t.codes[e]}}},9959:(e,t,i)=>{"use strict";const n=i(375),r=i(5752);t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(void 0===e.cidr||"string"==typeof e.cidr,"options.cidr must be a string");const t=e.cidr?e.cidr.toLowerCase():"optional";n(["required","optional","forbidden"].includes(t),"options.cidr must be one of required, optional, forbidden"),n(void 0===e.version||"string"==typeof e.version||Array.isArray(e.version),"options.version must be a string or an array of string");let i=e.version||["ipv4","ipv6","ipvfuture"];Array.isArray(i)||(i=[i]),n(i.length>=1,"options.version must have at least 1 version specified");for(let e=0;e<i.length;++e)n("string"==typeof i[e],"options.version must only contain strings"),i[e]=i[e].toLowerCase(),n(["ipv4","ipv6","ipvfuture"].includes(i[e]),"options.version contains unknown version "+i[e]+" - must be one of ipv4, ipv6, ipvfuture");i=Array.from(new Set(i));const a=`(?:${i.map((e=>{if("forbidden"===t)return r.ip[e];const i=`\\/${"ipv4"===e?r.ip.v4Cidr:r.ip.v6Cidr}`;return"required"===t?`${r.ip[e]}${i}`:`${r.ip[e]}(?:${i})?`})).join("|")})`,s=new RegExp(`^${a}$`);return{cidr:t,versions:i,regex:s,raw:a}}},5752:(e,t,i)=>{"use strict";const n=i(375),r=i(6064),a={generate:function(){const e={},t="\\dA-Fa-f",i="["+t+"]",n="\\w-\\.~",r="!\\$&'\\(\\)\\*\\+,;=",a="%"+t,s=n+a+r+":@",o="["+s+"]",l="(?:0{0,2}\\d|0?[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])";e.ipv4address="(?:"+l+"\\.){3}"+l;const c=i+"{1,4}",u="(?:"+c+":"+c+"|"+e.ipv4address+")",h="(?:"+c+":){6}"+u,d="::(?:"+c+":){5}"+u,f="(?:"+c+")?::(?:"+c+":){4}"+u,p="(?:(?:"+c+":){0,1}"+c+")?::(?:"+c+":){3}"+u,m="(?:(?:"+c+":){0,2}"+c+")?::(?:"+c+":){2}"+u,g="(?:(?:"+c+":){0,3}"+c+")?::"+c+":"+u,v="(?:(?:"+c+":){0,4}"+c+")?::"+u,b="(?:(?:"+c+":){0,5}"+c+")?::"+c,_="(?:(?:"+c+":){0,6}"+c+")?::";e.ipv4Cidr="(?:\\d|[1-2]\\d|3[0-2])",e.ipv6Cidr="(?:0{0,2}\\d|0?[1-9]\\d|1[01]\\d|12[0-8])",e.ipv6address="(?:"+h+"|"+d+"|"+f+"|"+p+"|"+m+"|"+g+"|"+v+"|"+b+"|"+_+")",e.ipvFuture="v"+i+"+\\.["+n+r+":]+",e.scheme="[a-zA-Z][a-zA-Z\\d+-\\.]*",e.schemeRegex=new RegExp(e.scheme);const y="["+n+a+r+":]*",A="["+n+a+r+"]{1,255}",E="(?:\\[(?:"+e.ipv6address+"|"+e.ipvFuture+")\\]|"+e.ipv4address+"|"+A+")",w="(?:"+y+"@)?"+E+"(?::\\d*)?",S="(?:"+y+"@)?("+E+")(?::\\d*)?",T=o+"*",x=o+"+",M="(?:\\/"+T+")*",R="\\/(?:"+x+M+")?",P=x+M,C="["+n+a+r+"@]+"+M,D="(?:\\/\\/\\/"+T+M+")";return e.hierPart="(?:(?:\\/\\/"+w+M+")|"+R+"|"+P+"|"+D+")",e.hierPartCapture="(?:(?:\\/\\/"+S+M+")|"+R+"|"+P+")",e.relativeRef="(?:(?:\\/\\/"+w+M+")|"+R+"|"+C+"|)",e.relativeRefCapture="(?:(?:\\/\\/"+S+M+")|"+R+"|"+C+"|)",e.query="["+s+"\\/\\?]*(?=#|$)",e.queryWithSquareBrackets="["+s+"\\[\\]\\/\\?]*(?=#|$)",e.fragment="["+s+"\\/\\?]*",e}};a.rfc3986=a.generate(),t.ip={v4Cidr:a.rfc3986.ipv4Cidr,v6Cidr:a.rfc3986.ipv6Cidr,ipv4:a.rfc3986.ipv4address,ipv6:a.rfc3986.ipv6address,ipvfuture:a.rfc3986.ipvFuture},a.createRegex=function(e){const t=a.rfc3986,i="(?:\\?"+(e.allowQuerySquareBrackets?t.queryWithSquareBrackets:t.query)+")?(?:#"+t.fragment+")?",s=e.domain?t.relativeRefCapture:t.relativeRef;if(e.relativeOnly)return a.wrap(s+i);let o="";if(e.scheme){n(e.scheme instanceof RegExp||"string"==typeof e.scheme||Array.isArray(e.scheme),"scheme must be a RegExp, String, or Array");const i=[].concat(e.scheme);n(i.length>=1,"scheme must have at least 1 scheme specified");const a=[];for(let e=0;e<i.length;++e){const s=i[e];n(s instanceof RegExp||"string"==typeof s,"scheme at position "+e+" must be a RegExp or String"),s instanceof RegExp?a.push(s.source.toString()):(n(t.schemeRegex.test(s),"scheme at position "+e+" must be a valid scheme"),a.push(r(s)))}o=a.join("|")}const l="(?:"+(o?"(?:"+o+")":t.scheme)+":"+(e.domain?t.hierPartCapture:t.hierPart)+")",c=e.allowRelative?"(?:"+l+"|"+s+")":l;return a.wrap(c+i,o)},a.wrap=function(e,t){return{raw:e=`(?=.)(?!https?:/(?:$|[^/]))(?!https?:///)(?!https?:[^/])${e}`,regex:new RegExp(`^${e}$`),scheme:t}},a.uriRegex=a.createRegex({}),t.regex=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.scheme||e.allowRelative||e.relativeOnly||e.allowQuerySquareBrackets||e.domain?a.createRegex(e):a.uriRegex}},1447:(e,t)=>{"use strict";const i={operators:["!","^","*","/","%","+","-","<","<=",">",">=","==","!=","&&","||","??"],operatorCharacters:["!","^","*","/","%","+","-","<","=",">","&","|","?"],operatorsOrder:[["^"],["*","/","%"],["+","-"],["<","<=",">",">="],["==","!="],["&&"],["||","??"]],operatorsPrefix:["!","n"],literals:{'"':'"',"`":"`","'":"'","[":"]"},numberRx:/^(?:[0-9]*(\.[0-9]*)?){1}$/,tokenRx:/^[\w\$\#\.\@\:\{\}]+$/,symbol:Symbol("formula"),settings:Symbol("settings")};t.Parser=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t[i.settings]&&t.constants)for(const e in t.constants){const i=t.constants[e];if(null!==i&&!["boolean","number","string"].includes(typeof i))throw new Error(`Formula constant ${e} contains invalid ${typeof i} value type`)}this.settings=t[i.settings]?t:Object.assign({[i.settings]:!0,constants:{},functions:{}},t),this.single=null,this._parts=null,this._parse(e)}_parse(e){let n=[],r="",a=0,s=!1;const o=e=>{if(a)throw new Error("Formula missing closing parenthesis");const o=n.length?n[n.length-1]:null;if(s||r||e){if(o&&"reference"===o.type&&")"===e)return o.type="function",o.value=this._subFormula(r,o.value),void(r="");if(")"===e){const e=new t.Parser(r,this.settings);n.push({type:"segment",value:e})}else if(s){if("]"===s)return n.push({type:"reference",value:r}),void(r="");n.push({type:"literal",value:r})}else if(i.operatorCharacters.includes(r))o&&"operator"===o.type&&i.operators.includes(o.value+r)?o.value+=r:n.push({type:"operator",value:r});else if(r.match(i.numberRx))n.push({type:"constant",value:parseFloat(r)});else if(void 0!==this.settings.constants[r])n.push({type:"constant",value:this.settings.constants[r]});else{if(!r.match(i.tokenRx))throw new Error(`Formula contains invalid token: ${r}`);n.push({type:"reference",value:r})}r=""}};for(const t of e)s?t===s?(o(),s=!1):r+=t:a?"("===t?(r+=t,++a):")"===t?(--a,a?r+=t:o(t)):r+=t:t in i.literals?s=i.literals[t]:"("===t?(o(),++a):i.operatorCharacters.includes(t)?(o(),r=t,o()):" "!==t?r+=t:o();o(),n=n.map(((e,t)=>"operator"!==e.type||"-"!==e.value||t&&"operator"!==n[t-1].type?e:{type:"operator",value:"n"}));let l=!1;for(const e of n){if("operator"===e.type){if(i.operatorsPrefix.includes(e.value))continue;if(!l)throw new Error("Formula contains an operator in invalid position");if(!i.operators.includes(e.value))throw new Error(`Formula contains an unknown operator ${e.value}`)}else if(l)throw new Error("Formula missing expected operator");l=!l}if(!l)throw new Error("Formula contains invalid trailing operator");1===n.length&&["reference","literal","constant"].includes(n[0].type)&&(this.single={type:"reference"===n[0].type?"reference":"value",value:n[0].value}),this._parts=n.map((e=>{if("operator"===e.type)return i.operatorsPrefix.includes(e.value)?e:e.value;if("reference"!==e.type)return e.value;if(this.settings.tokenRx&&!this.settings.tokenRx.test(e.value))throw new Error(`Formula contains invalid reference ${e.value}`);return this.settings.reference?this.settings.reference(e.value):i.reference(e.value)}))}_subFormula(e,n){const r=this.settings.functions[n];if("function"!=typeof r)throw new Error(`Formula contains unknown function ${n}`);let a=[];if(e){let t="",r=0,s=!1;const o=()=>{if(!t)throw new Error(`Formula contains function ${n} with invalid arguments ${e}`);a.push(t),t=""};for(let n=0;n<e.length;++n){const a=e[n];s?(t+=a,a===s&&(s=!1)):a in i.literals&&!r?(t+=a,s=i.literals[a]):","!==a||r?(t+=a,"("===a?++r:")"===a&&--r):o()}o()}return a=a.map((e=>new t.Parser(e,this.settings))),function(e){const t=[];for(const i of a)t.push(i.evaluate(e));return r.call(e,...t)}}evaluate(e){const t=this._parts.slice();for(let n=t.length-2;n>=0;--n){const r=t[n];if(r&&"operator"===r.type){const a=t[n+1];t.splice(n+1,1);const s=i.evaluate(a,e);t[n]=i.single(r.value,s)}}return i.operatorsOrder.forEach((n=>{for(let r=1;r<t.length-1;)if(n.includes(t[r])){const n=t[r],a=i.evaluate(t[r-1],e),s=i.evaluate(t[r+1],e);t.splice(r,2);const o=i.calculate(n,a,s);t[r-1]=0===o?0:o}else r+=2})),i.evaluate(t[0],e)}},t.Parser.prototype[i.symbol]=!0,i.reference=function(e){return function(t){return t&&void 0!==t[e]?t[e]:null}},i.evaluate=function(e,t){return null===e?null:"function"==typeof e?e(t):e[i.symbol]?e.evaluate(t):e},i.single=function(e,t){if("!"===e)return!t;const i=-t;return 0===i?0:i},i.calculate=function(e,t,n){if("??"===e)return i.exists(t)?t:n;if("string"==typeof t||"string"==typeof n){if("+"===e)return(t=i.exists(t)?t:"")+(i.exists(n)?n:"")}else switch(e){case"^":return Math.pow(t,n);case"*":return t*n;case"/":return t/n;case"%":return t%n;case"+":return t+n;case"-":return t-n}switch(e){case"<":return t<n;case"<=":return t<=n;case">":return t>n;case">=":return t>=n;case"==":return t===n;case"!=":return t!==n;case"&&":return t&&n;case"||":return t||n}return null},i.exists=function(e){return null!=e}},9926:()=>{},5688:()=>{},9708:()=>{},1152:()=>{},443:()=>{},9848:()=>{},5934:e=>{"use strict";e.exports=JSON.parse('{"version":"17.11.0"}')}},t={},function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,i),a.exports}(5107);var e,t},e.exports=t()},2592:(e,t,i)=>{const n=i(7138),r=i(5115),a=i(6907),s=i(3005);function o(e,t,i,a,s){const o=[].slice.call(arguments,1),l=o.length,c="function"==typeof o[l-1];if(!c&&!n())throw new Error("Callback required as last argument");if(!c){if(l<1)throw new Error("Too few arguments provided");return 1===l?(i=t,t=a=void 0):2!==l||t.getContext||(a=i,i=t,t=void 0),new Promise((function(n,s){try{const s=r.create(i,a);n(e(s,t,a))}catch(e){s(e)}}))}if(l<2)throw new Error("Too few arguments provided");2===l?(s=i,i=t,t=a=void 0):3===l&&(t.getContext&&void 0===s?(s=a,a=void 0):(s=a,a=i,i=t,t=void 0));try{const n=r.create(i,a);s(null,e(n,t,a))}catch(e){s(e)}}t.create=r.create,t.toCanvas=o.bind(null,a.render),t.toDataURL=o.bind(null,a.renderToDataURL),t.toString=o.bind(null,(function(e,t,i){return s.render(e,i)}))},7138:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1845:(e,t,i)=>{const n=i(242).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,i=n(e),r=145===i?26:2*Math.ceil((i-13)/(2*t-2)),a=[i-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-r;return a.push(6),a.reverse()},t.getPositions=function(e){const i=[],n=t.getRowColCoords(e),r=n.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||i.push([n[e],n[t]]);return i}},8260:(e,t,i)=>{const n=i(6910),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=n.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let i=45*r.indexOf(this.data[t]);i+=r.indexOf(this.data[t+1]),e.put(i,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},e.exports=a},7245:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let i=0;i<t;i++)this.putBit(1==(e>>>t-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},3280:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,i,n){const r=e*this.size+t;this.data[r]=i,n&&(this.reservedBit[r]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,i){this.data[e*this.size+t]^=i},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},3424:(e,t,i)=>{const n=i(2378),r=i(6910);function a(e){this.mode=r.BYTE,"string"==typeof e&&(e=n(e)),this.data=new Uint8Array(e)}a.getBitsLength=function(e){return 8*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){for(let t=0,i=this.data.length;t<i;t++)e.put(this.data[t],8)},e.exports=a},5393:(e,t,i)=>{const n=i(4908),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case n.L:return r[4*(e-1)+0];case n.M:return r[4*(e-1)+1];case n.Q:return r[4*(e-1)+2];case n.H:return r[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case n.L:return a[4*(e-1)+0];case n.M:return a[4*(e-1)+1];case n.Q:return a[4*(e-1)+2];case n.H:return a[4*(e-1)+3];default:return}}},4908:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return i}}},6526:(e,t,i)=>{const n=i(242).getSymbolSize;t.getPositions=function(e){const t=n(e);return[[0,0],[t-7,0],[0,t-7]]}},1642:(e,t,i)=>{const n=i(242),r=n.getBCHDigit(1335);t.getEncodedBits=function(e,t){const i=e.bit<<3|t;let a=i<<10;for(;n.getBCHDigit(a)-r>=0;)a^=1335<<n.getBCHDigit(a)-r;return 21522^(i<<10|a)}},9729:(e,t)=>{const i=new Uint8Array(512),n=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)i[t]=e,n[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)i[e]=i[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return n[e]},t.exp=function(e){return i[e]},t.mul=function(e,t){return 0===e||0===t?0:i[n[e]+n[t]]}},5442:(e,t,i)=>{const n=i(6910),r=i(242);function a(e){this.mode=n.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let i=r.toSJIS(this.data[t]);if(i>=33088&&i<=40956)i-=33088;else{if(!(i>=57408&&i<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");i-=49472}i=192*(i>>>8&255)+(255&i),e.put(i,13)}},e.exports=a},7126:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function i(e,i,n){switch(e){case t.Patterns.PATTERN000:return(i+n)%2==0;case t.Patterns.PATTERN001:return i%2==0;case t.Patterns.PATTERN010:return n%3==0;case t.Patterns.PATTERN011:return(i+n)%3==0;case t.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(n/3))%2==0;case t.Patterns.PATTERN101:return i*n%2+i*n%3==0;case t.Patterns.PATTERN110:return(i*n%2+i*n%3)%2==0;case t.Patterns.PATTERN111:return(i*n%3+(i+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let i=0,n=0,r=0,a=null,s=null;for(let o=0;o<t;o++){n=r=0,a=s=null;for(let l=0;l<t;l++){let t=e.get(o,l);t===a?n++:(n>=5&&(i+=n-5+3),a=t,n=1),t=e.get(l,o),t===s?r++:(r>=5&&(i+=r-5+3),s=t,r=1)}n>=5&&(i+=n-5+3),r>=5&&(i+=r-5+3)}return i},t.getPenaltyN2=function(e){const t=e.size;let i=0;for(let n=0;n<t-1;n++)for(let r=0;r<t-1;r++){const t=e.get(n,r)+e.get(n,r+1)+e.get(n+1,r)+e.get(n+1,r+1);4!==t&&0!==t||i++}return 3*i},t.getPenaltyN3=function(e){const t=e.size;let i=0,n=0,r=0;for(let a=0;a<t;a++){n=r=0;for(let s=0;s<t;s++)n=n<<1&2047|e.get(a,s),s>=10&&(1488===n||93===n)&&i++,r=r<<1&2047|e.get(s,a),s>=10&&(1488===r||93===r)&&i++}return 40*i},t.getPenaltyN4=function(e){let t=0;const i=e.data.length;for(let n=0;n<i;n++)t+=e.data[n];return 10*Math.abs(Math.ceil(100*t/i/5)-10)},t.applyMask=function(e,t){const n=t.size;for(let r=0;r<n;r++)for(let a=0;a<n;a++)t.isReserved(a,r)||t.xor(a,r,i(e,a,r))},t.getBestMask=function(e,i){const n=Object.keys(t.Patterns).length;let r=0,a=1/0;for(let s=0;s<n;s++){i(s),t.applyMask(s,e);const n=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(s,e),n<a&&(a=n,r=s)}return r}},6910:(e,t,i)=>{const n=i(3114),r=i(7007);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!n.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return r.testNumeric(e)?t.NUMERIC:r.testAlphanumeric(e)?t.ALPHANUMERIC:r.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,i){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return i}}},1085:(e,t,i)=>{const n=i(6910);function r(e){this.mode=n.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,i,n;for(t=0;t+3<=this.data.length;t+=3)i=this.data.substr(t,3),n=parseInt(i,10),e.put(n,10);const r=this.data.length-t;r>0&&(i=this.data.substr(t),n=parseInt(i,10),e.put(n,3*r+1))},e.exports=r},6143:(e,t,i)=>{const n=i(9729);t.mul=function(e,t){const i=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<t.length;a++)i[r+a]^=n.mul(e[r],t[a]);return i},t.mod=function(e,t){let i=new Uint8Array(e);for(;i.length-t.length>=0;){const e=i[0];for(let r=0;r<t.length;r++)i[r]^=n.mul(t[r],e);let r=0;for(;r<i.length&&0===i[r];)r++;i=i.slice(r)}return i},t.generateECPolynomial=function(e){let i=new Uint8Array([1]);for(let r=0;r<e;r++)i=t.mul(i,new Uint8Array([1,n.exp(r)]));return i}},5115:(e,t,i)=>{const n=i(242),r=i(4908),a=i(7245),s=i(3280),o=i(1845),l=i(6526),c=i(7126),u=i(5393),h=i(2882),d=i(3103),f=i(1642),p=i(6910),m=i(6130);function g(e,t,i){const n=e.size,r=f.getEncodedBits(t,i);let a,s;for(a=0;a<15;a++)s=1==(r>>a&1),a<6?e.set(a,8,s,!0):a<8?e.set(a+1,8,s,!0):e.set(n-15+a,8,s,!0),a<8?e.set(8,n-a-1,s,!0):a<9?e.set(8,15-a-1+1,s,!0):e.set(8,15-a-1,s,!0);e.set(n-8,8,1,!0)}function v(e,t,i,r){let f;if(Array.isArray(e))f=m.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let n=t;if(!n){const t=m.rawSplit(e);n=d.getBestVersionForData(t,i)}f=m.fromString(e,n||40)}}const v=d.getBestVersionForData(f,i);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<v)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+v+".\n")}else t=v;const b=function(e,t,i){const r=new a;i.forEach((function(t){r.put(t.mode.bit,4),r.put(t.getLength(),p.getCharCountIndicator(t.mode,e)),t.write(r)}));const s=8*(n.getSymbolTotalCodewords(e)-u.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=s&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const o=(s-r.getLengthInBits())/8;for(let e=0;e<o;e++)r.put(e%2?17:236,8);return function(e,t,i){const r=n.getSymbolTotalCodewords(t),a=r-u.getTotalCodewordsCount(t,i),s=u.getBlocksCount(t,i),o=s-r%s,l=Math.floor(r/s),c=Math.floor(a/s),d=c+1,f=l-c,p=new h(f);let m=0;const g=new Array(s),v=new Array(s);let b=0;const _=new Uint8Array(e.buffer);for(let e=0;e<s;e++){const t=e<o?c:d;g[e]=_.slice(m,m+t),v[e]=p.encode(g[e]),m+=t,b=Math.max(b,t)}const y=new Uint8Array(r);let A,E,w=0;for(A=0;A<b;A++)for(E=0;E<s;E++)A<g[E].length&&(y[w++]=g[E][A]);for(A=0;A<f;A++)for(E=0;E<s;E++)y[w++]=v[E][A];return y}(r,e,t)}(t,i,f),_=n.getSymbolSize(t),y=new s(_);return function(e,t){const i=e.size,n=l.getPositions(t);for(let t=0;t<n.length;t++){const r=n[t][0],a=n[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1||i<=r+t))for(let n=-1;n<=7;n++)a+n<=-1||i<=a+n||(t>=0&&t<=6&&(0===n||6===n)||n>=0&&n<=6&&(0===t||6===t)||t>=2&&t<=4&&n>=2&&n<=4?e.set(r+t,a+n,!0,!0):e.set(r+t,a+n,!1,!0))}}(y,t),function(e){const t=e.size;for(let i=8;i<t-8;i++){const t=i%2==0;e.set(i,6,t,!0),e.set(6,i,t,!0)}}(y),function(e,t){const i=o.getPositions(t);for(let t=0;t<i.length;t++){const n=i[t][0],r=i[t][1];for(let t=-2;t<=2;t++)for(let i=-2;i<=2;i++)-2===t||2===t||-2===i||2===i||0===t&&0===i?e.set(n+t,r+i,!0,!0):e.set(n+t,r+i,!1,!0)}}(y,t),g(y,i,0),t>=7&&function(e,t){const i=e.size,n=d.getEncodedBits(t);let r,a,s;for(let t=0;t<18;t++)r=Math.floor(t/3),a=t%3+i-8-3,s=1==(n>>t&1),e.set(r,a,s,!0),e.set(a,r,s,!0)}(y,t),function(e,t){const i=e.size;let n=-1,r=i-1,a=7,s=0;for(let o=i-1;o>0;o-=2)for(6===o&&o--;;){for(let i=0;i<2;i++)if(!e.isReserved(r,o-i)){let n=!1;s<t.length&&(n=1==(t[s]>>>a&1)),e.set(r,o-i,n),a--,-1===a&&(s++,a=7)}if(r+=n,r<0||i<=r){r-=n,n=-n;break}}}(y,b),isNaN(r)&&(r=c.getBestMask(y,g.bind(null,y,i))),c.applyMask(r,y),g(y,i,r),{modules:y,version:t,errorCorrectionLevel:i,maskPattern:r,segments:f}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let i,a,s=r.M;return void 0!==t&&(s=r.from(t.errorCorrectionLevel,r.M),i=d.from(t.version),a=c.from(t.maskPattern),t.toSJISFunc&&n.setToSJISFunction(t.toSJISFunc)),v(e,i,s,a)}},2882:(e,t,i)=>{const n=i(6143);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=n.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const i=n.mod(t,this.genPoly),r=this.degree-i.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(i,r),e}return i},e.exports=r},7007:(e,t)=>{const i="[0-9]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+")(?:.|[\r\n]))+";t.KANJI=new RegExp(n,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(r,"g"),t.NUMERIC=new RegExp(i,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return s.test(e)},t.testAlphanumeric=function(e){return o.test(e)}},6130:(e,t,i)=>{const n=i(6910),r=i(1085),a=i(8260),s=i(3424),o=i(5442),l=i(7007),c=i(242),u=i(5987);function h(e){return unescape(encodeURIComponent(e)).length}function d(e,t,i){const n=[];let r;for(;null!==(r=e.exec(i));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function f(e){const t=d(l.NUMERIC,n.NUMERIC,e),i=d(l.ALPHANUMERIC,n.ALPHANUMERIC,e);let r,a;return c.isKanjiModeEnabled()?(r=d(l.BYTE,n.BYTE,e),a=d(l.KANJI,n.KANJI,e)):(r=d(l.BYTE_KANJI,n.BYTE,e),a=[]),t.concat(i,r,a).sort((function(e,t){return e.index-t.index})).map((function(e){return{data:e.data,mode:e.mode,length:e.length}}))}function p(e,t){switch(t){case n.NUMERIC:return r.getBitsLength(e);case n.ALPHANUMERIC:return a.getBitsLength(e);case n.KANJI:return o.getBitsLength(e);case n.BYTE:return s.getBitsLength(e)}}function m(e,t){let i;const l=n.getBestModeForData(e);if(i=n.from(t,l),i!==n.BYTE&&i.bit<l.bit)throw new Error('"'+e+'" cannot be encoded with mode '+n.toString(i)+".\n Suggested mode is: "+n.toString(l));switch(i!==n.KANJI||c.isKanjiModeEnabled()||(i=n.BYTE),i){case n.NUMERIC:return new r(e);case n.ALPHANUMERIC:return new a(e);case n.KANJI:return new o(e);case n.BYTE:return new s(e)}}t.fromArray=function(e){return e.reduce((function(e,t){return"string"==typeof t?e.push(m(t,null)):t.data&&e.push(m(t.data,t.mode)),e}),[])},t.fromString=function(e,i){const r=function(e){const t=[];for(let i=0;i<e.length;i++){const r=e[i];switch(r.mode){case n.NUMERIC:t.push([r,{data:r.data,mode:n.ALPHANUMERIC,length:r.length},{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.ALPHANUMERIC:t.push([r,{data:r.data,mode:n.BYTE,length:r.length}]);break;case n.KANJI:t.push([r,{data:r.data,mode:n.BYTE,length:h(r.data)}]);break;case n.BYTE:t.push([{data:r.data,mode:n.BYTE,length:h(r.data)}])}}return t}(f(e,c.isKanjiModeEnabled())),a=function(e,t){const i={},r={start:{}};let a=["start"];for(let s=0;s<e.length;s++){const o=e[s],l=[];for(let e=0;e<o.length;e++){const c=o[e],u=""+s+e;l.push(u),i[u]={node:c,lastCount:0},r[u]={};for(let e=0;e<a.length;e++){const s=a[e];i[s]&&i[s].node.mode===c.mode?(r[s][u]=p(i[s].lastCount+c.length,c.mode)-p(i[s].lastCount,c.mode),i[s].lastCount+=c.length):(i[s]&&(i[s].lastCount=c.length),r[s][u]=p(c.length,c.mode)+4+n.getCharCountIndicator(c.mode,t))}}a=l}for(let e=0;e<a.length;e++)r[a[e]].end=0;return{map:r,table:i}}(r,i),s=u.find_path(a.map,"start","end"),o=[];for(let e=1;e<s.length-1;e++)o.push(a.table[s[e]].node);return t.fromArray(o.reduce((function(e,t){const i=e.length-1>=0?e[e.length-1]:null;return i&&i.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)}),[]))},t.rawSplit=function(e){return t.fromArray(f(e,c.isKanjiModeEnabled()))}},242:(e,t)=>{let i;const n=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return n[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');i=e},t.isKanjiModeEnabled=function(){return void 0!==i},t.toSJIS=function(e){return i(e)}},3114:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},3103:(e,t,i)=>{const n=i(242),r=i(5393),a=i(4908),s=i(6910),o=i(3114),l=n.getBCHDigit(7973);function c(e,t){return s.getCharCountIndicator(e,t)+4}function u(e,t){let i=0;return e.forEach((function(e){const n=c(e.mode,t);i+=n+e.getBitsLength()})),i}t.from=function(e,t){return o.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,i){if(!o.isValid(e))throw new Error("Invalid QR Code version");void 0===i&&(i=s.BYTE);const a=8*(n.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(i===s.MIXED)return a;const l=a-c(i,e);switch(i){case s.NUMERIC:return Math.floor(l/10*3);case s.ALPHANUMERIC:return Math.floor(l/11*2);case s.KANJI:return Math.floor(l/13);case s.BYTE:default:return Math.floor(l/8)}},t.getBestVersionForData=function(e,i){let n;const r=a.from(i,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,i){for(let n=1;n<=40;n++)if(u(e,n)<=t.getCapacity(n,i,s.MIXED))return n}(e,r);if(0===e.length)return 1;n=e[0]}else n=e;return function(e,i,n){for(let r=1;r<=40;r++)if(i<=t.getCapacity(r,n,e))return r}(n.mode,n.getLength(),r)},t.getEncodedBits=function(e){if(!o.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;n.getBCHDigit(t)-l>=0;)t^=7973<<n.getBCHDigit(t)-l;return e<<12|t}},6907:(e,t,i)=>{const n=i(9653);t.render=function(e,t,i){let r=i,a=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=n.getOptions(r);const s=n.getImageWidth(e.modules.size,r),o=a.getContext("2d"),l=o.createImageData(s,s);return n.qrToImageData(l.data,e,r),function(e,t,i){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=i,t.width=i,t.style.height=i+"px",t.style.width=i+"px"}(o,a,s),o.putImageData(l,0,0),a},t.renderToDataURL=function(e,i,n){let r=n;void 0!==r||i&&i.getContext||(r=i,i=void 0),r||(r={});const a=t.render(e,i,r),s=r.type||"image/png",o=r.rendererOpts||{};return a.toDataURL(s,o.quality)}},3005:(e,t,i)=>{const n=i(9653);function r(e,t){const i=e.a/255,n=t+'="'+e.hex+'"';return i<1?n+" "+t+'-opacity="'+i.toFixed(2).slice(1)+'"':n}function a(e,t,i){let n=e+t;return void 0!==i&&(n+=" "+i),n}t.render=function(e,t,i){const s=n.getOptions(t),o=e.modules.size,l=e.modules.data,c=o+2*s.margin,u=s.color.light.a?"<path "+r(s.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",h="<path "+r(s.color.dark,"stroke")+' d="'+function(e,t,i){let n="",r=0,s=!1,o=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),u=Math.floor(l/t);c||s||(s=!0),e[l]?(o++,l>0&&c>0&&e[l-1]||(n+=s?a("M",c+i,.5+u+i):a("m",r,0),r=0,s=!1),c+1<t&&e[l+1]||(n+=a("h",o),o=0)):r++}return n}(l,o,s.margin)+'"/>',d='viewBox="0 0 '+c+" "+c+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(s.width?'width="'+s.width+'" height="'+s.width+'" ':"")+d+' shape-rendering="crispEdges">'+u+h+"</svg>\n";return"function"==typeof i&&i(null,f),f}},9653:(e,t)=>{function i(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map((function(e){return[e,e]})))),6===t.length&&t.push("F","F");const i=parseInt(t.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:255&i,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:t,color:{dark:i(e.color.dark||"#000000ff"),light:i(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,i){const n=t.getScale(e,i);return Math.floor((e+2*i.margin)*n)},t.qrToImageData=function(e,i,n){const r=i.modules.size,a=i.modules.data,s=t.getScale(r,n),o=Math.floor((r+2*n.margin)*s),l=n.margin*s,c=[n.color.light,n.color.dark];for(let t=0;t<o;t++)for(let i=0;i<o;i++){let u=4*(t*o+i),h=n.color.light;t>=l&&i>=l&&t<o-l&&i<o-l&&(h=c[a[Math.floor((t-l)/s)*r+Math.floor((i-l)/s)]?1:0]),e[u++]=h.r,e[u++]=h.g,e[u++]=h.b,e[u]=h.a}}},3466:function(e){var t;e.exports=((t=function(){function e(e){return r.appendChild(e.dom),e}function i(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";n=e}var n=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",(function(e){e.preventDefault(),i(++n%r.children.length)}),!1);var a=(performance||Date).now(),s=a,o=0,l=e(new t.Panel("FPS","#0ff","#002")),c=e(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new t.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:r,addPanel:e,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){o++;var e=(performance||Date).now();if(c.update(e-a,200),e>s+1e3&&(l.update(1e3*o/(e-s),100),s=e,o=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:i}}).Panel=function(e,t,i){var n=1/0,r=0,a=Math.round,s=a(window.devicePixelRatio||1),o=80*s,l=48*s,c=3*s,u=2*s,h=3*s,d=15*s,f=74*s,p=30*s,m=document.createElement("canvas");m.width=o,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*s+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=i,g.fillRect(0,0,o,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(h,d,f,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h,d,f,p),{dom:m,update:function(l,v){n=Math.min(n,l),r=Math.max(r,l),g.fillStyle=i,g.globalAlpha=1,g.fillRect(0,0,o,d),g.fillStyle=t,g.fillText(a(l)+" "+e+" ("+a(n)+"-"+a(r)+")",c,u),g.drawImage(m,h+s,d,f-s,p,h,d,f-s,p),g.fillRect(h+f-s,d,s,p),g.fillStyle=i,g.globalAlpha=.9,g.fillRect(h+f-s,d,s,a((1-l/v)*p))}}},t)},2238:function(e,t,i){var n;!function(r,a){"use strict";var s="function",o="undefined",l="object",c="string",u="major",h="model",d="name",f="type",p="vendor",m="version",g="architecture",v="console",b="mobile",_="tablet",y="smarttv",A="wearable",E="embedded",w="Amazon",S="Apple",T="ASUS",x="BlackBerry",M="Browser",R="Chrome",P="Firefox",C="Google",D="Huawei",O="LG",k="Microsoft",I="Motorola",N="Opera",L="Samsung",U="Sharp",B="Sony",F="Xiaomi",G="Zebra",V="Facebook",z="Chromium OS",H="Mac OS",j=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},W=function(e,t){return typeof e===c&&-1!==Y(t).indexOf(Y(e))},Y=function(e){return e.toLowerCase()},X=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,500)},Z=function(e,t){for(var i,n,r,o,c,u,h=0;h<t.length&&!c;){var d=t[h],f=t[h+1];for(i=n=0;i<d.length&&!c&&d[i];)if(c=d[i++].exec(e))for(r=0;r<f.length;r++)u=c[++n],typeof(o=f[r])===l&&o.length>0?2===o.length?typeof o[1]==s?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==s||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):a:this[o[0]]=u?o[1].call(this,u,o[2]):a:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):a):this[o]=u||a;h+=2}},q=function(e,t){for(var i in t)if(typeof t[i]===l&&t[i].length>0){for(var n=0;n<t[i].length;n++)if(W(t[i][n],e))return"?"===i?a:i}else if(W(t[i],e))return"?"===i?a:i;return e},Q={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},K={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[d,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[d,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[d,m],[/opios[\/ ]+([\w\.]+)/i],[m,[d,N+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[d,N]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[m,[d,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[d,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[d,"UC"+M]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[m,[d,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[d,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[d,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[d,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[m,[d,"Smart Lenovo "+M]],[/(avast|avg)\/([\w\.]+)/i],[[d,/(.+)/,"$1 Secure "+M],m],[/\bfocus\/([\w\.]+)/i],[m,[d,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[d,N+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[d,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[d,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[d,N+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[d,"MIUI "+M]],[/fxios\/([-\w\.]+)/i],[m,[d,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[d,"360 "+M]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[d,/(.+)/,"$1 "+M],m],[/samsungbrowser\/([\w\.]+)/i],[m,[d,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],m],[/metasr[\/ ]?([\d\.]+)/i],[m,[d,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[d,"Sogou Mobile"],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[d,m],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[d],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[d,V],m],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[d,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[d,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[d,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[d,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[d,R+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[d,"Android "+M]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[d,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[d,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,d],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[d,[m,q,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[d,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[d,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[d,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[d,m],[/(cobalt)\/([\w\.]+)/i],[d,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,Y]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",Y]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,Y]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[h,[p,L],[f,_]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[h,[p,L],[f,b]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[h,[p,S],[f,b]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[h,[p,S],[f,_]],[/(macintosh);/i],[h,[p,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[h,[p,U],[f,b]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[h,[p,D],[f,_]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[h,[p,D],[f,b]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[h,/_/g," "],[p,F],[f,b]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[h,/_/g," "],[p,F],[f,_]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[h,[p,"OPPO"],[f,b]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[h,[p,"Vivo"],[f,b]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[h,[p,"Realme"],[f,b]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[h,[p,I],[f,b]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[h,[p,I],[f,_]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[h,[p,O],[f,_]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[h,[p,O],[f,b]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[h,[p,"Lenovo"],[f,_]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[h,/_/g," "],[p,"Nokia"],[f,b]],[/(pixel c)\b/i],[h,[p,C],[f,_]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[h,[p,C],[f,b]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[h,[p,B],[f,b]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[h,"Xperia Tablet"],[p,B],[f,_]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[h,[p,"OnePlus"],[f,b]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[h,[p,w],[f,_]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[h,/(.+)/g,"Fire Phone $1"],[p,w],[f,b]],[/(playbook);[-\w\),; ]+(rim)/i],[h,p,[f,_]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[h,[p,x],[f,b]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[h,[p,T],[f,_]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[h,[p,T],[f,b]],[/(nexus 9)/i],[h,[p,"HTC"],[f,_]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[p,[h,/_/g," "],[f,b]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[h,[p,"Acer"],[f,_]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[h,[p,"Meizu"],[f,b]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[h,[p,"Ulefone"],[f,b]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[p,h,[f,b]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[p,h,[f,_]],[/(surface duo)/i],[h,[p,k],[f,_]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[h,[p,"Fairphone"],[f,b]],[/(u304aa)/i],[h,[p,"AT&T"],[f,b]],[/\bsie-(\w*)/i],[h,[p,"Siemens"],[f,b]],[/\b(rct\w+) b/i],[h,[p,"RCA"],[f,_]],[/\b(venue[\d ]{2,7}) b/i],[h,[p,"Dell"],[f,_]],[/\b(q(?:mv|ta)\w+) b/i],[h,[p,"Verizon"],[f,_]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[h,[p,"Barnes & Noble"],[f,_]],[/\b(tm\d{3}\w+) b/i],[h,[p,"NuVision"],[f,_]],[/\b(k88) b/i],[h,[p,"ZTE"],[f,_]],[/\b(nx\d{3}j) b/i],[h,[p,"ZTE"],[f,b]],[/\b(gen\d{3}) b.+49h/i],[h,[p,"Swiss"],[f,b]],[/\b(zur\d{3}) b/i],[h,[p,"Swiss"],[f,_]],[/\b((zeki)?tb.*\b) b/i],[h,[p,"Zeki"],[f,_]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[p,"Dragon Touch"],h,[f,_]],[/\b(ns-?\w{0,9}) b/i],[h,[p,"Insignia"],[f,_]],[/\b((nxa|next)-?\w{0,9}) b/i],[h,[p,"NextBook"],[f,_]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[p,"Voice"],h,[f,b]],[/\b(lvtel\-)?(v1[12]) b/i],[[p,"LvTel"],h,[f,b]],[/\b(ph-1) /i],[h,[p,"Essential"],[f,b]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[h,[p,"Envizen"],[f,_]],[/\b(trio[-\w\. ]+) b/i],[h,[p,"MachSpeed"],[f,_]],[/\btu_(1491) b/i],[h,[p,"Rotor"],[f,_]],[/(shield[\w ]+) b/i],[h,[p,"Nvidia"],[f,_]],[/(sprint) (\w+)/i],[p,h,[f,b]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[p,k],[f,b]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[h,[p,G],[f,_]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[h,[p,G],[f,b]],[/smart-tv.+(samsung)/i],[p,[f,y]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[p,L],[f,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[p,O],[f,y]],[/(apple) ?tv/i],[p,[h,S+" TV"],[f,y]],[/crkey/i],[[h,R+"cast"],[p,C],[f,y]],[/droid.+aft(\w+)( bui|\))/i],[h,[p,w],[f,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[h,[p,U],[f,y]],[/(bravia[\w ]+)( bui|\))/i],[h,[p,B],[f,y]],[/(mitv-\w{5}) bui/i],[h,[p,F],[f,y]],[/Hbbtv.*(technisat) (.*);/i],[p,h,[f,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[p,X],[h,X],[f,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[f,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[p,h,[f,v]],[/droid.+; (shield) bui/i],[h,[p,"Nvidia"],[f,v]],[/(playstation [345portablevi]+)/i],[h,[p,B],[f,v]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[h,[p,k],[f,v]],[/((pebble))app/i],[p,h,[f,A]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[h,[p,S],[f,A]],[/droid.+; (glass) \d/i],[h,[p,C],[f,A]],[/droid.+; (wt63?0{2,3})\)/i],[h,[p,G],[f,A]],[/(quest( 2| pro)?)/i],[h,[p,V],[f,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[p,[f,E]],[/(aeobc)\b/i],[h,[p,w],[f,E]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[h,[f,b]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[h,[f,_]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[f,_]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[f,b]],[/(android[-\w\. ]{0,9});.+buil/i],[h,[p,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[d,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,d]],os:[[/microsoft (windows) (vista|xp)/i],[d,m],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[d,[m,q,Q]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[m,q,Q],[d,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[d,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[d,H],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,d],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[d,m],[/\(bb(10);/i],[m,[d,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[d,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[d,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[d,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[d,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[d,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[d,z],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[d,m],[/(sunos) ?([\w\.\d]*)/i],[[d,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[d,m]]},J=function(e,t){if(typeof e===l&&(t=e,e=a),!(this instanceof J))return new J(e,t).getResult();var i=typeof r!==o&&r.navigator?r.navigator:a,n=e||(i&&i.userAgent?i.userAgent:""),v=i&&i.userAgentData?i.userAgentData:a,y=t?function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2==0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i}(K,t):K,A=i&&i.userAgent==n;return this.getBrowser=function(){var e,t={};return t[d]=a,t[m]=a,Z.call(t,n,y.browser),t[u]=typeof(e=t[m])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:a,A&&i&&i.brave&&typeof i.brave.isBrave==s&&(t[d]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,Z.call(e,n,y.cpu),e},this.getDevice=function(){var e={};return e[p]=a,e[h]=a,e[f]=a,Z.call(e,n,y.device),A&&!e[f]&&v&&v.mobile&&(e[f]=b),A&&"Macintosh"==e[h]&&i&&typeof i.standalone!==o&&i.maxTouchPoints&&i.maxTouchPoints>2&&(e[h]="iPad",e[f]=_),e},this.getEngine=function(){var e={};return e[d]=a,e[m]=a,Z.call(e,n,y.engine),e},this.getOS=function(){var e={};return e[d]=a,e[m]=a,Z.call(e,n,y.os),A&&!e[d]&&v&&"Unknown"!=v.platform&&(e[d]=v.platform.replace(/chrome os/i,z).replace(/macos/i,H)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===c&&e.length>500?X(e,500):e,this},this.setUA(n),this};J.VERSION="0.7.37",J.BROWSER=j([d,m,u]),J.CPU=j([g]),J.DEVICE=j([h,p,f,v,b,y,_,A,E]),J.ENGINE=J.OS=j([d,m]),typeof t!==o?(e.exports&&(t=e.exports=J),t.UAParser=J):i.amdO?(n=function(){return J}.call(t,i,t,e))===a||(e.exports=n):typeof r!==o&&(r.UAParser=J);var $=typeof r!==o&&(r.jQuery||r.Zepto);if($&&!$.ua){var ee=new J;$.ua=ee.getResult(),$.ua.get=function(){return ee.getUA()},$.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var i in t)$.ua[i]=t[i]}}}("object"==typeof window?window:this)},1614:(e,t,i)=>{"use strict";var n;i.r(t),i.d(t,{NIL:()=>C,parse:()=>g,stringify:()=>u,v1:()=>m,v3:()=>T,v4:()=>x,v5:()=>P,validate:()=>o,version:()=>D});var r=new Uint8Array(16);function a(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}const s=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,o=function(e){return"string"==typeof e&&s.test(e)};for(var l=[],c=0;c<256;++c)l.push((c+256).toString(16).substr(1));const u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!o(i))throw TypeError("Stringified UUID is invalid");return i};var h,d,f=0,p=0;const m=function(e,t,i){var n=t&&i||0,r=t||new Array(16),s=(e=e||{}).node||h,o=void 0!==e.clockseq?e.clockseq:d;if(null==s||null==o){var l=e.random||(e.rng||a)();null==s&&(s=h=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==o&&(o=d=16383&(l[6]<<8|l[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),m=void 0!==e.nsecs?e.nsecs:p+1,g=c-f+(m-p)/1e4;if(g<0&&void 0===e.clockseq&&(o=o+1&16383),(g<0||c>f)&&void 0===e.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=c,p=m,d=o;var v=(1e4*(268435455&(c+=122192928e5))+m)%4294967296;r[n++]=v>>>24&255,r[n++]=v>>>16&255,r[n++]=v>>>8&255,r[n++]=255&v;var b=c/4294967296*1e4&268435455;r[n++]=b>>>8&255,r[n++]=255&b,r[n++]=b>>>24&15|16,r[n++]=b>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o;for(var _=0;_<6;++_)r[n+_]=s[_];return t||u(r)},g=function(e){if(!o(e))throw TypeError("Invalid UUID");var t,i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i};function v(e,t,i){function n(e,n,r,a){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var s=new Uint8Array(16+e.length);if(s.set(n),s.set(e,n.length),(s=i(s))[6]=15&s[6]|t,s[8]=63&s[8]|128,r){a=a||0;for(var o=0;o<16;++o)r[a+o]=s[o];return r}return u(s)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function b(e){return 14+(e+64>>>9<<4)+1}function _(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function y(e,t,i,n,r,a){return _((s=_(_(t,e),_(n,a)))<<(o=r)|s>>>32-o,i);var s,o}function A(e,t,i,n,r,a,s){return y(t&i|~t&n,e,t,r,a,s)}function E(e,t,i,n,r,a,s){return y(t&n|i&~n,e,t,r,a,s)}function w(e,t,i,n,r,a,s){return y(t^i^n,e,t,r,a,s)}function S(e,t,i,n,r,a,s){return y(i^(t|~n),e,t,r,a,s)}const T=v("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],i=32*e.length,n="0123456789abcdef",r=0;r<i;r+=8){var a=e[r>>5]>>>r%32&255,s=parseInt(n.charAt(a>>>4&15)+n.charAt(15&a),16);t.push(s)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[b(t)-1]=t;for(var i=1732584193,n=-271733879,r=-1732584194,a=271733878,s=0;s<e.length;s+=16){var o=i,l=n,c=r,u=a;i=A(i,n,r,a,e[s],7,-680876936),a=A(a,i,n,r,e[s+1],12,-389564586),r=A(r,a,i,n,e[s+2],17,606105819),n=A(n,r,a,i,e[s+3],22,-1044525330),i=A(i,n,r,a,e[s+4],7,-176418897),a=A(a,i,n,r,e[s+5],12,1200080426),r=A(r,a,i,n,e[s+6],17,-1473231341),n=A(n,r,a,i,e[s+7],22,-45705983),i=A(i,n,r,a,e[s+8],7,1770035416),a=A(a,i,n,r,e[s+9],12,-1958414417),r=A(r,a,i,n,e[s+10],17,-42063),n=A(n,r,a,i,e[s+11],22,-1990404162),i=A(i,n,r,a,e[s+12],7,1804603682),a=A(a,i,n,r,e[s+13],12,-40341101),r=A(r,a,i,n,e[s+14],17,-1502002290),i=E(i,n=A(n,r,a,i,e[s+15],22,1236535329),r,a,e[s+1],5,-165796510),a=E(a,i,n,r,e[s+6],9,-1069501632),r=E(r,a,i,n,e[s+11],14,643717713),n=E(n,r,a,i,e[s],20,-373897302),i=E(i,n,r,a,e[s+5],5,-701558691),a=E(a,i,n,r,e[s+10],9,38016083),r=E(r,a,i,n,e[s+15],14,-660478335),n=E(n,r,a,i,e[s+4],20,-405537848),i=E(i,n,r,a,e[s+9],5,568446438),a=E(a,i,n,r,e[s+14],9,-1019803690),r=E(r,a,i,n,e[s+3],14,-187363961),n=E(n,r,a,i,e[s+8],20,1163531501),i=E(i,n,r,a,e[s+13],5,-1444681467),a=E(a,i,n,r,e[s+2],9,-51403784),r=E(r,a,i,n,e[s+7],14,1735328473),i=w(i,n=E(n,r,a,i,e[s+12],20,-1926607734),r,a,e[s+5],4,-378558),a=w(a,i,n,r,e[s+8],11,-2022574463),r=w(r,a,i,n,e[s+11],16,1839030562),n=w(n,r,a,i,e[s+14],23,-35309556),i=w(i,n,r,a,e[s+1],4,-1530992060),a=w(a,i,n,r,e[s+4],11,1272893353),r=w(r,a,i,n,e[s+7],16,-155497632),n=w(n,r,a,i,e[s+10],23,-1094730640),i=w(i,n,r,a,e[s+13],4,681279174),a=w(a,i,n,r,e[s],11,-358537222),r=w(r,a,i,n,e[s+3],16,-722521979),n=w(n,r,a,i,e[s+6],23,76029189),i=w(i,n,r,a,e[s+9],4,-640364487),a=w(a,i,n,r,e[s+12],11,-421815835),r=w(r,a,i,n,e[s+15],16,530742520),i=S(i,n=w(n,r,a,i,e[s+2],23,-995338651),r,a,e[s],6,-198630844),a=S(a,i,n,r,e[s+7],10,1126891415),r=S(r,a,i,n,e[s+14],15,-1416354905),n=S(n,r,a,i,e[s+5],21,-57434055),i=S(i,n,r,a,e[s+12],6,1700485571),a=S(a,i,n,r,e[s+3],10,-1894986606),r=S(r,a,i,n,e[s+10],15,-1051523),n=S(n,r,a,i,e[s+1],21,-2054922799),i=S(i,n,r,a,e[s+8],6,1873313359),a=S(a,i,n,r,e[s+15],10,-30611744),r=S(r,a,i,n,e[s+6],15,-1560198380),n=S(n,r,a,i,e[s+13],21,1309151649),i=S(i,n,r,a,e[s+4],6,-145523070),a=S(a,i,n,r,e[s+11],10,-1120210379),r=S(r,a,i,n,e[s+2],15,718787259),n=S(n,r,a,i,e[s+9],21,-343485551),i=_(i,o),n=_(n,l),r=_(r,c),a=_(a,u)}return[i,n,r,a]}(function(e){if(0===e.length)return[];for(var t=8*e.length,i=new Uint32Array(b(t)),n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))})),x=function(e,t,i){var n=(e=e||{}).random||(e.rng||a)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return u(n)};function M(e,t,i,n){switch(e){case 0:return t&i^~t&n;case 1:case 3:return t^i^n;case 2:return t&i^t&n^i&n}}function R(e,t){return e<<t|e>>>32-t}const P=v("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var r=0;r<n.length;++r)e.push(n.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var a=e.length/4+2,s=Math.ceil(a/16),o=new Array(s),l=0;l<s;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=e[64*l+4*u]<<24|e[64*l+4*u+1]<<16|e[64*l+4*u+2]<<8|e[64*l+4*u+3];o[l]=c}o[s-1][14]=8*(e.length-1)/Math.pow(2,32),o[s-1][14]=Math.floor(o[s-1][14]),o[s-1][15]=8*(e.length-1)&4294967295;for(var h=0;h<s;++h){for(var d=new Uint32Array(80),f=0;f<16;++f)d[f]=o[h][f];for(var p=16;p<80;++p)d[p]=R(d[p-3]^d[p-8]^d[p-14]^d[p-16],1);for(var m=i[0],g=i[1],v=i[2],b=i[3],_=i[4],y=0;y<80;++y){var A=Math.floor(y/20),E=R(m,5)+M(A,g,v,b)+_+t[A]+d[y]>>>0;_=b,b=v,v=R(g,30)>>>0,g=m,m=E}i[0]=i[0]+m>>>0,i[1]=i[1]+g>>>0,i[2]=i[2]+v>>>0,i[3]=i[3]+b>>>0,i[4]=i[4]+_>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]})),C="00000000-0000-0000-0000-000000000000",D=function(e){if(!o(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},2165:()=>{},5138:()=>{},6125:()=>{},7356:()=>{},7218:(e,t,i)=>{"use strict";function n(e,t){return function(){return e.apply(t,arguments)}}const{toString:r}=Object.prototype,{getPrototypeOf:a}=Object,s=(o=Object.create(null),e=>{const t=r.call(e);return o[t]||(o[t]=t.slice(8,-1).toLowerCase())});var o;const l=e=>(e=e.toLowerCase(),t=>s(t)===e),c=e=>t=>typeof t===e,{isArray:u}=Array,h=c("undefined"),d=l("ArrayBuffer"),f=c("string"),p=c("function"),m=c("number"),g=e=>null!==e&&"object"==typeof e,v=e=>{if("object"!==s(e))return!1;const t=a(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},b=l("Date"),_=l("File"),y=l("Blob"),A=l("FileList"),E=l("URLSearchParams");function w(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let n,r;if("object"!=typeof e&&(e=[e]),u(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),a=r.length;let s;for(n=0;n<a;n++)s=r[n],t.call(null,e[s],s,e)}}function S(e,t){t=t.toLowerCase();const i=Object.keys(e);let n,r=i.length;for(;r-- >0;)if(n=i[r],t===n.toLowerCase())return n;return null}const T="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:i.g,x=e=>!h(e)&&e!==T,M=(R="undefined"!=typeof Uint8Array&&a(Uint8Array),e=>R&&e instanceof R);var R;const P=l("HTMLFormElement"),C=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),D=l("RegExp"),O=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};w(i,((i,r)=>{!1!==t(i,r,e)&&(n[r]=i)})),Object.defineProperties(e,n)},k="abcdefghijklmnopqrstuvwxyz",I="0123456789",N={DIGIT:I,ALPHA:k,ALPHA_DIGIT:k+k.toUpperCase()+I},L=l("AsyncFunction");var U={isArray:u,isArrayBuffer:d,isBuffer:function(e){return null!==e&&!h(e)&&null!==e.constructor&&!h(e.constructor)&&p(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||p(e.append)&&("formdata"===(t=s(e))||"object"===t&&p(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&d(e.buffer),t},isString:f,isNumber:m,isBoolean:e=>!0===e||!1===e,isObject:g,isPlainObject:v,isUndefined:h,isDate:b,isFile:_,isBlob:y,isRegExp:D,isFunction:p,isStream:e=>g(e)&&p(e.pipe),isURLSearchParams:E,isTypedArray:M,isFileList:A,forEach:w,merge:function e(){const{caseless:t}=x(this)&&this||{},i={},n=(n,r)=>{const a=t&&S(i,r)||r;v(i[a])&&v(n)?i[a]=e(i[a],n):v(n)?i[a]=e({},n):u(n)?i[a]=n.slice():i[a]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&w(arguments[e],n);return i},extend:(e,t,i,{allOwnKeys:r}={})=>(w(t,((t,r)=>{i&&p(t)?e[r]=n(t,i):e[r]=t}),{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let r,s,o;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],n&&!n(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==i&&a(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:s,kindOfTest:l,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(u(e))return e;let t=e.length;if(!m(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:P,hasOwnProperty:C,hasOwnProp:C,reduceDescriptors:O,freezeMethods:e=>{O(e,((t,i)=>{if(p(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=e[i];p(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return u(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>(e=+e,Number.isFinite(e)?e:t),findKey:S,global:T,isContextDefined:x,ALPHABET:N,generateString:(e=16,t=N.ALPHA_DIGIT)=>{let i="";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i},isSpecCompliantForm:function(e){return!!(e&&p(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(g(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const r=u(e)?[]:{};return w(e,((e,t)=>{const a=i(e,n+1);!h(a)&&(r[t]=a)})),t[n]=void 0,r}}return e};return i(e,0)},isAsyncFn:L,isThenable:e=>e&&(g(e)||p(e))&&p(e.then)&&p(e.catch)};function B(e,t,i,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),r&&(this.response=r)}U.inherits(B,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:U.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const F=B.prototype,G={};function V(e){return U.isPlainObject(e)||U.isArray(e)}function z(e){return U.endsWith(e,"[]")?e.slice(0,-2):e}function H(e,t,i){return e?e.concat(t).map((function(e,t){return e=z(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{G[e]={value:e}})),Object.defineProperties(B,G),Object.defineProperty(F,"isAxiosError",{value:!0}),B.from=(e,t,i,n,r,a)=>{const s=Object.create(F);return U.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),B.call(s,e.message,t,i,n,r),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const j=U.toFlatObject(U,{},null,(function(e){return/^is[A-Z]/.test(e)}));function W(e,t,i){if(!U.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(i=U.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!U.isUndefined(t[e])}))).metaTokens,r=i.visitor||c,a=i.dots,s=i.indexes,o=(i.Blob||"undefined"!=typeof Blob&&Blob)&&U.isSpecCompliantForm(t);if(!U.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(U.isDate(e))return e.toISOString();if(!o&&U.isBlob(e))throw new B("Blob is not supported. Use a Buffer instead.");return U.isArrayBuffer(e)||U.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,r){let o=e;if(e&&!r&&"object"==typeof e)if(U.endsWith(i,"{}"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(U.isArray(e)&&function(e){return U.isArray(e)&&!e.some(V)}(e)||(U.isFileList(e)||U.endsWith(i,"[]"))&&(o=U.toArray(e)))return i=z(i),o.forEach((function(e,n){!U.isUndefined(e)&&null!==e&&t.append(!0===s?H([i],n,a):null===s?i:i+"[]",l(e))})),!1;return!!V(e)||(t.append(H(r,i,a),l(e)),!1)}const u=[],h=Object.assign(j,{defaultVisitor:c,convertValue:l,isVisitable:V});if(!U.isObject(e))throw new TypeError("data must be an object");return function e(i,n){if(!U.isUndefined(i)){if(-1!==u.indexOf(i))throw Error("Circular reference detected in "+n.join("."));u.push(i),U.forEach(i,(function(i,a){!0===(!(U.isUndefined(i)||null===i)&&r.call(t,i,U.isString(a)?a.trim():a,n,h))&&e(i,n?n.concat(a):[a])})),u.pop()}}(e),t}function Y(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function X(e,t){this._pairs=[],e&&W(e,this,t)}const Z=X.prototype;function q(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Q(e,t,i){if(!t)return e;const n=i&&i.encode||q,r=i&&i.serialize;let a;if(a=r?r(t,i):U.isURLSearchParams(t)?t.toString():new X(t,i).toString(n),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}Z.append=function(e,t){this._pairs.push([e,t])},Z.toString=function(e){const t=e?function(t){return e.call(this,t,Y)}:Y;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var K=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){U.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},J={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:X,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let e;return("undefined"==typeof navigator||"ReactNative"!==(e=navigator.product)&&"NativeScript"!==e&&"NS"!==e)&&"undefined"!=typeof window&&"undefined"!=typeof document})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function ee(e){function t(e,i,n,r){let a=e[r++];const s=Number.isFinite(+a),o=r>=e.length;return a=!a&&U.isArray(n)?n.length:a,o?(U.hasOwnProp(n,a)?n[a]=[n[a],i]:n[a]=i,!s):(n[a]&&U.isObject(n[a])||(n[a]=[]),t(e,i,n[a],r)&&U.isArray(n[a])&&(n[a]=function(e){const t={},i=Object.keys(e);let n;const r=i.length;let a;for(n=0;n<r;n++)a=i[n],t[a]=e[a];return t}(n[a])),!s)}if(U.isFormData(e)&&U.isFunction(e.entries)){const i={};return U.forEachEntry(e,((e,n)=>{t(function(e){return U.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,i,0)})),i}return null}const te={"Content-Type":void 0},ie={transitional:J,adapter:["xhr","http"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,r=U.isObject(e);if(r&&U.isHTMLForm(e)&&(e=new FormData(e)),U.isFormData(e))return n&&n?JSON.stringify(ee(e)):e;if(U.isArrayBuffer(e)||U.isBuffer(e)||U.isStream(e)||U.isFile(e)||U.isBlob(e))return e;if(U.isArrayBufferView(e))return e.buffer;if(U.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return W(e,new $.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return $.isNode&&U.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((a=U.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return W(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||n?(t.setContentType("application/json",!1),function(e,t,i){if(U.isString(e))try{return(0,JSON.parse)(e),U.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ie.transitional,i=t&&t.forcedJSONParsing,n="json"===this.responseType;if(e&&U.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw B.from(e,B.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$.classes.FormData,Blob:$.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};U.forEach(["delete","get","head"],(function(e){ie.headers[e]={}})),U.forEach(["post","put","patch"],(function(e){ie.headers[e]=U.merge(te)}));var ne=ie;const re=U.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ae=Symbol("internals");function se(e){return e&&String(e).trim().toLowerCase()}function oe(e){return!1===e||null==e?e:U.isArray(e)?e.map(oe):String(e)}function le(e,t,i,n,r){return U.isFunction(n)?n.call(this,t,i):(r&&(t=i),U.isString(t)?U.isString(n)?-1!==t.indexOf(n):U.isRegExp(n)?n.test(t):void 0:void 0)}class ce{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function r(e,t,i){const r=se(t);if(!r)throw new Error("header name must be a non-empty string");const a=U.findKey(n,r);(!a||void 0===n[a]||!0===i||void 0===i&&!1!==n[a])&&(n[a||t]=oe(e))}const a=(e,t)=>U.forEach(e,((e,i)=>r(e,i,t)));return U.isPlainObject(e)||e instanceof this.constructor?a(e,t):U.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim())?a((e=>{const t={};let i,n,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),i=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!i||t[i]&&re[i]||("set-cookie"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)})),t})(e),t):null!=e&&r(t,e,i),this}get(e,t){if(e=se(e)){const i=U.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(U.isFunction(t))return t.call(this,e,i);if(U.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=se(e)){const i=U.findKey(this,e);return!(!i||void 0===this[i]||t&&!le(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function r(e){if(e=se(e)){const r=U.findKey(i,e);!r||t&&!le(0,i[r],r,t)||(delete i[r],n=!0)}}return U.isArray(e)?e.forEach(r):r(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const r=t[i];e&&!le(0,this[r],r,e,!0)||(delete this[r],n=!0)}return n}normalize(e){const t=this,i={};return U.forEach(this,((n,r)=>{const a=U.findKey(i,r);if(a)return t[a]=oe(n),void delete t[r];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(r):String(r).trim();s!==r&&delete t[r],t[s]=oe(n),i[s]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return U.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&U.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach((e=>i.set(e))),i}static accessor(e){const t=(this[ae]=this[ae]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=se(e);t[n]||(function(e,t){const i=U.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,r){return this[n].call(this,t,e,i,r)},configurable:!0})}))}(i,e),t[n]=!0)}return U.isArray(e)?e.forEach(n):n(e),this}}ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),U.freezeMethods(ce.prototype),U.freezeMethods(ce);var ue=ce;function he(e,t){const i=this||ne,n=t||i,r=ue.from(n.headers);let a=n.data;return U.forEach(e,(function(e){a=e.call(i,a,r.normalize(),t?t.status:void 0)})),r.normalize(),a}function de(e){return!(!e||!e.__CANCEL__)}function fe(e,t,i){B.call(this,null==e?"canceled":e,B.ERR_CANCELED,t,i),this.name="CanceledError"}U.inherits(fe,B,{__CANCEL__:!0});var pe=$.isStandardBrowserEnv?{write:function(e,t,i,n,r,a){const s=[];s.push(e+"="+encodeURIComponent(t)),U.isNumber(i)&&s.push("expires="+new Date(i).toGMTString()),U.isString(n)&&s.push("path="+n),U.isString(r)&&s.push("domain="+r),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function me(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var ge=$.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let i;function n(i){let n=i;return e&&(t.setAttribute("href",n),n=t.href),t.setAttribute("href",n),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return i=n(window.location.href),function(e){const t=U.isString(e)?n(e):e;return t.protocol===i.protocol&&t.host===i.host}}():function(){return!0};function ve(e,t){let i=0;const n=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let r,a=0,s=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=n[s];r||(r=l),i[a]=o,n[a]=l;let u=s,h=0;for(;u!==a;)h+=i[u++],u%=e;if(a=(a+1)%e,a===s&&(s=(s+1)%e),l-r<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}(50,250);return r=>{const a=r.loaded,s=r.lengthComputable?r.total:void 0,o=a-i,l=n(o);i=a;const c={loaded:a,total:s,progress:s?a/s:void 0,bytes:o,rate:l||void 0,estimated:l&&s&&a<=s?(s-a)/l:void 0,event:r};c[t?"download":"upload"]=!0,e(c)}}const be={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){let n=e.data;const r=ue.from(e.headers).normalize(),a=e.responseType;let s;function o(){e.cancelToken&&e.cancelToken.unsubscribe(s),e.signal&&e.signal.removeEventListener("abort",s)}U.isFormData(n)&&($.isStandardBrowserEnv||$.isStandardBrowserWebWorkerEnv?r.setContentType(!1):r.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(e.auth){const t=e.auth.username||"",i=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";r.set("Authorization","Basic "+btoa(t+":"+i))}const c=me(e.baseURL,e.url);function u(){if(!l)return;const n=ue.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new B("Request failed with status code "+i.status,[B.ERR_BAD_REQUEST,B.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}((function(e){t(e),o()}),(function(e){i(e),o()}),{data:a&&"text"!==a&&"json"!==a?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:e,request:l}),l=null}if(l.open(e.method.toUpperCase(),Q(c,e.params,e.paramsSerializer),!0),l.timeout=e.timeout,"onloadend"in l?l.onloadend=u:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(u)},l.onabort=function(){l&&(i(new B("Request aborted",B.ECONNABORTED,e,l)),l=null)},l.onerror=function(){i(new B("Network Error",B.ERR_NETWORK,e,l)),l=null},l.ontimeout=function(){let t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const n=e.transitional||J;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(new B(t,n.clarifyTimeoutError?B.ETIMEDOUT:B.ECONNABORTED,e,l)),l=null},$.isStandardBrowserEnv){const t=(e.withCredentials||ge(c))&&e.xsrfCookieName&&pe.read(e.xsrfCookieName);t&&r.set(e.xsrfHeaderName,t)}void 0===n&&r.setContentType(null),"setRequestHeader"in l&&U.forEach(r.toJSON(),(function(e,t){l.setRequestHeader(t,e)})),U.isUndefined(e.withCredentials)||(l.withCredentials=!!e.withCredentials),a&&"json"!==a&&(l.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&l.addEventListener("progress",ve(e.onDownloadProgress,!0)),"function"==typeof e.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",ve(e.onUploadProgress)),(e.cancelToken||e.signal)&&(s=t=>{l&&(i(!t||t.type?new fe(null,e,l):t),l.abort(),l=null)},e.cancelToken&&e.cancelToken.subscribe(s),e.signal&&(e.signal.aborted?s():e.signal.addEventListener("abort",s)));const h=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(c);h&&-1===$.protocols.indexOf(h)?i(new B("Unsupported protocol "+h+":",B.ERR_BAD_REQUEST,e)):l.send(n||null)}))}};U.forEach(be,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));function _e(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new fe(null,e)}function ye(e){return _e(e),e.headers=ue.from(e.headers),e.data=he.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),(e=>{e=U.isArray(e)?e:[e];const{length:t}=e;let i,n;for(let r=0;r<t&&(i=e[r],!(n=U.isString(i)?be[i.toLowerCase()]:i));r++);if(!n){if(!1===n)throw new B(`Adapter ${i} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(U.hasOwnProp(be,i)?`Adapter '${i}' is not available in the build`:`Unknown adapter '${i}'`)}if(!U.isFunction(n))throw new TypeError("adapter is not a function");return n})(e.adapter||ne.adapter)(e).then((function(t){return _e(e),t.data=he.call(e,e.transformResponse,t),t.headers=ue.from(t.headers),t}),(function(t){return de(t)||(_e(e),t&&t.response&&(t.response.data=he.call(e,e.transformResponse,t.response),t.response.headers=ue.from(t.response.headers))),Promise.reject(t)}))}const Ae=e=>e instanceof ue?e.toJSON():e;function Ee(e,t){t=t||{};const i={};function n(e,t,i){return U.isPlainObject(e)&&U.isPlainObject(t)?U.merge.call({caseless:i},e,t):U.isPlainObject(t)?U.merge({},t):U.isArray(t)?t.slice():t}function r(e,t,i){return U.isUndefined(t)?U.isUndefined(e)?void 0:n(void 0,e,i):n(e,t,i)}function a(e,t){if(!U.isUndefined(t))return n(void 0,t)}function s(e,t){return U.isUndefined(t)?U.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function o(i,r,a){return a in t?n(i,r):a in e?n(void 0,i):void 0}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(e,t)=>r(Ae(e),Ae(t),!0)};return U.forEach(Object.keys(Object.assign({},e,t)),(function(n){const a=l[n]||r,s=a(e[n],t[n],n);U.isUndefined(s)&&a!==o||(i[n]=s)})),i}const we={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{we[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const Se={};we.transitional=function(e,t,i){function n(e,t){return"[Axios v1.4.0] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,r,a)=>{if(!1===e)throw new B(n(r," has been removed"+(t?" in "+t:"")),B.ERR_DEPRECATED);return t&&!Se[r]&&(Se[r]=!0,console.warn(n(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,r,a)}};var Te={assertOptions:function(e,t,i){if("object"!=typeof e)throw new B("options must be an object",B.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let r=n.length;for(;r-- >0;){const a=n[r],s=t[a];if(s){const t=e[a],i=void 0===t||s(t,a,e);if(!0!==i)throw new B("option "+a+" must be "+i,B.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new B("Unknown option "+a,B.ERR_BAD_OPTION)}},validators:we};const xe=Te.validators;class Me{constructor(e){this.defaults=e,this.interceptors={request:new K,response:new K}}request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Ee(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:r}=t;let a;void 0!==i&&Te.assertOptions(i,{silentJSONParsing:xe.transitional(xe.boolean),forcedJSONParsing:xe.transitional(xe.boolean),clarifyTimeoutError:xe.transitional(xe.boolean)},!1),null!=n&&(U.isFunction(n)?t.paramsSerializer={serialize:n}:Te.assertOptions(n,{encode:xe.function,serialize:xe.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase(),a=r&&U.merge(r.common,r[t.method]),a&&U.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=ue.concat(a,r);const s=[];let o=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!o){const e=[ye.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=s.length;let d=t;for(h=0;h<u;){const e=s[h++],t=s[h++];try{d=e(d)}catch(e){t.call(this,e);break}}try{c=ye.call(this,d)}catch(e){return Promise.reject(e)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Q(me((e=Ee(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}U.forEach(["delete","get","head","options"],(function(e){Me.prototype[e]=function(t,i){return this.request(Ee(i||{},{method:e,url:t,data:(i||{}).data}))}})),U.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,r){return this.request(Ee(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}Me.prototype[e]=t(),Me.prototype[e+"Form"]=t(!0)}));var Re=Me;class Pe{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,r){i.reason||(i.reason=new fe(e,n,r),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;return{token:new Pe((function(t){e=t})),cancel:e}}}var Ce=Pe;const De={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(De).forEach((([e,t])=>{De[t]=e}));var Oe=De;const ke=function e(t){const i=new Re(t),r=n(Re.prototype.request,i);return U.extend(r,Re.prototype,i,{allOwnKeys:!0}),U.extend(r,i,null,{allOwnKeys:!0}),r.create=function(i){return e(Ee(t,i))},r}(ne);ke.Axios=Re,ke.CanceledError=fe,ke.CancelToken=Ce,ke.isCancel=de,ke.VERSION="1.4.0",ke.toFormData=W,ke.AxiosError=B,ke.Cancel=ke.CanceledError,ke.all=function(e){return Promise.all(e)},ke.spread=function(e){return function(t){return e.apply(null,t)}},ke.isAxiosError=function(e){return U.isObject(e)&&!0===e.isAxiosError},ke.mergeConfig=Ee,ke.AxiosHeaders=ue,ke.formToJSON=e=>ee(U.isHTMLForm(e)?new FormData(e):e),ke.HttpStatusCode=Oe,ke.default=ke,e.exports=ke},1704:(e,t,i)=>{"use strict";var n,r=Object.defineProperty,a=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.prototype.hasOwnProperty,l={};((e,t)=>{for(var i in t)r(e,i,{get:t[i],enumerable:!0})})(l,{AdaptiveLuminanceMaterial:()=>m,AdaptiveLuminancePass:()=>ze,BlendFunction:()=>y,BlendMode:()=>Vt,BloomEffect:()=>Wt,BlurPass:()=>ht,BokehEffect:()=>Xt,BokehMaterial:()=>v,BoxBlurMaterial:()=>Q,BoxBlurPass:()=>je,BrightnessContrastEffect:()=>qt,ChromaticAberrationEffect:()=>ei,CircleOfConfusionMaterial:()=>J,ClearMaskPass:()=>We,ClearPass:()=>Xe,ColorAverageEffect:()=>Qt,ColorChannel:()=>A,ColorDepthEffect:()=>Jt,ColorEdgesMaterial:()=>me,ConvolutionMaterial:()=>te,CopyMaterial:()=>ne,CopyPass:()=>Ve,DepthComparisonMaterial:()=>ae,DepthCopyMaterial:()=>oe,DepthCopyMode:()=>x,DepthCopyPass:()=>tt,DepthDownsamplingMaterial:()=>ce,DepthDownsamplingPass:()=>Je,DepthEffect:()=>ti,DepthMaskMaterial:()=>he,DepthOfFieldEffect:()=>ni,DepthPass:()=>Qe,DepthPickingPass:()=>nt,DepthSavePass:()=>tt,DepthTestStrategy:()=>M,DisplayP3ColorSpace:()=>T,Disposable:()=>u,DotScreenEffect:()=>ai,DownsamplingMaterial:()=>fe,EdgeDetectionMaterial:()=>me,EdgeDetectionMode:()=>R,Effect:()=>jt,EffectAttribute:()=>P,EffectComposer:()=>Tt,EffectMaterial:()=>ve,EffectPass:()=>ot,EffectShaderData:()=>xt,EffectShaderSection:()=>C,FXAAEffect:()=>si,GammaCorrectionEffect:()=>li,GaussKernel:()=>Rt,GaussianBlurMaterial:()=>_e,GaussianBlurPass:()=>ct,GlitchEffect:()=>Ji,GlitchMode:()=>D,GodRaysEffect:()=>nn,GodRaysMaterial:()=>Ae,GridEffect:()=>an,HueSaturationEffect:()=>on,ImmutableTimer:()=>Pt,Initializable:()=>Ct,KawaseBlurMaterial:()=>te,KawaseBlurPass:()=>ht,KernelSize:()=>O,LUT1DEffect:()=>hn,LUT3DEffect:()=>fn,LUT3dlLoader:()=>Xn,LUTCubeLoader:()=>qn,LUTEffect:()=>fn,LUTOperation:()=>k,LambdaPass:()=>dt,LensDistortionEffect:()=>cn,LinearSRGBColorSpace:()=>S,LookupTexture:()=>pi,LookupTexture3D:()=>pi,LuminanceMaterial:()=>we,LuminancePass:()=>pt,MaskFunction:()=>I,MaskMaterial:()=>Te,MaskPass:()=>mt,MipmapBlurPass:()=>vt,NoColorSpace:()=>E,NoiseEffect:()=>pn,NoiseTexture:()=>qi,NormalPass:()=>_t,OutlineEdgesMaterial:()=>Me,OutlineEffect:()=>gn,OutlineMaterial:()=>Me,OverrideMaterialManager:()=>kt,Pass:()=>Ge,PixelationEffect:()=>bn,PredicationMode:()=>N,RawImageData:()=>di,RealisticBokehEffect:()=>yn,RenderPass:()=>qe,Resizable:()=>It,Resizer:()=>Ut,Resolution:()=>Ut,SMAAAreaImageData:()=>Fi,SMAAEffect:()=>Nn,SMAAImageGenerator:()=>Vi,SMAAImageLoader:()=>Kn,SMAAPreset:()=>L,SMAASearchImageData:()=>Xi,SMAAWeightsMaterial:()=>Pe,SRGBColorSpace:()=>w,SSAOEffect:()=>Un,SSAOMaterial:()=>De,SavePass:()=>Ve,ScanlineEffect:()=>En,Section:()=>C,Selection:()=>Bt,SelectiveBloomEffect:()=>Pn,SepiaEffect:()=>Dn,ShaderPass:()=>At,ShockWaveEffect:()=>Mn,TetrahedralUpscaler:()=>Ai,TextureEffect:()=>Fn,TiltShiftBlurMaterial:()=>ke,TiltShiftBlurPass:()=>Et,TiltShiftEffect:()=>Vn,Timer:()=>St,ToneMappingEffect:()=>Hn,ToneMappingMode:()=>U,UpsamplingMaterial:()=>Ne,VignetteEffect:()=>Wn,VignetteTechnique:()=>B,WebGLExtension:()=>F,version:()=>c}),e.exports=(n=l,((e,t,i,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of s(t))o.call(e,i)||undefined===i||r(e,i,{get:()=>t[i],enumerable:!(n=a(t,i))||n.enumerable});return e})(r({},"__esModule",{value:!0}),n));var c="6.33.1",u=class{dispose(){}},h=i(5232),d=i(5232),f=i(5232),p="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",m=class extends f.ShaderMaterial{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new f.Uniform(null),luminanceBuffer1:new f.Uniform(null),minLuminance:new f.Uniform(.01),deltaTime:new f.Uniform(0),tau:new f.Uniform(1)},extensions:{shaderTextureLOD:!0},blending:f.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\nuniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));\n#if __VERSION__ < 300\nfloat l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#else\nfloat l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;\n#endif\nl0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}",vertexShader:p})}set luminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}setLuminanceBuffer0(e){this.uniforms.luminanceBuffer0.value=e}set luminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}setLuminanceBuffer1(e){this.uniforms.luminanceBuffer1.value=e}set mipLevel1x1(e){this.defines.MIP_LEVEL_1X1=e.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(e){this.mipLevel1x1=e}set deltaTime(e){this.uniforms.deltaTime.value=e}setDeltaTime(e){this.uniforms.deltaTime.value=e}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(e){this.uniforms.minLuminance.value=e}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(e){this.uniforms.minLuminance.value=e}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(e){this.uniforms.tau.value=e}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(e){this.uniforms.tau.value=e}},g=i(5232),v=class extends g.ShaderMaterial{constructor(e=!1,t=!1){super({name:"BokehMaterial",defines:{PASS:e?"2":"1"},uniforms:{inputBuffer:new g.Uniform(null),cocBuffer:new g.Uniform(null),texelSize:new g.Uniform(new g.Vector2),kernel64:new g.Uniform(null),kernel16:new g.Uniform(null),scale:new g.Uniform(1)},blending:g.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;\n#else\nfloat coc=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);\n#else\nvec2 step=texelSize*coc;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",vertexShader:p}),t&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set cocBuffer(e){this.uniforms.cocBuffer.value=e}setCoCBuffer(e){this.uniforms.cocBuffer.value=e}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(e){return this.scale}setScale(e){this.scale=e}generateKernel(){const e=new Float64Array(128),t=new Float64Array(32);let i=0,n=0;for(let r=0,a=Math.sqrt(80);r<80;++r){const s=2.39996323*r,o=Math.sqrt(r)/a,l=o*Math.cos(s),c=o*Math.sin(s);r%5==0?(t[n++]=l,t[n++]=c):(e[i++]=l,e[i++]=c)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},b=i(5232),_=i(5232),y={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},A={RED:0,GREEN:1,BLUE:2,ALPHA:3},E="",w="srgb",S="srgb-linear",T="display-p3",x={FULL:0,SINGLE:1},M={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},R={DEPTH:0,LUMA:1,COLOR:2},P={NONE:0,DEPTH:1,CONVOLUTION:2},C={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},D={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},O={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},k={SCALE_UP:"lut.scaleup"},I={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},N={DISABLED:0,DEPTH:1,CUSTOM:2},L={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},U={REINHARD:0,REINHARD2:1,REINHARD2_ADAPTIVE:2,OPTIMIZED_CINEON:3,ACES_FILMIC:4,UNCHARTED2:5},B={DEFAULT:0,ESKIL:1},F={DERIVATIVES:"derivatives",FRAG_DEPTH:"fragDepth",DRAW_BUFFERS:"drawBuffers",SHADER_TEXTURE_LOD:"shaderTextureLOD"},G=Number(_.REVISION.replace(/\D+/g,"")),V=G>=152,z=new Map([[_.LinearEncoding,S],[_.sRGBEncoding,w]]),H=new Map([[S,_.LinearEncoding],[w,_.sRGBEncoding]]);function j(e){return null===e?null:V?e.outputColorSpace:z.get(e.outputEncoding)}function W(e,t){null!==e&&(V?e.colorSpace=t:e.encoding=H.get(t))}function Y(e,t){null!==e&&null!==t&&(V?t.colorSpace=e.colorSpace:t.encoding=e.encoding)}function X(e){return G<154?e.replace("colorspace_fragment","encodings_fragment"):e}function Z(e,t,i){return e*(t-i)-t}function q(e,t,i){return Math.min(Math.max((e+t)/(t-i),0),1)}var Q=class extends b.ShaderMaterial{constructor({bilateral:e=!1,kernelSize:t=5}={}){super({name:"BoxBlurMaterial",defines:{DEPTH_PACKING:"0",DISTANCE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new b.Uniform(null),depthBuffer:new b.Uniform(null),normalDepthBuffer:new b.Uniform(null),texelSize:new b.Uniform(new b.Vector2),cameraNearFar:new b.Uniform(new b.Vector2),scale:new b.Uniform(1)},blending:b.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef BILATERAL\n#include <packing>\nuniform vec2 cameraNearFar;\n#ifdef NORMAL_DEPTH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\n#else\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}\n#endif\nfloat getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#endif\n}\n#ifdef PERSPECTIVE_CAMERA\n#define linearDepth(v) viewZToOrthographicDepth(getViewZ(readDepth(v)), cameraNearFar.x, cameraNearFar.y)\n#else\n#define linearDepth(v) readDepth(v)\n#endif\n#endif\n#define getTexel(v) texture2D(inputBuffer, v)\n#if KERNEL_SIZE == 3\nvarying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\nvarying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;\n#else\nuniform vec2 texelSize;uniform float scale;varying vec2 vUv;\n#endif\nvoid main(){\n#if KERNEL_SIZE == 3\nvec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08));\n#ifdef BILATERAL\nfloat z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08));\n#endif\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\nvec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08),getTexel(vUv09),getTexel(vUv10),getTexel(vUv11),getTexel(vUv12),getTexel(vUv13),getTexel(vUv14),getTexel(vUv15),getTexel(vUv16),getTexel(vUv17),getTexel(vUv18),getTexel(vUv19),getTexel(vUv20),getTexel(vUv21),getTexel(vUv22),getTexel(vUv23),getTexel(vUv24));\n#ifdef BILATERAL\nfloat z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08),linearDepth(vUv09),linearDepth(vUv10),linearDepth(vUv11),linearDepth(vUv12),linearDepth(vUv13),linearDepth(vUv14),linearDepth(vUv15),linearDepth(vUv16),linearDepth(vUv17),linearDepth(vUv18),linearDepth(vUv19),linearDepth(vUv20),linearDepth(vUv21),linearDepth(vUv22),linearDepth(vUv23),linearDepth(vUv24));\n#endif\n#endif\nvec4 result=vec4(0.0);\n#ifdef BILATERAL\nfloat w=0.0;\n#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)\nfloat centerDepth=z[KERNEL_SIZE_SQ_HALF];for(int i=0;i<KERNEL_SIZE_SQ;++i){float d=step(abs(z[i]-centerDepth),DISTANCE_THRESHOLD);result+=c[i]*d;w+=d;}\n#else\nfloat centerDepth=linearDepth(vUv);vec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){vec2 coords=vUv+vec2(x,y)*s;vec4 c=getTexel(coords);float z=(x==0&&y==0)?centerDepth:linearDepth(coords);float d=step(abs(z-centerDepth),DISTANCE_THRESHOLD);result+=c*d;w+=d;}}\n#endif\ngl_FragColor=result/max(w,1.0);\n#else\n#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)\nfor(int i=0;i<KERNEL_SIZE_SQ;++i){result+=c[i];}\n#else\nvec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){result+=getTexel(uv+vec2(x,y)*s);}}\n#endif\ngl_FragColor=result*INV_KERNEL_SIZE_SQ;\n#endif\n}",vertexShader:"uniform vec2 texelSize;uniform float scale;\n#if KERNEL_SIZE == 3\nvarying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;\n#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13\nvarying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;\n#else\nvarying vec2 vUv;\n#endif\nvoid main(){vec2 uv=position.xy*0.5+0.5;\n#if KERNEL_SIZE == 3\nvec2 s=texelSize*scale;vUv00=uv+s*vec2(-1.0,-1.0);vUv01=uv+s*vec2(0.0,-1.0);vUv02=uv+s*vec2(1.0,-1.0);vUv03=uv+s*vec2(-1.0,0.0);vUv04=uv;vUv05=uv+s*vec2(1.0,0.0);vUv06=uv+s*vec2(-1.0,1.0);vUv07=uv+s*vec2(0.0,1.0);vUv08=uv+s*vec2(1.0,1.0);\n#elif KERNEL_SIZE == 5\nvec2 s=texelSize*scale;vUv00=uv+s*vec2(-2.0,-2.0);vUv01=uv+s*vec2(-1.0,-2.0);vUv02=uv+s*vec2(0.0,-2.0);vUv03=uv+s*vec2(1.0,-2.0);vUv04=uv+s*vec2(2.0,-2.0);vUv05=uv+s*vec2(-2.0,-1.0);vUv06=uv+s*vec2(-1.0,-1.0);vUv07=uv+s*vec2(0.0,-1.0);vUv08=uv+s*vec2(1.0,-1.0);vUv09=uv+s*vec2(2.0,-1.0);vUv10=uv+s*vec2(-2.0,0.0);vUv11=uv+s*vec2(-1.0,0.0);vUv12=uv;vUv13=uv+s*vec2(1.0,0.0);vUv14=uv+s*vec2(2.0,0.0);vUv15=uv+s*vec2(-2.0,1.0);vUv16=uv+s*vec2(-1.0,1.0);vUv17=uv+s*vec2(0.0,1.0);vUv18=uv+s*vec2(1.0,1.0);vUv19=uv+s*vec2(2.0,1.0);vUv20=uv+s*vec2(-2.0,2.0);vUv21=uv+s*vec2(-1.0,2.0);vUv22=uv+s*vec2(0.0,2.0);vUv23=uv+s*vec2(1.0,2.0);vUv24=uv+s*vec2(2.0,2.0);\n#else\nvUv=uv;\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.bilateral=e,this.kernelSize=t,this.maxVaryingVectors=8}set maxVaryingVectors(e){this.defines.MAX_VARYING_VECTORS=e.toFixed(0)}get kernelSize(){return Number(this.defines.KERNEL_SIZE)}set kernelSize(e){if(e%2==0)throw new Error("The kernel size must be an odd number");this.defines.KERNEL_SIZE=e.toFixed(0),this.defines.KERNEL_SIZE_HALF=Math.floor(e/2).toFixed(0),this.defines.KERNEL_SIZE_SQ=(e**2).toFixed(0),this.defines.KERNEL_SIZE_SQ_HALF=Math.floor(e**2/2).toFixed(0),this.defines.INV_KERNEL_SIZE_SQ=(1/e**2).toFixed(6),this.needsUpdate=!0}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set normalDepthBuffer(e){this.uniforms.normalDepthBuffer.value=e,null!==e?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get bilateral(){return void 0!==this.defines.BILATERAL}set bilateral(e){null!==e?this.defines.BILATERAL="1":delete this.defines.BILATERAL,this.needsUpdate=!0}get worldDistanceThreshold(){return-Z(Number(this.defines.DISTANCE_THRESHOLD),this.near,this.far)}set worldDistanceThreshold(e){const t=q(-e,this.near,this.far);this.defines.DISTANCE_THRESHOLD=t.toFixed(12),this.needsUpdate=!0}copyCameraSettings(e){e&&(this.uniforms.cameraNearFar.value.set(e.near,e.far),e instanceof b.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},K=i(5232),J=class extends K.ShaderMaterial{constructor(e){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new K.Uniform(null),focusDistance:new K.Uniform(0),focusRange:new K.Uniform(0),cameraNear:new K.Uniform(.3),cameraFar:new K.Uniform(1e3)},blending:K.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nfloat depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nfloat depth=texture2D(depthBuffer,uv).r;\n#endif\n#ifdef LOG_DEPTH\nfloat d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;\n#endif\nreturn depth;}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:p}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(e)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=K.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(e){this.uniforms.focusDistance.value=e}get worldFocusDistance(){return-Z(this.focusDistance,this.near,this.far)}set worldFocusDistance(e){this.focusDistance=q(-e,this.near,this.far)}getFocusDistance(e){this.uniforms.focusDistance.value=e}setFocusDistance(e){this.uniforms.focusDistance.value=e}get focalLength(){return this.focusRange}set focalLength(e){this.focusRange=e}get focusRange(){return this.uniforms.focusRange.value}set focusRange(e){this.uniforms.focusRange.value=e}get worldFocusRange(){return-Z(this.focusRange,this.near,this.far)}set worldFocusRange(e){this.focusRange=q(-e,this.near,this.far)}getFocalLength(e){return this.focusRange}setFocalLength(e){this.focusRange=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof K.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},$=i(5232),ee=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],te=class extends $.ShaderMaterial{constructor(e=new $.Vector4){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new $.Uniform(null),texelSize:new $.Uniform(new $.Vector4),scale:new $.Uniform(1),kernel:new $.Uniform(0)},blending:$.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=X(this.fragmentShader),this.setTexelSize(e.x,e.y),this.kernelSize=O.MEDIUM}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.inputBuffer=e}get kernelSequence(){return ee[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}getScale(){return this.uniforms.scale.value}setScale(e){this.uniforms.scale.value=e}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(e){this.uniforms.kernel.value=e}setKernel(e){this.kernel=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t,.5*e,.5*t)}setSize(e,t){const i=1/e,n=1/t;this.uniforms.texelSize.value.set(i,n,.5*i,.5*n)}},ie=i(5232),ne=class extends ie.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new ie.Uniform(null),opacity:new ie.Uniform(1)},blending:ie.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <colorspace_fragment>\n#include <dithering_fragment>\n}",vertexShader:p}),this.fragmentShader=X(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},re=i(5232),ae=class extends re.ShaderMaterial{constructor(e=null,t){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new re.Uniform(null),cameraNear:new re.Uniform(.3),cameraFar:new re.Uniform(1e3)},blending:re.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#include <clipping_planes_pars_fragment>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){\n#include <clipping_planes_fragment>\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);\n#if DEPTH_PACKING == 3201\nfloat fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\n#else\nfloat fragCoordZ=texture2D(depthBuffer,projTexCoord).r;\n#endif\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#else\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\n#endif\nfloat depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}",vertexShader:"#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\n#include <skinbase_vertex>\n#include <begin_vertex>\n#include <morphtarget_vertex>\n#include <skinning_vertex>\n#include <project_vertex>\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\n#include <clipping_planes_vertex>\n}"}),this.depthBuffer=e,this.depthPacking=re.RGBADepthPacking,this.copyCameraSettings(t)}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=re.RGBADepthPacking){this.depthBuffer=e,this.depthPacking=t}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof re.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},se=i(5232),oe=class extends se.ShaderMaterial{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new se.Uniform(null),texelPosition:new se.Uniform(new se.Vector2)},blending:se.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\nvarying vec2 vUv;\n#ifdef NORMAL_DEPTH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\n#else\n#if INPUT_DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if INPUT_DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}\n#endif\nvoid main(){\n#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING\ngl_FragColor=texture2D(depthBuffer,vUv);\n#else\nfloat depth=readDepth(vUv);\n#if OUTPUT_DEPTH_PACKING == 3201\ngl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);\n#else\ngl_FragColor=vec4(vec3(depth),1.0);\n#endif\n#endif\n}",vertexShader:"varying vec2 vUv;\n#if DEPTH_COPY_MODE == 1\nuniform vec2 texelPosition;\n#endif\nvoid main(){\n#if DEPTH_COPY_MODE == 1\nvUv=texelPosition;\n#else\nvUv=position.xy*0.5+0.5;\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.depthCopyMode=x.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set inputDepthPacking(e){this.defines.INPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(e){this.defines.OUTPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=se.BasicDepthPacking){this.depthBuffer=e,this.inputDepthPacking=t}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(e){this.defines.INPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(e){this.defines.OUTPUT_DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(e){this.uniforms.texelPosition.value=e}get mode(){return this.depthCopyMode}set mode(e){this.depthCopyMode=e,this.defines.DEPTH_COPY_MODE=e.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(e){this.mode=e}},le=i(5232),ce=class extends le.ShaderMaterial{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new le.Uniform(null),normalBuffer:new le.Uniform(null),texelSize:new le.Uniform(new le.Vector2)},blending:le.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\n#ifdef DOWNSAMPLE_NORMALS\nuniform lowp sampler2D normalBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}int findBestDepth(const in highp float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;highp float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){highp float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\n#ifdef DOWNSAMPLE_NORMALS\nhighp vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);\n#else\nhighp vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));\n#endif\ngl_FragColor=vec4(n[index],d[index]);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}"})}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=le.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}set normalBuffer(e){this.uniforms.normalBuffer.value=e,null!==e?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(e){this.normalBuffer=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ue=i(5232),he=class extends ue.ShaderMaterial{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:M.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new ue.Uniform(null),depthBuffer0:new ue.Uniform(null),depthBuffer1:new ue.Uniform(null),cameraNearFar:new ue.Uniform(new ue.Vector2(1,1))},blending:ue.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\n#else\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\n#endif\nuniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#endif\n}varying vec2 vUv;void main(){vec2 depth;\n#if DEPTH_PACKING_0 == 3201\ndepth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\n#else\ndepth.x=texture2D(depthBuffer0,vUv).r;\n#ifdef LOG_DEPTH\nfloat d=pow(2.0,depth.x*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.x=a+b/d;\n#endif\n#endif\n#if DEPTH_PACKING_1 == 3201\ndepth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\n#else\ndepth.y=texture2D(depthBuffer1,vUv).r;\n#ifdef LOG_DEPTH\nfloat d=pow(2.0,depth.y*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.y=a+b/d;\n#endif\n#endif\nbool isMaxDepth=(depth.x==1.0);\n#ifdef PERSPECTIVE_CAMERA\ndepth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);\n#endif\n#if DEPTH_TEST_STRATEGY == 0\nbool keep=depthTest(depth.x,depth.y);\n#elif DEPTH_TEST_STRATEGY == 1\nbool keep=isMaxDepth||depthTest(depth.x,depth.y);\n#else\nbool keep=!isMaxDepth&&depthTest(depth.x,depth.y);\n#endif\nif(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}",vertexShader:p}),this.depthMode=ue.LessDepth}set depthBuffer0(e){this.uniforms.depthBuffer0.value=e}set depthPacking0(e){this.defines.DEPTH_PACKING_0=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(e,t=ue.BasicDepthPacking){this.depthBuffer0=e,this.depthPacking0=t}set depthBuffer1(e){this.uniforms.depthBuffer1.value=e}set depthPacking1(e){this.defines.DEPTH_PACKING_1=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(e,t=ue.BasicDepthPacking){this.depthBuffer1=e,this.depthPacking1=t}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(e){this.defines.DEPTH_TEST_STRATEGY=e.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(e){this.maxDepthStrategy=e?M.KEEP_MAX_DEPTH:M.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(e){this.maxDepthStrategy=e}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(e){this.defines.DEPTH_EPSILON=e.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(e){this.epsilon=e}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(e){let t;switch(e){case ue.NeverDepth:t="false";break;case ue.AlwaysDepth:t="true";break;case ue.EqualDepth:t="abs(d1 - d0) <= DEPTH_EPSILON";break;case ue.NotEqualDepth:t="abs(d1 - d0) > DEPTH_EPSILON";break;case ue.LessDepth:t="d0 > d1";break;case ue.LessEqualDepth:t="d0 >= d1";break;case ue.GreaterEqualDepth:t="d0 <= d1";break;case ue.GreaterDepth:default:t="d0 < d1"}this.defines.DEPTH_MODE=e.toFixed(0),this.defines["depthTest(d0, d1)"]=t,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(e){this.depthMode=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNearFar.value.set(e.near,e.far),e instanceof ue.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},de=i(5232),fe=class extends de.ShaderMaterial{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new de.Uniform(null),texelSize:new de.Uniform(new de.Vector2)},blending:de.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#define WEIGHT_INNER 0.125\n#define WEIGHT_OUTER 0.0555555\nvarying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=X(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},pe=i(5232),me=class extends pe.ShaderMaterial{constructor(e=new pe.Vector2,t=R.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:pe.REVISION.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new pe.Uniform(null),depthBuffer:new pe.Uniform(null),predicationBuffer:new pe.Uniform(null),texelSize:new pe.Uniform(e)},blending:pe.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}"}),this.edgeDetectionMode=t}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=pe.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(e){this.defines.EDGE_DETECTION_MODE=e.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(e){this.edgeDetectionMode=e}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(e){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=e.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(e){this.localContrastAdaptationFactor=e}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(e){this.defines.EDGE_THRESHOLD=e.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*e).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(e){this.edgeDetectionThreshold=e}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(e){this.defines.PREDICATION_MODE=e.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(e){this.predicationMode=e}set predicationBuffer(e){this.uniforms.predicationBuffer.value=e}setPredicationBuffer(e){this.uniforms.predicationBuffer.value=e}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(e){this.defines.PREDICATION_THRESHOLD=e.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(e){this.predicationThreshold=e}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(e){this.defines.PREDICATION_SCALE=e.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(e){this.predicationScale=e}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(e){this.defines.PREDICATION_STRENGTH=e.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(e){this.predicationStrength=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ge=i(5232),ve=class extends ge.ShaderMaterial{constructor(e,t,i,n,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:ge.REVISION.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ge.Uniform(null),depthBuffer:new ge.Uniform(null),resolution:new ge.Uniform(new ge.Vector2),texelSize:new ge.Uniform(new ge.Vector2),cameraNear:new ge.Uniform(.3),cameraFar:new ge.Uniform(1e3),aspect:new ge.Uniform(1),time:new ge.Uniform(0)},blending:ge.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),e&&this.setShaderParts(e),t&&this.setDefines(t),i&&this.setUniforms(i),this.copyCameraSettings(n)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(e){this.uniforms.depthBuffer.value=e}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=ge.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}setShaderData(e){this.setShaderParts(e.shaderParts),this.setDefines(e.defines),this.setUniforms(e.uniforms),this.setExtensions(e.extensions)}setShaderParts(e){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <colorspace_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(C.FRAGMENT_HEAD,e.get(C.FRAGMENT_HEAD)||"").replace(C.FRAGMENT_MAIN_UV,e.get(C.FRAGMENT_MAIN_UV)||"").replace(C.FRAGMENT_MAIN_IMAGE,e.get(C.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}".replace(C.VERTEX_HEAD,e.get(C.VERTEX_HEAD)||"").replace(C.VERTEX_MAIN_SUPPORT,e.get(C.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=X(this.fragmentShader),this.needsUpdate=!0,this}setDefines(e){for(const t of e.entries())this.defines[t[0]]=t[1];return this.needsUpdate=!0,this}setUniforms(e){for(const t of e.entries())this.uniforms[t[0]]=t[1];return this}setExtensions(e){this.extensions={};for(const t of e)this.extensions[t]=!0;return this}get encodeOutput(){return void 0!==this.defines.ENCODE_OUTPUT}set encodeOutput(e){this.encodeOutput!==e&&(e?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(e){return this.encodeOutput}setOutputEncodingEnabled(e){this.encodeOutput=e}get time(){return this.uniforms.time.value}set time(e){this.uniforms.time.value=e}setDeltaTime(e){this.uniforms.time.value+=e}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNear.value=e.near,this.uniforms.cameraFar.value=e.far,e instanceof ge.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const i=this.uniforms;i.resolution.value.set(e,t),i.texelSize.value.set(1/e,1/t),i.aspect.value=e/t}static get Section(){return C}},be=i(5232),_e=class extends be.ShaderMaterial{constructor({kernelSize:e=35}={}){super({name:"GaussianBlurMaterial",uniforms:{inputBuffer:new be.Uniform(null),texelSize:new be.Uniform(new be.Vector2),direction:new be.Uniform(new be.Vector2),kernel:new be.Uniform(null),scale:new be.Uniform(1)},blending:be.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform vec2 kernel[STEPS];varying vec2 vOffset;varying vec2 vUv;void main(){vec4 result=texture2D(inputBuffer,vUv)*kernel[0].y;for(int i=1;i<STEPS;++i){vec2 offset=kernel[i].x*vOffset;vec4 c0=texture2D(inputBuffer,vUv+offset);vec4 c1=texture2D(inputBuffer,vUv-offset);result+=(c0+c1)*kernel[i].y;}gl_FragColor=result;\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;uniform vec2 direction;uniform float scale;varying vec2 vOffset;varying vec2 vUv;void main(){vOffset=direction*texelSize*scale;vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=X(this.fragmentShader),this._kernelSize=0,this.kernelSize=e}set inputBuffer(e){this.uniforms.inputBuffer.value=e}get kernelSize(){return this._kernelSize}set kernelSize(e){this._kernelSize=e,this.generateKernel(e)}get direction(){return this.uniforms.direction.value}get scale(){return this.uniforms.scale.value}set scale(e){this.uniforms.scale.value=e}generateKernel(e){const t=new Rt(e),i=t.linearSteps,n=new Float64Array(2*i);for(let e=0,r=0;e<i;++e)n[r++]=t.linearOffsets[e],n[r++]=t.linearWeights[e];this.uniforms.kernel.value=n,this.defines.STEPS=i.toFixed(0),this.needsUpdate=!0}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},ye=i(5232),Ae=class extends ye.ShaderMaterial{constructor(e){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new ye.Uniform(null),lightPosition:new ye.Uniform(e),density:new ye.Uniform(1),decay:new ye.Uniform(1),weight:new ye.Uniform(1),exposure:new ye.Uniform(1),clampMax:new ye.Uniform(1)},blending:ye.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\n#include <dithering_fragment>\n}",vertexShader:p})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(e){this.uniforms.lightPosition.value=e}get density(){return this.uniforms.density.value}set density(e){this.uniforms.density.value=e}getDensity(){return this.uniforms.density.value}setDensity(e){this.uniforms.density.value=e}get decay(){return this.uniforms.decay.value}set decay(e){this.uniforms.decay.value=e}getDecay(){return this.uniforms.decay.value}setDecay(e){this.uniforms.decay.value=e}get weight(){return this.uniforms.weight.value}set weight(e){this.uniforms.weight.value=e}getWeight(){return this.uniforms.weight.value}setWeight(e){this.uniforms.weight.value=e}get exposure(){return this.uniforms.exposure.value}set exposure(e){this.uniforms.exposure.value=e}getExposure(){return this.uniforms.exposure.value}setExposure(e){this.uniforms.exposure.value=e}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(e){this.uniforms.clampMax.value=e}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(e){this.uniforms.clampMax.value=e}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(e){const t=Math.floor(e);this.defines.SAMPLES_INT=t.toFixed(0),this.defines.SAMPLES_FLOAT=t.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(e){this.samples=e}},Ee=i(5232),we=class extends Ee.ShaderMaterial{constructor(e=!1,t=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Ee.REVISION.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ee.Uniform(null),threshold:new Ee.Uniform(0),smoothing:new Ee.Uniform(1),range:new Ee.Uniform(null)},blending:Ee.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",vertexShader:p}),this.colorOutput=e,this.luminanceRange=t}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get threshold(){return this.uniforms.threshold.value}set threshold(e){this.smoothing>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=e}getThreshold(){return this.threshold}setThreshold(e){this.threshold=e}get smoothing(){return this.uniforms.smoothing.value}set smoothing(e){this.threshold>0||e>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=e}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(e){this.smoothing=e}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(e){}get colorOutput(){return void 0!==this.defines.COLOR}set colorOutput(e){e?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(e){return this.colorOutput}setColorOutputEnabled(e){this.colorOutput=e}get useRange(){return null!==this.luminanceRange}set useRange(e){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(e){null!==e?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=e,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(e){this.luminanceRange=e}},Se=i(5232),Te=class extends Se.ShaderMaterial{constructor(e=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Se.Uniform(e),inputBuffer:new Se.Uniform(null),strength:new Se.Uniform(1)},blending:Se.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 3\nvec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);\n#elif MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",vertexShader:p}),this.colorChannel=A.RED,this.maskFunction=I.DISCARD}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}set maskTexture(e){this.uniforms.maskTexture.value=e,delete this.defines.MASK_PRECISION_HIGH,e.type!==Se.UnsignedByteType&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(e){this.maskTexture=e}set colorChannel(e){this.defines.COLOR_CHANNEL=e.toFixed(0),this.needsUpdate=!0}setColorChannel(e){this.colorChannel=e}set maskFunction(e){this.defines.MASK_FUNCTION=e.toFixed(0),this.needsUpdate=!0}setMaskFunction(e){this.maskFunction=e}get inverted(){return void 0!==this.defines.INVERTED}set inverted(e){this.inverted&&!e?delete this.defines.INVERTED:e&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get strength(){return this.uniforms.strength.value}set strength(e){this.uniforms.strength.value=e}getStrength(){return this.strength}setStrength(e){this.strength=e}},xe=i(5232),Me=class extends xe.ShaderMaterial{constructor(e=new xe.Vector2){super({name:"OutlineMaterial",uniforms:{inputBuffer:new xe.Uniform(null),texelSize:new xe.Uniform(new xe.Vector2)},blending:xe.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.uniforms.texelSize.value.set(e.x,e.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Re=i(5232),Pe=class extends Re.ShaderMaterial{constructor(e=new Re.Vector2,t=new Re.Vector2){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new Re.Uniform(null),searchTexture:new Re.Uniform(null),areaTexture:new Re.Uniform(null),resolution:new Re.Uniform(t),texelSize:new Re.Uniform(e)},blending:Re.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",vertexShader:"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}"})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(e){this.uniforms.searchTexture.value=e}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(e){this.uniforms.areaTexture.value=e}setLookupTextures(e,t){this.searchTexture=e,this.areaTexture=t}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(e){const t=Math.min(Math.max(e,0),112);this.defines.MAX_SEARCH_STEPS_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(e){this.orthogonalSearchSteps=e}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(e){const t=Math.min(Math.max(e,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=t.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=t.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(e){this.diagonalSearchSteps=e}get diagonalDetection(){return void 0===this.defines.DISABLE_DIAG_DETECTION}set diagonalDetection(e){e?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(e){this.diagonalDetection=e}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(e){const t=Math.min(Math.max(e,0),100);this.defines.CORNER_ROUNDING=t.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(t/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(e){this.cornerRounding=e}get cornerDetection(){return void 0===this.defines.DISABLE_CORNER_DETECTION}set cornerDetection(e){e?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(e){this.cornerDetection=e}setSize(e,t){const i=this.uniforms;i.texelSize.value.set(1/e,1/t),i.resolution.value.set(e,t)}},Ce=i(5232),De=class extends Ce.ShaderMaterial{constructor(e){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ce.Uniform(null),normalBuffer:new Ce.Uniform(null),normalDepthBuffer:new Ce.Uniform(null),noiseTexture:new Ce.Uniform(null),inverseProjectionMatrix:new Ce.Uniform(new Ce.Matrix4),projectionMatrix:new Ce.Uniform(new Ce.Matrix4),texelSize:new Ce.Uniform(new Ce.Vector2),cameraNearFar:new Ce.Uniform(new Ce.Vector2),distanceCutoff:new Ce.Uniform(new Ce.Vector2),proximityCutoff:new Ce.Uniform(new Ce.Vector2),noiseScale:new Ce.Uniform(new Ce.Vector2),minRadiusScale:new Ce.Uniform(.33),intensity:new Ce.Uniform(1),fade:new Ce.Uniform(.01),bias:new Ce.Uniform(0)},blending:Ce.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef NORMAL_DEPTH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}\n#else\nuniform lowp sampler2D normalBuffer;\n#if DEPTH_PACKING == 3201\nuniform lowp sampler2D depthBuffer;\n#elif defined(GL_FRAGMENT_PRECISION_HIGH)\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}\n#endif\nuniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);\n#endif\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\n#else\nfloat linearSampleDepth=sampleDepth;\n#endif\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\n#ifdef NORMAL_DEPTH\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\n#else\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));\n#endif\nfloat ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\n#ifdef PERSPECTIVE_CAMERA\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);\n#else\nfloat linearDepth=depth;\n#endif\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);\n#ifdef LEGACY_INTENSITY\nao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);\n#endif\n}gl_FragColor.r=ao;}",vertexShader:"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}"}),this.copyCameraSettings(e),this.resolution=new Ce.Vector2,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(e){this.uniforms.normalDepthBuffer.value=e,null!==e?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(e){this.normalDepthBuffer=e}set normalBuffer(e){this.uniforms.normalBuffer.value=e}setNormalBuffer(e){this.uniforms.normalBuffer.value=e}set depthBuffer(e){this.uniforms.depthBuffer.value=e}set depthPacking(e){this.defines.DEPTH_PACKING=e.toFixed(0),this.needsUpdate=!0}setDepthBuffer(e,t=Ce.BasicDepthPacking){this.depthBuffer=e,this.depthPacking=t}set noiseTexture(e){this.uniforms.noiseTexture.value=e}setNoiseTexture(e){this.uniforms.noiseTexture.value=e}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(e){this.defines.SAMPLES_INT=e.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/e).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(e){this.samples=e}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(e){this.defines.SPIRAL_TURNS=e.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(e){this.rings=e}get intensity(){return this.uniforms.intensity.value}set intensity(e){this.uniforms.intensity.value=e,void 0===this.defines.LEGACY_INTENSITY&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(e){this.uniforms.intensity.value=e}get fade(){return this.uniforms.fade.value}set fade(e){this.uniforms.fade.value=e}getFade(){return this.uniforms.fade.value}setFade(e){this.uniforms.fade.value=e}get bias(){return this.uniforms.bias.value}set bias(e){this.uniforms.bias.value=e}getBias(){return this.uniforms.bias.value}setBias(e){this.uniforms.bias.value=e}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(e){this.uniforms.minRadiusScale.value=e}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(e){this.uniforms.minRadiusScale.value=e}updateRadius(){const e=this.r*this.resolution.height;this.defines.RADIUS=e.toFixed(11),this.defines.RADIUS_SQ=(e*e).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(e){this.r=Math.min(Math.max(e,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(e){this.radius=e}get distanceScaling(){return!0}set distanceScaling(e){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(e){this.distanceScaling=e}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-Z(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(e){this.distanceThreshold=q(-e,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(e){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+e,0),1)}get worldDistanceFalloff(){return-Z(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(e){this.distanceFalloff=q(-e,this.near,this.far)}setDistanceCutoff(e,t){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-Z(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(e){this.proximityThreshold=q(-e,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(e){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+e,0),1)}get worldProximityFalloff(){return-Z(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(e){this.proximityFalloff=q(-e,this.near,this.far)}setProximityCutoff(e,t){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(e,0),1),Math.min(Math.max(e+t,0),1))}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t)}adoptCameraSettings(e){this.copyCameraSettings(e)}copyCameraSettings(e){e&&(this.uniforms.cameraNearFar.value.set(e.near,e.far),this.uniforms.projectionMatrix.value.copy(e.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(e.projectionMatrix).invert(),e instanceof Ce.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(e,t){const i=this.uniforms,n=i.noiseTexture.value;null!==n&&i.noiseScale.value.set(e/n.image.width,t/n.image.height),i.texelSize.value.set(1/e,1/t),this.resolution.set(e,t),this.updateRadius()}},Oe=i(5232),ke=class extends te{constructor({kernelSize:e=O.MEDIUM,offset:t=0,rotation:i=0,focusArea:n=.4,feather:r=.3}={}){super(),this.fragmentShader="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;\n#include <colorspace_fragment>\n}",this.vertexShader="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",this.kernelSize=e,this.fragmentShader=X(this.fragmentShader),this.uniforms.aspect=new Oe.Uniform(1),this.uniforms.rotation=new Oe.Uniform(new Oe.Vector2),this.uniforms.maskParams=new Oe.Uniform(new Oe.Vector4),this._offset=t,this._focusArea=n,this._feather=r,this.rotation=i,this.updateParams()}updateParams(){const e=this.uniforms.maskParams.value,t=Math.max(this.focusArea,0),i=Math.max(t-this.feather,0);e.set(this.offset-t,this.offset-i,this.offset+t,this.offset+i)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(e){this.uniforms.rotation.value.set(Math.cos(e),Math.sin(e))}get offset(){return this._offset}set offset(e){this._offset=e,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(e){this._focusArea=e,this.updateParams()}get feather(){return this._feather}set feather(e){this._feather=e,this.updateParams()}setSize(e,t){super.setSize(e,t),this.uniforms.aspect.value=e/t}},Ie=i(5232),Ne=class extends Ie.ShaderMaterial{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ie.Uniform(null),supportBuffer:new Ie.Uniform(null),texelSize:new Ie.Uniform(new Ie.Vector2),radius:new Ie.Uniform(.85)},blending:Ie.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;\n#else\nuniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;\n#endif\nuniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);\n#include <colorspace_fragment>\n}",vertexShader:"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}"}),this.fragmentShader=X(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}set supportBuffer(e){this.uniforms.supportBuffer.value=e}get radius(){return this.uniforms.radius.value}set radius(e){this.uniforms.radius.value=e}setSize(e,t){this.uniforms.texelSize.value.set(1/e,1/t)}},Le=i(5232),Ue=i(5232),Be=new Ue.Camera,Fe=null,Ge=class e{constructor(e="Pass",t=new Ue.Scene,i=Be){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;null!==t&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return null!==this.screen?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;null!==t?t.material=e:(t=new Ue.Mesh(function(){if(null===Fe){const e=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),t=new Float32Array([0,0,2,0,0,2]);void 0!==(Fe=new Ue.BufferGeometry).setAttribute?(Fe.setAttribute("position",new Ue.BufferAttribute(e,3)),Fe.setAttribute("uv",new Ue.BufferAttribute(t,2))):(Fe.addAttribute("position",new Ue.BufferAttribute(e,3)),Fe.addAttribute("uv",new Ue.BufferAttribute(t,2)))}return Fe}(),e),t.frustumCulled=!1,null===this.scene&&(this.scene=new Ue.Scene),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ue.BasicDepthPacking){}render(e,t,i,n,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const t of Object.keys(this)){const i=this[t];(i instanceof Ue.WebGLRenderTarget||i instanceof Ue.Material||i instanceof Ue.Texture||i instanceof e)&&this[t].dispose()}}},Ve=class extends Ge{constructor(e,t=!0){super("CopyPass"),this.fullscreenMaterial=new ne,this.needsSwap=!1,this.renderTarget=e,void 0===e&&(this.renderTarget=new Le.WebGLRenderTarget(1,1,{minFilter:Le.LinearFilter,magFilter:Le.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=t}get resize(){return this.autoResize}set resize(e){this.autoResize=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(e){this.autoResize=e}render(e,t,i,n,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.autoResize&&this.renderTarget.setSize(e,t)}initialize(e,t,i){void 0!==i&&(this.renderTarget.texture.type=i,i!==Le.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":j(e)===w&&W(this.renderTarget.texture,w))}},ze=class extends Ge{constructor(e,{minLuminance:t=.01,adaptationRate:i=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new m,this.needsSwap=!1,this.renderTargetPrevious=new d.WebGLRenderTarget(1,1,{minFilter:d.NearestFilter,magFilter:d.NearestFilter,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const n=this.fullscreenMaterial;n.luminanceBuffer0=this.renderTargetPrevious.texture,n.luminanceBuffer1=e,n.minLuminance=t,n.adaptationRate=i,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new Ve(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(e){this.fullscreenMaterial.mipLevel1x1=e}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(e){this.fullscreenMaterial.adaptationRate=e}render(e,t,i,n,r){this.fullscreenMaterial.deltaTime=n,e.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),e.render(this.scene,this.camera),this.copyPass.render(e,this.renderTargetAdapted)}},He=i(5232),je=class extends Ge{constructor({kernelSize:e=5,iterations:t=1,bilateral:i=!1,resolutionScale:n=1,resolutionX:r=Ut.AUTO_SIZE,resolutionY:a=Ut.AUTO_SIZE}={}){super("BoxBlurPass"),this.needsDepthTexture=i,this.renderTargetA=new He.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=new He.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetB.texture.name="Blur.Target.B",this.blurMaterial=new Q({bilateral:i,kernelSize:e}),this.copyMaterial=new ne;const s=this.resolution=new Ut(this,r,a,n);s.addEventListener("change",(e=>this.setSize(s.baseWidth,s.baseHeight))),this.iterations=t}set mainCamera(e){this.blurMaterial.copyCameraSettings(e)}setDepthTexture(e,t=He.BasicDepthPacking){this.blurMaterial.depthBuffer=e,this.blurMaterial.depthPacking=t}render(e,t,i,n,r){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial;this.fullscreenMaterial=c;let u=t;for(let t=0,i=Math.max(this.iterations,1);t<i;++t){const i=0==(1&t)?o:l;c.inputBuffer=u.texture,e.setRenderTarget(i),e.render(a,s),u=i}this.copyMaterial.inputBuffer=u.texture,this.fullscreenMaterial=this.copyMaterial,e.setRenderTarget(this.renderToScreen?null:i),e.render(a,s)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(e,t)}initialize(e,t,i){this.blurMaterial.maxVaryingVectors=e.capabilities.maxVaryings,void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==He.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":j(e)===w&&(W(this.renderTargetA.texture,w),W(this.renderTargetB.texture,w)))}},We=class extends Ge{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(e,t,i,n,r){const a=e.state.buffers.stencil;a.setLocked(!1),a.setTest(!1)}},Ye=new(i(5232).Color),Xe=class extends Ge{constructor(e=!0,t=!0,i=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=e,this.depth=t,this.stencil=i,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(e,t,i){this.color=e,this.depth=t,this.stencil=i}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(e){this.overrideClearColor=e}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(e){this.overrideClearAlpha=e}render(e,t,i,n,r){const a=this.overrideClearColor,s=this.overrideClearAlpha,o=e.getClearAlpha(),l=null!==a,c=s>=0;l?(e.getClearColor(Ye),e.setClearColor(a,c?s:o)):c&&e.setClearAlpha(s),e.setRenderTarget(this.renderToScreen?null:t),e.clear(this.color,this.depth,this.stencil),l?e.setClearColor(Ye,o):c&&e.setClearAlpha(o)}},Ze=i(5232),qe=class extends Ge{constructor(e,t,i=null){super("RenderPass",e,t),this.needsSwap=!1,this.clearPass=new Xe,this.overrideMaterialManager=null===i?null:new kt(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return null!==e?e.material:null}set overrideMaterial(e){const t=this.overrideMaterialManager;null!==e?null!==t?t.setMaterial(e):this.overrideMaterialManager=new kt(e):null!==t&&(t.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,t,i,n,r){const a=this.scene,s=this.camera,o=this.selection,l=s.layers.mask,c=a.background,u=e.shadowMap.autoUpdate,h=this.renderToScreen?null:t;null!==o&&s.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(a.background=null),this.clearPass.enabled&&this.clearPass.render(e,t),e.setRenderTarget(h),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(e,a,s):e.render(a,s),s.layers.mask=l,a.background=c,e.shadowMap.autoUpdate=u}},Qe=class extends Ge{constructor(e,t,{renderTarget:i,resolutionScale:n=1,width:r=Ut.AUTO_SIZE,height:a=Ut.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new qe(e,t,new Ze.MeshDepthMaterial({depthPacking:Ze.RGBADepthPacking}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const c=l.clearPass;c.overrideClearColor=new Ze.Color(16777215),c.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new Ze.WebGLRenderTarget(1,1,{minFilter:Ze.NearestFilter,magFilter:Ze.NearestFilter}),this.renderTarget.texture.name="DepthPass.Target");const u=this.resolution=new Ut(this,s,o,n);u.addEventListener("change",(e=>this.setSize(u.baseWidth,u.baseHeight)))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,n,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},Ke=i(5232),Je=class extends Ge{constructor({normalBuffer:e=null,resolutionScale:t=.5,width:i=Ut.AUTO_SIZE,height:n=Ut.AUTO_SIZE,resolutionX:r=i,resolutionY:a=n}={}){super("DepthDownsamplingPass");const s=new ce;s.normalBuffer=e,this.fullscreenMaterial=s,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Ke.WebGLRenderTarget(1,1,{minFilter:Ke.NearestFilter,magFilter:Ke.NearestFilter,depthBuffer:!1,type:Ke.FloatType}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Ut(this,r,a,t);o.addEventListener("change",(e=>this.setSize(o.baseWidth,o.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(e,t=Ke.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t}render(e,t,i,n,r){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.fullscreenMaterial.setSize(e,t)}initialize(e,t,i){const n=e.getContext();if(!n.getExtension("EXT_color_buffer_float")&&!n.getExtension("EXT_color_buffer_half_float"))throw new Error("Rendering to float texture is not supported.")}},$e=i(5232),et=i(5232),tt=class extends Ge{constructor({depthPacking:e=et.RGBADepthPacking}={}){super("DepthCopyPass");const t=new oe;t.outputDepthPacking=e,this.fullscreenMaterial=t,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new et.WebGLRenderTarget(1,1,{type:e===et.RGBADepthPacking?et.UnsignedByteType:et.FloatType,minFilter:et.NearestFilter,magFilter:et.NearestFilter,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(e,t=et.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.inputDepthPacking=t}render(e,t,i,n,r){e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){this.renderTarget.setSize(e,t)}},it=new Float32Array([255/256/256**3,255/256/65536,255/256/256,255/256]),nt=class extends tt{constructor({depthPacking:e=$e.RGBADepthPacking,mode:t=x.SINGLE}={}){super({depthPacking:e}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=t,this.pixelBuffer=e===$e.RGBADepthPacking?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(e){return this.fullscreenMaterial.texelPosition.set(.5*e.x+.5,.5*e.y+.5),new Promise((e=>{this.callback=e}))}render(e,t,i,n,r){const a=this.fullscreenMaterial,s=a.mode;if(s===x.FULL&&super.render(e),null!==this.callback){const t=this.renderTarget,i=this.pixelBuffer,n=t.texture.type!==$e.FloatType;let r=0,l=0;if(s===x.SINGLE)super.render(e);else{const e=a.texelPosition;r=Math.round(e.x*t.width),l=Math.round(e.y*t.height)}e.readRenderTargetPixels(t,r,l,1,1,i),this.callback(n?((o=i)[0]*it[0]+o[1]*it[1]+o[2]*it[2]+o[3]*it[3])/255:i[0]),this.callback=null}var o}setSize(e,t){this.fullscreenMaterial.mode===x.FULL&&super.setSize(e,t)}},rt=i(5232);function at(e,t,i){for(const n of t){const t="$1"+e+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const e of i.entries())null!==e[1]&&i.set(e[0],e[1].replace(r,t))}}function st(e,t,i){let n=t.getFragmentShader(),r=t.getVertexShader();const a=void 0!==n&&/mainImage/.test(n),s=void 0!==n&&/mainUv/.test(n);if(i.attributes|=t.getAttributes(),void 0===n)throw new Error(`Missing fragment shader (${t.name})`);if(s&&0!=(i.attributes&P.CONVOLUTION))throw new Error(`Effects that transform UVs are incompatible with convolution effects (${t.name})`);if(!a&&!s)throw new Error(`Could not find mainImage or mainUv function (${t.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=i.shaderParts;let c=l.get(C.FRAGMENT_HEAD)||"",u=l.get(C.FRAGMENT_MAIN_UV)||"",h=l.get(C.FRAGMENT_MAIN_IMAGE)||"",d=l.get(C.VERTEX_HEAD)||"",f=l.get(C.VERTEX_MAIN_SUPPORT)||"";const p=new Set,m=new Set;if(s&&(u+=`\t${e}MainUv(UV);\n`,i.uvTransformation=!0),null!==r&&/mainSupport/.test(r)){const t=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);f+=`\t${e}MainSupport(`,f+=t?"vUv);\n":");\n";for(const e of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const t of e[1].split(/\s*,\s*/))i.varyings.add(t),p.add(t),m.add(t);for(const e of r.matchAll(o))m.add(e[1])}for(const e of n.matchAll(o))m.add(e[1]);for(const e of t.defines.keys())m.add(e.replace(/\([\w\s,]*\)/g,""));for(const e of t.uniforms.keys())m.add(e);m.delete("while"),m.delete("for"),m.delete("if"),t.uniforms.forEach(((t,n)=>i.uniforms.set(e+n.charAt(0).toUpperCase()+n.slice(1),t))),t.defines.forEach(((t,n)=>i.defines.set(e+n.charAt(0).toUpperCase()+n.slice(1),t)));const g=new Map([["fragment",n],["vertex",r]]);at(e,m,i.defines),at(e,m,g),n=g.get("fragment"),r=g.get("vertex");const v=t.blendMode;if(i.blendModes.set(v.blendFunction,v),a){null!==t.inputColorSpace&&t.inputColorSpace!==i.colorSpace&&(h+=t.inputColorSpace===w?"color0 = LinearTosRGB(color0);\n\t":"color0 = sRGBToLinear(color0);\n\t"),t.outputColorSpace!==E?i.colorSpace=t.outputColorSpace:null!==t.inputColorSpace&&(i.colorSpace=t.inputColorSpace);const r=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${e}MainImage(color0, UV, `,0!=(i.attributes&P.DEPTH)&&r.test(n)&&(h+="depth, ",i.readDepth=!0),h+="color1);\n\t";const a=e+"BlendOpacity";i.uniforms.set(a,v.opacity),h+=`color0 = blend${v.blendFunction}(color0, color1, ${a});\n\n\t`,c+=`uniform float ${a};\n\n`}if(c+=n+"\n",null!==r&&(d+=r+"\n"),l.set(C.FRAGMENT_HEAD,c),l.set(C.FRAGMENT_MAIN_UV,u),l.set(C.FRAGMENT_MAIN_IMAGE,h),l.set(C.VERTEX_HEAD,d),l.set(C.VERTEX_MAIN_SUPPORT,f),null!==t.extensions)for(const e of t.extensions)i.extensions.add(e)}}var ot=class extends Ge{constructor(e,...t){super("EffectPass"),this.fullscreenMaterial=new ve(null,null,null,e),this.listener=e=>this.handleEvent(e),this.effects=[],this.setEffects(t),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(e){for(const t of this.effects)t.mainScene=e}set mainCamera(e){this.fullscreenMaterial.copyCameraSettings(e);for(const t of this.effects)t.mainCamera=e}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(e){this.fullscreenMaterial.encodeOutput=e}get dithering(){return this.fullscreenMaterial.dithering}set dithering(e){const t=this.fullscreenMaterial;t.dithering=e,t.needsUpdate=!0}setEffects(e){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=e.sort(((e,t)=>t.attributes-e.attributes));for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const e=new xt;let t=0;for(const i of this.effects)if(i.blendMode.blendFunction===y.DST)e.attributes|=i.getAttributes()&P.DEPTH;else{if(0!=(e.attributes&i.getAttributes()&P.CONVOLUTION))throw new Error(`Convolution effects cannot be merged (${i.name})`);st("e"+t++,i,e)}let i=e.shaderParts.get(C.FRAGMENT_HEAD),n=e.shaderParts.get(C.FRAGMENT_MAIN_IMAGE),r=e.shaderParts.get(C.FRAGMENT_MAIN_UV);const a=/\bblend\b/g;for(const t of e.blendModes.values())i+=t.getShaderCode().replace(a,`blend${t.blendFunction}`)+"\n";0!=(e.attributes&P.DEPTH)?(e.readDepth&&(n="float depth = readDepth(UV);\n\n\t"+n),this.needsDepthTexture=null===this.getDepthTexture()):this.needsDepthTexture=!1,e.colorSpace===w&&(n+="color0 = sRGBToLinear(color0);\n\t"),e.uvTransformation?(r="vec2 transformedUv = vUv;\n"+r,e.defines.set("UV","transformedUv")):e.defines.set("UV","vUv"),e.shaderParts.set(C.FRAGMENT_HEAD,i),e.shaderParts.set(C.FRAGMENT_MAIN_IMAGE,n),e.shaderParts.set(C.FRAGMENT_MAIN_UV,r);for(const[t,i]of e.shaderParts)null!==i&&e.shaderParts.set(t,i.trim().replace(/^#/,"\n#"));this.skipRendering=0===t,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(e)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(e,t=rt.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=e,this.fullscreenMaterial.depthPacking=t;for(const i of this.effects)i.setDepthTexture(e,t)}render(e,t,i,n,r){for(const i of this.effects)i.update(e,t,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=t.texture,r.time+=n*this.timeScale,e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}}setSize(e,t){this.fullscreenMaterial.setSize(e,t);for(const i of this.effects)i.setSize(e,t)}initialize(e,t,i){this.renderer=e;for(const n of this.effects)n.initialize(e,t,i);this.updateMaterial(),void 0!==i&&i!==rt.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const e of this.effects)e.removeEventListener("change",this.listener),e.dispose()}handleEvent(e){"change"===e.type&&this.recompile()}},lt=i(5232),ct=class extends Ge{constructor({kernelSize:e=35,iterations:t=1,resolutionScale:i=1,resolutionX:n=Ut.AUTO_SIZE,resolutionY:r=Ut.AUTO_SIZE}={}){super("GaussianBlurPass"),this.renderTargetA=new lt.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.blurMaterial=new _e({kernelSize:e}),this.copyMaterial=new ne,this.copyMaterial.inputBuffer=this.renderTargetB.texture;const a=this.resolution=new Ut(this,n,r,i);a.addEventListener("change",(e=>this.setSize(a.baseWidth,a.baseHeight))),this.iterations=t}render(e,t,i,n,r){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial;this.fullscreenMaterial=c;let u=t;for(let t=0,i=Math.max(this.iterations,1);t<i;++t)c.direction.set(1,0),c.inputBuffer=u.texture,e.setRenderTarget(o),e.render(a,s),c.direction.set(0,1),c.inputBuffer=o.texture,e.setRenderTarget(l),e.render(a,s),0===t&&i>1&&(u=l);this.fullscreenMaterial=this.copyMaterial,e.setRenderTarget(this.renderToScreen?null:i),e.render(a,s)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(e,t)}initialize(e,t,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==lt.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):j(e)===w&&(W(this.renderTargetA.texture,w),W(this.renderTargetB.texture,w)))}},ut=i(5232),ht=class extends Ge{constructor({kernelSize:e=O.MEDIUM,resolutionScale:t=.5,width:i=Ut.AUTO_SIZE,height:n=Ut.AUTO_SIZE,resolutionX:r=i,resolutionY:a=n}={}){super("KawaseBlurPass"),this.renderTargetA=new ut.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const s=this.resolution=new Ut(this,r,a,t);s.addEventListener("change",(e=>this.setSize(s.baseWidth,s.baseHeight))),this._blurMaterial=new te,this._blurMaterial.kernelSize=e,this.copyMaterial=new ne}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(e){this._blurMaterial=e}get dithering(){return this.copyMaterial.dithering}set dithering(e){this.copyMaterial.dithering=e}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(e){this.blurMaterial.kernelSize=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get scale(){return this.blurMaterial.scale}set scale(e){this.blurMaterial.scale=e}getScale(){return this.blurMaterial.scale}setScale(e){this.blurMaterial.scale=e}getKernelSize(){return this.kernelSize}setKernelSize(e){this.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,n,r){const a=this.scene,s=this.camera,o=this.renderTargetA,l=this.renderTargetB,c=this.blurMaterial,u=c.kernelSequence;let h=t;this.fullscreenMaterial=c;for(let t=0,i=u.length;t<i;++t){const i=0==(1&t)?o:l;c.kernel=u[t],c.inputBuffer=h.texture,e.setRenderTarget(i),e.render(a,s),h=i}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,e.setRenderTarget(this.renderToScreen?null:i),e.render(a,s)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.blurMaterial.setSize(e,t)}initialize(e,t,i){void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,i!==ut.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):j(e)===w&&(W(this.renderTargetA.texture,w),W(this.renderTargetB.texture,w)))}static get AUTO_SIZE(){return Ut.AUTO_SIZE}},dt=class extends Ge{constructor(e){super("LambdaPass",null,null),this.needsSwap=!1,this.f=e}render(e,t,i,n,r){this.f()}},ft=i(5232),pt=class extends Ge{constructor({renderTarget:e,luminanceRange:t,colorOutput:i,resolutionScale:n=1,width:r=Ut.AUTO_SIZE,height:a=Ut.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("LuminancePass"),this.fullscreenMaterial=new we(i,t),this.needsSwap=!1,this.renderTarget=e,void 0===this.renderTarget&&(this.renderTarget=new ft.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Ut(this,s,o,n);l.addEventListener("change",(e=>this.setSize(l.baseWidth,l.baseHeight)))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(e,t,i,n,r){this.fullscreenMaterial.inputBuffer=t.texture,e.setRenderTarget(this.renderToScreen?null:this.renderTarget),e.render(this.scene,this.camera)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}initialize(e,t,i){void 0!==i&&i!==ft.UnsignedByteType&&(this.renderTarget.texture.type=i,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},mt=class extends Ge{constructor(e,t){super("MaskPass",e,t),this.needsSwap=!1,this.clearPass=new Xe(!1,!1,!0),this.inverse=!1}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get inverted(){return this.inverse}set inverted(e){this.inverse=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(e){this.inverted=e}render(e,t,i,n,r){const a=e.getContext(),s=e.state.buffers,o=this.scene,l=this.camera,c=this.clearPass,u=this.inverted?0:1,h=1-u;s.color.setMask(!1),s.depth.setMask(!1),s.color.setLocked(!0),s.depth.setLocked(!0),s.stencil.setTest(!0),s.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),s.stencil.setFunc(a.ALWAYS,u,4294967295),s.stencil.setClear(h),s.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?c.render(e,null):(c.render(e,t),c.render(e,i))),this.renderToScreen?(e.setRenderTarget(null),e.render(o,l)):(e.setRenderTarget(t),e.render(o,l),e.setRenderTarget(i),e.render(o,l)),s.color.setLocked(!1),s.depth.setLocked(!1),s.stencil.setLocked(!1),s.stencil.setFunc(a.EQUAL,1,4294967295),s.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),s.stencil.setLocked(!0)}},gt=i(5232),vt=class extends Ge{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new gt.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new fe,this.upsamplingMaterial=new Ne,this.resolution=new gt.Vector2}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(e){if(this.levels!==e){const t=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let i=0;i<e;++i){const e=t.clone();e.texture.name="Downsampling.Mipmap"+i,this.downsamplingMipmaps.push(e)}this.upsamplingMipmaps.push(t);for(let i=1,n=e-1;i<n;++i){const e=t.clone();e.texture.name="Upsampling.Mipmap"+i,this.upsamplingMipmaps.push(e)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(e){this.upsamplingMaterial.radius=e}render(e,t,i,n,r){const{scene:a,camera:s}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:c,upsamplingMipmaps:u}=this;let h=t;this.fullscreenMaterial=o;for(let t=0,i=c.length;t<i;++t){const i=c[t];o.setSize(h.width,h.height),o.inputBuffer=h.texture,e.setRenderTarget(i),e.render(a,s),h=i}this.fullscreenMaterial=l;for(let t=u.length-1;t>=0;--t){const i=u[t];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=c[t].texture,e.setRenderTarget(i),e.render(a,s),h=i}}setSize(e,t){const i=this.resolution;i.set(e,t);let n=i.width,r=i.height;for(let e=0,t=this.downsamplingMipmaps.length;e<t;++e)n=Math.round(.5*n),r=Math.round(.5*r),this.downsamplingMipmaps[e].setSize(n,r),e<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[e].setSize(n,r)}initialize(e,t,i){if(void 0!==i){const t=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const e of t)e.texture.type=i;if(i!==gt.UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(j(e)===w)for(const e of t)W(e.texture,w)}}dispose(){super.dispose();for(const e of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))e.dispose()}},bt=i(5232),_t=class extends Ge{constructor(e,t,{renderTarget:i,resolutionScale:n=1,width:r=Ut.AUTO_SIZE,height:a=Ut.AUTO_SIZE,resolutionX:s=r,resolutionY:o=a}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new qe(e,t,new bt.MeshNormalMaterial);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const c=l.getClearPass();c.overrideClearColor=new bt.Color(7829503),c.overrideClearAlpha=1,this.renderTarget=i,void 0===this.renderTarget&&(this.renderTarget=new bt.WebGLRenderTarget(1,1,{minFilter:bt.NearestFilter,magFilter:bt.NearestFilter}),this.renderTarget.texture.name="NormalPass.Target");const u=this.resolution=new Ut(this,s,o,n);u.addEventListener("change",(e=>this.setSize(u.baseWidth,u.baseHeight)))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,t,i,n,r){const a=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,a,a)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height)}},yt=i(5232),At=class extends Ge{constructor(e,t="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=e,this.input=t}setInput(e){this.input=e}render(e,t,i,n,r){const a=this.fullscreenMaterial.uniforms;null!==t&&void 0!==a&&void 0!==a[this.input]&&(a[this.input].value=t.texture),e.setRenderTarget(this.renderToScreen?null:i),e.render(this.scene,this.camera)}initialize(e,t,i){void 0!==i&&i!==yt.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Et=class extends ht{constructor({offset:e=0,rotation:t=0,focusArea:i=.4,feather:n=.3,kernelSize:r=O.MEDIUM,resolutionScale:a=.5,resolutionX:s=Ut.AUTO_SIZE,resolutionY:o=Ut.AUTO_SIZE}={}){super({kernelSize:r,resolutionScale:a,resolutionX:s,resolutionY:o}),this.blurMaterial=new ke({kernelSize:r,offset:e,rotation:t,focusArea:i,feather:n})}},wt=.001,St=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(e){"undefined"!=typeof document&&void 0!==document.hidden&&(e?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=e)}get delta(){return this._delta*wt}get fixedDelta(){return this._fixedDelta*wt}set fixedDelta(e){this._fixedDelta=1e3*e}get elapsed(){return this._elapsed*wt}update(e){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(void 0!==e?e:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(e){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},Tt=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:n=0,frameBufferType:r}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,r,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new Ve,this.depthTexture=null,this.passes=[],this.timer=new St,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,null!==e){const t=e.getSize(new h.Vector2),i=e.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===h.UnsignedByteType&&j(e)===w&&(W(this.inputBuffer.texture,w),W(this.outputBuffer.texture,w),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const t of this.passes)t.initialize(e,i,n)}}replaceRenderer(e,t=!0){const i=this.renderer,n=i.domElement.parentNode;return this.setRenderer(e),t&&null!==n&&(n.removeChild(i.domElement),n.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new h.DepthTexture;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=h.DepthStencilFormat,e.type=h.UnsignedInt248Type):e.type=h.UnsignedIntType,e}deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,n){const r=this.renderer,a=null===r?new h.Vector2:r.getDrawingBufferSize(new h.Vector2),s={minFilter:h.LinearFilter,magFilter:h.LinearFilter,stencilBuffer:t,depthBuffer:e,type:i},o=new h.WebGLRenderTarget(a.width,a.height,s);return n>0&&(o.ignoreDepthForMultisampleCopy=!1,o.samples=n),i===h.UnsignedByteType&&j(r)===w&&W(o.texture,w),o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,n=this.renderer,r=n.getDrawingBufferSize(new h.Vector2),a=n.getContext().getContextAttributes().alpha,s=this.inputBuffer.texture.type;if(e.setRenderer(n),e.setSize(r.width,r.height),e.initialize(n,a,s),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==t?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){const t=this.createDepthTexture();for(e of i)e.setDepthTexture(t)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(-1!==i&&t.splice(i,1).length>0){if(null!==this.depthTexture){const i=(e,t)=>e||t.needsDepthTexture;t.reduce(i,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let n,r,a,s=this.inputBuffer,o=this.outputBuffer,l=!1;void 0===e&&(this.timer.update(),e=this.timer.delta);for(const c of this.passes)c.enabled&&(c.render(t,s,o,e,l),c.needsSwap&&(l&&(i.renderToScreen=c.renderToScreen,n=t.getContext(),r=t.state.buffers.stencil,r.setFunc(n.NOTEQUAL,1,4294967295),i.render(t,s,o,e,l),r.setFunc(n.EQUAL,1,4294967295)),a=s,s=o,o=a),c instanceof mt?l=!0:c instanceof We&&(l=!1))}setSize(e,t,i){const n=this.renderer,r=n.getSize(new h.Vector2);void 0!==e&&void 0!==t||(e=r.width,t=r.height),r.width===e&&r.height===t||n.setSize(e,t,i);const a=n.getDrawingBufferSize(new h.Vector2);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const e of this.passes)e.setSize(a.width,a.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},xt=class{constructor(){this.shaderParts=new Map([[C.FRAGMENT_HEAD,null],[C.FRAGMENT_MAIN_UV,null],[C.FRAGMENT_MAIN_IMAGE,null],[C.VERTEX_HEAD,null],[C.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=P.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=S}};function Mt(e){let t;if(0===e)t=new Float64Array(0);else if(1===e)t=new Float64Array([1]);else if(e>1){let i=new Float64Array(e),n=new Float64Array(e);for(let r=1;r<=e;++r){for(let e=0;e<r;++e)n[e]=0===e||e===r-1?1:i[e-1]+i[e];t=n,n=i,i=t}}return t}var Rt=class{constructor(e,t=2){this.weights=null,this.offsets=null,this.linearWeights=null,this.linearOffsets=null,this.generate(e,t)}get steps(){return null===this.offsets?0:this.offsets.length}get linearSteps(){return null===this.linearOffsets?0:this.linearOffsets.length}generate(e,t){if(e<3||e>1020)throw new Error("The kernel size must be in the range [3, 1020]");const i=e+2*t,n=t>0?Mt(i).slice(t,-t):Mt(i),r=Math.floor((n.length-1)/2),a=n.reduce(((e,t)=>e+t),0),s=n.slice(r),o=[...Array(r+1).keys()],l=new Float64Array(Math.floor(o.length/2)),c=new Float64Array(l.length);l[0]=s[0]/a;for(let e=1,t=1,i=o.length-1;e<i;e+=2,++t){const i=o[e],n=o[e+1],r=s[e],u=s[e+1],h=r+u,d=(i*r+n*u)/h;l[t]=h/a,c[t]=d}for(let e=0,t=s.length,i=1/a;e<t;++e)s[e]*=i;const u=2*(l.reduce(((e,t)=>e+t),0)-.5*l[0]);if(0!==u)for(let e=0,t=l.length,i=1/u;e<t;++e)l[e]*=i;this.offsets=o,this.weights=s,this.linearOffsets=c,this.linearWeights=l}},Pt=class{get delta(){return NaN}get fixedDelta(){return NaN}get elapsed(){return NaN}},Ct=class{initialize(e,t,i){}},Dt=i(5232),Ot=!1,kt=class{constructor(e=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(e),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Dt.DoubleSide:t=this.materialsFlatShadedDoubleSide;break;case Dt.BackSide:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded}else switch(e.material.side){case Dt.DoubleSide:t=this.materialsDoubleSide;break;case Dt.BackSide:t=this.materialsBackSide;break;default:t=this.materials}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(e){if(!(e instanceof Dt.ShaderMaterial))return e.clone();const t=e.uniforms,i=new Map;for(const e in t){const n=t[e].value;n.isRenderTargetTexture&&(t[e].value=null,i.set(e,n))}const n=e.clone();for(const e of i)t[e[0]].value=e[1],n.uniforms[e[0]].value=e[1];return n}setMaterial(e){if(this.disposeMaterials(),this.material=e,null!==e){const t=this.materials=[this.cloneMaterial(e),this.cloneMaterial(e),this.cloneMaterial(e)];for(const i of t)i.uniforms=Object.assign({},e.uniforms),i.side=Dt.FrontSide;t[2].skinning=!0,this.materialsBackSide=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.side=Dt.BackSide,i})),this.materialsDoubleSide=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.side=Dt.DoubleSide,i})),this.materialsFlatShaded=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i})),this.materialsFlatShadedBackSide=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Dt.BackSide,i})),this.materialsFlatShadedDoubleSide=t.map((t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},e.uniforms),i.flatShading=!0,i.side=Dt.DoubleSide,i}))}}render(e,t,i){const n=e.shadowMap.enabled;if(e.shadowMap.enabled=!1,Ot){const n=this.originalMaterials;this.meshCount=0,t.traverse(this.replaceMaterial),e.render(t,i);for(const e of n)e[0].material=e[1];this.meshCount!==n.size&&n.clear()}else{const n=t.overrideMaterial;t.overrideMaterial=this.material,e.render(t,i),t.overrideMaterial=n}e.shadowMap.enabled=n}disposeMaterials(){if(null!==this.material){const e=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const t of e)t.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ot}static set workaroundEnabled(e){Ot=e}},It=class{setSize(e,t){}},Nt=i(5232),Lt=-1,Ut=class extends Nt.EventDispatcher{constructor(e,t=-1,i=-1,n=1){super(),this.resizable=e,this.baseSize=new Nt.Vector2(1,1),this.preferredSize=new Nt.Vector2(t,i),this.target=this.preferredSize,this.s=n,this.effectiveSize=new Nt.Vector2,this.addEventListener("change",(()=>this.updateEffectiveSize())),this.updateEffectiveSize()}updateEffectiveSize(){const e=this.baseSize,t=this.preferredSize,i=this.effectiveSize,n=this.scale;t.width!==Lt?i.width=t.width:t.height!==Lt?i.width=Math.round(t.height*(e.width/Math.max(e.height,1))):i.width=Math.round(e.width*n),t.height!==Lt?i.height=t.height:t.width!==Lt?i.height=Math.round(t.width/Math.max(e.width/Math.max(e.height,1),1)):i.height=Math.round(e.height*n)}get width(){return this.effectiveSize.width}set width(e){this.preferredWidth=e}get height(){return this.effectiveSize.height}set height(e){this.preferredHeight=e}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(e){this.s!==e&&(this.s=e,this.preferredSize.setScalar(Lt),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(e){this.scale=e}get baseWidth(){return this.baseSize.width}set baseWidth(e){this.baseSize.width!==e&&(this.baseSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(e){this.baseWidth=e}get baseHeight(){return this.baseSize.height}set baseHeight(e){this.baseSize.height!==e&&(this.baseSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(e){this.baseHeight=e}setBaseSize(e,t){this.baseSize.width===e&&this.baseSize.height===t||(this.baseSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(e){this.preferredSize.width!==e&&(this.preferredSize.width=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(e){this.preferredWidth=e}get preferredHeight(){return this.preferredSize.height}set preferredHeight(e){this.preferredSize.height!==e&&(this.preferredSize.height=e,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(e){this.preferredHeight=e}setPreferredSize(e,t){this.preferredSize.width===e&&this.preferredSize.height===t||(this.preferredSize.set(e,t),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(e){this.s=e.scale,this.baseSize.set(e.baseWidth,e.baseHeight),this.preferredSize.set(e.preferredWidth,e.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Lt}},Bt=class extends Set{constructor(e,t=10){super(),this.l=t,this.exclusive=!1,void 0!==e&&this.set(e)}get layer(){return this.l}set layer(e){const t=this.l;for(const i of this)i.layers.disable(t),i.layers.enable(e);this.l=e}getLayer(){return this.layer}setLayer(e){this.layer=e}isExclusive(){return this.exclusive}setExclusive(e){this.exclusive=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return this.exclusive?e.layers.set(this.layer):e.layers.enable(this.layer),super.add(e)}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}toggle(e){let t;return this.has(e)?(this.delete(e),t=!1):(this.add(e),t=!0),t}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}},Ft=i(5232),Gt=new Map([[y.ADD,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}"],[y.ALPHA,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}"],[y.AVERAGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}"],[y.COLOR,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[y.COLOR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}"],[y.COLOR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}"],[y.DARKEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}"],[y.DIFFERENCE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}"],[y.DIVIDE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}"],[y.DST,null],[y.EXCLUSION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}"],[y.HARD_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}"],[y.HARD_MIX,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}"],[y.HUE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}"],[y.INVERT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}"],[y.INVERT_RGB,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}"],[y.LIGHTEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}"],[y.LINEAR_BURN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}"],[y.LINEAR_DODGE,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}"],[y.LINEAR_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}"],[y.LUMINOSITY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[y.MULTIPLY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}"],[y.NEGATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}"],[y.NORMAL,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}"],[y.OVERLAY,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}"],[y.PIN_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}"],[y.REFLECT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}"],[y.SATURATION,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}"],[y.SCREEN,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}"],[y.SOFT_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}"],[y.SRC,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}"],[y.SUBTRACT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}"],[y.VIVID_LIGHT,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}"]]),Vt=class extends Ft.EventDispatcher{constructor(e,t=1){super(),this._blendFunction=e,this.opacity=new Ft.Uniform(t)}getOpacity(){return this.opacity.value}setOpacity(e){this.opacity.value=e}get blendFunction(){return this._blendFunction}set blendFunction(e){this._blendFunction=e,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e}getShaderCode(){return Gt.get(this.blendFunction)}},zt=i(5232),Ht=i(5232),jt=class extends Ht.EventDispatcher{constructor(e,t,{attributes:i=P.NONE,blendFunction:n=y.NORMAL,defines:r=new Map,uniforms:a=new Map,extensions:s=null,vertexShader:o=null}={}){super(),this.name=e,this.renderer=null,this.attributes=i,this.fragmentShader=t,this.vertexShader=o,this.defines=r,this.uniforms=a,this.extensions=s,this.blendMode=new Vt(n),this.blendMode.addEventListener("change",(e=>this.setChanged())),this._inputColorSpace=S,this._outputColorSpace=E}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(e){this._inputColorSpace=e,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e,this.setChanged()}set mainScene(e){}set mainCamera(e){}getName(){return this.name}setRenderer(e){this.renderer=e}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(e){this.attributes=e,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(e){this.fragmentShader=e,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(e){this.vertexShader=e,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(e,t=Ht.BasicDepthPacking){}update(e,t,i){}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Ht.WebGLRenderTarget||t instanceof Ht.Material||t instanceof Ht.Texture||t instanceof Ge)&&this[e].dispose()}}},Wt=class extends jt{constructor({blendFunction:e=y.SCREEN,luminanceThreshold:t=.9,luminanceSmoothing:i=.025,mipmapBlur:n=!1,intensity:r=1,radius:a=.85,levels:s=8,kernelSize:o=O.LARGE,resolutionScale:l=.5,width:c=Ut.AUTO_SIZE,height:u=Ut.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("BloomEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}",{blendFunction:e,uniforms:new Map([["map",new zt.Uniform(null)],["intensity",new zt.Uniform(r)]])}),this.renderTarget=new zt.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new ht({kernelSize:o}),this.luminancePass=new pt({colorOutput:!0}),this.luminanceMaterial.threshold=t,this.luminanceMaterial.smoothing=i,this.mipmapBlurPass=new vt,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=a,this.mipmapBlurPass.levels=s,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const f=this.resolution=new Ut(this,h,d,l);f.addEventListener("change",(e=>this.setSize(f.baseWidth,f.baseHeight)))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(e){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}update(e,t,i){const n=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(e,t),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,r.renderTarget):this.blurPass.render(e,r.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(e,t):this.blurPass.render(e,t,n)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.blurPass.resolution.copy(i),this.luminancePass.setSize(e,t),this.mipmapBlurPass.setSize(e,t)}initialize(e,t,i){this.blurPass.initialize(e,t,i),this.luminancePass.initialize(e,t,i),this.mipmapBlurPass.initialize(e,t,i),void 0!==i&&(this.renderTarget.texture.type=i,j(e)===w&&W(this.renderTarget.texture,w))}},Yt=i(5232),Xt=class extends jt{constructor({blendFunction:e,focus:t=.5,dof:i=.02,aperture:n=.015,maxBlur:r=1}={}){super("BokehEffect","uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}",{blendFunction:e,attributes:P.CONVOLUTION|P.DEPTH,uniforms:new Map([["focus",new Yt.Uniform(t)],["dof",new Yt.Uniform(i)],["aperture",new Yt.Uniform(n)],["maxBlur",new Yt.Uniform(r)]])})}},Zt=i(5232),qt=class extends jt{constructor({blendFunction:e=y.SRC,brightness:t=0,contrast:i=0}={}){super("BrightnessContrastEffect","uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",{blendFunction:e,uniforms:new Map([["brightness",new Zt.Uniform(t)],["contrast",new Zt.Uniform(i)]])}),this.inputColorSpace=w}get brightness(){return this.uniforms.get("brightness").value}set brightness(e){this.uniforms.get("brightness").value=e}getBrightness(){return this.brightness}setBrightness(e){this.brightness=e}get contrast(){return this.uniforms.get("contrast").value}set contrast(e){this.uniforms.get("contrast").value=e}getContrast(){return this.contrast}setContrast(e){this.contrast=e}},Qt=class extends jt{constructor(e){super("ColorAverageEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",{blendFunction:e})}},Kt=i(5232),Jt=class extends jt{constructor({blendFunction:e,bits:t=16}={}){super("ColorDepthEffect","uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",{blendFunction:e,uniforms:new Map([["factor",new Kt.Uniform(1)]])}),this.bits=0,this.bitDepth=t}get bitDepth(){return this.bits}set bitDepth(e){this.bits=e,this.uniforms.get("factor").value=Math.pow(2,e/3)}getBitDepth(){return this.bitDepth}setBitDepth(e){this.bitDepth=e}},$t=i(5232),ei=class extends jt{constructor({offset:e=new $t.Vector2(.001,5e-4),radialModulation:t=!1,modulationOffset:i=.15}={}){super("ChromaticAberrationEffect","#ifdef RADIAL_MODULATION\nuniform float modulationOffset;\n#endif\nvarying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;\n#ifdef RADIAL_MODULATION\nconst vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}\n#else\nif(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}\n#endif\noutputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",{vertexShader:"uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",attributes:P.CONVOLUTION,uniforms:new Map([["offset",new $t.Uniform(e)],["modulationOffset",new $t.Uniform(i)]])}),this.radialModulation=t}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(e){e?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(e){this.uniforms.get("modulationOffset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}},ti=class extends jt{constructor({blendFunction:e=y.SRC,inverted:t=!1}={}){super("DepthEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef INVERTED\nvec3 color=vec3(1.0-depth);\n#else\nvec3 color=vec3(depth);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:P.DEPTH}),this.inverted=t}get inverted(){return this.defines.has("INVERTED")}set inverted(e){this.inverted!==e&&(e?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(e){this.inverted=e}},ii=i(5232),ni=class extends jt{constructor(e,{blendFunction:t,worldFocusDistance:i,worldFocusRange:n,focusDistance:r=0,focalLength:a=.1,focusRange:s=a,bokehScale:o=1,resolutionScale:l=1,width:c=Ut.AUTO_SIZE,height:u=Ut.AUTO_SIZE,resolutionX:h=c,resolutionY:d=u}={}){super("DepthOfFieldEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);\n#if MASK_FUNCTION == 1\nvec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);\n#else\nvec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);\n#endif\nvec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}",{blendFunction:t,attributes:P.DEPTH,uniforms:new Map([["nearColorBuffer",new ii.Uniform(null)],["farColorBuffer",new ii.Uniform(null)],["nearCoCBuffer",new ii.Uniform(null)],["farCoCBuffer",new ii.Uniform(null)],["scale",new ii.Uniform(1)]])}),this.camera=e,this.renderTarget=new ii.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new At(new J(e));const f=this.cocMaterial;f.focusDistance=r,f.focusRange=s,void 0!==i&&(f.worldFocusDistance=i),void 0!==n&&(f.worldFocusRange=n),this.blurPass=new ht({resolutionScale:l,resolutionX:h,resolutionY:d,kernelSize:O.MEDIUM}),this.maskPass=new At(new Te(this.renderTargetCoC.texture)),this.maskPass.fullscreenMaterial.colorChannel=A.GREEN,this.maskFunction=I.MULTIPLY_RGB,this.bokehNearBasePass=new At(new v(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new At(new v(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new At(new v(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new At(new v(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const p=this.resolution=new Ut(this,h,d,l);p.addEventListener("change",(e=>this.setSize(p.baseWidth,p.baseHeight))),this.bokehScale=o}set mainCamera(e){this.camera=e,this.cocMaterial.copyCameraSettings(e)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(e){this.maskFunction!==e&&(this.defines.set("MASK_FUNCTION",e.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=e,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(e){this.bokehNearBasePass.fullscreenMaterial.scale=e,this.bokehNearFillPass.fullscreenMaterial.scale=e,this.bokehFarBasePass.fullscreenMaterial.scale=e,this.bokehFarFillPass.fullscreenMaterial.scale=e,this.maskPass.fullscreenMaterial.strength=e,this.uniforms.get("scale").value=e}getBokehScale(){return this.bokehScale}setBokehScale(e){this.bokehScale=e}getTarget(){return this.target}setTarget(e){this.target=e}calculateFocusDistance(e){const t=this.camera;return q(-t.position.distanceTo(e),t.near,t.far)}setDepthTexture(e,t=ii.BasicDepthPacking){this.cocMaterial.depthBuffer=e,this.cocMaterial.depthPacking=t}update(e,t,i){const n=this.renderTarget,r=this.renderTargetCoC,a=this.renderTargetCoCBlurred,s=this.renderTargetMasked;if(null!==this.target){const e=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=e}this.cocPass.render(e,null,r),this.blurPass.render(e,r,a),this.maskPass.render(e,t,s),this.bokehFarBasePass.render(e,s,n),this.bokehFarFillPass.render(e,n,this.renderTargetFar),this.bokehNearBasePass.render(e,t,n),this.bokehNearFillPass.render(e,n,this.renderTargetNear)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.cocPass.setSize(e,t),this.blurPass.setSize(e,t),this.maskPass.setSize(e,t),this.renderTargetFar.setSize(e,t),this.renderTargetCoC.setSize(e,t),this.renderTargetMasked.setSize(e,t),this.renderTarget.setSize(n,r),this.renderTargetNear.setSize(n,r),this.renderTargetCoCBlurred.setSize(n,r),this.bokehNearBasePass.fullscreenMaterial.setSize(e,t),this.bokehNearFillPass.fullscreenMaterial.setSize(e,t),this.bokehFarBasePass.fullscreenMaterial.setSize(e,t),this.bokehFarFillPass.fullscreenMaterial.setSize(e,t)}initialize(e,t,i){this.cocPass.initialize(e,t,i),this.maskPass.initialize(e,t,i),this.bokehNearBasePass.initialize(e,t,i),this.bokehNearFillPass.initialize(e,t,i),this.bokehFarBasePass.initialize(e,t,i),this.bokehFarFillPass.initialize(e,t,i),this.blurPass.initialize(e,t,ii.UnsignedByteType),e.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),void 0!==i&&(this.renderTarget.texture.type=i,this.renderTargetNear.texture.type=i,this.renderTargetFar.texture.type=i,this.renderTargetMasked.texture.type=i,j(e)===w&&(W(this.renderTarget.texture,w),W(this.renderTargetNear.texture,w),W(this.renderTargetFar.texture,w),W(this.renderTargetMasked.texture,w)))}},ri=i(5232),ai=class extends jt{constructor({blendFunction:e,angle:t=.5*Math.PI,scale:i=1}={}){super("DotScreenEffect","uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["angle",new ri.Uniform(new ri.Vector2)],["scale",new ri.Uniform(i)]])}),this.angle=t}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(e){this.uniforms.get("angle").value.set(Math.sin(e),Math.cos(e))}getAngle(){return this.angle}setAngle(e){this.angle=e}get scale(){return this.uniforms.get("scale").value}set scale(e){this.uniforms.get("scale").value=e}},si=class extends jt{constructor({blendFunction:e=y.SRC}={}){super("FXAAEffect","#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))\n#define ONE_OVER_TWELVE 0.08333333333333333\nvarying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}",{vertexShader:"varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",blendFunction:e,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(e){this.defines.set("EDGE_THRESHOLD_MIN",e.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(e){this.defines.set("EDGE_THRESHOLD_MAX",e.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(e){this.defines.set("SUBPIXEL_QUALITY",e.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(e){this.defines.set("SAMPLES",e.toFixed(0)),this.setChanged()}},oi=i(5232),li=class extends jt{constructor({blendFunction:e=y.SRC,gamma:t=2}={}){super("GammaCorrectionEffect","uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}",{blendFunction:e,uniforms:new Map([["gamma",new oi.Uniform(t)]])})}},ci=i(5232),ui=i(5232);function hi(e,t,i){const n=document.createElement("canvas"),r=n.getContext("2d");if(n.width=e,n.height=t,i instanceof Image)r.drawImage(i,0,0);else{const n=r.createImageData(e,t);n.data.set(i),r.putImageData(n,0,0)}return n}var di=class e{constructor(e=0,t=0,i=null){this.width=e,this.height=t,this.data=i}toCanvas(){return"undefined"==typeof document?null:hi(this.width,this.height,this.data)}static from(t){const{width:i,height:n}=t;let r;if(t instanceof Image){const e=hi(i,n,t);null!==e&&(r=e.getContext("2d").getImageData(0,0,i,n).data)}else r=t.data;return new e(i,n,r)}},fi=new ui.Color,pi=class e extends ui.Data3DTexture{constructor(e,t){super(e,t,t,t),this.type=ui.FloatType,this.format=ui.RGBAFormat,this.minFilter=ui.LinearFilter,this.magFilter=ui.LinearFilter,this.wrapS=ui.ClampToEdgeWrapping,this.wrapT=ui.ClampToEdgeWrapping,this.wrapR=ui.ClampToEdgeWrapping,this.unpackAlignment=1,this.needsUpdate=!0,W(this,S),this.domainMin=new ui.Vector3(0,0,0),this.domainMax=new ui.Vector3(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(t,i=!0){const n=this.image;let r;return r=t<=n.width?Promise.reject(new Error("The target size must be greater than the current size")):new Promise(((r,a)=>{const s=URL.createObjectURL(new Blob(['"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();\n'],{type:"text/javascript"})),o=new Worker(s);o.addEventListener("error",(e=>a(e.error))),o.addEventListener("message",(i=>{const n=new e(i.data,t);Y(this,n),n.type=this.type,n.name=this.name,URL.revokeObjectURL(s),r(n)}));const l=i?[n.data.buffer]:[];o.postMessage({operation:k.SCALE_UP,data:n.data,size:t},l)})),r}applyLUT(e){const t=this.image,i=e.image,n=Math.min(t.width,t.height,t.depth);if(n!==Math.min(i.width,i.height,i.depth))console.error("Size mismatch");else if(e.type!==ui.FloatType||this.type!==ui.FloatType)console.error("Both LUTs must be FloatType textures");else if(e.format!==ui.RGBAFormat||this.format!==ui.RGBAFormat)console.error("Both LUTs must be RGBA textures");else{const e=t.data,r=i.data,a=n,s=a**2,o=a-1;for(let t=0,i=a**3;t<i;++t){const i=4*t,n=e[i+0]*o,l=e[i+1]*o,c=e[i+2]*o,u=4*Math.round(n+l*a+c*s);e[i+0]=r[u+0],e[i+1]=r[u+1],e[i+2]=r[u+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===ui.FloatType){const e=this.image.data,t=new Uint8Array(e.length);for(let i=0,n=e.length;i<n;++i)t[i]=255*e[i]+.5;this.image.data=t,this.type=ui.UnsignedByteType,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===ui.UnsignedByteType){const e=this.image.data,t=new Float32Array(e.length);for(let i=0,n=e.length;i<n;++i)t[i]=e[i]/255;this.image.data=t,this.type=ui.FloatType,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===ui.FloatType){for(let t=0,i=e.length;t<i;t+=4)fi.fromArray(e,t).convertLinearToSRGB().toArray(e,t);W(this,w),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===ui.FloatType){for(let t=0,i=e.length;t<i;t+=4)fi.fromArray(e,t).convertSRGBToLinear().toArray(e,t);W(this,S),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,i=new ui.DataTexture(this.image.data,e,t);return i.name=this.name,i.type=this.type,i.format=this.format,i.minFilter=ui.LinearFilter,i.magFilter=ui.LinearFilter,i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.generateMipmaps=!1,i.needsUpdate=!0,Y(this,i),i}static from(t){const i=t.image,{width:n,height:r}=i,a=Math.min(n,r);let s;if(i instanceof Image){const e=di.from(i).data;if(n>r){s=new Uint8Array(e.length);for(let t=0;t<a;++t)for(let i=0;i<a;++i)for(let n=0;n<a;++n){const r=4*(n+t*a+i*a*a),o=4*(n+i*a+t*a*a);s[o+0]=e[r+0],s[o+1]=e[r+1],s[o+2]=e[r+2],s[o+3]=e[r+3]}}else s=new Uint8Array(e.buffer)}else s=i.data.slice();const o=new e(s,a);return o.type=t.type,o.name=t.name,Y(t,o),o}static createNeutral(t){const i=new Float32Array(t**3*4),n=t**2,r=1/(t-1);for(let e=0;e<t;++e)for(let a=0;a<t;++a)for(let s=0;s<t;++s){const o=4*(e+a*t+s*n);i[o+0]=e*r,i[o+1]=a*r,i[o+2]=s*r,i[o+3]=1}const a=new e(i,t);return a.name="neutral",a}},mi=[new Float32Array(3),new Float32Array(3)],gi=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],vi=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function bi(e,t,i,n){const r=i[0]-t[0],a=i[1]-t[1],s=i[2]-t[2],o=e[0]-t[0],l=e[1]-t[1],c=e[2]-t[2],u=a*c-s*l,h=s*o-r*c,d=r*l-a*o,f=Math.sqrt(u*u+h*h+d*d),p=.5*f,m=u/f,g=h/f,v=d/f,b=-(e[0]*m+e[1]*g+e[2]*v),_=n[0]*m+n[1]*g+n[2]*v;return Math.abs(_+b)*p/3}function _i(e,t,i,n,r,a){const s=4*(i+n*t+r*t*t);a[0]=e[s+0],a[1]=e[s+1],a[2]=e[s+2]}function yi(e,t,i,n,r,a){const s=i*(t-1),o=n*(t-1),l=r*(t-1),c=Math.floor(s),u=Math.floor(o),h=Math.floor(l),d=Math.ceil(s),f=Math.ceil(o),p=Math.ceil(l),m=s-c,g=o-u,v=l-h;if(c===s&&u===o&&h===l)_i(e,t,s,o,l,a);else{let i;m>=g&&g>=v?i=vi[0]:m>=v&&v>=g?i=vi[1]:v>=m&&m>=g?i=vi[2]:g>=m&&m>=v?i=vi[3]:g>=v&&v>=m?i=vi[4]:v>=g&&g>=m&&(i=vi[5]);const[n,r,s,o]=i,l=mi[0];l[0]=m,l[1]=g,l[2]=v;const b=mi[1],_=d-c,y=f-u,A=p-h;b[0]=_*n[0]+c,b[1]=y*n[1]+u,b[2]=A*n[2]+h,_i(e,t,b[0],b[1],b[2],gi[0]),b[0]=_*r[0]+c,b[1]=y*r[1]+u,b[2]=A*r[2]+h,_i(e,t,b[0],b[1],b[2],gi[1]),b[0]=_*s[0]+c,b[1]=y*s[1]+u,b[2]=A*s[2]+h,_i(e,t,b[0],b[1],b[2],gi[2]),b[0]=_*o[0]+c,b[1]=y*o[1]+u,b[2]=A*o[2]+h,_i(e,t,b[0],b[1],b[2],gi[3]);const E=6*bi(r,s,o,l),w=6*bi(n,s,o,l),S=6*bi(n,r,o,l),T=6*bi(n,r,s,l);gi[0][0]*=E,gi[0][1]*=E,gi[0][2]*=E,gi[1][0]*=w,gi[1][1]*=w,gi[1][2]*=w,gi[2][0]*=S,gi[2][1]*=S,gi[2][2]*=S,gi[3][0]*=T,gi[3][1]*=T,gi[3][2]*=T,a[0]=gi[0][0]+gi[1][0]+gi[2][0]+gi[3][0],a[1]=gi[0][1]+gi[1][1]+gi[2][1]+gi[3][1],a[2]=gi[0][2]+gi[1][2]+gi[2][2]+gi[3][2]}}var Ai=class{static expand(e,t){const i=Math.cbrt(e.length/4),n=new Float32Array(3),r=new e.constructor(t**3*4),a=e instanceof Uint8Array?255:1,s=t**2,o=1/(t-1);for(let l=0;l<t;++l)for(let c=0;c<t;++c)for(let u=0;u<t;++u){const h=u*o,d=c*o,f=l*o,p=4*Math.round(u+c*t+l*s);yi(e,i,h,d,f,n),r[p+0]=n[0],r[p+1]=n[1],r[p+2]=n[2],r[p+3]=a}return r}},Ei=[new Float32Array(2),new Float32Array(2)],wi=30,Si=32,Ti=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),xi=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],Mi=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],Ri=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function Pi(e,t,i){return e+(t-e)*i}function Ci(e){const t=Ei[0],i=Ei[1],n=.5*Math.sqrt(2*t[0]),r=.5*Math.sqrt(2*t[1]),a=.5*Math.sqrt(2*i[0]),s=.5*Math.sqrt(2*i[1]),o=(l=e/Si,Math.min(Math.max(l,0),1));var l;t[0]=Pi(n,t[0],o),t[1]=Pi(r,t[1],o),i[0]=Pi(a,i[0],o),i[1]=Pi(s,i[1],o)}function Di(e,t,i,n,r,a){const s=i-e,o=n-t,l=r+1,c=t+o*(r-e)/s,u=t+o*(l-e)/s;if(r>=e&&r<i||l>e&&l<=i)if(Math.sign(c)===Math.sign(u)||Math.abs(c)<1e-4||Math.abs(u)<1e-4){const e=(c+u)/2;e<0?(a[0]=Math.abs(e),a[1]=0):(a[0]=0,a[1]=Math.abs(e))}else{const n=-t*s/o+e,r=Math.trunc(n),l=n>e?c*(n-r)/2:0,h=n<i?u*(1-(n-r))/2:0;(Math.abs(l)>Math.abs(h)?l:-h)<0?(a[0]=Math.abs(l),a[1]=Math.abs(h)):(a[0]=Math.abs(h),a[1]=Math.abs(l))}else a[0]=0,a[1]=0;return a}function Oi(e,t,i,n,r){const a=Ei[0],s=Ei[1],o=.5+n,l=.5+n-1,c=t+i+1;switch(e){case 0:case 5:case 10:case 15:r[0]=0,r[1]=0;break;case 1:t<=i?Di(0,l,c/2,0,t,r):(r[0]=0,r[1]=0);break;case 2:t>=i?Di(c/2,0,c,l,t,r):(r[0]=0,r[1]=0);break;case 3:Di(0,l,c/2,0,t,a),Di(c/2,0,c,l,t,s),Ci(c),r[0]=a[0]+s[0],r[1]=a[1]+s[1];break;case 4:t<=i?Di(0,o,c/2,0,t,r):(r[0]=0,r[1]=0);break;case 6:Math.abs(n)>0?(Di(0,o,c,l,t,a),Di(0,o,c/2,0,t,s),Di(c/2,0,c,l,t,r),s[0]=s[0]+r[0],s[1]=s[1]+r[1],r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2):Di(0,o,c,l,t,r);break;case 7:case 14:Di(0,o,c,l,t,r);break;case 8:t>=i?Di(c/2,0,c,o,t,r):(r[0]=0,r[1]=0);break;case 9:Math.abs(n)>0?(Di(0,l,c,o,t,a),Di(0,l,c/2,0,t,s),Di(c/2,0,c,o,t,r),s[0]=s[0]+r[0],s[1]=s[1]+r[1],r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2):Di(0,l,c,o,t,r);break;case 11:case 13:Di(0,l,c,o,t,r);break;case 12:Di(0,o,c/2,0,t,a),Di(c/2,0,c,o,t,s),Ci(c),r[0]=a[0]+s[0],r[1]=a[1]+s[1]}return r}function ki(e,t,i,n,r,a){let s=e===i&&t===n;return s||(s=(n-t)*(r-(e+i)/2)+(e-i)*(a-(t+n)/2)>0),s}function Ii(e,t,i,n,r,a){let s=0;for(let o=0;o<wi;++o)for(let l=0;l<wi;++l)ki(e,t,i,n,r+l/(wi-1),a+o/(wi-1))&&++s;return s/(wi*wi)}function Ni(e,t,i,n,r,a,s,o){const l=Ri[e],c=l[0],u=l[1];return c>0&&(t+=s[0],i+=s[1]),u>0&&(n+=s[0],r+=s[1]),o[0]=1-Ii(t,i,n,r,1+a,0+a),o[1]=Ii(t,i,n,r,1+a,1+a),o}function Li(e,t,i,n,r){const a=Ei[0],s=Ei[1],o=t+i+1;switch(e){case 0:case 15:Ni(e,1,1,1+o,1+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 1:Ni(e,1,0,0+o,0+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 2:Ni(e,0,0,1+o,0+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 3:Ni(e,1,0,1+o,0+o,t,n,r);break;case 4:Ni(e,1,1,0+o,0+o,t,n,a),Ni(e,1,1,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 5:Ni(e,1,1,0+o,0+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 6:Ni(e,1,1,1+o,0+o,t,n,r);break;case 7:Ni(e,1,1,1+o,0+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 8:Ni(e,0,0,1+o,1+o,t,n,a),Ni(e,1,0,1+o,1+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 9:Ni(e,1,0,1+o,1+o,t,n,r),Ni(e,1,0,1+o,1+o,t,n,r);break;case 10:Ni(e,0,0,1+o,1+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 11:Ni(e,1,0,1+o,1+o,t,n,a),Ni(e,1,0,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 12:Ni(e,1,1,1+o,1+o,t,n,r);break;case 13:Ni(e,1,1,1+o,1+o,t,n,a),Ni(e,1,0,1+o,1+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2;break;case 14:Ni(e,1,1,1+o,1+o,t,n,a),Ni(e,1,1,1+o,0+o,t,n,s),r[0]=(a[0]+s[0])/2,r[1]=(a[1]+s[1])/2}return r}function Ui(e,t,i){const n=new Float32Array(2);for(let r=0,a=e.length;r<a;++r){const a=e[r],s=a.data,o=a.width;for(let e=0;e<o;++e)for(let a=0;a<o;++a){i?Oi(r,a,e,t,n):Li(r,a,e,t,n);const l=2*(e*o+a);s[l]=255*n[0],s[l+1]=255*n[1]}}}function Bi(e,t,i,n,r,a,s){const o=s.data,l=s.width;for(let s=0,c=i.length;s<c;++s){const c=n[s],u=i[s],h=u.data,d=u.width;for(let i=0;i<r;++i)for(let n=0;n<r;++n){const s=c[0]*r+e+n,u=4*((c[1]*r+t+i)*l+s),f=a?2*(i*i*d+n*n):2*(i*d+n);o[u]=h[f],o[u+1]=h[f+1],o[u+2]=0,o[u+3]=255}}}var Fi=class{static generate(){const e=5*Ti.length*16,t=new Uint8ClampedArray(160*e*4),i=new di(160,e,t),n=Math.pow(15,2)+1,r=[],a=[];for(let e=3,i=t.length;e<i;e+=4)t[e]=255;for(let e=0;e<16;++e)r.push(new di(n,n,new Uint8ClampedArray(n*n*2),2)),a.push(new di(20,20,new Uint8ClampedArray(800),2));for(let e=0,t=Ti.length;e<t;++e)Ui(r,Ti[e],!0),Bi(0,80*e,r,Mi,16,!0,i);for(let e=0,t=xi.length;e<t;++e)Ui(a,xi[e],!1),Bi(80,80*e,a,Ri,20,!1,i);return i}},Gi=i(5232),Vi=class{constructor(){this.disableCache=!1}setCacheEnabled(e){this.disableCache=!e}generate(){const e=!this.disableCache&&void 0!==window.localStorage,t=e?[localStorage.getItem("smaa-search"),localStorage.getItem("smaa-area")]:[null,null],i=null!==t[0]&&null!==t[1]?Promise.resolve(t):function(e=!0){const t=URL.createObjectURL(new Blob(['"use strict";(()=>{function q(t,a,s){let e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=t,e.height=a,s instanceof Image)n.drawImage(s,0,0);else{let r=n.createImageData(t,a);r.data.set(s),n.putImageData(r,0,0)}return e}var F=class t{constructor(a=0,s=0,e=null){this.width=a,this.height=s,this.data=e}toCanvas(){return typeof document=="undefined"?null:q(this.width,this.height,this.data)}static from(a){let{width:s,height:e}=a,n;if(a instanceof Image){let r=q(s,e,a);r!==null&&(n=r.getContext("2d").getImageData(0,0,s,e).data)}else n=a.data;return new t(s,e,n)}};var M=[new Float32Array(2),new Float32Array(2)],D=16,W=20,I=30,j=32,v=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),N=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],z=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],p=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function C(t,a,s){return t+(a-t)*s}function B(t){return Math.min(Math.max(t,0),1)}function _(t){let a=M[0],s=M[1],e=Math.sqrt(a[0]*2)*.5,n=Math.sqrt(a[1]*2)*.5,r=Math.sqrt(s[0]*2)*.5,o=Math.sqrt(s[1]*2)*.5,c=B(t/j);a[0]=C(e,a[0],c),a[1]=C(n,a[1],c),s[0]=C(r,s[0],c),s[1]=C(o,s[1],c)}function d(t,a,s,e,n,r){let o=s-t,c=e-a,h=n,i=n+1,w=a+c*(h-t)/o,b=a+c*(i-t)/o;if(h>=t&&h<s||i>t&&i<=s)if(Math.sign(w)===Math.sign(b)||Math.abs(w)<1e-4||Math.abs(b)<1e-4){let g=(w+b)/2;g<0?(r[0]=Math.abs(g),r[1]=0):(r[0]=0,r[1]=Math.abs(g))}else{let g=-a*o/c+t,k=Math.trunc(g),m=g>t?w*(g-k)/2:0,U=g<s?b*(1-(g-k))/2:0;(Math.abs(m)>Math.abs(U)?m:-U)<0?(r[0]=Math.abs(m),r[1]=Math.abs(U)):(r[0]=Math.abs(U),r[1]=Math.abs(m))}else r[0]=0,r[1]=0;return r}function J(t,a,s,e,n){let r=M[0],o=M[1],c=.5+e,h=.5+e-1,i=a+s+1;switch(t){case 0:{n[0]=0,n[1]=0;break}case 1:{a<=s?d(0,h,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 2:{a>=s?d(i/2,0,i,h,a,n):(n[0]=0,n[1]=0);break}case 3:{d(0,h,i/2,0,a,r),d(i/2,0,i,h,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 4:{a<=s?d(0,c,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 5:{n[0]=0,n[1]=0;break}case 6:{Math.abs(e)>0?(d(0,c,i,h,a,r),d(0,c,i/2,0,a,o),d(i/2,0,i,h,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,c,i,h,a,n);break}case 7:{d(0,c,i,h,a,n);break}case 8:{a>=s?d(i/2,0,i,c,a,n):(n[0]=0,n[1]=0);break}case 9:{Math.abs(e)>0?(d(0,h,i,c,a,r),d(0,h,i/2,0,a,o),d(i/2,0,i,c,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,h,i,c,a,n);break}case 10:{n[0]=0,n[1]=0;break}case 11:{d(0,h,i,c,a,n);break}case 12:{d(0,c,i/2,0,a,r),d(i/2,0,i,c,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 13:{d(0,h,i,c,a,n);break}case 14:{d(0,c,i,h,a,n);break}case 15:{n[0]=0,n[1]=0;break}}return n}function K(t,a,s,e,n,r){let o=t===s&&a===e;if(!o){let c=(t+s)/2,h=(a+e)/2,i=e-a,w=t-s;o=i*(n-c)+w*(r-h)>0}return o}function G(t,a,s,e,n,r){let o=0;for(let c=0;c<I;++c)for(let h=0;h<I;++h){let i=h/(I-1),w=c/(I-1);K(t,a,s,e,n+i,r+w)&&++o}return o/(I*I)}function A(t,a,s,e,n,r,o,c){let h=p[t],i=h[0],w=h[1];return i>0&&(a+=o[0],s+=o[1]),w>0&&(e+=o[0],n+=o[1]),c[0]=1-G(a,s,e,n,1+r,0+r),c[1]=G(a,s,e,n,1+r,1+r),c}function Q(t,a,s,e,n){let r=M[0],o=M[1],c=a+s+1;switch(t){case 0:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 1:{A(t,1,0,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 2:{A(t,0,0,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 3:{A(t,1,0,1+c,0+c,a,e,n);break}case 4:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 5:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 6:{A(t,1,1,1+c,0+c,a,e,n);break}case 7:{A(t,1,1,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 8:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 9:{A(t,1,0,1+c,1+c,a,e,n),A(t,1,0,1+c,1+c,a,e,n);break}case 10:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 11:{A(t,1,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 12:{A(t,1,1,1+c,1+c,a,e,n);break}case 13:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 14:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 15:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}}return n}function R(t,a,s){let e=new Float32Array(2);for(let n=0,r=t.length;n<r;++n){let o=t[n],c=o.data,h=o.width;for(let i=0;i<h;++i)for(let w=0;w<h;++w){s?J(n,w,i,a,e):Q(n,w,i,a,e);let b=(i*h+w)*2;c[b]=e[0]*255,c[b+1]=e[1]*255}}}function T(t,a,s,e,n,r,o){let c=o.data,h=o.width;for(let i=0,w=s.length;i<w;++i){let b=e[i],g=s[i],k=g.data,m=g.width;for(let U=0;U<n;++U)for(let x=0;x<n;++x){let Z=b[0]*n+t+x,O=((b[1]*n+a+U)*h+Z)*4,L=r?(U*U*m+x*x)*2:(U*m+x)*2;c[O]=k[L],c[O+1]=k[L+1],c[O+2]=0,c[O+3]=255}}}var S=class{static generate(){let a=10*D,s=v.length*5*D,e=new Uint8ClampedArray(a*s*4),n=new F(a,s,e),r=Math.pow(D-1,2)+1,o=W,c=[],h=[];for(let i=3,w=e.length;i<w;i+=4)e[i]=255;for(let i=0;i<16;++i)c.push(new F(r,r,new Uint8ClampedArray(r*r*2),2)),h.push(new F(o,o,new Uint8ClampedArray(o*o*2),2));for(let i=0,w=v.length;i<w;++i)R(c,v[i],!0),T(0,5*D*i,c,z,D,!0,n);for(let i=0,w=N.length;i<w;++i)R(h,N[i],!1),T(5*D,4*W*i,h,p,W,!1,n);return n}};var P=new Map([[y(0,0,0,0),new Float32Array([0,0,0,0])],[y(0,0,0,1),new Float32Array([0,0,0,1])],[y(0,0,1,0),new Float32Array([0,0,1,0])],[y(0,0,1,1),new Float32Array([0,0,1,1])],[y(0,1,0,0),new Float32Array([0,1,0,0])],[y(0,1,0,1),new Float32Array([0,1,0,1])],[y(0,1,1,0),new Float32Array([0,1,1,0])],[y(0,1,1,1),new Float32Array([0,1,1,1])],[y(1,0,0,0),new Float32Array([1,0,0,0])],[y(1,0,0,1),new Float32Array([1,0,0,1])],[y(1,0,1,0),new Float32Array([1,0,1,0])],[y(1,0,1,1),new Float32Array([1,0,1,1])],[y(1,1,0,0),new Float32Array([1,1,0,0])],[y(1,1,0,1),new Float32Array([1,1,0,1])],[y(1,1,1,0),new Float32Array([1,1,1,0])],[y(1,1,1,1),new Float32Array([1,1,1,1])]]);function H(t,a,s){return t+(a-t)*s}function y(t,a,s,e){let n=H(t,a,.75),r=H(s,e,1-.25);return H(n,r,1-.125)}function V(t,a){let s=0;return a[3]===1&&(s+=1),s===1&&a[2]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s}function $(t,a){let s=0;return a[3]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s===1&&a[2]===1&&t[0]!==1&&t[2]!==1&&(s+=1),s}var E=class{static generate(){let o=new Uint8ClampedArray(2178),c=new Uint8ClampedArray(64*16*4);for(let h=0;h<33;++h)for(let i=0;i<66;++i){let w=.03125*i,b=.03125*h;if(P.has(w)&&P.has(b)){let g=P.get(w),k=P.get(b),m=h*66+i;o[m]=127*V(g,k),o[m+33]=127*$(g,k)}}for(let h=0,i=33-16;i<33;++i)for(let w=0;w<64;++w,h+=4)c[h]=o[i*66+w],c[h+3]=255;return new F(64,16,c)}};self.addEventListener("message",t=>{let a=S.generate(),s=E.generate();postMessage({areaImageData:a,searchImageData:s},[a.data.buffer,s.data.buffer]),close()});})();\n'],{type:"text/javascript"})),i=new Worker(t);return URL.revokeObjectURL(t),new Promise(((t,n)=>{i.addEventListener("error",(e=>n(e.error))),i.addEventListener("message",(i=>{const n=di.from(i.data.searchImageData),r=di.from(i.data.areaImageData),a=[n.toCanvas().toDataURL("image/png",1),r.toCanvas().toDataURL("image/png",1)];e&&(localStorage.setItem("smaa-search",a[0]),localStorage.setItem("smaa-area",a[1])),t(a)})),i.postMessage(null)}))}(e);return i.then((e=>new Promise(((t,i)=>{const n=new Image,r=new Image,a=new Gi.LoadingManager;a.onLoad=()=>t([n,r]),a.onError=i,n.addEventListener("error",(e=>a.itemError("smaa-search"))),r.addEventListener("error",(e=>a.itemError("smaa-area"))),n.addEventListener("load",(()=>a.itemEnd("smaa-search"))),r.addEventListener("load",(()=>a.itemEnd("smaa-area"))),a.itemStart("smaa-search"),a.itemStart("smaa-area"),n.src=e[0],r.src=e[1]}))))}},zi=new Map([[ji(0,0,0,0),new Float32Array([0,0,0,0])],[ji(0,0,0,1),new Float32Array([0,0,0,1])],[ji(0,0,1,0),new Float32Array([0,0,1,0])],[ji(0,0,1,1),new Float32Array([0,0,1,1])],[ji(0,1,0,0),new Float32Array([0,1,0,0])],[ji(0,1,0,1),new Float32Array([0,1,0,1])],[ji(0,1,1,0),new Float32Array([0,1,1,0])],[ji(0,1,1,1),new Float32Array([0,1,1,1])],[ji(1,0,0,0),new Float32Array([1,0,0,0])],[ji(1,0,0,1),new Float32Array([1,0,0,1])],[ji(1,0,1,0),new Float32Array([1,0,1,0])],[ji(1,0,1,1),new Float32Array([1,0,1,1])],[ji(1,1,0,0),new Float32Array([1,1,0,0])],[ji(1,1,0,1),new Float32Array([1,1,0,1])],[ji(1,1,1,0),new Float32Array([1,1,1,0])],[ji(1,1,1,1),new Float32Array([1,1,1,1])]]);function Hi(e,t,i){return e+(t-e)*i}function ji(e,t,i,n){const r=Hi(e,t,.75),a=Hi(i,n,.75);return Hi(r,a,.875)}function Wi(e,t){let i=0;return 1===t[3]&&(i+=1),1===i&&1===t[2]&&1!==e[1]&&1!==e[3]&&(i+=1),i}function Yi(e,t){let i=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(i+=1),1===i&&1===t[2]&&1!==e[0]&&1!==e[2]&&(i+=1),i}var Xi=class{static generate(){const e=new Uint8ClampedArray(2178),t=new Uint8ClampedArray(4096);for(let t=0;t<33;++t)for(let i=0;i<66;++i){const n=.03125*i,r=.03125*t;if(zi.has(n)&&zi.has(r)){const a=zi.get(n),s=zi.get(r),o=66*t+i;e[o]=127*Wi(a,s),e[o+33]=127*Yi(a,s)}}for(let i=0,n=17;n<33;++n)for(let r=0;r<64;++r,i+=4)t[i]=e[66*n+r],t[i+3]=255;return new di(64,16,t)}},Zi=i(5232),qi=class extends Zi.DataTexture{constructor(e,t,i=Zi.LuminanceFormat,n=Zi.UnsignedByteType){super(function(e,t,i){const n=new Map([[Zi.LuminanceFormat,1],[Zi.RedFormat,1],[Zi.RGFormat,2],[Zi.RGBAFormat,4]]);let r;if(n.has(t)||console.error("Invalid noise texture format"),i===Zi.UnsignedByteType){r=new Uint8Array(e*n.get(t));for(let e=0,t=r.length;e<t;++e)r[e]=255*Math.random()+.5}else{r=new Float32Array(e*n.get(t));for(let e=0,t=r.length;e<t;++e)r[e]=Math.random()}return r}(e*t,i,n),e,t,i,n),this.needsUpdate=!0}},Qi="Glitch.Generated";function Ki(e,t){return e+Math.random()*(t-e)}var Ji=class extends jt{constructor({chromaticAberrationOffset:e=null,delay:t=new ci.Vector2(1.5,3.5),duration:i=new ci.Vector2(.6,1),strength:n=new ci.Vector2(.3,1),columns:r=.05,ratio:a=.85,perturbationMap:s=null,dtSize:o=64}={}){if(super("GlitchEffect","uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",{uniforms:new Map([["perturbationMap",new ci.Uniform(null)],["columns",new ci.Uniform(r)],["active",new ci.Uniform(!1)],["random",new ci.Uniform(1)],["seeds",new ci.Uniform(new ci.Vector2)],["distortion",new ci.Uniform(new ci.Vector2)]])}),null===s){const e=new qi(o,o,ci.RGBAFormat);e.name=Qi,this.perturbationMap=e}else this.perturbationMap=s;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=t,this.duration=i,this.breakPoint=new ci.Vector2(Ki(this.delay.x,this.delay.y),Ki(this.duration.x,this.duration.y)),this.strength=n,this.mode=D.SPORADIC,this.ratio=a,this.chromaticAberrationOffset=e}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(e){this.delay.x=e}getMinDelay(){return this.delay.x}setMinDelay(e){this.delay.x=e}get maxDelay(){return this.delay.y}set maxDelay(e){this.delay.y=e}getMaxDelay(){return this.delay.y}setMaxDelay(e){this.delay.y=e}get minDuration(){return this.duration.x}set minDuration(e){this.duration.x=e}getMinDuration(){return this.duration.x}setMinDuration(e){this.duration.x=e}get maxDuration(){return this.duration.y}set maxDuration(e){this.duration.y=e}getMaxDuration(){return this.duration.y}setMaxDuration(e){this.duration.y=e}get minStrength(){return this.strength.x}set minStrength(e){this.strength.x=e}getMinStrength(){return this.strength.x}setMinStrength(e){this.strength.x=e}get maxStrength(){return this.strength.y}set maxStrength(e){this.strength.y=e}getMaxStrength(){return this.strength.y}setMaxStrength(e){this.strength.y=e}getMode(){return this.mode}setMode(e){this.mode=e}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(e){this.ratio=Math.min(Math.max(1-e,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(e){this.uniforms.get("columns").value=e}getGlitchColumns(){return this.columns}setGlitchColumns(e){this.columns=e}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(e){this.chromaticAberrationOffset=e}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(e){const t=this.perturbationMap;null!==t&&t.name===Qi&&t.dispose(),e.minFilter=e.magFilter=ci.NearestFilter,e.wrapS=e.wrapT=ci.RepeatWrapping,e.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=e}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(e){this.perturbationMap=e}generatePerturbationMap(e=64){const t=new qi(e,e,ci.RGBAFormat);return t.name=Qi,t}update(e,t,i){const n=this.mode,r=this.breakPoint,a=this.chromaticAberrationOffset,s=this.strength;let o,l=this.time,c=!1,u=0,h=0;n!==D.DISABLED&&(n===D.SPORADIC&&(l+=i,o=l>r.x,l>=r.x+r.y&&(r.set(Ki(this.delay.x,this.delay.y),Ki(this.duration.x,this.duration.y)),l=0)),u=Math.random(),this.uniforms.get("random").value=u,o&&u>this.ratio||n===D.CONSTANT_WILD?(c=!0,u*=.03*s.y,h=Ki(-Math.PI,Math.PI),this.seeds.set(Ki(-s.y,s.y),Ki(-s.y,s.y)),this.distortion.set(Ki(0,1),Ki(0,1))):(o||n===D.CONSTANT_MILD)&&(c=!0,u*=.03*s.x,h=Ki(-Math.PI,Math.PI),this.seeds.set(Ki(-s.x,s.x),Ki(-s.x,s.x)),this.distortion.set(Ki(0,1),Ki(0,1))),this.time=l),null!==a&&(c?a.set(Math.cos(h),Math.sin(h)).multiplyScalar(u):a.set(0,0)),this.uniforms.get("active").value=c}dispose(){const e=this.perturbationMap;null!==e&&e.name===Qi&&e.dispose()}},$i=i(5232),en=new $i.Vector3,tn=new $i.Matrix4,nn=class extends jt{constructor(e,t,{blendFunction:i=y.SCREEN,samples:n=60,density:r=.96,decay:a=.9,weight:s=.4,exposure:o=.6,clampMax:l=1,blur:c=!0,kernelSize:u=O.SMALL,resolutionScale:h=.5,width:d=Ut.AUTO_SIZE,height:f=Ut.AUTO_SIZE,resolutionX:p=d,resolutionY:m=f}={}){super("GodRaysEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}",{blendFunction:i,attributes:P.DEPTH,uniforms:new Map([["map",new $i.Uniform(null)]])}),this.camera=e,this._lightSource=t,this.lightSource=t,this.lightScene=new $i.Scene,this.screenPosition=new $i.Vector2,this.renderTargetA=new $i.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new $i.WebGLRenderTarget(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new $i.DepthTexture,this.renderPassLight=new qe(this.lightScene,e),this.renderPassLight.clearPass.overrideClearColor=new $i.Color(0),this.clearPass=new Xe(!0,!1,!1),this.clearPass.overrideClearColor=new $i.Color(0),this.blurPass=new ht({kernelSize:u}),this.blurPass.enabled=c,this.depthMaskPass=new At(new he);const g=this.depthMaskMaterial;g.depthBuffer1=this.renderTargetLight.depthTexture,g.copyCameraSettings(e),this.godRaysPass=new At(new Ae(this.screenPosition));const v=this.godRaysMaterial;v.density=r,v.decay=a,v.weight=s,v.exposure=o,v.maxIntensity=l,v.samples=n;const b=this.resolution=new Ut(this,p,m,h);b.addEventListener("change",(e=>this.setSize(b.baseWidth,b.baseHeight)))}set mainCamera(e){this.camera=e,this.renderPassLight.mainCamera=e,this.depthMaskMaterial.copyCameraSettings(e)}get lightSource(){return this._lightSource}set lightSource(e){this._lightSource=e,null!==e&&(e.material.depthWrite=!1,e.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get dithering(){return this.godRaysMaterial.dithering}set dithering(e){const t=this.godRaysMaterial;t.dithering=e,t.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}get samples(){return this.godRaysMaterial.samples}set samples(e){this.godRaysMaterial.samples=e}setDepthTexture(e,t=$i.BasicDepthPacking){this.depthMaskPass.fullscreenMaterial.depthBuffer0=e,this.depthMaskPass.fullscreenMaterial.depthPacking0=t}update(e,t,i){const n=this.lightSource,r=n.parent,a=n.matrixAutoUpdate,s=this.renderTargetA,o=this.renderTargetLight;n.material.depthWrite=!0,n.matrixAutoUpdate=!1,n.updateWorldMatrix(!0,!1),null!==r&&(a||tn.copy(n.matrix),n.matrix.copy(n.matrixWorld)),this.lightScene.add(n),this.renderPassLight.render(e,o),this.clearPass.render(e,s),this.depthMaskPass.render(e,o,s),n.material.depthWrite=!1,n.matrixAutoUpdate=a,null!==r&&(a||n.matrix.copy(tn),r.add(n)),en.setFromMatrixPosition(n.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max(.5*(en.x+1),-1),2),Math.min(Math.max(.5*(en.y+1),-1),2)),this.blurPass.enabled&&this.blurPass.render(e,s,s),this.godRaysPass.render(e,s,this.renderTargetB)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.renderTargetA.setSize(n,r),this.renderTargetB.setSize(n,r),this.renderTargetLight.setSize(n,r),this.blurPass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),this.renderPassLight.initialize(e,t,i),this.depthMaskPass.initialize(e,t,i),this.godRaysPass.initialize(e,t,i),void 0!==i&&(this.renderTargetA.texture.type=i,this.renderTargetB.texture.type=i,this.renderTargetLight.texture.type=i,j(e)===w&&(W(this.renderTargetA.texture,w),W(this.renderTargetB.texture,w),W(this.renderTargetLight.texture,w)))}},rn=i(5232),an=class extends jt{constructor({blendFunction:e=y.OVERLAY,scale:t=1,lineWidth:i=0}={}){super("GridEffect","uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",{blendFunction:e,uniforms:new Map([["scale",new rn.Uniform(new rn.Vector2)],["lineWidth",new rn.Uniform(i)]])}),this.resolution=new rn.Vector2,this.s=0,this.scale=t,this.l=0,this.lineWidth=i}get scale(){return this.s}set scale(e){this.s=Math.max(e,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(e){this.scale=e}get lineWidth(){return this.l}set lineWidth(e){this.l=e,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(e){this.lineWidth=e}setSize(e,t){this.resolution.set(e,t);const i=e/t,n=this.scale*(.125*t);this.uniforms.get("scale").value.set(i*n,n),this.uniforms.get("lineWidth").value=n/t+this.lineWidth}},sn=i(5232),on=class extends jt{constructor({blendFunction:e=y.SRC,hue:t=0,saturation:i=0}={}){super("HueSaturationEffect","uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",{blendFunction:e,uniforms:new Map([["hue",new sn.Uniform(new sn.Vector3)],["saturation",new sn.Uniform(i)]])}),this.hue=t}get saturation(){return this.uniforms.get("saturation").value}set saturation(e){this.uniforms.get("saturation").value=e}getSaturation(){return this.saturation}setSaturation(e){this.saturation=e}get hue(){const e=this.uniforms.get("hue").value;return Math.acos((3*e.x-1)/2)}set hue(e){const t=Math.sin(e),i=Math.cos(e);this.uniforms.get("hue").value.set((2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3)}getHue(){return this.hue}setHue(e){this.hue=e}},ln=i(5232),cn=class extends jt{constructor({distortion:e=new ln.Vector2(0,0),principalPoint:t=new ln.Vector2(0,0),focalLength:i=new ln.Vector2(1,1),skew:n=0}={}){super("LensDistortionEffect","uniform vec2 distortion;uniform vec2 principalPoint;uniform vec2 focalLength;uniform float skew;float mask(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void mainUv(inout vec2 uv){vec2 xn=2.0*(uv.st-0.5);vec3 xDistorted=vec3((1.0+distortion*dot(xn,xn))*xn,1.0);mat3 kk=mat3(vec3(focalLength.x,0.0,0.0),vec3(skew*focalLength.x,focalLength.y,0.0),vec3(principalPoint.x,principalPoint.y,1.0));uv=(kk*xDistorted).xy*0.5+0.5;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=mask(uv)*inputColor;}",{uniforms:new Map([["distortion",new ln.Uniform(e)],["principalPoint",new ln.Uniform(t)],["focalLength",new ln.Uniform(i)],["skew",new ln.Uniform(n)]])})}get distortion(){return this.uniforms.get("distortion").value}set distortion(e){this.uniforms.get("distortion").value=e}get principalPoint(){return this.uniforms.get("principalPoint").value}set principalPoint(e){this.uniforms.get("principalPoint").value=e}get focalLength(){return this.uniforms.get("focalLength").value}set focalLength(e){this.uniforms.get("focalLength").value=e}get skew(){return this.uniforms.get("skew").value}set skew(e){this.uniforms.get("skew").value=e}},un=i(5232),hn=class extends jt{constructor(e,{blendFunction:t=y.SRC}={}){super("LUT1DEffect","#ifdef LUT_PRECISION_HIGH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D lut;\n#else\nuniform mediump sampler2D lut;\n#endif\n#else\nuniform lowp sampler2D lut;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(texture2D(lut,vec2(inputColor.r,0.5)).r,texture2D(lut,vec2(inputColor.g,0.5)).r,texture2D(lut,vec2(inputColor.b,0.5)).r,inputColor.a);}",{blendFunction:t,uniforms:new Map([["lut",new un.Uniform(null)]])}),this.lut=e}get lut(){return this.uniforms.get("lut").value}set lut(e){this.uniforms.get("lut").value=e,null===e||e.type!==un.FloatType&&e.type!==un.HalfFloatType||this.defines.set("LUT_PRECISION_HIGH","1")}},dn=i(5232),fn=class extends jt{constructor(e,{blendFunction:t=y.SRC,tetrahedralInterpolation:i=!1,inputEncoding:n=dn.sRGBEncoding,inputColorSpace:r}={}){super("LUT3DEffect","uniform vec3 scale;uniform vec3 offset;\n#ifdef CUSTOM_INPUT_DOMAIN\nuniform vec3 domainMin;uniform vec3 domainMax;\n#endif\n#ifdef LUT_3D\n#ifdef LUT_PRECISION_HIGH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler3D lut;\n#else\nuniform mediump sampler3D lut;\n#endif\n#else\nuniform lowp sampler3D lut;\n#endif\nvec4 applyLUT(const in vec3 rgb){\n#ifdef TETRAHEDRAL_INTERPOLATION\nvec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);\n#else\nreturn texture(lut,rgb);\n#endif\n}\n#else\n#ifdef LUT_PRECISION_HIGH\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D lut;\n#else\nuniform mediump sampler2D lut;\n#endif\n#else\nuniform lowp sampler2D lut;\n#endif\nvec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);\n#ifdef LUT_STRIP_HORIZONTAL\nfloat xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);\n#else\nfloat yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);\n#endif\nvec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;\n#ifdef CUSTOM_INPUT_DOMAIN\nif(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}\n#else\n#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)\nc=clamp(c,0.0,1.0);\n#endif\nc=applyLUT(scale*c+offset).rgb;\n#endif\noutputColor=vec4(c,inputColor.a);}",{blendFunction:t,uniforms:new Map([["lut",new dn.Uniform(null)],["scale",new dn.Uniform(new dn.Vector3)],["offset",new dn.Uniform(new dn.Vector3)],["domainMin",new dn.Uniform(null)],["domainMax",new dn.Uniform(null)]])}),this.tetrahedralInterpolation=i,this.inputColorSpace=r||z.get(n),this.lut=e}get inputEncoding(){return this.inputColorSpace}set inputEncoding(e){this.inputColorSpace=e}getInputEncoding(){return this.inputColorSpace}setInputEncoding(e){this.inputColorSpace=e}getOutputEncoding(){return this.outputColorSpace}get lut(){return this.uniforms.get("lut").value}set lut(e){const t=this.defines,i=this.uniforms;if(this.lut!==e&&(i.get("lut").value=e,null!==e)){const n=e.image,r=this.tetrahedralInterpolation;if(t.clear(),t.set("LUT_SIZE",Math.min(n.width,n.height).toFixed(16)),t.set("LUT_TEXEL_WIDTH",(1/n.width).toFixed(16)),t.set("LUT_TEXEL_HEIGHT",(1/n.height).toFixed(16)),i.get("domainMin").value=null,i.get("domainMax").value=null,e.type!==dn.FloatType&&e.type!==dn.HalfFloatType||t.set("LUT_PRECISION_HIGH","1"),n.width>n.height?t.set("LUT_STRIP_HORIZONTAL","1"):e instanceof dn.Data3DTexture&&t.set("LUT_3D","1"),e instanceof pi){const n=e.domainMin,r=e.domainMax;0===n.x&&0===n.y&&0===n.z&&1===r.x&&1===r.y&&1===r.z||(t.set("CUSTOM_INPUT_DOMAIN","1"),i.get("domainMin").value=n.clone(),i.get("domainMax").value=r.clone())}this.tetrahedralInterpolation=r}}getLUT(){return this.lut}setLUT(e){this.lut=e}updateScaleOffset(){const e=this.lut;if(null!==e){const t=Math.min(e.image.width,e.image.height),i=this.uniforms.get("scale").value,n=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&e instanceof dn.Data3DTexture)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=e.domainMax.clone().sub(e.domainMin);i.setScalar(t-1).divide(r),n.copy(e.domainMin).negate().multiply(i)}else i.setScalar(t-1),n.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=e.domainMax.clone().sub(e.domainMin).multiplyScalar(t);i.setScalar(t-1).divide(r),n.copy(e.domainMin).negate().multiply(i).addScalar(1/(2*t))}else i.setScalar((t-1)/t),n.setScalar(1/(2*t))}}configureTetrahedralInterpolation(){const e=this.lut;null!==e&&(e.minFilter=dn.LinearFilter,e.magFilter=dn.LinearFilter,this.tetrahedralInterpolation&&(e instanceof dn.Data3DTexture?(e.minFilter=dn.NearestFilter,e.magFilter=dn.NearestFilter):console.warn("Tetrahedral interpolation requires a 3D texture")),void 0===e.source&&(e.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(e){e?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(e){this.tetrahedralInterpolation=e}},pn=class extends jt{constructor({blendFunction:e=y.SCREEN,premultiply:t=!1}={}){super("NoiseEffect","void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}",{blendFunction:e}),this.premultiply=t}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(e){this.premultiply!==e&&(e?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(e){this.premultiply=e}},mn=i(5232),gn=class extends jt{constructor(e,t,{blendFunction:i=y.SCREEN,patternTexture:n=null,patternScale:r=1,edgeStrength:a=1,pulseSpeed:s=0,visibleEdgeColor:o=16777215,hiddenEdgeColor:l=2230538,kernelSize:c=O.VERY_SMALL,blur:u=!1,xRay:h=!0,multisampling:d=0,resolutionScale:f=.5,width:p=Ut.AUTO_SIZE,height:m=Ut.AUTO_SIZE,resolutionX:g=p,resolutionY:v=m}={}){super("OutlineEffect","uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\n#ifdef USE_PATTERN\nuniform lowp sampler2D patternTexture;varying vec2 vUvPattern;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\n#ifndef X_RAY\nedge.y=0.0;\n#endif\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\n#ifdef USE_PATTERN\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\n#ifdef X_RAY\nfloat hiddenFactor=0.5;\n#else\nfloat hiddenFactor=0.0;\n#endif\nvisibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\n#endif\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\n#ifdef ALPHA\noutputColor=vec4(color,alpha);\n#else\noutputColor=vec4(color,max(alpha,inputColor.a));\n#endif\n}",{uniforms:new Map([["maskTexture",new mn.Uniform(null)],["edgeTexture",new mn.Uniform(null)],["edgeStrength",new mn.Uniform(a)],["visibleEdgeColor",new mn.Uniform(new mn.Color(o))],["hiddenEdgeColor",new mn.Uniform(new mn.Color(l))],["pulse",new mn.Uniform(1)],["patternScale",new mn.Uniform(r)],["patternTexture",new mn.Uniform(null)]])}),this.blendMode.addEventListener("change",(e=>{this.blendMode.blendFunction===y.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()})),this.blendMode.blendFunction=i,this.patternTexture=n,this.xRay=h,this.scene=e,this.camera=t,this.renderTargetMask=new mn.WebGLRenderTarget(1,1),this.renderTargetMask.samples=d,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new mn.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Xe,this.clearPass.overrideClearColor=new mn.Color(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new Qe(e,t),this.maskPass=new qe(e,t,new ae(this.depthPass.texture,t));const b=this.maskPass.clearPass;b.overrideClearColor=new mn.Color(16777215),b.overrideClearAlpha=1,this.blurPass=new ht({resolutionScale:f,resolutionX:g,resolutionY:v,kernelSize:c}),this.blurPass.enabled=u;const _=this.blurPass.resolution;_.addEventListener("change",(e=>this.setSize(_.baseWidth,_.baseHeight))),this.outlinePass=new At(new Me),this.outlinePass.fullscreenMaterial.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new Bt,this.selection.layer=10,this.pulseSpeed=s}set mainScene(e){this.scene=e,this.depthPass.mainScene=e,this.maskPass.mainScene=e}set mainCamera(e){this.camera=e,this.depthPass.mainCamera=e,this.maskPass.mainCamera=e,this.maskPass.overrideMaterial.copyCameraSettings(e)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(e){this.renderTargetMask.samples=e,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(e){this.uniforms.get("patternScale").value=e}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(e){this.uniforms.get("edgeStrength").value=e}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(e){this.uniforms.get("visibleEdgeColor").value=e}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(e){this.uniforms.get("hiddenEdgeColor").value=e}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(e){this.pulseSpeed=e}get width(){return this.resolution.width}set width(e){this.resolution.preferredWidth=e}get height(){return this.resolution.height}set height(e){this.resolution.preferredHeight=e}get selectionLayer(){return this.selection.layer}set selectionLayer(e){this.selection.layer=e}get dithering(){return this.blurPass.dithering}set dithering(e){this.blurPass.dithering=e}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(e){this.blurPass.kernelSize=e}get blur(){return this.blurPass.enabled}set blur(e){this.blurPass.enabled=e}get xRay(){return this.defines.has("X_RAY")}set xRay(e){this.xRay!==e&&(e?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(e){this.xRay=e}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(e){null!==e?(e.wrapS=e.wrapT=mn.RepeatWrapping,this.defines.set("USE_PATTERN","1"),this.setVertexShader("uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}")):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=e,this.setChanged()}setPatternTexture(e){this.patternTexture=e}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}setSelection(e){return this.selection.set(e),this}clearSelection(){return this.selection.clear(),this}selectObject(e){return this.selection.add(e),this}deselectObject(e){return this.selection.delete(e),this}update(e,t,i){const n=this.scene,r=this.camera,a=this.selection,s=this.uniforms.get("pulse"),o=n.background,l=r.layers.mask;(this.forceUpdate||a.size>0)&&(n.background=null,s.value=1,this.pulseSpeed>0&&(s.value=.375*Math.cos(this.time*this.pulseSpeed*10)+.625),this.time+=i,a.setVisible(!1),this.depthPass.render(e),a.setVisible(!0),r.layers.set(a.layer),this.maskPass.render(e,this.renderTargetMask),r.layers.mask=l,n.background=o,this.outlinePass.render(e,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(e,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=a.size>0}setSize(e,t){this.blurPass.setSize(e,t),this.renderTargetMask.setSize(e,t);const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.depthPass.setSize(n,r),this.renderTargetOutline.setSize(n,r),this.outlinePass.fullscreenMaterial.setSize(n,r)}initialize(e,t,i){this.blurPass.initialize(e,t,mn.UnsignedByteType),void 0!==i&&(this.depthPass.initialize(e,t,i),this.maskPass.initialize(e,t,i),this.outlinePass.initialize(e,t,i))}},vn=i(5232),bn=class extends jt{constructor(e=30){super("PixelationEffect","uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",{uniforms:new Map([["active",new vn.Uniform(!1)],["d",new vn.Uniform(new vn.Vector4)]])}),this.resolution=new vn.Vector2,this._granularity=0,this.granularity=e}get granularity(){return this._granularity}set granularity(e){let t=Math.floor(e);t%2>0&&(t+=1),this._granularity=t,this.uniforms.get("active").value=t>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(e){this.granularity=e}setSize(e,t){const i=this.resolution;i.set(e,t);const n=this.granularity,r=n/i.x,a=n/i.y;this.uniforms.get("d").value.set(r,a,1/r,1/a)}},_n=i(5232),yn=class extends jt{constructor({blendFunction:e,focus:t=1,focalLength:i=24,fStop:n=.9,luminanceThreshold:r=.5,luminanceGain:a=2,bias:s=.5,fringe:o=.7,maxBlur:l=1,rings:c=3,samples:u=2,showFocus:h=!1,manualDoF:d=!1,pentagon:f=!1}={}){super("RealisticBokehEffect","uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\n#ifdef MANUAL_DOF\nuniform vec4 dof;\n#endif\n#ifdef PENTAGON\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\n#endif\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\n#ifdef PENTAGON\nfloat p=pentagon(wh);\n#else\nfloat p=1.0;\n#endif\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\n#ifdef MANUAL_DOF\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)?farDoF:nearDoF;\n#else\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\n#endif\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\n#ifdef SHOW_FOCUS\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,attributes:P.CONVOLUTION|P.DEPTH,uniforms:new Map([["focus",new _n.Uniform(t)],["focalLength",new _n.Uniform(i)],["fStop",new _n.Uniform(n)],["luminanceThreshold",new _n.Uniform(r)],["luminanceGain",new _n.Uniform(a)],["bias",new _n.Uniform(s)],["fringe",new _n.Uniform(o)],["maxBlur",new _n.Uniform(l)],["dof",new _n.Uniform(null)]])}),this.rings=c,this.samples=u,this.showFocus=h,this.manualDoF=d,this.pentagon=f}get rings(){return Number.parseInt(this.defines.get("RINGS_INT"))}set rings(e){const t=Math.floor(e);this.defines.set("RINGS_INT",t.toFixed(0)),this.defines.set("RINGS_FLOAT",t.toFixed(1)),this.setChanged()}get samples(){return Number.parseInt(this.defines.get("SAMPLES_INT"))}set samples(e){const t=Math.floor(e);this.defines.set("SAMPLES_INT",t.toFixed(0)),this.defines.set("SAMPLES_FLOAT",t.toFixed(1)),this.setChanged()}get showFocus(){return this.defines.has("SHOW_FOCUS")}set showFocus(e){this.showFocus!==e&&(e?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS"),this.setChanged())}get manualDoF(){return this.defines.has("MANUAL_DOF")}set manualDoF(e){this.manualDoF!==e&&(e?(this.defines.set("MANUAL_DOF","1"),this.uniforms.get("dof").value=new _n.Vector4(.2,1,.2,2)):(this.defines.delete("MANUAL_DOF"),this.uniforms.get("dof").value=null),this.setChanged())}get pentagon(){return this.defines.has("PENTAGON")}set pentagon(e){this.pentagon!==e&&(e?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON"),this.setChanged())}},An=i(5232),En=class extends jt{constructor({blendFunction:e=y.OVERLAY,density:t=1.25,scrollSpeed:i=0}={}){super("ScanlineEffect","uniform float count;\n#ifdef SCROLL\nuniform float scrollSpeed;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;\n#ifdef SCROLL\ny+=time*scrollSpeed;\n#endif\nvec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}",{blendFunction:e,uniforms:new Map([["count",new An.Uniform(0)],["scrollSpeed",new An.Uniform(0)]])}),this.resolution=new An.Vector2,this.d=t,this.scrollSpeed=i}get density(){return this.d}set density(e){this.d=e,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(e){this.density=e}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(e){this.uniforms.get("scrollSpeed").value=e,0===e?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(e,t){this.resolution.set(e,t),this.uniforms.get("count").value=Math.round(t*this.density)}},wn=i(5232),Sn=.5*Math.PI,Tn=new wn.Vector3,xn=new wn.Vector3,Mn=class extends jt{constructor(e,t=new wn.Vector3,{speed:i=2,maxRadius:n=1,waveSize:r=.2,amplitude:a=.05}={}){super("ShockWaveEffect","uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",{vertexShader:"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",uniforms:new Map([["active",new wn.Uniform(!1)],["center",new wn.Uniform(new wn.Vector2(.5,.5))],["cameraDistance",new wn.Uniform(1)],["size",new wn.Uniform(1)],["radius",new wn.Uniform(-r)],["maxRadius",new wn.Uniform(n)],["waveSize",new wn.Uniform(r)],["amplitude",new wn.Uniform(a)]])}),this.position=t,this.speed=i,this.camera=e,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(e){this.camera=e}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(e){this.uniforms.get("amplitude").value=e}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(e){this.uniforms.get("waveSize").value=e}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(e){this.uniforms.get("maxRadius").value=e}get epicenter(){return this.position}set epicenter(e){this.position=e}getPosition(){return this.position}setPosition(e){this.position=e}getSpeed(){return this.speed}setSpeed(e){this.speed=e}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(e,t,i){const n=this.position,r=this.camera,a=this.uniforms,s=a.get("active");if(this.active){const e=a.get("waveSize").value;r.getWorldDirection(Tn),xn.copy(r.position).sub(n),s.value=Tn.angleTo(xn)>Sn,s.value&&(a.get("cameraDistance").value=r.position.distanceTo(n),Tn.copy(n).project(r),this.screenPosition.set(.5*(Tn.x+1),.5*(Tn.y+1))),this.time+=i*this.speed;const t=this.time-e;a.get("radius").value=t,t>=2*(a.get("maxRadius").value+e)&&(this.active=!1,s.value=!1)}}},Rn=i(5232),Pn=class extends Wt{constructor(e,t,i){super(i),this.setAttributes(this.getAttributes()|P.DEPTH),this.camera=t,this.depthPass=new Qe(e,t),this.clearPass=new Xe(!0,!1,!1),this.clearPass.overrideClearColor=new Rn.Color(0),this.depthMaskPass=new At(new he);const n=this.depthMaskMaterial;n.copyCameraSettings(t),n.depthBuffer1=this.depthPass.texture,n.depthPacking1=Rn.RGBADepthPacking,n.depthMode=Rn.EqualDepth,this.renderTargetMasked=new Rn.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new Bt,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(e){this.depthPass.mainScene=e}set mainCamera(e){this.camera=e,this.depthPass.mainCamera=e,this.depthMaskMaterial.copyCameraSettings(e)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(e){this._inverted=e,this.depthMaskMaterial.depthMode=e?Rn.NotEqualDepth:Rn.EqualDepth}isInverted(){return this.inverted}setInverted(e){this.inverted=e}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(e){this._ignoreBackground=e,this.depthMaskMaterial.maxDepthStrategy=e?M.DISCARD_MAX_DEPTH:M.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}setDepthTexture(e,t=Rn.BasicDepthPacking){this.depthMaskMaterial.depthBuffer0=e,this.depthMaskMaterial.depthPacking0=t}update(e,t,i){const n=this.camera,r=this.selection,a=this.inverted;let s=t;if(this.ignoreBackground||!a||r.size>0){const i=n.layers.mask;n.layers.set(r.layer),this.depthPass.render(e),n.layers.mask=i,s=this.renderTargetMasked,this.clearPass.render(e,s),this.depthMaskPass.render(e,t,s)}super.update(e,s,i)}setSize(e,t){super.setSize(e,t),this.renderTargetMasked.setSize(e,t),this.depthPass.setSize(e,t)}initialize(e,t,i){super.initialize(e,t,i),this.clearPass.initialize(e,t,i),this.depthPass.initialize(e,t,i),this.depthMaskPass.initialize(e,t,i),e.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),void 0!==i&&(this.renderTargetMasked.texture.type=i,j(e)===w&&W(this.renderTargetMasked.texture,w))}},Cn=i(5232),Dn=class extends jt{constructor({blendFunction:e,intensity:t=1}={}){super("SepiaEffect","uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",{blendFunction:e,uniforms:new Map([["weightsR",new Cn.Uniform(new Cn.Vector3(.393,.769,.189))],["weightsG",new Cn.Uniform(new Cn.Vector3(.349,.686,.168))],["weightsB",new Cn.Uniform(new Cn.Vector3(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(e){this.blendMode.opacity.value=e}getIntensity(){return this.intensity}setIntensity(e){this.intensity=e}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},On=i(5232),kn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",In="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",Nn=class extends jt{constructor({blendFunction:e=y.SRC,preset:t=L.MEDIUM,edgeDetectionMode:i=R.COLOR,predicationMode:n=N.DISABLED}={}){let r,a;super("SMAAEffect","uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",{vertexShader:"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",blendFunction:e,attributes:P.CONVOLUTION|P.DEPTH,uniforms:new Map([["weightMap",new On.Uniform(null)]])}),arguments.length>1&&(r=arguments[0],a=arguments[1],arguments.length>2&&(t=arguments[2]),arguments.length>3&&(i=arguments[3])),this.renderTargetEdges=new On.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new Xe(!0,!1,!1),this.clearPass.overrideClearColor=new On.Color(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new At(new me),this.edgeDetectionMaterial.edgeDetectionMode=i,this.edgeDetectionMaterial.predicationMode=n,this.weightsPass=new At(new Pe);const s=new On.LoadingManager;s.onLoad=()=>{const e=new On.Texture(r);e.name="SMAA.Search",e.magFilter=On.NearestFilter,e.minFilter=On.NearestFilter,e.generateMipmaps=!1,e.needsUpdate=!0,e.flipY=!0,this.weightsMaterial.searchTexture=e;const t=new On.Texture(a);t.name="SMAA.Area",t.magFilter=On.LinearFilter,t.minFilter=On.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.flipY=!1,this.weightsMaterial.areaTexture=t,this.dispatchEvent({type:"load"})},s.itemStart("search"),s.itemStart("area"),void 0!==r&&void 0!==a?(s.itemEnd("search"),s.itemEnd("area")):"undefined"!=typeof Image&&(r=new Image,a=new Image,r.addEventListener("load",(()=>s.itemEnd("search"))),a.addEventListener("load",(()=>s.itemEnd("area"))),r.src=kn,a.src=In),this.applyPreset(t)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(e){this.edgeDetectionMaterial.edgeDetectionThreshold=e}setOrthogonalSearchSteps(e){this.weightsMaterial.orthogonalSearchSteps=e}applyPreset(e){const t=this.edgeDetectionMaterial,i=this.weightsMaterial;switch(e){case L.LOW:t.edgeDetectionThreshold=.15,i.orthogonalSearchSteps=4,i.diagonalDetection=!1,i.cornerDetection=!1;break;case L.MEDIUM:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=8,i.diagonalDetection=!1,i.cornerDetection=!1;break;case L.HIGH:t.edgeDetectionThreshold=.1,i.orthogonalSearchSteps=16,i.diagonalSearchSteps=8,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0;break;case L.ULTRA:t.edgeDetectionThreshold=.05,i.orthogonalSearchSteps=32,i.diagonalSearchSteps=16,i.cornerRounding=25,i.diagonalDetection=!0,i.cornerDetection=!0}}setDepthTexture(e,t=On.BasicDepthPacking){this.edgeDetectionMaterial.depthBuffer=e,this.edgeDetectionMaterial.depthPacking=t}update(e,t,i){this.clearPass.render(e,this.renderTargetEdges),this.edgeDetectionPass.render(e,t,this.renderTargetEdges),this.weightsPass.render(e,this.renderTargetEdges,this.renderTargetWeights)}setSize(e,t){this.edgeDetectionMaterial.setSize(e,t),this.weightsMaterial.setSize(e,t),this.renderTargetEdges.setSize(e,t),this.renderTargetWeights.setSize(e,t)}dispose(){const{searchTexture:e,areaTexture:t}=this.weightsMaterial;null!==e&&null!==t&&(e.dispose(),t.dispose()),super.dispose()}static get searchImageDataURL(){return kn}static get areaImageDataURL(){return In}},Ln=i(5232),Un=class extends jt{constructor(e,t,{blendFunction:i=y.MULTIPLY,samples:n=9,rings:r=7,normalDepthBuffer:a=null,depthAwareUpsampling:s=!0,worldDistanceThreshold:o,worldDistanceFalloff:l,worldProximityThreshold:c,worldProximityFalloff:u,distanceThreshold:h=.97,distanceFalloff:d=.03,rangeThreshold:f=5e-4,rangeFalloff:p=.001,minRadiusScale:m=.1,luminanceInfluence:g=.7,radius:v=.1825,intensity:b=1,bias:_=.025,fade:A=.01,color:E=null,resolutionScale:w=1,width:S=Ut.AUTO_SIZE,height:T=Ut.AUTO_SIZE,resolutionX:x=S,resolutionY:M=T}={}){super("SSAOEffect","uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D normalDepthBuffer;\n#else\nuniform mediump sampler2D normalDepthBuffer;\n#endif\n#endif\n#ifdef COLORIZE\nuniform vec3 color;\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\n#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300\nvec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\n#else\nfloat ao=aoLinear;\n#endif\nfloat l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);\n#ifdef COLORIZE\noutputColor=vec4(1.0-ao*(1.0-color),inputColor.a);\n#else\noutputColor=vec4(vec3(1.0-ao),inputColor.a);\n#endif\n}",{blendFunction:i,attributes:P.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new Ln.Uniform(null)],["normalDepthBuffer",new Ln.Uniform(a)],["luminanceInfluence",new Ln.Uniform(g)],["color",new Ln.Uniform(null)],["intensity",new Ln.Uniform(b)],["scale",new Ln.Uniform(0)]])}),this.renderTarget=new Ln.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const R=this.resolution=new Ut(this,x,M,w);R.addEventListener("change",(e=>this.setSize(R.baseWidth,R.baseHeight))),this.camera=e,this.depthDownsamplingPass=new Je({normalBuffer:t,resolutionScale:w}),this.depthDownsamplingPass.enabled=null===a,this.ssaoPass=new At(new De(e));const C=new qi(64,64,Ln.RGBAFormat);C.wrapS=C.wrapT=Ln.RepeatWrapping;const D=this.ssaoMaterial;D.normalBuffer=t,D.noiseTexture=C,D.minRadiusScale=m,D.samples=n,D.radius=v,D.rings=r,D.fade=A,D.bias=_,D.distanceThreshold=h,D.distanceFalloff=d,D.proximityThreshold=f,D.proximityFalloff=p,void 0!==o&&(D.worldDistanceThreshold=o),void 0!==l&&(D.worldDistanceFalloff=l),void 0!==c&&(D.worldProximityThreshold=c),void 0!==u&&(D.worldProximityFalloff=u),null!==a&&(this.ssaoMaterial.normalDepthBuffer=a,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=s,this.color=E}set mainCamera(e){this.camera=e,this.ssaoMaterial.copyCameraSettings(e)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(e){this.ssaoMaterial.normalBuffer=e,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=e}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(e){this.ssaoMaterial.samples=e}get rings(){return this.ssaoMaterial.rings}set rings(e){this.ssaoMaterial.rings=e}get radius(){return this.ssaoMaterial.radius}set radius(e){this.ssaoMaterial.radius=e}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(e){this.depthAwareUpsampling!==e&&(e?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(e){this.depthAwareUpsampling=e}get distanceScaling(){return!0}set distanceScaling(e){}get color(){return this.uniforms.get("color").value}set color(e){const t=this.uniforms,i=this.defines;null!==e?i.has("COLORIZE")?t.get("color").value.set(e):(i.set("COLORIZE","1"),t.get("color").value=new Ln.Color(e),this.setChanged()):i.has("COLORIZE")&&(i.delete("COLORIZE"),t.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(e){this.uniforms.get("luminanceInfluence").value=e}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getColor(){return this.color}setColor(e){this.color=e}setDistanceCutoff(e,t){this.ssaoMaterial.distanceThreshold=e,this.ssaoMaterial.distanceFalloff=t}setProximityCutoff(e,t){this.ssaoMaterial.proximityThreshold=e,this.ssaoMaterial.proximityFalloff=t}setDepthTexture(e,t=Ln.BasicDepthPacking){this.depthDownsamplingPass.setDepthTexture(e,t),this.ssaoMaterial.depthBuffer=e,this.ssaoMaterial.depthPacking=t}update(e,t,i){const n=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(e),this.ssaoPass.render(e,null,n)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t);const n=i.width,r=i.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(n,r),this.renderTarget.setSize(n,r),this.depthDownsamplingPass.resolution.scale=i.scale,this.depthDownsamplingPass.setSize(e,t)}initialize(e,t,i){try{let n=this.uniforms.get("normalDepthBuffer").value;null===n&&(this.depthDownsamplingPass.initialize(e,t,i),n=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=n,this.ssaoMaterial.normalDepthBuffer=n,this.defines.set("NORMAL_DEPTH","1"))}catch(e){this.depthDownsamplingPass.enabled=!1}}},Bn=i(5232),Fn=class extends jt{constructor({blendFunction:e,texture:t=null,aspectCorrection:i=!1}={}){super("TextureEffect","#ifdef TEXTURE_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nvarying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#ifdef UV_TRANSFORM\nvec4 texel=texture2D(map,vUv2);\n#else\nvec4 texel=texture2D(map,uv);\n#endif\noutputColor=TEXEL;}",{blendFunction:e,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new Bn.Uniform(null)],["scale",new Bn.Uniform(1)],["uvTransform",new Bn.Uniform(null)]])}),this.texture=t,this.aspectCorrection=i}get texture(){return this.uniforms.get("map").value}set texture(e){const t=this.texture,i=this.uniforms,n=this.defines;t!==e&&(i.get("map").value=e,i.get("uvTransform").value=e.matrix,n.delete("TEXTURE_PRECISION_HIGH"),null!==e&&(e.matrixAutoUpdate?(n.set("UV_TRANSFORM","1"),this.setVertexShader("#ifdef ASPECT_CORRECTION\nuniform float scale;\n#else\nuniform mat3 uvTransform;\n#endif\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\n#ifdef ASPECT_CORRECTION\nvUv2=uv*vec2(aspect,1.0)*scale;\n#else\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\n#endif\n}")):(n.delete("UV_TRANSFORM"),this.setVertexShader(null)),e.type!==Bn.UnsignedByteType&&n.set("TEXTURE_PRECISION_HIGH","1"),null!==t&&t.type===e.type&&t.encoding===e.encoding||this.setChanged()))}getTexture(){return this.texture}setTexture(e){this.texture=e}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(e){this.aspectCorrection!==e&&(e?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const e=this.texture;return null!==e&&e.matrixAutoUpdate}set uvTransform(e){const t=this.texture;null!==t&&(t.matrixAutoUpdate=e)}setTextureSwizzleRGBA(e,t=e,i=e,n=e){const r="rgba";let a="";e===A.RED&&t===A.GREEN&&i===A.BLUE&&n===A.ALPHA||(a=[".",r[e],r[t],r[i],r[n]].join("")),this.defines.set("TEXEL","texel"+a),this.setChanged()}update(e,t,i){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}},Gn=i(5232),Vn=class extends jt{constructor({blendFunction:e,offset:t=0,rotation:i=0,focusArea:n=.4,feather:r=.3,kernelSize:a=O.MEDIUM,resolutionScale:s=.5,resolutionX:o=Ut.AUTO_SIZE,resolutionY:l=Ut.AUTO_SIZE}={}){super("TiltShiftEffect","#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}",{vertexShader:"uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",blendFunction:e,uniforms:new Map([["rotation",new Gn.Uniform(new Gn.Vector2)],["maskParams",new Gn.Uniform(new Gn.Vector2)],["map",new Gn.Uniform(null)]])}),this._offset=t,this._focusArea=n,this._feather=r,this.renderTarget=new Gn.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new Et({kernelSize:a,resolutionScale:s,resolutionX:o,resolutionY:l,offset:t,rotation:i,focusArea:n,feather:r});const c=this.resolution=new Ut(this,o,l,s);c.addEventListener("change",(e=>this.setSize(c.baseWidth,c.baseHeight))),this.rotation=i,this.updateParams()}updateParams(){const e=this.uniforms.get("maskParams").value,t=Math.max(this.focusArea-this.feather,0);e.set(this.offset-t,this.offset+t)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(e){this.uniforms.get("rotation").value.set(Math.cos(e),Math.sin(e)),this.blurPass.blurMaterial.rotation=e}get offset(){return this._offset}set offset(e){this._offset=e,this.blurPass.blurMaterial.offset=e,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(e){this._focusArea=e,this.blurPass.blurMaterial.focusArea=e,this.updateParams()}get feather(){return this._feather}set feather(e){this._feather=e,this.blurPass.blurMaterial.feather=e,this.updateParams()}get bias(){return 0}set bias(e){}update(e,t,i){this.blurPass.render(e,t,this.renderTarget)}setSize(e,t){const i=this.resolution;i.setBaseSize(e,t),this.renderTarget.setSize(i.width,i.height),this.blurPass.resolution.copy(i)}initialize(e,t,i){this.blurPass.initialize(e,t,i),void 0!==i&&(this.renderTarget.texture.type=i,j(e)===w&&W(this.renderTarget.texture,w))}},zn=i(5232),Hn=class extends jt{constructor({blendFunction:e=y.SRC,adaptive:t=!1,mode:i=(t?U.REINHARD2_ADAPTIVE:U.ACES_FILMIC),resolution:n=256,maxLuminance:r=4,whitePoint:a=r,middleGrey:s=.6,minLuminance:o=.01,averageLuminance:l=1,adaptationRate:c=1}={}){super("ToneMappingEffect","#include <tonemapping_pars_fragment>\n#if THREE_REVISION < 143\n#define luminance(v) linearToRelativeLuminance(v)\n#endif\nuniform float whitePoint;\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\nuniform float middleGrey;\n#if TONE_MAPPING_MODE == 2\nuniform lowp sampler2D luminanceBuffer;\n#else\nuniform float averageLuminance;\n#endif\nvec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);\n#if TONE_MAPPING_MODE == 2\nfloat lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));\n#else\nfloat lumAvg=averageLuminance;\n#endif\nfloat lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}\n#elif TONE_MAPPING_MODE == 5\n#define A 0.15\n#define B 0.50\n#define C 0.10\n#define D 0.20\n#define E 0.02\n#define F 0.30\nvec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}\n#endif\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\n#if TONE_MAPPING_MODE == 1 || TONE_MAPPING_MODE == 2\noutputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);\n#elif TONE_MAPPING_MODE == 5\noutputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);\n#else\noutputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);\n#endif\n}",{blendFunction:e,uniforms:new Map([["luminanceBuffer",new zn.Uniform(null)],["maxLuminance",new zn.Uniform(r)],["whitePoint",new zn.Uniform(a)],["middleGrey",new zn.Uniform(s)],["averageLuminance",new zn.Uniform(l)]])}),this.renderTargetLuminance=new zn.WebGLRenderTarget(1,1,{minFilter:zn.LinearMipmapLinearFilter,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new pt({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new ze(this.luminancePass.texture,{minLuminance:o,adaptationRate:c}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=n,this.mode=i}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(e){if(this.mode!==e){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",e.toFixed(0)),e){case U.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case U.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case U.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel")}this.adaptiveLuminancePass.enabled=e===U.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(e){this.mode=e}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(e){this.uniforms.get("whitePoint").value=e}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(e){this.uniforms.get("middleGrey").value=e}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(e){this.uniforms.get("averageLuminance").value=e}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(e){const t=Math.max(0,Math.ceil(Math.log2(e))),i=Math.pow(2,t);this.luminancePass.resolution.setPreferredSize(i,i),this.adaptiveLuminanceMaterial.mipLevel1x1=t}getResolution(){return this.resolution}setResolution(e){this.resolution=e}get adaptive(){return this.mode===U.REINHARD2_ADAPTIVE}set adaptive(e){this.mode=e?U.REINHARD2_ADAPTIVE:U.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(e){this.adaptiveLuminanceMaterial.adaptationRate=e}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(e){console.warn(this.name,"distinction was removed.")}update(e,t,i){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(e,t),this.adaptiveLuminancePass.render(e,null,null,i))}initialize(e,t,i){this.adaptiveLuminancePass.initialize(e,t,i)}},jn=i(5232),Wn=class extends jt{constructor({blendFunction:e,technique:t=B.DEFAULT,eskil:i=!1,offset:n=.5,darkness:r=.5}={}){super("VignetteEffect","uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",{blendFunction:e,defines:new Map([["VIGNETTE_TECHNIQUE",t.toFixed(0)]]),uniforms:new Map([["offset",new jn.Uniform(n)],["darkness",new jn.Uniform(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(e){this.technique!==e&&(this.defines.set("VIGNETTE_TECHNIQUE",e.toFixed(0)),this.setChanged())}get eskil(){return this.technique===B.ESKIL}set eskil(e){this.technique=e?B.ESKIL:B.DEFAULT}getTechnique(){return this.technique}setTechnique(e){this.technique=e}get offset(){return this.uniforms.get("offset").value}set offset(e){this.uniforms.get("offset").value=e}getOffset(){return this.offset}setOffset(e){this.offset=e}get darkness(){return this.uniforms.get("darkness").value}set darkness(e){this.uniforms.get("darkness").value=e}getDarkness(){return this.darkness}setDarkness(e){this.darkness=e}},Yn=i(5232),Xn=class extends Yn.Loader{load(e,t=(()=>{}),i=(()=>{}),n=null){const r=this.manager,a=new Yn.LoadingManager,s=new Yn.FileLoader(a);return s.setPath(this.path),s.setResponseType("text"),new Promise(((o,l)=>{a.onError=e=>{r.itemError(e),null!==n?(n(`Failed to load ${e}`),o()):l(`Failed to load ${e}`)},r.itemStart(e),s.load(e,(i=>{try{const n=this.parse(i);r.itemEnd(e),t(n),o(n)}catch(t){console.error(t),a.onError(e)}}),i)}))}parse(e){const t=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let i=/^[\d ]+$/m.exec(e);if(null===i)throw new Error("Missing grid information");const n=i[0].trim().split(/\s+/g).map((e=>Number(e))),r=n[1]-n[0],a=n.length,s=a**2;for(let e=1,t=n.length;e<t;++e)if(r!==n[e]-n[e-1])throw new Error("Inconsistent grid size");const o=new Float32Array(a**3*4);let l=0,c=0;for(;null!==(i=t.exec(e));){const e=Number(i[1]),t=Number(i[2]),n=Number(i[3]);l=Math.max(l,e,t,n);const r=4*(c%a*s+Math.floor(c/a)%a*a+Math.floor(c/s)%a);o[r+0]=e,o[r+1]=t,o[r+2]=n,o[r+3]=1,++c}const u=Math.ceil(Math.log2(l)),h=Math.pow(2,u);for(let e=0,t=o.length;e<t;e+=4)o[e+0]/=h,o[e+1]/=h,o[e+2]/=h;return new pi(o,a)}},Zn=i(5232),qn=class extends Zn.Loader{load(e,t=(()=>{}),i=(()=>{}),n=null){const r=this.manager,a=new Zn.LoadingManager,s=new Zn.FileLoader(a);return s.setPath(this.path),s.setResponseType("text"),new Promise(((o,l)=>{a.onError=e=>{r.itemError(e),null!==n?(n(`Failed to load ${e}`),o()):l(`Failed to load ${e}`)},r.itemStart(e),s.load(e,(i=>{try{const n=this.parse(i);r.itemEnd(e),t(n),o(n)}catch(t){console.error(t),a.onError(e)}}),i)}))}parse(e){const t=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let i=/TITLE +"([^"]*)"/.exec(e);const n=null!==i?i[1]:null;if(i=/LUT_3D_SIZE +(\d+)/.exec(e),null===i)throw new Error("Missing LUT_3D_SIZE information");const r=Number(i[1]),a=new Float32Array(r**3*4),s=new Zn.Vector3(0,0,0),o=new Zn.Vector3(1,1,1);if(i=/DOMAIN_MIN +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==i&&s.set(Number(i[1]),Number(i[2]),Number(i[3])),i=/DOMAIN_MAX +([\d.]+) +([\d.]+) +([\d.]+)/.exec(e),null!==i&&o.set(Number(i[1]),Number(i[2]),Number(i[3])),s.x>o.x||s.y>o.y||s.z>o.z)throw s.set(0,0,0),o.set(1,1,1),new Error("Invalid input domain");let l=0;for(;null!==(i=t.exec(e));)a[l++]=Number(i[1]),a[l++]=Number(i[2]),a[l++]=Number(i[3]),a[l++]=1;const c=new pi(a,r);return c.domainMin.copy(s),c.domainMax.copy(o),null!==n&&(c.name=n),c}},Qn=i(5232),Kn=class extends Qn.Loader{load(e=(()=>{}),t=null){4===arguments.length?(e=arguments[1],t=arguments[3]):3!==arguments.length&&"function"==typeof arguments[0]||(e=arguments[1],t=null);const i=this.manager,n=new Qn.LoadingManager;return new Promise(((r,a)=>{const s=new Image,o=new Image;n.onError=e=>{i.itemError(e),null!==t?(t(`Failed to load ${e}`),r()):a(`Failed to load ${e}`)},n.onLoad=()=>{const t=[s,o];e(t),r(t)},s.addEventListener("error",(e=>{n.itemError("smaa-search")})),o.addEventListener("error",(e=>{n.itemError("smaa-area")})),s.addEventListener("load",(()=>{i.itemEnd("smaa-search"),n.itemEnd("smaa-search")})),o.addEventListener("load",(()=>{i.itemEnd("smaa-area"),n.itemEnd("smaa-area")})),i.itemStart("smaa-search"),i.itemStart("smaa-area"),n.itemStart("smaa-search"),n.itemStart("smaa-area"),s.src=kn,o.src=In}))}}},5232:(e,t)=>{"use strict";const i="152",n=1,r=2,a=3,s=100,o=0,l=1,c=2,u=0,h=1,d=2,f=3,p=4,m=5,g=300,v=301,b=302,_=303,y=304,A=306,E=1e3,w=1001,S=1002,T=1003,x=1004,M=1005,R=1006,P=1007,C=1008,D=1009,O=1012,k=1014,I=1015,N=1016,L=1020,U=1023,B=1026,F=1027,G=33776,V=33777,z=33778,H=33779,j=35840,W=35841,Y=35842,X=35843,Z=37492,q=37496,Q=37808,K=37809,J=37810,$=37811,ee=37812,te=37813,ie=37814,ne=37815,re=37816,ae=37817,se=37818,oe=37819,le=37820,ce=37821,ue=36492,he=36284,de=36285,fe=36286,pe=2300,me=2301,ge=2302,ve=2400,be=2401,_e=2402,ye=2501,Ae=3e3,Ee=3001,we="",Se="srgb",Te="srgb-linear",xe="display-p3",Me=7680,Re=35044,Pe="300 es",Ce=1035;class De{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const i=this._listeners[e];if(void 0!==i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}const Oe=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let ke=1234567;const Ie=Math.PI/180,Ne=180/Math.PI;function Le(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(Oe[255&e]+Oe[e>>8&255]+Oe[e>>16&255]+Oe[e>>24&255]+"-"+Oe[255&t]+Oe[t>>8&255]+"-"+Oe[t>>16&15|64]+Oe[t>>24&255]+"-"+Oe[63&i|128]+Oe[i>>8&255]+"-"+Oe[i>>16&255]+Oe[i>>24&255]+Oe[255&n]+Oe[n>>8&255]+Oe[n>>16&255]+Oe[n>>24&255]).toLowerCase()}function Ue(e,t,i){return Math.max(t,Math.min(i,e))}function Be(e,t){return(e%t+t)%t}function Fe(e,t,i){return(1-i)*e+i*t}function Ge(e){return 0==(e&e-1)&&0!==e}function Ve(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ze(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function He(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function je(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const We={DEG2RAD:Ie,RAD2DEG:Ne,generateUUID:Le,clamp:Ue,euclideanModulo:Be,mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},inverseLerp:function(e,t,i){return e!==t?(i-e)/(t-e):0},lerp:Fe,damp:function(e,t,i,n){return Fe(e,t,1-Math.exp(-i*n))},pingpong:function(e,t=1){return t-Math.abs(Be(e,2*t)-t)},smoothstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*(3-2*e)},smootherstep:function(e,t,i){return e<=t?0:e>=i?1:(e=(e-t)/(i-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(ke=e);let t=ke+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ie},radToDeg:function(e){return e*Ne},isPowerOfTwo:Ge,ceilPowerOfTwo:Ve,floorPowerOfTwo:ze,setQuaternionFromProperEuler:function(e,t,i,n,r){const a=Math.cos,s=Math.sin,o=a(i/2),l=s(i/2),c=a((t+n)/2),u=s((t+n)/2),h=a((t-n)/2),d=s((t-n)/2),f=a((n-t)/2),p=s((n-t)/2);switch(r){case"XYX":e.set(o*u,l*h,l*d,o*c);break;case"YZY":e.set(l*d,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*d,o*u,o*c);break;case"XZX":e.set(o*u,l*p,l*f,o*c);break;case"YXY":e.set(l*f,o*u,l*p,o*c);break;case"ZYZ":e.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:je,denormalize:He};class Ye{constructor(e=0,t=0){Ye.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ue(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*i-a*n+e.x,this.y=r*n+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xe{constructor(){Xe.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,n,r,a,s,o,l){const c=this.elements;return c[0]=e,c[1]=n,c[2]=s,c[3]=t,c[4]=r,c[5]=o,c[6]=i,c[7]=a,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[3],o=i[6],l=i[1],c=i[4],u=i[7],h=i[2],d=i[5],f=i[8],p=n[0],m=n[3],g=n[6],v=n[1],b=n[4],_=n[7],y=n[2],A=n[5],E=n[8];return r[0]=a*p+s*v+o*y,r[3]=a*m+s*b+o*A,r[6]=a*g+s*_+o*E,r[1]=l*p+c*v+u*y,r[4]=l*m+c*b+u*A,r[7]=l*g+c*_+u*E,r[2]=h*p+d*v+f*y,r[5]=h*m+d*b+f*A,r[8]=h*g+d*_+f*E,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8];return t*a*c-t*s*l-i*r*c+i*s*o+n*r*l-n*a*o}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=c*a-s*l,h=s*o-c*r,d=l*r-a*o,f=t*u+i*h+n*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(n*l-c*i)*p,e[2]=(s*i-n*a)*p,e[3]=h*p,e[4]=(c*t-n*o)*p,e[5]=(n*r-s*t)*p,e[6]=d*p,e[7]=(i*o-l*t)*p,e[8]=(a*t-i*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,a,s){const o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*a+l*s)+a+e,-n*l,n*o,-n*(-l*a+o*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(Ze.makeScale(e,t)),this}rotate(e){return this.premultiply(Ze.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ze.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ze=new Xe;function qe(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Qe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ke(e,t){return new Qe[e](t)}function Je(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}const $e={};function et(e){e in $e||($e[e]=!0,console.warn(e))}function tt(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function it(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const nt=(new Xe).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),rt=(new Xe).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),at={[Te]:e=>e,[Se]:e=>e.convertSRGBToLinear(),[xe]:function(e){return e.convertSRGBToLinear().applyMatrix3(rt)}},st={[Te]:e=>e,[Se]:e=>e.convertLinearToSRGB(),[xe]:function(e){return e.applyMatrix3(nt).convertLinearToSRGB()}},ot={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return Te},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;const n=at[t],r=st[i];if(void 0===n||void 0===r)throw new Error(`Unsupported color space conversion, "${t}" to "${i}".`);return r(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let lt;class ct{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===lt&&(lt=Je("canvas")),lt.width=e.width,lt.height=e.height;const i=lt.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=lt}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=Je("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*tt(r[e]/255);return i.putImageData(n,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*tt(t[e]/255)):t[e]=tt(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class ut{constructor(e=null){this.isSource=!0,this.uuid=Le(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(ht(n[t].image)):e.push(ht(n[t]))}else e=ht(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function ht(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?ct.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let dt=0;class ft extends De{constructor(e=ft.DEFAULT_IMAGE,t=ft.DEFAULT_MAPPING,i=1001,n=1001,r=1006,a=1008,s=1023,o=1009,l=ft.DEFAULT_ANISOTROPY,c=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:dt++}),this.uuid=Le(),this.name="",this.source=new ut(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=a,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=o,this.offset=new Ye(0,0),this.repeat=new Ye(1,1),this.center=new Ye(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xe,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,"string"==typeof c?this.colorSpace=c:(et("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Ee?Se:we),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==g)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case E:e.x=e.x-Math.floor(e.x);break;case w:e.x=e.x<0?0:1;break;case S:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case E:e.y=e.y-Math.floor(e.y);break;case w:e.y=e.y<0?0:1;break;case S:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return et("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Se?Ee:Ae}set encoding(e){et("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ee?Se:we}}ft.DEFAULT_IMAGE=null,ft.DEFAULT_MAPPING=g,ft.DEFAULT_ANISOTROPY=1;class pt{constructor(e=0,t=0,i=0,n=1){pt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*n+a[12]*r,this.y=a[1]*t+a[5]*i+a[9]*n+a[13]*r,this.z=a[2]*t+a[6]*i+a[10]*n+a[14]*r,this.w=a[3]*t+a[7]*i+a[11]*n+a[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r;const a=.01,s=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<a&&Math.abs(u-p)<a&&Math.abs(f-m)<a){if(Math.abs(c+h)<s&&Math.abs(u+p)<s&&Math.abs(f+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,b=(c+h)/4,_=(u+p)/4,y=(f+m)/4;return e>o&&e>v?e<a?(i=0,n=.707106781,r=.707106781):(i=Math.sqrt(e),n=b/i,r=_/i):o>v?o<a?(i=.707106781,n=0,r=.707106781):(n=Math.sqrt(o),i=b/n,r=y/n):v<a?(i=.707106781,n=.707106781,r=0):(r=Math.sqrt(v),i=_/r,n=y/r),this.set(i,n,r,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class mt extends De{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new pt(0,0,e,t),this.scissorTest=!1,this.viewport=new pt(0,0,e,t);const n={width:e,height:t,depth:1};void 0!==i.encoding&&(et("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ee?Se:we),this.texture=new ft(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==i.generateMipmaps&&i.generateMipmaps,this.texture.internalFormat=void 0!==i.internalFormat?i.internalFormat:null,this.texture.minFilter=void 0!==i.minFilter?i.minFilter:R,this.depthBuffer=void 0===i.depthBuffer||i.depthBuffer,this.stencilBuffer=void 0!==i.stencilBuffer&&i.stencilBuffer,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null,this.samples=void 0!==i.samples?i.samples:0}setSize(e,t,i=1){this.width===e&&this.height===t&&this.depth===i||(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ut(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class gt extends ft{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=T,this.minFilter=T,this.wrapR=w,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vt extends ft{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=T,this.minFilter=T,this.wrapR=w,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class bt{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,a,s){let o=i[n+0],l=i[n+1],c=i[n+2],u=i[n+3];const h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(0===s)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||o!==h||l!==d||c!==f){let e=1-s;const t=o*h+l*d+c*f+u*p,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){const r=Math.sqrt(n),a=Math.atan2(r,t*i);e=Math.sin(e*a)/r,s=Math.sin(s*a)/r}const r=s*i;if(o=o*e+h*r,l=l*e+d*r,c=c*e+f*r,u=u*e+p*r,e===1-s){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,a){const s=i[n],o=i[n+1],l=i[n+2],c=i[n+3],u=r[a],h=r[a+1],d=r[a+2],f=r[a+3];return e[t]=s*f+c*u+o*d-l*h,e[t+1]=o*f+c*h+l*u-s*d,e[t+2]=l*f+c*d+s*h-o*u,e[t+3]=c*f-s*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,n=e._y,r=e._z,a=e._order,s=Math.cos,o=Math.sin,l=s(i/2),c=s(n/2),u=s(r/2),h=o(i/2),d=o(n/2),f=o(r/2);switch(a){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],r=t[8],a=t[1],s=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=i+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(a-n)*e}else if(i>s&&i>u){const e=2*Math.sqrt(1+i-s-u);this._w=(c-o)/e,this._x=.25*e,this._y=(n+a)/e,this._z=(r+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-i-u);this._w=(r-l)/e,this._x=(n+a)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-i-s);this._w=(a-n)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ue(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(0===i)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,r=e._z,a=e._w,s=t._x,o=t._y,l=t._z,c=t._w;return this._x=i*c+a*s+n*l-r*o,this._y=n*c+a*o+r*s-i*l,this._z=r*c+a*l+i*o-n*s,this._w=a*c-i*s-n*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const i=this._x,n=this._y,r=this._z,a=this._w;let s=a*e._w+i*e._x+n*e._y+r*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=a,this._x=i,this._y=n,this._z=r,this;const o=1-s*s;if(o<=Number.EPSILON){const e=1-t;return this._w=e*a+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=a*u+this._w*h,this._x=i*u+this._x*h,this._y=n*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),n=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(n),i*Math.sin(r),i*Math.cos(r),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class _t{constructor(e=0,t=0,i=0){_t.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(At.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(At.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,r=e.elements,a=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*a,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*a,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,r=e.x,a=e.y,s=e.z,o=e.w,l=o*t+a*n-s*i,c=o*i+s*t-r*n,u=o*n+r*i-a*t,h=-r*t-a*i-s*n;return this.x=l*o+h*-r+c*-s-u*-a,this.y=c*o+h*-a+u*-r-l*-s,this.z=u*o+h*-s+l*-a-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,r=e.z,a=t.x,s=t.y,o=t.z;return this.x=n*o-r*s,this.y=r*a-i*o,this.z=i*s-n*a,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return yt.copy(this).projectOnVector(e),this.sub(yt)}reflect(e){return this.sub(yt.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Ue(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yt=new _t,At=new bt;class Et{constructor(e=new _t(1/0,1/0,1/0),t=new _t(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(St.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(St.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=St.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),void 0!==e.boundingBox)null===e.boundingBox&&e.computeBoundingBox(),Tt.copy(e.boundingBox),Tt.applyMatrix4(e.matrixWorld),this.union(Tt);else{const i=e.geometry;if(void 0!==i)if(t&&void 0!==i.attributes&&void 0!==i.attributes.position){const t=i.attributes.position;for(let i=0,n=t.count;i<n;i++)St.fromBufferAttribute(t,i).applyMatrix4(e.matrixWorld),this.expandByPoint(St)}else null===i.boundingBox&&i.computeBoundingBox(),Tt.copy(i.boundingBox),Tt.applyMatrix4(e.matrixWorld),this.union(Tt)}const i=e.children;for(let e=0,n=i.length;e<n;e++)this.expandByObject(i[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,St),St.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ot),kt.subVectors(this.max,Ot),xt.subVectors(e.a,Ot),Mt.subVectors(e.b,Ot),Rt.subVectors(e.c,Ot),Pt.subVectors(Mt,xt),Ct.subVectors(Rt,Mt),Dt.subVectors(xt,Rt);let t=[0,-Pt.z,Pt.y,0,-Ct.z,Ct.y,0,-Dt.z,Dt.y,Pt.z,0,-Pt.x,Ct.z,0,-Ct.x,Dt.z,0,-Dt.x,-Pt.y,Pt.x,0,-Ct.y,Ct.x,0,-Dt.y,Dt.x,0];return!!Lt(t,xt,Mt,Rt,kt)&&(t=[1,0,0,0,1,0,0,0,1],!!Lt(t,xt,Mt,Rt,kt)&&(It.crossVectors(Pt,Ct),t=[It.x,It.y,It.z],Lt(t,xt,Mt,Rt,kt)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,St).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(St).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(wt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wt)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wt=[new _t,new _t,new _t,new _t,new _t,new _t,new _t,new _t],St=new _t,Tt=new Et,xt=new _t,Mt=new _t,Rt=new _t,Pt=new _t,Ct=new _t,Dt=new _t,Ot=new _t,kt=new _t,It=new _t,Nt=new _t;function Lt(e,t,i,n,r){for(let a=0,s=e.length-3;a<=s;a+=3){Nt.fromArray(e,a);const s=r.x*Math.abs(Nt.x)+r.y*Math.abs(Nt.y)+r.z*Math.abs(Nt.z),o=t.dot(Nt),l=i.dot(Nt),c=n.dot(Nt);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>s)return!1}return!0}const Ut=new Et,Bt=new _t,Ft=new _t;class Gt{constructor(e=new _t,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;void 0!==t?i.copy(t):Ut.setFromPoints(e).getCenter(i);let n=0;for(let t=0,r=e.length;t<r;t++)n=Math.max(n,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Bt.subVectors(e,this.center);const t=Bt.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),i=.5*(e-this.radius);this.center.addScaledVector(Bt,i/e),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Ft.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Bt.copy(e.center).add(Ft)),this.expandByPoint(Bt.copy(e.center).sub(Ft))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Vt=new _t,zt=new _t,Ht=new _t,jt=new _t,Wt=new _t,Yt=new _t,Xt=new _t;class Zt{constructor(e=new _t,t=new _t(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Vt)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Vt.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Vt.copy(this.origin).addScaledVector(this.direction,t),Vt.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){zt.copy(e).add(t).multiplyScalar(.5),Ht.copy(t).sub(e).normalize(),jt.copy(this.origin).sub(zt);const r=.5*e.distanceTo(t),a=-this.direction.dot(Ht),s=jt.dot(this.direction),o=-jt.dot(Ht),l=jt.lengthSq(),c=Math.abs(1-a*a);let u,h,d,f;if(c>0)if(u=a*o-s,h=a*s-o,f=r*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+a*h+2*s)+h*(a*u+h+2*o)+l}else h=r,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-a*r+s)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(a*r+s)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=a>0?-r:r,u=Math.max(0,-(a*h+s)),d=-u*u+h*(h+2*o)+l;return i&&i.copy(this.origin).addScaledVector(this.direction,u),n&&n.copy(zt).addScaledVector(Ht,h),d}intersectSphere(e,t){Vt.subVectors(e.center,this.origin);const i=Vt.dot(this.direction),n=Vt.dot(Vt)-i*i,r=e.radius*e.radius;if(n>r)return null;const a=Math.sqrt(r-n),s=i-a,o=i+a;return o<0?null:s<0?this.at(o,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,r,a,s,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(i=(e.min.x-h.x)*l,n=(e.max.x-h.x)*l):(i=(e.max.x-h.x)*l,n=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,a=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,a=(e.min.y-h.y)*c),i>a||r>n?null:((r>i||isNaN(i))&&(i=r),(a<n||isNaN(n))&&(n=a),u>=0?(s=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),i>o||s>n?null:((s>i||i!=i)&&(i=s),(o<n||n!=n)&&(n=o),n<0?null:this.at(i>=0?i:n,t)))}intersectsBox(e){return null!==this.intersectBox(e,Vt)}intersectTriangle(e,t,i,n,r){Wt.subVectors(t,e),Yt.subVectors(i,e),Xt.crossVectors(Wt,Yt);let a,s=this.direction.dot(Xt);if(s>0){if(n)return null;a=1}else{if(!(s<0))return null;a=-1,s=-s}jt.subVectors(this.origin,e);const o=a*this.direction.dot(Yt.crossVectors(jt,Yt));if(o<0)return null;const l=a*this.direction.dot(Wt.cross(jt));if(l<0)return null;if(o+l>s)return null;const c=-a*jt.dot(Xt);return c<0?null:this.at(c/s,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class qt{constructor(){qt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,n,r,a,s,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=a,g[9]=s,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qt).fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/Qt.setFromMatrixColumn(e,0).length(),r=1/Qt.setFromMatrixColumn(e,1).length(),a=1/Qt.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,r=e.z,a=Math.cos(i),s=Math.sin(i),o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=a*c,i=a*u,n=s*c,r=s*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-s*o,t[2]=r-e*l,t[6]=n+i*l,t[10]=a*o}else if("YXZ"===e.order){const e=o*c,i=o*u,n=l*c,r=l*u;t[0]=e+r*s,t[4]=n*s-i,t[8]=a*l,t[1]=a*u,t[5]=a*c,t[9]=-s,t[2]=i*s-n,t[6]=r+e*s,t[10]=a*o}else if("ZXY"===e.order){const e=o*c,i=o*u,n=l*c,r=l*u;t[0]=e-r*s,t[4]=-a*u,t[8]=n+i*s,t[1]=i+n*s,t[5]=a*c,t[9]=r-e*s,t[2]=-a*l,t[6]=s,t[10]=a*o}else if("ZYX"===e.order){const e=a*c,i=a*u,n=s*c,r=s*u;t[0]=o*c,t[4]=n*l-i,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=s*o,t[10]=a*o}else if("YZX"===e.order){const e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=a*c,t[9]=-s*c,t[2]=-l*c,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){const e=a*o,i=a*l,n=s*o,r=s*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=a*c,t[9]=i*u-n,t[2]=n*u-i,t[6]=s*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Jt,e,$t)}lookAt(e,t,i){const n=this.elements;return ii.subVectors(e,t),0===ii.lengthSq()&&(ii.z=1),ii.normalize(),ei.crossVectors(i,ii),0===ei.lengthSq()&&(1===Math.abs(i.z)?ii.x+=1e-4:ii.z+=1e-4,ii.normalize(),ei.crossVectors(i,ii)),ei.normalize(),ti.crossVectors(ii,ei),n[0]=ei.x,n[4]=ti.x,n[8]=ii.x,n[1]=ei.y,n[5]=ti.y,n[9]=ii.y,n[2]=ei.z,n[6]=ti.z,n[10]=ii.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,r=this.elements,a=i[0],s=i[4],o=i[8],l=i[12],c=i[1],u=i[5],h=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],v=i[3],b=i[7],_=i[11],y=i[15],A=n[0],E=n[4],w=n[8],S=n[12],T=n[1],x=n[5],M=n[9],R=n[13],P=n[2],C=n[6],D=n[10],O=n[14],k=n[3],I=n[7],N=n[11],L=n[15];return r[0]=a*A+s*T+o*P+l*k,r[4]=a*E+s*x+o*C+l*I,r[8]=a*w+s*M+o*D+l*N,r[12]=a*S+s*R+o*O+l*L,r[1]=c*A+u*T+h*P+d*k,r[5]=c*E+u*x+h*C+d*I,r[9]=c*w+u*M+h*D+d*N,r[13]=c*S+u*R+h*O+d*L,r[2]=f*A+p*T+m*P+g*k,r[6]=f*E+p*x+m*C+g*I,r[10]=f*w+p*M+m*D+g*N,r[14]=f*S+p*R+m*O+g*L,r[3]=v*A+b*T+_*P+y*k,r[7]=v*E+b*x+_*C+y*I,r[11]=v*w+b*M+_*D+y*N,r[15]=v*S+b*R+_*O+y*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],a=e[1],s=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-n*l*u-r*s*h+i*l*h+n*s*d-i*o*d)+e[7]*(+t*o*d-t*l*h+r*a*h-n*a*d+n*l*c-r*o*c)+e[11]*(+t*l*u-t*s*d-r*a*u+i*a*d+r*s*c-i*l*c)+e[15]*(-n*s*c-t*o*u+t*s*h+n*a*u-i*a*h+i*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],a=e[4],s=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*o*d-s*m*d-u*o*g+s*h*g,b=f*h*l-c*m*l-f*o*d+a*m*d+c*o*g-a*h*g,_=c*p*l-f*u*l+f*s*d-a*p*d-c*s*g+a*u*g,y=f*u*o-c*p*o-f*s*h+a*p*h+c*s*m-a*u*m,A=t*v+i*b+n*_+r*y;if(0===A)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const E=1/A;return e[0]=v*E,e[1]=(p*h*r-u*m*r-p*n*d+i*m*d+u*n*g-i*h*g)*E,e[2]=(s*m*r-p*o*r+p*n*l-i*m*l-s*n*g+i*o*g)*E,e[3]=(u*o*r-s*h*r-u*n*l+i*h*l+s*n*d-i*o*d)*E,e[4]=b*E,e[5]=(c*m*r-f*h*r+f*n*d-t*m*d-c*n*g+t*h*g)*E,e[6]=(f*o*r-a*m*r-f*n*l+t*m*l+a*n*g-t*o*g)*E,e[7]=(a*h*r-c*o*r+c*n*l-t*h*l-a*n*d+t*o*d)*E,e[8]=_*E,e[9]=(f*u*r-c*p*r-f*i*d+t*p*d+c*i*g-t*u*g)*E,e[10]=(a*p*r-f*s*r+f*i*l-t*p*l-a*i*g+t*s*g)*E,e[11]=(c*s*r-a*u*r-c*i*l+t*u*l+a*i*d-t*s*d)*E,e[12]=y*E,e[13]=(c*p*n-f*u*n+f*i*h-t*p*h-c*i*m+t*u*m)*E,e[14]=(f*s*n-a*p*n-f*i*o+t*p*o+a*i*m-t*s*m)*E,e[15]=(a*u*n-c*s*n+c*i*o-t*u*o-a*i*h+t*s*h)*E,this}scale(e){const t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),r=1-i,a=e.x,s=e.y,o=e.z,l=r*a,c=r*s;return this.set(l*a+i,l*s-n*o,l*o+n*s,0,l*s+n*o,c*s+i,c*o-n*a,0,l*o-n*s,c*o+n*a,r*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,a){return this.set(1,i,r,0,e,1,a,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,r=t._x,a=t._y,s=t._z,o=t._w,l=r+r,c=a+a,u=s+s,h=r*l,d=r*c,f=r*u,p=a*c,m=a*u,g=s*u,v=o*l,b=o*c,_=o*u,y=i.x,A=i.y,E=i.z;return n[0]=(1-(p+g))*y,n[1]=(d+_)*y,n[2]=(f-b)*y,n[3]=0,n[4]=(d-_)*A,n[5]=(1-(h+g))*A,n[6]=(m+v)*A,n[7]=0,n[8]=(f+b)*E,n[9]=(m-v)*E,n[10]=(1-(h+p))*E,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let r=Qt.set(n[0],n[1],n[2]).length();const a=Qt.set(n[4],n[5],n[6]).length(),s=Qt.set(n[8],n[9],n[10]).length();this.determinant()<0&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],Kt.copy(this);const o=1/r,l=1/a,c=1/s;return Kt.elements[0]*=o,Kt.elements[1]*=o,Kt.elements[2]*=o,Kt.elements[4]*=l,Kt.elements[5]*=l,Kt.elements[6]*=l,Kt.elements[8]*=c,Kt.elements[9]*=c,Kt.elements[10]*=c,t.setFromRotationMatrix(Kt),i.x=r,i.y=a,i.z=s,this}makePerspective(e,t,i,n,r,a){const s=this.elements,o=2*r/(t-e),l=2*r/(i-n),c=(t+e)/(t-e),u=(i+n)/(i-n),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return s[0]=o,s[4]=0,s[8]=c,s[12]=0,s[1]=0,s[5]=l,s[9]=u,s[13]=0,s[2]=0,s[6]=0,s[10]=h,s[14]=d,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,i,n,r,a){const s=this.elements,o=1/(t-e),l=1/(i-n),c=1/(a-r),u=(t+e)*o,h=(i+n)*l,d=(a+r)*c;return s[0]=2*o,s[4]=0,s[8]=0,s[12]=-u,s[1]=0,s[5]=2*l,s[9]=0,s[13]=-h,s[2]=0,s[6]=0,s[10]=-2*c,s[14]=-d,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Qt=new _t,Kt=new qt,Jt=new _t(0,0,0),$t=new _t(1,1,1),ei=new _t,ti=new _t,ii=new _t,ni=new qt,ri=new bt;class ai{constructor(e=0,t=0,i=0,n=ai.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,r=n[0],a=n[4],s=n[8],o=n[1],l=n[5],c=n[9],u=n[2],h=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(Ue(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-a,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ue(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(Ue(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-Ue(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(Ue(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-Ue(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return ni.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ni,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return ri.setFromEuler(this),this.setFromQuaternion(ri,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ai.DEFAULT_ORDER="XYZ";class si{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return 0!=(this.mask&e.mask)}isEnabled(e){return 0!=(this.mask&(1<<e|0))}}let oi=0;const li=new _t,ci=new bt,ui=new qt,hi=new _t,di=new _t,fi=new _t,pi=new bt,mi=new _t(1,0,0),gi=new _t(0,1,0),vi=new _t(0,0,1),bi={type:"added"},_i={type:"removed"};class yi extends De{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oi++}),this.uuid=Le(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yi.DEFAULT_UP.clone();const e=new _t,t=new ai,i=new bt,n=new _t(1,1,1);t._onChange((function(){i.setFromEuler(t,!1)})),i._onChange((function(){t.setFromQuaternion(i,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new qt},normalMatrix:{value:new Xe}}),this.matrix=new qt,this.matrixWorld=new qt,this.matrixAutoUpdate=yi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new si,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ci.setFromAxisAngle(e,t),this.quaternion.multiply(ci),this}rotateOnWorldAxis(e,t){return ci.setFromAxisAngle(e,t),this.quaternion.premultiply(ci),this}rotateX(e){return this.rotateOnAxis(mi,e)}rotateY(e){return this.rotateOnAxis(gi,e)}rotateZ(e){return this.rotateOnAxis(vi,e)}translateOnAxis(e,t){return li.copy(e).applyQuaternion(this.quaternion),this.position.add(li.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(mi,e)}translateY(e){return this.translateOnAxis(gi,e)}translateZ(e){return this.translateOnAxis(vi,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(ui.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?hi.copy(e):hi.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),di.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ui.lookAt(di,hi,this.up):ui.lookAt(hi,di,this.up),this.quaternion.setFromRotationMatrix(ui),n&&(ui.extractRotation(n.matrixWorld),ci.setFromRotationMatrix(ui),this.quaternion.premultiply(ci.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(bi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(_i)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(_i)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),ui.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),ui.multiply(e.parent.matrixWorld)),e.applyMatrix4(ui),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectsByProperty(e,t);r.length>0&&(i=i.concat(r))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,e,fi),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(di,pi,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const n=t[i];!0!==n.matrixWorldAutoUpdate&&!0!==e||n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(!0===e&&null!==i&&!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,i=e.length;t<i;t++){const i=e[t];!0===i.matrixWorldAutoUpdate&&i.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){const i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){const t=a(e.geometries),n=a(e.materials),r=a(e.textures),s=a(e.images),o=a(e.shapes),l=a(e.skeletons),c=a(e.animations),u=a(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),s.length>0&&(i.images=s),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),c.length>0&&(i.animations=c),u.length>0&&(i.nodes=u)}return i.object=n,i;function a(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const i=e.children[t];this.add(i.clone())}return this}}yi.DEFAULT_UP=new _t(0,1,0),yi.DEFAULT_MATRIX_AUTO_UPDATE=!0,yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ai=new _t,Ei=new _t,wi=new _t,Si=new _t,Ti=new _t,xi=new _t,Mi=new _t,Ri=new _t,Pi=new _t,Ci=new _t;let Di=!1;class Oi{constructor(e=new _t,t=new _t,i=new _t){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),Ai.subVectors(e,t),n.cross(Ai);const r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){Ai.subVectors(n,t),Ei.subVectors(i,t),wi.subVectors(e,t);const a=Ai.dot(Ai),s=Ai.dot(Ei),o=Ai.dot(wi),l=Ei.dot(Ei),c=Ei.dot(wi),u=a*l-s*s;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-s*c)*h,f=(a*c-s*o)*h;return r.set(1-d-f,f,d)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,Si),Si.x>=0&&Si.y>=0&&Si.x+Si.y<=1}static getUV(e,t,i,n,r,a,s,o){return!1===Di&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Di=!0),this.getInterpolation(e,t,i,n,r,a,s,o)}static getInterpolation(e,t,i,n,r,a,s,o){return this.getBarycoord(e,t,i,n,Si),o.setScalar(0),o.addScaledVector(r,Si.x),o.addScaledVector(a,Si.y),o.addScaledVector(s,Si.z),o}static isFrontFacing(e,t,i,n){return Ai.subVectors(i,t),Ei.subVectors(e,t),Ai.cross(Ei).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ai.subVectors(this.c,this.b),Ei.subVectors(this.a,this.b),.5*Ai.cross(Ei).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Oi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Oi.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,r){return!1===Di&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Di=!0),Oi.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}getInterpolation(e,t,i,n,r){return Oi.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return Oi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Oi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,r=this.c;let a,s;Ti.subVectors(n,i),xi.subVectors(r,i),Ri.subVectors(e,i);const o=Ti.dot(Ri),l=xi.dot(Ri);if(o<=0&&l<=0)return t.copy(i);Pi.subVectors(e,n);const c=Ti.dot(Pi),u=xi.dot(Pi);if(c>=0&&u<=c)return t.copy(n);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return a=o/(o-c),t.copy(i).addScaledVector(Ti,a);Ci.subVectors(e,r);const d=Ti.dot(Ci),f=xi.dot(Ci);if(f>=0&&d<=f)return t.copy(r);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return s=l/(l-f),t.copy(i).addScaledVector(xi,s);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return Mi.subVectors(r,n),s=(u-c)/(u-c+(d-f)),t.copy(n).addScaledVector(Mi,s);const g=1/(m+p+h);return a=p*g,s=h*g,t.copy(i).addScaledVector(Ti,a).addScaledVector(xi,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let ki=0;class Ii extends De{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ki++}),this.uuid=Le(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=s,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Me,this.stencilZFail=Me,this.stencilZPass=Me,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){const t=[];for(const i in e){const n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(i.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(i.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=this.flatShading),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){const t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(null!==t){const e=t.length;i=new Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const Ni={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Li={h:0,s:0,l:0},Ui={h:0,s:0,l:0};function Bi(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+6*(t-e)*(2/3-i):e}class Fi{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Se){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,ot.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=ot.workingColorSpace){return this.r=e,this.g=t,this.b=i,ot.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=ot.workingColorSpace){if(e=Be(e,1),t=Ue(t,0,1),i=Ue(i,0,1),0===t)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=Bi(r,n,e+1/3),this.g=Bi(r,n,e),this.b=Bi(r,n,e-1/3)}return ot.toWorkingColorSpace(this,n),this}setStyle(e,t=Se){function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const a=n[1],s=n[2];switch(a){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return i(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=n[1],r=i.length;if(3===r)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(i,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Se){const i=Ni[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=tt(e.r),this.g=tt(e.g),this.b=tt(e.b),this}copyLinearToSRGB(e){return this.r=it(e.r),this.g=it(e.g),this.b=it(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Se){return ot.fromWorkingColorSpace(Gi.copy(this),e),65536*Math.round(Ue(255*Gi.r,0,255))+256*Math.round(Ue(255*Gi.g,0,255))+Math.round(Ue(255*Gi.b,0,255))}getHexString(e=Se){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ot.workingColorSpace){ot.fromWorkingColorSpace(Gi.copy(this),t);const i=Gi.r,n=Gi.g,r=Gi.b,a=Math.max(i,n,r),s=Math.min(i,n,r);let o,l;const c=(s+a)/2;if(s===a)o=0,l=0;else{const e=a-s;switch(l=c<=.5?e/(a+s):e/(2-a-s),a){case i:o=(n-r)/e+(n<r?6:0);break;case n:o=(r-i)/e+2;break;case r:o=(i-n)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e,t=ot.workingColorSpace){return ot.fromWorkingColorSpace(Gi.copy(this),t),e.r=Gi.r,e.g=Gi.g,e.b=Gi.b,e}getStyle(e=Se){ot.fromWorkingColorSpace(Gi.copy(this),e);const t=Gi.r,i=Gi.g,n=Gi.b;return e!==Se?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(Li),Li.h+=e,Li.s+=t,Li.l+=i,this.setHSL(Li.h,Li.s,Li.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Li),e.getHSL(Ui);const i=Fe(Li.h,Ui.h,t),n=Fe(Li.s,Ui.s,t),r=Fe(Li.l,Ui.l,t);return this.setHSL(i,n,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gi=new Fi;Fi.NAMES=Ni;class Vi extends Ii{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zi=Hi();function Hi(){const e=new ArrayBuffer(4),t=new Float32Array(e),i=new Uint32Array(e),n=new Uint32Array(512),r=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(n[e]=0,n[256|e]=32768,r[e]=24,r[256|e]=24):t<-14?(n[e]=1024>>-t-14,n[256|e]=1024>>-t-14|32768,r[e]=-t-1,r[256|e]=-t-1):t<=15?(n[e]=t+15<<10,n[256|e]=t+15<<10|32768,r[e]=13,r[256|e]=13):t<128?(n[e]=31744,n[256|e]=64512,r[e]=24,r[256|e]=24):(n[e]=31744,n[256|e]=64512,r[e]=13,r[256|e]=13)}const a=new Uint32Array(2048),s=new Uint32Array(64),o=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,i=0;for(;0==(8388608&t);)t<<=1,i-=8388608;t&=-8388609,i+=947912704,a[e]=t|i}for(let e=1024;e<2048;++e)a[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)s[e]=e<<23;s[31]=1199570944,s[32]=2147483648;for(let e=33;e<63;++e)s[e]=2147483648+(e-32<<23);s[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(o[e]=1024);return{floatView:t,uint32View:i,baseTable:n,shiftTable:r,mantissaTable:a,exponentTable:s,offsetTable:o}}function ji(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ue(e,-65504,65504),zi.floatView[0]=e;const t=zi.uint32View[0],i=t>>23&511;return zi.baseTable[i]+((8388607&t)>>zi.shiftTable[i])}function Wi(e){const t=e>>10;return zi.uint32View[0]=zi.mantissaTable[zi.offsetTable[t]+(1023&e)]+zi.exponentTable[t],zi.floatView[0]}const Yi={toHalfFloat:ji,fromHalfFloat:Wi},Xi=new _t,Zi=new Ye;class qi{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=Re,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)Zi.fromBufferAttribute(this,t),Zi.applyMatrix3(e),this.setXY(t,Zi.x,Zi.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)Xi.fromBufferAttribute(this,t),Xi.applyMatrix3(e),this.setXYZ(t,Xi.x,Xi.y,Xi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Xi.fromBufferAttribute(this,t),Xi.applyMatrix4(e),this.setXYZ(t,Xi.x,Xi.y,Xi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Xi.fromBufferAttribute(this,t),Xi.applyNormalMatrix(e),this.setXYZ(t,Xi.x,Xi.y,Xi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Xi.fromBufferAttribute(this,t),Xi.transformDirection(e),this.setXYZ(t,Xi.x,Xi.y,Xi.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=He(t,this.array)),t}setX(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=He(t,this.array)),t}setY(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=He(t,this.array)),t}setZ(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=He(t,this.array)),t}setW(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array),r=je(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==Re&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Qi extends qi{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Ki extends qi{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Ji extends qi{constructor(e,t,i){super(new Float32Array(e),t,i)}}let $i=0;const en=new qt,tn=new yi,nn=new _t,rn=new Et,an=new Et,sn=new _t;class on extends De{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:$i++}),this.uuid=Le(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(qe(e)?Ki:Qi)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const t=(new Xe).getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}const n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return en.makeRotationFromQuaternion(e),this.applyMatrix4(en),this}rotateX(e){return en.makeRotationX(e),this.applyMatrix4(en),this}rotateY(e){return en.makeRotationY(e),this.applyMatrix4(en),this}rotateZ(e){return en.makeRotationZ(e),this.applyMatrix4(en),this}translate(e,t,i){return en.makeTranslation(e,t,i),this.applyMatrix4(en),this}scale(e,t,i){return en.makeScale(e,t,i),this.applyMatrix4(en),this}lookAt(e){return tn.lookAt(e),tn.updateMatrix(),this.applyMatrix4(tn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nn).negate(),this.translate(nn.x,nn.y,nn.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new Ji(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Et);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new _t(-1/0,-1/0,-1/0),new _t(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];rn.setFromBufferAttribute(i),this.morphTargetsRelative?(sn.addVectors(this.boundingBox.min,rn.min),this.boundingBox.expandByPoint(sn),sn.addVectors(this.boundingBox.max,rn.max),this.boundingBox.expandByPoint(sn)):(this.boundingBox.expandByPoint(rn.min),this.boundingBox.expandByPoint(rn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Gt);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new _t,1/0);if(e){const i=this.boundingSphere.center;if(rn.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const i=t[e];an.setFromBufferAttribute(i),this.morphTargetsRelative?(sn.addVectors(rn.min,an.min),rn.expandByPoint(sn),sn.addVectors(rn.max,an.max),rn.expandByPoint(sn)):(rn.expandByPoint(an.min),rn.expandByPoint(an.max))}rn.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)sn.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(sn));if(t)for(let r=0,a=t.length;r<a;r++){const a=t[r],s=this.morphTargetsRelative;for(let t=0,r=a.count;t<r;t++)sn.fromBufferAttribute(a,t),s&&(nn.fromBufferAttribute(e,t),sn.add(nn)),n=Math.max(n,i.distanceToSquared(sn))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.array,n=t.position.array,r=t.normal.array,a=t.uv.array,s=n.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new qi(new Float32Array(4*s),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let e=0;e<s;e++)l[e]=new _t,c[e]=new _t;const u=new _t,h=new _t,d=new _t,f=new Ye,p=new Ye,m=new Ye,g=new _t,v=new _t;function b(e,t,i){u.fromArray(n,3*e),h.fromArray(n,3*t),d.fromArray(n,3*i),f.fromArray(a,2*e),p.fromArray(a,2*t),m.fromArray(a,2*i),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const r=1/(p.x*m.y-m.x*p.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(r),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[i].add(g),c[e].add(v),c[t].add(v),c[i].add(v))}let _=this.groups;0===_.length&&(_=[{start:0,count:i.length}]);for(let e=0,t=_.length;e<t;++e){const t=_[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)b(i[e+0],i[e+1],i[e+2])}const y=new _t,A=new _t,E=new _t,w=new _t;function S(e){E.fromArray(r,3*e),w.copy(E);const t=l[e];y.copy(t),y.sub(E.multiplyScalar(E.dot(t))).normalize(),A.crossVectors(w,t);const i=A.dot(c[e])<0?-1:1;o[4*e]=y.x,o[4*e+1]=y.y,o[4*e+2]=y.z,o[4*e+3]=i}for(let e=0,t=_.length;e<t;++e){const t=_[e],n=t.start;for(let e=n,r=n+t.count;e<r;e+=3)S(i[e+0]),S(i[e+1]),S(i[e+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new qi(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);const n=new _t,r=new _t,a=new _t,s=new _t,o=new _t,l=new _t,c=new _t,u=new _t;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,f),a.fromBufferAttribute(t,p),c.subVectors(a,r),u.subVectors(n,r),c.cross(u),s.fromBufferAttribute(i,d),o.fromBufferAttribute(i,f),l.fromBufferAttribute(i,p),s.add(c),o.add(c),l.add(c),i.setXYZ(d,s.x,s.y,s.z),i.setXYZ(f,o.x,o.y,o.z),i.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,s=t.count;e<s;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),a.fromBufferAttribute(t,e+2),c.subVectors(a,r),u.subVectors(n,r),c.cross(u),i.setXYZ(e+0,c.x,c.y,c.z),i.setXYZ(e+1,c.x,c.y,c.z),i.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)sn.fromBufferAttribute(e,t),sn.normalize(),e.setXYZ(t,sn.x,sn.y,sn.z)}toNonIndexed(){function e(e,t){const i=e.array,n=e.itemSize,r=e.normalized,a=new i.constructor(t.length*n);let s=0,o=0;for(let r=0,l=t.length;r<l;r++){s=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*n;for(let e=0;e<n;e++)a[o++]=i[s++]}return new qi(a,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new on,i=this.index.array,n=this.attributes;for(const r in n){const a=e(n[r],i);t.setAttribute(r,a)}const r=this.morphAttributes;for(const n in r){const a=[],s=r[n];for(let t=0,n=s.length;t<n;t++){const n=e(s[t],i);a.push(n)}t.morphAttributes[n]=a}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let e=0,i=a.length;e<i;e++){const i=a[e];t.addGroup(i.start,i.count,i.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const t in i){const n=i[t];e.data.attributes[t]=n.toJSON(e.data)}const n={};let r=!1;for(const t in this.morphAttributes){const i=this.morphAttributes[t],a=[];for(let t=0,n=i.length;t<n;t++){const n=i[t];a.push(n.toJSON(e.data))}a.length>0&&(n[t]=a,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;null!==i&&this.setIndex(i.clone(t));const n=e.attributes;for(const e in n){const i=n[e];this.setAttribute(e,i.clone(t))}const r=e.morphAttributes;for(const e in r){const i=[],n=r[e];for(let e=0,r=n.length;e<r;e++)i.push(n[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let e=0,t=a.length;e<t;e++){const t=a[e];this.addGroup(t.start,t.count,t.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ln=new qt,cn=new Zt,un=new Gt,hn=new _t,dn=new _t,fn=new _t,pn=new _t,mn=new _t,gn=new _t,vn=new Ye,bn=new Ye,_n=new Ye,yn=new _t,An=new _t,En=new _t,wn=new _t,Sn=new _t;class Tn extends yi{constructor(e=new on,t=new Vi){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const s=this.morphTargetInfluences;if(r&&s){gn.set(0,0,0);for(let i=0,n=r.length;i<n;i++){const n=s[i],o=r[i];0!==n&&(mn.fromBufferAttribute(o,e),a?gn.addScaledVector(mn,n):gn.addScaledVector(mn.sub(t),n))}t.add(gn)}return t}raycast(e,t){const i=this.geometry,n=this.material,r=this.matrixWorld;if(void 0!==n){if(null===i.boundingSphere&&i.computeBoundingSphere(),un.copy(i.boundingSphere),un.applyMatrix4(r),cn.copy(e.ray).recast(e.near),!1===un.containsPoint(cn.origin)){if(null===cn.intersectSphere(un,hn))return;if(cn.origin.distanceToSquared(hn)>(e.far-e.near)**2)return}ln.copy(r).invert(),cn.copy(e.ray).applyMatrix4(ln),null!==i.boundingBox&&!1===cn.intersectsBox(i.boundingBox)||this._computeIntersections(e,t)}}_computeIntersections(e,t){let i;const n=this.geometry,r=this.material,a=n.index,s=n.attributes.position,o=n.attributes.uv,l=n.attributes.uv1,c=n.attributes.normal,u=n.groups,h=n.drawRange;if(null!==a)if(Array.isArray(r))for(let n=0,s=u.length;n<s;n++){const s=u[n],d=r[s.materialIndex];for(let n=Math.max(s.start,h.start),r=Math.min(a.count,Math.min(s.start+s.count,h.start+h.count));n<r;n+=3){const r=a.getX(n),u=a.getX(n+1),h=a.getX(n+2);i=xn(this,d,e,cn,o,l,c,r,u,h),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=s.materialIndex,t.push(i))}}else for(let n=Math.max(0,h.start),s=Math.min(a.count,h.start+h.count);n<s;n+=3){const s=a.getX(n),u=a.getX(n+1),h=a.getX(n+2);i=xn(this,r,e,cn,o,l,c,s,u,h),i&&(i.faceIndex=Math.floor(n/3),t.push(i))}else if(void 0!==s)if(Array.isArray(r))for(let n=0,a=u.length;n<a;n++){const a=u[n],d=r[a.materialIndex];for(let n=Math.max(a.start,h.start),r=Math.min(s.count,Math.min(a.start+a.count,h.start+h.count));n<r;n+=3)i=xn(this,d,e,cn,o,l,c,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),i.face.materialIndex=a.materialIndex,t.push(i))}else for(let n=Math.max(0,h.start),a=Math.min(s.count,h.start+h.count);n<a;n+=3)i=xn(this,r,e,cn,o,l,c,n,n+1,n+2),i&&(i.faceIndex=Math.floor(n/3),t.push(i))}}function xn(e,t,i,n,r,a,s,o,l,c){e.getVertexPosition(o,dn),e.getVertexPosition(l,fn),e.getVertexPosition(c,pn);const u=function(e,t,i,n,r,a,s,o){let l;if(l=1===t.side?n.intersectTriangle(s,a,r,!0,o):n.intersectTriangle(r,a,s,0===t.side,o),null===l)return null;Sn.copy(o),Sn.applyMatrix4(e.matrixWorld);const c=i.ray.origin.distanceTo(Sn);return c<i.near||c>i.far?null:{distance:c,point:Sn.clone(),object:e}}(e,t,i,n,dn,fn,pn,wn);if(u){r&&(vn.fromBufferAttribute(r,o),bn.fromBufferAttribute(r,l),_n.fromBufferAttribute(r,c),u.uv=Oi.getInterpolation(wn,dn,fn,pn,vn,bn,_n,new Ye)),a&&(vn.fromBufferAttribute(a,o),bn.fromBufferAttribute(a,l),_n.fromBufferAttribute(a,c),u.uv1=Oi.getInterpolation(wn,dn,fn,pn,vn,bn,_n,new Ye),u.uv2=u.uv1),s&&(yn.fromBufferAttribute(s,o),An.fromBufferAttribute(s,l),En.fromBufferAttribute(s,c),u.normal=Oi.getInterpolation(wn,dn,fn,pn,yn,An,En,new _t),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));const e={a:o,b:l,c,normal:new _t,materialIndex:0};Oi.getNormal(dn,fn,pn,e.normal),u.face=e}return u}class Mn extends on{constructor(e=1,t=1,i=1,n=1,r=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};const s=this;n=Math.floor(n),r=Math.floor(r),a=Math.floor(a);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,i,n,r,a,f,p,m,g,v){const b=a/m,_=f/g,y=a/2,A=f/2,E=p/2,w=m+1,S=g+1;let T=0,x=0;const M=new _t;for(let a=0;a<S;a++){const s=a*_-A;for(let o=0;o<w;o++){const h=o*b-y;M[e]=h*n,M[t]=s*r,M[i]=E,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[i]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(o/m),u.push(1-a/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const i=h+t+w*e,n=h+t+w*(e+1),r=h+(t+1)+w*(e+1),a=h+(t+1)+w*e;o.push(i,n,a),o.push(n,r,a),x+=6}s.addGroup(d,x,v),d+=x,h+=T}f("z","y","x",-1,-1,i,t,e,a,r,0),f("z","y","x",1,-1,i,t,-e,a,r,1),f("x","z","y",1,1,e,i,t,n,a,2),f("x","z","y",1,-1,e,i,-t,n,a,3),f("x","y","z",1,-1,e,t,i,n,r,4),f("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new Ji(l,3)),this.setAttribute("normal",new Ji(c,3)),this.setAttribute("uv",new Ji(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mn(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rn(e){const t={};for(const i in e){t[i]={};for(const n in e[i]){const r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}}return t}function Pn(e){const t={};for(let i=0;i<e.length;i++){const n=Rn(e[i]);for(const e in n)t[e]=n[e]}return t}function Cn(e){return null===e.getRenderTarget()?e.outputColorSpace:Te}const Dn={clone:Rn,merge:Pn};class On extends Ii{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rn(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class kn extends yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qt,this.projectionMatrix=new qt,this.projectionMatrixInverse=new qt}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class In extends kn{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Ne*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ie*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Ne*Math.atan(Math.tan(.5*Ie*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ie*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n;const a=this.view;if(null!==this.view&&this.view.enabled){const e=a.fullWidth,s=a.fullHeight;r+=a.offsetX*n/e,t-=a.offsetY*i/s,n*=a.width/e,i*=a.height/s}const s=this.filmOffset;0!==s&&(r+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Nn=-90;class Ln extends yi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const n=new In(Nn,1,e,t);n.layers=this.layers,n.up.set(0,1,0),n.lookAt(1,0,0),this.add(n);const r=new In(Nn,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const a=new In(Nn,1,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const s=new In(Nn,1,e,t);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(0,-1,0),this.add(s);const o=new In(Nn,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new In(Nn,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const i=this.renderTarget,[n,r,a,s,o,l]=this.children,c=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=u,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,n),e.setRenderTarget(i,1),e.render(t,r),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,s),e.setRenderTarget(i,4),e.render(t,o),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class Un extends ft{constructor(e,t,i,n,r,a,s,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:v,i,n,r,a,s,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Bn extends mt{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];void 0!==t.encoding&&(et("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ee?Se:we),this.texture=new Un(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:R}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={tEquirect:{value:null}},n="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",a=new Mn(5,5,5),s=new On({name:"CubemapFromEquirect",uniforms:Rn(i),vertexShader:n,fragmentShader:r,side:1,blending:0});s.uniforms.tEquirect.value=t;const o=new Tn(a,s),l=t.minFilter;return t.minFilter===C&&(t.minFilter=R),new Ln(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,n){const r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,n);e.setRenderTarget(r)}}const Fn=new _t,Gn=new _t,Vn=new Xe;class zn{constructor(e=new _t(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const n=Fn.subVectors(i,t).cross(Gn.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Fn),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Vn.getNormalMatrix(e),n=this.coplanarPoint(Fn).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Hn=new Gt,jn=new _t;class Wn{constructor(e=new zn,t=new zn,i=new zn,n=new zn,r=new zn,a=new zn){this.planes=[e,t,i,n,r,a]}set(e,t,i,n,r,a){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(i),s[3].copy(n),s[4].copy(r),s[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,n=i[0],r=i[1],a=i[2],s=i[3],o=i[4],l=i[5],c=i[6],u=i[7],h=i[8],d=i[9],f=i[10],p=i[11],m=i[12],g=i[13],v=i[14],b=i[15];return t[0].setComponents(s-n,u-o,p-h,b-m).normalize(),t[1].setComponents(s+n,u+o,p+h,b+m).normalize(),t[2].setComponents(s+r,u+l,p+d,b+g).normalize(),t[3].setComponents(s-r,u-l,p-d,b-g).normalize(),t[4].setComponents(s-a,u-c,p-f,b-v).normalize(),t[5].setComponents(s+a,u+c,p+f,b+v).normalize(),this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Hn.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Hn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Hn)}intersectsSprite(e){return Hn.center.set(0,0,0),Hn.radius=.7071067811865476,Hn.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hn)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(jn.x=n.normal.x>0?e.max.x:e.min.x,jn.y=n.normal.y>0?e.max.y:e.min.y,jn.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(jn)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function Yn(){let e=null,t=!1,i=null,n=null;function r(t,a){i(t,a),n=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function Xn(e,t){const i=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const i=n.get(t);i&&(e.deleteBuffer(i.buffer),n.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=n.get(t);return void((!e||e.version<t.version)&&n.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const a=n.get(t);void 0===a?n.set(t,function(t,n){const r=t.array,a=t.usage,s=e.createBuffer();let o;if(e.bindBuffer(n,s),e.bufferData(n,r,a),t.onUploadCallback(),r instanceof Float32Array)o=e.FLOAT;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!i)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=e.HALF_FLOAT}else o=e.UNSIGNED_SHORT;else if(r instanceof Int16Array)o=e.SHORT;else if(r instanceof Uint32Array)o=e.UNSIGNED_INT;else if(r instanceof Int32Array)o=e.INT;else if(r instanceof Int8Array)o=e.BYTE;else if(r instanceof Uint8Array)o=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=e.UNSIGNED_BYTE}return{buffer:s,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):a.version<t.version&&(function(t,n,r){const a=n.array,s=n.updateRange;e.bindBuffer(r,t),-1===s.count?e.bufferSubData(r,0,a):(i?e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a,s.offset,s.count):e.bufferSubData(r,s.offset*a.BYTES_PER_ELEMENT,a.subarray(s.offset,s.offset+s.count)),s.count=-1),n.onUploadCallback()}(a.buffer,t,r),a.version=t.version)}}}class Zn extends on{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,a=t/2,s=Math.floor(i),o=Math.floor(n),l=s+1,c=o+1,u=e/s,h=t/o,d=[],f=[],p=[],m=[];for(let e=0;e<c;e++){const t=e*h-a;for(let i=0;i<l;i++){const n=i*u-r;f.push(n,-t,0),p.push(0,0,1),m.push(i/s),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<s;t++){const i=t+l*e,n=t+l*(e+1),r=t+1+l*(e+1),a=t+1+l*e;d.push(i,n,a),d.push(n,r,a)}this.setIndex(d),this.setAttribute("position",new Ji(f,3)),this.setAttribute("normal",new Ji(p,3)),this.setAttribute("uv",new Ji(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zn(e.width,e.height,e.widthSegments,e.heightSegments)}}const qn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, vMapUv );\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_NORMALMAP_TANGENTSPACE\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Qn={common:{diffuse:{value:new Fi(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xe},alphaMap:{value:null},alphaMapTransform:{value:new Xe},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xe}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xe}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xe}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xe},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xe},normalScale:{value:new Ye(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xe},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xe}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xe}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xe}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Fi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Fi(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Xe}},sprite:{diffuse:{value:new Fi(16777215)},opacity:{value:1},center:{value:new Ye(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xe},alphaMap:{value:null},alphaTest:{value:0}}},Kn={basic:{uniforms:Pn([Qn.common,Qn.specularmap,Qn.envmap,Qn.aomap,Qn.lightmap,Qn.fog]),vertexShader:qn.meshbasic_vert,fragmentShader:qn.meshbasic_frag},lambert:{uniforms:Pn([Qn.common,Qn.specularmap,Qn.envmap,Qn.aomap,Qn.lightmap,Qn.emissivemap,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,Qn.fog,Qn.lights,{emissive:{value:new Fi(0)}}]),vertexShader:qn.meshlambert_vert,fragmentShader:qn.meshlambert_frag},phong:{uniforms:Pn([Qn.common,Qn.specularmap,Qn.envmap,Qn.aomap,Qn.lightmap,Qn.emissivemap,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,Qn.fog,Qn.lights,{emissive:{value:new Fi(0)},specular:{value:new Fi(1118481)},shininess:{value:30}}]),vertexShader:qn.meshphong_vert,fragmentShader:qn.meshphong_frag},standard:{uniforms:Pn([Qn.common,Qn.envmap,Qn.aomap,Qn.lightmap,Qn.emissivemap,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,Qn.roughnessmap,Qn.metalnessmap,Qn.fog,Qn.lights,{emissive:{value:new Fi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag},toon:{uniforms:Pn([Qn.common,Qn.aomap,Qn.lightmap,Qn.emissivemap,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,Qn.gradientmap,Qn.fog,Qn.lights,{emissive:{value:new Fi(0)}}]),vertexShader:qn.meshtoon_vert,fragmentShader:qn.meshtoon_frag},matcap:{uniforms:Pn([Qn.common,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,Qn.fog,{matcap:{value:null}}]),vertexShader:qn.meshmatcap_vert,fragmentShader:qn.meshmatcap_frag},points:{uniforms:Pn([Qn.points,Qn.fog]),vertexShader:qn.points_vert,fragmentShader:qn.points_frag},dashed:{uniforms:Pn([Qn.common,Qn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qn.linedashed_vert,fragmentShader:qn.linedashed_frag},depth:{uniforms:Pn([Qn.common,Qn.displacementmap]),vertexShader:qn.depth_vert,fragmentShader:qn.depth_frag},normal:{uniforms:Pn([Qn.common,Qn.bumpmap,Qn.normalmap,Qn.displacementmap,{opacity:{value:1}}]),vertexShader:qn.meshnormal_vert,fragmentShader:qn.meshnormal_frag},sprite:{uniforms:Pn([Qn.sprite,Qn.fog]),vertexShader:qn.sprite_vert,fragmentShader:qn.sprite_frag},background:{uniforms:{uvTransform:{value:new Xe},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qn.background_vert,fragmentShader:qn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:qn.backgroundCube_vert,fragmentShader:qn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qn.cube_vert,fragmentShader:qn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qn.equirect_vert,fragmentShader:qn.equirect_frag},distanceRGBA:{uniforms:Pn([Qn.common,Qn.displacementmap,{referencePosition:{value:new _t},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qn.distanceRGBA_vert,fragmentShader:qn.distanceRGBA_frag},shadow:{uniforms:Pn([Qn.lights,Qn.fog,{color:{value:new Fi(0)},opacity:{value:1}}]),vertexShader:qn.shadow_vert,fragmentShader:qn.shadow_frag}};Kn.physical={uniforms:Pn([Kn.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xe},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xe},clearcoatNormalScale:{value:new Ye(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xe},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xe},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xe},sheen:{value:0},sheenColor:{value:new Fi(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xe},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xe},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xe},transmissionSamplerSize:{value:new Ye},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xe},attenuationDistance:{value:0},attenuationColor:{value:new Fi(0)},specularColor:{value:new Fi(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xe},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xe}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag};const Jn={r:0,b:0,g:0};function $n(e,t,i,n,r,a,s){const o=new Fi(0);let l,c,u=!0===a?0:1,h=null,d=0,f=null;function p(t,i){t.getRGB(Jn,Cn(e)),n.buffers.color.setClear(Jn.r,Jn.g,Jn.b,i,s)}return{getClearColor:function(){return o},setClearColor:function(e,t=1){o.set(e),u=t,p(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(o,u)},render:function(a,m){let g=!1,v=!0===m.isScene?m.background:null;switch(v&&v.isTexture&&(v=(m.backgroundBlurriness>0?i:t).get(v)),null===v?p(o,u):v&&v.isColor&&(p(v,1),g=!0),e.xr.getEnvironmentBlendMode()){case"opaque":g=!0;break;case"additive":n.buffers.color.setClear(0,0,0,1,s),g=!0;break;case"alpha-blend":n.buffers.color.setClear(0,0,0,0,s),g=!0}(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===A)?(void 0===c&&(c=new Tn(new Mn(1,1,1),new On({name:"BackgroundCubeMaterial",uniforms:Rn(Kn.backgroundCube.uniforms),vertexShader:Kn.backgroundCube.vertexShader,fragmentShader:Kn.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.toneMapped=v.colorSpace!==Se,h===v&&d===v.version&&f===e.toneMapping||(c.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),c.layers.enableAll(),a.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new Tn(new Zn(2,2),new On({name:"BackgroundMaterial",uniforms:Rn(Kn.background.uniforms),vertexShader:Kn.background.vertexShader,fragmentShader:Kn.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=v.colorSpace!==Se,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,f=e.toneMapping),l.layers.enableAll(),a.unshift(l,l.geometry,l.material,0,0,null))}}}function er(e,t,i,n){const r=e.getParameter(e.MAX_VERTEX_ATTRIBS),a=n.isWebGL2?null:t.get("OES_vertex_array_object"),s=n.isWebGL2||null!==a,o={},l=f(null);let c=l,u=!1;function h(t){return n.isWebGL2?e.bindVertexArray(t):a.bindVertexArrayOES(t)}function d(t){return n.isWebGL2?e.deleteVertexArray(t):a.deleteVertexArrayOES(t)}function f(e){const t=[],i=[],n=[];for(let e=0;e<r;e++)t[e]=0,i[e]=0,n[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:i,attributeDivisors:n,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function m(e){g(e,0)}function g(i,r){const a=c.newAttributes,s=c.enabledAttributes,o=c.attributeDivisors;a[i]=1,0===s[i]&&(e.enableVertexAttribArray(i),s[i]=1),o[i]!==r&&((n.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](i,r),o[i]=r)}function v(){const t=c.newAttributes,i=c.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function b(t,i,r,a,s,o){!0!==n.isWebGL2||r!==e.INT&&r!==e.UNSIGNED_INT?e.vertexAttribPointer(t,i,r,a,s,o):e.vertexAttribIPointer(t,i,r,s,o)}function _(){y(),u=!0,c!==l&&(c=l,h(c.object))}function y(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,_,y){let A=!1;if(s){const t=function(t,i,r){const s=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[i.id];void 0===c&&(c={},l[i.id]=c);let u=c[s];return void 0===u&&(u=f(n.isWebGL2?e.createVertexArray():a.createVertexArrayOES()),c[s]=u),u}(_,d,l);c!==t&&(c=t,h(c.object)),A=function(e,t,i,n){const r=c.attributes,a=t.attributes;let s=0;const o=i.getAttributes();for(const t in o)if(o[t].location>=0){const i=r[t];let n=a[t];if(void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor)),void 0===i)return!0;if(i.attribute!==n)return!0;if(n&&i.data!==n.data)return!0;s++}return c.attributesNum!==s||c.index!==n}(r,_,d,y),A&&function(e,t,i,n){const r={},a=t.attributes;let s=0;const o=i.getAttributes();for(const t in o)if(o[t].location>=0){let i=a[t];void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor));const n={};n.attribute=i,i&&i.data&&(n.data=i.data),r[t]=n,s++}c.attributes=r,c.attributesNum=s,c.index=n}(r,_,d,y)}else{const e=!0===l.wireframe;c.geometry===_.id&&c.program===d.id&&c.wireframe===e||(c.geometry=_.id,c.program=d.id,c.wireframe=e,A=!0)}null!==y&&i.update(y,e.ELEMENT_ARRAY_BUFFER),(A||u)&&(u=!1,function(r,a,s,o){if(!1===n.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=s.getAttributes(),u=a.defaultAttributeValues;for(const t in c){const n=c[t];if(n.location>=0){let a=l[t];if(void 0===a&&("instanceMatrix"===t&&r.instanceMatrix&&(a=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(a=r.instanceColor)),void 0!==a){const t=a.normalized,s=a.itemSize,l=i.get(a);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(a.isInterleavedBufferAttribute){const i=a.data,l=i.stride,d=a.offset;if(i.isInstancedInterleavedBuffer){for(let e=0;e<n.locationSize;e++)g(n.location+e,i.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)b(n.location+e,s/n.locationSize,u,t,l*h,(d+s/n.locationSize*e)*h)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<n.locationSize;e++)g(n.location+e,a.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<n.locationSize;e++)m(n.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<n.locationSize;e++)b(n.location+e,s/n.locationSize,u,t,s*h,s/n.locationSize*e*h)}}else if(void 0!==u){const i=u[t];if(void 0!==i)switch(i.length){case 2:e.vertexAttrib2fv(n.location,i);break;case 3:e.vertexAttrib3fv(n.location,i);break;case 4:e.vertexAttrib4fv(n.location,i);break;default:e.vertexAttrib1fv(n.location,i)}}}}v()}(r,l,d,_),null!==y&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.get(y).buffer))},reset:_,resetDefaultState:y,dispose:function(){_();for(const e in o){const t=o[e];for(const e in t){const i=t[e];for(const e in i)d(i[e].object),delete i[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const e in t){const i=t[e];for(const e in i)d(i[e].object),delete i[e];delete t[e]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const i=o[t];if(void 0===i[e.id])continue;const n=i[e.id];for(const e in n)d(n[e].object),delete n[e];delete i[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function tr(e,t,i,n){const r=n.isWebGL2;let a;this.setMode=function(e){a=e},this.render=function(t,n){e.drawArrays(a,t,n),i.update(n,a,1)},this.renderInstances=function(n,s,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](a,n,s,o),i.update(s,a,o)}}function ir(e,t,i){let n;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a="undefined"!=typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==i.precision?i.precision:"highp";const o=r(s);o!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",o,"instead."),s=o);const l=a||t.has("WEBGL_draw_buffers"),c=!0===i.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),f=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),p=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,_=a||t.has("OES_texture_float");return{isWebGL2:a,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==n)return n;if(!0===t.has("EXT_texture_filter_anisotropic")){const i=t.get("EXT_texture_filter_anisotropic");n=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n},getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:b,floatFragmentTextures:_,floatVertexTextures:b&&_,maxSamples:a?e.getParameter(e.MAX_SAMPLES):0}}function nr(e){const t=this;let i=null,n=0,r=!1,a=!1;const s=new zn,o=new Xe,l={value:null,needsUpdate:!1};function c(e,i,n,r){const a=null!==e?e.length:0;let c=null;if(0!==a){if(c=l.value,!0!==r||null===c){const t=n+4*a,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let t=0,i=n;t!==a;++t,i+=4)s.copy(e[t]).applyMatrix4(r,o),s.normal.toArray(c,i),c[i+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=a,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const i=0!==e.length||t||0!==n||r;return r=t,n=e.length,i},this.beginShadows=function(){a=!0,c(null)},this.endShadows=function(){a=!1},this.setGlobalState=function(e,t){i=c(e,t,0)},this.setState=function(s,o,u){const h=s.clippingPlanes,d=s.clipIntersection,f=s.clipShadows,p=e.get(s);if(!r||null===h||0===h.length||a&&!f)a?c(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0);else{const e=a?0:n,t=4*e;let r=p.clippingState||null;l.value=r,r=c(h,o,t,u);for(let e=0;e!==t;++e)r[e]=i[e];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function rr(e){let t=new WeakMap;function i(e,t){return t===_?e.mapping=v:t===y&&(e.mapping=b),e}function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const a=r.mapping;if(a===_||a===y){if(t.has(r))return i(t.get(r).texture,r.mapping);{const a=r.image;if(a&&a.height>0){const s=new Bn(a.height/2);return s.fromEquirectangularTexture(e,r),t.set(r,s),r.addEventListener("dispose",n),i(s.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class ar extends kn{constructor(e=-1,t=1,i=1,n=-1,r=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let r=i-e,a=i+e,s=n+t,o=n-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,a=r+e*this.view.width,s-=t*this.view.offsetY,o=s-t*this.view.height}this.projectionMatrix.makeOrthographic(r,a,s,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const sr=[.125,.215,.35,.446,.526,.582],or=new ar,lr=new Fi;let cr=null;const ur=(1+Math.sqrt(5))/2,hr=1/ur,dr=[new _t(1,1,1),new _t(-1,1,1),new _t(1,1,-1),new _t(-1,1,-1),new _t(0,ur,hr),new _t(0,ur,-hr),new _t(hr,0,ur),new _t(-hr,0,ur),new _t(ur,hr,0),new _t(-ur,hr,0)];class fr{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){cr=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=vr(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=gr(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cr),e.scissorTest=!1,mr(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===v||e.mapping===b?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cr=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:R,minFilter:R,generateMipmaps:!1,type:N,format:U,colorSpace:Te,depthBuffer:!1},n=pr(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=pr(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],i=[],n=[];let r=e;const a=e-4+1+sr.length;for(let s=0;s<a;s++){const a=Math.pow(2,r);i.push(a);let o=1/a;s>e-4?o=sr[s-e+4-1]:0===s&&(o=0),n.push(o);const l=1/(a-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),b=new Float32Array(m*f*d),_=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];v.set(n,p*f*e),b.set(h,m*f*e);const r=[e,e,e,e,e,e];_.set(r,g*f*e)}const y=new on;y.setAttribute("position",new qi(v,p)),y.setAttribute("uv",new qi(b,m)),y.setAttribute("faceIndex",new qi(_,g)),t.push(y),r>4&&r--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(e,t,i){const n=new Float32Array(20),r=new _t(0,1,0);return new On({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(n,e,t)}return n}_compileMaterial(e){const t=new Tn(this._lodPlanes[0],e);this._renderer.compile(t,or)}_sceneToCubeUV(e,t,i,n){const r=new In(90,1,t,i),a=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(lr),o.toneMapping=u,o.autoClear=!1;const h=new Vi({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),d=new Tn(new Mn,h);let f=!1;const p=e.background;p?p.isColor&&(h.color.copy(p),e.background=null,f=!0):(h.color.copy(lr),f=!0);for(let t=0;t<6;t++){const i=t%3;0===i?(r.up.set(0,a[t],0),r.lookAt(s[t],0,0)):1===i?(r.up.set(0,0,a[t]),r.lookAt(0,s[t],0)):(r.up.set(0,a[t],0),r.lookAt(0,0,s[t]));const l=this._cubeSize;mr(n,i*l,t>2?l:0,l,l),o.setRenderTarget(n),f&&o.render(d,r),o.render(e,r)}d.geometry.dispose(),d.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===v||e.mapping===b;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=vr()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=gr());const r=n?this._cubemapMaterial:this._equirectMaterial,a=new Tn(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const s=this._cubeSize;mr(t,0,0,3*s,2*s),i.setRenderTarget(t),i.render(a,or)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let t=1;t<this._lodPlanes.length;t++){const i=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),n=dr[(t-1)%dr.length];this._blur(e,t-1,t,i,n)}t.autoClear=i}_blur(e,t,i,n,r){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,n,"latitudinal",r),this._halfBlur(a,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,a,s){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Tn(this._lodPlanes[n],l),u=l.uniforms,h=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):20;p>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<20;++e){const t=e/f,i=Math.exp(-t*t/2);m.push(i),0===e?g+=i:e<p&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===a,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-i;const b=this._sizeLods[n];mr(t,3*b*(n>v-4?n-v+4:0),4*(this._cubeSize-b),3*b,2*b),o.setRenderTarget(t),o.render(c,or)}}function pr(e,t,i){const n=new mt(e,t,i);return n.texture.mapping=A,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function mr(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function gr(){return new On({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function vr(){return new On({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function br(e){let t=new WeakMap,i=null;function n(e){const i=e.target;i.removeEventListener("dispose",n);const r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){const a=r.mapping,s=a===_||a===y,o=a===v||a===b;if(s||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let n=t.get(r);return null===i&&(i=new fr(e)),n=s?i.fromEquirectangular(r,n):i.fromCubemap(r,n),t.set(r,n),n.texture}if(t.has(r))return t.get(r).texture;{const a=r.image;if(s&&a&&a.height>0||o&&a&&function(e){let t=0;for(let i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(a)){null===i&&(i=new fr(e));const a=s?i.fromEquirectangular(r):i.fromCubemap(r);return t.set(r,a),r.addEventListener("dispose",n),a.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function _r(e){const t={};function i(i){if(void 0!==t[i])return t[i];let n;switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(e){e.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(e){const t=i(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function yr(e,t,i,n){const r={},a=new WeakMap;function s(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const e in o.attributes)t.remove(o.attributes[e]);o.removeEventListener("dispose",s),delete r[o.id];const l=a.get(o);l&&(t.remove(l),a.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){const i=[],n=e.index,r=e.attributes.position;let s=0;if(null!==n){const e=n.array;s=n.version;for(let t=0,n=e.length;t<n;t+=3){const n=e[t+0],r=e[t+1],a=e[t+2];i.push(n,r,r,a,a,n)}}else{const e=r.array;s=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){const e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}const o=new(qe(i)?Ki:Qi)(i,1);o.version=s;const l=a.get(e);l&&t.remove(l),a.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",s),r[t.id]=!0,i.memory.geometries++),t},update:function(i){const n=i.attributes;for(const i in n)t.update(n[i],e.ARRAY_BUFFER);const r=i.morphAttributes;for(const i in r){const n=r[i];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=a.get(e);if(t){const i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return a.get(e)}}}function Ar(e,t,i,n){const r=n.isWebGL2;let a,s,o;this.setMode=function(e){a=e},this.setIndex=function(e){s=e.type,o=e.bytesPerElement},this.render=function(t,n){e.drawElements(a,n,s,t*o),i.update(n,a,1)},this.renderInstances=function(n,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](a,l,s,n*o,c),i.update(l,a,c)}}function Er(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(t.calls++,n){case e.TRIANGLES:t.triangles+=r*(i/3);break;case e.LINES:t.lines+=r*(i/2);break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function wr(e,t){return e[0]-t[0]}function Sr(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Tr(e,t,i){const n={},r=new Float32Array(8),a=new WeakMap,s=new pt,o=[];for(let e=0;e<8;e++)o[e]=[e,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==d?d.length:0;let p=a.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,b=void 0!==c.morphAttributes.normal,_=void 0!==c.morphAttributes.color,y=c.morphAttributes.position||[],A=c.morphAttributes.normal||[],E=c.morphAttributes.color||[];let w=0;!0===v&&(w=1),!0===b&&(w=2),!0===_&&(w=3);let S=c.attributes.position.count*w,T=1;S>t.maxTextureSize&&(T=Math.ceil(S/t.maxTextureSize),S=t.maxTextureSize);const x=new Float32Array(S*T*4*f),M=new gt(x,S,T,f);M.type=I,M.needsUpdate=!0;const R=4*w;for(let C=0;C<f;C++){const D=y[C],O=A[C],k=E[C],N=S*T*4*C;for(let L=0;L<D.count;L++){const U=L*R;!0===v&&(s.fromBufferAttribute(D,L),x[N+U+0]=s.x,x[N+U+1]=s.y,x[N+U+2]=s.z,x[N+U+3]=0),!0===b&&(s.fromBufferAttribute(O,L),x[N+U+4]=s.x,x[N+U+5]=s.y,x[N+U+6]=s.z,x[N+U+7]=0),!0===_&&(s.fromBufferAttribute(k,L),x[N+U+8]=s.x,x[N+U+9]=s.y,x[N+U+10]=s.z,x[N+U+11]=4===k.itemSize?s.w:1)}}function P(){M.dispose(),a.delete(c),c.removeEventListener("dispose",P)}p={count:f,texture:M,size:new Ye(S,T)},a.set(c,p),c.addEventListener("dispose",P)}let m=0;for(let B=0;B<h.length;B++)m+=h[B];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",p.texture,i),u.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{const F=void 0===h?0:h.length;let G=n[c.id];if(void 0===G||G.length!==F){G=[];for(let W=0;W<F;W++)G[W]=[W,0];n[c.id]=G}for(let Y=0;Y<F;Y++){const X=G[Y];X[0]=Y,X[1]=h[Y]}G.sort(Sr);for(let Z=0;Z<8;Z++)Z<F&&G[Z][1]?(o[Z][0]=G[Z][0],o[Z][1]=G[Z][1]):(o[Z][0]=Number.MAX_SAFE_INTEGER,o[Z][1]=0);o.sort(wr);const V=c.morphAttributes.position,z=c.morphAttributes.normal;let H=0;for(let q=0;q<8;q++){const Q=o[q],K=Q[0],J=Q[1];K!==Number.MAX_SAFE_INTEGER&&J?(V&&c.getAttribute("morphTarget"+q)!==V[K]&&c.setAttribute("morphTarget"+q,V[K]),z&&c.getAttribute("morphNormal"+q)!==z[K]&&c.setAttribute("morphNormal"+q,z[K]),r[q]=J,H+=J):(V&&!0===c.hasAttribute("morphTarget"+q)&&c.deleteAttribute("morphTarget"+q),z&&!0===c.hasAttribute("morphNormal"+q)&&c.deleteAttribute("morphNormal"+q),r[q]=0)}const j=c.morphTargetsRelative?1:1-H;u.getUniforms().setValue(e,"morphTargetBaseInfluence",j),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function xr(e,t,i,n){let r=new WeakMap;function a(e){const t=e.target;t.removeEventListener("dispose",a),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(s){const o=n.render.frame,l=s.geometry,c=t.get(s,l);return r.get(c)!==o&&(t.update(c),r.set(c,o)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",a)&&s.addEventListener("dispose",a),i.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&i.update(s.instanceColor,e.ARRAY_BUFFER)),c},dispose:function(){r=new WeakMap}}}const Mr=new ft,Rr=new gt,Pr=new vt,Cr=new Un,Dr=[],Or=[],kr=new Float32Array(16),Ir=new Float32Array(9),Nr=new Float32Array(4);function Lr(e,t,i){const n=e[0];if(n<=0||n>0)return e;const r=t*i;let a=Dr[r];if(void 0===a&&(a=new Float32Array(r),Dr[r]=a),0!==t){n.toArray(a,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(a,r)}return a}function Ur(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Br(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function Fr(e,t){let i=Or[t];void 0===i&&(i=new Int32Array(t),Or[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function Gr(e,t){const i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function Vr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ur(i,t))return;e.uniform2fv(this.addr,t),Br(i,t)}}function zr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)i[0]===t.r&&i[1]===t.g&&i[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Ur(i,t))return;e.uniform3fv(this.addr,t),Br(i,t)}}function Hr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ur(i,t))return;e.uniform4fv(this.addr,t),Br(i,t)}}function jr(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Ur(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),Br(i,t)}else{if(Ur(i,n))return;Nr.set(n),e.uniformMatrix2fv(this.addr,!1,Nr),Br(i,n)}}function Wr(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Ur(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),Br(i,t)}else{if(Ur(i,n))return;Ir.set(n),e.uniformMatrix3fv(this.addr,!1,Ir),Br(i,n)}}function Yr(e,t){const i=this.cache,n=t.elements;if(void 0===n){if(Ur(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),Br(i,t)}else{if(Ur(i,n))return;kr.set(n),e.uniformMatrix4fv(this.addr,!1,kr),Br(i,n)}}function Xr(e,t){const i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function Zr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ur(i,t))return;e.uniform2iv(this.addr,t),Br(i,t)}}function qr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Ur(i,t))return;e.uniform3iv(this.addr,t),Br(i,t)}}function Qr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ur(i,t))return;e.uniform4iv(this.addr,t),Br(i,t)}}function Kr(e,t){const i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function Jr(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Ur(i,t))return;e.uniform2uiv(this.addr,t),Br(i,t)}}function $r(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(Ur(i,t))return;e.uniform3uiv(this.addr,t),Br(i,t)}}function ea(e,t){const i=this.cache;if(void 0!==t.x)i[0]===t.x&&i[1]===t.y&&i[2]===t.z&&i[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Ur(i,t))return;e.uniform4uiv(this.addr,t),Br(i,t)}}function ta(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2D(t||Mr,r)}function ia(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||Pr,r)}function na(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||Cr,r)}function ra(e,t,i){const n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||Rr,r)}function aa(e,t){e.uniform1fv(this.addr,t)}function sa(e,t){const i=Lr(t,this.size,2);e.uniform2fv(this.addr,i)}function oa(e,t){const i=Lr(t,this.size,3);e.uniform3fv(this.addr,i)}function la(e,t){const i=Lr(t,this.size,4);e.uniform4fv(this.addr,i)}function ca(e,t){const i=Lr(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function ua(e,t){const i=Lr(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function ha(e,t){const i=Lr(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function da(e,t){e.uniform1iv(this.addr,t)}function fa(e,t){e.uniform2iv(this.addr,t)}function pa(e,t){e.uniform3iv(this.addr,t)}function ma(e,t){e.uniform4iv(this.addr,t)}function ga(e,t){e.uniform1uiv(this.addr,t)}function va(e,t){e.uniform2uiv(this.addr,t)}function ba(e,t){e.uniform3uiv(this.addr,t)}function _a(e,t){e.uniform4uiv(this.addr,t)}function ya(e,t,i){const n=this.cache,r=t.length,a=Fr(i,r);Ur(n,a)||(e.uniform1iv(this.addr,a),Br(n,a));for(let e=0;e!==r;++e)i.setTexture2D(t[e]||Mr,a[e])}function Aa(e,t,i){const n=this.cache,r=t.length,a=Fr(i,r);Ur(n,a)||(e.uniform1iv(this.addr,a),Br(n,a));for(let e=0;e!==r;++e)i.setTexture3D(t[e]||Pr,a[e])}function Ea(e,t,i){const n=this.cache,r=t.length,a=Fr(i,r);Ur(n,a)||(e.uniform1iv(this.addr,a),Br(n,a));for(let e=0;e!==r;++e)i.setTextureCube(t[e]||Cr,a[e])}function wa(e,t,i){const n=this.cache,r=t.length,a=Fr(i,r);Ur(n,a)||(e.uniform1iv(this.addr,a),Br(n,a));for(let e=0;e!==r;++e)i.setTexture2DArray(t[e]||Rr,a[e])}class Sa{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=function(e){switch(e){case 5126:return Gr;case 35664:return Vr;case 35665:return zr;case 35666:return Hr;case 35674:return jr;case 35675:return Wr;case 35676:return Yr;case 5124:case 35670:return Xr;case 35667:case 35671:return Zr;case 35668:case 35672:return qr;case 35669:case 35673:return Qr;case 5125:return Kr;case 36294:return Jr;case 36295:return $r;case 36296:return ea;case 35678:case 36198:case 36298:case 36306:case 35682:return ta;case 35679:case 36299:case 36307:return ia;case 35680:case 36300:case 36308:case 36293:return na;case 36289:case 36303:case 36311:case 36292:return ra}}(t.type)}}class Ta{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return aa;case 35664:return sa;case 35665:return oa;case 35666:return la;case 35674:return ca;case 35675:return ua;case 35676:return ha;case 5124:case 35670:return da;case 35667:case 35671:return fa;case 35668:case 35672:return pa;case 35669:case 35673:return ma;case 5125:return ga;case 36294:return va;case 36295:return ba;case 36296:return _a;case 35678:case 36198:case 36298:case 36306:case 35682:return ya;case 35679:case 36299:case 36307:return Aa;case 35680:case 36300:case 36308:case 36293:return Ea;case 36289:case 36303:case 36311:case 36292:return wa}}(t.type)}}class xa{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let r=0,a=n.length;r!==a;++r){const a=n[r];a.setValue(e,t[a.id],i)}}}const Ma=/(\w+)(\])?(\[|\.)?/g;function Ra(e,t){e.seq.push(t),e.map[t.id]=t}function Pa(e,t,i){const n=e.name,r=n.length;for(Ma.lastIndex=0;;){const a=Ma.exec(n),s=Ma.lastIndex;let o=a[1];const l="]"===a[2],c=a[3];if(l&&(o|=0),void 0===c||"["===c&&s+2===r){Ra(i,void 0===c?new Sa(o,e,t):new Ta(o,e,t));break}{let e=i.map[o];void 0===e&&(e=new xa(o),Ra(i,e)),i=e}}}class Ca{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n);Pa(i,e.getUniformLocation(t,i.name),this)}}setValue(e,t,i,n){const r=this.map[t];void 0!==r&&r.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,a=t.length;r!==a;++r){const a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,r=e.length;n!==r;++n){const r=e[n];r.id in t&&i.push(r)}return i}}function Da(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}let Oa=0;function ka(e,t,i){const n=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";const a=/ERROR: 0:(\d+)/.exec(r);if(a){const n=parseInt(a[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const i=e.split("\n"),n=[],r=Math.max(t-6,0),a=Math.min(t+6,i.length);for(let e=r;e<a;e++){const r=e+1;n.push(`${r===t?">":" "} ${r}: ${i[e]}`)}return n.join("\n")}(e.getShaderSource(t),n)}return r}function Ia(e,t){const i=function(e){switch(e){case Te:return["Linear","( value )"];case Se:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function Na(e,t){let i;switch(t){case h:i="Linear";break;case d:i="Reinhard";break;case f:i="OptimizedCineon";break;case p:i="ACESFilmic";break;case m:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function La(e){return""!==e}function Ua(e,t){const i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ba(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Fa=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ga(e){return e.replace(Fa,Va)}function Va(e,t){const i=qn[t];if(void 0===i)throw new Error("Can not resolve #include <"+t+">");return Ga(i)}const za=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Ha(e){return e.replace(za,ja)}function ja(e,t,i,n){let r="";for(let e=parseInt(t);e<parseInt(i);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function Wa(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ya(e,t,i,s){const h=e.getContext(),d=i.defines;let f=i.vertexShader,p=i.fragmentShader;const m=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===n?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===r?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===a&&(t="SHADOWMAP_TYPE_VSM"),t}(i),g=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case v:case b:t="ENVMAP_TYPE_CUBE";break;case A:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),_=function(e){let t="ENVMAP_MODE_REFLECTION";return e.envMap&&e.envMapMode===b&&(t="ENVMAP_MODE_REFRACTION"),t}(i),y=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case o:t="ENVMAP_BLENDING_MULTIPLY";break;case l:t="ENVMAP_BLENDING_MIX";break;case c:t="ENVMAP_BLENDING_ADD"}return t}(i),E=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const i=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:n,maxMip:i}}(i),w=i.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(La).join("\n")}(i),S=function(e){const t=[];for(const i in e){const n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(d),T=h.createProgram();let x,M,R=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(x=[S].filter(La).join("\n"),x.length>0&&(x+="\n"),M=[w,S].filter(La).join("\n"),M.length>0&&(M+="\n")):(x=[Wa(i),"#define SHADER_NAME "+i.shaderName,S,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+_:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+m:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(La).join("\n"),M=[w,Wa(i),"#define SHADER_NAME "+i.shaderName,S,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+g:"",i.envMap?"#define "+_:"",i.envMap?"#define "+y:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+m:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.useLegacyLights?"#define LEGACY_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==u?"#define TONE_MAPPING":"",i.toneMapping!==u?qn.tonemapping_pars_fragment:"",i.toneMapping!==u?Na("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",qn.encodings_pars_fragment,Ia("linearToOutputTexel",i.outputColorSpace),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(La).join("\n")),f=Ga(f),f=Ua(f,i),f=Ba(f,i),p=Ga(p),p=Ua(p,i),p=Ba(p,i),f=Ha(f),p=Ha(p),i.isWebGL2&&!0!==i.isRawShaderMaterial&&(R="#version 300 es\n",x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+x,M=["#define varying in",i.glslVersion===Pe?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Pe?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+M);const P=R+x+f,C=R+M+p,D=Da(h,h.VERTEX_SHADER,P),O=Da(h,h.FRAGMENT_SHADER,C);if(h.attachShader(T,D),h.attachShader(T,O),void 0!==i.index0AttributeName?h.bindAttribLocation(T,0,i.index0AttributeName):!0===i.morphTargets&&h.bindAttribLocation(T,0,"position"),h.linkProgram(T),e.debug.checkShaderErrors){const t=h.getProgramInfoLog(T).trim(),i=h.getShaderInfoLog(D).trim(),n=h.getShaderInfoLog(O).trim();let r=!0,a=!0;if(!1===h.getProgramParameter(T,h.LINK_STATUS))if(r=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(h,T,D,O);else{const e=ka(h,D,"vertex"),i=ka(h,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+h.getError()+" - VALIDATE_STATUS "+h.getProgramParameter(T,h.VALIDATE_STATUS)+"\n\nProgram Info Log: "+t+"\n"+e+"\n"+i)}else""!==t?console.warn("THREE.WebGLProgram: Program Info Log:",t):""!==i&&""!==n||(a=!1);a&&(this.diagnostics={runnable:r,programLog:t,vertexShader:{log:i,prefix:x},fragmentShader:{log:n,prefix:M}})}let k,I;return h.deleteShader(D),h.deleteShader(O),this.getUniforms=function(){return void 0===k&&(k=new Ca(h,T)),k},this.getAttributes=function(){return void 0===I&&(I=function(e,t){const i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const n=e.getActiveAttrib(t,r),a=n.name;let s=1;n.type===e.FLOAT_MAT2&&(s=2),n.type===e.FLOAT_MAT3&&(s=3),n.type===e.FLOAT_MAT4&&(s=4),i[a]={type:n.type,location:e.getAttribLocation(t,a),locationSize:s}}return i}(h,T)),I},this.destroy=function(){s.releaseStatesOfProgram(this),h.deleteProgram(T),this.program=void 0},this.name=i.shaderName,this.id=Oa++,this.cacheKey=t,this.usedTimes=1,this.program=T,this.vertexShader=D,this.fragmentShader=O,this}let Xa=0;class Za{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return!1===a.has(n)&&(a.add(n),n.usedTimes++),!1===a.has(r)&&(a.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return void 0===i&&(i=new qa(e),t.set(e,i)),i}}class qa{constructor(e){this.id=Xa++,this.code=e,this.usedTimes=0}}function Qa(e,t,i,n,r,a,s){const o=new si,l=new Za,c=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures;let p=r.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return 1===e?"uv1":2===e?"uv2":3===e?"uv3":"uv"}return{getParameters:function(a,o,c,v,b){const _=v.fog,y=b.geometry,E=a.isMeshStandardMaterial?v.environment:null,w=(a.isMeshStandardMaterial?i:t).get(a.envMap||E),S=w&&w.mapping===A?w.image.height:null,T=m[a.type];null!==a.precision&&(p=r.getMaxPrecision(a.precision),p!==a.precision&&console.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",p,"instead."));const x=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==x?x.length:0;let R,P,C,D,O=0;if(void 0!==y.morphAttributes.position&&(O=1),void 0!==y.morphAttributes.normal&&(O=2),void 0!==y.morphAttributes.color&&(O=3),T){const e=Kn[T];R=e.vertexShader,P=e.fragmentShader}else R=a.vertexShader,P=a.fragmentShader,l.update(a),C=l.getVertexShaderID(a),D=l.getFragmentShaderID(a);const k=e.getRenderTarget(),I=!0===b.isInstancedMesh,N=!!a.map,L=!!a.matcap,U=!!w,B=!!a.aoMap,F=!!a.lightMap,G=!!a.bumpMap,V=!!a.normalMap,z=!!a.displacementMap,H=!!a.emissiveMap,j=!!a.metalnessMap,W=!!a.roughnessMap,Y=a.clearcoat>0,X=a.iridescence>0,Z=a.sheen>0,q=a.transmission>0,Q=Y&&!!a.clearcoatMap,K=Y&&!!a.clearcoatNormalMap,J=Y&&!!a.clearcoatRoughnessMap,$=X&&!!a.iridescenceMap,ee=X&&!!a.iridescenceThicknessMap,te=Z&&!!a.sheenColorMap,ie=Z&&!!a.sheenRoughnessMap,ne=!!a.specularMap,re=!!a.specularColorMap,ae=!!a.specularIntensityMap,se=q&&!!a.transmissionMap,oe=q&&!!a.thicknessMap,le=!!a.gradientMap,ce=!!a.alphaMap,ue=a.alphaTest>0,he=!!a.extensions,de=!!y.attributes.uv1,fe=!!y.attributes.uv2,pe=!!y.attributes.uv3;return{isWebGL2:h,shaderID:T,shaderName:a.type,vertexShader:R,fragmentShader:P,defines:a.defines,customVertexShaderID:C,customFragmentShaderID:D,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:p,instancing:I,instancingColor:I&&null!==b.instanceColor,supportsVertexTextures:f,outputColorSpace:null===k?e.outputColorSpace:!0===k.isXRRenderTarget?k.texture.colorSpace:Te,map:N,matcap:L,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:S,aoMap:B,lightMap:F,bumpMap:G,normalMap:V,displacementMap:f&&z,emissiveMap:H,normalMapObjectSpace:V&&1===a.normalMapType,normalMapTangentSpace:V&&0===a.normalMapType,metalnessMap:j,roughnessMap:W,clearcoat:Y,clearcoatMap:Q,clearcoatNormalMap:K,clearcoatRoughnessMap:J,iridescence:X,iridescenceMap:$,iridescenceThicknessMap:ee,sheen:Z,sheenColorMap:te,sheenRoughnessMap:ie,specularMap:ne,specularColorMap:re,specularIntensityMap:ae,transmission:q,transmissionMap:se,thicknessMap:oe,gradientMap:le,opaque:!1===a.transparent&&1===a.blending,alphaMap:ce,alphaTest:ue,combine:a.combine,mapUv:N&&g(a.map.channel),aoMapUv:B&&g(a.aoMap.channel),lightMapUv:F&&g(a.lightMap.channel),bumpMapUv:G&&g(a.bumpMap.channel),normalMapUv:V&&g(a.normalMap.channel),displacementMapUv:z&&g(a.displacementMap.channel),emissiveMapUv:H&&g(a.emissiveMap.channel),metalnessMapUv:j&&g(a.metalnessMap.channel),roughnessMapUv:W&&g(a.roughnessMap.channel),clearcoatMapUv:Q&&g(a.clearcoatMap.channel),clearcoatNormalMapUv:K&&g(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:J&&g(a.clearcoatRoughnessMap.channel),iridescenceMapUv:$&&g(a.iridescenceMap.channel),iridescenceThicknessMapUv:ee&&g(a.iridescenceThicknessMap.channel),sheenColorMapUv:te&&g(a.sheenColorMap.channel),sheenRoughnessMapUv:ie&&g(a.sheenRoughnessMap.channel),specularMapUv:ne&&g(a.specularMap.channel),specularColorMapUv:re&&g(a.specularColorMap.channel),specularIntensityMapUv:ae&&g(a.specularIntensityMap.channel),transmissionMapUv:se&&g(a.transmissionMap.channel),thicknessMapUv:oe&&g(a.thicknessMap.channel),alphaMapUv:ce&&g(a.alphaMap.channel),vertexTangents:V&&!!y.attributes.tangent,vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUv1s:de,vertexUv2s:fe,vertexUv3s:pe,pointsUvs:!0===b.isPoints&&!!y.attributes.uv&&(N||ce),fog:!!_,useFog:!0===a.fog,fogExp2:_&&_.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===b.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:O,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:a.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:a.toneMapped?e.toneMapping:u,useLegacyLights:e.useLegacyLights,premultipliedAlpha:a.premultipliedAlpha,doubleSided:2===a.side,flipSided:1===a.side,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionDerivatives:he&&!0===a.extensions.derivatives,extensionFragDepth:he&&!0===a.extensions.fragDepth,extensionDrawBuffers:he&&!0===a.extensions.drawBuffers,extensionShaderTextureLOD:he&&!0===a.extensions.shaderTextureLOD,rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),customProgramCacheKey:a.customProgramCacheKey()}},getProgramCacheKey:function(t){const i=[];if(t.shaderID?i.push(t.shaderID):(i.push(t.customVertexShaderID),i.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)i.push(e),i.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(i,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0),t.supportsVertexTextures&&o.enable(1),t.instancing&&o.enable(2),t.instancingColor&&o.enable(3),t.matcap&&o.enable(4),t.envMap&&o.enable(5),t.normalMapObjectSpace&&o.enable(6),t.normalMapTangentSpace&&o.enable(7),t.clearcoat&&o.enable(8),t.iridescence&&o.enable(9),t.alphaTest&&o.enable(10),t.vertexColors&&o.enable(11),t.vertexAlphas&&o.enable(12),t.vertexUv1s&&o.enable(13),t.vertexUv2s&&o.enable(14),t.vertexUv3s&&o.enable(15),t.vertexTangents&&o.enable(16),e.push(o.mask),o.disableAll(),t.fog&&o.enable(0),t.useFog&&o.enable(1),t.flatShading&&o.enable(2),t.logarithmicDepthBuffer&&o.enable(3),t.skinning&&o.enable(4),t.morphTargets&&o.enable(5),t.morphNormals&&o.enable(6),t.morphColors&&o.enable(7),t.premultipliedAlpha&&o.enable(8),t.shadowMapEnabled&&o.enable(9),t.useLegacyLights&&o.enable(10),t.doubleSided&&o.enable(11),t.flipSided&&o.enable(12),t.useDepthPacking&&o.enable(13),t.dithering&&o.enable(14),t.transmission&&o.enable(15),t.sheen&&o.enable(16),t.opaque&&o.enable(17),t.pointsUvs&&o.enable(18),e.push(o.mask)}(i,t),i.push(e.outputColorSpace)),i.push(t.customProgramCacheKey),i.join()},getUniforms:function(e){const t=m[e.type];let i;if(t){const e=Kn[t];i=Dn.clone(e.uniforms)}else i=e.uniforms;return i},acquireProgram:function(t,i){let n;for(let e=0,t=c.length;e<t;e++){const t=c[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new Ya(e,i,t,a),c.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function Ka(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function Ja(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function $a(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function es(){const e=[];let t=0;const i=[],n=[],r=[];function a(i,n,r,a,s,o){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:a,renderOrder:i.renderOrder,z:s,group:o},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=a,l.renderOrder=i.renderOrder,l.z=s,l.group=o),t++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){t=0,i.length=0,n.length=0,r.length=0},push:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?n.push(u):!0===s.transparent?r.push(u):i.push(u)},unshift:function(e,t,s,o,l,c){const u=a(e,t,s,o,l,c);s.transmission>0?n.unshift(u):!0===s.transparent?r.unshift(u):i.unshift(u)},finish:function(){for(let i=t,n=e.length;i<n;i++){const t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||Ja),n.length>1&&n.sort(t||$a),r.length>1&&r.sort(t||$a)}}}function ts(){let e=new WeakMap;return{get:function(t,i){const n=e.get(t);let r;return void 0===n?(r=new es,e.set(t,[r])):i>=n.length?(r=new es,n.push(r)):r=n[i],r},dispose:function(){e=new WeakMap}}}function is(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new _t,color:new Fi};break;case"SpotLight":i={position:new _t,direction:new _t,color:new Fi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new _t,color:new Fi,distance:0,decay:0};break;case"HemisphereLight":i={direction:new _t,skyColor:new Fi,groundColor:new Fi};break;case"RectAreaLight":i={color:new Fi,position:new _t,halfWidth:new _t,halfHeight:new _t}}return e[t.id]=i,i}}}let ns=0;function rs(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function as(e,t){const i=new is,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let i;switch(t.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ye,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=i,i}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let e=0;e<9;e++)r.probe.push(new _t);const a=new _t,s=new qt,o=new qt;return{setup:function(a,s){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,b=0,_=0;a.sort(rs);const y=!0===s?Math.PI:1;for(let e=0,t=a.length;e<t;e++){const t=a[e],s=t.color,A=t.intensity,E=t.distance,w=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=s.r*A*y,l+=s.g*A*y,c+=s.b*A*y;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],A);else if(t.isDirectionalLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,r.directionalShadow[u]=i,r.directionalShadowMap[u]=w,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=i.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(A*y),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[d]=e;const a=t.shadow;if(t.map&&(r.spotLightMap[b]=t.map,b++,a.updateMatrices(t),t.castShadow&&_++),r.spotLightMatrix[d]=a.matrix,t.castShadow){const e=n.get(t);e.shadowBias=a.bias,e.shadowNormalBias=a.normalBias,e.shadowRadius=a.radius,e.shadowMapSize=a.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=w,v++}d++}else if(t.isRectAreaLight){const e=i.get(t);e.color.copy(s).multiplyScalar(A),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[f]=e,f++}else if(t.isPointLight){const e=i.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*y),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,i=n.get(t);i.shadowBias=e.bias,i.shadowNormalBias=e.normalBias,i.shadowRadius=e.radius,i.shadowMapSize=e.mapSize,i.shadowCameraNear=e.camera.near,i.shadowCameraFar=e.camera.far,r.pointShadow[h]=i,r.pointShadowMap[h]=w,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){const e=i.get(t);e.skyColor.copy(t.color).multiplyScalar(A*y),e.groundColor.copy(t.groundColor).multiplyScalar(A*y),r.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=Qn.LTC_FLOAT_1,r.rectAreaLTC2=Qn.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=Qn.LTC_HALF_1,r.rectAreaLTC2=Qn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const A=r.hash;A.directionalLength===u&&A.pointLength===h&&A.spotLength===d&&A.rectAreaLength===f&&A.hemiLength===p&&A.numDirectionalShadows===m&&A.numPointShadows===g&&A.numSpotShadows===v&&A.numSpotMaps===b||(r.directional.length=u,r.spot.length=d,r.rectArea.length=f,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+b-_,r.spotLightMap.length=b,r.numSpotLightShadowsWithMaps=_,A.directionalLength=u,A.pointLength=h,A.spotLength=d,A.rectAreaLength=f,A.hemiLength=p,A.numDirectionalShadows=m,A.numPointShadows=g,A.numSpotShadows=v,A.numSpotMaps=b,r.version=ns++)},setupView:function(e,t){let i=0,n=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[i];e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),i++}else if(d.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),a.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(a),e.direction.transformDirection(h),l++}else if(d.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(d.isPointLight){const e=r.point[n];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),n++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function ss(e,t){const i=new as(e,t),n=[],r=[];return{init:function(){n.length=0,r.length=0},state:{lightsArray:n,shadowsArray:r,lights:i},setupLights:function(e){i.setup(n,e)},setupLightsView:function(e){i.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function os(e,t){let i=new WeakMap;return{get:function(n,r=0){const a=i.get(n);let s;return void 0===a?(s=new ss(e,t),i.set(n,[s])):r>=a.length?(s=new ss(e,t),a.push(s)):s=a[r],s},dispose:function(){i=new WeakMap}}}class ls extends Ii{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class cs extends Ii{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function us(e,t,i){let r=new Wn;const s=new Ye,o=new Ye,l=new pt,c=new ls({depthPacking:3201}),u=new cs,h={},d=i.maxTextureSize,f={0:1,1:0,2:2},p=new On({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ye},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new on;g.setAttribute("position",new qi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new Tn(g,p),b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=n;let _=this.type;function y(i,n){const r=t.update(v);p.defines.VSM_SAMPLES!==i.blurSamples&&(p.defines.VSM_SAMPLES=i.blurSamples,m.defines.VSM_SAMPLES=i.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new mt(s.x,s.y)),p.uniforms.shadow_pass.value=i.map.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,r,p,v,null),m.uniforms.shadow_pass.value=i.mapPass.texture,m.uniforms.resolution.value=i.mapSize,m.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,r,m,v,null)}function A(t,i,n,r){let s=null;const o=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===n.isPointLight?u:c,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const e=s.uuid,t=i.uuid;let n=h[e];void 0===n&&(n={},h[e]=n);let r=n[t];void 0===r&&(r=s.clone(),n[t]=r),s=r}return s.visible=i.visible,s.wireframe=i.wireframe,s.side=r===a?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:f[i.side],s.alphaMap=i.alphaMap,s.alphaTest=i.alphaTest,s.map=i.map,s.clipShadows=i.clipShadows,s.clippingPlanes=i.clippingPlanes,s.clipIntersection=i.clipIntersection,s.displacementMap=i.displacementMap,s.displacementScale=i.displacementScale,s.displacementBias=i.displacementBias,s.wireframeLinewidth=i.wireframeLinewidth,s.linewidth=i.linewidth,!0===n.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=n),s}function E(i,n,s,o,l){if(!1===i.visible)return;if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&l===a)&&(!i.frustumCulled||r.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,i.matrixWorld);const n=t.update(i),r=i.material;if(Array.isArray(r)){const t=n.groups;for(let a=0,c=t.length;a<c;a++){const c=t[a],u=r[c.materialIndex];if(u&&u.visible){const t=A(i,u,o,l);e.renderBufferDirect(s,null,n,t,i,c)}}}else if(r.visible){const t=A(i,r,o,l);e.renderBufferDirect(s,null,n,t,i,null)}}const c=i.children;for(let e=0,t=c.length;e<t;e++)E(c[e],n,s,o,l)}this.render=function(t,i,n){if(!1===b.enabled)return;if(!1===b.autoUpdate&&!1===b.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),f=e.state;f.setBlending(0),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);const p=_!==a&&this.type===a,m=_===a&&this.type!==a;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=u.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",u,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;s.copy(h.mapSize);const g=h.getFrameExtents();if(s.multiply(g),o.copy(h.mapSize),(s.x>d||s.y>d)&&(s.x>d&&(o.x=Math.floor(d/g.x),s.x=o.x*g.x,h.mapSize.x=o.x),s.y>d&&(o.y=Math.floor(d/g.y),s.y=o.y*g.y,h.mapSize.y=o.y)),null===h.map||!0===p||!0===m){const e=this.type!==a?{minFilter:T,magFilter:T}:{};null!==h.map&&h.map.dispose(),h.map=new mt(s.x,s.y,e),h.map.texture.name=u.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const v=h.getViewportCount();for(let e=0;e<v;e++){const t=h.getViewport(e);l.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),f.viewport(l),h.updateMatrices(u,e),r=h.getFrustum(),E(i,n,h.camera,u,this.type)}!0!==h.isPointLightShadow&&this.type===a&&y(h,n),h.needsUpdate=!1}_=this.type,b.needsUpdate=!1,e.setRenderTarget(c,u,h)}}function hs(e,t,i){const n=i.isWebGL2,r=new function(){let t=!1;const i=new pt;let n=null;const r=new pt(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,a,s,o){!0===o&&(t*=s,n*=s,a*=s),i.set(t,n,a,s),!1===r.equals(i)&&(e.clearColor(t,n,a,s),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},a=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(t){t?V(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},o=new function(){let t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null;return{setTest:function(i){t||(i?V(e.STENCIL_TEST):z(e.STENCIL_TEST))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,s){n===t&&r===i&&a===s||(e.stencilFunc(t,i,s),n=t,r=i,a=s)},setOp:function(t,i,n){s===t&&o===i&&l===n||(e.stencilOp(t,i,n),s=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,i=null,n=null,r=null,a=null,s=null,o=null,l=null,c=null}}},l=new WeakMap,c=new WeakMap;let u={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,b=null,_=null,y=null,A=null,E=null,w=!1,S=null,T=null,x=null,M=null,R=null;const P=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let C=!1,D=0;const O=e.getParameter(e.VERSION);-1!==O.indexOf("WebGL")?(D=parseFloat(/^WebGL (\d)/.exec(O)[1]),C=D>=1):-1!==O.indexOf("OpenGL ES")&&(D=parseFloat(/^OpenGL ES (\d)/.exec(O)[1]),C=D>=2);let k=null,I={};const N=e.getParameter(e.SCISSOR_BOX),L=e.getParameter(e.VIEWPORT),U=(new pt).fromArray(N),B=(new pt).fromArray(L);function F(t,i,r,a){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)!n||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(i+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(i,0,e.RGBA,1,1,a,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const G={};function V(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function z(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}G[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),G[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(G[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),G[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),V(e.DEPTH_TEST),a.setFunc(3),Y(!1),X(1),V(e.CULL_FACE),W(0);const H={[s]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(n)H[103]=e.MIN,H[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(H[103]=e.MIN_EXT,H[104]=e.MAX_EXT)}const j={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA};function W(t,i,n,r,a,o,l,c){if(0!==t){if(!1===m&&(V(e.BLEND),m=!0),5===t)a=a||i,o=o||n,l=l||r,i===v&&a===y||(e.blendEquationSeparate(H[i],H[a]),v=i,y=a),n===b&&r===_&&o===A&&l===E||(e.blendFuncSeparate(j[n],j[r],j[o],j[l]),b=n,_=r,A=o,E=l),g=t,w=!1;else if(t!==g||c!==w){if(v===s&&y===s||(e.blendEquation(e.FUNC_ADD),v=s,y=s),c)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}b=null,_=null,A=null,E=null,g=t,w=c}}else!0===m&&(z(e.BLEND),m=!1)}function Y(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function X(t){0!==t?(V(e.CULL_FACE),t!==T&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),T=t}function Z(t,i,n){t?(V(e.POLYGON_OFFSET_FILL),M===i&&R===n||(e.polygonOffset(i,n),M=i,R=n)):z(e.POLYGON_OFFSET_FILL)}return{buffers:{color:r,depth:a,stencil:o},enable:V,disable:z,bindFramebuffer:function(t,i){return h[t]!==i&&(e.bindFramebuffer(t,i),h[t]=i,n&&(t===e.DRAW_FRAMEBUFFER&&(h[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(h[e.DRAW_FRAMEBUFFER]=i)),!0)},drawBuffers:function(n,r){let a=f,s=!1;if(n)if(a=d.get(r),void 0===a&&(a=[],d.set(r,a)),n.isWebGLMultipleRenderTargets){const t=n.texture;if(a.length!==t.length||a[0]!==e.COLOR_ATTACHMENT0){for(let i=0,n=t.length;i<n;i++)a[i]=e.COLOR_ATTACHMENT0+i;a.length=t.length,s=!0}}else a[0]!==e.COLOR_ATTACHMENT0&&(a[0]=e.COLOR_ATTACHMENT0,s=!0);else a[0]!==e.BACK&&(a[0]=e.BACK,s=!0);s&&(i.isWebGL2?e.drawBuffers(a):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(a))},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:W,setMaterial:function(t,i){2===t.side?z(e.CULL_FACE):V(e.CULL_FACE);let n=1===t.side;i&&(n=!n),Y(n),1===t.blending&&!1===t.transparent?W(0):W(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite);const s=t.stencilWrite;o.setTest(s),s&&(o.setMask(t.stencilWriteMask),o.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),o.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Z(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?V(e.SAMPLE_ALPHA_TO_COVERAGE):z(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Y,setCullFace:X,setLineWidth:function(t){t!==x&&(C&&e.lineWidth(t),x=t)},setPolygonOffset:Z,setScissorTest:function(t){t?V(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+P-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===k?e.TEXTURE0+P-1:k);let r=I[n];void 0===r&&(r={type:void 0,texture:void 0},I[n]=r),r.type===t&&r.texture===i||(k!==n&&(e.activeTexture(n),k=n),e.bindTexture(t,i||G[t]),r.type=t,r.texture=i)},unbindTexture:function(){const t=I[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,i){let n=c.get(i);void 0===n&&(n=new WeakMap,c.set(i,n));let r=n.get(t);void 0===r&&(r=e.getUniformBlockIndex(i,t.name),n.set(t,r))},uniformBlockBinding:function(t,i){const n=c.get(i).get(t);l.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),l.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===n&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),u={},k=null,I={},h={},d=new WeakMap,f=[],p=null,m=!1,g=null,v=null,b=null,_=null,y=null,A=null,E=null,w=!1,S=null,T=null,x=null,M=null,R=null,U.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),r.reset(),a.reset(),o.reset()}}}function ds(e,t,i,n,r,a,s){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function b(e,t){return v?new OffscreenCanvas(e,t):Je("canvas")}function _(e,t,i,n){let r=1;if((e.width>n||e.height>n)&&(r=n/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const n=t?ze:Math.floor,a=n(r*e.width),s=n(r*e.height);void 0===m&&(m=b(a,s));const o=i?b(a,s):m;return o.width=a,o.height=s,o.getContext("2d").drawImage(e,0,0,a,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function y(e){return Ge(e.width)&&Ge(e.height)}function A(e,t){return e.generateMipmaps&&t&&e.minFilter!==T&&e.minFilter!==R}function G(t){e.generateMipmap(t)}function V(i,n,r,a,s=!1){if(!1===o)return n;if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=n;return n===e.RED&&(r===e.FLOAT&&(l=e.R32F),r===e.HALF_FLOAT&&(l=e.R16F),r===e.UNSIGNED_BYTE&&(l=e.R8)),n===e.RG&&(r===e.FLOAT&&(l=e.RG32F),r===e.HALF_FLOAT&&(l=e.RG16F),r===e.UNSIGNED_BYTE&&(l=e.RG8)),n===e.RGBA&&(r===e.FLOAT&&(l=e.RGBA32F),r===e.HALF_FLOAT&&(l=e.RGBA16F),r===e.UNSIGNED_BYTE&&(l=a===Se&&!1===s?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)),l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function z(e,t,i){return!0===A(e,i)||e.isFramebufferTexture&&e.minFilter!==T&&e.minFilter!==R?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function H(t){return t===T||t===x||t===M?e.NEAREST:e.LINEAR}function j(e){const t=e.target;t.removeEventListener("dispose",j),function(e){const t=n.get(e);if(void 0===t.__webglInit)return;const i=e.source,r=g.get(i);if(r){const n=r[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&Y(e),0===Object.keys(r).length&&g.delete(i)}n.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function W(t){const i=t.target;i.removeEventListener("dispose",W),function(t){const i=t.texture,r=n.get(t),a=n.get(i);if(void 0!==a.__webglTexture&&(e.deleteTexture(a.__webglTexture),s.memory.textures--),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++)e.deleteFramebuffer(r.__webglFramebuffer[t]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[t]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let t=0,r=i.length;t<r;t++){const r=n.get(i[t]);r.__webglTexture&&(e.deleteTexture(r.__webglTexture),s.memory.textures--),n.remove(i[t])}n.remove(i),n.remove(t)}(i)}function Y(t){const i=n.get(t);e.deleteTexture(i.__webglTexture);const r=t.source;delete g.get(r)[i.__cacheKey],s.memory.textures--}let X=0;function Z(t,r){const a=n.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&a.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void $(a,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,a.__webglTexture,e.TEXTURE0+r)}const q={[E]:e.REPEAT,[w]:e.CLAMP_TO_EDGE,[S]:e.MIRRORED_REPEAT},Q={[T]:e.NEAREST,[x]:e.NEAREST_MIPMAP_NEAREST,[M]:e.NEAREST_MIPMAP_LINEAR,[R]:e.LINEAR,[P]:e.LINEAR_MIPMAP_NEAREST,[C]:e.LINEAR_MIPMAP_LINEAR};function K(i,a,s){if(s?(e.texParameteri(i,e.TEXTURE_WRAP_S,q[a.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,q[a.wrapT]),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,q[a.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,Q[a.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,Q[a.minFilter])):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i!==e.TEXTURE_3D&&i!==e.TEXTURE_2D_ARRAY||e.texParameteri(i,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),a.wrapS===w&&a.wrapT===w||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(i,e.TEXTURE_MAG_FILTER,H(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,H(a.minFilter)),a.minFilter!==T&&a.minFilter!==R&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const s=t.get("EXT_texture_filter_anisotropic");if(a.magFilter===T)return;if(a.minFilter!==M&&a.minFilter!==C)return;if(a.type===I&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&a.type===N&&!1===t.has("OES_texture_half_float_linear"))return;(a.anisotropy>1||n.get(a).__currentAnisotropy)&&(e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}}function J(t,i){let n=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",j));const r=i.source;let a=g.get(r);void 0===a&&(a={},g.set(r,a));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(i);if(o!==t.__cacheKey){void 0===a[o]&&(a[o]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,n=!0),a[o].usedTimes++;const r=a[t.__cacheKey];void 0!==r&&(a[t.__cacheKey].usedTimes--,0===r.usedTimes&&Y(i)),t.__cacheKey=o,t.__webglTexture=a[o].texture}return n}function $(t,r,s){let l=e.TEXTURE_2D;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),r.isData3DTexture&&(l=e.TEXTURE_3D);const c=J(t,r),h=r.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const d=n.get(h);if(h.version!==d.__version||!0===c){i.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=function(e){return!o&&(e.wrapS!==w||e.wrapT!==w||e.minFilter!==T&&e.minFilter!==R)}(r)&&!1===y(r.image);let n=_(r.image,t,!1,u);n=ae(r,n);const f=y(n)||o,p=a.convert(r.format,r.colorSpace);let m,g=a.convert(r.type),v=V(r.internalFormat,p,g,r.colorSpace);K(l,r,f);const b=r.mipmaps,E=o&&!0!==r.isVideoTexture,S=void 0===d.__version||!0===c,x=z(r,n,f);if(r.isDepthTexture)v=e.DEPTH_COMPONENT,o?v=r.type===I?e.DEPTH_COMPONENT32F:r.type===k?e.DEPTH_COMPONENT24:r.type===L?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:r.type===I&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===B&&v===e.DEPTH_COMPONENT&&r.type!==O&&r.type!==k&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=k,g=a.convert(r.type)),r.format===F&&v===e.DEPTH_COMPONENT&&(v=e.DEPTH_STENCIL,r.type!==L&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=L,g=a.convert(r.type))),S&&(E?i.texStorage2D(e.TEXTURE_2D,1,v,n.width,n.height):i.texImage2D(e.TEXTURE_2D,0,v,n.width,n.height,0,p,g,null));else if(r.isDataTexture)if(b.length>0&&f){E&&S&&i.texStorage2D(e.TEXTURE_2D,x,v,b[0].width,b[0].height);for(let t=0,n=b.length;t<n;t++)m=b[t],E?i.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):i.texImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,p,g,m.data);r.generateMipmaps=!1}else E?(S&&i.texStorage2D(e.TEXTURE_2D,x,v,n.width,n.height),i.texSubImage2D(e.TEXTURE_2D,0,0,0,n.width,n.height,p,g,n.data)):i.texImage2D(e.TEXTURE_2D,0,v,n.width,n.height,0,p,g,n.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){E&&S&&i.texStorage3D(e.TEXTURE_2D_ARRAY,x,v,b[0].width,b[0].height,n.depth);for(let t=0,a=b.length;t<a;t++)m=b[t],r.format!==U?null!==p?E?i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,n.depth,p,m.data,0,0):i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,v,m.width,m.height,n.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?i.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,m.width,m.height,n.depth,p,g,m.data):i.texImage3D(e.TEXTURE_2D_ARRAY,t,v,m.width,m.height,n.depth,0,p,g,m.data)}else{E&&S&&i.texStorage2D(e.TEXTURE_2D,x,v,b[0].width,b[0].height);for(let t=0,n=b.length;t<n;t++)m=b[t],r.format!==U?null!==p?E?i.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,m.data):i.compressedTexImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):E?i.texSubImage2D(e.TEXTURE_2D,t,0,0,m.width,m.height,p,g,m.data):i.texImage2D(e.TEXTURE_2D,t,v,m.width,m.height,0,p,g,m.data)}else if(r.isDataArrayTexture)E?(S&&i.texStorage3D(e.TEXTURE_2D_ARRAY,x,v,n.width,n.height,n.depth),i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,n.width,n.height,n.depth,p,g,n.data)):i.texImage3D(e.TEXTURE_2D_ARRAY,0,v,n.width,n.height,n.depth,0,p,g,n.data);else if(r.isData3DTexture)E?(S&&i.texStorage3D(e.TEXTURE_3D,x,v,n.width,n.height,n.depth),i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,n.width,n.height,n.depth,p,g,n.data)):i.texImage3D(e.TEXTURE_3D,0,v,n.width,n.height,n.depth,0,p,g,n.data);else if(r.isFramebufferTexture){if(S)if(E)i.texStorage2D(e.TEXTURE_2D,x,v,n.width,n.height);else{let t=n.width,r=n.height;for(let n=0;n<x;n++)i.texImage2D(e.TEXTURE_2D,n,v,t,r,0,p,g,null),t>>=1,r>>=1}}else if(b.length>0&&f){E&&S&&i.texStorage2D(e.TEXTURE_2D,x,v,b[0].width,b[0].height);for(let t=0,n=b.length;t<n;t++)m=b[t],E?i.texSubImage2D(e.TEXTURE_2D,t,0,0,p,g,m):i.texImage2D(e.TEXTURE_2D,t,v,p,g,m);r.generateMipmaps=!1}else E?(S&&i.texStorage2D(e.TEXTURE_2D,x,v,n.width,n.height),i.texSubImage2D(e.TEXTURE_2D,0,0,0,p,g,n)):i.texImage2D(e.TEXTURE_2D,0,v,p,g,n);A(r,f)&&G(l),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function ee(t,r,s,o,l){const c=a.convert(s.format,s.colorSpace),u=a.convert(s.type),h=V(s.internalFormat,c,u,s.colorSpace);n.get(r).__hasExternalTextures||(l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?i.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):i.texImage2D(l,0,h,r.width,r.height,0,c,u,null)),i.bindFramebuffer(e.FRAMEBUFFER,t),re(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,n.get(s).__webglTexture,0,ne(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,n.get(s).__webglTexture,0),i.bindFramebuffer(e.FRAMEBUFFER,null)}function te(t,i,n){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer){let r=e.DEPTH_COMPONENT16;if(n||re(i)){const t=i.depthTexture;t&&t.isDepthTexture&&(t.type===I?r=e.DEPTH_COMPONENT32F:t.type===k&&(r=e.DEPTH_COMPONENT24));const n=ne(i);re(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,n,r,i.width,i.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,n,r,i.width,i.height)}else e.renderbufferStorage(e.RENDERBUFFER,r,i.width,i.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(i.depthBuffer&&i.stencilBuffer){const r=ne(i);n&&!1===re(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,i.width,i.height):re(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,e.DEPTH24_STENCIL8,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=!0===i.isWebGLMultipleRenderTargets?i.texture:[i.texture];for(let r=0;r<t.length;r++){const s=t[r],o=a.convert(s.format,s.colorSpace),l=a.convert(s.type),c=V(s.internalFormat,o,l,s.colorSpace),u=ne(i);n&&!1===re(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,i.width,i.height):re(i)?d.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,c,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,c,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function ie(t){const r=n.get(t),a=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(a)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),Z(r.depthTexture,0);const a=n.get(r.depthTexture).__webglTexture,s=ne(r);if(r.depthTexture.format===B)re(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==F)throw new Error("Unknown depthTexture format");re(r)?d.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,a,0)}}(r.__webglFramebuffer,t)}else if(a){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=e.createRenderbuffer(),te(r.__webglDepthbuffer[n],t,!1)}else i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),te(r.__webglDepthbuffer,t,!1);i.bindFramebuffer(e.FRAMEBUFFER,null)}function ne(e){return Math.min(h,e.samples)}function re(e){const i=n.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function ae(e,i){const n=e.colorSpace,r=e.format,a=e.type;return!0===e.isCompressedTexture||e.format===Ce||n!==Te&&n!==we&&(n===Se?!1===o?!0===t.has("EXT_sRGB")&&r===U?(e.format=Ce,e.minFilter=R,e.generateMipmaps=!1):i=ct.sRGBToLinear(i):r===U&&a===D||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),i}this.allocateTextureUnit=function(){const e=X;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),X+=1,e},this.resetTextureUnits=function(){X=0},this.setTexture2D=Z,this.setTexture2DArray=function(t,r){const a=n.get(t);t.version>0&&a.__version!==t.version?$(a,t,r):i.bindTexture(e.TEXTURE_2D_ARRAY,a.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){const a=n.get(t);t.version>0&&a.__version!==t.version?$(a,t,r):i.bindTexture(e.TEXTURE_3D,a.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,r){const s=n.get(t);t.version>0&&s.__version!==t.version?function(t,r,s){if(6!==r.image.length)return;const l=J(t,r),u=r.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const h=n.get(u);if(u.version!==h.__version||!0===l){i.activeTexture(e.TEXTURE0+s),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.NONE);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,n=r.image[0]&&r.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||n?n?r.image[e].image:r.image[e]:_(r.image[e],!1,!0,c),d[e]=ae(r,d[e]);const f=d[0],p=y(f)||o,m=a.convert(r.format,r.colorSpace),g=a.convert(r.type),v=V(r.internalFormat,m,g,r.colorSpace),b=o&&!0!==r.isVideoTexture,E=void 0===h.__version||!0===l;let w,S=z(r,f,p);if(K(e.TEXTURE_CUBE_MAP,r,p),t){b&&E&&i.texStorage2D(e.TEXTURE_CUBE_MAP,S,v,f.width,f.height);for(let t=0;t<6;t++){w=d[t].mipmaps;for(let n=0;n<w.length;n++){const a=w[n];r.format!==U?null!==m?b?i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,a.width,a.height,m,a.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,v,a.width,a.height,0,a.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):b?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,0,0,a.width,a.height,m,g,a.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n,v,a.width,a.height,0,m,g,a.data)}}}else{w=r.mipmaps,b&&E&&(w.length>0&&S++,i.texStorage2D(e.TEXTURE_CUBE_MAP,S,v,d[0].width,d[0].height));for(let t=0;t<6;t++)if(n){b?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,d[t].width,d[t].height,m,g,d[t].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,d[t].width,d[t].height,0,m,g,d[t].data);for(let n=0;n<w.length;n++){const r=w[n].image[t].image;b?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,r.width,r.height,m,g,r.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,v,r.width,r.height,0,m,g,r.data)}}else{b?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m,g,d[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,v,m,g,d[t]);for(let n=0;n<w.length;n++){const r=w[n];b?i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,0,0,m,g,r.image[t]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n+1,v,m,g,r.image[t])}}}A(r,p)&&G(e.TEXTURE_CUBE_MAP),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(s,t,r):i.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+r)},this.rebindTextures=function(t,i,r){const a=n.get(t);void 0!==i&&ee(a.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),void 0!==r&&ie(t)},this.setupRenderTarget=function(t){const l=t.texture,c=n.get(t),u=n.get(l);t.addEventListener("dispose",W),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=y(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers){const i=t.texture;for(let t=0,r=i.length;t<r;t++){const r=n.get(i[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===re(t)){const n=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let i=0;i<n.length;i++){const r=n[i];c.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[i]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),l=V(r.internalFormat,s,o,r.colorSpace,!0===t.isXRRenderTarget),u=ne(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,c.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),te(c.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(h){i.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),K(e.TEXTURE_CUBE_MAP,l,f);for(let i=0;i<6;i++)ee(c.__webglFramebuffer[i],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i);A(l,f)&&G(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(d){const r=t.texture;for(let a=0,s=r.length;a<s;a++){const s=r[a],o=n.get(s);i.bindTexture(e.TEXTURE_2D,o.__webglTexture),K(e.TEXTURE_2D,s,f),ee(c.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+a,e.TEXTURE_2D),A(s,f)&&G(e.TEXTURE_2D)}i.unbindTexture()}else{let n=e.TEXTURE_2D;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?n=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(n,u.__webglTexture),K(n,l,f),ee(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,n),A(l,f)&&G(n),i.unbindTexture()}t.depthBuffer&&ie(t)},this.updateRenderTargetMipmap=function(t){const r=y(t)||o,a=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture];for(let s=0,o=a.length;s<o;s++){const o=a[s];if(A(o,r)){const r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,a=n.get(o).__webglTexture;i.bindTexture(r,a),G(r),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===re(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],a=t.width,s=t.height;let o=e.COLOR_BUFFER_BIT;const l=[],c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=n.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<r.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let i=0;i<r.length;i++){l.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),h&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[i]),!0===d&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[c]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[c])),h){const t=n.get(r[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,a,s,0,0,a,s,o,e.NEAREST),f&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<r.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const a=n.get(r[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,a,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=ie,this.setupFrameBufferTexture=ee,this.useMultisampledRTT=re}function fs(e,t,i){const n=i.isWebGL2;return{convert:function(i,r=""){let a;if(i===D)return e.UNSIGNED_BYTE;if(1017===i)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===i)return e.BYTE;if(1011===i)return e.SHORT;if(i===O)return e.UNSIGNED_SHORT;if(1013===i)return e.INT;if(i===k)return e.UNSIGNED_INT;if(i===I)return e.FLOAT;if(i===N)return n?e.HALF_FLOAT:(a=t.get("OES_texture_half_float"),null!==a?a.HALF_FLOAT_OES:null);if(1021===i)return e.ALPHA;if(i===U)return e.RGBA;if(1024===i)return e.LUMINANCE;if(1025===i)return e.LUMINANCE_ALPHA;if(i===B)return e.DEPTH_COMPONENT;if(i===F)return e.DEPTH_STENCIL;if(i===Ce)return a=t.get("EXT_sRGB"),null!==a?a.SRGB_ALPHA_EXT:null;if(1028===i)return e.RED;if(1029===i)return e.RED_INTEGER;if(1030===i)return e.RG;if(1031===i)return e.RG_INTEGER;if(1033===i)return e.RGBA_INTEGER;if(i===G||i===V||i===z||i===H)if(r===Se){if(a=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===a)return null;if(i===G)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===V)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===z)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===H)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(a=t.get("WEBGL_compressed_texture_s3tc"),null===a)return null;if(i===G)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===V)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===z)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===H)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===j||i===W||i===Y||i===X){if(a=t.get("WEBGL_compressed_texture_pvrtc"),null===a)return null;if(i===j)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===W)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===Y)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===X)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i)return a=t.get("WEBGL_compressed_texture_etc1"),null!==a?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(i===Z||i===q){if(a=t.get("WEBGL_compressed_texture_etc"),null===a)return null;if(i===Z)return r===Se?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(i===q)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}if(i===Q||i===K||i===J||i===$||i===ee||i===te||i===ie||i===ne||i===re||i===ae||i===se||i===oe||i===le||i===ce){if(a=t.get("WEBGL_compressed_texture_astc"),null===a)return null;if(i===Q)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===K)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===J)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===$)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===ee)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===te)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===ie)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ne)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===re)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===ae)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===se)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===oe)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===le)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===ce)return r===Se?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===ue){if(a=t.get("EXT_texture_compression_bptc"),null===a)return null;if(i===ue)return r===Se?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(36283===i||i===he||i===de||i===fe){if(a=t.get("EXT_texture_compression_rgtc"),null===a)return null;if(i===ue)return a.COMPRESSED_RED_RGTC1_EXT;if(i===he)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===de)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===fe)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===L?n?e.UNSIGNED_INT_24_8:(a=t.get("WEBGL_depth_texture"),null!==a?a.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[i]?e[i]:null}}}class ps extends In{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class ms extends yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gs={type:"move"};class vs{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ms,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ms,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new _t,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new _t),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ms,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new _t,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new _t),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,a=null;const s=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){a=!0;for(const n of e.hand.values()){const e=t.getJointPose(n,i),r=this._getHandJoint(l,n);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],s=n.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&s>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==s&&(n=t.getPose(e.targetRaySpace,i),null===n&&null!==r&&(n=r),null!==n&&(s.matrix.fromArray(n.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,n.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(n.linearVelocity)):s.hasLinearVelocity=!1,n.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(n.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(gs)))}return null!==s&&(s.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==a),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const i=new ms;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class bs extends ft{constructor(e,t,i,n,r,a,s,o,l,c){if((c=void 0!==c?c:B)!==B&&c!==F)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&c===B&&(i=k),void 0===i&&c===F&&(i=L),super(null,n,r,a,s,o,c,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:T,this.minFilter=void 0!==o?o:T,this.flipY=!1,this.generateMipmaps=!1}}class _s extends De{constructor(e,t){super();const i=this;let n=null,r=1,a=null,s="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],b=[],_=new Set,y=new Map,A=new In;A.layers.enable(1),A.viewport=new pt;const E=new In;E.layers.enable(2),E.viewport=new pt;const w=[A,E],S=new ps;S.layers.enable(1),S.layers.enable(2);let T=null,x=null;function M(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const i=v[t];void 0!==i&&(i.update(e.inputSource,e.frame,l||a),i.dispatchEvent({type:e.type,data:e.inputSource}))}function R(){n.removeEventListener("select",M),n.removeEventListener("selectstart",M),n.removeEventListener("selectend",M),n.removeEventListener("squeeze",M),n.removeEventListener("squeezestart",M),n.removeEventListener("squeezeend",M),n.removeEventListener("end",R),n.removeEventListener("inputsourceschange",P);for(let e=0;e<v.length;e++){const t=b[e];null!==t&&(b[e]=null,v[e].disconnect(t))}T=null,x=null,e.setRenderTarget(m),d=null,h=null,u=null,n=null,g=null,G.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}function P(e){for(let t=0;t<e.removed.length;t++){const i=e.removed[t],n=b.indexOf(i);n>=0&&(b[n]=null,v[n].disconnect(i))}for(let t=0;t<e.added.length;t++){const i=e.added[t];let n=b.indexOf(i);if(-1===n){for(let e=0;e<v.length;e++){if(e>=b.length){b.push(i),n=e;break}if(null===b[e]){b[e]=i,n=e;break}}if(-1===n)break}const r=v[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new vs,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new vs,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new vs,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||a},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function(c){if(n=c,null!==n){if(m=e.getRenderTarget(),n.addEventListener("select",M),n.addEventListener("selectstart",M),n.addEventListener("selectend",M),n.addEventListener("squeeze",M),n.addEventListener("squeezestart",M),n.addEventListener("squeezeend",M),n.addEventListener("end",R),n.addEventListener("inputsourceschange",P),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===n.renderState.layers||!1===e.capabilities.isWebGL2){const i={antialias:void 0!==n.renderState.layers||p.antialias,alpha:!0,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:d}),g=new mt(d.framebufferWidth,d.framebufferHeight,{format:U,type:D,colorSpace:e.outputColorSpace,stencilBuffer:p.stencil})}else{let i=null,a=null,s=null;p.depth&&(s=p.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=p.stencil?F:B,a=p.stencil?L:k);const o={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:r};u=new XRWebGLBinding(n,t),h=u.createProjectionLayer(o),n.updateRenderState({layers:[h]}),g=new mt(h.textureWidth,h.textureHeight,{format:U,type:D,depthTexture:new bs(h.textureWidth,h.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:p.stencil,colorSpace:e.outputColorSpace,samples:p.antialias?4:0}),e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,a=await n.requestReferenceSpace(s),G.setContext(n),G.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode};const C=new _t,O=new _t;function I(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===n)return;S.near=E.near=A.near=e.near,S.far=E.far=A.far=e.far,T===S.near&&x===S.far||(n.updateRenderState({depthNear:S.near,depthFar:S.far}),T=S.near,x=S.far);const t=e.parent,i=S.cameras;I(S,t);for(let e=0;e<i.length;e++)I(i[e],t);2===i.length?function(e,t,i){C.setFromMatrixPosition(t.matrixWorld),O.setFromMatrixPosition(i.matrixWorld);const n=C.distanceTo(O),r=t.projectionMatrix.elements,a=i.projectionMatrix.elements,s=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(a[8]+1)/a[0],d=s*u,f=s*h,p=n/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+p,v=o+p,b=d-m,_=f+(n-m),y=l*o/v*g,A=c*o/v*g;e.projectionMatrix.makePerspective(b,_,y,A,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(S,A,E):S.projectionMatrix.copy(A.projectionMatrix),function(e,t,i){null===i?e.matrix.copy(t.matrixWorld):(e.matrix.copy(i.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld)),e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0);const n=e.children;for(let e=0,t=n.length;e<t;e++)n[e].updateMatrixWorld(!0);e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Ne*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,t)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return _};let N=null;const G=new Yn;G.setAnimationLoop((function(t,n){if(c=n.getViewerPose(l||a),f=n,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let i=!1;t.length!==S.cameras.length&&(S.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){const r=t[n];let a=null;if(null!==d)a=d.getViewport(r);else{const t=u.getViewSubImage(h,r);a=t.viewport,0===n&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let s=w[n];void 0===s&&(s=new In,s.layers.enable(n),s.viewport=new pt,w[n]=s),s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(r.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(a.x,a.y,a.width,a.height),0===n&&(S.matrix.copy(s.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===i&&S.cameras.push(s)}}for(let e=0;e<v.length;e++){const t=b[e],i=v[e];null!==t&&void 0!==i&&i.update(t,n,l||a)}if(N&&N(t,n),n.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:n.detectedPlanes});let e=null;for(const t of _)n.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)_.delete(t),y.delete(t),i.dispatchEvent({type:"planeremoved",data:t});for(const e of n.detectedPlanes)if(_.has(e)){const t=y.get(e);e.lastChangedTime>t&&(y.set(e,e.lastChangedTime),i.dispatchEvent({type:"planechanged",data:e}))}else _.add(e),y.set(e,n.lastChangedTime),i.dispatchEvent({type:"planeadded",data:e})}f=null})),this.setAnimationLoop=function(e){N=e},this.dispose=function(){}}}function ys(e,t){function i(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function n(n,r){n.opacity.value=r.opacity,r.color&&n.diffuse.value.copy(r.color),r.emissive&&n.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(n.map.value=r.map,i(r.map,n.mapTransform)),r.alphaMap&&(n.alphaMap.value=r.alphaMap,i(r.alphaMap,n.alphaMapTransform)),r.bumpMap&&(n.bumpMap.value=r.bumpMap,i(r.bumpMap,n.bumpMapTransform),n.bumpScale.value=r.bumpScale,1===r.side&&(n.bumpScale.value*=-1)),r.normalMap&&(n.normalMap.value=r.normalMap,i(r.normalMap,n.normalMapTransform),n.normalScale.value.copy(r.normalScale),1===r.side&&n.normalScale.value.negate()),r.displacementMap&&(n.displacementMap.value=r.displacementMap,i(r.displacementMap,n.displacementMapTransform),n.displacementScale.value=r.displacementScale,n.displacementBias.value=r.displacementBias),r.emissiveMap&&(n.emissiveMap.value=r.emissiveMap,i(r.emissiveMap,n.emissiveMapTransform)),r.specularMap&&(n.specularMap.value=r.specularMap,i(r.specularMap,n.specularMapTransform)),r.alphaTest>0&&(n.alphaTest.value=r.alphaTest);const a=t.get(r).envMap;if(a&&(n.envMap.value=a,n.flipEnvMap.value=a.isCubeTexture&&!1===a.isRenderTargetTexture?-1:1,n.reflectivity.value=r.reflectivity,n.ior.value=r.ior,n.refractionRatio.value=r.refractionRatio),r.lightMap){n.lightMap.value=r.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=r.lightMapIntensity*t,i(r.lightMap,n.lightMapTransform)}r.aoMap&&(n.aoMap.value=r.aoMap,n.aoMapIntensity.value=r.aoMapIntensity,i(r.aoMap,n.aoMapTransform))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,Cn(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,r,a,s,o){r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,r)):r.isMeshPhongMaterial?(n(e,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,r)):r.isMeshStandardMaterial?(n(e,r),function(e,n){e.metalness.value=n.metalness,n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap,i(n.metalnessMap,e.metalnessMapTransform)),e.roughness.value=n.roughness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap,i(n.roughnessMap,e.roughnessMapTransform));t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}(e,r),r.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,i(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,i(t.sheenRoughnessMap,e.sheenRoughnessMapTransform))),t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,i(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,i(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,i(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),1===t.side&&e.clearcoatNormalScale.value.negate())),t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,i(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,i(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform))),t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,i(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,i(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor)),e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,i(t.specularColorMap,e.specularColorMapTransform)),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,i(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,r,o)):r.isMeshMatcapMaterial?(n(e,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,r)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),function(e,i){const n=t.get(i).light;e.referencePosition.value.setFromMatrixPosition(n.matrixWorld),e.nearDistance.value=n.shadow.camera.near,e.farDistance.value=n.shadow.camera.far}(e,r)):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform))}(e,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,r)):r.isPointsMaterial?function(e,t,n,r){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*r,t.map&&(e.map.value=t.map,i(t.map,e.uvTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r,a,s):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,i(t.map,e.mapTransform)),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,r):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function As(e,t,i,n){let r={},a={},s=[];const o=i.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,i){const n=e.value;if(void 0===i[t]){if("number"==typeof n)i[t]=n;else{const e=Array.isArray(n)?n:[n],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());i[t]=r}return!0}if("number"==typeof n){if(i[t]!==n)return i[t]=n,!0}else{const e=Array.isArray(i[t])?i[t]:[i[t]],r=Array.isArray(n)?n:[n];for(let t=0;t<e.length;t++){const i=e[t];if(!1===i.equals(r[t]))return i.copy(r[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const i=t.target;i.removeEventListener("dispose",u);const n=s.indexOf(i.__bindingPointIndex);s.splice(n,1),e.deleteBuffer(r[i.id]),delete r[i.id],delete a[i.id]}return{bind:function(e,t){const i=t.program;n.uniformBlockBinding(e,i)},update:function(i,h){let d=r[i.id];void 0===d&&(function(e){const t=e.uniforms;let i=0;let n=0;for(let e=0,r=t.length;e<r;e++){const r=t[e],a={boundary:0,storage:0},s=Array.isArray(r.value)?r.value:[r.value];for(let e=0,t=s.length;e<t;e++){const t=c(s[e]);a.boundary+=t.boundary,a.storage+=t.storage}r.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),r.__offset=i,e>0&&(n=i%16,0!==n&&16-n-a.boundary<0&&(i+=16-n,r.__offset=i)),i+=a.storage}n=i%16,n>0&&(i+=16-n),e.__size=i,e.__cache={}}(i),d=function(t){const i=function(){for(let e=0;e<o;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=i;const n=e.createBuffer(),r=t.__size,a=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,n),e.bufferData(e.UNIFORM_BUFFER,r,a),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,i,n),n}(i),r[i.id]=d,i.addEventListener("dispose",u));const f=h.program;n.updateUBOMapping(i,f);const p=t.render.frame;a[i.id]!==p&&(function(t){const i=r[t.id],n=t.uniforms,a=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let t=0,i=n.length;t<i;t++){const i=n[t];if(!0===l(i,t,a)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let a=0;a<n.length;a++){const s=n[a],o=c(s);"number"==typeof s?(i.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):s.isMatrix3?(i.__data[0]=s.elements[0],i.__data[1]=s.elements[1],i.__data[2]=s.elements[2],i.__data[3]=s.elements[0],i.__data[4]=s.elements[3],i.__data[5]=s.elements[4],i.__data[6]=s.elements[5],i.__data[7]=s.elements[0],i.__data[8]=s.elements[6],i.__data[9]=s.elements[7],i.__data[10]=s.elements[8],i.__data[11]=s.elements[0]):(s.toArray(i.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),a[i.id]=p)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);s=[],r={},a={}}}}function Es(){const e=Je("canvas");return e.style.display="block",e}class ws{constructor(e={}){const{canvas:t=Es(),context:n=null,depth:r=!0,stencil:a=!0,alpha:s=!1,antialias:o=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;let f;this.isWebGLRenderer=!0,f=null!==n?n.getContextAttributes().alpha:s;let p=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Se,this.useLegacyLights=!0,this.toneMapping=u,this.toneMappingExposure=1;const b=this;let _=!1,y=0,A=0,E=null,w=-1,S=null;const T=new pt,x=new pt;let M=null,R=t.width,P=t.height,O=1,k=null,L=null;const B=new pt(0,0,R,P),F=new pt(0,0,R,P);let G=!1;const V=new Wn;let z=!1,H=!1,j=null;const W=new qt,Y=new _t,X={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return null===E?O:1}let q,Q,K,J,$,ee,te,ie,ne,re,ae,se,oe,le,ce,ue,he,de,fe,pe,me,ge,ve,be,_e=n;function ye(e,i){for(let n=0;n<e.length;n++){const r=e[n],a=t.getContext(r,i);if(null!==a)return a}return null}try{const e={alpha:!0,depth:r,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${i}`),t.addEventListener("webglcontextlost",we,!1),t.addEventListener("webglcontextrestored",xe,!1),t.addEventListener("webglcontextcreationerror",Me,!1),null===_e){const t=["webgl2","webgl","experimental-webgl"];if(!0===b.isWebGL1Renderer&&t.shift(),_e=ye(t,e),null===_e)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===_e.getShaderPrecisionFormat&&(_e.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function Ae(){q=new _r(_e),Q=new ir(_e,q,e),q.init(Q),ge=new fs(_e,q,Q),K=new hs(_e,q,Q),J=new Er(_e),$=new Ka,ee=new ds(_e,q,K,$,Q,ge,J),te=new rr(b),ie=new br(b),ne=new Xn(_e,Q),ve=new er(_e,q,ne,Q),re=new yr(_e,ne,J,ve),ae=new xr(_e,re,ne,J),fe=new Tr(_e,Q,ee),ue=new nr($),se=new Qa(b,te,ie,q,Q,ve,ue),oe=new ys(b,$),le=new ts,ce=new os(q,Q),de=new $n(b,te,ie,K,ae,f,l),he=new us(b,ae,Q),be=new As(_e,J,Q,K),pe=new tr(_e,q,J,Q),me=new Ar(_e,q,J,Q),J.programs=se.programs,b.capabilities=Q,b.extensions=q,b.properties=$,b.renderLists=le,b.shadowMap=he,b.state=K,b.info=J}Ae();const Ee=new _s(b,_e);function we(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function xe(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const e=J.autoReset,t=he.enabled,i=he.autoUpdate,n=he.needsUpdate,r=he.type;Ae(),J.autoReset=e,he.enabled=t,he.autoUpdate=i,he.needsUpdate=n,he.type=r}function Me(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Re(e){const t=e.target;t.removeEventListener("dispose",Re),function(e){(function(e){const t=$.get(e).programs;void 0!==t&&(t.forEach((function(e){se.releaseProgram(e)})),e.isShaderMaterial&&se.releaseShaderCache(e))})(e),$.remove(e)}(t)}this.xr=Ee,this.getContext=function(){return _e},this.getContextAttributes=function(){return _e.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return O},this.setPixelRatio=function(e){void 0!==e&&(O=e,this.setSize(R,P,!1))},this.getSize=function(e){return e.set(R,P)},this.setSize=function(e,i,n=!0){Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(R=e,P=i,t.width=Math.floor(e*O),t.height=Math.floor(i*O),!0===n&&(t.style.width=e+"px",t.style.height=i+"px"),this.setViewport(0,0,e,i))},this.getDrawingBufferSize=function(e){return e.set(R*O,P*O).floor()},this.setDrawingBufferSize=function(e,i,n){R=e,P=i,O=n,t.width=Math.floor(e*n),t.height=Math.floor(i*n),this.setViewport(0,0,e,i)},this.getCurrentViewport=function(e){return e.copy(T)},this.getViewport=function(e){return e.copy(B)},this.setViewport=function(e,t,i,n){e.isVector4?B.set(e.x,e.y,e.z,e.w):B.set(e,t,i,n),K.viewport(T.copy(B).multiplyScalar(O).floor())},this.getScissor=function(e){return e.copy(F)},this.setScissor=function(e,t,i,n){e.isVector4?F.set(e.x,e.y,e.z,e.w):F.set(e,t,i,n),K.scissor(x.copy(F).multiplyScalar(O).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(e){K.setScissorTest(G=e)},this.setOpaqueSort=function(e){k=e},this.setTransparentSort=function(e){L=e},this.getClearColor=function(e){return e.copy(de.getClearColor())},this.setClearColor=function(){de.setClearColor.apply(de,arguments)},this.getClearAlpha=function(){return de.getClearAlpha()},this.setClearAlpha=function(){de.setClearAlpha.apply(de,arguments)},this.clear=function(e=!0,t=!0,i=!0){let n=0;e&&(n|=_e.COLOR_BUFFER_BIT),t&&(n|=_e.DEPTH_BUFFER_BIT),i&&(n|=_e.STENCIL_BUFFER_BIT),_e.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",we,!1),t.removeEventListener("webglcontextrestored",xe,!1),t.removeEventListener("webglcontextcreationerror",Me,!1),le.dispose(),ce.dispose(),$.dispose(),te.dispose(),ie.dispose(),ae.dispose(),ve.dispose(),be.dispose(),se.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",Ce),Ee.removeEventListener("sessionend",De),j&&(j.dispose(),j=null),Oe.stop()},this.renderBufferDirect=function(e,t,i,n,r,a){null===t&&(t=X);const s=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,i,n,r){!0!==t.isScene&&(t=X),ee.resetTextureUnits();const a=t.fog,s=n.isMeshStandardMaterial?t.environment:null,o=null===E?b.outputColorSpace:!0===E.isXRRenderTarget?E.texture.colorSpace:Te,l=(n.isMeshStandardMaterial?ie:te).get(n.envMap||s),c=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,h=!!n.normalMap&&!!i.attributes.tangent,d=!!i.morphAttributes.position,f=!!i.morphAttributes.normal,p=!!i.morphAttributes.color,g=n.toneMapped?b.toneMapping:u,v=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,_=void 0!==v?v.length:0,y=$.get(n),A=m.state.lights;if(!0===z&&(!0===H||e!==S)){const t=e===S&&n.id===w;ue.setState(n,e,t)}let T=!1;n.version===y.__version?y.needsLights&&y.lightsStateVersion!==A.state.version||y.outputColorSpace!==o||r.isInstancedMesh&&!1===y.instancing?T=!0:r.isInstancedMesh||!0!==y.instancing?r.isSkinnedMesh&&!1===y.skinning?T=!0:r.isSkinnedMesh||!0!==y.skinning?y.envMap!==l||!0===n.fog&&y.fog!==a?T=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===ue.numPlanes&&y.numIntersection===ue.numIntersection?(y.vertexAlphas!==c||y.vertexTangents!==h||y.morphTargets!==d||y.morphNormals!==f||y.morphColors!==p||y.toneMapping!==g||!0===Q.isWebGL2&&y.morphTargetsCount!==_)&&(T=!0):T=!0:T=!0:T=!0:(T=!0,y.__version=n.version);let x=y.currentProgram;!0===T&&(x=Ue(n,t,r));let M=!1,R=!1,C=!1;const D=x.getUniforms(),k=y.uniforms;if(K.useProgram(x.program)&&(M=!0,R=!0,C=!0),n.id!==w&&(w=n.id,R=!0),M||S!==e){if(D.setValue(_e,"projectionMatrix",e.projectionMatrix),Q.logarithmicDepthBuffer&&D.setValue(_e,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),S!==e&&(S=e,R=!0,C=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const t=D.map.cameraPosition;void 0!==t&&t.setValue(_e,Y.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&D.setValue(_e,"isOrthographic",!0===e.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||r.isSkinnedMesh)&&D.setValue(_e,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){D.setOptional(_e,r,"bindMatrix"),D.setOptional(_e,r,"bindMatrixInverse");const e=r.skeleton;e&&(Q.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),D.setValue(_e,"boneTexture",e.boneTexture,ee),D.setValue(_e,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const I=i.morphAttributes;var N,L;if((void 0!==I.position||void 0!==I.normal||void 0!==I.color&&!0===Q.isWebGL2)&&fe.update(r,i,x),(R||y.receiveShadow!==r.receiveShadow)&&(y.receiveShadow=r.receiveShadow,D.setValue(_e,"receiveShadow",r.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(k.envMap.value=l,k.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),R&&(D.setValue(_e,"toneMappingExposure",b.toneMappingExposure),y.needsLights&&(L=C,(N=k).ambientLightColor.needsUpdate=L,N.lightProbe.needsUpdate=L,N.directionalLights.needsUpdate=L,N.directionalLightShadows.needsUpdate=L,N.pointLights.needsUpdate=L,N.pointLightShadows.needsUpdate=L,N.spotLights.needsUpdate=L,N.spotLightShadows.needsUpdate=L,N.rectAreaLights.needsUpdate=L,N.hemisphereLights.needsUpdate=L),a&&!0===n.fog&&oe.refreshFogUniforms(k,a),oe.refreshMaterialUniforms(k,n,O,P,j),Ca.upload(_e,y.uniformsList,k,ee)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Ca.upload(_e,y.uniformsList,k,ee),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&D.setValue(_e,"center",r.center),D.setValue(_e,"modelViewMatrix",r.modelViewMatrix),D.setValue(_e,"normalMatrix",r.normalMatrix),D.setValue(_e,"modelMatrix",r.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const e=n.uniformsGroups;for(let t=0,i=e.length;t<i;t++)if(Q.isWebGL2){const i=e[t];be.update(i,x),be.bind(i,x)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return x}(e,t,i,n,r);K.setMaterial(n,s);let l=i.index,c=1;!0===n.wireframe&&(l=re.getWireframeAttribute(i),c=2);const h=i.drawRange,d=i.attributes.position;let f=h.start*c,p=(h.start+h.count)*c;null!==a&&(f=Math.max(f,a.start*c),p=Math.min(p,(a.start+a.count)*c)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):null!=d&&(f=Math.max(f,0),p=Math.min(p,d.count));const g=p-f;if(g<0||g===1/0)return;let v;ve.setup(r,n,o,i,l);let _=pe;if(null!==l&&(v=ne.get(l),_=me,_.setIndex(v)),r.isMesh)!0===n.wireframe?(K.setLineWidth(n.wireframeLinewidth*Z()),_.setMode(_e.LINES)):_.setMode(_e.TRIANGLES);else if(r.isLine){let e=n.linewidth;void 0===e&&(e=1),K.setLineWidth(e*Z()),r.isLineSegments?_.setMode(_e.LINES):r.isLineLoop?_.setMode(_e.LINE_LOOP):_.setMode(_e.LINE_STRIP)}else r.isPoints?_.setMode(_e.POINTS):r.isSprite&&_.setMode(_e.TRIANGLES);if(r.isInstancedMesh)_.renderInstances(f,g,r.count);else if(i.isInstancedBufferGeometry){const e=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,t=Math.min(i.instanceCount,e);_.renderInstances(f,g,t)}else _.render(f,g)},this.compile=function(e,t){function i(e,t,i){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,Ue(e,t,i),e.side=0,e.needsUpdate=!0,Ue(e,t,i),e.side=2):Ue(e,t,i)}m=ce.get(e),m.init(),v.push(m),e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(b.useLegacyLights),e.traverse((function(t){const n=t.material;if(n)if(Array.isArray(n))for(let r=0;r<n.length;r++)i(n[r],e,t);else i(n,e,t)})),v.pop(),m=null};let Pe=null;function Ce(){Oe.stop()}function De(){Oe.start()}const Oe=new Yn;function ke(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||V.intersectsSprite(e)){n&&Y.setFromMatrixPosition(e.matrixWorld).applyMatrix4(W);const t=ae.update(e),r=e.material;r.visible&&p.push(e,t,r,i,Y.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||V.intersectsObject(e))){e.isSkinnedMesh&&e.skeleton.frame!==J.render.frame&&(e.skeleton.update(),e.skeleton.frame=J.render.frame);const t=ae.update(e),r=e.material;if(n&&(null===t.boundingSphere&&t.computeBoundingSphere(),Y.copy(t.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(W)),Array.isArray(r)){const n=t.groups;for(let a=0,s=n.length;a<s;a++){const s=n[a],o=r[s.materialIndex];o&&o.visible&&p.push(e,t,o,i,Y.z,s)}}else r.visible&&p.push(e,t,r,i,Y.z,null)}const r=e.children;for(let e=0,a=r.length;e<a;e++)ke(r[e],t,i,n)}function Ie(e,t,i,n){const r=e.opaque,a=e.transmissive,s=e.transparent;m.setupLightsView(i),!0===z&&ue.setGlobalState(b.clippingPlanes,i),a.length>0&&function(e,t,i,n){if(null===j){const e=Q.isWebGL2;j=new mt(1024,1024,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?N:D,minFilter:C,samples:e&&!0===o?4:0})}const r=b.getRenderTarget();b.setRenderTarget(j),b.clear();const a=b.toneMapping;b.toneMapping=u,Ne(e,i,n),ee.updateMultisampleRenderTarget(j),ee.updateRenderTargetMipmap(j);let s=!1;for(let e=0,r=t.length;e<r;e++){const r=t[e],a=r.object,o=r.geometry,l=r.material,c=r.group;if(2===l.side&&a.layers.test(n.layers)){const e=l.side;l.side=1,l.needsUpdate=!0,Le(a,i,n,o,l,c),l.side=e,l.needsUpdate=!0,s=!0}}!0===s&&(ee.updateMultisampleRenderTarget(j),ee.updateRenderTargetMipmap(j)),b.setRenderTarget(r),b.toneMapping=a}(r,a,t,i),n&&K.viewport(T.copy(n)),r.length>0&&Ne(r,t,i),a.length>0&&Ne(a,t,i),s.length>0&&Ne(s,t,i),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Ne(e,t,i){const n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,a=e.length;r<a;r++){const a=e[r],s=a.object,o=a.geometry,l=null===n?a.material:n,c=a.group;s.layers.test(i.layers)&&Le(s,t,i,o,l,c)}}function Le(e,t,i,n,r,a){e.onBeforeRender(b,t,i,n,r,a),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(b,t,i,n,e,a),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,b.renderBufferDirect(i,t,n,r,e,a),r.side=0,r.needsUpdate=!0,b.renderBufferDirect(i,t,n,r,e,a),r.side=2):b.renderBufferDirect(i,t,n,r,e,a),e.onAfterRender(b,t,i,n,r,a)}function Ue(e,t,i){!0!==t.isScene&&(t=X);const n=$.get(e),r=m.state.lights,a=m.state.shadowsArray,s=r.state.version,o=se.getParameters(e,r.state,a,t,i),l=se.getProgramCacheKey(o);let c=n.programs;n.environment=e.isMeshStandardMaterial?t.environment:null,n.fog=t.fog,n.envMap=(e.isMeshStandardMaterial?ie:te).get(e.envMap||n.environment),void 0===c&&(e.addEventListener("dispose",Re),c=new Map,n.programs=c);let u=c.get(l);if(void 0!==u){if(n.currentProgram===u&&n.lightsStateVersion===s)return Be(e,o),u}else o.uniforms=se.getUniforms(e),e.onBuild(i,o,b),e.onBeforeCompile(o,b),u=se.acquireProgram(o,l),c.set(l,u),n.uniforms=o.uniforms;const h=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ue.uniform),Be(e,o),n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=s,n.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const d=u.getUniforms(),f=Ca.seqWithValue(d.seq,h);return n.currentProgram=u,n.uniformsList=f,u}function Be(e,t){const i=$.get(e);i.outputColorSpace=t.outputColorSpace,i.instancing=t.instancing,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}Oe.setAnimationLoop((function(e){Pe&&Pe(e)})),"undefined"!=typeof self&&Oe.setContext(self),this.setAnimationLoop=function(e){Pe=e,Ee.setAnimationLoop(e),null===e?Oe.stop():Oe.start()},Ee.addEventListener("sessionstart",Ce),Ee.addEventListener("sessionend",De),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(t),t=Ee.getCamera()),!0===e.isScene&&e.onBeforeRender(b,e,t,E),m=ce.get(e,v.length),m.init(),v.push(m),W.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromProjectionMatrix(W),H=this.localClippingEnabled,z=ue.init(this.clippingPlanes,H),p=le.get(e,g.length),p.init(),g.push(p),ke(e,t,0,b.sortObjects),p.finish(),!0===b.sortObjects&&p.sort(k,L),!0===z&&ue.beginShadows();const i=m.state.shadowsArray;if(he.render(i,e,t),!0===z&&ue.endShadows(),!0===this.info.autoReset&&this.info.reset(),de.render(p,e),m.setupLights(b.useLegacyLights),t.isArrayCamera){const i=t.cameras;for(let t=0,n=i.length;t<n;t++){const n=i[t];Ie(p,e,n,n.viewport)}}else Ie(p,e,t);null!==E&&(ee.updateMultisampleRenderTarget(E),ee.updateRenderTargetMipmap(E)),!0===e.isScene&&e.onAfterRender(b,e,t),ve.resetDefaultState(),w=-1,S=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),p=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return y},this.getActiveMipmapLevel=function(){return A},this.getRenderTarget=function(){return E},this.setRenderTargetTextures=function(e,t,i){$.get(e.texture).__webglTexture=t,$.get(e.depthTexture).__webglTexture=i;const n=$.get(e);n.__hasExternalTextures=!0,n.__hasExternalTextures&&(n.__autoAllocateDepthBuffer=void 0===i,n.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),n.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const i=$.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,i=0){E=e,y=t,A=i;let n=!0,r=null,a=!1,s=!1;if(e){const i=$.get(e);void 0!==i.__useDefaultFramebuffer?(K.bindFramebuffer(_e.FRAMEBUFFER,null),n=!1):void 0===i.__webglFramebuffer?ee.setupRenderTarget(e):i.__hasExternalTextures&&ee.rebindTextures(e,$.get(e.texture).__webglTexture,$.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(s=!0);const l=$.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=l[t],a=!0):r=Q.isWebGL2&&e.samples>0&&!1===ee.useMultisampledRTT(e)?$.get(e).__webglMultisampledFramebuffer:l,T.copy(e.viewport),x.copy(e.scissor),M=e.scissorTest}else T.copy(B).multiplyScalar(O).floor(),x.copy(F).multiplyScalar(O).floor(),M=G;if(K.bindFramebuffer(_e.FRAMEBUFFER,r)&&Q.drawBuffers&&n&&K.drawBuffers(e,r),K.viewport(T),K.scissor(x),K.setScissorTest(M),a){const n=$.get(e.texture);_e.framebufferTexture2D(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,_e.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)}else if(s){const n=$.get(e.texture),r=t||0;_e.framebufferTextureLayer(_e.FRAMEBUFFER,_e.COLOR_ATTACHMENT0,n.__webglTexture,i||0,r)}w=-1},this.readRenderTargetPixels=function(e,t,i,n,r,a,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=$.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(o=o[s]),o){K.bindFramebuffer(_e.FRAMEBUFFER,o);try{const s=e.texture,o=s.format,l=s.type;if(o!==U&&ge.convert(o)!==_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===N&&(q.has("EXT_color_buffer_half_float")||Q.isWebGL2&&q.has("EXT_color_buffer_float"));if(!(l===D||ge.convert(l)===_e.getParameter(_e.IMPLEMENTATION_COLOR_READ_TYPE)||l===I&&(Q.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float"))||c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&_e.readPixels(t,i,n,r,ge.convert(o),ge.convert(l),a)}finally{const e=null!==E?$.get(E).__webglFramebuffer:null;K.bindFramebuffer(_e.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t,i=0){const n=Math.pow(2,-i),r=Math.floor(t.image.width*n),a=Math.floor(t.image.height*n);ee.setTexture2D(t,0),_e.copyTexSubImage2D(_e.TEXTURE_2D,i,0,0,e.x,e.y,r,a),K.unbindTexture()},this.copyTextureToTexture=function(e,t,i,n=0){const r=t.image.width,a=t.image.height,s=ge.convert(i.format),o=ge.convert(i.type);ee.setTexture2D(i,0),_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,i.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,i.unpackAlignment),t.isDataTexture?_e.texSubImage2D(_e.TEXTURE_2D,n,e.x,e.y,r,a,s,o,t.image.data):t.isCompressedTexture?_e.compressedTexSubImage2D(_e.TEXTURE_2D,n,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):_e.texSubImage2D(_e.TEXTURE_2D,n,e.x,e.y,s,o,t.image),0===n&&i.generateMipmaps&&_e.generateMipmap(_e.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i,n,r=0){if(b.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const a=e.max.x-e.min.x+1,s=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=ge.convert(n.format),c=ge.convert(n.type);let u;if(n.isData3DTexture)ee.setTexture3D(n,0),u=_e.TEXTURE_3D;else{if(!n.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ee.setTexture2DArray(n,0),u=_e.TEXTURE_2D_ARRAY}_e.pixelStorei(_e.UNPACK_FLIP_Y_WEBGL,n.flipY),_e.pixelStorei(_e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),_e.pixelStorei(_e.UNPACK_ALIGNMENT,n.unpackAlignment);const h=_e.getParameter(_e.UNPACK_ROW_LENGTH),d=_e.getParameter(_e.UNPACK_IMAGE_HEIGHT),f=_e.getParameter(_e.UNPACK_SKIP_PIXELS),p=_e.getParameter(_e.UNPACK_SKIP_ROWS),m=_e.getParameter(_e.UNPACK_SKIP_IMAGES),g=i.isCompressedTexture?i.mipmaps[0]:i.image;_e.pixelStorei(_e.UNPACK_ROW_LENGTH,g.width),_e.pixelStorei(_e.UNPACK_IMAGE_HEIGHT,g.height),_e.pixelStorei(_e.UNPACK_SKIP_PIXELS,e.min.x),_e.pixelStorei(_e.UNPACK_SKIP_ROWS,e.min.y),_e.pixelStorei(_e.UNPACK_SKIP_IMAGES,e.min.z),i.isDataTexture||i.isData3DTexture?_e.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g.data):i.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_e.compressedTexSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,g.data)):_e.texSubImage3D(u,r,t.x,t.y,t.z,a,s,o,l,c,g),_e.pixelStorei(_e.UNPACK_ROW_LENGTH,h),_e.pixelStorei(_e.UNPACK_IMAGE_HEIGHT,d),_e.pixelStorei(_e.UNPACK_SKIP_PIXELS,f),_e.pixelStorei(_e.UNPACK_SKIP_ROWS,p),_e.pixelStorei(_e.UNPACK_SKIP_IMAGES,m),0===r&&n.generateMipmaps&&_e.generateMipmap(u),K.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?ee.setTextureCube(e,0):e.isData3DTexture?ee.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ee.setTexture2DArray(e,0):ee.setTexture2D(e,0),K.unbindTexture()},this.resetState=function(){y=0,A=0,E=null,K.reset(),ve.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Se?Ee:Ae}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ee?Se:Te}}class Ss extends ws{}Ss.prototype.isWebGL1Renderer=!0;class Ts{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Fi(e),this.density=t}clone(){return new Ts(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class xs{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Fi(e),this.near=t,this.far=i}clone(){return new xs(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ms extends yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class Rs{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=Re,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Le()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,r=this.stride;n<r;n++)this.array[e+n]=t.array[i+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Le()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Le()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ps=new _t;class Cs{constructor(e,t,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}setX(e,t){return this.normalized&&(t=je(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=je(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=je(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=je(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=He(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=He(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=He(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=He(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=je(t,this.array),i=je(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array),r=je(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return new qi(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Cs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[i+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ds extends Ii{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Os;const ks=new _t,Is=new _t,Ns=new _t,Ls=new Ye,Us=new Ye,Bs=new qt,Fs=new _t,Gs=new _t,Vs=new _t,zs=new Ye,Hs=new Ye,js=new Ye;class Ws extends yi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===Os){Os=new on;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Rs(e,5);Os.setIndex([0,1,2,0,2,3]),Os.setAttribute("position",new Cs(t,3,0,!1)),Os.setAttribute("uv",new Cs(t,2,3,!1))}this.geometry=Os,this.material=void 0!==e?e:new Ds,this.center=new Ye(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Is.setFromMatrixScale(this.matrixWorld),Bs.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Ns.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Is.multiplyScalar(-Ns.z);const i=this.material.rotation;let n,r;0!==i&&(r=Math.cos(i),n=Math.sin(i));const a=this.center;Ys(Fs.set(-.5,-.5,0),Ns,a,Is,n,r),Ys(Gs.set(.5,-.5,0),Ns,a,Is,n,r),Ys(Vs.set(.5,.5,0),Ns,a,Is,n,r),zs.set(0,0),Hs.set(1,0),js.set(1,1);let s=e.ray.intersectTriangle(Fs,Gs,Vs,!1,ks);if(null===s&&(Ys(Gs.set(-.5,.5,0),Ns,a,Is,n,r),Hs.set(0,1),s=e.ray.intersectTriangle(Fs,Vs,Gs,!1,ks),null===s))return;const o=e.ray.origin.distanceTo(ks);o<e.near||o>e.far||t.push({distance:o,point:ks.clone(),uv:Oi.getInterpolation(ks,Fs,Gs,Vs,zs,Hs,js,new Ye),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function Ys(e,t,i,n,r,a){Ls.subVectors(e,i).addScalar(.5).multiply(n),void 0!==r?(Us.x=a*Ls.x-r*Ls.y,Us.y=r*Ls.x+a*Ls.y):Us.copy(Ls),e.copy(t),e.x+=Us.x,e.y+=Us.y,e.applyMatrix4(Bs)}const Xs=new _t,Zs=new _t;class qs extends yi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,i=t.length;e<i;e++){const i=t[e];this.addLevel(i.object.clone(),i.distance,i.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const n=this.levels;let r;for(r=0;r<n.length&&!(t<n[r].distance);r++);return n.splice(r,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n;i++){let n=t[i].distance;if(t[i].object.visible&&(n-=n*t[i].hysteresis),e<n)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Xs.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Xs);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Xs.setFromMatrixPosition(e.matrixWorld),Zs.setFromMatrixPosition(this.matrixWorld);const i=Xs.distanceTo(Zs)/e.zoom;let n,r;for(t[0].object.visible=!0,n=1,r=t.length;n<r;n++){let e=t[n].distance;if(t[n].object.visible&&(e-=e*t[n].hysteresis),!(i>=e))break;t[n-1].object.visible=!1,t[n].object.visible=!0}for(this._currentLevel=n-1;n<r;n++)t[n].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let e=0,n=i.length;e<n;e++){const n=i[e];t.object.levels.push({object:n.object.uuid,distance:n.distance,hysteresis:n.hysteresis})}return t}}const Qs=new _t,Ks=new pt,Js=new pt,$s=new _t,eo=new qt,to=new _t;class io extends Tn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new qt,this.bindMatrixInverse=new qt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Et),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)to.fromBufferAttribute(t,e),this.applyBoneTransform(e,to),this.boundingBox.expandByPoint(to)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Gt),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)to.fromBufferAttribute(t,e),this.applyBoneTransform(e,to),this.boundingSphere.expandByPoint(to)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new pt,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;Ks.fromBufferAttribute(n.attributes.skinIndex,e),Js.fromBufferAttribute(n.attributes.skinWeight,e),Qs.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const n=Js.getComponent(e);if(0!==n){const r=Ks.getComponent(e);eo.multiplyMatrices(i.bones[r].matrixWorld,i.boneInverses[r]),t.addScaledVector($s.copy(Qs).applyMatrix4(eo),n)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class no extends yi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ro extends ft{constructor(e=null,t=1,i=1,n,r,a,s,o,l=1003,c=1003,u,h){super(null,a,s,o,l,c,n,r,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ao=new qt,so=new qt;class oo{constructor(e=[],t=[]){this.uuid=Le(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new qt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new qt;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let n=0,r=e.length;n<r;n++){const r=e[n]?e[n].matrixWorld:so;ao.multiplyMatrices(r,t[n]),ao.toArray(i,16*n)}null!==n&&(n.needsUpdate=!0)}clone(){return new oo(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=Ve(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ro(t,e,e,U,I);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const n=e.bones[i];let r=t[n];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),r=new no),this.bones.push(r),this.boneInverses.push((new qt).fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,r=t.length;n<r;n++){const r=t[n];e.bones.push(r.uuid);const a=i[n];e.boneInverses.push(a.toArray())}return e}}class lo extends qi{constructor(e,t,i,n=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const co=new qt,uo=new qt,ho=[],fo=new Et,po=new qt,mo=new Tn,go=new Gt;class vo extends Tn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lo(new Float32Array(16*i),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<i;e++)this.setMatrixAt(e,po)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Et),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,co),fo.copy(e.boundingBox).applyMatrix4(co),this.boundingBox.union(fo)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Gt),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,co),go.copy(e.boundingSphere).applyMatrix4(co),this.boundingSphere.union(go)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const i=this.matrixWorld,n=this.count;if(mo.geometry=this.geometry,mo.material=this.material,void 0!==mo.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),go.copy(this.boundingSphere),go.applyMatrix4(i),!1!==e.ray.intersectsSphere(go)))for(let r=0;r<n;r++){this.getMatrixAt(r,co),uo.multiplyMatrices(i,co),mo.matrixWorld=uo,mo.raycast(e,ho);for(let e=0,i=ho.length;e<i;e++){const i=ho[e];i.instanceId=r,i.object=this,t.push(i)}ho.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new lo(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class bo extends Ii{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Fi(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const _o=new _t,yo=new _t,Ao=new qt,Eo=new Zt,wo=new Gt;class So extends yi{constructor(e=new on,t=new bo){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[0];for(let e=1,n=t.count;e<n;e++)_o.fromBufferAttribute(t,e-1),yo.fromBufferAttribute(t,e),i[e]=i[e-1],i[e]+=_o.distanceTo(yo);e.setAttribute("lineDistance",new Ji(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Line.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),wo.copy(i.boundingSphere),wo.applyMatrix4(n),wo.radius+=r,!1===e.ray.intersectsSphere(wo))return;Ao.copy(n).invert(),Eo.copy(e.ray).applyMatrix4(Ao);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=new _t,c=new _t,u=new _t,h=new _t,d=this.isLineSegments?2:1,f=i.index,p=i.attributes.position;if(null!==f)for(let i=Math.max(0,a.start),n=Math.min(f.count,a.start+a.count)-1;i<n;i+=d){const n=f.getX(i),r=f.getX(i+1);if(l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,r),Eo.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const a=e.ray.origin.distanceTo(h);a<e.near||a>e.far||t.push({distance:a,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}else for(let i=Math.max(0,a.start),n=Math.min(p.count,a.start+a.count)-1;i<n;i+=d){if(l.fromBufferAttribute(p,i),c.fromBufferAttribute(p,i+1),Eo.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const n=e.ray.origin.distanceTo(h);n<e.near||n>e.far||t.push({distance:n,point:u.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const To=new _t,xo=new _t;class Mo extends So{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,i=[];for(let e=0,n=t.count;e<n;e+=2)To.fromBufferAttribute(t,e),xo.fromBufferAttribute(t,e+1),i[e]=0===e?0:i[e-1],i[e+1]=i[e]+To.distanceTo(xo);e.setAttribute("lineDistance",new Ji(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ro extends So{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Po extends Ii{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Fi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Co=new qt,Do=new Zt,Oo=new Gt,ko=new _t;class Io extends yi{constructor(e=new on,t=new Po){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,r=e.params.Points.threshold,a=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),Oo.copy(i.boundingSphere),Oo.applyMatrix4(n),Oo.radius+=r,!1===e.ray.intersectsSphere(Oo))return;Co.copy(n).invert(),Do.copy(e.ray).applyMatrix4(Co);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=s*s,l=i.index,c=i.attributes.position;if(null!==l)for(let i=Math.max(0,a.start),r=Math.min(l.count,a.start+a.count);i<r;i++){const r=l.getX(i);ko.fromBufferAttribute(c,r),No(ko,r,o,n,e,t,this)}else for(let i=Math.max(0,a.start),r=Math.min(c.count,a.start+a.count);i<r;i++)ko.fromBufferAttribute(c,i),No(ko,i,o,n,e,t,this)}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){const t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function No(e,t,i,n,r,a,s){const o=Do.distanceSqToPoint(e);if(o<i){const i=new _t;Do.closestPointToPoint(e,i),i.applyMatrix4(n);const l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(o),point:i,index:t,face:null,object:s})}}class Lo extends ft{constructor(e,t,i,n,r,a,s,o,l,c,u,h){super(null,a,s,o,l,c,n,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Uo{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),r=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),r+=i.distanceTo(n),t.push(r),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const r=i.length;let a;a=t||e*i[r-1];let s,o=0,l=r-1;for(;o<=l;)if(n=Math.floor(o+(l-o)/2),s=i[n]-a,s<0)o=n+1;else{if(!(s>0)){l=n;break}l=n-1}if(n=l,i[n]===a)return n/(r-1);const c=i[n];return(n+(a-c)/(i[n+1]-c))/(r-1)}getTangent(e,t){const i=1e-4;let n=e-i,r=e+i;n<0&&(n=0),r>1&&(r=1);const a=this.getPoint(n),s=this.getPoint(r),o=t||(a.isVector2?new Ye:new _t);return o.copy(s).sub(a).normalize(),o}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new _t,n=[],r=[],a=[],s=new _t,o=new qt;for(let t=0;t<=e;t++){const i=t/e;n[t]=this.getTangentAt(i,new _t)}r[0]=new _t,a[0]=new _t;let l=Number.MAX_VALUE;const c=Math.abs(n[0].x),u=Math.abs(n[0].y),h=Math.abs(n[0].z);c<=l&&(l=c,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),h<=l&&i.set(0,0,1),s.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],s),a[0].crossVectors(n[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),a[t]=a[t-1].clone(),s.crossVectors(n[t-1],n[t]),s.length()>Number.EPSILON){s.normalize();const e=Math.acos(Ue(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(s,e))}a[t].crossVectors(n[t],r[t])}if(!0===t){let t=Math.acos(Ue(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(s.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),a[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:a}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Bo extends Uo{constructor(e=0,t=0,i=1,n=1,r=0,a=2*Math.PI,s=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=s,this.aRotation=o}getPoint(e,t){const i=t||new Ye,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const a=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=a?0:n),!0!==this.aClockwise||a||(r===n?r=-n:r-=n);const s=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(s),l=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=o-this.aX,n=l-this.aY;o=i*e-n*t+this.aX,l=i*t+n*e+this.aY}return i.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Fo extends Bo{constructor(e,t,i,n,r,a){super(e,t,i,i,n,r,a),this.isArcCurve=!0,this.type="ArcCurve"}}function Go(){let e=0,t=0,i=0,n=0;function r(r,a,s,o){e=r,t=s,i=-3*r+3*a-2*s-o,n=2*r-2*a+s+o}return{initCatmullRom:function(e,t,i,n,a){r(t,i,a*(i-e),a*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,a,s,o){let l=(t-e)/a-(i-e)/(a+s)+(i-t)/s,c=(i-t)/s-(n-t)/(s+o)+(n-i)/o;l*=s,c*=s,r(t,i,l,c)},calc:function(r){const a=r*r;return e+t*r+i*a+n*(a*r)}}}const Vo=new _t,zo=new Go,Ho=new Go,jo=new Go;class Wo extends Uo{constructor(e=[],t=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e,t=new _t){const i=t,n=this.points,r=n.length,a=(r-(this.closed?0:1))*e;let s,o,l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?s=n[(l-1)%r]:(Vo.subVectors(n[0],n[1]).add(n[0]),s=Vo);const u=n[l%r],h=n[(l+1)%r];if(this.closed||l+2<r?o=n[(l+2)%r]:(Vo.subVectors(n[r-1],n[r-2]).add(n[r-1]),o=Vo),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(h),e),n=Math.pow(h.distanceToSquared(o),e);i<1e-4&&(i=1),t<1e-4&&(t=i),n<1e-4&&(n=i),zo.initNonuniformCatmullRom(s.x,u.x,h.x,o.x,t,i,n),Ho.initNonuniformCatmullRom(s.y,u.y,h.y,o.y,t,i,n),jo.initNonuniformCatmullRom(s.z,u.z,h.z,o.z,t,i,n)}else"catmullrom"===this.curveType&&(zo.initCatmullRom(s.x,u.x,h.x,o.x,this.tension),Ho.initCatmullRom(s.y,u.y,h.y,o.y,this.tension),jo.initCatmullRom(s.z,u.z,h.z,o.z,this.tension));return i.set(zo.calc(c),Ho.calc(c),jo.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new _t).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Yo(e,t,i,n,r){const a=.5*(n-t),s=.5*(r-i),o=e*e;return(2*i-2*n+a+s)*(e*o)+(-3*i+3*n-2*a-s)*o+a*e+i}function Xo(e,t,i,n){return function(e,t){const i=1-e;return i*i*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,i)+function(e,t){return e*e*t}(e,n)}function Zo(e,t,i,n,r){return function(e,t){const i=1-e;return i*i*i*t}(e,t)+function(e,t){const i=1-e;return 3*i*i*e*t}(e,i)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,r)}class qo extends Uo{constructor(e=new Ye,t=new Ye,i=new Ye,n=new Ye){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Ye){const i=t,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(Zo(e,n.x,r.x,a.x,s.x),Zo(e,n.y,r.y,a.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Qo extends Uo{constructor(e=new _t,t=new _t,i=new _t,n=new _t){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new _t){const i=t,n=this.v0,r=this.v1,a=this.v2,s=this.v3;return i.set(Zo(e,n.x,r.x,a.x,s.x),Zo(e,n.y,r.y,a.y,s.y),Zo(e,n.z,r.z,a.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ko extends Uo{constructor(e=new Ye,t=new Ye){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ye){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jo extends Uo{constructor(e=new _t,t=new _t){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new _t){const i=t;return 1===e?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _t){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $o extends Uo{constructor(e=new Ye,t=new Ye,i=new Ye){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ye){const i=t,n=this.v0,r=this.v1,a=this.v2;return i.set(Xo(e,n.x,r.x,a.x),Xo(e,n.y,r.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class el extends Uo{constructor(e=new _t,t=new _t,i=new _t){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new _t){const i=t,n=this.v0,r=this.v1,a=this.v2;return i.set(Xo(e,n.x,r.x,a.x),Xo(e,n.y,r.y,a.y),Xo(e,n.z,r.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tl extends Uo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ye){const i=t,n=this.points,r=(n.length-1)*e,a=Math.floor(r),s=r-a,o=n[0===a?a:a-1],l=n[a],c=n[a>n.length-2?n.length-1:a+1],u=n[a>n.length-3?n.length-1:a+2];return i.set(Yo(s,o.x,l.x,c.x,u.x),Yo(s,o.y,l.y,c.y,u.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const i=e.points[t];this.points.push((new Ye).fromArray(i))}return this}}var il=Object.freeze({__proto__:null,ArcCurve:Fo,CatmullRomCurve3:Wo,CubicBezierCurve:qo,CubicBezierCurve3:Qo,EllipseCurve:Bo,LineCurve:Ko,LineCurve3:Jo,QuadraticBezierCurve:$o,QuadraticBezierCurve3:el,SplineCurve:tl});class nl extends Uo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ko(t,e))}getPoint(e,t){const i=e*this.getLength(),n=this.getCurveLengths();let r=0;for(;r<n.length;){if(n[r]>=i){const e=n[r]-i,a=this.curves[r],s=a.getLength(),o=0===s?0:1-e/s;return a.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let n=0,r=this.curves;n<r.length;n++){const a=r[n],s=a.isEllipseCurve?2*e:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,o=a.getPoints(s);for(let e=0;e<o.length;e++){const n=o[e];i&&i.equals(n)||(t.push(n),i=n)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const i=e.curves[t];this.curves.push((new il[i.type]).fromJSON(i))}return this}}class rl extends nl{constructor(e){super(),this.type="Path",this.currentPoint=new Ye,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ko(this.currentPoint.clone(),new Ye(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const r=new $o(this.currentPoint.clone(),new Ye(e,t),new Ye(i,n));return this.curves.push(r),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,r,a){const s=new qo(this.currentPoint.clone(),new Ye(e,t),new Ye(i,n),new Ye(r,a));return this.curves.push(s),this.currentPoint.set(r,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new tl(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,r,a){const s=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+s,t+o,i,n,r,a),this}absarc(e,t,i,n,r,a){return this.absellipse(e,t,i,i,n,r,a),this}ellipse(e,t,i,n,r,a,s,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,i,n,r,a,s,o),this}absellipse(e,t,i,n,r,a,s,o){const l=new Bo(e,t,i,n,r,a,s,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class al extends on{constructor(e=[new Ye(0,-.5),new Ye(.5,0),new Ye(0,.5)],t=12,i=0,n=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=Ue(n,0,2*Math.PI);const r=[],a=[],s=[],o=[],l=[],c=1/t,u=new _t,h=new Ye,d=new _t,f=new _t,p=new _t;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let r=0;r<=t;r++){const d=i+r*c*n,f=Math.sin(d),p=Math.cos(d);for(let i=0;i<=e.length-1;i++){u.x=e[i].x*f,u.y=e[i].y,u.z=e[i].x*p,a.push(u.x,u.y,u.z),h.x=r/t,h.y=i/(e.length-1),s.push(h.x,h.y);const n=o[3*i+0]*f,c=o[3*i+1],d=o[3*i+0]*p;l.push(n,c,d)}}for(let i=0;i<t;i++)for(let t=0;t<e.length-1;t++){const n=t+i*e.length,a=n,s=n+e.length,o=n+e.length+1,l=n+1;r.push(a,s,l),r.push(o,l,s)}this.setIndex(r),this.setAttribute("position",new Ji(a,3)),this.setAttribute("uv",new Ji(s,2)),this.setAttribute("normal",new Ji(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new al(e.points,e.segments,e.phiStart,e.phiLength)}}class sl extends al{constructor(e=1,t=1,i=4,n=8){const r=new rl;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new sl(e.radius,e.length,e.capSegments,e.radialSegments)}}class ol extends on{constructor(e=1,t=32,i=0,n=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const r=[],a=[],s=[],o=[],l=new _t,c=new Ye;a.push(0,0,0),s.push(0,0,1),o.push(.5,.5);for(let r=0,u=3;r<=t;r++,u+=3){const h=i+r/t*n;l.x=e*Math.cos(h),l.y=e*Math.sin(h),a.push(l.x,l.y,l.z),s.push(0,0,1),c.x=(a[u]/e+1)/2,c.y=(a[u+1]/e+1)/2,o.push(c.x,c.y)}for(let e=1;e<=t;e++)r.push(e,e+1,0);this.setIndex(r),this.setAttribute("position",new Ji(a,3)),this.setAttribute("normal",new Ji(s,3)),this.setAttribute("uv",new Ji(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ol(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class ll extends on{constructor(e=1,t=1,i=1,n=32,r=1,a=!1,s=0,o=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:s,thetaLength:o};const l=this;n=Math.floor(n),r=Math.floor(r);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=i/2;let g=0;function v(i){const r=f,a=new Ye,p=new _t;let v=0;const b=!0===i?e:t,_=!0===i?1:-1;for(let e=1;e<=n;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),f++;const y=f;for(let e=0;e<=n;e++){const t=e/n*o+s,i=Math.cos(t),r=Math.sin(t);p.x=b*r,p.y=m*_,p.z=b*i,u.push(p.x,p.y,p.z),h.push(0,_,0),a.x=.5*i+.5,a.y=.5*r*_+.5,d.push(a.x,a.y),f++}for(let e=0;e<n;e++){const t=r+e,n=y+e;!0===i?c.push(n,n+1,t):c.push(n+1,n,t),v+=3}l.addGroup(g,v,!0===i?1:2),g+=v}!function(){const a=new _t,v=new _t;let b=0;const _=(t-e)/i;for(let l=0;l<=r;l++){const c=[],g=l/r,b=g*(t-e)+e;for(let e=0;e<=n;e++){const t=e/n,r=t*o+s,l=Math.sin(r),p=Math.cos(r);v.x=b*l,v.y=-g*i+m,v.z=b*p,u.push(v.x,v.y,v.z),a.set(l,_,p).normalize(),h.push(a.x,a.y,a.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<n;e++)for(let t=0;t<r;t++){const i=p[t][e],n=p[t+1][e],r=p[t+1][e+1],a=p[t][e+1];c.push(i,n,a),c.push(n,r,a),b+=6}l.addGroup(g,b,0),g+=b}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new Ji(u,3)),this.setAttribute("normal",new Ji(h,3)),this.setAttribute("uv",new Ji(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ll(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class cl extends ll{constructor(e=1,t=1,i=32,n=1,r=!1,a=0,s=2*Math.PI){super(0,e,t,i,n,r,a,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:a,thetaLength:s}}static fromJSON(e){return new cl(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class ul extends on{constructor(e=[],t=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const r=[],a=[];function s(e,t,i,n){const r=n+1,a=[];for(let n=0;n<=r;n++){a[n]=[];const s=e.clone().lerp(i,n/r),o=t.clone().lerp(i,n/r),l=r-n;for(let e=0;e<=l;e++)a[n][e]=0===e&&n===r?s:s.clone().lerp(o,e/l)}for(let e=0;e<r;e++)for(let t=0;t<2*(r-e)-1;t++){const i=Math.floor(t/2);t%2==0?(o(a[e][i+1]),o(a[e+1][i]),o(a[e][i])):(o(a[e][i+1]),o(a[e+1][i+1]),o(a[e+1][i]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,i){const n=3*t;i.x=e[n+0],i.y=e[n+1],i.z=e[n+2]}function c(e,t,i,n){n<0&&1===e.x&&(a[t]=e.x-1),0===i.x&&0===i.z&&(a[t]=n/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const i=new _t,n=new _t,r=new _t;for(let a=0;a<t.length;a+=3)l(t[a+0],i),l(t[a+1],n),l(t[a+2],r),s(i,n,r,e)}(n),function(e){const t=new _t;for(let i=0;i<r.length;i+=3)t.x=r[i+0],t.y=r[i+1],t.z=r[i+2],t.normalize().multiplyScalar(e),r[i+0]=t.x,r[i+1]=t.y,r[i+2]=t.z}(i),function(){const e=new _t;for(let i=0;i<r.length;i+=3){e.x=r[i+0],e.y=r[i+1],e.z=r[i+2];const n=u(e)/2/Math.PI+.5,s=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);a.push(n,1-s)}var t;(function(){const e=new _t,t=new _t,i=new _t,n=new _t,s=new Ye,o=new Ye,l=new Ye;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),i.set(r[h+6],r[h+7],r[h+8]),s.set(a[d+0],a[d+1]),o.set(a[d+2],a[d+3]),l.set(a[d+4],a[d+5]),n.copy(e).add(t).add(i).divideScalar(3);const f=u(n);c(s,d+0,e,f),c(o,d+2,t,f),c(l,d+4,i,f)}})(),function(){for(let e=0;e<a.length;e+=6){const t=a[e+0],i=a[e+2],n=a[e+4],r=Math.max(t,i,n),s=Math.min(t,i,n);r>.9&&s<.1&&(t<.2&&(a[e+0]+=1),i<.2&&(a[e+2]+=1),n<.2&&(a[e+4]+=1))}}()}(),this.setAttribute("position",new Ji(r,3)),this.setAttribute("normal",new Ji(r.slice(),3)),this.setAttribute("uv",new Ji(a,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ul(e.vertices,e.indices,e.radius,e.details)}}class hl extends ul{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=1/i;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hl(e.radius,e.detail)}}const dl=new _t,fl=new _t,pl=new _t,ml=new Oi;class gl extends on{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const i=4,n=Math.pow(10,i),r=Math.cos(Ie*t),a=e.getIndex(),s=e.getAttribute("position"),o=a?a.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<o;e+=3){a?(l[0]=a.getX(e),l[1]=a.getX(e+1),l[2]=a.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:i,c:o}=ml;if(t.fromBufferAttribute(s,l[0]),i.fromBufferAttribute(s,l[1]),o.fromBufferAttribute(s,l[2]),ml.getNormal(pl),u[0]=`${Math.round(t.x*n)},${Math.round(t.y*n)},${Math.round(t.z*n)}`,u[1]=`${Math.round(i.x*n)},${Math.round(i.y*n)},${Math.round(i.z*n)}`,u[2]=`${Math.round(o.x*n)},${Math.round(o.y*n)},${Math.round(o.z*n)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,i=u[e],n=u[t],a=ml[c[e]],s=ml[c[t]],o=`${i}_${n}`,f=`${n}_${i}`;f in h&&h[f]?(pl.dot(h[f].normal)<=r&&(d.push(a.x,a.y,a.z),d.push(s.x,s.y,s.z)),h[f]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:pl.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:i}=h[e];dl.fromBufferAttribute(s,t),fl.fromBufferAttribute(s,i),d.push(dl.x,dl.y,dl.z),d.push(fl.x,fl.y,fl.z)}this.setAttribute("position",new Ji(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class vl extends rl{constructor(e){super(e),this.uuid=Le(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,n=this.holes.length;i<n;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const i=e.holes[t];this.holes.push((new rl).fromJSON(i))}return this}}function bl(e,t,i,n,r){let a,s;if(r===function(e,t,i,n){let r=0;for(let a=t,s=i-n;a<i;a+=n)r+=(e[s]-e[a])*(e[a+1]+e[s+1]),s=a;return r}(e,t,i,n)>0)for(a=t;a<i;a+=n)s=Fl(a,e[a],e[a+1],s);else for(a=i-n;a>=t;a-=n)s=Fl(a,e[a],e[a+1],s);return s&&kl(s,s.next)&&(Gl(s),s=s.next),s}function _l(e,t){if(!e)return e;t||(t=e);let i,n=e;do{if(i=!1,n.steiner||!kl(n,n.next)&&0!==Ol(n.prev,n,n.next))n=n.next;else{if(Gl(n),n=t=n.prev,n===n.next)break;i=!0}}while(i||n!==t);return t}function yl(e,t,i,n,r,a,s){if(!e)return;!s&&a&&function(e,t,i,n){let r=e;do{0===r.z&&(r.z=Rl(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,i,n,r,a,s,o,l,c=1;do{for(i=e,e=null,a=null,s=0;i;){for(s++,n=i,o=0,t=0;t<c&&(o++,n=n.nextZ,n);t++);for(l=c;o>0||l>0&&n;)0!==o&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,o--):(r=n,n=n.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;i=n}a.nextZ=null,c*=2}while(s>1)}(r)}(e,n,r,a);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,a?El(e,n,r,a):Al(e))t.push(o.i/i|0),t.push(e.i/i|0),t.push(l.i/i|0),Gl(e),e=l.next,c=l.next;else if((e=l)===c){s?1===s?yl(e=wl(_l(e),t,i),t,i,n,r,a,2):2===s&&Sl(e,t,i,n,r,a):yl(_l(e),t,i,n,r,a,1);break}}function Al(e){const t=e.prev,i=e,n=e.next;if(Ol(t,i,n)>=0)return!1;const r=t.x,a=i.x,s=n.x,o=t.y,l=i.y,c=n.y,u=r<a?r<s?r:s:a<s?a:s,h=o<l?o<c?o:c:l<c?l:c,d=r>a?r>s?r:s:a>s?a:s,f=o>l?o>c?o:c:l>c?l:c;let p=n.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Cl(r,o,a,l,s,c,p.x,p.y)&&Ol(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function El(e,t,i,n){const r=e.prev,a=e,s=e.next;if(Ol(r,a,s)>=0)return!1;const o=r.x,l=a.x,c=s.x,u=r.y,h=a.y,d=s.y,f=o<l?o<c?o:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=Rl(f,p,t,i,n),b=Rl(m,g,t,i,n);let _=e.prevZ,y=e.nextZ;for(;_&&_.z>=v&&y&&y.z<=b;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==s&&Cl(o,u,l,h,c,d,_.x,_.y)&&Ol(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Cl(o,u,l,h,c,d,y.x,y.y)&&Ol(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;_&&_.z>=v;){if(_.x>=f&&_.x<=m&&_.y>=p&&_.y<=g&&_!==r&&_!==s&&Cl(o,u,l,h,c,d,_.x,_.y)&&Ol(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;y&&y.z<=b;){if(y.x>=f&&y.x<=m&&y.y>=p&&y.y<=g&&y!==r&&y!==s&&Cl(o,u,l,h,c,d,y.x,y.y)&&Ol(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function wl(e,t,i){let n=e;do{const r=n.prev,a=n.next.next;!kl(r,a)&&Il(r,n,n.next,a)&&Ul(r,a)&&Ul(a,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(a.i/i|0),Gl(n),Gl(n.next),n=e=a),n=n.next}while(n!==e);return _l(n)}function Sl(e,t,i,n,r,a){let s=e;do{let e=s.next.next;for(;e!==s.prev;){if(s.i!==e.i&&Dl(s,e)){let o=Bl(s,e);return s=_l(s,s.next),o=_l(o,o.next),yl(s,t,i,n,r,a,0),void yl(o,t,i,n,r,a,0)}e=e.next}s=s.next}while(s!==e)}function Tl(e,t){return e.x-t.x}function xl(e,t){const i=function(e,t){let i,n=t,r=-1/0;const a=e.x,s=e.y;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){const e=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(e<=a&&e>r&&(r=e,i=n.x<n.next.x?n:n.next,e===a))return i}n=n.next}while(n!==t);if(!i)return null;const o=i,l=i.x,c=i.y;let u,h=1/0;n=i;do{a>=n.x&&n.x>=l&&a!==n.x&&Cl(s<c?a:r,s,l,c,s<c?r:a,s,n.x,n.y)&&(u=Math.abs(s-n.y)/(a-n.x),Ul(n,e)&&(u<h||u===h&&(n.x>i.x||n.x===i.x&&Ml(i,n)))&&(i=n,h=u)),n=n.next}while(n!==o);return i}(e,t);if(!i)return t;const n=Bl(i,e);return _l(n,n.next),_l(i,i.next)}function Ml(e,t){return Ol(e.prev,e,t.prev)<0&&Ol(t.next,e,e.next)<0}function Rl(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Pl(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Cl(e,t,i,n,r,a,s,o){return(r-s)*(t-o)>=(e-s)*(a-o)&&(e-s)*(n-o)>=(i-s)*(t-o)&&(i-s)*(a-o)>=(r-s)*(n-o)}function Dl(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Il(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Ul(e,t)&&Ul(t,e)&&function(e,t){let i=e,n=!1;const r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{i.y>a!=i.next.y>a&&i.next.y!==i.y&&r<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(Ol(e.prev,e,t.prev)||Ol(e,t.prev,t))||kl(e,t)&&Ol(e.prev,e,e.next)>0&&Ol(t.prev,t,t.next)>0)}function Ol(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function kl(e,t){return e.x===t.x&&e.y===t.y}function Il(e,t,i,n){const r=Ll(Ol(e,t,i)),a=Ll(Ol(e,t,n)),s=Ll(Ol(i,n,e)),o=Ll(Ol(i,n,t));return r!==a&&s!==o||!(0!==r||!Nl(e,i,t))||!(0!==a||!Nl(e,n,t))||!(0!==s||!Nl(i,e,n))||!(0!==o||!Nl(i,t,n))}function Nl(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Ll(e){return e>0?1:e<0?-1:0}function Ul(e,t){return Ol(e.prev,e,e.next)<0?Ol(e,t,e.next)>=0&&Ol(e,e.prev,t)>=0:Ol(e,t,e.prev)<0||Ol(e,e.next,t)<0}function Bl(e,t){const i=new Vl(e.i,e.x,e.y),n=new Vl(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,a.next=n,n.prev=a,n}function Fl(e,t,i,n){const r=new Vl(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function Gl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Vl(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class zl{static area(e){const t=e.length;let i=0;for(let n=t-1,r=0;r<t;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i}static isClockWise(e){return zl.area(e)<0}static triangulateShape(e,t){const i=[],n=[],r=[];Hl(e),jl(i,e);let a=e.length;t.forEach(Hl);for(let e=0;e<t.length;e++)n.push(a),a+=t[e].length,jl(i,t[e]);const s=function(e,t,i=2){const n=t&&t.length,r=n?t[0]*i:e.length;let a=bl(e,0,r,i,!0);const s=[];if(!a||a.next===a.prev)return s;let o,l,c,u,h,d,f;if(n&&(a=function(e,t,i,n){const r=[];let a,s,o,l,c;for(a=0,s=t.length;a<s;a++)o=t[a]*n,l=a<s-1?t[a+1]*n:e.length,c=bl(e,o,l,n,!1),c===c.next&&(c.steiner=!0),r.push(Pl(c));for(r.sort(Tl),a=0;a<r.length;a++)i=xl(r[a],i);return i}(e,t,a,i)),e.length>80*i){o=c=e[0],l=u=e[1];for(let t=i;t<r;t+=i)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=0!==f?32767/f:0}return yl(a,s,i,o,l,f,0),s}(i,n);for(let e=0;e<s.length;e+=3)r.push(s.slice(e,e+3));return r}}function Hl(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function jl(e,t){for(let i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}class Wl extends on{constructor(e=new vl([new Ye(.5,.5),new Ye(-.5,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],r=[];for(let t=0,i=e.length;t<i;t++)a(e[t]);function a(e){const a=[],s=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Yl;let g,v,b,_,y,A=!1;p&&(g=p.getSpacedPoints(o),A=!0,c=!1,v=p.computeFrenetFrames(o,!1),b=new _t,_=new _t,y=new _t),c||(f=0,u=0,h=0,d=0);const E=e.extractPoints(s);let w=E.shape;const S=E.holes;if(!zl.isClockWise(w)){w=w.reverse();for(let e=0,t=S.length;e<t;e++){const t=S[e];zl.isClockWise(t)&&(S[e]=t.reverse())}}const T=zl.triangulateShape(w,S),x=w;for(let e=0,t=S.length;e<t;e++){const t=S[e];w=w.concat(t)}function M(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,i)}const R=w.length,P=T.length;function C(e,t,i){let n,r,a;const s=e.x-t.x,o=e.y-t.y,l=i.x-e.x,c=i.y-e.y,u=s*s+o*o,h=s*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-o/h,p=t.y+s/h,m=((i.x-c/d-f)*c-(i.y+l/d-p)*l)/(s*c-o*l);n=f+s*m-e.x,r=p+o*m-e.y;const g=n*n+r*r;if(g<=2)return new Ye(n,r);a=Math.sqrt(g/2)}else{let e=!1;s>Number.EPSILON?l>Number.EPSILON&&(e=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(n=-o,r=s,a=Math.sqrt(u)):(n=s,r=o,a=Math.sqrt(u/2))}return new Ye(n/a,r/a)}const D=[];for(let e=0,t=x.length,i=t-1,n=e+1;e<t;e++,i++,n++)i===t&&(i=0),n===t&&(n=0),D[e]=C(x[e],x[i],x[n]);const O=[];let k,I=D.concat();for(let e=0,t=S.length;e<t;e++){const t=S[e];k=[];for(let e=0,i=t.length,n=i-1,r=e+1;e<i;e++,n++,r++)n===i&&(n=0),r===i&&(r=0),k[e]=C(t[e],t[n],t[r]);O.push(k),I=I.concat(k)}for(let e=0;e<f;e++){const t=e/f,i=u*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=x.length;e<t;e++){const t=M(x[e],D[e],n);U(t.x,t.y,-i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];k=O[e];for(let e=0,r=t.length;e<r;e++){const r=M(t[e],k[e],n);U(r.x,r.y,-i)}}}const N=h+d;for(let e=0;e<R;e++){const t=c?M(w[e],I[e],N):w[e];A?(_.copy(v.normals[0]).multiplyScalar(t.x),b.copy(v.binormals[0]).multiplyScalar(t.y),y.copy(g[0]).add(_).add(b),U(y.x,y.y,y.z)):U(t.x,t.y,0)}for(let e=1;e<=o;e++)for(let t=0;t<R;t++){const i=c?M(w[t],I[t],N):w[t];A?(_.copy(v.normals[e]).multiplyScalar(i.x),b.copy(v.binormals[e]).multiplyScalar(i.y),y.copy(g[e]).add(_).add(b),U(y.x,y.y,y.z)):U(i.x,i.y,l/o*e)}for(let e=f-1;e>=0;e--){const t=e/f,i=u*Math.cos(t*Math.PI/2),n=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=x.length;e<t;e++){const t=M(x[e],D[e],n);U(t.x,t.y,l+i)}for(let e=0,t=S.length;e<t;e++){const t=S[e];k=O[e];for(let e=0,r=t.length;e<r;e++){const r=M(t[e],k[e],n);A?U(r.x,r.y+g[o-1].y,g[o-1].x+i):U(r.x,r.y,l+i)}}}function L(e,t){let i=e.length;for(;--i>=0;){const n=i;let r=i-1;r<0&&(r=e.length-1);for(let e=0,i=o+2*f;e<i;e++){const i=R*e,a=R*(e+1);F(t+n+i,t+r+i,t+r+a,t+n+a)}}}function U(e,t,i){a.push(e),a.push(t),a.push(i)}function B(e,t,r){G(e),G(t),G(r);const a=n.length/3,s=m.generateTopUV(i,n,a-3,a-2,a-1);V(s[0]),V(s[1]),V(s[2])}function F(e,t,r,a){G(e),G(t),G(a),G(t),G(r),G(a);const s=n.length/3,o=m.generateSideWallUV(i,n,s-6,s-3,s-2,s-1);V(o[0]),V(o[1]),V(o[3]),V(o[1]),V(o[2]),V(o[3])}function G(e){n.push(a[3*e+0]),n.push(a[3*e+1]),n.push(a[3*e+2])}function V(e){r.push(e.x),r.push(e.y)}!function(){const e=n.length/3;if(c){let e=0,t=R*e;for(let e=0;e<P;e++){const i=T[e];B(i[2]+t,i[1]+t,i[0]+t)}e=o+2*f,t=R*e;for(let e=0;e<P;e++){const i=T[e];B(i[0]+t,i[1]+t,i[2]+t)}}else{for(let e=0;e<P;e++){const t=T[e];B(t[2],t[1],t[0])}for(let e=0;e<P;e++){const t=T[e];B(t[0]+R*o,t[1]+R*o,t[2]+R*o)}}i.addGroup(e,n.length/3-e,0)}(),function(){const e=n.length/3;let t=0;L(x,t),t+=x.length;for(let e=0,i=S.length;e<i;e++){const i=S[e];L(i,t),t+=i.length}i.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new Ji(n,3)),this.setAttribute("uv",new Ji(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,i){if(i.shapes=[],Array.isArray(e))for(let t=0,n=e.length;t<n;t++){const n=e[t];i.shapes.push(n.uuid)}else i.shapes.push(e.uuid);return i.options=Object.assign({},t),void 0!==t.extrudePath&&(i.options.extrudePath=t.extrudePath.toJSON()),i}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const i=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];i.push(r)}const n=e.options.extrudePath;return void 0!==n&&(e.options.extrudePath=(new il[n.type]).fromJSON(n)),new Wl(i,e.options)}}const Yl={generateTopUV:function(e,t,i,n,r){const a=t[3*i],s=t[3*i+1],o=t[3*n],l=t[3*n+1],c=t[3*r],u=t[3*r+1];return[new Ye(a,s),new Ye(o,l),new Ye(c,u)]},generateSideWallUV:function(e,t,i,n,r,a){const s=t[3*i],o=t[3*i+1],l=t[3*i+2],c=t[3*n],u=t[3*n+1],h=t[3*n+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(o-u)<Math.abs(s-c)?[new Ye(s,1-l),new Ye(c,1-h),new Ye(d,1-p),new Ye(m,1-v)]:[new Ye(o,1-l),new Ye(u,1-h),new Ye(f,1-p),new Ye(g,1-v)]}};class Xl extends ul{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2;super([-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xl(e.radius,e.detail)}}class Zl extends ul{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Zl(e.radius,e.detail)}}class ql extends on{constructor(e=.5,t=1,i=32,n=1,r=0,a=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:a},i=Math.max(3,i);const s=[],o=[],l=[],c=[];let u=e;const h=(t-e)/(n=Math.max(1,n)),d=new _t,f=new Ye;for(let e=0;e<=n;e++){for(let e=0;e<=i;e++){const n=r+e/i*a;d.x=u*Math.cos(n),d.y=u*Math.sin(n),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let e=0;e<n;e++){const t=e*(i+1);for(let e=0;e<i;e++){const n=e+t,r=n,a=n+i+1,o=n+i+2,l=n+1;s.push(r,a,l),s.push(a,o,l)}}this.setIndex(s),this.setAttribute("position",new Ji(o,3)),this.setAttribute("normal",new Ji(l,3)),this.setAttribute("uv",new Ji(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ql(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Ql extends on{constructor(e=new vl([new Ye(0,.5),new Ye(-.5,-.5),new Ye(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],r=[],a=[];let s=0,o=0;if(!1===Array.isArray(e))l(e);else for(let t=0;t<e.length;t++)l(e[t]),this.addGroup(s,o,t),s+=o,o=0;function l(e){const s=n.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===zl.isClockWise(c)&&(c=c.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===zl.isClockWise(t)&&(u[e]=t.reverse())}const h=zl.triangulateShape(c,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];c=c.concat(t)}for(let e=0,t=c.length;e<t;e++){const t=c[e];n.push(t.x,t.y,0),r.push(0,0,1),a.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],n=t[0]+s,r=t[1]+s,a=t[2]+s;i.push(n,r,a),o+=3}}this.setIndex(i),this.setAttribute("position",new Ji(n,3)),this.setAttribute("normal",new Ji(r,3)),this.setAttribute("uv",new Ji(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let i=0,n=e.length;i<n;i++){const n=e[i];t.shapes.push(n.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const i=[];for(let n=0,r=e.shapes.length;n<r;n++){const r=t[e.shapes[n]];i.push(r)}return new Ql(i,e.curveSegments)}}class Kl extends on{constructor(e=1,t=32,i=16,n=0,r=2*Math.PI,a=0,s=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const o=Math.min(a+s,Math.PI);let l=0;const c=[],u=new _t,h=new _t,d=[],f=[],p=[],m=[];for(let d=0;d<=i;d++){const g=[],v=d/i;let b=0;0===d&&0===a?b=.5/t:d===i&&o===Math.PI&&(b=-.5/t);for(let i=0;i<=t;i++){const o=i/t;u.x=-e*Math.cos(n+o*r)*Math.sin(a+v*s),u.y=e*Math.cos(a+v*s),u.z=e*Math.sin(n+o*r)*Math.sin(a+v*s),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+b,1-v),g.push(l++)}c.push(g)}for(let e=0;e<i;e++)for(let n=0;n<t;n++){const t=c[e][n+1],r=c[e][n],s=c[e+1][n],l=c[e+1][n+1];(0!==e||a>0)&&d.push(t,r,l),(e!==i-1||o<Math.PI)&&d.push(r,s,l)}this.setIndex(d),this.setAttribute("position",new Ji(f,3)),this.setAttribute("normal",new Ji(p,3)),this.setAttribute("uv",new Ji(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kl(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Jl extends ul{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jl(e.radius,e.detail)}}class $l extends on{constructor(e=1,t=.4,i=12,n=48,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},i=Math.floor(i),n=Math.floor(n);const a=[],s=[],o=[],l=[],c=new _t,u=new _t,h=new _t;for(let a=0;a<=i;a++)for(let d=0;d<=n;d++){const f=d/n*r,p=a/i*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),s.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(d/n),l.push(a/i)}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*e+t-1,r=(n+1)*(e-1)+t-1,s=(n+1)*(e-1)+t,o=(n+1)*e+t;a.push(i,r,o),a.push(r,s,o)}this.setIndex(a),this.setAttribute("position",new Ji(s,3)),this.setAttribute("normal",new Ji(o,3)),this.setAttribute("uv",new Ji(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $l(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ec extends on{constructor(e=1,t=.4,i=64,n=8,r=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},i=Math.floor(i),n=Math.floor(n);const s=[],o=[],l=[],c=[],u=new _t,h=new _t,d=new _t,f=new _t,p=new _t,m=new _t,g=new _t;for(let s=0;s<=i;++s){const b=s/i*r*Math.PI*2;v(b,r,a,e,d),v(b+.01,r,a,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=n;++e){const r=e/n*Math.PI*2,a=-t*Math.cos(r),f=t*Math.sin(r);u.x=d.x+(a*g.x+f*p.x),u.y=d.y+(a*g.y+f*p.y),u.z=d.z+(a*g.z+f*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(s/i),c.push(e/n)}}for(let e=1;e<=i;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),r=(n+1)*e+(t-1),a=(n+1)*e+t,o=(n+1)*(e-1)+t;s.push(i,r,o),s.push(r,a,o)}function v(e,t,i,n,r){const a=Math.cos(e),s=Math.sin(e),o=i/t*e,l=Math.cos(o);r.x=n*(2+l)*.5*a,r.y=n*(2+l)*s*.5,r.z=n*Math.sin(o)*.5}this.setIndex(s),this.setAttribute("position",new Ji(o,3)),this.setAttribute("normal",new Ji(l,3)),this.setAttribute("uv",new Ji(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ec(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class tc extends on{constructor(e=new el(new _t(-1,-1,0),new _t(-1,1,0),new _t(1,1,0)),t=64,i=1,n=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r};const a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const s=new _t,o=new _t,l=new Ye;let c=new _t;const u=[],h=[],d=[],f=[];function p(r){c=e.getPointAt(r/t,c);const l=a.normals[r],d=a.binormals[r];for(let e=0;e<=n;e++){const t=e/n*Math.PI*2,r=Math.sin(t),a=-Math.cos(t);o.x=a*l.x+r*d.x,o.y=a*l.y+r*d.y,o.z=a*l.z+r*d.z,o.normalize(),h.push(o.x,o.y,o.z),s.x=c.x+i*o.x,s.y=c.y+i*o.y,s.z=c.z+i*o.z,u.push(s.x,s.y,s.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let i=0;i<=n;i++)l.x=e/t,l.y=i/n,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=n;t++){const i=(n+1)*(e-1)+(t-1),r=(n+1)*e+(t-1),a=(n+1)*e+t,s=(n+1)*(e-1)+t;f.push(i,r,s),f.push(r,a,s)}}()}(),this.setIndex(f),this.setAttribute("position",new Ji(u,3)),this.setAttribute("normal",new Ji(h,3)),this.setAttribute("uv",new Ji(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new tc((new il[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ic extends on{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],i=new Set,n=new _t,r=new _t;if(null!==e.index){const a=e.attributes.position,s=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:s.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let o=0;o<3;o++){const l=s.getX(e+o),c=s.getX(e+(o+1)%3);n.fromBufferAttribute(a,l),r.fromBufferAttribute(a,c),!0===nc(n,r,i)&&(t.push(n.x,n.y,n.z),t.push(r.x,r.y,r.z))}}}else{const a=e.attributes.position;for(let e=0,s=a.count/3;e<s;e++)for(let s=0;s<3;s++){const o=3*e+s,l=3*e+(s+1)%3;n.fromBufferAttribute(a,o),r.fromBufferAttribute(a,l),!0===nc(n,r,i)&&(t.push(n.x,n.y,n.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new Ji(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function nc(e,t,i){const n=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==i.has(n)&&!0!==i.has(r)&&(i.add(n),i.add(r),!0)}var rc=Object.freeze({__proto__:null,BoxGeometry:Mn,CapsuleGeometry:sl,CircleGeometry:ol,ConeGeometry:cl,CylinderGeometry:ll,DodecahedronGeometry:hl,EdgesGeometry:gl,ExtrudeGeometry:Wl,IcosahedronGeometry:Xl,LatheGeometry:al,OctahedronGeometry:Zl,PlaneGeometry:Zn,PolyhedronGeometry:ul,RingGeometry:ql,ShapeGeometry:Ql,SphereGeometry:Kl,TetrahedronGeometry:Jl,TorusGeometry:$l,TorusKnotGeometry:ec,TubeGeometry:tc,WireframeGeometry:ic});class ac extends Ii{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Fi(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class sc extends On{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class oc extends Ii{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Fi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class lc extends oc{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ye(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ue(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Fi(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Fi(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Fi(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class cc extends Ii{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Fi(16777215),this.specular=new Fi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class uc extends Ii{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Fi(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class hc extends Ii{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class dc extends Ii{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Fi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Fi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=o,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fc extends Ii{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Fi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new Ye(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class pc extends bo{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function mc(e,t,i){return vc(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)}function gc(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function vc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bc(e){const t=e.length,i=new Array(t);for(let e=0;e!==t;++e)i[e]=e;return i.sort((function(t,i){return e[t]-e[i]})),i}function _c(e,t,i){const n=e.length,r=new e.constructor(n);for(let a=0,s=0;s!==n;++a){const n=i[a]*t;for(let i=0;i!==t;++i)r[s++]=e[n+i]}return r}function yc(e,t,i,n){let r=1,a=e[0];for(;void 0!==a&&void 0===a[n];)a=e[r++];if(void 0===a)return;let s=a[n];if(void 0!==s)if(Array.isArray(s))do{s=a[n],void 0!==s&&(t.push(a.time),i.push.apply(i,s)),a=e[r++]}while(void 0!==a);else if(void 0!==s.toArray)do{s=a[n],void 0!==s&&(t.push(a.time),s.toArray(i,i.length)),a=e[r++]}while(void 0!==a);else do{s=a[n],void 0!==s&&(t.push(a.time),i.push(s)),a=e[r++]}while(void 0!==a)}const Ac={arraySlice:mc,convertArray:gc,isTypedArray:vc,getKeyframeOrder:bc,sortedArray:_c,flattenJSON:yc,subclip:function(e,t,i,n,r=30){const a=e.clone();a.name=t;const s=[];for(let e=0;e<a.tracks.length;++e){const t=a.tracks[e],o=t.getValueSize(),l=[],c=[];for(let e=0;e<t.times.length;++e){const a=t.times[e]*r;if(!(a<i||a>=n)){l.push(t.times[e]);for(let i=0;i<o;++i)c.push(t.values[e*o+i])}}0!==l.length&&(t.times=gc(l,t.times.constructor),t.values=gc(c,t.values.constructor),s.push(t))}a.tracks=s;let o=1/0;for(let e=0;e<a.tracks.length;++e)o>a.tracks[e].times[0]&&(o=a.tracks[e].times[0]);for(let e=0;e<a.tracks.length;++e)a.tracks[e].shift(-1*o);return a.resetDuration(),a},makeClipAdditive:function(e,t=0,i=e,n=30){n<=0&&(n=30);const r=i.tracks.length,a=t/n;for(let t=0;t<r;++t){const n=i.tracks[t],r=n.ValueTypeName;if("bool"===r||"string"===r)continue;const s=e.tracks.find((function(e){return e.name===n.name&&e.ValueTypeName===r}));if(void 0===s)continue;let o=0;const l=n.getValueSize();n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=s.getValueSize();s.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=n.times.length-1;let d;if(a<=n.times[0]){const e=o,t=l-o;d=mc(n.values,e,t)}else if(a>=n.times[h]){const e=h*l+o,t=e+l-o;d=mc(n.values,e,t)}else{const e=n.createInterpolant(),t=o,i=l-o;e.evaluate(a),d=mc(e.resultBuffer,t,i)}"quaternion"===r&&(new bt).fromArray(d).normalize().conjugate().toArray(d);const f=s.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===r)bt.multiplyQuaternionsFlat(s.values,t,d,0,s.values,t);else{const e=u-2*c;for(let i=0;i<e;++i)s.values[t+i]-=d[i]}}}return e.blendMode=ye,e}};class Ec{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let a;i:{n:if(!(e<n)){for(let a=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(r=n,n=t[++i],e<n)break t}a=t.length;break i}if(e>=r)break e;{const s=t[1];e<s&&(i=2,r=s);for(let a=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===a)break;if(n=r,r=t[--i-1],e>=r)break t}a=i,i=0}}for(;i<a;){const n=i+a>>>1;e<t[n]?a=n:i=n+1}if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=i[r+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class wc extends Ec{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ve,endingEnd:ve}}intervalChanged_(e,t,i){const n=this.parameterPositions;let r=e-2,a=e+1,s=n[r],o=n[a];if(void 0===s)switch(this.getSettings_().endingStart){case be:r=e,s=2*t-i;break;case _e:r=n.length-2,s=t+n[r]-n[r+1];break;default:r=e,s=i}if(void 0===o)switch(this.getSettings_().endingEnd){case be:a=e,o=2*i-t;break;case _e:a=1,o=i+n[1]-n[0];break;default:a=e-1,o=t}const l=.5*(i-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(o-i),this._offsetPrev=r*c,this._offsetNext=a*c}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(i-t)/(n-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,b=(-1-d)*m+(1.5+d)*p+.5*f,_=d*m-d*p;for(let e=0;e!==s;++e)r[e]=g*a[c+e]+v*a[l+e]+b*a[o+e]+_*a[u+e];return r}}class Sc extends Ec{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=e*s,l=o-s,c=(i-t)/(n-t),u=1-c;for(let e=0;e!==s;++e)r[e]=a[l+e]*u+a[o+e]*c;return r}}class Tc extends Ec{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class xc{constructor(e,t,i,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=gc(t,this.TimeBufferType),this.values=gc(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:gc(e.times,Array),values:gc(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(i.interpolation=t)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Tc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Sc(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new wc(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case pe:t=this.InterpolantFactoryMethodDiscrete;break;case me:t=this.InterpolantFactoryMethodLinear;break;case ge:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return pe;case this.InterpolantFactoryMethodLinear:return me;case this.InterpolantFactoryMethodSmooth:return ge}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let r=0,a=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==a&&i[a]>t;)--a;if(++a,0!==r||a!==n){r>=a&&(a=Math.max(a,1),r=a-1);const e=this.getValueSize();this.times=mc(i,r,a),this.values=mc(this.values,r*e,a*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,r=i.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let t=0;t!==r;t++){const n=i[t];if("number"==typeof n&&isNaN(n)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,n),e=!1;break}if(null!==a&&a>n){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,n,a),e=!1;break}a=n}if(void 0!==n&&vc(n))for(let t=0,i=n.length;t!==i;++t){const i=n[t];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,i),e=!1;break}}return e}optimize(){const e=mc(this.times),t=mc(this.values),i=this.getValueSize(),n=this.getInterpolation()===ge,r=e.length-1;let a=1;for(let s=1;s<r;++s){let r=!1;const o=e[s];if(o!==e[s+1]&&(1!==s||o!==e[0]))if(n)r=!0;else{const e=s*i,n=e-i,a=e+i;for(let s=0;s!==i;++s){const i=t[e+s];if(i!==t[n+s]||i!==t[a+s]){r=!0;break}}}if(r){if(s!==a){e[a]=e[s];const n=s*i,r=a*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++a}}if(r>0){e[a]=e[r];for(let e=r*i,n=a*i,s=0;s!==i;++s)t[n+s]=t[e+s];++a}return a!==e.length?(this.times=mc(e,0,a),this.values=mc(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=mc(this.times,0),t=mc(this.values,0),i=new(0,this.constructor)(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}xc.prototype.TimeBufferType=Float32Array,xc.prototype.ValueBufferType=Float32Array,xc.prototype.DefaultInterpolation=me;class Mc extends xc{}Mc.prototype.ValueTypeName="bool",Mc.prototype.ValueBufferType=Array,Mc.prototype.DefaultInterpolation=pe,Mc.prototype.InterpolantFactoryMethodLinear=void 0,Mc.prototype.InterpolantFactoryMethodSmooth=void 0;class Rc extends xc{}Rc.prototype.ValueTypeName="color";class Pc extends xc{}Pc.prototype.ValueTypeName="number";class Cc extends Ec{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,o=(i-t)/(n-t);let l=e*s;for(let e=l+s;l!==e;l+=4)bt.slerpFlat(r,0,a,l-s,a,l,o);return r}}class Dc extends xc{InterpolantFactoryMethodLinear(e){return new Cc(this.times,this.values,this.getValueSize(),e)}}Dc.prototype.ValueTypeName="quaternion",Dc.prototype.DefaultInterpolation=me,Dc.prototype.InterpolantFactoryMethodSmooth=void 0;class Oc extends xc{}Oc.prototype.ValueTypeName="string",Oc.prototype.ValueBufferType=Array,Oc.prototype.DefaultInterpolation=pe,Oc.prototype.InterpolantFactoryMethodLinear=void 0,Oc.prototype.InterpolantFactoryMethodSmooth=void 0;class kc extends xc{}kc.prototype.ValueTypeName="vector";class Ic{constructor(e,t=-1,i,n=2500){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=Le(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let e=0,r=i.length;e!==r;++e)t.push(Nc(i[e]).scale(n));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,n=i.length;e!==n;++e)t.push(xc.toJSON(i[e]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const r=t.length,a=[];for(let e=0;e<r;e++){let s=[],o=[];s.push((e+r-1)%r,e,(e+1)%r),o.push(0,1,0);const l=bc(s);s=_c(s,1,l),o=_c(o,1,l),n||0!==s[0]||(s.push(r),o.push(o[0])),a.push(new Pc(".morphTargetInfluences["+t[e].name+"]",s,o).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const t=e;i=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},r=/^([\w-]*?)([\d]+)$/;for(let t=0,i=e.length;t<i;t++){const i=e[t],a=i.name.match(r);if(a&&a.length>1){const e=a[1];let t=n[e];t||(n[e]=t=[]),t.push(i)}}const a=[];for(const e in n)a.push(this.CreateFromMorphTargetSequence(e,n[e],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(e,t,i,n,r){if(0!==i.length){const a=[],s=[];yc(i,a,s,n),0!==a.length&&r.push(new e(t,a,s))}},n=[],r=e.name||"default",a=e.fps||30,s=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let e=0;e<l.length;e++){const r=l[e].keys;if(r&&0!==r.length)if(r[0].morphTargets){const e={};let t;for(t=0;t<r.length;t++)if(r[t].morphTargets)for(let i=0;i<r[t].morphTargets.length;i++)e[r[t].morphTargets[i]]=-1;for(const i in e){const e=[],a=[];for(let n=0;n!==r[t].morphTargets.length;++n){const n=r[t];e.push(n.time),a.push(n.morphTarget===i?1:0)}n.push(new Pc(".morphTargetInfluence["+i+"]",e,a))}o=e.length*a}else{const a=".bones["+t[e].name+"]";i(kc,a+".position",r,"pos",n),i(Dc,a+".quaternion",r,"rot",n),i(kc,a+".scale",r,"scl",n)}}return 0===n.length?null:new this(r,o,n,s)}resetDuration(){let e=0;for(let t=0,i=this.tracks.length;t!==i;++t){const i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Nc(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Pc;case"vector":case"vector2":case"vector3":case"vector4":return kc;case"color":return Rc;case"quaternion":return Dc;case"bool":case"boolean":return Mc;case"string":return Oc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],i=[];yc(e.keys,t,i,"value"),e.times=t,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Lc={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Uc{constructor(e,t,i){const n=this;let r,a=!1,s=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){o++,!1===a&&void 0!==n.onStart&&n.onStart(e,s,o),a=!0},this.itemEnd=function(e){s++,void 0!==n.onProgress&&n.onProgress(e,s,o),s===o&&(a=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,i=l.length;t<i;t+=2){const i=l[t],n=l[t+1];if(i.global&&(i.lastIndex=0),i.test(e))return n}return null}}}const Bc=new Uc;class Fc{constructor(e){this.manager=void 0!==e?e:Bc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise((function(n,r){i.load(e,n,t,r)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Gc={};class Vc extends Error{constructor(e,t){super(e),this.response=t}}class zc extends Fc{constructor(e){super(e)}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Lc.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout((()=>{t&&t(r),this.manager.itemEnd(e)}),0),r;if(void 0!==Gc[e])return void Gc[e].push({onLoad:t,onProgress:i,onError:n});Gc[e]=[],Gc[e].push({onLoad:t,onProgress:i,onError:n});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,o=this.responseType;fetch(a).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const i=Gc[e],n=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),a=r?parseInt(r):0,s=0!==a;let o=0;const l=new ReadableStream({start(e){!function t(){n.read().then((({done:n,value:r})=>{if(n)e.close();else{o+=r.byteLength;const n=new ProgressEvent("progress",{lengthComputable:s,loaded:o,total:a});for(let e=0,t=i.length;e<t;e++){const t=i[e];t.onProgress&&t.onProgress(n)}e.enqueue(r),t()}}))}()}});return new Response(l)}throw new Vc(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),i=t&&t[1]?t[1].toLowerCase():void 0,n=new TextDecoder(i);return e.arrayBuffer().then((e=>n.decode(e)))}}})).then((t=>{Lc.add(e,t);const i=Gc[e];delete Gc[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onLoad&&n.onLoad(t)}})).catch((t=>{const i=Gc[e];if(void 0===i)throw this.manager.itemError(e),t;delete Gc[e];for(let e=0,n=i.length;e<n;e++){const n=i[e];n.onError&&n.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Hc extends Fc{constructor(e){super(e)}load(e,t,i,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Lc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s=Je("img");function o(){c(),Lc.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){s.removeEventListener("load",o,!1),s.removeEventListener("error",l,!1)}return s.addEventListener("load",o,!1),s.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),r.manager.itemStart(e),s.src=e,s}}class jc extends yi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Fi(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class Wc extends jc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Fi(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Yc=new qt,Xc=new _t,Zc=new _t;class qc{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ye(512,512),this.map=null,this.mapPass=null,this.matrix=new qt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Wn,this._frameExtents=new Ye(1,1),this._viewportCount=1,this._viewports=[new pt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;Xc.setFromMatrixPosition(e.matrixWorld),t.position.copy(Xc),Zc.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Zc),t.updateMatrixWorld(),Yc.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Yc),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Yc)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Qc extends qc{constructor(){super(new In(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=2*Ne*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;i===t.fov&&n===t.aspect&&r===t.far||(t.fov=i,t.aspect=n,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Kc extends jc{constructor(e,t,i=0,n=Math.PI/3,r=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.distance=i,this.angle=n,this.penumbra=r,this.decay=a,this.map=null,this.shadow=new Qc}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Jc=new qt,$c=new _t,eu=new _t;class tu extends qc{constructor(){super(new In(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ye(4,2),this._viewportCount=6,this._viewports=[new pt(2,1,1,1),new pt(0,1,1,1),new pt(3,1,1,1),new pt(1,1,1,1),new pt(3,0,1,1),new pt(1,0,1,1)],this._cubeDirections=[new _t(1,0,0),new _t(-1,0,0),new _t(0,0,1),new _t(0,0,-1),new _t(0,1,0),new _t(0,-1,0)],this._cubeUps=[new _t(0,1,0),new _t(0,1,0),new _t(0,1,0),new _t(0,1,0),new _t(0,0,1),new _t(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,n=this.matrix,r=e.distance||i.far;r!==i.far&&(i.far=r,i.updateProjectionMatrix()),$c.setFromMatrixPosition(e.matrixWorld),i.position.copy($c),eu.copy(i.position),eu.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(eu),i.updateMatrixWorld(),n.makeTranslation(-$c.x,-$c.y,-$c.z),Jc.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Jc)}}class iu extends jc{constructor(e,t,i=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new tu}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class nu extends qc{constructor(){super(new ar(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class ru extends jc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yi.DEFAULT_UP),this.updateMatrix(),this.target=new yi,this.shadow=new nu}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class au extends jc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class su extends jc{constructor(e,t,i=10,n=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class ou{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new _t)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*n),t.addScaledVector(a[2],.488603*r),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],i*n*1.092548),t.addScaledVector(a[5],n*r*1.092548),t.addScaledVector(a[6],.315392*(3*r*r-1)),t.addScaledVector(a[7],i*r*1.092548),t.addScaledVector(a[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,r=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],1.023328*n),t.addScaledVector(a[2],1.023328*r),t.addScaledVector(a[3],1.023328*i),t.addScaledVector(a[4],.858086*i*n),t.addScaledVector(a[5],.858086*n*r),t.addScaledVector(a[6],.743125*r*r-.247708),t.addScaledVector(a[7],.858086*i*r),t.addScaledVector(a[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+3*n);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+3*n);return e}static getBasisAt(e,t){const i=e.x,n=e.y,r=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*r,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*i*r,t[8]=.546274*(i*i-n*n)}}class lu extends jc{constructor(e=new ou,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class cu extends Fc{constructor(e){super(e),this.textures={}}load(e,t,i,n){const r=this,a=new zc(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)}parse(e){const t=this.textures;function i(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const n=cu.createMaterialFromType(e.type);if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&void 0!==n.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=e.sheen),void 0!==e.sheenColor&&(n.sheenColor=(new Fi).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(n.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==n.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==n.specular&&n.specular.setHex(e.specular),void 0!==e.specularIntensity&&(n.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==n.specularColor&&n.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(n.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(n.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(n.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(n.transmission=e.transmission),void 0!==e.thickness&&(n.thickness=e.thickness),void 0!==e.attenuationDistance&&(n.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==n.attenuationColor&&n.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.shadowSide&&(n.shadowSide=e.shadowSide),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.alphaToCoverage&&(n.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(n.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(n.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const r=e.uniforms[t];switch(n.uniforms[t]={},r.type){case"t":n.uniforms[t].value=i(r.value);break;case"c":n.uniforms[t].value=(new Fi).setHex(r.value);break;case"v2":n.uniforms[t].value=(new Ye).fromArray(r.value);break;case"v3":n.uniforms[t].value=(new _t).fromArray(r.value);break;case"v4":n.uniforms[t].value=(new pt).fromArray(r.value);break;case"m3":n.uniforms[t].value=(new Xe).fromArray(r.value);break;case"m4":n.uniforms[t].value=(new qt).fromArray(r.value);break;default:n.uniforms[t].value=r.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(n.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)n.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(n.lights=e.lights),void 0!==e.clipping&&(n.clipping=e.clipping),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=i(e.map)),void 0!==e.matcap&&(n.matcap=i(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=i(e.alphaMap)),void 0!==e.bumpMap&&(n.bumpMap=i(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=i(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),n.normalScale=(new Ye).fromArray(t)}return void 0!==e.displacementMap&&(n.displacementMap=i(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=i(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=i(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=i(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=i(e.specularMap)),void 0!==e.specularIntensityMap&&(n.specularIntensityMap=i(e.specularIntensityMap)),void 0!==e.specularColorMap&&(n.specularColorMap=i(e.specularColorMap)),void 0!==e.envMap&&(n.envMap=i(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=i(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=i(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=i(e.gradientMap)),void 0!==e.clearcoatMap&&(n.clearcoatMap=i(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Ye).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(n.iridescenceMap=i(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(n.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(n.transmissionMap=i(e.transmissionMap)),void 0!==e.thicknessMap&&(n.thicknessMap=i(e.thicknessMap)),void 0!==e.sheenColorMap&&(n.sheenColorMap=i(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(n.sheenRoughnessMap=i(e.sheenRoughnessMap)),n}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:ac,SpriteMaterial:Ds,RawShaderMaterial:sc,ShaderMaterial:On,PointsMaterial:Po,MeshPhysicalMaterial:lc,MeshStandardMaterial:oc,MeshPhongMaterial:cc,MeshToonMaterial:uc,MeshNormalMaterial:hc,MeshLambertMaterial:dc,MeshDepthMaterial:ls,MeshDistanceMaterial:cs,MeshBasicMaterial:Vi,MeshMatcapMaterial:fc,LineDashedMaterial:pc,LineBasicMaterial:bo,Material:Ii}[e]}}class uu{static decodeText(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class hu extends on{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class du extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=new zc(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.setWithCredentials(r.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)}parse(e){const t={},i={};function n(e,n){if(void 0!==t[n])return t[n];const r=e.interleavedBuffers[n],a=function(e,t){if(void 0!==i[t])return i[t];const n=e.arrayBuffers[t],r=new Uint32Array(n).buffer;return i[t]=r,r}(e,r.buffer),s=Ke(r.type,a),o=new Rs(s,r.stride);return o.uuid=r.uuid,t[n]=o,o}const r=e.isInstancedBufferGeometry?new hu:new on,a=e.data.index;if(void 0!==a){const e=Ke(a.type,a.array);r.setIndex(new qi(e,1))}const s=e.data.attributes;for(const t in s){const i=s[t];let a;if(i.isInterleavedBufferAttribute){const t=n(e.data,i.data);a=new Cs(t,i.itemSize,i.offset,i.normalized)}else{const e=Ke(i.type,i.array);a=new(i.isInstancedBufferAttribute?lo:qi)(e,i.itemSize,i.normalized)}void 0!==i.name&&(a.name=i.name),void 0!==i.usage&&a.setUsage(i.usage),void 0!==i.updateRange&&(a.updateRange.offset=i.updateRange.offset,a.updateRange.count=i.updateRange.count),r.setAttribute(t,a)}const o=e.data.morphAttributes;if(o)for(const t in o){const i=o[t],a=[];for(let t=0,r=i.length;t<r;t++){const r=i[t];let s;if(r.isInterleavedBufferAttribute){const t=n(e.data,r.data);s=new Cs(t,r.itemSize,r.offset,r.normalized)}else{const e=Ke(r.type,r.array);s=new qi(e,r.itemSize,r.normalized)}void 0!==r.name&&(s.name=r.name),a.push(s)}r.morphAttributes[t]=a}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let e=0,t=l.length;e!==t;++e){const t=l[e];r.addGroup(t.start,t.count,t.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new _t;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new Gt(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}const fu={UVMapping:g,CubeReflectionMapping:v,CubeRefractionMapping:b,EquirectangularReflectionMapping:_,EquirectangularRefractionMapping:y,CubeUVReflectionMapping:A},pu={RepeatWrapping:E,ClampToEdgeWrapping:w,MirroredRepeatWrapping:S},mu={NearestFilter:T,NearestMipmapNearestFilter:x,NearestMipmapLinearFilter:M,LinearFilter:R,LinearMipmapNearestFilter:P,LinearMipmapLinearFilter:C};let gu;class vu{static getContext(){return void 0===gu&&(gu=new(window.AudioContext||window.webkitAudioContext)),gu}static setContext(e){gu=e}}const bu=new qt,_u=new qt,yu=new qt;class Au{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Eu(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Eu();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Eu(){return("undefined"==typeof performance?Date:performance).now()}const wu=new _t,Su=new bt,Tu=new _t,xu=new _t;class Mu extends yi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ru=new _t,Pu=new bt,Cu=new _t,Du=new _t;class Ou{constructor(e,t,i){let n,r,a;switch(this.binding=e,this.valueSize=i,t){case"quaternion":n=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*i),this._workIndex=5;break;case"string":case"bool":n=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*i);break;default:n=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*i)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,r=e*n+n;let a=this.cumulativeWeight;if(0===a){for(let e=0;e!==n;++e)i[r+e]=i[e];a=t}else{a+=t;const e=t/a;this._mixBufferRegion(i,r,0,e,n)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,s=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(i,n,e,1-r,t)}a>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let e=t,r=t+t;e!==r;++e)if(i[e]!==i[e+t]){s.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let e=i,r=n;e!==r;++e)t[e]=t[n+e%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,r){if(n>=.5)for(let n=0;n!==r;++n)e[t+n]=e[i+n]}_slerp(e,t,i,n){bt.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,r){const a=this._workIndex*r;bt.multiplyQuaternionsFlat(e,a,e,t,e,i),bt.slerpFlat(e,t,e,t,e,a,n)}_lerp(e,t,i,n,r){const a=1-n;for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]*a+e[i+s]*n}}_lerpAdditive(e,t,i,n,r){for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]+e[i+a]*n}}}const ku="\\[\\]\\.:\\/",Iu=new RegExp("["+ku+"]","g"),Nu="[^"+ku+"]",Lu="[^"+ku.replace("\\.","")+"]",Uu=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Nu)+/(WCOD+)?/.source.replace("WCOD",Lu)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Nu)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Nu)+"$"),Bu=["material","materials","bones","map"];class Fu{constructor(e,t,i){this.path=t,this.parsedPath=i||Fu.parseTrackName(t),this.node=Fu.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Fu.Composite(e,t,i):new Fu(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Iu,"")}static parseTrackName(e){const t=Uu.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){const e=i.nodeName.substring(n+1);-1!==Bu.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){const i=function(e){for(let n=0;n<e.length;n++){const r=e[n];if(r.name===t||r.uuid===t)return r;const a=i(r.children);if(a)return a}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let r=t.propertyIndex;if(e||(e=Fu.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}const a=e[n];if(void 0===a){const i=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=r}else void 0!==a.fromArray&&void 0!==a.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(o=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Fu.Composite=class{constructor(e,t,i){const n=i||Fu.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},Fu.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Fu.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Fu.prototype.GetterByBindingType=[Fu.prototype._getValue_direct,Fu.prototype._getValue_array,Fu.prototype._getValue_arrayElement,Fu.prototype._getValue_toArray],Fu.prototype.SetterByBindingTypeAndVersioning=[[Fu.prototype._setValue_direct,Fu.prototype._setValue_direct_setNeedsUpdate,Fu.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Fu.prototype._setValue_array,Fu.prototype._setValue_array_setNeedsUpdate,Fu.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Fu.prototype._setValue_arrayElement,Fu.prototype._setValue_arrayElement_setNeedsUpdate,Fu.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Fu.prototype._setValue_fromArray,Fu.prototype._setValue_fromArray_setNeedsUpdate,Fu.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Gu{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const r=t.tracks,a=r.length,s=new Array(a),o={endingStart:ve,endingEnd:ve};for(let e=0;e!==a;++e){const t=r[e].createInterpolant(null);s[e]=t,t.settings=o}this._interpolantSettings=o,this._interpolants=s,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const i=this._clip.duration,n=e._clip.duration,r=n/i,a=i/n;e.warp(1,r,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,r=n.time,a=this.timeScale;let s=this._timeScaleInterpolant;null===s&&(s=n._lendControlInterpolant(),this._timeScaleInterpolant=s);const o=s.parameterPositions,l=s.sampleValues;return o[0]=r,o[1]=r+i,l[0]=e/a,l[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const n=(e-r)*i;n<0||0===i?t=0:(this._startTime=null,t=i*n)}t*=this._updateTimeScale(e);const a=this._updateTime(t),s=this._updateWeight(e);if(s>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===ye)for(let i=0,n=e.length;i!==n;++i)e[i].evaluate(a),t[i].accumulateAdditive(s);else for(let i=0,r=e.length;i!==r;++i)e[i].evaluate(a),t[i].accumulate(n,s)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(null!==i){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;null!==i&&(t*=i.evaluate(e)[0],e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,r=this._loopCount;const a=2202===i;if(0===e)return-1===r?n:a&&1==(1&r)?t-n:n;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else{if(!(n<0)){this.time=n;break e}n=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),n>=t||n<0){const i=Math.floor(n/t);n-=t*i,r+=Math.abs(i);const s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){const t=e<0;this._setEndings(t,!t,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:i})}}else this.time=n;if(a&&1==(1&r))return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=be,n.endingEnd=be):(n.endingStart=e?this.zeroSlopeAtStart?be:ve:_e,n.endingEnd=t?this.zeroSlopeAtEnd?be:ve:_e)}_scheduleFading(e,t,i){const n=this._mixer,r=n.time;let a=this._weightInterpolant;null===a&&(a=n._lendControlInterpolant(),this._weightInterpolant=a);const s=a.parameterPositions,o=a.sampleValues;return s[0]=r,o[0]=t,s[1]=r+e,o[1]=i,this}}const Vu=new Float32Array(1);class zu{constructor(e){this.value=e}clone(){return new zu(void 0===this.value.clone?this.value:this.value.clone())}}let Hu=0;function ju(e,t){return e.distance-t.distance}function Wu(e,t,i,n){if(e.layers.test(t.layers)&&e.raycast(t,i),!0===n){const n=e.children;for(let e=0,r=n.length;e<r;e++)Wu(n[e],t,i,!0)}}const Yu=new Ye,Xu=new _t,Zu=new _t,qu=new _t,Qu=new _t,Ku=new qt,Ju=new qt;function $u(e){const t=[];!0===e.isBone&&t.push(e);for(let i=0;i<e.children.length;i++)t.push.apply(t,$u(e.children[i]));return t}const eh=new _t,th=new Fi,ih=new Fi,nh=new _t,rh=new _t,ah=new _t,sh=new _t,oh=new kn;function lh(e,t,i,n,r,a,s){sh.set(r,a,s).unproject(n);const o=t[e];if(void 0!==o){const e=i.getAttribute("position");for(let t=0,i=o.length;t<i;t++)e.setXYZ(o[t],sh.x,sh.y,sh.z)}}const ch=new Et,uh=new _t;let hh,dh;"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i),t.ACESFilmicToneMapping=p,t.AddEquation=s,t.AddOperation=c,t.AdditiveAnimationBlendMode=ye,t.AdditiveBlending=2,t.AlphaFormat=1021,t.AlwaysDepth=1,t.AlwaysStencilFunc=519,t.AmbientLight=au,t.AmbientLightProbe=class extends lu{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=(new Fi).set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}},t.AnimationAction=Gu,t.AnimationClip=Ic,t.AnimationLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=new zc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(i){try{t(r.parse(JSON.parse(i)))}catch(t){n?n(t):console.error(t),r.manager.itemError(e)}}),i,n)}parse(e){const t=[];for(let i=0;i<e.length;i++){const n=Ic.parse(e[i]);t.push(n)}return t}},t.AnimationMixer=class extends De{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,a=e._propertyBindings,s=e._interpolants,o=i.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let e=0;e!==r;++e){const r=n[e],l=r.name;let u=c[l];if(void 0!==u)++u.referenceCount,a[e]=u;else{if(u=a[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,o,l));continue}const n=t&&t._propertyBindings[e].binding.parsedPath;u=new Ou(Fu.create(i,l,n),r.ValueTypeName,r.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,o,l),a[e]=u}s[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==i.useCount++&&(this._lendBinding(i),i.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,r=this._actionsByClip;let a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{const t=a.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=n.length,n.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,a=this._actionsByClip,s=a[r],o=s.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null,delete s.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete a[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,i=t.length;e!==i;++e){const i=t[e];0==--i.referenceCount&&this._removeInactiveBinding(i)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,r=this._bindings;let a=n[t];void 0===a&&(a={},n[t]=a),a[i]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,r=i.path,a=this._bindingsByRootAndName,s=a[n],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete s[r],0===Object.keys(s).length&&delete a[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return void 0===i&&(i=new Sc(new Float32Array(2),new Float32Array(2),1,Vu),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r}clipAction(e,t,i){const n=t||this._root,r=n.uuid;let a="string"==typeof e?Ic.findByName(n,e):e;const s=null!==a?a.uuid:e,o=this._actionsByClip[s];let l=null;if(void 0===i&&(i=null!==a?a.blendMode:2500),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===i)return e;l=o.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;const c=new Gu(this,a,t,i);return this._bindAction(c,l),this._addInactiveAction(c,s,r),c}existingAction(e,t){const i=t||this._root,n=i.uuid,r="string"==typeof e?Ic.findByName(i,e):e,a=r?r.uuid:e,s=this._actionsByClip[a];return void 0!==s&&s.actionByRoot[n]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1;for(let s=0;s!==i;++s)t[s]._update(n,e,r,a);const s=this._bindings,o=this._nActiveBindings;for(let e=0;e!==o;++e)s[e].apply(a);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,r=n[i];if(void 0!==r){const e=r.knownActions;for(let i=0,n=e.length;i!==n;++i){const n=e[i];this._deactivateAction(n);const r=n._cacheIndex,a=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,a._cacheIndex=r,t[r]=a,t.pop(),this._removeInactiveBindingsForAction(n)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const e in i){const n=i[e].actionByRoot[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}const n=this._bindingsByRootAndName[t];if(void 0!==n)for(const e in n){const t=n[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const i=this.existingAction(e,t);null!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}},t.AnimationObjectGroup=class{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Le(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,r=this._bindings,a=r.length;let s,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=a;e!==t;++e)r[e].push(new Fu(u,i[e],n[e]))}else if(d<l){s=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=a;e!==t;++e){const t=r[e],a=t[o];let s=t[d];t[d]=a,void 0===s&&(s=new Fu(u,i[e],n[e])),t[o]=s}}else e[d]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],o=s.uuid,l=t[o];if(void 0!==l&&l>=r){const a=r++,c=e[a];t[c.uuid]=l,e[l]=c,t[o]=a,e[a]=s;for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[a],r=t[l];t[l]=n,t[a]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let r=this.nCachedObjects_,a=e.length;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const s=--r,o=e[s],c=--a,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=s,e[s]=u,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e],n=t[s],r=t[c];t[l]=n,t[s]=r,t.pop()}}else{const r=--a,s=e[r];r>0&&(t[s.uuid]=l),e[l]=s,e.pop();for(let e=0,t=n;e!==t;++e){const t=i[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const r=this._bindings;if(void 0!==n)return r[n];const a=this._paths,s=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);n=r.length,i[e]=n,a.push(e),s.push(t),r.push(u);for(let i=c,n=o.length;i!==n;++i){const n=o[i];u[i]=new Fu(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){const n=this._paths,r=this._parsedPaths,a=this._bindings,s=a.length-1,o=a[s];t[e[s]]=i,a[i]=o,a.pop(),r[i]=r[s],r.pop(),n[i]=n[s],n.pop()}}},t.AnimationUtils=Ac,t.ArcCurve=Fo,t.ArrayCamera=ps,t.ArrowHelper=class extends yi{constructor(e=new _t(0,0,1),t=new _t(0,0,0),i=1,n=16776960,r=.2*i,a=.2*r){super(),this.type="ArrowHelper",void 0===hh&&(hh=new on,hh.setAttribute("position",new Ji([0,0,0,0,1,0],3)),dh=new ll(0,.5,1,5,1),dh.translate(0,-.5,0)),this.position.copy(t),this.line=new So(hh,new bo({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Tn(dh,new Vi({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{uh.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(uh,t)}}setLength(e,t=.2*e,i=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}},t.Audio=Mu,t.AudioAnalyser=class{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}},t.AudioContext=vu,t.AudioListener=class extends yi{constructor(){super(),this.type="AudioListener",this.context=vu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Au}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(wu,Su,Tu),xu.set(0,0,-1).applyQuaternion(Su),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(wu.x,e),t.positionY.linearRampToValueAtTime(wu.y,e),t.positionZ.linearRampToValueAtTime(wu.z,e),t.forwardX.linearRampToValueAtTime(xu.x,e),t.forwardY.linearRampToValueAtTime(xu.y,e),t.forwardZ.linearRampToValueAtTime(xu.z,e),t.upX.linearRampToValueAtTime(i.x,e),t.upY.linearRampToValueAtTime(i.y,e),t.upZ.linearRampToValueAtTime(i.z,e)}else t.setPosition(wu.x,wu.y,wu.z),t.setOrientation(xu.x,xu.y,xu.z,i.x,i.y,i.z)}},t.AudioLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=new zc(this.manager);function s(t){n?n(t):console.error(t),r.manager.itemError(e)}a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(e){try{const i=e.slice(0);vu.getContext().decodeAudioData(i,(function(e){t(e)}),s)}catch(e){s(e)}}),i,n)}},t.AxesHelper=class extends Mo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=new on;i.setAttribute("position",new Ji(t,3)),i.setAttribute("color",new Ji([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),super(i,new bo({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,i){const n=new Fi,r=this.geometry.attributes.color.array;return n.set(e),n.toArray(r,0),n.toArray(r,3),n.set(t),n.toArray(r,6),n.toArray(r,9),n.set(i),n.toArray(r,12),n.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BackSide=1,t.BasicDepthPacking=3200,t.BasicShadowMap=0,t.Bone=no,t.BooleanKeyframeTrack=Mc,t.Box2=class{constructor(e=new Ye(1/0,1/0),t=new Ye(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Yu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Yu).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},t.Box3=Et,t.Box3Helper=class extends Mo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new on;n.setIndex(new qi(i,1)),n.setAttribute("position",new Ji([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(n,new bo({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BoxBufferGeometry=class extends Mn{constructor(e,t,i,n,r,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,n,r,a)}},t.BoxGeometry=Mn,t.BoxHelper=class extends Mo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),r=new on;r.setIndex(new qi(i,1)),r.setAttribute("position",new qi(n,3)),super(r,new bo({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ch.setFromObject(this.object),ch.isEmpty())return;const t=ch.min,i=ch.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}},t.BufferAttribute=qi,t.BufferGeometry=on,t.BufferGeometryLoader=du,t.ByteType=1010,t.Cache=Lc,t.Camera=kn,t.CameraHelper=class extends Mo{constructor(e){const t=new on,i=new bo({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],r=[],a={};function s(e,t){o(e),o(t)}function o(e){n.push(0,0,0),r.push(0,0,0),void 0===a[e]&&(a[e]=[]),a[e].push(n.length/3-1)}s("n1","n2"),s("n2","n4"),s("n4","n3"),s("n3","n1"),s("f1","f2"),s("f2","f4"),s("f4","f3"),s("f3","f1"),s("n1","f1"),s("n2","f2"),s("n3","f3"),s("n4","f4"),s("p","n1"),s("p","n2"),s("p","n3"),s("p","n4"),s("u1","u2"),s("u2","u3"),s("u3","u1"),s("c","t"),s("p","c"),s("cn1","cn2"),s("cn3","cn4"),s("cf1","cf2"),s("cf3","cf4"),t.setAttribute("position",new Ji(n,3)),t.setAttribute("color",new Ji(r,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const l=new Fi(16755200),c=new Fi(16711680),u=new Fi(43775),h=new Fi(16777215),d=new Fi(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,i,n,r){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,n.r,n.g,n.b),a.setXYZ(39,n.r,n.g,n.b),a.setXYZ(40,r.r,r.g,r.b),a.setXYZ(41,r.r,r.g,r.b),a.setXYZ(42,r.r,r.g,r.b),a.setXYZ(43,r.r,r.g,r.b),a.setXYZ(44,r.r,r.g,r.b),a.setXYZ(45,r.r,r.g,r.b),a.setXYZ(46,r.r,r.g,r.b),a.setXYZ(47,r.r,r.g,r.b),a.setXYZ(48,r.r,r.g,r.b),a.setXYZ(49,r.r,r.g,r.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;oh.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),lh("c",t,e,oh,0,0,-1),lh("t",t,e,oh,0,0,1),lh("n1",t,e,oh,-1,-1,-1),lh("n2",t,e,oh,1,-1,-1),lh("n3",t,e,oh,-1,1,-1),lh("n4",t,e,oh,1,1,-1),lh("f1",t,e,oh,-1,-1,1),lh("f2",t,e,oh,1,-1,1),lh("f3",t,e,oh,-1,1,1),lh("f4",t,e,oh,1,1,1),lh("u1",t,e,oh,.7,1.1,-1),lh("u2",t,e,oh,-.7,1.1,-1),lh("u3",t,e,oh,0,2,-1),lh("cf1",t,e,oh,-1,0,1),lh("cf2",t,e,oh,1,0,1),lh("cf3",t,e,oh,0,-1,1),lh("cf4",t,e,oh,0,1,1),lh("cn1",t,e,oh,-1,0,-1),lh("cn2",t,e,oh,1,0,-1),lh("cn3",t,e,oh,0,-1,-1),lh("cn4",t,e,oh,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}},t.CanvasTexture=class extends ft{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,r,a,s,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},t.CapsuleBufferGeometry=class extends sl{constructor(e,t,i,n){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,n)}},t.CapsuleGeometry=sl,t.CatmullRomCurve3=Wo,t.CineonToneMapping=f,t.CircleBufferGeometry=class extends ol{constructor(e,t,i,n){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,n)}},t.CircleGeometry=ol,t.ClampToEdgeWrapping=w,t.Clock=Au,t.Color=Fi,t.ColorKeyframeTrack=Rc,t.ColorManagement=ot,t.CompressedArrayTexture=class extends Lo{constructor(e,t,i,n,r,a){super(e,t,i,r,a),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=w}},t.CompressedTexture=Lo,t.CompressedTextureLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=[],s=new Lo,o=new zc(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],(function(e){const i=r.parse(e,!0);a[c]={width:i.width,height:i.height,format:i.format,mipmaps:i.mipmaps},l+=1,6===l&&(1===i.mipmapCount&&(s.minFilter=R),s.image=a,s.format=i.format,s.needsUpdate=!0,t&&t(s))}),i,n)}if(Array.isArray(e))for(let t=0,i=e.length;t<i;++t)c(t);else o.load(e,(function(e){const i=r.parse(e,!0);if(i.isCubemap){const e=i.mipmaps.length/i.mipmapCount;for(let t=0;t<e;t++){a[t]={mipmaps:[]};for(let e=0;e<i.mipmapCount;e++)a[t].mipmaps.push(i.mipmaps[t*i.mipmapCount+e]),a[t].format=i.format,a[t].width=i.width,a[t].height=i.height}s.image=a}else s.image.width=i.width,s.image.height=i.height,s.mipmaps=i.mipmaps;1===i.mipmapCount&&(s.minFilter=R),s.format=i.format,s.needsUpdate=!0,t&&t(s)}),i,n);return s}},t.ConeBufferGeometry=class extends cl{constructor(e,t,i,n,r,a,s){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,n,r,a,s)}},t.ConeGeometry=cl,t.CubeCamera=Ln,t.CubeReflectionMapping=v,t.CubeRefractionMapping=b,t.CubeTexture=Un,t.CubeTextureLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=new Un,a=new Hc(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let s=0;function o(i){a.load(e[i],(function(e){r.images[i]=e,s++,6===s&&(r.needsUpdate=!0,t&&t(r))}),void 0,n)}for(let t=0;t<e.length;++t)o(t);return r}},t.CubeUVReflectionMapping=A,t.CubicBezierCurve=qo,t.CubicBezierCurve3=Qo,t.CubicInterpolant=wc,t.CullFaceBack=1,t.CullFaceFront=2,t.CullFaceFrontBack=3,t.CullFaceNone=0,t.Curve=Uo,t.CurvePath=nl,t.CustomBlending=5,t.CustomToneMapping=m,t.CylinderBufferGeometry=class extends ll{constructor(e,t,i,n,r,a,s,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,n,r,a,s,o)}},t.CylinderGeometry=ll,t.Cylindrical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return(new this.constructor).copy(this)}},t.Data3DTexture=vt,t.DataArrayTexture=gt,t.DataTexture=ro,t.DataTextureLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=new ro,s=new zc(this.manager);return s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setPath(this.path),s.setWithCredentials(r.withCredentials),s.load(e,(function(e){const i=r.parse(e);i&&(void 0!==i.image?a.image=i.image:void 0!==i.data&&(a.image.width=i.width,a.image.height=i.height,a.image.data=i.data),a.wrapS=void 0!==i.wrapS?i.wrapS:w,a.wrapT=void 0!==i.wrapT?i.wrapT:w,a.magFilter=void 0!==i.magFilter?i.magFilter:R,a.minFilter=void 0!==i.minFilter?i.minFilter:R,a.anisotropy=void 0!==i.anisotropy?i.anisotropy:1,void 0!==i.colorSpace?a.colorSpace=i.colorSpace:void 0!==i.encoding&&(a.encoding=i.encoding),void 0!==i.flipY&&(a.flipY=i.flipY),void 0!==i.format&&(a.format=i.format),void 0!==i.type&&(a.type=i.type),void 0!==i.mipmaps&&(a.mipmaps=i.mipmaps,a.minFilter=C),1===i.mipmapCount&&(a.minFilter=R),void 0!==i.generateMipmaps&&(a.generateMipmaps=i.generateMipmaps),a.needsUpdate=!0,t&&t(a,i))}),i,n),a}},t.DataUtils=Yi,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Bc,t.DepthFormat=B,t.DepthStencilFormat=F,t.DepthTexture=bs,t.DirectionalLight=ru,t.DirectionalLightHelper=class extends yi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",void 0===t&&(t=1);let n=new on;n.setAttribute("position",new Ji([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new bo({fog:!1,toneMapped:!1});this.lightPlane=new So(n,r),this.add(this.lightPlane),n=new on,n.setAttribute("position",new Ji([0,0,0,0,0,1],3)),this.targetLine=new So(n,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nh.setFromMatrixPosition(this.light.matrixWorld),rh.setFromMatrixPosition(this.light.target.matrixWorld),ah.subVectors(rh,nh),this.lightPlane.lookAt(rh),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rh),this.targetLine.scale.z=ah.length()}},t.DiscreteInterpolant=Tc,t.DisplayP3ColorSpace=xe,t.DodecahedronBufferGeometry=class extends hl{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}},t.DodecahedronGeometry=hl,t.DoubleSide=2,t.DstAlphaFactor=206,t.DstColorFactor=208,t.DynamicCopyUsage=35050,t.DynamicDrawUsage=35048,t.DynamicReadUsage=35049,t.EdgesGeometry=gl,t.EllipseCurve=Bo,t.EqualDepth=4,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=_,t.EquirectangularRefractionMapping=y,t.Euler=ai,t.EventDispatcher=De,t.ExtrudeBufferGeometry=class extends Wl{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}},t.ExtrudeGeometry=Wl,t.FileLoader=zc,t.Float16BufferAttribute=class extends qi{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Wi(this.array[e*this.itemSize]);return this.normalized&&(t=He(t,this.array)),t}setX(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize]=ji(t),this}getY(e){let t=Wi(this.array[e*this.itemSize+1]);return this.normalized&&(t=He(t,this.array)),t}setY(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+1]=ji(t),this}getZ(e){let t=Wi(this.array[e*this.itemSize+2]);return this.normalized&&(t=He(t,this.array)),t}setZ(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+2]=ji(t),this}getW(e){let t=Wi(this.array[e*this.itemSize+3]);return this.normalized&&(t=He(t,this.array)),t}setW(e,t){return this.normalized&&(t=je(t,this.array)),this.array[e*this.itemSize+3]=ji(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this.array[e+2]=ji(n),this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=je(t,this.array),i=je(i,this.array),n=je(n,this.array),r=je(r,this.array)),this.array[e+0]=ji(t),this.array[e+1]=ji(i),this.array[e+2]=ji(n),this.array[e+3]=ji(r),this}},t.Float32BufferAttribute=Ji,t.Float64BufferAttribute=class extends qi{constructor(e,t,i){super(new Float64Array(e),t,i)}},t.FloatType=I,t.Fog=xs,t.FogExp2=Ts,t.FramebufferTexture=class extends ft{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=T,this.minFilter=T,this.generateMipmaps=!1,this.needsUpdate=!0}},t.FrontSide=0,t.Frustum=Wn,t.GLBufferAttribute=class{constructor(e,t,i,n,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}},t.GLSL1="100",t.GLSL3=Pe,t.GreaterDepth=6,t.GreaterEqualDepth=5,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=class extends Mo{constructor(e=10,t=10,i=4473924,n=8947848){i=new Fi(i),n=new Fi(n);const r=t/2,a=e/t,s=e/2,o=[],l=[];for(let e=0,c=0,u=-s;e<=t;e++,u+=a){o.push(-s,0,u,s,0,u),o.push(u,0,-s,u,0,s);const t=e===r?i:n;t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3,t.toArray(l,c),c+=3}const c=new on;c.setAttribute("position",new Ji(o,3)),c.setAttribute("color",new Ji(l,3)),super(c,new bo({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},t.Group=ms,t.HalfFloatType=N,t.HemisphereLight=Wc,t.HemisphereLightHelper=class extends yi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const n=new Zl(t);n.rotateY(.5*Math.PI),this.material=new Vi({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.setAttribute("color",new qi(a,3)),this.add(new Tn(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");th.copy(this.light.color),ih.copy(this.light.groundColor);for(let e=0,i=t.count;e<i;e++){const n=e<i/2?th:ih;t.setXYZ(e,n.r,n.g,n.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eh.setFromMatrixPosition(this.light.matrixWorld).negate())}},t.HemisphereLightProbe=class extends lu{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const n=(new Fi).set(e),r=(new Fi).set(t),a=new _t(n.r,n.g,n.b),s=new _t(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(s).multiplyScalar(o),this.sh.coefficients[1].copy(a).sub(s).multiplyScalar(l)}},t.IcosahedronBufferGeometry=class extends Xl{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}},t.IcosahedronGeometry=Xl,t.ImageBitmapLoader=class extends Fc{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,a=Lc.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout((function(){t&&t(a),r.manager.itemEnd(e)}),0),a;const s={};s.credentials="anonymous"===this.crossOrigin?"same-origin":"include",s.headers=this.requestHeader,fetch(e,s).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))})).then((function(i){Lc.add(e,i),t&&t(i),r.manager.itemEnd(e)})).catch((function(t){n&&n(t),r.manager.itemError(e),r.manager.itemEnd(e)})),r.manager.itemStart(e)}},t.ImageLoader=Hc,t.ImageUtils=ct,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=lo,t.InstancedBufferGeometry=hu,t.InstancedInterleavedBuffer=class extends Rs{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}},t.InstancedMesh=vo,t.Int16BufferAttribute=class extends qi{constructor(e,t,i){super(new Int16Array(e),t,i)}},t.Int32BufferAttribute=class extends qi{constructor(e,t,i){super(new Int32Array(e),t,i)}},t.Int8BufferAttribute=class extends qi{constructor(e,t,i){super(new Int8Array(e),t,i)}},t.IntType=1013,t.InterleavedBuffer=Rs,t.InterleavedBufferAttribute=Cs,t.Interpolant=Ec,t.InterpolateDiscrete=pe,t.InterpolateLinear=me,t.InterpolateSmooth=ge,t.InvertStencilOp=5386,t.KeepStencilOp=Me,t.KeyframeTrack=xc,t.LOD=qs,t.LatheBufferGeometry=class extends al{constructor(e,t,i,n){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,n)}},t.LatheGeometry=al,t.Layers=si,t.LessDepth=2,t.LessEqualDepth=3,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=jc,t.LightProbe=lu,t.Line=So,t.Line3=class{constructor(e=new _t,t=new _t){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Xu.subVectors(e,this.start),Zu.subVectors(this.end,this.start);const i=Zu.dot(Zu);let n=Zu.dot(Xu)/i;return t&&(n=Ue(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}},t.LineBasicMaterial=bo,t.LineCurve=Ko,t.LineCurve3=Jo,t.LineDashedMaterial=pc,t.LineLoop=Ro,t.LineSegments=Mo,t.LinearEncoding=Ae,t.LinearFilter=R,t.LinearInterpolant=Sc,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=C,t.LinearMipmapNearestFilter=P,t.LinearSRGBColorSpace=Te,t.LinearToneMapping=h,t.Loader=Fc,t.LoaderUtils=uu,t.LoadingManager=Uc,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=2201,t.LuminanceAlphaFormat=1025,t.LuminanceFormat=1024,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=Ii,t.MaterialLoader=cu,t.MathUtils=We,t.Matrix3=Xe,t.Matrix4=qt,t.MaxEquation=104,t.Mesh=Tn,t.MeshBasicMaterial=Vi,t.MeshDepthMaterial=ls,t.MeshDistanceMaterial=cs,t.MeshLambertMaterial=dc,t.MeshMatcapMaterial=fc,t.MeshNormalMaterial=hc,t.MeshPhongMaterial=cc,t.MeshPhysicalMaterial=lc,t.MeshStandardMaterial=oc,t.MeshToonMaterial=uc,t.MinEquation=103,t.MirroredRepeatWrapping=S,t.MixOperation=l,t.MultiplyBlending=4,t.MultiplyOperation=o,t.NearestFilter=T,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=M,t.NearestMipmapNearestFilter=x,t.NeverDepth=0,t.NeverStencilFunc=512,t.NoBlending=0,t.NoColorSpace=we,t.NoToneMapping=u,t.NormalAnimationBlendMode=2500,t.NormalBlending=1,t.NotEqualDepth=7,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Pc,t.Object3D=yi,t.ObjectLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=this,a=""===this.path?uu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const s=new zc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(i){let a=null;try{a=JSON.parse(i)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())return void 0!==n&&n(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(a,t)}),i,n)}async loadAsync(e,t){const i=""===this.path?uu.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const n=new zc(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const r=await n.loadAsync(e,t),a=JSON.parse(r),s=a.metadata;if(void 0===s||void 0===s.type||"geometry"===s.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),a=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),s=this.parseTextures(e.textures,a),o=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,r,o,s,i),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in a)if(a[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),r=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,r),s=this.parseMaterials(e.materials,a),o=this.parseObject(e.object,n,s,a,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let i=0,n=e.length;i<n;i++){const n=(new vl).fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse((function(e){e.isBone&&(n[e.uuid]=e)})),void 0!==e)for(let t=0,r=e.length;t<r;t++){const r=(new oo).fromJSON(e[t],n);i[r.uuid]=r}return i}parseGeometries(e,t){const i={};if(void 0!==e){const n=new du;for(let r=0,a=e.length;r<a;r++){let a;const s=e[r];switch(s.type){case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(s);break;default:s.type in rc?a=rc[s.type].fromJSON(s,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${s.type}"`)}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.userData&&(a.userData=s.userData),i[s.uuid]=a}}return i}parseMaterials(e,t){const i={},n={};if(void 0!==e){const r=new cu;r.setTextures(t);for(let t=0,a=e.length;t<a;t++){const a=e[t];void 0===i[a.uuid]&&(i[a.uuid]=r.parse(a)),n[a.uuid]=i[a.uuid]}}return n}parseAnimations(e){const t={};if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i],r=Ic.parse(n);t[r.uuid]=r}return t}parseImages(e,t){const i=this,n={};let r;function a(e){if("string"==typeof e){const t=e;return function(e){return i.manager.itemStart(e),r.load(e,(function(){i.manager.itemEnd(e)}),void 0,(function(){i.manager.itemError(e),i.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:i.resourcePath+t)}return e.data?{data:Ke(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const i=new Uc(t);r=new Hc(i),r.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],r=i.url;if(Array.isArray(r)){const e=[];for(let t=0,i=r.length;t<i;t++){const i=a(r[t]);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new ro(i.data,i.width,i.height)))}n[i.uuid]=new ut(e)}else{const e=a(i.url);n[i.uuid]=new ut(e)}}}return n}async parseImagesAsync(e){const t=this,i={};let n;async function r(e){if("string"==typeof e){const i=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(i)?i:t.resourcePath+i;return await n.loadAsync(r)}return e.data?{data:Ke(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){n=new Hc(this.manager),n.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],a=n.url;if(Array.isArray(a)){const e=[];for(let t=0,i=a.length;t<i;t++){const i=a[t],n=await r(i);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new ro(n.data,n.width,n.height)))}i[n.uuid]=new ut(e)}else{const e=await r(n.url);i[n.uuid]=new ut(e)}}}return i}parseTextures(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const n={};if(void 0!==e)for(let r=0,a=e.length;r<a;r++){const a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const s=t[a.image],o=s.data;let l;Array.isArray(o)?(l=new Un,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new ro:new ft,o&&(l.needsUpdate=!0)),l.source=s,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=i(a.mapping,fu)),void 0!==a.channel&&(l.channel=a.channel),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=i(a.wrap[0],pu),l.wrapT=i(a.wrap[1],pu)),void 0!==a.format&&(l.format=a.format),void 0!==a.internalFormat&&(l.internalFormat=a.internalFormat),void 0!==a.type&&(l.type=a.type),void 0!==a.colorSpace&&(l.colorSpace=a.colorSpace),void 0!==a.encoding&&(l.encoding=a.encoding),void 0!==a.minFilter&&(l.minFilter=i(a.minFilter,mu)),void 0!==a.magFilter&&(l.magFilter=i(a.magFilter,mu)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),void 0!==a.generateMipmaps&&(l.generateMipmaps=a.generateMipmaps),void 0!==a.premultiplyAlpha&&(l.premultiplyAlpha=a.premultiplyAlpha),void 0!==a.unpackAlignment&&(l.unpackAlignment=a.unpackAlignment),void 0!==a.userData&&(l.userData=a.userData),n[a.uuid]=l}return n}parseObject(e,t,i,n,r){let a,s,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];void 0===i[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(i[r])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}function u(e){return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),n[e]}switch(e.type){case"Scene":a=new Ms,void 0!==e.background&&(Number.isInteger(e.background)?a.background=new Fi(e.background):a.background=u(e.background)),void 0!==e.environment&&(a.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?a.fog=new xs(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(a.fog=new Ts(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(a.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new In(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(a.focus=e.focus),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.filmGauge&&(a.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(a.filmOffset=e.filmOffset),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ar(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(a.zoom=e.zoom),void 0!==e.view&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new au(e.color,e.intensity);break;case"DirectionalLight":a=new ru(e.color,e.intensity);break;case"PointLight":a=new iu(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new su(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new Kc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new Wc(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=(new lu).fromJSON(e);break;case"SkinnedMesh":s=l(e.geometry),o=c(e.material),a=new io(s,o),void 0!==e.bindMode&&(a.bindMode=e.bindMode),void 0!==e.bindMatrix&&a.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(a.skeleton=e.skeleton);break;case"Mesh":s=l(e.geometry),o=c(e.material),a=new Tn(s,o);break;case"InstancedMesh":s=l(e.geometry),o=c(e.material);const t=e.count,i=e.instanceMatrix,n=e.instanceColor;a=new vo(s,o,t),a.instanceMatrix=new lo(new Float32Array(i.array),16),void 0!==n&&(a.instanceColor=new lo(new Float32Array(n.array),n.itemSize));break;case"LOD":a=new qs;break;case"Line":a=new So(l(e.geometry),c(e.material));break;case"LineLoop":a=new Ro(l(e.geometry),c(e.material));break;case"LineSegments":a=new Mo(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new Io(l(e.geometry),c(e.material));break;case"Sprite":a=new Ws(c(e.material));break;case"Group":a=new ms;break;case"Bone":a=new no;break;default:a=new yi}if(a.uuid=e.uuid,void 0!==e.name&&(a.name=e.name),void 0!==e.matrix?(a.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==e.position&&a.position.fromArray(e.position),void 0!==e.rotation&&a.rotation.fromArray(e.rotation),void 0!==e.quaternion&&a.quaternion.fromArray(e.quaternion),void 0!==e.scale&&a.scale.fromArray(e.scale)),void 0!==e.up&&a.up.fromArray(e.up),void 0!==e.castShadow&&(a.castShadow=e.castShadow),void 0!==e.receiveShadow&&(a.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(a.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(a.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(a.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&a.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(a.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(a.visible=e.visible),void 0!==e.frustumCulled&&(a.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(a.renderOrder=e.renderOrder),void 0!==e.userData&&(a.userData=e.userData),void 0!==e.layers&&(a.layers.mask=e.layers),void 0!==e.children){const s=e.children;for(let e=0;e<s.length;e++)a.add(this.parseObject(s[e],t,i,n,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const i=t[e];a.animations.push(r[i])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(a.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const i=t[e],n=a.getObjectByProperty("uuid",i.object);void 0!==n&&a.addLevel(n,i.distance,i.hysteresis)}}return a}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const i=t[e.skeleton];void 0===i?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(i,e.bindMatrix)}}))}},t.ObjectSpaceNormalMap=1,t.OctahedronBufferGeometry=class extends Zl{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}},t.OctahedronGeometry=Zl,t.OneFactor=201,t.OneMinusDstAlphaFactor=207,t.OneMinusDstColorFactor=209,t.OneMinusSrcAlphaFactor=205,t.OneMinusSrcColorFactor=203,t.OrthographicCamera=ar,t.PCFShadowMap=n,t.PCFSoftShadowMap=r,t.PMREMGenerator=fr,t.Path=rl,t.PerspectiveCamera=In,t.Plane=zn,t.PlaneBufferGeometry=class extends Zn{constructor(e,t,i,n){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,n)}},t.PlaneGeometry=Zn,t.PlaneHelper=class extends So{constructor(e,t=1,i=16776960){const n=i,r=new on;r.setAttribute("position",new Ji([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new bo({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=new on;a.setAttribute("position",new Ji([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),a.computeBoundingSphere(),this.add(new Tn(a,new Vi({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}},t.PointLight=iu,t.PointLightHelper=class extends Tn{constructor(e,t,i){super(new Kl(t,4,2),new Vi({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}},t.Points=Io,t.PointsMaterial=Po,t.PolarGridHelper=class extends Mo{constructor(e=10,t=16,i=8,n=64,r=4473924,a=8947848){r=new Fi(r),a=new Fi(a);const s=[],o=[];if(t>1)for(let i=0;i<t;i++){const n=i/t*(2*Math.PI),l=Math.sin(n)*e,c=Math.cos(n)*e;s.push(0,0,0),s.push(l,0,c);const u=1&i?r:a;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let t=0;t<i;t++){const l=1&t?r:a,c=e-e/i*t;for(let e=0;e<n;e++){let t=e/n*(2*Math.PI),i=Math.sin(t)*c,r=Math.cos(t)*c;s.push(i,0,r),o.push(l.r,l.g,l.b),t=(e+1)/n*(2*Math.PI),i=Math.sin(t)*c,r=Math.cos(t)*c,s.push(i,0,r),o.push(l.r,l.g,l.b)}}const l=new on;l.setAttribute("position",new Ji(s,3)),l.setAttribute("color",new Ji(o,3)),super(l,new bo({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}},t.PolyhedronBufferGeometry=class extends ul{constructor(e,t,i,n){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,n)}},t.PolyhedronGeometry=ul,t.PositionalAudio=class extends Mu{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Ru,Pu,Cu),Du.set(0,0,1).applyQuaternion(Pu);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ru.x,e),t.positionY.linearRampToValueAtTime(Ru.y,e),t.positionZ.linearRampToValueAtTime(Ru.z,e),t.orientationX.linearRampToValueAtTime(Du.x,e),t.orientationY.linearRampToValueAtTime(Du.y,e),t.orientationZ.linearRampToValueAtTime(Du.z,e)}else t.setPosition(Ru.x,Ru.y,Ru.z),t.setOrientation(Du.x,Du.y,Du.z)}},t.PropertyBinding=Fu,t.PropertyMixer=Ou,t.QuadraticBezierCurve=$o,t.QuadraticBezierCurve3=el,t.Quaternion=bt,t.QuaternionKeyframeTrack=Dc,t.QuaternionLinearInterpolant=Cc,t.RED_GREEN_RGTC2_Format=de,t.RED_RGTC1_Format=36283,t.REVISION=i,t.RGBADepthPacking=3201,t.RGBAFormat=U,t.RGBAIntegerFormat=1033,t.RGBA_ASTC_10x10_Format=oe,t.RGBA_ASTC_10x5_Format=re,t.RGBA_ASTC_10x6_Format=ae,t.RGBA_ASTC_10x8_Format=se,t.RGBA_ASTC_12x10_Format=le,t.RGBA_ASTC_12x12_Format=ce,t.RGBA_ASTC_4x4_Format=Q,t.RGBA_ASTC_5x4_Format=K,t.RGBA_ASTC_5x5_Format=J,t.RGBA_ASTC_6x5_Format=$,t.RGBA_ASTC_6x6_Format=ee,t.RGBA_ASTC_8x5_Format=te,t.RGBA_ASTC_8x6_Format=ie,t.RGBA_ASTC_8x8_Format=ne,t.RGBA_BPTC_Format=ue,t.RGBA_ETC2_EAC_Format=q,t.RGBA_PVRTC_2BPPV1_Format=X,t.RGBA_PVRTC_4BPPV1_Format=Y,t.RGBA_S3TC_DXT1_Format=V,t.RGBA_S3TC_DXT3_Format=z,t.RGBA_S3TC_DXT5_Format=H,t.RGB_ETC1_Format=36196,t.RGB_ETC2_Format=Z,t.RGB_PVRTC_2BPPV1_Format=W,t.RGB_PVRTC_4BPPV1_Format=j,t.RGB_S3TC_DXT1_Format=G,t.RGFormat=1030,t.RGIntegerFormat=1031,t.RawShaderMaterial=sc,t.Ray=Zt,t.Raycaster=class{constructor(e,t,i=0,n=1/0){this.ray=new Zt(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new si,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return Wu(e,this,i,t),i.sort(ju),i}intersectObjects(e,t=!0,i=[]){for(let n=0,r=e.length;n<r;n++)Wu(e[n],this,i,t);return i.sort(ju),i}},t.RectAreaLight=su,t.RedFormat=1028,t.RedIntegerFormat=1029,t.ReinhardToneMapping=d,t.RepeatWrapping=E,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=102,t.RingBufferGeometry=class extends ql{constructor(e,t,i,n,r,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,n,r,a)}},t.RingGeometry=ql,t.SIGNED_RED_GREEN_RGTC2_Format=fe,t.SIGNED_RED_RGTC1_Format=he,t.SRGBColorSpace=Se,t.Scene=Ms,t.ShaderChunk=qn,t.ShaderLib=Kn,t.ShaderMaterial=On,t.ShadowMaterial=ac,t.Shape=vl,t.ShapeBufferGeometry=class extends Ql{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}},t.ShapeGeometry=Ql,t.ShapePath=class{constructor(){this.type="ShapePath",this.color=new Fi,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new rl,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,r,a){return this.currentPath.bezierCurveTo(e,t,i,n,r,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const i=t.length;let n=!1;for(let r=i-1,a=0;a<i;r=a++){let i=t[r],s=t[a],o=s.x-i.x,l=s.y-i.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(i=t[a],o=-o,s=t[r],l=-l),e.y<i.y||e.y>s.y)continue;if(e.y===i.y){if(e.x===i.x)return!0}else{const t=l*(e.x-i.x)-o*(e.y-i.y);if(0===t)return!0;if(t<0)continue;n=!n}}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return n}const i=zl.isClockWise,n=this.subPaths;if(0===n.length)return[];let r,a,s;const o=[];if(1===n.length)return a=n[0],s=new vl,s.curves=a.curves,o.push(s),o;let l=!i(n[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let t=0,s=n.length;t<s;t++)a=n[t],h=a.getPoints(),r=i(h),r=e?!r:r,r?(!l&&u[p]&&p++,u[p]={s:new vl,p:h},u[p].s.curves=a.curves,l&&p++,f[p]=[]):f[p].push({h:a,p:h[0]});if(!u[0])return function(e){const t=[];for(let i=0,n=e.length;i<n;i++){const n=e[i],r=new vl;r.curves=n.curves,t.push(r)}return t}(n);if(u.length>1){let e=!1,i=0;for(let e=0,t=u.length;e<t;e++)c[e]=[];for(let n=0,r=u.length;n<r;n++){const r=f[n];for(let a=0;a<r.length;a++){const s=r[a];let o=!0;for(let r=0;r<u.length;r++)t(s.p,u[r].p)&&(n!==r&&i++,o?(o=!1,c[r].push(s)):e=!0);o&&c[n].push(s)}}i>0&&!1===e&&(f=c)}for(let e=0,t=u.length;e<t;e++){s=u[e].s,o.push(s),d=f[e];for(let e=0,t=d.length;e<t;e++)s.holes.push(d[e].h)}return o}},t.ShapeUtils=zl,t.ShortType=1011,t.Skeleton=oo,t.SkeletonHelper=class extends Mo{constructor(e){const t=$u(e),i=new on,n=[],r=[],a=new Fi(0,0,1),s=new Fi(0,1,0);for(let e=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(a.r,a.g,a.b),r.push(s.r,s.g,s.b))}i.setAttribute("position",new Ji(n,3)),i.setAttribute("color",new Ji(r,3)),super(i,new bo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");Ju.copy(this.root.matrixWorld).invert();for(let e=0,i=0;e<t.length;e++){const r=t[e];r.parent&&r.parent.isBone&&(Ku.multiplyMatrices(Ju,r.matrixWorld),Qu.setFromMatrixPosition(Ku),n.setXYZ(i,Qu.x,Qu.y,Qu.z),Ku.multiplyMatrices(Ju,r.parent.matrixWorld),Qu.setFromMatrixPosition(Ku),n.setXYZ(i+1,Qu.x,Qu.y,Qu.z),i+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}},t.SkinnedMesh=io,t.Source=ut,t.Sphere=Gt,t.SphereBufferGeometry=class extends Kl{constructor(e,t,i,n,r,a,s){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,n,r,a,s)}},t.SphereGeometry=Kl,t.Spherical=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Ue(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}},t.SphericalHarmonics3=ou,t.SplineCurve=tl,t.SpotLight=Kc,t.SpotLightHelper=class extends yi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new on,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,i=32;e<i;e++,t++){const r=e/i*Math.PI*2,a=t/i*Math.PI*2;n.push(Math.cos(r),Math.sin(r),1,Math.cos(a),Math.sin(a),1)}i.setAttribute("position",new Ji(n,3));const r=new bo({fog:!1,toneMapped:!1});this.cone=new Mo(i,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),qu.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(qu),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}},t.Sprite=Ws,t.SpriteMaterial=Ds,t.SrcAlphaFactor=204,t.SrcAlphaSaturateFactor=210,t.SrcColorFactor=202,t.StaticCopyUsage=35046,t.StaticDrawUsage=Re,t.StaticReadUsage=35045,t.StereoCamera=class{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new In,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new In,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,yu.copy(e.projectionMatrix);const i=t.eyeSep/2,n=i*t.near/t.focus,r=t.near*Math.tan(Ie*t.fov*.5)/t.zoom;let a,s;_u.elements[12]=-i,bu.elements[12]=i,a=-r*t.aspect+n,s=r*t.aspect+n,yu.elements[0]=2*t.near/(s-a),yu.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(yu),a=-r*t.aspect-n,s=r*t.aspect-n,yu.elements[0]=2*t.near/(s-a),yu.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(yu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_u),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(bu)}},t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Oc,t.SubtractEquation=101,t.SubtractiveBlending=3,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=0,t.TetrahedronBufferGeometry=class extends Jl{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}},t.TetrahedronGeometry=Jl,t.Texture=ft,t.TextureLoader=class extends Fc{constructor(e){super(e)}load(e,t,i,n){const r=new ft,a=new Hc(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,(function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)}),i,n),r}},t.TorusBufferGeometry=class extends $l{constructor(e,t,i,n,r){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,n,r)}},t.TorusGeometry=$l,t.TorusKnotBufferGeometry=class extends ec{constructor(e,t,i,n,r,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,n,r,a)}},t.TorusKnotGeometry=ec,t.Triangle=Oi,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=class extends tc{constructor(e,t,i,n,r){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,n,r)}},t.TubeGeometry=tc,t.TwoPassDoubleSide=2,t.UVMapping=g,t.Uint16BufferAttribute=Qi,t.Uint32BufferAttribute=Ki,t.Uint8BufferAttribute=class extends qi{constructor(e,t,i){super(new Uint8Array(e),t,i)}},t.Uint8ClampedBufferAttribute=class extends qi{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}},t.Uniform=zu,t.UniformsGroup=class extends De{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Hu++}),this.name="",this.usage=Re,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,i=t.length;e<i;e++)this.uniforms.push(t[e].clone());return this}clone(){return(new this.constructor).copy(this)}},t.UniformsLib=Qn,t.UniformsUtils=Dn,t.UnsignedByteType=D,t.UnsignedInt248Type=L,t.UnsignedIntType=k,t.UnsignedShort4444Type=1017,t.UnsignedShort5551Type=1018,t.UnsignedShortType=O,t.VSMShadowMap=a,t.Vector2=Ye,t.Vector3=_t,t.Vector4=pt,t.VectorKeyframeTrack=kc,t.VideoTexture=class extends ft{constructor(e,t,i,n,r,a,s,o,l){super(e,t,i,n,r,a,s,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==a?a:R,this.magFilter=void 0!==r?r:R,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1=="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}},t.WebGL1Renderer=Ss,t.WebGL3DRenderTarget=class extends mt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new vt(null,e,t,i),this.texture.isRenderTargetTexture=!0}},t.WebGLArrayRenderTarget=class extends mt{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new gt(null,e,t,i),this.texture.isRenderTargetTexture=!0}},t.WebGLCubeRenderTarget=Bn,t.WebGLMultipleRenderTargets=class extends mt{constructor(e=1,t=1,i=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let e=0;e<i;e++)this.texture[e]=r.clone(),this.texture[e].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.texture.length;n<r;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}},t.WebGLRenderTarget=mt,t.WebGLRenderer=ws,t.WebGLUtils=fs,t.WireframeGeometry=ic,t.WrapAroundEnding=_e,t.ZeroCurvatureEnding=ve,t.ZeroFactor=200,t.ZeroSlopeEnding=be,t.ZeroStencilOp=0,t._SRGBAFormat=Ce,t.sRGBEncoding=Ee}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,i),a.exports}i.amdO={},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e,t,n=i(3256);t=function*(){yield(0,n.d1)({canvas:document.getElementById("canvas"),id:"myViewport"});const e=yield(0,n.ed)({ticket:"79df891798a23a8596475596ac590e1c21ff8596b8e23e6422fbf92749a525094fec8d6ab10dc8a8d37ee378f05b5d6fd87f7079791157c6112abfd56a5861280ea3ffef8d7884c224cd37ea09c4a8f365abbfe0ca134e81f357c80fc6225bbc03b2373bcffc5d-e2c3ae5be7eab340af68c56078c2a936",modelViewUrl:"https://sdeuc1.eu-central-1.shapediver.com",id:"mySession"});e.getParameterByName("Length")[0].value=6,yield e.customize()},new((e=void 0)||(e=Promise))((function(i,n){function r(e){try{s(t.next(e))}catch(e){n(e)}}function a(e){try{s(t.throw(e))}catch(e){n(e)}}function s(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(e){e(n)}))).then(r,a)}s((t=t.apply(void 0,[])).next())}))})()})();